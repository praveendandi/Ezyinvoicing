(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{PdH4:function(e,t,n){e.exports=function(){"use strict";const e="SweetAlert2:",t=e=>e.charAt(0).toUpperCase()+e.slice(1),n=e=>Array.prototype.slice.call(e),r=t=>{console.warn("".concat(e," ").concat("object"==typeof t?t.join(" "):t))},i=t=>{console.error("".concat(e," ").concat(t))},o=[],a=e=>"function"==typeof e?e():e,s=e=>e&&"function"==typeof e.toPromise,u=e=>s(e)?e.toPromise():Promise.resolve(e),c=e=>e&&Promise.resolve(e)===e,l={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},d=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],h={},g=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],f=e=>Object.prototype.hasOwnProperty.call(l,e),m=e=>-1!==d.indexOf(e),p=e=>h[e],_=e=>{f(e)||r('Unknown parameter "'.concat(e,'"'))},v=e=>{g.includes(e)&&r('The parameter "'.concat(e,'" is incompatible with toasts'))},I=e=>{var t,n,i;p(e)&&(t=e,n=p(e),i='"'.concat(t,'" is deprecated and will be removed in the next major release. Please use "').concat(n,'" instead.'),o.includes(i)||(o.push(i),r(i)))},y=e=>{const t={};for(const n in e)t[e[n]]="swal2-"+e[n];return t},b=y(["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","no-war"]),D=y(["success","warning","info","question","error"]),T=()=>document.body.querySelector(".".concat(b.container)),S=e=>{const t=T();return t?t.querySelector(e):null},w=e=>S(".".concat(e)),C=()=>w(b.popup),E=()=>w(b.icon),M=()=>w(b.title),P=()=>w(b["html-container"]),A=()=>w(b.image),x=()=>w(b["progress-steps"]),R=()=>w(b["validation-message"]),k=()=>S(".".concat(b.actions," .").concat(b.confirm)),L=()=>S(".".concat(b.actions," .").concat(b.deny)),F=()=>S(".".concat(b.loader)),W=()=>S(".".concat(b.actions," .").concat(b.cancel)),O=()=>w(b.actions),B=()=>w(b.footer),N=()=>w(b["timer-progress-bar"]),V=()=>w(b.close),U=()=>{const e=n(C().querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])')).sort((e,t)=>{const n=parseInt(e.getAttribute("tabindex")),r=parseInt(t.getAttribute("tabindex"));return n>r?1:n<r?-1:0}),t=n(C().querySelectorAll('\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n')).filter(e=>"-1"!==e.getAttribute("tabindex"));return(e=>{const t=[];for(let n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t})(e.concat(t)).filter(e=>oe(e))},G=()=>K(document.body,b.shown)&&!K(document.body,b["toast-shown"])&&!K(document.body,b["no-backdrop"]),j=()=>C()&&K(C(),b.toast),H={previousBodyPadding:null},z=(e,t)=>{if(e.textContent="",t){const r=(new DOMParser).parseFromString(t,"text/html");n(r.querySelector("head").childNodes).forEach(t=>{e.appendChild(t)}),n(r.querySelector("body").childNodes).forEach(t=>{e.appendChild(t)})}},K=(e,t)=>{if(!t)return!1;const n=t.split(/\s+/);for(let r=0;r<n.length;r++)if(!e.classList.contains(n[r]))return!1;return!0},J=(e,t,i)=>{if(((e,t)=>{n(e.classList).forEach(n=>{Object.values(b).includes(n)||Object.values(D).includes(n)||Object.values(t.showClass).includes(n)||e.classList.remove(n)})})(e,t),t.customClass&&t.customClass[i]){if("string"!=typeof t.customClass[i]&&!t.customClass[i].forEach)return r("Invalid type of customClass.".concat(i,'! Expected string or iterable object, got "').concat(typeof t.customClass[i],'"'));Z(e,t.customClass[i])}},Y=(e,t)=>{if(!t)return null;switch(t){case"select":case"textarea":case"file":return e.querySelector(".".concat(b.popup," > .").concat(b[t]));case"checkbox":return e.querySelector(".".concat(b.popup," > .").concat(b.checkbox," input"));case"radio":return e.querySelector(".".concat(b.popup," > .").concat(b.radio," input:checked"))||e.querySelector(".".concat(b.popup," > .").concat(b.radio," input:first-child"));case"range":return e.querySelector(".".concat(b.popup," > .").concat(b.range," input"));default:return e.querySelector(".".concat(b.popup," > .").concat(b.input))}},X=e=>{if(e.focus(),"file"!==e.type){const t=e.value;e.value="",e.value=t}},Q=(e,t,n)=>{e&&t&&("string"==typeof t&&(t=t.split(/\s+/).filter(Boolean)),t.forEach(t=>{Array.isArray(e)?e.forEach(e=>{n?e.classList.add(t):e.classList.remove(t)}):n?e.classList.add(t):e.classList.remove(t)}))},Z=(e,t)=>{Q(e,t,!0)},q=(e,t)=>{Q(e,t,!1)},$=(e,t)=>{const r=n(e.childNodes);for(let n=0;n<r.length;n++)if(K(r[n],t))return r[n]},ee=(e,t,n)=>{n==="".concat(parseInt(n))&&(n=parseInt(n)),n||0===parseInt(n)?e.style[t]="number"==typeof n?"".concat(n,"px"):n:e.style.removeProperty(t)},te=function(e){e.style.display=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex"},ne=e=>{e.style.display="none"},re=(e,t,n,r)=>{const i=e.querySelector(t);i&&(i.style[n]=r)},ie=function(e,t){t?te(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"flex"):ne(e)},oe=e=>!(!e||!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)),ae=e=>!!(e.scrollHeight>e.clientHeight),se=e=>{const t=window.getComputedStyle(e),n=parseFloat(t.getPropertyValue("animation-duration")||"0"),r=parseFloat(t.getPropertyValue("transition-duration")||"0");return n>0||r>0},ue=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=N();oe(n)&&(t&&(n.style.transition="none",n.style.width="100%"),setTimeout(()=>{n.style.transition="width ".concat(e/1e3,"s linear"),n.style.width="0%"},10))},ce=()=>"undefined"==typeof window||"undefined"==typeof document,le={},de='\n <div aria-labelledby="'.concat(b.title,'" aria-describedby="').concat(b["html-container"],'" class="').concat(b.popup,'" tabindex="-1">\n   <button type="button" class="').concat(b.close,'"></button>\n   <ul class="').concat(b["progress-steps"],'"></ul>\n   <div class="').concat(b.icon,'"></div>\n   <img class="').concat(b.image,'" />\n   <h2 class="').concat(b.title,'" id="').concat(b.title,'"></h2>\n   <div class="').concat(b["html-container"],'" id="').concat(b["html-container"],'"></div>\n   <input class="').concat(b.input,'" />\n   <input type="file" class="').concat(b.file,'" />\n   <div class="').concat(b.range,'">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="').concat(b.select,'"></select>\n   <div class="').concat(b.radio,'"></div>\n   <label for="').concat(b.checkbox,'" class="').concat(b.checkbox,'">\n     <input type="checkbox" />\n     <span class="').concat(b.label,'"></span>\n   </label>\n   <textarea class="').concat(b.textarea,'"></textarea>\n   <div class="').concat(b["validation-message"],'" id="').concat(b["validation-message"],'"></div>\n   <div class="').concat(b.actions,'">\n     <div class="').concat(b.loader,'"></div>\n     <button type="button" class="').concat(b.confirm,'"></button>\n     <button type="button" class="').concat(b.deny,'"></button>\n     <button type="button" class="').concat(b.cancel,'"></button>\n   </div>\n   <div class="').concat(b.footer,'"></div>\n   <div class="').concat(b["timer-progress-bar-container"],'">\n     <div class="').concat(b["timer-progress-bar"],'"></div>\n   </div>\n </div>\n').replace(/(^|\n)\s*/g,""),he=()=>{le.currentInstance.resetValidationMessage()},ge=(e,t)=>{e instanceof HTMLElement?t.appendChild(e):"object"==typeof e?fe(e,t):e&&z(t,e)},fe=(e,t)=>{e.jquery?me(t,e):z(t,e.toString())},me=(e,t)=>{if(e.textContent="",0 in t)for(let n=0;n in t;n++)e.appendChild(t[n].cloneNode(!0));else e.appendChild(t.cloneNode(!0))},pe=(()=>{if(ce())return!1;const e=document.createElement("div"),t={WebkitAnimation:"webkitAnimationEnd",animation:"animationend"};for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&void 0!==e.style[n])return t[n];return!1})();function _e(e,n,r){ie(e,r["show".concat(t(n),"Button")],"inline-block"),z(e,r["".concat(n,"ButtonText")]),e.setAttribute("aria-label",r["".concat(n,"ButtonAriaLabel")]),e.className=b[n],J(e,r,"".concat(n,"Button")),Z(e,r["".concat(n,"ButtonClass")])}var ve={awaitingPromise:new WeakMap,promise:new WeakMap,innerParams:new WeakMap,domCache:new WeakMap};const Ie=["input","file","range","select","radio","checkbox","textarea"],ye=(e,t)=>{e.placeholder&&!t.inputPlaceholder||(e.placeholder=t.inputPlaceholder)},be=(e,t,n)=>{if(n.inputLabel){e.id=b.input;const r=document.createElement("label"),i=b["input-label"];r.setAttribute("for",e.id),r.className=i,"object"==typeof n.customClass&&Z(r,n.customClass.inputLabel),r.innerText=n.inputLabel,t.insertAdjacentElement("beforebegin",r)}},De=e=>$(C(),b[e]||b.input),Te=(e,t)=>{["string","number"].includes(typeof t)?e.value="".concat(t):c(t)||r('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(typeof t,'"'))},Se={};Se.text=Se.email=Se.password=Se.number=Se.tel=Se.url=(e,t)=>(Te(e,t.inputValue),be(e,e,t),ye(e,t),e.type=t.input,e),Se.file=(e,t)=>(be(e,e,t),ye(e,t),e),Se.range=(e,t)=>{const n=e.querySelector("input"),r=e.querySelector("output");return Te(n,t.inputValue),n.type=t.input,Te(r,t.inputValue),be(n,e,t),e},Se.select=(e,t)=>{if(e.textContent="",t.inputPlaceholder){const n=document.createElement("option");z(n,t.inputPlaceholder),n.value="",n.disabled=!0,n.selected=!0,e.appendChild(n)}return be(e,e,t),e},Se.radio=e=>(e.textContent="",e),Se.checkbox=(e,t)=>{const n=Y(C(),"checkbox");n.value="1",n.id=b.checkbox,n.checked=Boolean(t.inputValue);const r=e.querySelector("span");return z(r,t.inputPlaceholder),n},Se.textarea=(e,t)=>(Te(e,t.inputValue),ye(e,t),be(e,e,t),setTimeout(()=>{if("MutationObserver"in window){const t=parseInt(window.getComputedStyle(C()).width);new MutationObserver(()=>{const n=e.offsetWidth+(r=e,parseInt(window.getComputedStyle(r).marginLeft)+parseInt(window.getComputedStyle(r).marginRight));var r;C().style.width=n>t?"".concat(n,"px"):null}).observe(e,{attributes:!0,attributeFilter:["style"]})}}),e);const we=(e,t)=>{const n=P();J(n,t,"htmlContainer"),t.html?(ge(t.html,n),te(n,"block")):t.text?(n.textContent=t.text,te(n,"block")):ne(n),((e,t)=>{const n=C(),r=ve.innerParams.get(e),o=!r||t.input!==r.input;Ie.forEach(e=>{const r=$(n,b[e]);((e,t)=>{const n=Y(C(),e);if(n){(e=>{for(let t=0;t<e.attributes.length;t++){const n=e.attributes[t].name;["type","value","style"].includes(n)||e.removeAttribute(n)}})(n);for(const e in t)n.setAttribute(e,t[e])}})(e,t.inputAttributes),r.className=b[e],o&&ne(r)}),t.input&&(o&&(e=>{if(!Se[e.input])return i('Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "'.concat(e.input,'"'));const t=De(e.input),n=Se[e.input](t,e);te(t),setTimeout(()=>{X(n)})})(t),(e=>{const t=De(e.input);"object"==typeof e.customClass&&Z(t,e.customClass.input)})(t))})(e,t)},Ce=(e,t)=>{for(const n in D)t.icon!==n&&q(e,D[n]);Z(e,D[t.icon]),Pe(e,t),Ee(),J(e,t,"icon")},Ee=()=>{const e=C(),t=window.getComputedStyle(e).getPropertyValue("background-color"),n=e.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let r=0;r<n.length;r++)n[r].style.backgroundColor=t},Me=(e,t)=>{let n,r=e.innerHTML;t.iconHtml?n=Ae(t.iconHtml):"success"===t.icon?(n='\n  <div class="swal2-success-circular-line-left"></div>\n  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n  <div class="swal2-success-circular-line-right"></div>\n',r=r.replace(/ style=".*?"/g,"")):n="error"===t.icon?'\n  <span class="swal2-x-mark">\n    <span class="swal2-x-mark-line-left"></span>\n    <span class="swal2-x-mark-line-right"></span>\n  </span>\n':Ae({question:"?",warning:"!",info:"i"}[t.icon]),r.trim()!==n.trim()&&z(e,n)},Pe=(e,t)=>{if(t.iconColor){e.style.color=t.iconColor,e.style.borderColor=t.iconColor;for(const n of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])re(e,n,"backgroundColor",t.iconColor);re(e,".swal2-success-ring","borderColor",t.iconColor)}},Ae=e=>'<div class="'.concat(b["icon-content"],'">').concat(e,"</div>"),xe=(e,t)=>{((e,t)=>{const n=T(),r=C();t.toast?(ee(n,"width",t.width),r.style.width="100%",r.insertBefore(F(),E())):ee(r,"width",t.width),ee(r,"padding",t.padding),t.color&&(r.style.color=t.color),t.background&&(r.style.background=t.background),ne(R()),((e,t)=>{e.className="".concat(b.popup," ").concat(oe(e)?t.showClass.popup:""),t.toast?(Z([document.documentElement,document.body],b["toast-shown"]),Z(e,b.toast)):Z(e,b.modal),J(e,t,"popup"),"string"==typeof t.customClass&&Z(e,t.customClass),t.icon&&Z(e,b["icon-".concat(t.icon)])})(r,t)})(0,t),((e,t)=>{const n=T();n&&(function(e,t){"string"==typeof t?e.style.background=t:t||Z([document.documentElement,document.body],b["no-backdrop"])}(n,t.backdrop),function(e,t){t in b?Z(e,b[t]):(r('The "position" parameter is not valid, defaulting to "center"'),Z(e,b.center))}(n,t.position),function(e,t){if(t&&"string"==typeof t){const n="grow-".concat(t);n in b&&Z(e,b[n])}}(n,t.grow),J(n,t,"container"))})(0,t),((e,t)=>{const n=x();if(!t.progressSteps||0===t.progressSteps.length)return ne(n);te(n),n.textContent="",t.currentProgressStep>=t.progressSteps.length&&r("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),t.progressSteps.forEach((e,r)=>{const i=(e=>{const t=document.createElement("li");return Z(t,b["progress-step"]),z(t,e),t})(e);if(n.appendChild(i),r===t.currentProgressStep&&Z(i,b["active-progress-step"]),r!==t.progressSteps.length-1){const e=(e=>{const t=document.createElement("li");return Z(t,b["progress-step-line"]),e.progressStepsDistance&&ee(t,"width",e.progressStepsDistance),t})(t);n.appendChild(e)}})})(0,t),((e,t)=>{const n=ve.innerParams.get(e),r=E();if(n&&t.icon===n.icon)return Me(r,t),void Ce(r,t);if(t.icon||t.iconHtml){if(t.icon&&-1===Object.keys(D).indexOf(t.icon))return i('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(t.icon,'"')),void ne(r);te(r),Me(r,t),Ce(r,t),Z(r,t.showClass.icon)}else ne(r)})(e,t),((e,t)=>{const n=A();if(!t.imageUrl)return ne(n);te(n,""),n.setAttribute("src",t.imageUrl),n.setAttribute("alt",t.imageAlt),ee(n,"width",t.imageWidth),ee(n,"height",t.imageHeight),n.className=b.image,J(n,t,"image")})(0,t),((e,t)=>{const n=M();ie(n,t.title||t.titleText,"block"),t.title&&ge(t.title,n),t.titleText&&(n.innerText=t.titleText),J(n,t,"title")})(0,t),((e,t)=>{const n=V();z(n,t.closeButtonHtml),J(n,t,"closeButton"),ie(n,t.showCloseButton),n.setAttribute("aria-label",t.closeButtonAriaLabel)})(0,t),we(e,t),((e,t)=>{const n=O(),r=F();t.showConfirmButton||t.showDenyButton||t.showCancelButton?te(n):ne(n),J(n,t,"actions"),function(e,t,n){const r=k(),i=L(),o=W();_e(r,"confirm",n),_e(i,"deny",n),_e(o,"cancel",n),function(e,t,n,r){if(!r.buttonsStyling)return q([e,t,n],b.styled);Z([e,t,n],b.styled),r.confirmButtonColor&&(e.style.backgroundColor=r.confirmButtonColor,Z(e,b["default-outline"])),r.denyButtonColor&&(t.style.backgroundColor=r.denyButtonColor,Z(t,b["default-outline"])),r.cancelButtonColor&&(n.style.backgroundColor=r.cancelButtonColor,Z(n,b["default-outline"]))}(r,i,o,n),n.reverseButtons&&(n.toast?(e.insertBefore(o,r),e.insertBefore(i,r)):(e.insertBefore(o,t),e.insertBefore(i,t),e.insertBefore(r,t)))}(n,r,t),z(r,t.loaderHtml),J(r,t,"loader")})(0,t),((e,t)=>{const n=B();ie(n,t.footer),t.footer&&ge(t.footer,n),J(n,t,"footer")})(0,t),"function"==typeof t.didRender&&t.didRender(C())},Re=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),ke=()=>{n(document.body.children).forEach(e=>{e.hasAttribute("data-previous-aria-hidden")?(e.setAttribute("aria-hidden",e.getAttribute("data-previous-aria-hidden")),e.removeAttribute("data-previous-aria-hidden")):e.removeAttribute("aria-hidden")})},Le=["swal-title","swal-html","swal-footer"],Fe=(e,t)=>{n(e.attributes).forEach(n=>{-1===t.indexOf(n.name)&&r(['Unrecognized attribute "'.concat(n.name,'" on <').concat(e.tagName.toLowerCase(),">."),"".concat(t.length?"Allowed attributes are: ".concat(t.join(", ")):"To set the value, use HTML within the element.")])})};var We={email:(e,t)=>/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid email address"),url:(e,t)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid URL")};function Oe(e){(function(e){e.inputValidator||Object.keys(We).forEach(t=>{e.input===t&&(e.inputValidator=We[t])})})(e),e.showLoaderOnConfirm&&!e.preConfirm&&r("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),function(e){(!e.target||"string"==typeof e.target&&!document.querySelector(e.target)||"string"!=typeof e.target&&!e.target.appendChild)&&(r('Target parameter is not valid, defaulting to "body"'),e.target="body")}(e),"string"==typeof e.title&&(e.title=e.title.split("\n").join("<br />")),(e=>{const t=(()=>{const e=T();return!!e&&(e.remove(),q([document.documentElement,document.body],[b["no-backdrop"],b["toast-shown"],b["has-column"]]),!0)})();if(ce())return void i("SweetAlert2 requires document to initialize");const n=document.createElement("div");n.className=b.container,t&&Z(n,b["no-transition"]),z(n,de);const r="string"==typeof(o=e.target)?document.querySelector(o):o;var o;r.appendChild(n),(e=>{const t=C();t.setAttribute("role",e.toast?"alert":"dialog"),t.setAttribute("aria-live",e.toast?"polite":"assertive"),e.toast||t.setAttribute("aria-modal","true")})(e),(e=>{"rtl"===window.getComputedStyle(e).direction&&Z(T(),b.rtl)})(r),(()=>{const e=C(),t=$(e,b.input),n=$(e,b.file),r=e.querySelector(".".concat(b.range," input")),i=e.querySelector(".".concat(b.range," output")),o=$(e,b.select),a=e.querySelector(".".concat(b.checkbox," input")),s=$(e,b.textarea);t.oninput=he,n.onchange=he,o.onchange=he,a.onchange=he,s.oninput=he,r.oninput=()=>{he(),i.value=r.value},r.onchange=()=>{he(),i.value=r.value}})()})(e)}class Be{constructor(e,t){this.callback=e,this.remaining=t,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}increase(e){const t=this.running;return t&&this.stop(),this.remaining+=e,t&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const Ne=e=>{const t=e.target,n=T();return!(Ve(e)||Ue(e)||t!==n&&(ae(n)||"INPUT"===t.tagName||"TEXTAREA"===t.tagName||ae(P())&&P().contains(t)))},Ve=e=>e.touches&&e.touches.length&&"stylus"===e.touches[0].touchType,Ue=e=>e.touches&&e.touches.length>1,Ge=e=>{const t=C();if(e.target!==t)return;const n=T();t.removeEventListener(pe,Ge),n.style.overflowY="auto"},je=(e,t)=>{pe&&se(t)?(e.style.overflowY="hidden",t.addEventListener(pe,Ge)):e.style.overflowY="auto"},He=(e,t,n)=>{(()=>{if((/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&!K(document.body,b.iosfix)){const e=document.body.scrollTop;document.body.style.top="".concat(-1*e,"px"),Z(document.body,b.iosfix),(()=>{const e=T();let t;e.ontouchstart=e=>{t=Ne(e)},e.ontouchmove=e=>{t&&(e.preventDefault(),e.stopPropagation())}})(),(()=>{const e=navigator.userAgent,t=!!e.match(/iPad/i)||!!e.match(/iPhone/i),n=!!e.match(/WebKit/i);if(t&&n&&!e.match(/CriOS/i)){const e=44;C().scrollHeight>window.innerHeight-e&&(T().style.paddingBottom="".concat(e,"px"))}})()}})(),t&&"hidden"!==n&&(null===H.previousBodyPadding&&document.body.scrollHeight>window.innerHeight&&(H.previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(H.previousBodyPadding+(()=>{const e=document.createElement("div");e.className=b["scrollbar-measure"],document.body.appendChild(e);const t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t})(),"px"))),setTimeout(()=>{e.scrollTop=0})},ze=(e,t,n)=>{Z(e,n.showClass.backdrop),t.style.setProperty("opacity","0","important"),te(t,"grid"),setTimeout(()=>{Z(t,n.showClass.popup),t.style.removeProperty("opacity")},10),Z([document.documentElement,document.body],b.shown),n.heightAuto&&n.backdrop&&!n.toast&&Z([document.documentElement,document.body],b["height-auto"])},Ke=e=>{let t=C();t||new Kt,t=C();const n=F();j()?ne(E()):Je(t,e),te(n),t.setAttribute("data-loading","true"),t.setAttribute("aria-busy","true"),t.focus()},Je=(e,t)=>{const n=O(),r=F();!t&&oe(k())&&(t=k()),te(n),t&&(ne(t),r.setAttribute("data-button-to-replace",t.className)),r.parentNode.insertBefore(r,t),Z([e,n],b.loading)},Ye={select:(e,t,n)=>{const r=$(e,b.select),i=(e,t,r)=>{const i=document.createElement("option");i.value=r,z(i,t),i.selected=Qe(r,n.inputValue),e.appendChild(i)};t.forEach(e=>{const t=e[0],n=e[1];if(Array.isArray(n)){const e=document.createElement("optgroup");e.label=t,e.disabled=!1,r.appendChild(e),n.forEach(t=>i(e,t[1],t[0]))}else i(r,n,t)}),r.focus()},radio:(e,t,n)=>{const r=$(e,b.radio);t.forEach(e=>{const t=e[0],i=e[1],o=document.createElement("input"),a=document.createElement("label");o.type="radio",o.name=b.radio,o.value=t,Qe(t,n.inputValue)&&(o.checked=!0);const s=document.createElement("span");z(s,i),s.className=b.label,a.appendChild(o),a.appendChild(s),r.appendChild(a)});const i=r.querySelectorAll("input");i.length&&i[0].focus()}},Xe=e=>{const t=[];return"undefined"!=typeof Map&&e instanceof Map?e.forEach((e,n)=>{let r=e;"object"==typeof r&&(r=Xe(r)),t.push([n,r])}):Object.keys(e).forEach(n=>{let r=e[n];"object"==typeof r&&(r=Xe(r)),t.push([n,r])}),t},Qe=(e,t)=>t&&t.toString()===e.toString();function Ze(){const e=ve.innerParams.get(this);if(!e)return;const t=ve.domCache.get(this);ne(t.loader),j()?e.icon&&te(E()):qe(t),q([t.popup,t.actions],b.loading),t.popup.removeAttribute("aria-busy"),t.popup.removeAttribute("data-loading"),t.confirmButton.disabled=!1,t.denyButton.disabled=!1,t.cancelButton.disabled=!1}const qe=e=>{const t=e.popup.getElementsByClassName(e.loader.getAttribute("data-button-to-replace"));t.length?te(t[0],"inline-block"):!oe(k())&&!oe(L())&&!oe(W())&&ne(e.actions)};var $e={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const et=()=>k()&&k().click(),tt=e=>{e.keydownTarget&&e.keydownHandlerAdded&&(e.keydownTarget.removeEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!1)},nt=(e,t,n)=>{const r=U();if(r.length)return(t+=n)===r.length?t=0:-1===t&&(t=r.length-1),r[t].focus();C().focus()},rt=["ArrowRight","ArrowDown"],it=["ArrowLeft","ArrowUp"],ot=(e,t,n)=>{if(a(n.allowEnterKey)&&t.target&&e.getInput()&&t.target instanceof HTMLElement&&t.target.outerHTML===e.getInput().outerHTML){if(["textarea","file"].includes(n.input))return;et(),t.preventDefault()}},at=(e,t)=>{const n=e.target,r=U();let i=-1;for(let o=0;o<r.length;o++)if(n===r[o]){i=o;break}nt(0,i,e.shiftKey?-1:1),e.stopPropagation(),e.preventDefault()},st=e=>{const t=k(),n=L(),r=W();if(document.activeElement instanceof HTMLElement&&![t,n,r].includes(document.activeElement))return;const i=rt.includes(e)?"nextElementSibling":"previousElementSibling";let o=document.activeElement;for(let a=0;a<O().children.length;a++){if(o=o[i],!o)return;if(o instanceof HTMLButtonElement&&oe(o))break}o instanceof HTMLButtonElement&&o.focus()},ut=(e,t,n)=>{a(t.allowEscapeKey)&&(e.preventDefault(),n(Re.esc))};function ct(e,t,n,r){j()?pt(e,r):((e=>new Promise(t=>{if(!e)return t();const n=window.scrollX,r=window.scrollY;le.restoreFocusTimeout=setTimeout(()=>{le.previousActiveElement instanceof HTMLElement?(le.previousActiveElement.focus(),le.previousActiveElement=null):document.body&&document.body.focus(),t()},100),window.scrollTo(n,r)}))(n).then(()=>pt(e,r)),tt(le)),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?(t.setAttribute("style","display:none !important"),t.removeAttribute("class"),t.innerHTML=""):t.remove(),G()&&(null!==H.previousBodyPadding&&(document.body.style.paddingRight="".concat(H.previousBodyPadding,"px"),H.previousBodyPadding=null),(()=>{if(K(document.body,b.iosfix)){const e=parseInt(document.body.style.top,10);q(document.body,b.iosfix),document.body.style.top="",document.body.scrollTop=-1*e}})(),ke()),q([document.documentElement,document.body],[b.shown,b["height-auto"],b["no-backdrop"],b["toast-shown"]])}function lt(e){e=gt(e);const t=$e.swalPromiseResolve.get(this),n=dt(this);this.isAwaitingPromise()?e.isDismissed||(ht(this),t(e)):n&&t(e)}const dt=e=>{const t=C();if(!t)return!1;const n=ve.innerParams.get(e);if(!n||K(t,n.hideClass.popup))return!1;q(t,n.showClass.popup),Z(t,n.hideClass.popup);const r=T();return q(r,n.showClass.backdrop),Z(r,n.hideClass.backdrop),ft(e,t,n),!0},ht=e=>{e.isAwaitingPromise()&&(ve.awaitingPromise.delete(e),ve.innerParams.get(e)||e._destroy())},gt=e=>void 0===e?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},e),ft=(e,t,n)=>{const r=T(),i=pe&&se(t);"function"==typeof n.willClose&&n.willClose(t),i?mt(e,t,r,n.returnFocus,n.didClose):ct(e,r,n.returnFocus,n.didClose)},mt=(e,t,n,r,i)=>{le.swalCloseEventFinishedCallback=ct.bind(null,e,n,r,i),t.addEventListener(pe,(function(e){e.target===t&&(le.swalCloseEventFinishedCallback(),delete le.swalCloseEventFinishedCallback)}))},pt=(e,t)=>{setTimeout(()=>{"function"==typeof t&&t.bind(e.params)(),e._destroy()})};function _t(e,t,n){const r=ve.domCache.get(e);t.forEach(e=>{r[e].disabled=n})}function vt(e,t){if(!e)return!1;if("radio"===e.type){const n=e.parentNode.parentNode.querySelectorAll("input");for(let e=0;e<n.length;e++)n[e].disabled=t}else e.disabled=t}const It=e=>{e.isAwaitingPromise()?(yt(ve,e),ve.awaitingPromise.set(e,!0)):(yt($e,e),yt(ve,e))},yt=(e,t)=>{for(const n in e)e[n].delete(t)};var bt=Object.freeze({hideLoading:Ze,disableLoading:Ze,getInput:function(e){const t=ve.innerParams.get(e||this),n=ve.domCache.get(e||this);return n?Y(n.popup,t.input):null},close:lt,isAwaitingPromise:function(){return!!ve.awaitingPromise.get(this)},rejectPromise:function(e){const t=$e.swalPromiseReject.get(this);ht(this),t&&t(e)},handleAwaitingPromise:ht,closePopup:lt,closeModal:lt,closeToast:lt,enableButtons:function(){_t(this,["confirmButton","denyButton","cancelButton"],!1)},disableButtons:function(){_t(this,["confirmButton","denyButton","cancelButton"],!0)},enableInput:function(){return vt(this.getInput(),!1)},disableInput:function(){return vt(this.getInput(),!0)},showValidationMessage:function(e){const t=ve.domCache.get(this),n=ve.innerParams.get(this);z(t.validationMessage,e),t.validationMessage.className=b["validation-message"],n.customClass&&n.customClass.validationMessage&&Z(t.validationMessage,n.customClass.validationMessage),te(t.validationMessage);const r=this.getInput();r&&(r.setAttribute("aria-invalid",!0),r.setAttribute("aria-describedby",b["validation-message"]),X(r),Z(r,b.inputerror))},resetValidationMessage:function(){const e=ve.domCache.get(this);e.validationMessage&&ne(e.validationMessage);const t=this.getInput();t&&(t.removeAttribute("aria-invalid"),t.removeAttribute("aria-describedby"),q(t,b.inputerror))},getProgressSteps:function(){return ve.domCache.get(this).progressSteps},update:function(e){const t=C(),n=ve.innerParams.get(this);if(!t||K(t,n.hideClass.popup))return r("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const i=(e=>{const t={};return Object.keys(e).forEach(n=>{m(n)?t[n]=e[n]:r("Invalid parameter to update: ".concat(n))}),t})(e),o=Object.assign({},n,i);xe(this,o),ve.innerParams.set(this,o),Object.defineProperties(this,{params:{value:Object.assign({},this.params,e),writable:!1,enumerable:!0}})},_destroy:function(){const e=ve.domCache.get(this),t=ve.innerParams.get(this);var n;t?(e.popup&&le.swalCloseEventFinishedCallback&&(le.swalCloseEventFinishedCallback(),delete le.swalCloseEventFinishedCallback),"function"==typeof t.didDestroy&&t.didDestroy(),It(n=this),delete n.params,delete le.keydownHandler,delete le.keydownTarget,delete le.currentInstance):It(this)}});const Dt=(e,n)=>{const r=ve.innerParams.get(e);if(!r.input)return i('The "input" parameter is needed to be set when using returnInputValueOn'.concat(t(n)));const o=((e,t)=>{const n=e.getInput();if(!n)return null;switch(t.input){case"checkbox":return(e=>e.checked?1:0)(n);case"radio":return(e=>e.checked?e.value:null)(n);case"file":return(e=>e.files.length?null!==e.getAttribute("multiple")?e.files:e.files[0]:null)(n);default:return t.inputAutoTrim?n.value.trim():n.value}})(e,r);r.inputValidator?Tt(e,o,n):e.getInput().checkValidity()?"deny"===n?St(e,o):Et(e,o):(e.enableButtons(),e.showValidationMessage(r.validationMessage))},Tt=(e,t,n)=>{const r=ve.innerParams.get(e);e.disableInput(),Promise.resolve().then(()=>u(r.inputValidator(t,r.validationMessage))).then(r=>{e.enableButtons(),e.enableInput(),r?e.showValidationMessage(r):"deny"===n?St(e,t):Et(e,t)})},St=(e,t)=>{const n=ve.innerParams.get(e||void 0);n.showLoaderOnDeny&&Ke(L()),n.preDeny?(ve.awaitingPromise.set(e||void 0,!0),Promise.resolve().then(()=>u(n.preDeny(t,n.validationMessage))).then(n=>{!1===n?(e.hideLoading(),ht(e)):e.closePopup({isDenied:!0,value:void 0===n?t:n})}).catch(t=>Ct(e||void 0,t))):e.closePopup({isDenied:!0,value:t})},wt=(e,t)=>{e.closePopup({isConfirmed:!0,value:t})},Ct=(e,t)=>{e.rejectPromise(t)},Et=(e,t)=>{const n=ve.innerParams.get(e||void 0);n.showLoaderOnConfirm&&Ke(),n.preConfirm?(e.resetValidationMessage(),ve.awaitingPromise.set(e||void 0,!0),Promise.resolve().then(()=>u(n.preConfirm(t,n.validationMessage))).then(n=>{oe(R())||!1===n?(e.hideLoading(),ht(e)):wt(e,void 0===n?t:n)}).catch(t=>Ct(e||void 0,t))):wt(e,t)},Mt=e=>e.showConfirmButton||e.showDenyButton||e.showCancelButton||e.showCloseButton;let Pt=!1;const At=e=>e instanceof Element||(e=>"object"==typeof e&&e.jquery)(e),xt=()=>{if(le.timeout)return(()=>{const e=N(),t=parseInt(window.getComputedStyle(e).width);e.style.removeProperty("transition"),e.style.width="100%";const n=t/parseInt(window.getComputedStyle(e).width)*100;e.style.removeProperty("transition"),e.style.width="".concat(n,"%")})(),le.timeout.stop()},Rt=()=>{if(le.timeout){const e=le.timeout.start();return ue(e),e}};let kt=!1;const Lt={},Ft=e=>{for(let t=e.target;t&&t!==document;t=t.parentNode)for(const e in Lt){const n=t.getAttribute(e);if(n)return void Lt[e].fire({template:n})}};var Wt=Object.freeze({isValidParameter:f,isUpdatableParameter:m,isDeprecatedParameter:p,argsToParams:e=>{const t={};return"object"!=typeof e[0]||At(e[0])?["title","html","icon"].forEach((n,r)=>{const o=e[r];"string"==typeof o||At(o)?t[n]=o:void 0!==o&&i("Unexpected type of ".concat(n,'! Expected "string" or "Element", got ').concat(typeof o))}):Object.assign(t,e[0]),t},isVisible:()=>oe(C()),clickConfirm:et,clickDeny:()=>L()&&L().click(),clickCancel:()=>W()&&W().click(),getContainer:T,getPopup:C,getTitle:M,getHtmlContainer:P,getImage:A,getIcon:E,getInputLabel:()=>w(b["input-label"]),getCloseButton:V,getActions:O,getConfirmButton:k,getDenyButton:L,getCancelButton:W,getLoader:F,getFooter:B,getTimerProgressBar:N,getFocusableElements:U,getValidationMessage:R,isLoading:()=>C().hasAttribute("data-loading"),fire:function(){const e=this;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return new e(...n)},mixin:function(e){return class extends(this){_main(t,n){return super._main(t,Object.assign({},e,n))}}},showLoading:Ke,enableLoading:Ke,getTimerLeft:()=>le.timeout&&le.timeout.getTimerLeft(),stopTimer:xt,resumeTimer:Rt,toggleTimer:()=>{const e=le.timeout;return e&&(e.running?xt():Rt())},increaseTimer:e=>{if(le.timeout){const t=le.timeout.increase(e);return ue(t,!0),t}},isTimerRunning:()=>le.timeout&&le.timeout.isRunning(),bindClickHandler:function(){Lt[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-swal-template"]=this,kt||(document.body.addEventListener("click",Ft),kt=!0)}});let Ot;class Bt{constructor(){if("undefined"==typeof window)return;Ot=this;for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Object.freeze(this.constructor.argsToParams(t));Object.defineProperties(this,{params:{value:r,writable:!1,enumerable:!0,configurable:!0}});const i=Ot._main(Ot.params);ve.promise.set(this,i)}_main(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(e=>{!e.backdrop&&e.allowOutsideClick&&r('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const t in e)_(t),e.toast&&v(t),I(t)})(Object.assign({},t,e)),le.currentInstance&&(le.currentInstance._destroy(),G()&&ke()),le.currentInstance=Ot;const n=Vt(e,t);Oe(n),Object.freeze(n),le.timeout&&(le.timeout.stop(),delete le.timeout),clearTimeout(le.restoreFocusTimeout);const i=Ut(Ot);return xe(Ot,n),ve.innerParams.set(Ot,n),Nt(Ot,i,n)}then(e){return ve.promise.get(this).then(e)}finally(e){return ve.promise.get(this).finally(e)}}const Nt=(e,t,r)=>new Promise((o,l)=>{const d=t=>{e.closePopup({isDismissed:!0,dismiss:t})};$e.swalPromiseResolve.set(e,o),$e.swalPromiseReject.set(e,l),t.confirmButton.onclick=()=>(e=>{const t=ve.innerParams.get(e);e.disableButtons(),t.input?Dt(e,"confirm"):Et(e,!0)})(e),t.denyButton.onclick=()=>(e=>{const t=ve.innerParams.get(e);e.disableButtons(),t.returnInputValueOnDeny?Dt(e,"deny"):St(e,!1)})(e),t.cancelButton.onclick=()=>((e,t)=>{e.disableButtons(),t(Re.cancel)})(e,d),t.closeButton.onclick=()=>d(Re.close),((e,t,n)=>{ve.innerParams.get(e).toast?((e,t,n)=>{t.popup.onclick=()=>{const t=ve.innerParams.get(e);t&&(Mt(t)||t.timer||t.input)||n(Re.close)}})(e,t,n):((e=>{e.popup.onmousedown=()=>{e.container.onmouseup=function(t){e.container.onmouseup=void 0,t.target===e.container&&(Pt=!0)}}})(t),(e=>{e.container.onmousedown=()=>{e.popup.onmouseup=function(t){e.popup.onmouseup=void 0,(t.target===e.popup||e.popup.contains(t.target))&&(Pt=!0)}}})(t),((e,t,n)=>{t.container.onclick=r=>{const i=ve.innerParams.get(e);Pt?Pt=!1:r.target===t.container&&a(i.allowOutsideClick)&&n(Re.backdrop)}})(e,t,n))})(e,t,d),((e,t,n,r)=>{tt(t),n.toast||(t.keydownHandler=t=>((e,t,n)=>{const r=ve.innerParams.get(e);r&&(t.isComposing||229===t.keyCode||(r.stopKeydownPropagation&&t.stopPropagation(),"Enter"===t.key?ot(e,t,r):"Tab"===t.key?at(t,r):[...rt,...it].includes(t.key)?st(t.key):"Escape"===t.key&&ut(t,r,n)))})(e,t,r),t.keydownTarget=n.keydownListenerCapture?window:C(),t.keydownListenerCapture=n.keydownListenerCapture,t.keydownTarget.addEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!0)})(e,le,r,d),((e,t)=>{"select"===t.input||"radio"===t.input?((e,t)=>{const n=C(),r=e=>Ye[t.input](n,Xe(e),t);s(t.inputOptions)||c(t.inputOptions)?(Ke(k()),u(t.inputOptions).then(t=>{e.hideLoading(),r(t)})):"object"==typeof t.inputOptions?r(t.inputOptions):i("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(typeof t.inputOptions))})(e,t):["text","email","number","tel","textarea"].includes(t.input)&&(s(t.inputValue)||c(t.inputValue))&&(Ke(k()),((e,t)=>{const n=e.getInput();ne(n),u(t.inputValue).then(r=>{n.value="number"===t.input?parseFloat(r)||0:"".concat(r),te(n),n.focus(),e.hideLoading()}).catch(t=>{i("Error in inputValue promise: ".concat(t)),n.value="",te(n),n.focus(),e.hideLoading()})})(e,t))})(e,r),(e=>{const t=T(),r=C();"function"==typeof e.willOpen&&e.willOpen(r);const i=window.getComputedStyle(document.body).overflowY;ze(t,r,e),setTimeout(()=>{je(t,r)},10),G()&&(He(t,e.scrollbarPadding,i),n(document.body.children).forEach(e=>{e===T()||e.contains(T())||(e.hasAttribute("aria-hidden")&&e.setAttribute("data-previous-aria-hidden",e.getAttribute("aria-hidden")),e.setAttribute("aria-hidden","true"))})),j()||le.previousActiveElement||(le.previousActiveElement=document.activeElement),"function"==typeof e.didOpen&&setTimeout(()=>e.didOpen(r)),q(t,b["no-transition"])})(r),Gt(le,r,d),jt(t,r),setTimeout(()=>{t.container.scrollTop=0})}),Vt=(e,i)=>{const o=(e=>{const i="string"==typeof e.template?document.querySelector(e.template):e.template;if(!i)return{};const o=i.content;return(e=>{const t=Le.concat(["swal-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);n(e.children).forEach(e=>{const n=e.tagName.toLowerCase();-1===t.indexOf(n)&&r("Unrecognized element <".concat(n,">"))})})(o),Object.assign((e=>{const t={};return n(e.querySelectorAll("swal-param")).forEach(e=>{Fe(e,["name","value"]);const n=e.getAttribute("name"),r=e.getAttribute("value");"boolean"==typeof l[n]&&"false"===r&&(t[n]=!1),"object"==typeof l[n]&&(t[n]=JSON.parse(r))}),t})(o),(e=>{const r={};return n(e.querySelectorAll("swal-button")).forEach(e=>{Fe(e,["type","color","aria-label"]);const n=e.getAttribute("type");r["".concat(n,"ButtonText")]=e.innerHTML,r["show".concat(t(n),"Button")]=!0,e.hasAttribute("color")&&(r["".concat(n,"ButtonColor")]=e.getAttribute("color")),e.hasAttribute("aria-label")&&(r["".concat(n,"ButtonAriaLabel")]=e.getAttribute("aria-label"))}),r})(o),(e=>{const t={},n=e.querySelector("swal-image");return n&&(Fe(n,["src","width","height","alt"]),n.hasAttribute("src")&&(t.imageUrl=n.getAttribute("src")),n.hasAttribute("width")&&(t.imageWidth=n.getAttribute("width")),n.hasAttribute("height")&&(t.imageHeight=n.getAttribute("height")),n.hasAttribute("alt")&&(t.imageAlt=n.getAttribute("alt"))),t})(o),(e=>{const t={},n=e.querySelector("swal-icon");return n&&(Fe(n,["type","color"]),n.hasAttribute("type")&&(t.icon=n.getAttribute("type")),n.hasAttribute("color")&&(t.iconColor=n.getAttribute("color")),t.iconHtml=n.innerHTML),t})(o),(e=>{const t={},r=e.querySelector("swal-input");r&&(Fe(r,["type","label","placeholder","value"]),t.input=r.getAttribute("type")||"text",r.hasAttribute("label")&&(t.inputLabel=r.getAttribute("label")),r.hasAttribute("placeholder")&&(t.inputPlaceholder=r.getAttribute("placeholder")),r.hasAttribute("value")&&(t.inputValue=r.getAttribute("value")));const i=e.querySelectorAll("swal-input-option");return i.length&&(t.inputOptions={},n(i).forEach(e=>{Fe(e,["value"]);const n=e.getAttribute("value");t.inputOptions[n]=e.innerHTML})),t})(o),((e,t)=>{const n={};for(const r in t){const i=t[r],o=e.querySelector(i);o&&(Fe(o,[]),n[i.replace(/^swal-/,"")]=o.innerHTML.trim())}return n})(o,Le))})(e),a=Object.assign({},l,i,o,e);return a.showClass=Object.assign({},l.showClass,a.showClass),a.hideClass=Object.assign({},l.hideClass,a.hideClass),a},Ut=e=>{const t={popup:C(),container:T(),actions:O(),confirmButton:k(),denyButton:L(),cancelButton:W(),loader:F(),closeButton:V(),validationMessage:R(),progressSteps:x()};return ve.domCache.set(e,t),t},Gt=(e,t,n)=>{const r=N();ne(r),t.timer&&(e.timeout=new Be(()=>{n("timer"),delete e.timeout},t.timer),t.timerProgressBar&&(te(r),J(r,t,"timerProgressBar"),setTimeout(()=>{e.timeout&&e.timeout.running&&ue(t.timer)})))},jt=(e,t)=>{if(!t.toast)return a(t.allowEnterKey)?void(Ht(e,t)||nt(0,-1,1)):zt()},Ht=(e,t)=>t.focusDeny&&oe(e.denyButton)?(e.denyButton.focus(),!0):t.focusCancel&&oe(e.cancelButton)?(e.cancelButton.focus(),!0):!(!t.focusConfirm||!oe(e.confirmButton)||(e.confirmButton.focus(),0)),zt=()=>{document.activeElement instanceof HTMLElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()};if("undefined"!=typeof window&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|xn--p1ai)$/)&&Math.random()<.1){const e=document.createElement("div");e.className="leave-russia-now-and-apply-your-skills-to-the-world",z(e,'\n      <div>\n        \u0415\u0441\u043b\u0438 \u043c\u044b \u043d\u0435 \u043e\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u043c \u0432\u043e\u0439\u043d\u0443, \u043e\u043d\u0430 \u043f\u0440\u0438\u0434\u0435\u0442 \u0432 \u0434\u043e\u043c <strong>\u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0438\u0437 \u043d\u0430\u0441</strong> \u0438 \u0435\u0451 \u043f\u043e\u0441\u043b\u0435\u0434\u0441\u0442\u0432\u0438\u044f \u0431\u0443\u0434\u0443\u0442 <strong>\u0443\u0436\u0430\u0441\u0430\u044e\u0449\u0438\u043c\u0438</strong>.\n      </div>\n      <div>\n        \u041f\u0443\u0442\u0438\u043d\u0441\u043a\u0438\u0439 \u0440\u0435\u0436\u0438\u043c \u0437\u0430 20 \u0441 \u043b\u0438\u0448\u043d\u0438\u043c \u043b\u0435\u0442 \u0441\u0432\u043e\u0435\u0433\u043e \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043e\u0432\u0430\u043d\u0438\u044f \u0432\u0434\u043e\u043b\u0431\u0438\u043b \u043d\u0430\u043c, \u0447\u0442\u043e \u043c\u044b \u0431\u0435\u0441\u0441\u0438\u043b\u044c\u043d\u044b \u0438 \u043e\u0434\u0438\u043d \u0447\u0435\u043b\u043e\u0432\u0435\u043a \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u043d\u0438\u0447\u0435\u0433\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c. <strong>\u042d\u0442\u043e \u043d\u0435 \u0442\u0430\u043a!</strong>\n      </div>\n      <div>\n        \u0412 \u043d\u0438\u0436\u0435\u043f\u0440\u0438\u0432\u0435\u0434\u0451\u043d\u043d\u043e\u043c \u0432\u0438\u0434\u0435\u043e \u043e\u0431\u044a\u044f\u0441\u043d\u044f\u0435\u0442\u0441\u044f \u043a\u0430\u043a \u043a\u0430\u0436\u0434\u044b\u0439 \u0438\u0437 \u043d\u0430\u0441 \u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u043c\u043e\u0447\u044c \u0432 \u0442\u043e\u043c, <strong>\u0447\u0442\u043e\u0431\u044b \u044d\u0442\u0430 \u0431\u0435\u0441\u0441\u043c\u044b\u0441\u043b\u0435\u043d\u043d\u0430\u044f \u0438 \u0431\u0435\u0441\u0447\u0435\u043b\u043e\u0432\u0435\u0447\u043d\u0430\u044f \u0432\u043e\u0439\u043d\u0430 \u043e\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u043b\u0430\u0441\u044c</strong>:\n      </div>\n      <iframe width="560" height="315" src="https://www.youtube.com/embed/4CfDhaRkw7I" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>\n      <div>\n        \u041d\u0435\u0442 \u0432\u043e\u0439\u043d\u0435!\n      </div>\n      ');const t=document.createElement("button");t.innerHTML="&times;",t.onclick=()=>e.remove(),e.appendChild(t),window.addEventListener("load",()=>{setTimeout(()=>{document.body.appendChild(e)},1e3)})}Object.assign(Bt.prototype,bt),Object.assign(Bt,Wt),Object.keys(bt).forEach(e=>{Bt[e]=function(){if(Ot)return Ot[e](...arguments)}}),Bt.DismissReason=Re,Bt.version="11.4.20";const Kt=Bt;return Kt.default=Kt,Kt}(),void 0!==this&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2)},ri1R:function(e,t,n){"use strict";n.d(t,"a",(function(){return he}));var r=n("mrSG"),o=n("2Vo4"),a=n("XNiG");function s(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}const u=!!("object"==typeof global&&global.process&&global.process.release&&global.process.release.name&&"undefined"==typeof HTMLCanvasElement),c=!u&&"undefined"==typeof self;class l{constructor(){this._canvasMaxWH="iPhone"==l.browserInfo.OS||"Android"==l.browserInfo.OS?2048:4096,this._singleFrameMode=!(navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia),this._singleFrameModeIpt=()=>{let e=document.createElement("input");return e.setAttribute("type","file"),e.setAttribute("accept","image/*"),e.setAttribute("capture",""),e.addEventListener("change",()=>s(this,void 0,void 0,(function*(){let t=e.files[0];e.value="",this.onSingleFrameAcquired(t)}))),e},this._clickIptSingleFrameMode=()=>{this._singleFrameModeIpt().click()},this.styleEls=[],this.bSaveOriCanvas=!0,this.maxVideoCvsLength=3,this.videoCvses=[],this.videoGlCvs=null,this.videoGl=null,this.glImgData=null,this._onCameraSelChange=()=>{this.play(this._selCam.value).then(()=>{this._isOpen||this.stop()})},this._onResolutionSelChange=()=>{let e,t;if(this._selRsl&&-1!=this._selRsl.selectedIndex){let n=this._selRsl.options[this._selRsl.selectedIndex];e=n.getAttribute("data-width"),t=n.getAttribute("data-height")}this.play(void 0,e,t).then(()=>{this._isOpen||this.stop()})},this._onCloseBtnClick=()=>{this.close()},this._isOpen=!1,this.videoSettings={video:{width:{ideal:1280},height:{ideal:720},facingMode:{ideal:"environment"}}},this.iPlayRound=0,this.promisePlay=null,this._allCameras=[],this._currentCamera=null,this._videoTrack=null,this._lastDeviceId=void 0,this._vc_bPlayingVideoBeforeHide=!1,this._ev_documentHideEvent=()=>{"visible"===document.visibilityState?this._vc_bPlayingVideoBeforeHide&&("Firefox"==l.browserInfo.browser?this.play():this._video.play(),this._vc_bPlayingVideoBeforeHide=!1):this._video&&!this._video.paused&&(this._vc_bPlayingVideoBeforeHide=!0,this._video.pause())},this._video=null,this._bgLoading=null,this._selCam=null,this._bgCamera=null,this._selRsl=null,this._optGotRsl=null,this._btnClose=null,this._region=null,this.bChangeRegionIndexManually=!1,this._regionIndex=-1,this._loopInterval=0,this._frameQueueMaxLength=1,this._frameQueue=[],this._bFetchingLoopStarted=!1,this._bStoppedByPause=!1,this.alwaysRefreshBuffer=!0,this._bufferRefreshInterval=0,this.bDestroyed=!1}static getVersion(){return this._version}static detectEnvironment(){return s(this,void 0,void 0,(function*(){let e={wasm:"undefined"!=typeof WebAssembly&&("undefined"==typeof navigator||!(/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&/\(.+\s11_2_([2-6]).*\)/.test(navigator.userAgent))),worker:!!(u?process.version>="v12":"undefined"!=typeof Worker),getUserMedia:!("undefined"==typeof navigator||!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia),camera:!1,browser:this.browserInfo.browser,version:this.browserInfo.version,OS:this.browserInfo.OS};if(e.getUserMedia)try{(yield navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(e=>{e.stop()}),e.camera=!0}catch(e){}return e}))}static get engineResourcePath(){return this._engineResourcePath}static set engineResourcePath(e){if(this._hasEngineResourceLoaded)throw new Error("`engineResourcePath` is not allowed to change after `createInstance` is called.");if(null==e&&(e="./"),u||c)l._engineResourcePath=e;else{let t=document.createElement("a");t.href=e,l._engineResourcePath=t.href}this._engineResourcePath.endsWith("/")||(l._engineResourcePath+="/")}static get defaultUIElementURL(){var e;return null===(e=this._defaultUIElementURL)||void 0===e?void 0:e.replace("@engineResourcePath/",l.engineResourcePath)}static set defaultUIElementURL(e){this._defaultUIElementURL=e}getUIElement(){return this.UIElement}setUIElement(e){return s(this,void 0,void 0,(function*(){if("string"==typeof e||e instanceof String){if(!e.trim().startsWith("<")){let t=yield fetch(e);if(!t.ok)throw Error("setUIElement(elementOrUrl): Network Error: "+t.statusText);e=yield t.text()}if(!e.trim().startsWith("<"))throw Error("setUIElement(elementOrUrl): Can't get valid HTMLElement.");let t=document.createElement("div");t.innerHTML=e;for(let e=0;e<t.childElementCount;++e){let n=t.children[e];n instanceof HTMLStyleElement&&(this.styleEls.push(n),document.head.append(n))}(e=1==t.childElementCount?t.children[0]:t).remove()}this.UIElement=e}))}get singleFrameMode(){return this._singleFrameMode}set singleFrameMode(e){if(this._isOpen)throw new Error("`singleFrameMode` is not allowed to change when camera is open.");this._singleFrameMode=e}get ifSaveOriginalImageInACanvas(){return this.bSaveOriCanvas}set ifSaveOriginalImageInACanvas(e){this.bSaveOriCanvas=e}_bindUI(){if(!this.UIElement)throw new Error("Need to define `UIElement` before opening.");let e=[this.UIElement],t=this.UIElement.children;for(let r of t)e.push(r);for(let r=0;r<e.length;++r)for(let t of e[r].children)e.push(t);let n=null;for(let r of e)!this._video&&r.classList.contains("dce-video")?(this._video=r,this._video.setAttribute("playsinline","true")):!this._bgLoading&&r.classList.contains("dce-bg-loading")?this._bgLoading=r:!this._bgCamera&&r.classList.contains("dce-bg-camera")?this._bgCamera=r:!this._selCam&&r.classList.contains("dce-sel-camera")?this._selCam=r:!this._selRsl&&r.classList.contains("dce-sel-resolution")?(this._selRsl=r,this._selRsl.options.length||(this._selRsl.innerHTML=[this._optGotRsl?"":'<option class="dce-opt-gotResolution" value="got"></option>','<option data-width="1920" data-height="1080">ask 1920 x 1080</option>','<option data-width="1280" data-height="720">ask 1280 x 720</option>','<option data-width="640" data-height="480">ask 640 x 480</option>'].join(""),this._optGotRsl=this._optGotRsl||this._selRsl.options[0])):!this._optGotRsl&&r.classList.contains("dce-opt-gotResolution")?this._optGotRsl=r:!this._btnClose&&r.classList.contains("dce-btn-close")?this._btnClose=r:!this._video&&r.classList.contains("dce-existingVideo")?(this._video=r,this._video.setAttribute("playsinline","true")):!n&&r.tagName&&"video"==r.tagName.toLowerCase()&&(n=r);if(!this._video&&n&&(this._video=n),this.singleFrameMode?this._video&&(this._video.addEventListener("click",this._clickIptSingleFrameMode),this._video.style.cursor="pointer",this._video.setAttribute("title","Take a photo")):this._bgLoading&&(this._bgLoading.style.display=""),this.singleFrameMode?(this._video&&(this._video.addEventListener("click",this._clickIptSingleFrameMode),this._video.style.cursor="pointer",this._video.setAttribute("title","Take a photo")),this._bgCamera&&(this._bgCamera.style.display="")):this._bgLoading&&(this._bgLoading.style.display=""),this._selCam&&this._selCam.addEventListener("change",this._onCameraSelChange),this._selRsl&&this._selRsl.addEventListener("change",this._onResolutionSelChange),this._btnClose&&this._btnClose.addEventListener("click",this._onCloseBtnClick),!this._video)throw this._unbindUI(),Error("Can not find HTMLVideoElement with class `dce-video`");this._isOpen=!0}_unbindUI(){this.singleFrameMode?(this._video&&(this._video.removeEventListener("click",this._clickIptSingleFrameMode),this._video.style.cursor="",this._video.removeAttribute("title")),this._bgCamera&&(this._bgCamera.style.display="none")):this._bgLoading&&(this._bgLoading.style.display="none"),this._selCam&&this._selCam.removeEventListener("change",this._onCameraSelChange),this._selRsl&&this._selRsl.removeEventListener("change",this._onResolutionSelChange),this._btnClose&&this._btnClose.removeEventListener("click",this._onCloseBtnClick),this._video=null,this._selCam=null,this._selRsl=null,this._optGotRsl=null,this._btnClose=null,this._isOpen=!1}_assertOpen(){if(!this._isOpen)throw Error("The camera is not open.")}get video(){return this._video}set region(e){this._region=e,this._bFetchingLoopStarted&&(this._regionIndex=-1,this._fetchingLoop(!1))}get region(){return this._region}set regionIndex(e){this.bChangeRegionIndexManually&&(this._regionIndex=this._region instanceof Array&&this._region.length>e?e:0)}get regionIndex(){return this._regionIndex}set loopInterval(e){e>=0&&(this._loopInterval=e),this._bFetchingLoopStarted&&this._fetchingLoop(!1)}get loopInterval(){return this._loopInterval}set frameQueueMaxLength(e){for(this._frameQueueMaxLength=e;this._frameQueue&&this._frameQueue.length>this._frameQueueMaxLength;)this._frameQueue.shift()}get frameQueueMaxLength(){return this._frameQueueMaxLength}get frameQueue(){return JSON.parse(JSON.stringify(this._frameQueue))}set bufferRefreshInterval(e){this._bufferRefreshInterval=e}get bufferRefreshInterval(){return this._bufferRefreshInterval}isContextDestroyed(){return this.bDestroyed}static createInstance(e){return s(this,void 0,void 0,(function*(){if(u)throw new Error("`CameraEnhancer` is not supported in Node.js.");let t=new l;("string"==typeof e||e instanceof String)&&(e=JSON.parse(e));for(let n in e)t[n]=e[n];return yield t.setUIElement(this.defaultUIElementURL),this._hasEngineResourceLoaded=!0,document.addEventListener("visibilitychange",t._ev_documentHideEvent),t}))}play(e,t,n){return s(this,void 0,void 0,(function*(){if(this._assertOpen(),this._video&&this.videoSrc){yield new Promise((e,t)=>{this._video.onloadedmetadata=()=>s(this,void 0,void 0,(function*(){this._video.onloadedmetadata=null,yield this._video.play(),e()})),"string"==typeof this.videoSrc||this.videoSrc instanceof String?this._video.src=this.videoSrc:this._video.srcObject=this.videoSrc,setTimeout(()=>t(new Error("Failed to play video. Timeout.")),4e3)});let e={width:this._video.videoWidth,height:this._video.videoHeight};return this.onPlayed&&setTimeout(()=>{this.onPlayed(e)},0),e}if(this.singleFrameMode)return this._clickIptSingleFrameMode(),{width:0,height:0};const r=++this.iPlayRound;return this.promisePlay&&(yield this.promisePlay,r<this.iPlayRound)?{width:this._video.videoWidth,height:this._video.videoHeight}:(this.promisePlay=(()=>s(this,void 0,void 0,(function*(){var r;try{this._video&&this._video.srcObject&&this.stop(),l._onLog&&l._onLog("DCE: ======before video========"),yield this.getAllCameras();let i=()=>{if(this.bDestroyed)throw c&&c.getTracks().forEach(e=>{e.stop()}),this._video.srcObject=null,this._videoTrack=null,this._currentCamera=null,new Error("The CameraEnhancer instance has been destroyed.")};const o=JSON.parse(JSON.stringify(this.videoSettings));let a;"boolean"==typeof o.video&&(o.video={}),t&&(o.video.width={ideal:t}),n&&(o.video.height={ideal:n});const u=["rear","back","r\xfcck","arri\xe8re","trasera","tr\xe1s","traseira","posteriore","\u540e\u9762","\u5f8c\u9762","\u80cc\u9762","\u540e\u7f6e","\u5f8c\u7f6e","\u80cc\u7f6e","\u0437\u0430\u0434\u043d\u0435\u0439","\u0627\u0644\u062e\u0644\u0641\u064a\u0629","\ud6c4","arka","achterzijde","\u0e2b\u0e25\u0e31\u0e07","baksidan","bagside","sau","bak","tylny","takakamera","belakang","\u05d0\u05d7\u05d5\u05e8\u05d9\u05ea","\u03c0\u03af\u03c3\u03c9","spate","h\xe1ts\xf3","zadn\xed","darrere","zadn\xe1","\u0437\u0430\u0434\u043d\u044f","stra\u017enja","belakang","\u092c\u0948\u0915"];let c,d=()=>{for(let e of this._allCameras){let t=e.label.toLowerCase();if(t&&u.some(e=>-1!=t.indexOf(e))&&/\b0(\b)?/.test(t)){delete o.video.facingMode,o.video.deviceId={ideal:e.deviceId};break}}o.video.deviceId||-1==["Android","HarmonyOS"].indexOf(l.browserInfo.OS)||(delete o.video.facingMode,o.video.deviceId={ideal:this._allCameras[this._allCameras.length-1].deviceId})};if(e)delete o.video.facingMode,o.video.deviceId={exact:e},this._lastDeviceId=e;else if(o.video.deviceId);else if(this._lastDeviceId)delete o.video.facingMode,o.video.deviceId={exact:this._lastDeviceId};else if(o.video.facingMode){let e=o.video.facingMode;e instanceof Array&&e.length&&(e=e[0]),e=e.exact||e.ideal||e,"environment"===e&&(a=!!o.video.facingMode,d())}l._onLog&&l._onLog("DCE: ======try getUserMedia========");let h,g=[0,500],f=null,m=null,p=e=>s(this,void 0,void 0,(function*(){for(let t of g){i(),t&&(yield new Promise(e=>setTimeout(e,t))),i();{const t=e.video.deviceId;m=t?t.exact||t.ideal||t:null}try{l._onLog&&l._onLog("DCE: ask "+JSON.stringify(e)),c=yield navigator.mediaDevices.getUserMedia(e);break}catch(s){f=s,l._onLog&&l._onLog("DCE: "+s.message||!1)}}}));if(yield p(o),c||(l._onLog&&l._onLog("DCE: ======try getUserMedia again========"),h=JSON.parse(JSON.stringify(o)),"object"==typeof h.video&&("iPhone"==l.browserInfo.OS?(t>=1280||n>=1280?h.video.width=1280:t>=640||n>=640?h.video.width=640:(t<640||n<640)&&(h.video.width=320),delete h.video.height):a&&!o.video.deviceId?(delete h.video.facingMode,this._allCameras.length&&(h.video.deviceId={ideal:this._allCameras[this._allCameras.length-1].deviceId})):h.video=!0),l._onLog&&l._onLog("DCE: "+h),yield p(h)),c||(g=[1e3,2e3],yield p(o)),c||(yield p(h)),!c)throw f;const _=()=>{const e=c.getVideoTracks();let t,n;if(e.length&&(t=this._videoTrack=e[0]),this._video&&t){if(t.label)for(let e of this._allCameras)if(t.label==e.label){e._checked=!0,n=e,this._lastDeviceId=e.deviceId;break}if(!n&&m)for(let e of this._allCameras)if(m==e.deviceId){t.label&&(e._checked=!0,e.label=t.label),n=e,this._lastDeviceId=e.deviceId;break}}this._currentCamera=n};if(yield this.getAllCameras(),i(),a){_(),d();let e=o.video.deviceId;e&&(e=e.exact||e.ideal||e);let t=null===(r=this._currentCamera)||void 0===r?void 0:r.deviceId;!e||t&&e==t||(c.getTracks().forEach(e=>{e.stop()}),g=[0,500,1e3,2e3],yield p(o))}i();const v=()=>s(this,void 0,void 0,(function*(){l._onLog&&l._onLog("======play video========"),yield new Promise((e,t)=>{this._video.onloadedmetadata=()=>s(this,void 0,void 0,(function*(){this._video.onloadedmetadata=null,yield this._video.play(),e()})),this._video.srcObject=c,setTimeout(()=>t(new Error("Failed to play video. Timeout.")),4e3)})}));yield v(),l._onLog&&l._onLog("DCE: ======played video========"),this._bgLoading&&(this._bgLoading.style.animationPlayState="paused");const I="got "+this._video.videoWidth+"x"+this._video.videoHeight;this._optGotRsl&&(this._optGotRsl.setAttribute("data-width",this._video.videoWidth),this._optGotRsl.setAttribute("data-height",this._video.videoHeight),this._optGotRsl.innerText=I,this._selRsl&&this._optGotRsl.parentNode==this._selRsl&&(this._selRsl.value="got")),l._onLog&&l._onLog("DCE: "+I),_(),i(),this._renderSelCameraInfo();let y={width:this._video.videoWidth,height:this._video.videoHeight};return this.onPlayed&&setTimeout(()=>{this.onPlayed(y)},0),this.promisePlay=null,y}catch(s){throw this.promisePlay=null,s}})))(),yield this.promisePlay)}))}resume(){return s(this,void 0,void 0,(function*(){yield this.play(),this._bStoppedByPause&&(this._bStoppedByPause=!1,this.startFetchingLoop())}))}pause(){this._video&&this._video.pause(),this._bFetchingLoopStarted&&(this.stopFetchingLoop(),this._bStoppedByPause=!0)}close(){return s(this,void 0,void 0,(function*(){this.stop(),this._unbindUI(),this.UIElement.style.display="none",this.stopFetchingLoop()}))}open(){return s(this,void 0,void 0,(function*(){return this._bindUI(),this.UIElement.parentNode||(this.UIElement.style.position="fixed",this.UIElement.style.left="0",this.UIElement.style.top="0",document.body.append(this.UIElement)),"none"==this.UIElement.style.display&&(this.UIElement.style.display=""),yield this.play()}))}stop(){this._video&&this._video.srcObject&&(l._onLog&&l._onLog("DCE: ======stop video========"),this._video.srcObject.getTracks().forEach(e=>{e.stop()}),this._video.srcObject=null,this._videoTrack=null,this._currentCamera=null),this._video&&this._video.classList.contains("dce-existingVideo")&&(l._onLog&&l._onLog("DCE: ======stop existing video========"),this._video.pause(),this._video.currentTime=0),this._bgLoading&&(this._bgLoading.style.animationPlayState=""),this._frameQueue.length=0}getAllCameras(){return s(this,void 0,void 0,(function*(){const e=yield navigator.mediaDevices.enumerateDevices(),t=[],n=[];if(this._allCameras)for(let r of this._allCameras)r._checked&&n.push(r);for(let r=0;r<e.length;r++){let i,o=e[r];if("videoinput"==o.kind){for(let e of n)o.deviceId==e.deviceId&&(i=e);i||(i={},i.deviceId=o.deviceId,i.label=o.label?o.label:"camera "+r),t.push(i)}}return this._allCameras=t,l._onLog&&l._onLog("DCE: "+JSON.stringify(this._allCameras)),Promise.resolve(t)}))}_renderSelCameraInfo(){if(this._selCam&&(this._selCam.innerHTML=""),this._selCam){let e;for(let t of this._allCameras){let n=document.createElement("option");n.value=t.deviceId,n.innerText=t.label,this._selCam.append(n),t.deviceId&&this._currentCamera&&this._currentCamera.deviceId==t.deviceId&&(e=n)}this._selCam.value=e?e.value:""}}getSelectedCamera(){return s(this,void 0,void 0,(function*(){return this._currentCamera}))}selectCamera(e){return s(this,void 0,void 0,(function*(){return yield this.play(e.deviceId||e)}))}getResolution(){return this._isOpen?[this._video.videoWidth,this._video.videoHeight]:null}setResolution(e,t){return s(this,void 0,void 0,(function*(){let n,r;return this._isOpen?(e instanceof Array?(n=e[0],r=e[1]):(n=e,r=t),yield this.play(null,n,r)):yield Promise.reject(new Error("The camera is not open."))}))}getVideoSettings(){return JSON.parse(JSON.stringify(this.videoSettings))}updateVideoSettings(e){return this.videoSettings=JSON.parse(JSON.stringify(e)),this._lastDeviceId=null,this._isOpen?this.play():Promise.resolve()}isOpen(){return this._isOpen}getCapabilities(){return this._assertOpen(),this._videoTrack.getCapabilities?this._videoTrack.getCapabilities():{}}getCameraSettings(){return this._assertOpen(),this._videoTrack.getSettings()}getConstraints(){return this._assertOpen(),this._videoTrack.getConstraints()}applyConstraints(e){return s(this,void 0,void 0,(function*(){if(this._assertOpen(),!this._videoTrack.applyConstraints)throw Error("Not supported.");return yield this._videoTrack.applyConstraints(e)}))}turnOnTorch(){return s(this,void 0,void 0,(function*(){if(this._assertOpen(),this.getCapabilities().torch)return yield this._videoTrack.applyConstraints({advanced:[{torch:!0}]});throw Error("Not supported.")}))}turnOffTorch(){return s(this,void 0,void 0,(function*(){if(this._assertOpen(),this.getCapabilities().torch)return yield this._videoTrack.applyConstraints({advanced:[{torch:!1}]});throw Error("Not supported.")}))}setColorTemperature(e){return s(this,void 0,void 0,(function*(){this._assertOpen();let t=this.getCapabilities().colorTemperature;if(!t)throw Error("Not supported.");return e<t.min?e=t.min:e>t.max&&(e=t.max),yield this._videoTrack.applyConstraints({advanced:[{colorTemperature:e}]})}))}setExposureCompensation(e){return s(this,void 0,void 0,(function*(){this._assertOpen();let t=this.getCapabilities().exposureCompensation;if(!t)throw Error("Not supported.");return e<t.min?e=t.min:e>t.max&&(e=t.max),yield this._videoTrack.applyConstraints({advanced:[{exposureCompensation:e}]})}))}setZoom(e){return s(this,void 0,void 0,(function*(){this._assertOpen();let t=this.getCapabilities().zoom;if(!t)throw Error("Not supported.");return e<t.min?e=t.min:e>t.max&&(e=t.max),yield this._videoTrack.applyConstraints({advanced:[{zoom:e}]})}))}setFrameRate(e){return s(this,void 0,void 0,(function*(){this._assertOpen();let t=this.getCapabilities().frameRate;if(!t)throw Error("Not supported.");return e<t.min?e=t.min:e>t.max&&(e=t.max),yield this._videoTrack.applyConstraints({width:{ideal:Math.max(this._video.videoWidth,this._video.videoHeight)},frameRate:e})}))}getFrameRate(){return this.getCameraSettings().frameRate}getFrame(e){if(this.bDestroyed)throw Error("The DCE instance has been destroyed.");this._assertOpen(),l._onLog&&l._onLog("DCE: getFrame(region?)");const t=Date.now(),n=this._video.videoWidth,r=this._video.videoHeight,i=Math.max(n,r);let o,a;if(i>this._canvasMaxWH){let e=this._canvasMaxWH/i;o=Math.round(n*e),a=Math.round(r*e)}else o=n,a=r;let s=0,u=0,c=n,d=r,h=n,g=r;if(e){let t,i,l,f;e.regionMeasuredByPercentage?(t=e.regionLeft*o/100,i=e.regionTop*a/100,l=e.regionRight*o/100,f=e.regionBottom*a/100):(t=e.regionLeft,i=e.regionTop,l=e.regionRight,f=e.regionBottom),h=l-t,c=Math.round(h/o*n),g=f-i,d=Math.round(g/a*r),s=Math.round(t/o*n),u=Math.round(i/a*r)}let f=0==s&&0==u&&n==c&&r==d&&n==h&&r==g;if(!this.bSaveOriCanvas&&f){this.videoGlCvs||(this.videoGlCvs=globalThis.OffscreenCanvas?new OffscreenCanvas(h,g):document.createElement("canvas"));const e=this.videoGlCvs;e.width==h&&e.height==g||(e.height=g,e.width=h,this.videoGl&&this.videoGl.viewport(0,0,h,g));const n=this.videoGl||e.getContext("webgl",{alpha:!1,antialias:!1,depth:!1,stencil:!1,preserveDrawingBuffer:!0})||e.getContext("experimental-webgl",{alpha:!1,antialias:!1,depth:!1,stencil:!1,preserveDrawingBuffer:!0});if(!this.videoGl){this.videoGl=n;const e=n.createShader(n.VERTEX_SHADER);n.shaderSource(e,"\nattribute vec4 a_position;\nattribute vec2 a_uv;\n\nvarying vec2 v_uv;\n\nvoid main() {\n    gl_Position = a_position;\n    v_uv = a_uv;\n}\n"),n.compileShader(e),n.getShaderParameter(e,n.COMPILE_STATUS)||console.error("An error occurred compiling the shaders: "+n.getShaderInfoLog(e));const t=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(t,"\nprecision lowp float;\n\nvarying vec2 v_uv;\n\nuniform sampler2D u_texture;\n\nvoid main() {\n    vec4 sample =  texture2D(u_texture, v_uv);\n    float grey = 0.299 * sample.r + 0.587 * sample.g + 0.114 * sample.b;\n    gl_FragColor = vec4(grey, 0.0, 0.0, 1.0);\n}\n"),n.compileShader(t),n.getShaderParameter(t,n.COMPILE_STATUS)||console.error("An error occurred compiling the shaders: "+n.getShaderInfoLog(t));const r=n.createProgram();n.attachShader(r,e),n.attachShader(r,t),n.linkProgram(r),n.getProgramParameter(r,n.LINK_STATUS)||console.error("Unable to initialize the shader program: "+n.getProgramInfoLog(r)),n.useProgram(r),n.bindBuffer(n.ARRAY_BUFFER,n.createBuffer()),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,1,0,1,1,1,1,1,-1,-1,0,0,1,-1,1,0]),n.STATIC_DRAW);const i=n.getAttribLocation(r,"a_position");n.enableVertexAttribArray(i),n.vertexAttribPointer(i,2,n.FLOAT,!1,16,0);const o=n.getAttribLocation(r,"a_uv");n.enableVertexAttribArray(o),n.vertexAttribPointer(o,2,n.FLOAT,!1,16,8),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,n.createTexture()),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.uniform1i(n.getUniformLocation(r,"u_texture"),0)}(!this.glImgData||this.glImgData.length<h*g*4)&&(this.glImgData=new Uint8Array(h*g*4)),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,this._video);let r=l._onLog?Date.now():0;n.drawArrays(n.TRIANGLE_STRIP,0,4),l._onLog&&l._onLog("DCE: Grey cost: "+(Date.now()-r));const i=this.glImgData;n.readPixels(0,0,n.drawingBufferWidth,n.drawingBufferHeight,n.RGBA,n.UNSIGNED_BYTE,i);let o=l._onLog?Date.now():0,a=new Uint8Array(new Uint32Array(i.buffer));l._onLog&&l._onLog("DCE: Extract grey cost: "+(Date.now()-o));const s=Date.now();return{canvas:null,data:a,region:null,sx:0,sy:0,width:h,height:g,timeSpent:s-t,timeStamp:s}}{let n=null;if(this.bSaveOriCanvas)n=document.createElement("canvas"),n.width=h,n.height=g,n.dbrCtx2d=n.getContext("2d");else{for(let e of this.videoCvses)if(e.width==h&&e.height==g){n=e;break}n||(globalThis.OffscreenCanvas?n=new OffscreenCanvas(h,g):(n=document.createElement("canvas"),n.width=h,n.height=g),n.dbrCtx2d=n.getContext("2d"),this.videoCvses.length>=this.maxVideoCvsLength&&(this.videoCvses=this.videoCvses.slice(1)),this.videoCvses.push(n))}const r=n.dbrCtx2d;f?r.drawImage(this._video,0,0):r.drawImage(this._video,s,u,c,d,0,0,h,g);let i=n.dbrCtx2d||n.getContext("2d");if(0===n.width||0===n.height)return null;let o=i.getImageData(0,0,n.width,n.height).data;const a=Date.now();return{data:o,canvas:n,region:e,sx:s,sy:u,width:c,height:d,timeSpent:a-t,timeStamp:a}}}getCurrentRegion(){let e;if(this._region)if(this._region instanceof Array){if(this.bChangeRegionIndexManually){if(this._regionIndex>=this._region.length)throw new Error("the 'regionIndex' should be less than the length of region array.")}else++this._regionIndex>=this._region.length&&(this._regionIndex=0);e=this._region[this._regionIndex]}else e=this._region;else e=null;return e}_fetchingLoop(e){if(this.bDestroyed)return void this.stopFetchingLoop();if(!this._isOpen||!this.isFetchingLoopStarted())return void this.stopFetchingLoop();if(this._video.paused)return l._onLog&&l._onLog("DCE: Video is paused. Ask in 1s."),this._frameLoopTimeoutId&&clearTimeout(this._frameLoopTimeoutId),void(this._frameLoopTimeoutId=setTimeout(()=>{this._fetchingLoop(!0)},1e3));const t=()=>{l._onLog&&l._onLog("DCE: start fetching a frame: "+Date.now());let e=this.getCurrentRegion(),t=this.getFrame(e);this._frameQueue&&this._frameQueue.length>=this._frameQueueMaxLength&&this._frameQueue.shift(),this._frameQueue.push(t),l._onLog&&l._onLog("DCE: finish fetching a frame: "+Date.now())},n=()=>{this._frameLoopTimeoutId2&&clearTimeout(this._frameLoopTimeoutId2),this._bufferRefreshInterval<=0||(this._frameLoopTimeoutId2=setTimeout(()=>{this.bDestroyed?this.stopFetchingLoop():this._isOpen&&this.isFetchingLoopStarted()?this._video.paused?this._frameLoopTimeoutId&&clearTimeout(this._frameLoopTimeoutId):(l._onLog&&l._onLog("DCE: second timeout executes: "+Date.now()),t(),n()):this.stopFetchingLoop()},this._bufferRefreshInterval))};e&&(this._frameQueue.length<this._frameQueueMaxLength?(t(),n()):this.alwaysRefreshBuffer&&t()),this._frameLoopTimeoutId&&clearTimeout(this._frameLoopTimeoutId),this._frameLoopTimeoutId=setTimeout(()=>{this._fetchingLoop(!0)},this._loopInterval)}startFetchingLoop(){if(this.bDestroyed)throw Error("The DCE instance has been destroyed.");if(this._assertOpen(),this._video.paused)throw Error("The video is paused.");this.isFetchingLoopStarted()||(this._bFetchingLoopStarted=!0,l._onLog&&l._onLog("start fetching loop: "+Date.now()),this._fetchingLoop(!0))}isFetchingLoopStarted(){return this._bFetchingLoopStarted}stopFetchingLoop(){this._bFetchingLoopStarted&&(l._onLog&&l._onLog("stop fetching loop: "+Date.now()),this._frameLoopTimeoutId&&clearTimeout(this._frameLoopTimeoutId),this._frameQueue.length=0,this._bFetchingLoopStarted=!1)}getFrameFromBuffer(e){return this._frameQueue&&this._frameQueue.length?e?e<this._frameQueue.length?(this._frameLoopTimeoutId2&&clearTimeout(this._frameLoopTimeoutId2),this._frameQueue.splice(e,1)[0]):void 0:(this._frameLoopTimeoutId2&&clearTimeout(this._frameLoopTimeoutId2),this._frameQueue.shift()):null}getQueueLength(){return this._frameQueue.length}}l._jsVersion="2.0.3",l._jsEditVersion="20210628",l._version="JS "+l._jsVersion+"."+l._jsEditVersion,l.browserInfo=function(){if(!u&&!c){var e={init:function(){this.browser=this.searchString(this.dataBrowser)||"unknownBrowser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"unknownVersion",this.OS=this.searchString(this.dataOS)||"unknownOS","Linux"==this.OS&&-1!=navigator.userAgent.indexOf("Windows NT")&&(this.OS="HarmonyOS")},searchString:function(e){for(var t=0;t<e.length;t++){var n=e[t].string,r=e[t].prop;if(this.versionSearchString=e[t].versionSearch||e[t].identity,n){if(-1!=n.indexOf(e[t].subString))return e[t].identity}else if(r)return e[t].identity}},searchVersion:function(e){var t=e.indexOf(this.versionSearchString);if(-1!=t)return parseFloat(e.substring(t+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Edge",identity:"Edge"},{string:navigator.userAgent,subString:"OPR",identity:"OPR"},{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"}],dataOS:[{string:navigator.userAgent,subString:"HarmonyOS",identity:"HarmonyOS"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone"},{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};return e.init(),{browser:e.browser,version:e.version,OS:e.OS}}if(c)return{browser:"ssr",version:0,OS:"ssr"}}(),l._hasEngineResourceLoaded=!1,l._engineResourcePath=(()=>{if(u)return"";if(!c&&document.currentScript){let e=document.currentScript.src,t=e.indexOf("?");if(-1!=t)e=e.substring(0,t);else{let t=e.indexOf("#");-1!=t&&(e=e.substring(0,t))}return e.substring(0,e.lastIndexOf("/")+1)}return"./"})(),l._defaultUIElementURL="@engineResourcePath/dce.ui.html";class d{static get browserInfo(){return l.browserInfo}static getVersion(){return l.getVersion()}static detectEnvironment(){return l.detectEnvironment()}static get engineResourcePath(){return l.engineResourcePath}static set engineResourcePath(e){l.engineResourcePath=e}static get _onLog(){return l._onLog}static set _onLog(e){l._onLog=e}}function h(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}var g,f,m,p;d.CameraEnhancer=l,function(e){e[e.IPF_Binary=0]="IPF_Binary",e[e.IPF_BinaryInverted=1]="IPF_BinaryInverted",e[e.IPF_GrayScaled=2]="IPF_GrayScaled",e[e.IPF_NV21=3]="IPF_NV21",e[e.IPF_RGB_565=4]="IPF_RGB_565",e[e.IPF_RGB_555=5]="IPF_RGB_555",e[e.IPF_RGB_888=6]="IPF_RGB_888",e[e.IPF_ARGB_8888=7]="IPF_ARGB_8888",e[e.IPF_RGB_161616=8]="IPF_RGB_161616",e[e.IPF_ARGB_16161616=9]="IPF_ARGB_16161616",e[e.IPF_ABGR_8888=10]="IPF_ABGR_8888",e[e.IPF_ABGR_16161616=11]="IPF_ABGR_16161616",e[e.IPF_BGR_888=12]="IPF_BGR_888"}(g||(g={})),function(e){e[e.DBR_SYSTEM_EXCEPTION=1]="DBR_SYSTEM_EXCEPTION",e[e.DBR_SUCCESS=0]="DBR_SUCCESS",e[e.DBR_UNKNOWN=-1e4]="DBR_UNKNOWN",e[e.DBR_NO_MEMORY=-10001]="DBR_NO_MEMORY",e[e.DBR_NULL_REFERENCE=-10002]="DBR_NULL_REFERENCE",e[e.DBR_LICENSE_INVALID=-10003]="DBR_LICENSE_INVALID",e[e.DBR_LICENSE_EXPIRED=-10004]="DBR_LICENSE_EXPIRED",e[e.DBR_FILE_NOT_FOUND=-10005]="DBR_FILE_NOT_FOUND",e[e.DBR_FILETYPE_NOT_SUPPORTED=-10006]="DBR_FILETYPE_NOT_SUPPORTED",e[e.DBR_BPP_NOT_SUPPORTED=-10007]="DBR_BPP_NOT_SUPPORTED",e[e.DBR_INDEX_INVALID=-10008]="DBR_INDEX_INVALID",e[e.DBR_BARCODE_FORMAT_INVALID=-10009]="DBR_BARCODE_FORMAT_INVALID",e[e.DBR_CUSTOM_REGION_INVALID=-10010]="DBR_CUSTOM_REGION_INVALID",e[e.DBR_MAX_BARCODE_NUMBER_INVALID=-10011]="DBR_MAX_BARCODE_NUMBER_INVALID",e[e.DBR_IMAGE_READ_FAILED=-10012]="DBR_IMAGE_READ_FAILED",e[e.DBR_TIFF_READ_FAILED=-10013]="DBR_TIFF_READ_FAILED",e[e.DBR_QR_LICENSE_INVALID=-10016]="DBR_QR_LICENSE_INVALID",e[e.DBR_1D_LICENSE_INVALID=-10017]="DBR_1D_LICENSE_INVALID",e[e.DBR_DIB_BUFFER_INVALID=-10018]="DBR_DIB_BUFFER_INVALID",e[e.DBR_PDF417_LICENSE_INVALID=-10019]="DBR_PDF417_LICENSE_INVALID",e[e.DBR_DATAMATRIX_LICENSE_INVALID=-10020]="DBR_DATAMATRIX_LICENSE_INVALID",e[e.DBR_PDF_READ_FAILED=-10021]="DBR_PDF_READ_FAILED",e[e.DBR_PDF_DLL_MISSING=-10022]="DBR_PDF_DLL_MISSING",e[e.DBR_PAGE_NUMBER_INVALID=-10023]="DBR_PAGE_NUMBER_INVALID",e[e.DBR_CUSTOM_SIZE_INVALID=-10024]="DBR_CUSTOM_SIZE_INVALID",e[e.DBR_CUSTOM_MODULESIZE_INVALID=-10025]="DBR_CUSTOM_MODULESIZE_INVALID",e[e.DBR_RECOGNITION_TIMEOUT=-10026]="DBR_RECOGNITION_TIMEOUT",e[e.DBR_JSON_PARSE_FAILED=-10030]="DBR_JSON_PARSE_FAILED",e[e.DBR_JSON_TYPE_INVALID=-10031]="DBR_JSON_TYPE_INVALID",e[e.DBR_JSON_KEY_INVALID=-10032]="DBR_JSON_KEY_INVALID",e[e.DBR_JSON_VALUE_INVALID=-10033]="DBR_JSON_VALUE_INVALID",e[e.DBR_JSON_NAME_KEY_MISSING=-10034]="DBR_JSON_NAME_KEY_MISSING",e[e.DBR_JSON_NAME_VALUE_DUPLICATED=-10035]="DBR_JSON_NAME_VALUE_DUPLICATED",e[e.DBR_TEMPLATE_NAME_INVALID=-10036]="DBR_TEMPLATE_NAME_INVALID",e[e.DBR_JSON_NAME_REFERENCE_INVALID=-10037]="DBR_JSON_NAME_REFERENCE_INVALID",e[e.DBR_PARAMETER_VALUE_INVALID=-10038]="DBR_PARAMETER_VALUE_INVALID",e[e.DBR_DOMAIN_NOT_MATCHED=-10039]="DBR_DOMAIN_NOT_MATCHED",e[e.DBR_RESERVEDINFO_NOT_MATCHED=-10040]="DBR_RESERVEDINFO_NOT_MATCHED",e[e.DBR_AZTEC_LICENSE_INVALID=-10041]="DBR_AZTEC_LICENSE_INVALID",e[e.DBR_LICENSE_DLL_MISSING=-10042]="DBR_LICENSE_DLL_MISSING",e[e.DBR_LICENSEKEY_NOT_MATCHED=-10043]="DBR_LICENSEKEY_NOT_MATCHED",e[e.DBR_REQUESTED_FAILED=-10044]="DBR_REQUESTED_FAILED",e[e.DBR_LICENSE_INIT_FAILED=-10045]="DBR_LICENSE_INIT_FAILED",e[e.DBR_PATCHCODE_LICENSE_INVALID=-10046]="DBR_PATCHCODE_LICENSE_INVALID",e[e.DBR_POSTALCODE_LICENSE_INVALID=-10047]="DBR_POSTALCODE_LICENSE_INVALID",e[e.DBR_DPM_LICENSE_INVALID=-10048]="DBR_DPM_LICENSE_INVALID",e[e.DBR_FRAME_DECODING_THREAD_EXISTS=-10049]="DBR_FRAME_DECODING_THREAD_EXISTS",e[e.DBR_STOP_DECODING_THREAD_FAILED=-10050]="DBR_STOP_DECODING_THREAD_FAILED",e[e.DBR_SET_MODE_ARGUMENT_ERROR=-10051]="DBR_SET_MODE_ARGUMENT_ERROR",e[e.DBR_LICENSE_CONTENT_INVALID=-10052]="DBR_LICENSE_CONTENT_INVALID",e[e.DBR_LICENSE_KEY_INVALID=-10053]="DBR_LICENSE_KEY_INVALID",e[e.DBR_LICENSE_DEVICE_RUNS_OUT=-10054]="DBR_LICENSE_DEVICE_RUNS_OUT",e[e.DBR_GET_MODE_ARGUMENT_ERROR=-10055]="DBR_GET_MODE_ARGUMENT_ERROR",e[e.DBR_IRT_LICENSE_INVALID=-10056]="DBR_IRT_LICENSE_INVALID",e[e.DBR_MAXICODE_LICENSE_INVALID=-10057]="DBR_MAXICODE_LICENSE_INVALID",e[e.DBR_GS1_DATABAR_LICENSE_INVALID=-10058]="DBR_GS1_DATABAR_LICENSE_INVALID",e[e.DBR_GS1_COMPOSITE_LICENSE_INVALID=-10059]="DBR_GS1_COMPOSITE_LICENSE_INVALID",e[e.DBR_DOTCODE_LICENSE_INVALID=-10061]="DBR_DOTCODE_LICENSE_INVALID",e[e.DMERR_NO_LICENSE=-2e4]="DMERR_NO_LICENSE",e[e.DMERR_LICENSE_SYNC_FAILED=-20003]="DMERR_LICENSE_SYNC_FAILED",e[e.DMERR_TRIAL_LICENSE=-20010]="DMERR_TRIAL_LICENSE",e[e.DMERR_FAILED_TO_REACH_LTS=-20200]="DMERR_FAILED_TO_REACH_LTS"}(f||(f={})),function(e){e[e.IMRDT_IMAGE=1]="IMRDT_IMAGE",e[e.IMRDT_CONTOUR=2]="IMRDT_CONTOUR",e[e.IMRDT_LINESEGMENT=4]="IMRDT_LINESEGMENT",e[e.IMRDT_LOCALIZATIONRESULT=8]="IMRDT_LOCALIZATIONRESULT",e[e.IMRDT_REGIONOFINTEREST=16]="IMRDT_REGIONOFINTEREST",e[e.IMRDT_QUADRILATERAL=32]="IMRDT_QUADRILATERAL"}(m||(m={})),function(e){e[e.BF_ALL=-31457281]="BF_ALL",e[e.BF_ONED=1050623]="BF_ONED",e[e.BF_GS1_DATABAR=260096]="BF_GS1_DATABAR",e[e.BF_CODE_39=1]="BF_CODE_39",e[e.BF_CODE_128=2]="BF_CODE_128",e[e.BF_CODE_93=4]="BF_CODE_93",e[e.BF_CODABAR=8]="BF_CODABAR",e[e.BF_ITF=16]="BF_ITF",e[e.BF_EAN_13=32]="BF_EAN_13",e[e.BF_EAN_8=64]="BF_EAN_8",e[e.BF_UPC_A=128]="BF_UPC_A",e[e.BF_UPC_E=256]="BF_UPC_E",e[e.BF_INDUSTRIAL_25=512]="BF_INDUSTRIAL_25",e[e.BF_CODE_39_EXTENDED=1024]="BF_CODE_39_EXTENDED",e[e.BF_GS1_DATABAR_OMNIDIRECTIONAL=2048]="BF_GS1_DATABAR_OMNIDIRECTIONAL",e[e.BF_GS1_DATABAR_TRUNCATED=4096]="BF_GS1_DATABAR_TRUNCATED",e[e.BF_GS1_DATABAR_STACKED=8192]="BF_GS1_DATABAR_STACKED",e[e.BF_GS1_DATABAR_STACKED_OMNIDIRECTIONAL=16384]="BF_GS1_DATABAR_STACKED_OMNIDIRECTIONAL",e[e.BF_GS1_DATABAR_EXPANDED=32768]="BF_GS1_DATABAR_EXPANDED",e[e.BF_GS1_DATABAR_EXPANDED_STACKED=65536]="BF_GS1_DATABAR_EXPANDED_STACKED",e[e.BF_GS1_DATABAR_LIMITED=131072]="BF_GS1_DATABAR_LIMITED",e[e.BF_PATCHCODE=262144]="BF_PATCHCODE",e[e.BF_PDF417=33554432]="BF_PDF417",e[e.BF_QR_CODE=67108864]="BF_QR_CODE",e[e.BF_DATAMATRIX=134217728]="BF_DATAMATRIX",e[e.BF_AZTEC=268435456]="BF_AZTEC",e[e.BF_MAXICODE=536870912]="BF_MAXICODE",e[e.BF_MICRO_QR=1073741824]="BF_MICRO_QR",e[e.BF_MICRO_PDF417=524288]="BF_MICRO_PDF417",e[e.BF_GS1_COMPOSITE=-2147483648]="BF_GS1_COMPOSITE",e[e.BF_MSI_CODE=1048576]="BF_MSI_CODE",e[e.BF_NULL=0]="BF_NULL"}(p||(p={})),"object"==typeof global&&global.process&&global.process.release&&global;const _="undefined"==typeof self,v=_?{}:self;class I{constructor(){this._canvasMaxWH="iPhone"==I.browserInfo.OS||"Android"==I.browserInfo.OS?2048:4096,this._instanceID=void 0,this.bSaveOriCanvas=!1,this.oriCanvas=null,this.bFilterRegionInJs=!0,this._region=null,this._timeStartDecode=null,this._timeEnterInnerDBR=null,this._timeGetMessage=null,this._bUseWebgl=!0,this.decodeRecords={},this.bDestroyed=!1,this._lastErrorCode=0,this._lastErrorString="",this._lastInnerDecodeDuration=0}static get version(){return this._version}static get license(){return this._license}static set license(e){if("unload"!=this._loadWasmStatus)throw new Error("`license` is not allowed to change after `createInstance` or `loadWasm` is called.");I._license=e}static get productKeys(){return this._license}static set productKeys(e){I.license=e}static get handshakeCode(){return this._license}static set handshakeCode(e){I.license=e}static get organizationID(){return this._license}static set organizationID(e){I.license=e}static set sessionPassword(e){if("unload"!=this._loadWasmStatus)throw new Error("`sessionPassword` is not allowed to change after `createInstance` or `loadWasm` is called.");I._sessionPassword=e}static get sessionPassword(){return this._sessionPassword}static detectEnvironment(){return h(this,void 0,void 0,(function*(){let e={wasm:"undefined"!=typeof WebAssembly&&("undefined"==typeof navigator||!(/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&/\(.+\s11_2_([2-6]).*\)/.test(navigator.userAgent))),worker:!("undefined"==typeof Worker),getUserMedia:!("undefined"==typeof navigator||!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia),camera:!1,browser:this.browserInfo.browser,version:this.browserInfo.version,OS:this.browserInfo.OS};if(e.getUserMedia)try{(yield navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(e=>{e.stop()}),e.camera=!0}catch(e){}return e}))}static get engineResourcePath(){return this._engineResourcePath}static set engineResourcePath(e){if("unload"!=this._loadWasmStatus)throw new Error("`engineResourcePath` is not allowed to change after `createInstance` or `loadWasm` is called.");if(null==e&&(e="./"),_)I._engineResourcePath=e;else{let t=document.createElement("a");t.href=e,I._engineResourcePath=t.href}this._engineResourcePath.endsWith("/")||(I._engineResourcePath+="/")}static get licenseServer(){return this._licenseServer}static set licenseServer(e){if("unload"!=this._loadWasmStatus)throw new Error("`licenseServer` is not allowed to change after `createInstance` or `loadWasm` is called.");if(null==e)I._licenseServer=[];else{e instanceof Array||(e=[e]);for(let t=0;t<e.length;++t){if(!_){let n=document.createElement("a");n.href=e[t],e[t]=n.href}e[t].endsWith("/")||(e[t]+="/")}I._licenseServer=e}}static get deviceFriendlyName(){return this._deviceFriendlyName}static set deviceFriendlyName(e){if("unload"!=this._loadWasmStatus)throw new Error("`deviceFriendlyName` is not allowed to change after `createInstance` or `loadWasm` is called.");I._deviceFriendlyName=e||""}static get _bUseFullFeature(){return this.__bUseFullFeature}static set _bUseFullFeature(e){if("unload"!=this._loadWasmStatus)throw new Error("`_bUseFullFeature` is not allowed to change after `createInstance` or `loadWasm` is called.");I.__bUseFullFeature=e}get ifSaveOriginalImageInACanvas(){return this.bSaveOriCanvas}set ifSaveOriginalImageInACanvas(e){this.bSaveOriCanvas=e}getOriginalImageInACanvas(){return this.oriCanvas}set region(e){this._region=e}get region(){return this._region}static isLoaded(){return"loadSuccess"==this._loadWasmStatus}isContextDestroyed(){return this.bDestroyed}static get lastErrorCode(){return this._lastErrorCode}static get lastErrorString(){return this._lastErrorString}get lastErrorCode(){return this._lastErrorCode}get lastErrorString(){return this._lastErrorString}static loadWasm(){return h(this,void 0,void 0,(function*(){let e,t=I._license,n=JSON.parse(JSON.stringify(I._licenseServer)),r=I._sessionPassword,i=null,o=null,a=0;if(t.startsWith("t")||t.startsWith("f"))a=0;else if(0===t.length||t.startsWith("P")||t.startsWith("L"))a=1;else{a=2;const e=t.indexOf(":");if(-1!=e&&(t=t.substring(e+1)),t.startsWith("DLS2")){let e=t.substring(4);e=atob(e);const a=JSON.parse(e);if(a.handshakeCode?t=a.handshakeCode:a.organizationID&&(t=a.organizationID),"number"==typeof t&&(t=JSON.stringify(t)),t||(t=""),0===n.length){let e=[];a.mainServerURL&&(e[0]=a.mainServerURL),a.standbyServerURL&&(e[1]=a.standbyServerURL),I.licenseServer=e,n=I.licenseServer}!r&&a.sessionPassword&&(r=a.sessionPassword),a.chargeWay&&(o=a.chargeWay),a.limitedLicenseModules&&(i=a.limitedLicenseModules)}}if(a&&(v.crypto||(e="Please upgrade your browser to support online key."),v.crypto.subtle||(e="Require https to use online key in this browser.")),e){if(1!==a)throw new Error(e);a=0,console.warn(e),I._lastErrorCode=f.DMERR_FAILED_TO_REACH_LTS,I._lastErrorString=e}return 1===a&&(t="",console.warn("Automatically apply for a public trial license.")),yield new Promise((e,s)=>h(this,void 0,void 0,(function*(){switch(I._loadWasmStatus){case"unload":{I._loadWasmStatus="loading";let e=I.engineResourcePath+I._workerName;I.engineResourcePath.startsWith(location.origin)||(e=yield fetch(e).then(e=>e.blob()).then(e=>URL.createObjectURL(e))),I._dbrWorker=new Worker(e),I._dbrWorker.onerror=e=>{I._loadWasmStatus="loadFail";let t=new Error(e.message);I._loadWasmErr=t;for(let n of I._loadWasmCallbackArr)n(t);I._loadWasmCallbackArr=[]},I._dbrWorker.onmessage=e=>h(this,void 0,void 0,(function*(){let t=e.data?e.data:e;switch(t.type){case"log":I._onLog&&I._onLog(t.message);break;case"load":{t.message&&(t.message=t.message.replace("(https://www.dynamsoft.com/purchase-center/)","(https://www.dynamsoft.com/store/dynamsoft-barcode-reader/#javascript)"));let e=!1;if(1===a&&(e=!0),t.success){I._loadWasmStatus="loadSuccess",I._version=t.version+"(JS "+I._jsVersion+"."+I._jsEditVersion+")",I._onLog&&I._onLog("load dbr worker success");for(let e of I._loadWasmCallbackArr)e();I._loadWasmCallbackArr=[],I._dbrWorker.onerror=null,t.message&&console.warn(t.message)}else{let n=new Error(t.message);n.stack=t.stack+"\n"+n.stack,I._loadWasmStatus="loadFail",I._loadWasmErr=n;for(let e of I._loadWasmCallbackArr)e(n);I._loadWasmCallbackArr=[],e||111==t.ltsErrorCode&&-1!=t.message.toLowerCase().indexOf("trial license")&&(e=!0)}e&&I.showDialog(t.success?"warn":"error",t.message);break}case"task":{let e=t.id,n=t.body;try{I._taskCallbackMap.get(e)(n),I._taskCallbackMap.delete(e)}catch(t){throw I._taskCallbackMap.delete(e),t}break}default:I._onLog&&I._onLog(e)}})),I._dbrWorker.postMessage({type:"loadWasm",bd:I._bWasmDebug,engineResourcePath:I.engineResourcePath,version:I._jsVersion,brtk:!!a,bptk:1===a,lcs:t,dm:location.origin.startsWith("http")?location.origin:"https://localhost",bUseFullFeature:I._bUseFullFeature,browserInfo:I.browserInfo,deviceFriendlyName:I.deviceFriendlyName,ls:n,sp:r,lm:i,cw:o})}case"loading":I._loadWasmCallbackArr.push(t=>{t?s(t):e()});break;case"loadSuccess":e();break;case"loadFail":s(I._loadWasmErr)}})))}))}static showDialog(e,t){return h(this,void 0,void 0,(function*(){if(!I._bNeverShowDialog)try{let n=yield fetch(I.engineResourcePath+"dls.license.dialog.html");if(!n.ok)throw Error("Get license dialog fail. Network Error: "+n.statusText);let r=yield n.text();if(!r.trim().startsWith("<"))throw Error("Get license dialog fail. Can't get valid HTMLElement.");let i=document.createElement("div");i.innerHTML=r;let o=[];for(let e=0;e<i.childElementCount;++e){let t=i.children[e];t instanceof HTMLStyleElement&&(o.push(t),document.head.append(t))}let a=1==i.childElementCount?i.children[0]:i;a.remove();let s,u,c,l,d,h=[a],g=a.children;for(let e of g)h.push(e);for(let e=0;e<h.length;++e)for(let t of h[e].children)h.push(t);for(let f of h)if(!s&&f.classList.contains("dls-license-mask"))s=f,f.addEventListener("click",e=>{if(f==e.target){a.remove();for(let e of o)e.remove()}});else if(!u&&f.classList.contains("dls-license-icon-close"))u=f,f.addEventListener("click",()=>{a.remove();for(let e of o)e.remove()});else if(!c&&f.classList.contains("dls-license-icon-error"))c=f,"error"!=e&&f.remove();else if(!l&&f.classList.contains("dls-license-icon-warn"))l=f,"warn"!=e&&f.remove();else if(!d&&f.classList.contains("dls-license-msg-content")){d=f;let e=t;for(;e;){let t=e.indexOf("["),n=e.indexOf("]",t),r=e.indexOf("(",n),i=e.indexOf(")",r);if(-1==t||-1==n||-1==r||-1==i){f.appendChild(new Text(e));break}t>0&&f.appendChild(new Text(e.substring(0,t)));let o=document.createElement("a"),a=e.substring(t+1,n);o.innerText=a;let s=e.substring(r+1,i);o.setAttribute("href",s),o.setAttribute("target","_blank"),f.appendChild(o),e=e.substring(i+1)}}document.body.appendChild(a)}catch(e){I._onLog&&I._onLog(e.message||e)}}))}static createInstanceInWorker(e=!1){return h(this,void 0,void 0,(function*(){return yield I.loadWasm(),yield new Promise((t,n)=>{let r=I._nextTaskID++;I._taskCallbackMap.set(r,e=>{if(e.success)return t(e.instanceID);{let t=new Error(e.message);return t.stack=e.stack+"\n"+t.stack,n(t)}}),I._dbrWorker.postMessage({type:"createInstance",id:r,bScanner:e})})}))}static createInstance(){return h(this,void 0,void 0,(function*(){let e=new I;return e._instanceID=yield I.createInstanceInWorker(),e}))}decode(e){return h(this,void 0,void 0,(function*(){I._onLog&&I._onLog("decode(source: any)"),I._onLog&&(this._timeStartDecode=Date.now());{let t={};return!this.region||this.region instanceof Array||(t.region=JSON.parse(JSON.stringify(this.region))),e instanceof Blob?yield this._decode_Blob(e,t):e instanceof ArrayBuffer?yield this._decode_ArrayBuffer(e,t):e instanceof Uint8Array||e instanceof Uint8ClampedArray?yield this._decode_Uint8Array(e,t):e instanceof HTMLImageElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?yield this._decode_Image(e,t):e instanceof HTMLCanvasElement||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas?yield this._decode_Canvas(e,t):e instanceof HTMLVideoElement?yield this._decode_Video(e,t):"string"==typeof e?"data:image/"==e.substring(0,11)?yield this._decode_Base64(e,t):yield this._decode_Url(e,t):yield Promise.reject(TypeError("'_decode(source, config)': Type of 'source' should be 'Blob', 'ArrayBuffer', 'Uint8Array', 'HTMLImageElement', 'HTMLCanvasElement', 'HTMLVideoElement', 'String(base64 with image mime)' or 'String(url)'."))}}))}decodeBase64String(e){return h(this,void 0,void 0,(function*(){let t={};return!this.region||this.region instanceof Array||(t.region=JSON.parse(JSON.stringify(this.region))),this._decode_Base64(e,t)}))}decodeUrl(e){return h(this,void 0,void 0,(function*(){let t={};return!this.region||this.region instanceof Array||(t.region=JSON.parse(JSON.stringify(this.region))),this._decode_Url(e,t)}))}_decodeBuffer_Uint8Array(e,t,n,r,i,o){return h(this,void 0,void 0,(function*(){return yield new Promise((a,s)=>{let u=I._nextTaskID++;I._taskCallbackMap.set(u,e=>{if(e.success){let t,n=I._onLog?Date.now():0;I._onLog&&I._onLog("worker return result: "+n),this._lastInnerDecodeDuration=e.duration;try{t=this._handleRetJsonString(e.decodeReturn)}catch(e){return s(e)}if(I._onLog){let e=Date.now();I._onLog("DBR time get result: "+n),I._onLog("Handle image cost: "+(this._timeEnterInnerDBR-this._timeStartDecode)),I._onLog("DBR worker decode image cost: "+(n-this._timeEnterInnerDBR)),I._onLog("DBR worker handle results: "+(e-n)),I._onLog("Total decode image cost: "+(e-this._timeStartDecode))}return a(t)}{let t=new Error(e.message);return t.stack=e.stack+"\n"+t.stack,s(t)}}),this._timeEnterInnerDBR=Date.now(),I._onLog&&I._onLog("Send buffer to worker:"+this._timeEnterInnerDBR),I._dbrWorker.postMessage({type:"decodeBuffer",id:u,instanceID:this._instanceID,body:{buffer:e,width:t,height:n,stride:r,format:i,config:o}},[e.buffer]),I._onLog&&o&&o._timeEndGettingFrame&&I._onLog("decode image delay: "+(this._timeEnterInnerDBR-o._timeEndGettingFrame))})}))}_decodeBuffer_Blob(e,t,n,r,i,o){return h(this,void 0,void 0,(function*(){I._onLog&&I._onLog("_decodeBuffer_Blob(buffer,width,height,stride,format)");const a=e.arrayBuffer?yield e.arrayBuffer():yield new Promise((t,n)=>{let r=new FileReader;r.readAsArrayBuffer(e),r.onload=()=>{t(r.result)},r.onerror=()=>{n(r.error)}});return yield this._decodeBuffer_Uint8Array(new Uint8Array(a),t,n,r,i,o)}))}decodeBuffer(e,t,n,r,i,o){return h(this,void 0,void 0,(function*(){let a;return I._onLog&&I._onLog("decodeBuffer(buffer,width,height,stride,format)"),I._onLog&&(this._timeStartDecode=Date.now()),e instanceof Uint8Array||e instanceof Uint8ClampedArray?a=yield this._decodeBuffer_Uint8Array(e,t,n,r,i,o):e instanceof ArrayBuffer?a=yield this._decodeBuffer_Uint8Array(new Uint8Array(e),t,n,r,i,o):e instanceof Blob&&(a=yield this._decodeBuffer_Blob(e,t,n,r,i,o)),a}))}_decodeFileInMemory_Uint8Array(e){return h(this,void 0,void 0,(function*(){return yield new Promise((t,n)=>{let r=I._nextTaskID++;I._taskCallbackMap.set(r,e=>{if(e.success){let r;this._lastInnerDecodeDuration=e.duration;try{r=this._handleRetJsonString(e.decodeReturn)}catch(e){return n(e)}return t(r)}{let t=new Error(e.message);return t.stack=e.stack+"\n"+t.stack,n(t)}}),I._dbrWorker.postMessage({type:"decodeFileInMemory",id:r,instanceID:this._instanceID,body:{bytes:e}})})}))}getRuntimeSettings(){return h(this,void 0,void 0,(function*(){return yield new Promise((e,t)=>{let n=I._nextTaskID++;I._taskCallbackMap.set(n,n=>{if(n.success){let t=JSON.parse(n.results);return null!=this.userDefinedRegion&&(t.region=JSON.parse(JSON.stringify(this.userDefinedRegion))),e(t)}{let e=new Error(n.message);return e.stack=n.stack+"\n"+e.stack,t(e)}}),I._dbrWorker.postMessage({type:"getRuntimeSettings",id:n,instanceID:this._instanceID})})}))}updateRuntimeSettings(e){return h(this,void 0,void 0,(function*(){let t;if("string"==typeof e)if("speed"==e){let e=yield this.getRuntimeSettings();yield this.resetRuntimeSettings(),t=yield this.getRuntimeSettings(),t.barcodeFormatIds=e.barcodeFormatIds,t.barcodeFormatIds_2=e.barcodeFormatIds_2,t.region=e.region,t.deblurLevel=3,t.expectedBarcodesCount=0,t.localizationModes=[2,0,0,0,0,0,0,0]}else if("balance"==e){let e=yield this.getRuntimeSettings();yield this.resetRuntimeSettings(),t=yield this.getRuntimeSettings(),t.barcodeFormatIds=e.barcodeFormatIds,t.barcodeFormatIds_2=e.barcodeFormatIds_2,t.region=e.region,t.deblurLevel=5,t.expectedBarcodesCount=512,t.localizationModes=[2,16,0,0,0,0,0,0]}else if("coverage"==e){let e=yield this.getRuntimeSettings();yield this.resetRuntimeSettings(),t=yield this.getRuntimeSettings(),t.barcodeFormatIds=e.barcodeFormatIds,t.barcodeFormatIds_2=e.barcodeFormatIds_2,t.region=e.region}else t=JSON.parse(e);else{if("object"!=typeof e)throw TypeError("'UpdateRuntimeSettings(settings)': Type of 'settings' should be 'string' or 'PlainObject'.");if(t=JSON.parse(JSON.stringify(e)),t.region instanceof Array){let e=t.region;[e.regionLeft,e.regionTop,e.regionLeft,e.regionBottom,e.regionMeasuredByPercentage].some(e=>void 0!==e)&&(t.region={regionLeft:e.regionLeft||0,regionTop:e.regionTop||0,regionRight:e.regionRight||0,regionBottom:e.regionBottom||0,regionMeasuredByPercentage:e.regionMeasuredByPercentage||0})}}if(!I._bUseFullFeature){if(0!=(t.barcodeFormatIds&~(p.BF_ONED|p.BF_QR_CODE|p.BF_PDF417|p.BF_DATAMATRIX))||0!=t.barcodeFormatIds_2)throw Error("Some of the specified barcode formats are not supported in the compact version. Please try the full-featured version.");if(0!=t.intermediateResultTypes)throw Error("Intermediate results is not supported in the compact version. Please try the full-featured version.")}if(this.bFilterRegionInJs){let e=t.region;if(e instanceof Array)throw Error("The `region` of type `Array` is only allowed in `BarcodeScanner`.");this.userDefinedRegion=JSON.parse(JSON.stringify(e)),this.region=(e.regionLeft||e.regionTop||e.regionRight||e.regionBottom||e.regionMeasuredByPercentage)&&(e.regionLeft||e.regionTop||100!=e.regionRight||100!=e.regionBottom||!e.regionMeasuredByPercentage)?e:null,t.region={regionLeft:0,regionTop:0,regionRight:0,regionBottom:0,regionMeasuredByPercentage:0}}else this.userDefinedRegion=null,this.region=null;return yield new Promise((e,n)=>{let r=I._nextTaskID++;I._taskCallbackMap.set(r,t=>{if(t.success){try{this._handleRetJsonString(t.updateReturn)}catch(e){n(e)}return e()}{let e=new Error(t.message);return e.stack=t.stack+"\n"+e.stack,n(e)}}),I._dbrWorker.postMessage({type:"updateRuntimeSettings",id:r,instanceID:this._instanceID,body:{settings:JSON.stringify(t)}})})}))}resetRuntimeSettings(){return h(this,void 0,void 0,(function*(){return this.userDefinedRegion=null,this.region=null,yield new Promise((e,t)=>{let n=I._nextTaskID++;I._taskCallbackMap.set(n,n=>{if(n.success)return e();{let e=new Error(n.message);return e.stack=n.stack+"\n"+e.stack,t(e)}}),I._dbrWorker.postMessage({type:"resetRuntimeSettings",id:n,instanceID:this._instanceID})})}))}outputSettingsToString(){return h(this,void 0,void 0,(function*(){if(!I._bUseFullFeature)throw Error("outputSettingsToString() is not supported in the compact version. Please try the full-featured version.");return yield new Promise((e,t)=>{let n=I._nextTaskID++;I._taskCallbackMap.set(n,n=>{if(n.success)return e(n.results);{let e=new Error(n.message);return e.stack=n.stack+"\n"+e.stack,t(e)}}),I._dbrWorker.postMessage({type:"outputSettingsToString",id:n,instanceID:this._instanceID})})}))}initRuntimeSettingsWithString(e){return h(this,void 0,void 0,(function*(){if(!I._bUseFullFeature)throw Error("initRuntimeSettingsWithString() is not supported in the compact version. Please try the full-featured version.");if("string"==typeof e)e=e;else{if("object"!=typeof e)throw TypeError("'initRuntimeSettingstWithString(settings)': Type of 'settings' should be 'string' or 'PlainObject'.");e=JSON.stringify(e)}return yield new Promise((t,n)=>{let r=I._nextTaskID++;I._taskCallbackMap.set(r,e=>{if(e.success){try{this._handleRetJsonString(e.initReturn)}catch(e){n(e)}return t()}{let t=new Error(e.message);return t.stack=e.stack+"\n"+t.stack,n(t)}}),I._dbrWorker.postMessage({type:"initRuntimeSettingsWithString",id:r,instanceID:this._instanceID,body:{settings:e}})})}))}_decode_Blob(e,t){return h(this,void 0,void 0,(function*(){I._onLog&&I._onLog("_decode_Blob(blob: Blob)");let n=null,r=null;if("undefined"!=typeof createImageBitmap)try{n=yield createImageBitmap(e)}catch(e){}n||(r=yield function(e){return new Promise((t,n)=>{let r=URL.createObjectURL(e),i=new Image;i.dbrObjUrl=r,i.src=r,i.onload=()=>{t(i)},i.onerror=e=>{n(new Error("Can't convert blob to image : "+(e instanceof Event?e.type:e)))}})}(e));let i=yield this._decode_Image(n||r,t);return n&&n.close(),i}))}_decode_ArrayBuffer(e,t){return h(this,void 0,void 0,(function*(){return yield this._decode_Blob(new Blob([e]),t)}))}_decode_Uint8Array(e,t){return h(this,void 0,void 0,(function*(){return yield this._decode_Blob(new Blob([e]),t)}))}_decode_Image(e,t){return h(this,void 0,void 0,(function*(){I._onLog&&I._onLog("_decode_Image(image: HTMLImageElement|ImageBitmap)"),t=t||{};let n,r,i,o,a=e instanceof HTMLImageElement?e.naturalWidth:e.width,s=e instanceof HTMLImageElement?e.naturalHeight:e.height,u=t.region;if(u){let e,t,i,o;u.regionMeasuredByPercentage?(e=u.regionLeft*a/100,t=u.regionTop*s/100,i=u.regionRight*a/100,o=u.regionBottom*s/100):(e=u.regionLeft,t=u.regionTop,i=u.regionRight,o=u.regionBottom),n=e,r=t,a=Math.round(i-e),s=Math.round(o-t)}else n=0,r=0;const c=Math.max(a,s);if(c>this._canvasMaxWH){const e=this._canvasMaxWH/c;a>s?(i=this._canvasMaxWH,o=Math.round(s*e)):(i=Math.round(a*e),o=this._canvasMaxWH)}else i=a,o=s;let l,d;!this.bSaveOriCanvas&&v.OffscreenCanvas?l=new OffscreenCanvas(i,o):(l=document.createElement("canvas"),l.width=i,l.height=o),l.getContext("2d").drawImage(e,n,r,a,s,0,0,i,o),e.dbrObjUrl&&URL.revokeObjectURL(e.dbrObjUrl),u?(d=JSON.parse(JSON.stringify(t)),delete d.region):d=t;let h=yield this._decode_Canvas(l,d);return I.fixResultLocationWhenFilterRegionInJs(u,h,n,r,a,s,i,o),h}))}_decode_Canvas(e,t){return h(this,void 0,void 0,(function*(){if(I._onLog&&I._onLog("_decode_Canvas(canvas:HTMLCanvasElement)"),e.crossOrigin&&"anonymous"!=e.crossOrigin)throw"cors";(this.bSaveOriCanvas||this.singleFrameMode)&&(this.oriCanvas=e);let n=(e.dbrCtx2d||e.getContext("2d")).getImageData(0,0,e.width,e.height).data;return yield this._decodeBuffer_Uint8Array(n,e.width,e.height,4*e.width,g.IPF_ABGR_8888,t)}))}_decode_Video(e,t){return h(this,void 0,void 0,(function*(){if(I._onLog&&I._onLog("_decode_Video(video)"),!(e instanceof HTMLVideoElement))throw TypeError("'_decode_Video(video [, config] )': Type of 'video' should be 'HTMLVideoElement'.");if(e.crossOrigin&&"anonymous"!=e.crossOrigin)throw"cors";let n,r,i,o,a=e.videoWidth,s=e.videoHeight,u=(t=t||{}).region;if(u){let e,t,i,o;u.regionMeasuredByPercentage?(e=u.regionLeft*a/100,t=u.regionTop*s/100,i=u.regionRight*a/100,o=u.regionBottom*s/100):(e=u.regionLeft,t=u.regionTop,i=u.regionRight,o=u.regionBottom),n=e,r=t,a=Math.round(i-e),s=Math.round(o-t)}else n=0,r=0;const c=Math.max(a,s);if(c>this._canvasMaxWH){const e=this._canvasMaxWH/c;a>s?(i=this._canvasMaxWH,o=Math.round(s*e)):(i=Math.round(a*e),o=this._canvasMaxWH)}else i=a,o=s;let l,d=null;!this.bSaveOriCanvas&&v.OffscreenCanvas?d=new OffscreenCanvas(i,o):(d=document.createElement("canvas"),d.width=i,d.height=o),(d.dbrCtx2d=d.getContext("2d")).drawImage(e,n,r,a,s,0,0,i,o),u?(l=JSON.parse(JSON.stringify(t)),delete l.region):l=t;let h=yield this._decode_Canvas(d,t);return u&&I.fixResultLocationWhenFilterRegionInJs(u,h,n,r,a,s,i,o),h}))}_decode_Base64(e,t){return h(this,void 0,void 0,(function*(){if(I._onLog&&I._onLog("_decode_Base64(base64Str)"),"string"!=typeof e)return Promise.reject("'_decode_Base64(base64Str, config)': Type of 'base64Str' should be 'string'.");"data:image/"==e.substring(0,11)&&(e=e.substring(e.indexOf(",")+1));{let n=atob(e),r=n.length,i=new Uint8Array(r);for(;r--;)i[r]=n.charCodeAt(r);return yield this._decode_Blob(new Blob([i]),t)}}))}_decode_Url(e,t){return h(this,void 0,void 0,(function*(){if(I._onLog&&I._onLog("_decode_Url(url)"),"string"!=typeof e)throw TypeError("'_decode_Url(url, config)': Type of 'url' should be 'string'.");e=e;{let n=yield new Promise((t,n)=>{let r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="blob",r.send(),r.onloadend=()=>h(this,void 0,void 0,(function*(){t(r.response)})),r.onerror=()=>{n(new Error("Network Error: "+r.statusText))}});return yield this._decode_Blob(n,t)}}))}_decode_FilePath(e,t){return h(this,void 0,void 0,(function*(){throw I._onLog&&I._onLog("_decode_FilePath(path)"),Error("'_decode_FilePath(path, config)': The method is only supported in node environment.")}))}static fixResultLocationWhenFilterRegionInJs(e,t,n,r,i,o,a,s){if(e&&t.length>0)for(let u of t){let e=u.localizationResult;2==e.resultCoordinateType&&(e.x1*=.01*a,e.x2*=.01*a,e.x3*=.01*a,e.x4*=.01*a,e.y1*=.01*s,e.y2*=.01*s,e.y3*=.01*s,e.y4*=.01*s);let t=a/i,c=s/o;e.x1=e.x1/t+n,e.x2=e.x2/t+n,e.x3=e.x3/t+n,e.x4=e.x4/t+n,e.y1=e.y1/c+r,e.y2=e.y2/c+r,e.y3=e.y3/c+r,e.y4=e.y4/c+r,2==e.resultCoordinateType&&(e.x1*=100/i,e.x2*=100/i,e.x3*=100/i,e.x4*=100/i,e.y1*=100/o,e.y2*=100/o,e.y3*=100/o,e.y4*=100/o)}}static BarcodeReaderException(e,t){let n,r=f.DBR_UNKNOWN;return"number"==typeof e?(r=e,n=new Error(t)):n=new Error(e),n.code=r,n}_handleRetJsonString(e){let t=f;if(e.textResults){for(let t=0;t<e.textResults.length;t++){let n=e.textResults[t];try{let t=n.barcodeText,r="";for(let e=0;e<t.length;e++)r+=String.fromCharCode(t[e]);try{n.barcodeText=decodeURIComponent(escape(r))}catch(e){n.barcodeText=r}}catch(e){n.barcodeText=""}if(null!=n.exception){I._setWarnnedEx.has(n.exception)||(I._setWarnnedEx.add(n.exception),console.warn(n.exception));let e={};n.exception.split(";").forEach(t=>{let n=t.indexOf(":");e[t.substring(0,n)]=t.substring(n+1)}),n.exception=e}}return this.decodeRecords=e.decodeRecords?e.decodeRecords:{},this._lastErrorCode=e.exception,this._lastErrorString=e.description,e.exception&&!I._setWarnnedEx.has(e.description)&&(I._setWarnnedEx.add(e.description),console.warn(e.description)),e.textResults}if(e.exception==t.DBR_SUCCESS)return e.data;throw I.BarcodeReaderException(e.exception,e.description)}setModeArgument(e,t,n,r){return h(this,void 0,void 0,(function*(){return yield new Promise((i,o)=>{let a=I._nextTaskID++;I._taskCallbackMap.set(a,e=>{if(e.success){try{this._handleRetJsonString(e.setReturn)}catch(e){return o(e)}return i()}{let t=new Error(e.message);return t.stack=e.stack+"\n"+t.stack,o(t)}}),I._dbrWorker.postMessage({type:"setModeArgument",id:a,instanceID:this._instanceID,body:{modeName:e,index:t,argumentName:n,argumentValue:r}})})}))}getModeArgument(e,t,n){return h(this,void 0,void 0,(function*(){return yield new Promise((r,i)=>{let o=I._nextTaskID++;I._taskCallbackMap.set(o,e=>{if(e.success){let t;try{t=this._handleRetJsonString(e.getReturn)}catch(e){return i(e)}return r(t)}{let t=new Error(e.message);return t.stack=e.stack+"\n"+t.stack,i(t)}}),I._dbrWorker.postMessage({type:"getModeArgument",id:o,instanceID:this._instanceID,body:{modeName:e,index:t,argumentName:n}})})}))}getIntermediateResults(){return h(this,void 0,void 0,(function*(){return yield new Promise((e,t)=>{let n=I._nextTaskID++;I._taskCallbackMap.set(n,n=>{if(n.success)return e(n.results);{let e=new Error(n.message);return e.stack=n.stack+"\n"+e.stack,t(e)}}),I._dbrWorker.postMessage({type:"getIntermediateResults",id:n,instanceID:this._instanceID})})}))}getIntermediateCanvas(){return h(this,void 0,void 0,(function*(){let e=yield this.getIntermediateResults(),t=[];for(let n of e)if(n.dataType==m.IMRDT_IMAGE)for(let e of n.results){const n=e.bytes;let r;switch(I._onLog&&I._onLog(" "+n.length+" "+n.byteLength+" "+e.width+" "+e.height+" "+e.stride+" "+e.format),e.format){case g.IPF_ABGR_8888:r=new Uint8ClampedArray(n);break;case g.IPF_RGB_888:{const e=n.length/3;r=new Uint8ClampedArray(4*e);for(let t=0;t<e;++t)r[4*t]=n[3*t+2],r[4*t+1]=n[3*t+1],r[4*t+2]=n[3*t],r[4*t+3]=255;break}case g.IPF_GrayScaled:{const e=n.length;r=new Uint8ClampedArray(4*e);for(let t=0;t<e;t++)r[4*t]=r[4*t+1]=r[4*t+2]=n[t],r[4*t+3]=255;break}case g.IPF_Binary:case g.IPF_BinaryInverted:{e.width=8*e.stride,e.height=n.length/e.stride;const t=n.length;r=new Uint8ClampedArray(8*t*4);for(let e=0;e<t;e++){let t=n[e];for(let n=0;n<8;++n)r[4*(8*e+n)]=r[4*(8*e+n)+1]=r[4*(8*e+n)+2]=(128&t)/128*255,r[4*(8*e+n)+3]=255,t<<=1}break}default:console.warn("unknow intermediate image",e)}if(!r)continue;let i=new ImageData(r,e.width,e.height),o=document.createElement("canvas");o.width=e.width,o.height=e.height,o.getContext("2d").putImageData(i,0,0),t.push(o)}return t}))}destroy(){return this.destroyContext()}destroyContext(){if(I._onLog&&I._onLog("destroyContext()"),!this.bDestroyed)return this.bDestroyed=!0,new Promise((e,t)=>{let n=I._nextTaskID++;I._taskCallbackMap.set(n,n=>{if(n.success)return e();{let e=new Error(n.message);return e.stack=n.stack+"\n"+e.stack,t(e)}}),I._dbrWorker.postMessage({type:"destroyContext",id:n,instanceID:this._instanceID})})}}I._jsVersion="8.8.7",I._jsEditVersion="20220125",I._version="loading...(JS "+I._jsVersion+"."+I._jsEditVersion+")",I._license=!_&&document.currentScript&&(document.currentScript.getAttribute("data-license")||document.currentScript.getAttribute("data-productKeys")||document.currentScript.getAttribute("data-licenseKey")||document.currentScript.getAttribute("data-handshakeCode")||document.currentScript.getAttribute("data-organizationID"))||"",I._sessionPassword=!_&&document.currentScript&&document.currentScript.getAttribute("data-sessionPassword")||"",I.browserInfo=function(){if(!_){var e={init:function(){this.browser=this.searchString(this.dataBrowser)||"unknownBrowser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"unknownVersion",this.OS=this.searchString(this.dataOS)||"unknownOS","Linux"==this.OS&&-1!=navigator.userAgent.indexOf("Windows NT")&&(this.OS="HarmonyOS")},searchString:function(e){for(var t=0;t<e.length;t++){var n=e[t].string,r=e[t].prop;if(this.versionSearchString=e[t].versionSearch||e[t].identity,n){if(-1!=n.indexOf(e[t].subString))return e[t].identity}else if(r)return e[t].identity}},searchVersion:function(e){var t=e.indexOf(this.versionSearchString);if(-1!=t)return parseFloat(e.substring(t+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Edge",identity:"Edge"},{string:navigator.userAgent,subString:"OPR",identity:"OPR"},{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"}],dataOS:[{string:navigator.userAgent,subString:"HarmonyOS",identity:"HarmonyOS"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone"},{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};return e.init(),{browser:e.browser,version:e.version,OS:e.OS}}if(_)return{browser:"ssr",version:0,OS:"ssr"}}(),I._workerName="dbr-"+I._jsVersion+".worker.js",I._engineResourcePath=(()=>{if(!_&&document.currentScript){let e=document.currentScript.src,t=e.indexOf("?");if(-1!=t)e=e.substring(0,t);else{let t=e.indexOf("#");-1!=t&&(e=e.substring(0,t))}return e.substring(0,e.lastIndexOf("/")+1)}return"./"})(),I._licenseServer=[],I._deviceFriendlyName="",I._isShowRelDecodeTimeInResults=!1,I._bWasmDebug=!1,I._bNeverShowDialog=!1,I.__bUseFullFeature=!0,I._nextTaskID=0,I._taskCallbackMap=new Map,I._loadWasmStatus="unload",I._loadWasmCallbackArr=[],I._lastErrorCode=0,I._lastErrorString="",I._setWarnnedEx=new Set,I._loadWasmErr=null,"object"==typeof global&&global.process&&global.process.release&&global;class y extends I{constructor(){super(),this._clickIptSingleFrameMode=()=>{},this.intervalTime=0,this.bSaveOriCanvas=!1,this._intervalGetVideoFrame=0,this.array_getFrameTimeCost=[],this.array_decodeFrameTimeCost=[],this._indexCurrentDecodingFrame=0,this._bPauseScan=!1,this._intervalDetectVideoPause=1e3,this._cvsDrawArea=null,this._divScanArea=null,this._divScanLight=null,this._selCam=null,this._selRsl=null,this._btnClose=null,this._soundOnSuccessfullRead=new Audio("data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjI5LjEwMAAAAAAAAAAAAAAA/+M4wAAAAAAAAAAAAEluZm8AAAAPAAAABQAAAkAAgICAgICAgICAgICAgICAgICAgKCgoKCgoKCgoKCgoKCgoKCgoKCgwMDAwMDAwMDAwMDAwMDAwMDAwMDg4ODg4ODg4ODg4ODg4ODg4ODg4P//////////////////////////AAAAAExhdmM1OC41NAAAAAAAAAAAAAAAACQEUQAAAAAAAAJAk0uXRQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/+MYxAANQAbGeUEQAAHZYZ3fASqD4P5TKBgocg+Bw/8+CAYBA4XB9/4EBAEP4nB9+UOf/6gfUCAIKyjgQ/Kf//wfswAAAwQA/+MYxAYOqrbdkZGQAMA7DJLCsQxNOij///////////+tv///3RWiZGBEhsf/FO/+LoCSFs1dFVS/g8f/4Mhv0nhqAieHleLy/+MYxAYOOrbMAY2gABf/////////////////usPJ66R0wI4boY9/8jQYg//g2SPx1M0N3Z0kVJLIs///Uw4aMyvHJJYmPBYG/+MYxAgPMALBucAQAoGgaBoFQVBUFQWDv6gZBUFQVBUGgaBr5YSgqCoKhIGg7+IQVBUFQVBoGga//SsFSoKnf/iVTEFNRTMu/+MYxAYAAANIAAAAADEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV"),this.bPlaySoundOnSuccessfulRead=!1,this.bVibrateOnSuccessfulRead=!1,this.vibrateDuration=300,this.regionMaskFillStyle="rgba(0,0,0,0.5)",this.regionMaskStrokeStyle="rgb(254,142,20)",this.regionMaskLineWidth=2,this.barcodeFillStyle="rgba(254,180,32,0.3)",this.barcodeStrokeStyle="rgba(254,180,32,0.9)",this.barcodeLineWidth=1,this.beingLazyDrawRegionsults=!1,this.dce=null,this._onCameraSelChange=()=>{this._divScanLight&&(this._divScanLight.style.display="none"),this._drawRegionsults(),this.array_decodeFrameTimeCost.length=0,this.array_getFrameTimeCost.length=0,this._intervalGetVideoFrame=0},this._onResolutionSelChange=()=>{this._divScanLight&&(this._divScanLight.style.display="none"),this._drawRegionsults(),this.array_decodeFrameTimeCost.length=0,this.array_getFrameTimeCost.length=0,this._intervalGetVideoFrame=0},this._onCloseBtnClick=()=>{this.hide()}}static get defaultUIElementURL(){var e;return null===(e=y._defaultUIElementURL)||void 0===e?void 0:e.replace("@engineResourcePath/",I.engineResourcePath)}static set defaultUIElementURL(e){y._defaultUIElementURL=e}getUIElement(){return this.dce.getUIElement()}setUIElement(e){return h(this,void 0,void 0,(function*(){yield this.dce.setUIElement(e)}))}get singleFrameMode(){return this.dce.singleFrameMode}set singleFrameMode(e){this.dce.singleFrameMode=e,e&&(()=>{h(this,void 0,void 0,(function*(){let e=yield this.getScanSettings();e.oneDTrustFrameCount=1,yield this.updateScanSettings(e)}))})()}get ifSaveOriginalImageInACanvas(){return this.bSaveOriCanvas}set ifSaveOriginalImageInACanvas(e){this.bSaveOriCanvas=e,this.dce&&(this.dce.ifSaveOriginalImageInACanvas=e)}_assertOpen(){if(!this.dce.isOpen())throw Error("The scanner is not open.")}get soundOnSuccessfullRead(){return this._soundOnSuccessfullRead}set soundOnSuccessfullRead(e){this._soundOnSuccessfullRead=e instanceof HTMLAudioElement?e:new Audio(e)}get whenToPlaySoundforSuccessfulRead(){return!0===this.bPlaySoundOnSuccessfulRead?"frame":this.bPlaySoundOnSuccessfulRead?this.bPlaySoundOnSuccessfulRead:"never"}set whenToPlaySoundforSuccessfulRead(e){this.bPlaySoundOnSuccessfulRead="never"!==e&&e}get whenToVibrateforSuccessfulRead(){return!0===this.bVibrateOnSuccessfulRead?"frame":this.bVibrateOnSuccessfulRead?this.bVibrateOnSuccessfulRead:"never"}set whenToVibrateforSuccessfulRead(e){this.bVibrateOnSuccessfulRead="never"!==e&&e}set region(e){this._region=e,this.dce&&(this.dce.region=e),this.singleFrameMode||(this.beingLazyDrawRegionsults=!0,setTimeout(()=>{this.beingLazyDrawRegionsults&&this._drawRegionsults()},500)),this.array_decodeFrameTimeCost.length=0,this.array_getFrameTimeCost.length=0,this._intervalGetVideoFrame=0}get region(){return this._region}createDCEInstance(){return h(this,void 0,void 0,(function*(){this.dce||(I._onLog&&I._onLog("createDCEInstance()"),l.defaultUIElementURL=null,this.dce=yield l.createInstance(),this.dce.bChangeRegionIndexManually=!0,this.dce.regionIndex=0,this.dce.bufferRefreshInterval=200,this.dce.alwaysRefreshBuffer=!1,this.dce.ifSaveOriginalImageInACanvas=!1,this.dce.onSingleFrameAcquired=e=>h(this,void 0,void 0,(function*(){let t=yield this.decode(e);yield this.clearMapDecodeRecord();for(let e of t)delete e.bUnduplicated;if(this._drawRegionsults(t),this.onFrameRead&&this.isOpen()&&!this._bPauseScan&&this.onFrameRead(t),this.onUniqueRead&&this.isOpen()&&!this._bPauseScan)for(let e of t)this.onUniqueRead(e.barcodeText,e)})),this._clickIptSingleFrameMode=this.dce._clickIptSingleFrameMode)}))}static createInstance(e){return h(this,void 0,void 0,(function*(){let t=new y;yield t.createDCEInstance(),t._instanceID=yield y.createInstanceInWorker(!0),"string"==typeof e&&(e=JSON.parse(e));for(let n in e)t[n]=e[n];return yield t.setUIElement(y.defaultUIElementURL),t.singleFrameMode&&console.warn("The `navigator.mediaDevices.getUserMedia` is unavailable. automatically change to `singleFrameMode`."),t.singleFrameMode||(yield t.updateRuntimeSettings("single")),t}))}decode(e){return super.decode(e)}decodeBase64String(e){return super.decodeBase64String(e)}decodeUrl(e){return super.decodeUrl(e)}decodeBuffer(e,t,n,r,i,o){return super.decodeBuffer(e,t,n,r,i,o)}decodeCurrentFrame(e){return h(this,void 0,void 0,(function*(){this._assertOpen();let t=null;e&&e.region&&(t=e.region);let n=this.dce.getFrame(t);if(n&&null===n.canvas){let{data:e,width:t,height:r}=n;return yield this._decodeBuffer_Uint8Array(e,t,r,t,g.IPF_GrayScaled)}if(n&&n.canvas){let{data:e,canvas:t,region:r,sx:i,sy:o,sWidth:a,sHeight:s}=n;(this.bSaveOriCanvas||this.singleFrameMode)&&(this.oriCanvas=t);let u=yield this._decodeBuffer_Uint8Array(e,t.width,t.height,4*t.width,g.IPF_ABGR_8888);return I.fixResultLocationWhenFilterRegionInJs(r,u,i,o,a,s,t.width,t.height),u}}))}clearMapDecodeRecord(){return h(this,void 0,void 0,(function*(){return yield new Promise((e,t)=>{let n=I._nextTaskID++;I._taskCallbackMap.set(n,n=>{if(n.success)return e();{let e=new Error(n.message);return e.stack=n.stack+"\n"+e.stack,t(e)}}),I._dbrWorker.postMessage({type:"clearMapDecodeRecord",id:n,instanceID:this._instanceID})})}))}static isRegionSinglePreset(e){return JSON.stringify(e)==JSON.stringify(y.singlePresetRegion)}static isRegionNormalPreset(e){return 0==e.regionLeft&&0==e.regionTop&&0==e.regionRight&&0==e.regionBottom&&0==e.regionMeasuredByPercentage}updateRuntimeSettings(e){return h(this,void 0,void 0,(function*(){let t;if("string"==typeof e)if("speed"==e){let e=yield this.getRuntimeSettings();yield this.resetRuntimeSettings(),t=yield this.getRuntimeSettings(),t.barcodeFormatIds=e.barcodeFormatIds,t.barcodeFormatIds_2=e.barcodeFormatIds_2,y.isRegionSinglePreset(e.region)||(t.region=e.region)}else if("balance"==e){let e=yield this.getRuntimeSettings();yield this.resetRuntimeSettings(),t=yield this.getRuntimeSettings(),t.barcodeFormatIds=e.barcodeFormatIds,t.barcodeFormatIds_2=e.barcodeFormatIds_2,y.isRegionSinglePreset(e.region)||(t.region=e.region),t.deblurLevel=3,t.expectedBarcodesCount=512,t.localizationModes=[2,16,0,0,0,0,0,0],t.timeout=1e5}else if("coverage"==e){let e=yield this.getRuntimeSettings();yield this.resetRuntimeSettings(),t=yield this.getRuntimeSettings(),t.barcodeFormatIds=e.barcodeFormatIds,t.barcodeFormatIds_2=e.barcodeFormatIds_2,y.isRegionSinglePreset(e.region)||(t.region=e.region),t.deblurLevel=5,t.expectedBarcodesCount=512,t.scaleDownThreshold=1e5,t.localizationModes=[2,16,4,8,0,0,0,0],t.timeout=1e5}else if("single"==e){let e=yield this.getRuntimeSettings();yield this.resetRuntimeSettings(),t=yield this.getRuntimeSettings(),t.barcodeFormatIds=e.barcodeFormatIds,t.barcodeFormatIds_2=e.barcodeFormatIds_2,t.region=y.isRegionNormalPreset(e.region)?JSON.parse(JSON.stringify(y.singlePresetRegion)):e.region,t.expectedBarcodesCount=1,t.localizationModes=[16,2,0,0,0,0,0,0],t.barcodeZoneMinDistanceToImageBorders=0}else t=JSON.parse(e);else{if("object"!=typeof e)throw TypeError("'UpdateRuntimeSettings(settings)': Type of 'settings' should be 'string' or 'PlainObject'.");if(t=JSON.parse(JSON.stringify(e)),t.region instanceof Array){let n=e.region;[n.regionLeft,n.regionTop,n.regionLeft,n.regionBottom,n.regionMeasuredByPercentage].some(e=>void 0!==e)&&(t.region={regionLeft:n.regionLeft||0,regionTop:n.regionTop||0,regionRight:n.regionRight||0,regionBottom:n.regionBottom||0,regionMeasuredByPercentage:n.regionMeasuredByPercentage||0})}}if(!I._bUseFullFeature){if(0!=(t.barcodeFormatIds&~(p.BF_ONED|p.BF_QR_CODE|p.BF_PDF417|p.BF_DATAMATRIX))||0!=t.barcodeFormatIds_2)throw Error("Some of the specified barcode formats are not supported in the compact version. Please try the full-featured version.");if(0!=t.intermediateResultTypes)throw Error("Intermediate results is not supported in the compact version. Please try the full-featured version.")}{let e=t.region;if(this.userDefinedRegion=this.bFilterRegionInJs?JSON.parse(JSON.stringify(e)):null,e instanceof Array)if(e.length){for(let t=0;t<e.length;++t){let n=e[t];n&&((n.regionLeft||n.regionTop||n.regionRight||n.regionBottom||n.regionMeasuredByPercentage)&&(n.regionLeft||n.regionTop||100!=n.regionRight||100!=n.regionBottom||!n.regionMeasuredByPercentage)||(e[t]=null))}this.region=e}else this.region=null;else this.region=(e.regionLeft||e.regionTop||e.regionRight||e.regionBottom||e.regionMeasuredByPercentage)&&(e.regionLeft||e.regionTop||100!=e.regionRight||100!=e.regionBottom||!e.regionMeasuredByPercentage)?e:null;this.bFilterRegionInJs&&(t.region={regionLeft:0,regionTop:0,regionRight:0,regionBottom:0,regionMeasuredByPercentage:0})}yield new Promise((e,n)=>{let r=I._nextTaskID++;I._taskCallbackMap.set(r,t=>{if(t.success){try{this._handleRetJsonString(t.updateReturn)}catch(e){n(e)}return e()}{let e=new Error(t.message);return e.stack=t.stack+"\n"+e.stack,n(e)}}),I._dbrWorker.postMessage({type:"updateRuntimeSettings",id:r,instanceID:this._instanceID,body:{settings:JSON.stringify(t)}})}),"single"==e&&(yield this.setModeArgument("BinarizationModes",0,"EnableFillBinaryVacancy","0"),yield this.setModeArgument("LocalizationModes",0,"ScanDirection","2"),yield this.setModeArgument("BinarizationModes",0,"BlockSizeX","71"),yield this.setModeArgument("BinarizationModes",0,"BlockSizeY","71"))}))}_bindUI(){let e=this.getUIElement();if(!e)throw new Error("Need to define `UIElement` before opening.");let t=[e];for(let n=0;n<t.length;++n)for(let e of t[n].children)t.push(e);for(let n of t)this.dce._video||!n.classList.contains("dce-video")&&!n.classList.contains("dbrScanner-video")?this.dce._bgLoading||!n.classList.contains("dce-bg-loading")&&!n.classList.contains("dbrScanner-bg-loading")?this.dce._bgCamera||!n.classList.contains("dce-bg-camera")&&!n.classList.contains("dbrScanner-bg-camera")?!this._cvsDrawArea&&n.classList.contains("dbrScanner-cvs-drawarea")?this._cvsDrawArea=n:!this._divScanArea&&n.classList.contains("dbrScanner-cvs-scanarea")?this._divScanArea=n:!this._divScanLight&&n.classList.contains("dbrScanner-scanlight")?this._divScanLight=n:this.dce._selCam||!n.classList.contains("dce-sel-camera")&&!n.classList.contains("dbrScanner-sel-camera")?!this.dce._selRsl&&n.classList.contains("dbrScanner-sel-resolution")?(this.dce._selRsl=n,this.dce._selRsl.options.length||(this.dce._selRsl.innerHTML=[this.dce._optGotRsl?"":'<option class="dbrScanner-opt-gotResolution" value="got"></option>','<option data-width="1920" data-height="1080">ask 1920 x 1080</option>','<option data-width="1280" data-height="720">ask 1280 x 720</option>','<option data-width="640" data-height="480">ask 640 x 480</option>'].join(""),this.dce._optGotRsl=this.dce._optGotRsl||this.dce._selRsl.options[0])):this.dce._optGotRsl||!n.classList.contains("dce-opt-gotResolution")&&!n.classList.contains("dbrScanner-opt-gotResolution")?this.dce._btnClose||!n.classList.contains("dce-btn-close")&&!n.classList.contains("dbrScanner-btn-close")?this.dce._video||!n.classList.contains("dce-existingVideo")&&!n.classList.contains("dbrScanner-existingVideo")||(this.dce._video=n,this.dce._video.setAttribute("playsinline","true"),this.dce.singleFrameMode=!1):this.dce._btnClose=n:this.dce._optGotRsl=n:this.dce._selCam=n:this.dce._bgCamera=n:this.dce._bgLoading=n:(this.dce._video=n,this.dce._video.setAttribute("playsinline","true"));if(this.dce._bindUI(),this._selCam=this.dce._selCam,this._selRsl=this.dce._selRsl,this._btnClose=this.dce._btnClose,this.singleFrameMode&&(this._cvsDrawArea&&(this._cvsDrawArea.addEventListener("click",this._clickIptSingleFrameMode),this._cvsDrawArea.style.cursor="pointer",this._cvsDrawArea.setAttribute("title","Take a photo")),this._divScanArea&&(this._divScanArea.addEventListener("click",this._clickIptSingleFrameMode),this._divScanArea.style.cursor="pointer",this._divScanArea.setAttribute("title","Take a photo"))),this._selCam&&this._selCam.addEventListener("change",this._onCameraSelChange),this._selRsl&&this._selRsl.addEventListener("change",this._onResolutionSelChange),this._btnClose&&this._btnClose.addEventListener("click",this._onCloseBtnClick),!this.dce.video)throw this._unbindUI(),Error("Can not find HTMLVideoElement with class `dbrScanner-video`.")}_unbindUI(){this._clearRegionsults(),this.singleFrameMode&&(this._cvsDrawArea&&(this._cvsDrawArea.removeEventListener("click",this._clickIptSingleFrameMode),this._cvsDrawArea.style.cursor="",this._cvsDrawArea.removeAttribute("title")),this._divScanArea&&(this._divScanArea.removeEventListener("click",this._clickIptSingleFrameMode),this._divScanArea.style.cursor="",this._divScanArea.removeAttribute("title"))),this._selCam&&this._selCam.removeEventListener("change",this._onCameraSelChange),this._selRsl&&this._selRsl.removeEventListener("change",this._onResolutionSelChange),this._btnClose&&this._btnClose.removeEventListener("click",this._onCloseBtnClick),this.dce._unbindUI(),this._cvsDrawArea=null,this._divScanArea=null,this._divScanLight=null,this._selCam=null,this._selRsl=null,this._btnClose=null}set onPlayed(e){this.dce.onPlayed=e}get onPlayed(){return this.dce.onPlayed}get onUnduplicatedRead(){return this.onUniqueRead}set onUnduplicatedRead(e){this.onUniqueRead=e}getAllCameras(){return h(this,void 0,void 0,(function*(){return this.dce.getAllCameras()}))}getCurrentCamera(){return h(this,void 0,void 0,(function*(){return this.dce.getSelectedCamera()}))}setCurrentCamera(e){return h(this,void 0,void 0,(function*(){return this.dce.selectCamera(e)}))}getResolution(){return this.dce.getResolution()}setResolution(e,t){return h(this,void 0,void 0,(function*(){return this.dce.setResolution(e,t)}))}getScanSettings(){return h(this,void 0,void 0,(function*(){return yield new Promise((e,t)=>{let n=I._nextTaskID++;I._taskCallbackMap.set(n,n=>{if(n.success){let t=n.results;return t.intervalTime=this.intervalTime,e(t)}{let e=new Error(n.message);return e.stack+="\n"+n.stack,t(e)}}),I._dbrWorker.postMessage({type:"getScanSettings",id:n,instanceID:this._instanceID})})}))}updateScanSettings(e){return h(this,void 0,void 0,(function*(){return this.intervalTime=e.intervalTime,yield new Promise((t,n)=>{let r=I._nextTaskID++;I._taskCallbackMap.set(r,e=>{if(e.success)return t();{let t=new Error(e.message);return t.stack+="\n"+e.stack,n(t)}}),y._dbrWorker.postMessage({type:"updateScanSettings",id:r,instanceID:this._instanceID,body:{settings:e}})})}))}getVideoSettings(){return this.dce.getVideoSettings()}updateVideoSettings(e){return this.dce.updateVideoSettings(e)}isOpen(){return this.dce&&this.dce.isOpen()}_show(){let e=this.getUIElement();e.parentNode||(e.style.position="fixed",e.style.left="0",e.style.top="0",document.body.append(e)),"none"==e.style.display&&(e.style.display="")}stop(){this.dce.stop(),this._divScanLight&&(this._divScanLight.style.display="none"),this._drawRegionsults(),this.array_decodeFrameTimeCost.length=0,this.array_getFrameTimeCost.length=0,this._intervalGetVideoFrame=0}pause(){this.dce.pause(),this._divScanLight&&(this._divScanLight.style.display="none")}play(e,t,n){return h(this,void 0,void 0,(function*(){return this.dce.play(e,t,n)}))}pauseScan(){this._assertOpen(),this._bPauseScan=!0,this._divScanLight&&(this._divScanLight.style.display="none")}resumeScan(){this._assertOpen(),this._bPauseScan=!1}getCapabilities(){return this.dce.getCapabilities()}getCameraSettings(){return this.dce.getCameraSettings()}getConstraints(){return this.dce.getConstraints()}applyConstraints(e){return h(this,void 0,void 0,(function*(){return this.dce.applyConstraints(e)}))}turnOnTorch(){return h(this,void 0,void 0,(function*(){return this.dce.turnOnTorch()}))}turnOffTorch(){return h(this,void 0,void 0,(function*(){return this.dce.turnOffTorch()}))}setColorTemperature(e){return h(this,void 0,void 0,(function*(){return this.dce.setColorTemperature(e)}))}setExposureCompensation(e){return h(this,void 0,void 0,(function*(){return this.dce.setExposureCompensation(e)}))}setZoom(e){return h(this,void 0,void 0,(function*(){return this.dce.setZoom(e)}))}setFrameRate(e){return h(this,void 0,void 0,(function*(){return this.dce.setFrameRate(e)}))}getFrameRate(){return this.dce.getFrameRate()}_cloneDecodeResults(e){if(e instanceof Array){let t=[];for(let n of e)t.push(this._cloneDecodeResults(n));return t}return JSON.parse(JSON.stringify(e,(e,t)=>"oriVideoCanvas"==e||"searchRegionCanvas"==e?void 0:t))}_loopReadVideo(){return h(this,void 0,void 0,(function*(){if(this.bDestroyed)return void this.dce.stopFetchingLoop();if(!this.isOpen())return this.dce.stopFetchingLoop(),void(yield this.clearMapDecodeRecord());if(!this.dce.video||this.dce.video.paused||this._bPauseScan)return I._onLog&&I._onLog("Video or scan is paused. Ask in 1s."),this.dce.stopFetchingLoop(),yield this.clearMapDecodeRecord(),this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),void(this._loopReadVideoTimeoutId=setTimeout(()=>{this._loopReadVideo()},this._intervalDetectVideoPause));this._divScanLight&&"none"==this._divScanLight.style.display&&(this._divScanLight.style.display=""),I._onLog&&I._onLog("======= once read ======="),I._onLog&&(this._timeStartDecode=Date.now());let e=this._getVideoFrame();if(!e)return this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),void(this._loopReadVideoTimeoutId=setTimeout(()=>{this._loopReadVideo()},0));(()=>h(this,void 0,void 0,(function*(){if(e&&null===e.canvas){let{data:t,width:n,height:r,timeStamp:i}=e,o={timeStamp:i};return yield this._decodeBuffer_Uint8Array(t,n,r,n,g.IPF_GrayScaled,o)}if(e&&e.canvas){let{data:t,canvas:n,region:r,sx:i,sy:o,width:a,height:s,timeStamp:u}=e,c={timeStamp:u};(this.bSaveOriCanvas||this.singleFrameMode)&&(this.oriCanvas=n);let l=yield this._decodeBuffer_Uint8Array(t,n.width,n.height,4*n.width,g.IPF_ABGR_8888,c);return I.fixResultLocationWhenFilterRegionInJs(r,l,i,o,n.width,n.height,a,s),l}{let e=new Error("imgData is empty.");return new Promise(t=>t(e))}})))().then(e=>{I._onLog&&I._onLog(e);let t=this.array_decodeFrameTimeCost,n=this.array_getFrameTimeCost,r=this._indexCurrentDecodingFrame;if((()=>{if(this.region instanceof Array){for(t[r]&&t[r]instanceof Array||(t[r]=[]);t[r].length>=5;)t[r].shift();t[r].push(this._lastInnerDecodeDuration)}else{for(;t.length>=5;)t.shift();t.push(this._lastInnerDecodeDuration)}})(),this._intervalGetVideoFrame=(()=>{let e=0;if(this.region instanceof Array){let i=0,o=0;i=r+1>=this.region.length?0:r+1,o=i+1>=this.region.length?0:i+1,e=t[i]&&t[i].length&&n[o]&&n[o].length?Math.min(...t[i])-Math.max(...n[o]):0}else if(n&&n.length){let r=Math.min(...t),i=Math.max(...n);r&&i&&(e=r-i)}else e=0;return e>0?e:0})()+this.intervalTime,this.isOpen()&&this.dce.video&&!this.dce.video.paused&&!this._bPauseScan){if(this.bPlaySoundOnSuccessfulRead&&e.length){let t=!1;if(!0===this.bPlaySoundOnSuccessfulRead||"frame"===this.bPlaySoundOnSuccessfulRead)t=!0;else if("unduplicated"===this.bPlaySoundOnSuccessfulRead)for(let n of e)if(n.bUnduplicated){t=!0;break}t&&(this.soundOnSuccessfullRead.currentTime=0,this.soundOnSuccessfullRead.play().catch(e=>{console.warn("Autoplay not allowed. User interaction required: "+(e.message||e))}))}if(navigator.vibrate&&this.bVibrateOnSuccessfulRead&&e.length){let t=!1;if(!0===this.bVibrateOnSuccessfulRead||"frame"===this.bVibrateOnSuccessfulRead)t=!0;else if("unduplicated"===this.bVibrateOnSuccessfulRead)for(let n of e)if(n.bUnduplicated){t=!0;break}if(t)try{navigator.vibrate(this.vibrateDuration)}catch(e){console.warn("Vibration not allowed. User interaction required: "+(e.message||e))}}if(this.onFrameRead){let t=this._cloneDecodeResults(e);for(let e of t)delete e.bUnduplicated;this.onFrameRead(t)}if(this.onUniqueRead)for(let t of e)t.bUnduplicated&&this.onUniqueRead(t.barcodeText,this._cloneDecodeResults(t));this._drawRegionsults(e)}this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),this.intervalTime?this._loopReadVideoTimeoutId=setTimeout(()=>{this._loopReadVideo()},this.intervalTime):this._loopReadVideo()}).catch(e=>{this.dce.stopFetchingLoop(),I._onLog&&I._onLog(e.message||e),this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),this._loopReadVideoTimeoutId=setTimeout(()=>{this._loopReadVideo()},Math.max(this.intervalTime,1e3)),"platform error"==e.message||console.warn(e.message)})}))}_getVideoFrame(){let e=this.dce.isFetchingLoopStarted();if(this.dce.loopInterval=this._intervalGetVideoFrame,e||this.dce.startFetchingLoop(),!this.dce.getQueueLength())return this.dce.loopInterval=0,null;let t=this.dce.getFrameFromBuffer();return this._indexCurrentDecodingFrame=this.dce.regionIndex,this.region instanceof Array&&this.dce.regionIndex++,(e=>{let t=e.timeSpent,n=this.array_getFrameTimeCost;if(this.region instanceof Array){let e=this._indexCurrentDecodingFrame;for(n[e]&&n[e]instanceof Array||(n[e]=[]);n[e].length>=5;)n[e].shift();n[e].push(t)}else{for(;n.length>=5;)n.shift();n.push(t)}})(t),t}_drawRegionsults(e){let t,n,r;if(this.beingLazyDrawRegionsults=!1,this.singleFrameMode){if(!this.oriCanvas)return;t="contain",n=this.oriCanvas.width,r=this.oriCanvas.height}else{if(!this.dce.video)return;t=this.dce.video.style.objectFit||"contain",n=this.dce.video.videoWidth,r=this.dce.video.videoHeight}let i=this.region;if(i&&(!i.regionLeft&&!i.regionRight&&!i.regionTop&&!i.regionBottom&&!i.regionMeasuredByPercentage||i instanceof Array?i=null:i.regionMeasuredByPercentage?i=i.regionLeft||i.regionRight||100!==i.regionTop||100!==i.regionBottom?{regionLeft:Math.round(i.regionLeft/100*n),regionTop:Math.round(i.regionTop/100*r),regionRight:Math.round(i.regionRight/100*n),regionBottom:Math.round(i.regionBottom/100*r)}:null:(i=JSON.parse(JSON.stringify(i)),delete i.regionMeasuredByPercentage)),this._cvsDrawArea){this._cvsDrawArea.style.objectFit=t;let o=this._cvsDrawArea;o.width=n,o.height=r;let a=o.getContext("2d");if(i){a.fillStyle=this.regionMaskFillStyle,a.fillRect(0,0,o.width,o.height),a.globalCompositeOperation="destination-out",a.fillStyle="#000";let e=Math.round(this.regionMaskLineWidth/2);a.fillRect(i.regionLeft-e,i.regionTop-e,i.regionRight-i.regionLeft+2*e,i.regionBottom-i.regionTop+2*e),a.globalCompositeOperation="source-over",a.strokeStyle=this.regionMaskStrokeStyle,a.lineWidth=this.regionMaskLineWidth,a.rect(i.regionLeft,i.regionTop,i.regionRight-i.regionLeft,i.regionBottom-i.regionTop),a.stroke()}if(e){a.globalCompositeOperation="destination-over",a.fillStyle=this.barcodeFillStyle,a.strokeStyle=this.barcodeStrokeStyle,a.lineWidth=this.barcodeLineWidth,e=e||[];for(let t of e){let e=t.localizationResult;a.beginPath(),a.moveTo(e.x1,e.y1),a.lineTo(e.x2,e.y2),a.lineTo(e.x3,e.y3),a.lineTo(e.x4,e.y4),a.fill(),a.beginPath(),a.moveTo(e.x1,e.y1),a.lineTo(e.x2,e.y2),a.lineTo(e.x3,e.y3),a.lineTo(e.x4,e.y4),a.closePath(),a.stroke()}}this.singleFrameMode&&(a.globalCompositeOperation="destination-over",a.drawImage(this.oriCanvas,0,0))}if(this._divScanArea&&this.dce.video){let e=this.dce.video.offsetWidth,t=this.dce.video.offsetHeight,o=1;e/t<n/r?(o=e/n,this._divScanArea.style.left="0",this._divScanArea.style.top=Math.round((t-r*o)/2)+"px"):(o=t/r,this._divScanArea.style.left=Math.round((e-n*o)/2)+"px",this._divScanArea.style.top="0");let a=i?Math.round(i.regionLeft*o):0,s=i?Math.round(i.regionTop*o):0,u=i?Math.round(i.regionRight*o-a):Math.round(n*o),c=i?Math.round(i.regionBottom*o-s):Math.round(r*o);this._divScanArea.style.marginLeft=a+"px",this._divScanArea.style.marginTop=s+"px",this._divScanArea.style.width=u+"px",this._divScanArea.style.height=c+"px"}}_clearRegionsults(){this._cvsDrawArea&&(this._cvsDrawArea.width=this._cvsDrawArea.height=0)}open(){return h(this,void 0,void 0,(function*(){this._bindUI();let e=yield this.play();return this.singleFrameMode||(this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),this._drawRegionsults(),this._loopReadVideo()),e}))}openVideo(){return h(this,void 0,void 0,(function*(){this._bindUI();let e=yield this.play();return this._bPauseScan=!0,this.singleFrameMode||(this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),this._drawRegionsults(),this._loopReadVideo()),e}))}close(){return h(this,void 0,void 0,(function*(){this.stop(),this._unbindUI(),this._bPauseScan=!1}))}show(){return h(this,void 0,void 0,(function*(){this._bindUI(),this._show();let e=yield this.play();return this.singleFrameMode||(this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),this._drawRegionsults(),this._loopReadVideo()),e}))}showVideo(){return h(this,void 0,void 0,(function*(){this._bindUI(),this._show();let e=yield this.play();return this._bPauseScan=!0,this.singleFrameMode||(this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),this._drawRegionsults(),this._loopReadVideo()),e}))}hide(){return h(this,void 0,void 0,(function*(){this.stop(),this._unbindUI(),this._bPauseScan=!1,this.getUIElement().style.display="none"}))}destroy(){return this.destroyContext()}destroyContext(){const e=Object.create(null,{destroyContext:{get:()=>super.destroyContext}});return h(this,void 0,void 0,(function*(){yield this.close(),this.bDestroyed||(yield e.destroyContext.call(this))}))}}var b,D,T,S,w,C,E,M,P,A,x,R,k,L,F,W,O,B,N,V,U,G,j,H,z,K,J;y._defaultUIElementURL="@engineResourcePath/dbr.scanner.html",y.singlePresetRegion=[null,{regionLeft:0,regionTop:30,regionRight:100,regionBottom:70,regionMeasuredByPercentage:1},{regionLeft:25,regionTop:25,regionRight:75,regionBottom:75,regionMeasuredByPercentage:1},{regionLeft:25,regionTop:25,regionRight:75,regionBottom:75,regionMeasuredByPercentage:1}],function(e){e[e.BICM_DARK_ON_LIGHT=1]="BICM_DARK_ON_LIGHT",e[e.BICM_LIGHT_ON_DARK=2]="BICM_LIGHT_ON_DARK",e[e.BICM_DARK_ON_DARK=4]="BICM_DARK_ON_DARK",e[e.BICM_LIGHT_ON_LIGHT=8]="BICM_LIGHT_ON_LIGHT",e[e.BICM_DARK_LIGHT_MIXED=16]="BICM_DARK_LIGHT_MIXED",e[e.BICM_DARK_ON_LIGHT_DARK_SURROUNDING=32]="BICM_DARK_ON_LIGHT_DARK_SURROUNDING",e[e.BICM_SKIP=0]="BICM_SKIP",e[e.BICM_REV=2147483648]="BICM_REV"}(b||(b={})),function(e){e[e.BCM_AUTO=1]="BCM_AUTO",e[e.BCM_GENERAL=2]="BCM_GENERAL",e[e.BCM_SKIP=0]="BCM_SKIP",e[e.BCM_REV=2147483648]="BCM_REV"}(D||(D={})),function(e){e[e.BF2_NULL=0]="BF2_NULL",e[e.BF2_POSTALCODE=32505856]="BF2_POSTALCODE",e[e.BF2_NONSTANDARD_BARCODE=1]="BF2_NONSTANDARD_BARCODE",e[e.BF2_USPSINTELLIGENTMAIL=1048576]="BF2_USPSINTELLIGENTMAIL",e[e.BF2_POSTNET=2097152]="BF2_POSTNET",e[e.BF2_PLANET=4194304]="BF2_PLANET",e[e.BF2_AUSTRALIANPOST=8388608]="BF2_AUSTRALIANPOST",e[e.BF2_RM4SCC=16777216]="BF2_RM4SCC",e[e.BF2_DOTCODE=2]="BF2_DOTCODE"}(T||(T={})),function(e){e[e.BM_AUTO=1]="BM_AUTO",e[e.BM_LOCAL_BLOCK=2]="BM_LOCAL_BLOCK",e[e.BM_SKIP=0]="BM_SKIP",e[e.BM_THRESHOLD=4]="BM_THRESHOLD",e[e.BM_REV=2147483648]="BM_REV"}(S||(S={})),function(e){e[e.ECCM_CONTRAST=1]="ECCM_CONTRAST"}(w||(w={})),function(e){e[e.CFM_GENERAL=1]="CFM_GENERAL"}(C||(C={})),function(e){e[e.CCM_AUTO=1]="CCM_AUTO",e[e.CCM_GENERAL_HSV=2]="CCM_GENERAL_HSV",e[e.CCM_SKIP=0]="CCM_SKIP",e[e.CCM_REV=2147483648]="CCM_REV"}(E||(E={})),function(e){e[e.CICM_GENERAL=1]="CICM_GENERAL",e[e.CICM_SKIP=0]="CICM_SKIP",e[e.CICM_REV=2147483648]="CICM_REV"}(M||(M={})),function(e){e[e.CM_IGNORE=1]="CM_IGNORE",e[e.CM_OVERWRITE=2]="CM_OVERWRITE"}(P||(P={})),function(e){e[e.DM_SKIP=0]="DM_SKIP",e[e.DM_DIRECT_BINARIZATION=1]="DM_DIRECT_BINARIZATION",e[e.DM_THRESHOLD_BINARIZATION=2]="DM_THRESHOLD_BINARIZATION",e[e.DM_GRAY_EQUALIZATION=4]="DM_GRAY_EQUALIZATION",e[e.DM_SMOOTHING=8]="DM_SMOOTHING",e[e.DM_MORPHING=16]="DM_MORPHING",e[e.DM_DEEP_ANALYSIS=32]="DM_DEEP_ANALYSIS",e[e.DM_SHARPENING=64]="DM_SHARPENING",e[e.DM_BASED_ON_LOC_BIN=128]="DM_BASED_ON_LOC_BIN",e[e.DM_SHARPENING_SMOOTHING=256]="DM_SHARPENING_SMOOTHING"}(A||(A={})),function(e){e[e.DRM_AUTO=1]="DRM_AUTO",e[e.DRM_GENERAL=2]="DRM_GENERAL",e[e.DRM_SKIP=0]="DRM_SKIP",e[e.DRM_REV=2147483648]="DRM_REV"}(x||(x={})),function(e){e[e.DPMCRM_AUTO=1]="DPMCRM_AUTO",e[e.DPMCRM_GENERAL=2]="DPMCRM_GENERAL",e[e.DPMCRM_SKIP=0]="DPMCRM_SKIP",e[e.DPMCRM_REV=2147483648]="DPMCRM_REV"}(R||(R={})),function(e){e[e.GTM_INVERTED=1]="GTM_INVERTED",e[e.GTM_ORIGINAL=2]="GTM_ORIGINAL",e[e.GTM_SKIP=0]="GTM_SKIP",e[e.GTM_REV=2147483648]="GTM_REV"}(k||(k={})),function(e){e[e.IPM_AUTO=1]="IPM_AUTO",e[e.IPM_GENERAL=2]="IPM_GENERAL",e[e.IPM_GRAY_EQUALIZE=4]="IPM_GRAY_EQUALIZE",e[e.IPM_GRAY_SMOOTH=8]="IPM_GRAY_SMOOTH",e[e.IPM_SHARPEN_SMOOTH=16]="IPM_SHARPEN_SMOOTH",e[e.IPM_MORPHOLOGY=32]="IPM_MORPHOLOGY",e[e.IPM_SKIP=0]="IPM_SKIP",e[e.IPM_REV=2147483648]="IPM_REV"}(L||(L={})),function(e){e[e.IRSM_MEMORY=1]="IRSM_MEMORY",e[e.IRSM_FILESYSTEM=2]="IRSM_FILESYSTEM",e[e.IRSM_BOTH=4]="IRSM_BOTH"}(F||(F={})),function(e){e[e.IRT_NO_RESULT=0]="IRT_NO_RESULT",e[e.IRT_ORIGINAL_IMAGE=1]="IRT_ORIGINAL_IMAGE",e[e.IRT_COLOUR_CLUSTERED_IMAGE=2]="IRT_COLOUR_CLUSTERED_IMAGE",e[e.IRT_COLOUR_CONVERTED_GRAYSCALE_IMAGE=4]="IRT_COLOUR_CONVERTED_GRAYSCALE_IMAGE",e[e.IRT_TRANSFORMED_GRAYSCALE_IMAGE=8]="IRT_TRANSFORMED_GRAYSCALE_IMAGE",e[e.IRT_PREDETECTED_REGION=16]="IRT_PREDETECTED_REGION",e[e.IRT_PREPROCESSED_IMAGE=32]="IRT_PREPROCESSED_IMAGE",e[e.IRT_BINARIZED_IMAGE=64]="IRT_BINARIZED_IMAGE",e[e.IRT_TEXT_ZONE=128]="IRT_TEXT_ZONE",e[e.IRT_CONTOUR=256]="IRT_CONTOUR",e[e.IRT_LINE_SEGMENT=512]="IRT_LINE_SEGMENT",e[e.IRT_FORM=1024]="IRT_FORM",e[e.IRT_SEGMENTATION_BLOCK=2048]="IRT_SEGMENTATION_BLOCK",e[e.IRT_TYPED_BARCODE_ZONE=4096]="IRT_TYPED_BARCODE_ZONE",e[e.IRT_PREDETECTED_QUADRILATERAL=8192]="IRT_PREDETECTED_QUADRILATERAL"}(W||(W={})),function(e){e[e.LM_SKIP=0]="LM_SKIP",e[e.LM_AUTO=1]="LM_AUTO",e[e.LM_CONNECTED_BLOCKS=2]="LM_CONNECTED_BLOCKS",e[e.LM_LINES=8]="LM_LINES",e[e.LM_STATISTICS=4]="LM_STATISTICS",e[e.LM_SCAN_DIRECTLY=16]="LM_SCAN_DIRECTLY",e[e.LM_STATISTICS_MARKS=32]="LM_STATISTICS_MARKS",e[e.LM_STATISTICS_POSTAL_CODE=64]="LM_STATISTICS_POSTAL_CODE",e[e.LM_CENTRE=128]="LM_CENTRE",e[e.LM_ONED_FAST_SCAN=256]="LM_ONED_FAST_SCAN",e[e.LM_REV=2147483648]="LM_REV"}(O||(O={})),function(e){e[e.PDFRM_RASTER=1]="PDFRM_RASTER",e[e.PDFRM_AUTO=2]="PDFRM_AUTO",e[e.PDFRM_VECTOR=4]="PDFRM_VECTOR",e[e.PDFRM_REV=2147483648]="PDFRM_REV"}(B||(B={})),function(e){e[e.QRECL_ERROR_CORRECTION_H=0]="QRECL_ERROR_CORRECTION_H",e[e.QRECL_ERROR_CORRECTION_L=1]="QRECL_ERROR_CORRECTION_L",e[e.QRECL_ERROR_CORRECTION_M=2]="QRECL_ERROR_CORRECTION_M",e[e.QRECL_ERROR_CORRECTION_Q=3]="QRECL_ERROR_CORRECTION_Q"}(N||(N={})),function(e){e[e.RPM_AUTO=1]="RPM_AUTO",e[e.RPM_GENERAL=2]="RPM_GENERAL",e[e.RPM_GENERAL_RGB_CONTRAST=4]="RPM_GENERAL_RGB_CONTRAST",e[e.RPM_GENERAL_GRAY_CONTRAST=8]="RPM_GENERAL_GRAY_CONTRAST",e[e.RPM_GENERAL_HSV_CONTRAST=16]="RPM_GENERAL_HSV_CONTRAST",e[e.RPM_SKIP=0]="RPM_SKIP",e[e.RPM_REV=2147483648]="RPM_REV"}(V||(V={})),function(e){e[e.RCT_PIXEL=1]="RCT_PIXEL",e[e.RCT_PERCENTAGE=2]="RCT_PERCENTAGE"}(U||(U={})),function(e){e[e.RT_STANDARD_TEXT=0]="RT_STANDARD_TEXT",e[e.RT_RAW_TEXT=1]="RT_RAW_TEXT",e[e.RT_CANDIDATE_TEXT=2]="RT_CANDIDATE_TEXT",e[e.RT_PARTIAL_TEXT=3]="RT_PARTIAL_TEXT"}(G||(G={})),function(e){e[e.SUM_AUTO=1]="SUM_AUTO",e[e.SUM_LINEAR_INTERPOLATION=2]="SUM_LINEAR_INTERPOLATION",e[e.SUM_NEAREST_NEIGHBOUR_INTERPOLATION=4]="SUM_NEAREST_NEIGHBOUR_INTERPOLATION",e[e.SUM_SKIP=0]="SUM_SKIP",e[e.SUM_REV=2147483648]="SUM_REV"}(j||(j={})),function(e){e[e.TP_REGION_PREDETECTED=1]="TP_REGION_PREDETECTED",e[e.TP_IMAGE_PREPROCESSED=2]="TP_IMAGE_PREPROCESSED",e[e.TP_IMAGE_BINARIZED=4]="TP_IMAGE_BINARIZED",e[e.TP_BARCODE_LOCALIZED=8]="TP_BARCODE_LOCALIZED",e[e.TP_BARCODE_TYPE_DETERMINED=16]="TP_BARCODE_TYPE_DETERMINED",e[e.TP_BARCODE_RECOGNIZED=32]="TP_BARCODE_RECOGNIZED"}(H||(H={})),function(e){e[e.TFM_AUTO=1]="TFM_AUTO",e[e.TFM_GENERAL_CONTOUR=2]="TFM_GENERAL_CONTOUR",e[e.TFM_SKIP=0]="TFM_SKIP",e[e.TFM_REV=2147483648]="TFM_REV"}(z||(z={})),function(e){e[e.TROM_CONFIDENCE=1]="TROM_CONFIDENCE",e[e.TROM_POSITION=2]="TROM_POSITION",e[e.TROM_FORMAT=4]="TROM_FORMAT",e[e.TROM_SKIP=0]="TROM_SKIP",e[e.TROM_REV=2147483648]="TROM_REV"}(K||(K={})),function(e){e[e.TDM_AUTO=1]="TDM_AUTO",e[e.TDM_GENERAL_WIDTH_CONCENTRATION=2]="TDM_GENERAL_WIDTH_CONCENTRATION",e[e.TDM_SKIP=0]="TDM_SKIP",e[e.TDM_REV=2147483648]="TDM_REV"}(J||(J={}));class Y{static get version(){return I.version}static get productKeys(){return I.productKeys}static set productKeys(e){I.productKeys=e}static get handshakeCode(){return I.handshakeCode}static set handshakeCode(e){I.handshakeCode=e}static get organizationID(){return I.organizationID}static set organizationID(e){I.organizationID=e}static get sessionPassword(){return I.sessionPassword}static set sessionPassword(e){I.sessionPassword=e}static get browserInfo(){return I.browserInfo}static detectEnvironment(){return I.detectEnvironment()}static get _workerName(){return I._workerName}static set _workerName(e){I._workerName=e}static get engineResourcePath(){return I.engineResourcePath}static set engineResourcePath(e){I.engineResourcePath=e}static get licenseServer(){return I.licenseServer}static set licenseServer(e){I.licenseServer=e}static get deviceFriendlyName(){return I.deviceFriendlyName}static set deviceFriendlyName(e){I.deviceFriendlyName=e}static get _onLog(){return I._onLog}static set _onLog(e){I._onLog=e}static get _bWasmDebug(){return I._bWasmDebug}static set _bWasmDebug(e){I._bWasmDebug=e}static get _bUseFullFeature(){return I._bUseFullFeature}static set _bUseFullFeature(e){I._bUseFullFeature=e}static get _dbrWorker(){return I._dbrWorker}static isLoaded(){return I.isLoaded()}static isWasmLoaded(){return I.isLoaded()}static loadWasm(){return I.loadWasm()}}Y.DBR=Y,Y.BarcodeReader=I,Y.BarcodeScanner=y,Y.CameraEnhancer=d,Y.EnumBarcodeColourMode=b,Y.EnumBarcodeComplementMode=D,Y.EnumBarcodeFormat=p,Y.EnumBarcodeFormat_2=T,Y.EnumBinarizationMode=S,Y.EnumClarityCalculationMethod=w,Y.EnumClarityFilterMode=C,Y.EnumColourClusteringMode=E,Y.EnumColourConversionMode=M,Y.EnumConflictMode=P,Y.EnumDeblurMode=A,Y.EnumDeformationResistingMode=x,Y.EnumDPMCodeReadingMode=R,Y.EnumErrorCode=f,Y.EnumGrayscaleTransformationMode=k,Y.EnumImagePixelFormat=g,Y.EnumImagePreprocessingMode=L,Y.EnumIMResultDataType=m,Y.EnumIntermediateResultSavingMode=F,Y.EnumIntermediateResultType=W,Y.EnumLocalizationMode=O,Y.EnumPDFReadingMode=B,Y.EnumQRCodeErrorCorrectionLevel=N,Y.EnumRegionPredetectionMode=V,Y.EnumResultCoordinateType=U,Y.EnumResultType=G,Y.EnumScaleUpMode=j,Y.EnumTerminatePhase=H,Y.EnumTextFilterMode=z,Y.EnumTextResultOrderMode=K,Y.EnumTextureDetectionMode=J;var X,Q,Z=window.Dynamsoft||{Lib:{}},q=window;window.Dynamsoft=Z,function(){Z.Lib||(Z.Lib={});var e,t,n=Z.Lib,r=navigator,i=!0,o=!1,a=!1,s=!1,u=!1,c=!1,l=!1,d=!1,h=!1,g=!1,f=!1,m=[];"userAgentData"in r?(f=!0,(e=r.userAgentData).platform&&""!=e.platform&&("brands"in e&&Array.isArray(e.brands)&&0<e.brands.length?m=e.brands:"uaList"in e&&Array.isArray(e.uaList)&&0<e.uaList.length&&(m=e.uaList),0<m.length&&(i=!1))):(e=r.platform.toLowerCase(),r=r.userAgent.toLowerCase(),o=/win32|win64|windows/.test(e),u=/ucweb|ucbrowser/g.test(r),c=/playbook/g.test(r),l=/blackberry|bb10/g.test(r),d=/huaweibrowser/g.test(r),h=/opera|opr/g.test(r),a=!((g=/firefox|fxios/g.test(r))||d)&&/edge\/|edga\/|edgios\/|edg\//g.test(r),f=!(l||c||u||h||a||d)&&/chrome|crios/g.test(r),!o||a||g||f||(e=r.indexOf("msie "),t=r.indexOf("trident"),r=r.indexOf("rv:"),s=-1!=e||-1!=t||-1!=r)),n.preNavInfo={bUseUserAgent:i,uaBrands:m,bIE:s,bEdge:a,bWin:o,bUC:u,bPlaybook:c,bBlackBerry:l,bHuaWeiBrowser:d,bOpera:h,bFirefox:g,bChrome:f}}(),Z.Lib.preNavInfo.bIE&&(function(t){if("object"==typeof exports&&void 0!==e)e.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n;"undefined"!=typeof window?n=window:"undefined"!=typeof global?n=global:void 0!==q&&(n=q),n.Promise=t()}}((function(){return function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof _dereq_&&_dereq_;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};t[a][0].call(l.exports,(function(e){return i(t[a][1][e]||e)}),l,l.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof _dereq_&&_dereq_,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){t.exports=function(e){function t(e){var t=new n(e),r=t.promise();return t.setHowMany(1),t.setUnwrap(),t.init(),r}var n=e._SomePromiseArray;e.any=function(e){return t(e)},e.prototype.any=function(){return t(this)}}},{}],2:[function(e,t,n){function r(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new u(16),this._normalQueue=new u(16),this._haveDrainedQueues=!1;var e=this;this.drainQueues=function(){e._drainQueues()},this._schedule=s}function i(e){for(;e.length()>0;)o(e)}function o(e){var t=e.shift();if("function"!=typeof t)t._settlePromises();else{var n=e.shift(),r=e.shift();t.call(n,r)}}var a;try{throw new Error}catch(c){a=c}var s=e("./schedule"),u=e("./queue");r.prototype.setScheduler=function(e){var t=this._schedule;return this._schedule=e,this._customScheduler=!0,t},r.prototype.hasCustomScheduler=function(){return this._customScheduler},r.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},r.prototype.fatalError=function(e,t){t?(process.stderr.write("Fatal "+(e instanceof Error?e.stack:e)+"\n"),process.exit(2)):this.throwLater(e)},r.prototype.throwLater=function(e,t){if(1===arguments.length&&(t=e,e=function(){throw t}),"undefined"!=typeof setTimeout)setTimeout((function(){e(t)}),0);else try{this._schedule((function(){e(t)}))}catch(n){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},r.prototype.invokeLater=function(e,t,n){this._lateQueue.push(e,t,n),this._queueTick()},r.prototype.invoke=function(e,t,n){this._normalQueue.push(e,t,n),this._queueTick()},r.prototype.settlePromises=function(e){this._normalQueue._pushOne(e),this._queueTick()},r.prototype._drainQueues=function(){i(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,i(this._lateQueue)},r.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},r.prototype._reset=function(){this._isTickUsed=!1},t.exports=r,t.exports.firstLineError=a},{"./queue":26,"./schedule":29}],3:[function(e,t,n){t.exports=function(e,t,n,r){var i=!1,o=function(e,t){this._reject(t)},a=function(e,t){t.promiseRejectionQueued=!0,t.bindingPromise._then(o,o,null,this,e)},s=function(e,t){0==(50397184&this._bitField)&&this._resolveCallback(t.target)},u=function(e,t){t.promiseRejectionQueued||this._reject(e)};e.prototype.bind=function(o){i||(i=!0,e.prototype._propagateFrom=r.propagateFromFunction(),e.prototype._boundValue=r.boundValueFunction());var c=n(o),l=new e(t);l._propagateFrom(this,1);var d=this._target();if(l._setBoundTo(c),c instanceof e){var h={promiseRejectionQueued:!1,promise:l,target:d,bindingPromise:c};d._then(t,a,void 0,l,h),c._then(s,u,void 0,l,h),l._setOnCancel(c)}else l._resolveCallback(d);return l},e.prototype._setBoundTo=function(e){void 0!==e?(this._bitField=2097152|this._bitField,this._boundTo=e):this._bitField=-2097153&this._bitField},e.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},e.bind=function(t,n){return e.resolve(n).bind(t)}}},{}],4:[function(e,t,n){var r;"undefined"!=typeof Promise&&(r=Promise);var i=e("./promise")();i.noConflict=function(){try{Promise===i&&(Promise=r)}catch(e){}return i},t.exports=i},{"./promise":22}],5:[function(e,t,n){var r=Object.create;if(r){var i=r(null),o=r(null);i[" size"]=o[" size"]=0}t.exports=function(t){function n(e){return function(e,n){var r;if(null!=e&&(r=e[n]),"function"!=typeof r){var i="Object "+o.classString(e)+" has no method '"+o.toString(n)+"'";throw new t.TypeError(i)}return r}(e,this.pop()).apply(e,this)}function r(e){return e[this]}function i(e){var t=+this;return 0>t&&(t=Math.max(0,t+e.length)),e[t]}var o=e("./util"),a=o.canEvaluate;t.prototype.call=function(e){var t=[].slice.call(arguments,1);return t.push(e),this._then(n,void 0,void 0,t,void 0)},t.prototype.get=function(e){var t;if("number"==typeof e)t=i;else if(a){var n=(void 0)(e);t=null!==n?n:r}else t=r;return this._then(t,void 0,void 0,e,void 0)}}},{"./util":36}],6:[function(e,t,n){t.exports=function(t,n,r,i){var o=e("./util"),a=o.tryCatch,s=o.errorObj,u=t._async;t.prototype.break=t.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var e=this,t=e;e._isCancellable();){if(!e._cancelBy(t)){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}var n=e._cancellationParent;if(null==n||!n._isCancellable()){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}e._isFollowing()&&e._followee().cancel(),e._setWillBeCancelled(),t=e,e=n}},t.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},t.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},t.prototype._cancelBy=function(e){return e===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},t.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},t.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),u.invoke(this._cancelPromises,this,void 0))},t.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},t.prototype._unsetOnCancel=function(){this._onCancelField=void 0},t.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},t.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},t.prototype._doInvokeOnCancel=function(e,t){if(o.isArray(e))for(var n=0;n<e.length;++n)this._doInvokeOnCancel(e[n],t);else if(void 0!==e)if("function"==typeof e){if(!t){var r=a(e).call(this._boundValue());r===s&&(this._attachExtraTrace(r.e),u.throwLater(r.e))}}else e._resultCancelled(this)},t.prototype._invokeOnCancel=function(){var e=this._onCancel();this._unsetOnCancel(),u.invoke(this._doInvokeOnCancel,this,e)},t.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},t.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(e,t,n){t.exports=function(t){var n=e("./util"),r=e("./es5").keys,i=n.tryCatch,o=n.errorObj;return function(e,a,s){return function(u){var c=s._boundValue();e:for(var l=0;l<e.length;++l){var d=e[l];if(d===Error||null!=d&&d.prototype instanceof Error){if(u instanceof d)return i(a).call(c,u)}else if("function"==typeof d){var h=i(d).call(c,u);if(h===o)return h;if(h)return i(a).call(c,u)}else if(n.isObject(u)){for(var g=r(d),f=0;f<g.length;++f){var m=g[f];if(d[m]!=u[m])continue e}return i(a).call(c,u)}}return t}}}},{"./es5":13,"./util":36}],8:[function(e,t,n){t.exports=function(e){function t(){this._trace=new t.CapturedTrace(n())}function n(){var e=i.length-1;return e>=0?i[e]:void 0}var r=!1,i=[];return e.prototype._promiseCreated=function(){},e.prototype._pushContext=function(){},e.prototype._popContext=function(){return null},e._peekContext=e.prototype._peekContext=function(){},t.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,i.push(this._trace))},t.prototype._popContext=function(){if(void 0!==this._trace){var e=i.pop(),t=e._promiseCreated;return e._promiseCreated=null,t}return null},t.CapturedTrace=null,t.create=function(){return r?new t:void 0},t.deactivateLongStackTraces=function(){},t.activateLongStackTraces=function(){var i=e.prototype._pushContext,o=e.prototype._popContext,a=e._peekContext,s=e.prototype._peekContext,u=e.prototype._promiseCreated;t.deactivateLongStackTraces=function(){e.prototype._pushContext=i,e.prototype._popContext=o,e._peekContext=a,e.prototype._peekContext=s,e.prototype._promiseCreated=u,r=!1},r=!0,e.prototype._pushContext=t.prototype._pushContext,e.prototype._popContext=t.prototype._popContext,e._peekContext=e.prototype._peekContext=n,e.prototype._promiseCreated=function(){var e=this._peekContext();e&&null==e._promiseCreated&&(e._promiseCreated=this)}},t}},{}],9:[function(e,t,n){t.exports=function(t,n,r,i){function o(e,t){return{promise:t}}function a(){return!1}function s(e,t,n){var r=this;try{e(t,n,(function(e){if("function"!=typeof e)throw new TypeError("onCancel must be a function, got: "+R.toString(e));r._attachCancellationCallback(e)}))}catch(i){return i}}function u(e){if(!this._isCancellable())return this;var t=this._onCancel();void 0!==t?R.isArray(t)?t.push(e):this._setOnCancel([t,e]):this._setOnCancel(e)}function c(){return this._onCancelField}function l(e){this._onCancelField=e}function d(){this._cancellationParent=void 0,this._onCancelField=void 0}function h(e,t){if(0!=(1&t)){this._cancellationParent=e;var n=e._branchesRemainingToCancel;void 0===n&&(n=0),e._branchesRemainingToCancel=n+1}0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}function g(){var e=this._boundTo;return void 0!==e&&e instanceof t?e.isFulfilled()?e.value():void 0:e}function f(){this._trace=new w(this._peekContext())}function m(e,t){if(L(e)){var n=this._trace;if(void 0!==n&&t&&(n=n._parent),void 0!==n)n.attachExtraTrace(e);else if(!e.__stackCleaned__){var r=I(e);R.notEnumerableProp(e,"stack",r.message+"\n"+r.stack.join("\n")),R.notEnumerableProp(e,"__stackCleaned__",!0)}}}function p(){this._trace=void 0}function _(e,n,r){if(te.warnings){var i,o=new x(e);if(n)r._attachExtraTrace(o);else if(te.longStackTraces&&(i=t._peekContext()))i.attachExtraTrace(o);else{var a=I(o);o.stack=a.message+"\n"+a.stack.join("\n")}Q("warning",o)||y(o,"",!0)}}function v(e){for(var t=[],n=0;n<e.length;++n){var r=e[n],i="    (No stack trace)"===r||B.test(r),o=i&&q(r);i&&!o&&(V&&" "!==r.charAt(0)&&(r="    "+r),t.push(r))}return t}function I(e){var t=e.stack,n=e.toString();return t="string"==typeof t&&t.length>0?function(e){for(var t=e.stack.replace(/\s+$/g,"").split("\n"),n=0;n<t.length;++n){var r=t[n];if("    (No stack trace)"===r||B.test(r))break}return n>0&&"SyntaxError"!=e.name&&(t=t.slice(n)),t}(e):["    (No stack trace)"],{message:n,stack:"SyntaxError"==e.name?t:v(t)}}function y(e,t,n){var r;"undefined"!=typeof console&&(r=R.isObject(e)?t+N(e.stack,e):t+String(e),"function"==typeof M?M(r,n):("function"==typeof console.log||"object"==typeof console.log)&&console.log(r))}function b(e,t,n,r){var i=!1;try{"function"==typeof t&&(i=!0,"rejectionHandled"===e?t(r):t(n,r))}catch(o){A.throwLater(o)}"unhandledRejection"===e?Q(e,n,r)||i||y(n,"Unhandled rejection "):Q(e,r)}function D(e){var t;if("function"==typeof e)t="[function "+(e.name||"anonymous")+"]";else{if(t=e&&"function"==typeof e.toString?e.toString():R.toString(e),/\[object [a-zA-Z0-9$_]+\]/.test(t))try{t=JSON.stringify(e)}catch(i){}0===t.length&&(t="(empty array)")}return"(<"+function(e){return e.length<41?e:e.substr(0,38)+"..."}(t)+">, no stack trace)"}function T(){return"function"==typeof ee}function S(e){var t=e.match($);return t?{fileName:t[1],line:parseInt(t[2],10)}:void 0}function w(e){this._parent=e,this._promisesCreated=0;var t=this._length=1+(void 0===e?0:e._length);ee(this,w),t>32&&this.uncycle()}var C,E,M,P,A=t._async,x=e("./errors").Warning,R=e("./util"),k=e("./es5"),L=R.canAttachTrace,F=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,W=/\((?:timers\.js):\d+:\d+\)/,O=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,B=null,N=null,V=!1,U=!(0==R.env("BLUEBIRD_DEBUG")||!R.env("BLUEBIRD_DEBUG")&&"development"!==R.env("NODE_ENV")),G=!(0==R.env("BLUEBIRD_WARNINGS")||!U&&!R.env("BLUEBIRD_WARNINGS")),j=!(0==R.env("BLUEBIRD_LONG_STACK_TRACES")||!U&&!R.env("BLUEBIRD_LONG_STACK_TRACES")),H=0!=R.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(G||!!R.env("BLUEBIRD_W_FORGOTTEN_RETURN"));!function(){function e(){for(var e=0;e<r.length;++e)r[e]._notifyUnhandledRejection();n()}function n(){r.length=0}var r=[];P=function(t){r.push(t),setTimeout(e,1)},k.defineProperty(t,"_unhandledRejectionCheck",{value:e}),k.defineProperty(t,"_unhandledRejectionClear",{value:n})}(),t.prototype.suppressUnhandledRejections=function(){var e=this._target();e._bitField=-1048577&e._bitField|524288},t.prototype._ensurePossibleRejectionHandled=function(){0==(524288&this._bitField)&&(this._setRejectionIsUnhandled(),P(this))},t.prototype._notifyUnhandledRejectionIsHandled=function(){b("rejectionHandled",C,void 0,this)},t.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},t.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},t.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue();this._setUnhandledRejectionIsNotified(),b("unhandledRejection",E,e,this)}},t.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},t.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},t.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},t.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},t.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},t.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},t.prototype._warn=function(e,t,n){return _(e,t,n||this)},t.onPossiblyUnhandledRejection=function(e){var n=t._getContext();E=R.contextBind(n,e)},t.onUnhandledRejectionHandled=function(e){var n=t._getContext();C=R.contextBind(n,e)};var z=function(){};t.longStackTraces=function(){if(A.haveItemsQueued()&&!te.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!te.longStackTraces&&T()){var e=t.prototype._captureStackTrace,r=t.prototype._attachExtraTrace,i=t.prototype._dereferenceTrace;te.longStackTraces=!0,z=function(){if(A.haveItemsQueued()&&!te.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");t.prototype._captureStackTrace=e,t.prototype._attachExtraTrace=r,t.prototype._dereferenceTrace=i,n.deactivateLongStackTraces(),te.longStackTraces=!1},t.prototype._captureStackTrace=f,t.prototype._attachExtraTrace=m,t.prototype._dereferenceTrace=p,n.activateLongStackTraces()}},t.hasLongStackTraces=function(){return te.longStackTraces&&T()};var K={unhandledrejection:{before:function(){var e=R.global.onunhandledrejection;return R.global.onunhandledrejection=null,e},after:function(e){R.global.onunhandledrejection=e}},rejectionhandled:{before:function(){var e=R.global.onrejectionhandled;return R.global.onrejectionhandled=null,e},after:function(e){R.global.onrejectionhandled=e}}},J=function(){var e=function(e,t){if(!e)return!R.global.dispatchEvent(t);var n;try{return n=e.before(),!R.global.dispatchEvent(t)}finally{e.after(n)}};try{if("function"==typeof CustomEvent){var t=new CustomEvent("CustomEvent");return R.global.dispatchEvent(t),function(t,n){t=t.toLowerCase();var r=new CustomEvent(t,{detail:n,cancelable:!0});return k.defineProperty(r,"promise",{value:n.promise}),k.defineProperty(r,"reason",{value:n.reason}),e(K[t],r)}}return"function"==typeof Event?(t=new Event("CustomEvent"),R.global.dispatchEvent(t),function(t,n){t=t.toLowerCase();var r=new Event(t,{cancelable:!0});return r.detail=n,k.defineProperty(r,"promise",{value:n.promise}),k.defineProperty(r,"reason",{value:n.reason}),e(K[t],r)}):((t=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),R.global.dispatchEvent(t),function(t,n){t=t.toLowerCase();var r=document.createEvent("CustomEvent");return r.initCustomEvent(t,!1,!0,n),e(K[t],r)})}catch(n){}return function(){return!1}}(),Y=R.isNode?function(){return process.emit.apply(process,arguments)}:R.global?function(e){var t="on"+e.toLowerCase(),n=R.global[t];return!!n&&(n.apply(R.global,[].slice.call(arguments,1)),!0)}:function(){return!1},X={promiseCreated:o,promiseFulfilled:o,promiseRejected:o,promiseResolved:o,promiseCancelled:o,promiseChained:function(e,t,n){return{promise:t,child:n}},warning:function(e,t){return{warning:t}},unhandledRejection:function(e,t,n){return{reason:t,promise:n}},rejectionHandled:o},Q=function(e){var t=!1;try{t=Y.apply(null,arguments)}catch(n){A.throwLater(n),t=!0}var r=!1;try{r=J(e,X[e].apply(null,arguments))}catch(n){A.throwLater(n),r=!0}return r||t};t.config=function(e){if("longStackTraces"in(e=Object(e))&&(e.longStackTraces?t.longStackTraces():!e.longStackTraces&&t.hasLongStackTraces()&&z()),"warnings"in e){var n=e.warnings;te.warnings=!!n,H=te.warnings,R.isObject(n)&&"wForgottenReturn"in n&&(H=!!n.wForgottenReturn)}if("cancellation"in e&&e.cancellation&&!te.cancellation){if(A.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");t.prototype._clearCancellationData=d,t.prototype._propagateFrom=h,t.prototype._onCancel=c,t.prototype._setOnCancel=l,t.prototype._attachCancellationCallback=u,t.prototype._execute=s,Z=h,te.cancellation=!0}if("monitoring"in e&&(e.monitoring&&!te.monitoring?(te.monitoring=!0,t.prototype._fireEvent=Q):!e.monitoring&&te.monitoring&&(te.monitoring=!1,t.prototype._fireEvent=a)),"asyncHooks"in e&&R.nodeSupportsAsyncResource){var o=!!e.asyncHooks;te.asyncHooks!==o&&(te.asyncHooks=o,o?r():i())}return t},t.prototype._fireEvent=a,t.prototype._execute=function(e,t,n){try{e(t,n)}catch(r){return r}},t.prototype._onCancel=function(){},t.prototype._setOnCancel=function(e){},t.prototype._attachCancellationCallback=function(e){},t.prototype._captureStackTrace=function(){},t.prototype._attachExtraTrace=function(){},t.prototype._dereferenceTrace=function(){},t.prototype._clearCancellationData=function(){},t.prototype._propagateFrom=function(e,t){};var Z=function(e,t){0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)},q=function(){return!1},$=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;R.inherits(w,Error),n.CapturedTrace=w,w.prototype.uncycle=function(){var e=this._length;if(!(2>e)){for(var t=[],n={},r=0,i=this;void 0!==i;++r)t.push(i),i=i._parent;for(r=(e=this._length=r)-1;r>=0;--r){var o=t[r].stack;void 0===n[o]&&(n[o]=r)}for(r=0;e>r;++r){var a=n[t[r].stack];if(void 0!==a&&a!==r){a>0&&(t[a-1]._parent=void 0,t[a-1]._length=1),t[r]._parent=void 0,t[r]._length=1;var s=r>0?t[r-1]:this;e-1>a?(s._parent=t[a+1],s._parent.uncycle(),s._length=s._parent._length+1):(s._parent=void 0,s._length=1);for(var u=s._length+1,c=r-2;c>=0;--c)t[c]._length=u,u++;return}}}},w.prototype.attachExtraTrace=function(e){if(!e.__stackCleaned__){this.uncycle();for(var t=I(e),n=t.message,r=[t.stack],i=this;void 0!==i;)r.push(v(i.stack.split("\n"))),i=i._parent;(function(e){for(var t=e[0],n=1;n<e.length;++n){for(var r=e[n],i=t.length-1,o=t[i],a=-1,s=r.length-1;s>=0;--s)if(r[s]===o){a=s;break}for(s=a;s>=0&&t[i]===r[s];--s)t.pop(),i--;t=r}})(r),function(e){for(var t=0;t<e.length;++t)(0===e[t].length||t+1<e.length&&e[t][0]===e[t+1][0])&&(e.splice(t,1),t--)}(r),R.notEnumerableProp(e,"stack",function(e,t){for(var n=0;n<t.length-1;++n)t[n].push("From previous event:"),t[n]=t[n].join("\n");return n<t.length&&(t[n]=t[n].join("\n")),e+"\n"+t.join("\n")}(n,r)),R.notEnumerableProp(e,"__stackCleaned__",!0)}};var ee=function(){var e=/^\s*at\s*/,t=function(e,t){return"string"==typeof e?e:void 0!==t.name&&void 0!==t.message?t.toString():D(t)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,B=e,N=t;var n=Error.captureStackTrace;return q=function(e){return F.test(e)},function(e,t){Error.stackTraceLimit+=6,n(e,t),Error.stackTraceLimit-=6}}var r,i=new Error;if("string"==typeof i.stack&&i.stack.split("\n")[0].indexOf("stackDetection@")>=0)return B=/@/,N=t,V=!0,function(e){e.stack=(new Error).stack};try{throw new Error}catch(o){r="stack"in o}return"stack"in i||!r||"number"!=typeof Error.stackTraceLimit?(N=function(e,t){return"string"==typeof e?e:"object"!=typeof t&&"function"!=typeof t||void 0===t.name||void 0===t.message?D(t):t.toString()},null):(B=e,N=t,function(e){Error.stackTraceLimit+=6;try{throw new Error}catch(t){e.stack=t.stack}Error.stackTraceLimit-=6})}();"undefined"!=typeof console&&void 0!==console.warn&&(M=function(e){console.warn(e)},R.isNode&&process.stderr.isTTY?M=function(e,t){console.warn((t?"\x1b[33m":"\x1b[31m")+e+"\x1b[0m\n")}:R.isNode||"string"!=typeof(new Error).stack||(M=function(e,t){console.warn("%c"+e,t?"color: darkorange":"color: red")}));var te={warnings:G,longStackTraces:!1,cancellation:!1,monitoring:!1,asyncHooks:!1};return j&&t.longStackTraces(),{asyncHooks:function(){return te.asyncHooks},longStackTraces:function(){return te.longStackTraces},warnings:function(){return te.warnings},cancellation:function(){return te.cancellation},monitoring:function(){return te.monitoring},propagateFromFunction:function(){return Z},boundValueFunction:function(){return g},checkForgottenReturns:function(e,t,n,r,i){if(void 0===e&&null!==t&&H){if(void 0!==i&&i._returnedNonUndefined())return;if(0==(65535&r._bitField))return;n&&(n+=" ");var o="",a="";if(t._trace){for(var s=t._trace.stack.split("\n"),u=v(s),c=u.length-1;c>=0;--c){var l=u[c];if(!W.test(l)){var d=l.match(O);d&&(o="at "+d[1]+":"+d[2]+":"+d[3]+" ");break}}if(u.length>0){var h=u[0];for(c=0;c<s.length;++c)if(s[c]===h){c>0&&(a="\n"+s[c-1]);break}}}r._warn("a promise was created in a "+n+"handler "+o+"but was not returned from it, see http://goo.gl/rRqMUw"+a,!0,t)}},setBounds:function(e,t){if(T()){for(var n,r,i=(e.stack||"").split("\n"),o=(t.stack||"").split("\n"),a=-1,s=-1,u=0;u<i.length;++u)if(c=S(i[u])){n=c.fileName,a=c.line;break}for(u=0;u<o.length;++u){var c;if(c=S(o[u])){r=c.fileName,s=c.line;break}}0>a||0>s||!n||!r||n!==r||a>=s||(q=function(e){if(F.test(e))return!0;var t=S(e);return!!(t&&t.fileName===n&&a<=t.line&&t.line<=s)})}},warn:_,deprecated:function(e,t){var n=e+" is deprecated and will be removed in a future version.";return t&&(n+=" Use "+t+" instead."),_(n)},CapturedTrace:w,fireDomEvent:J,fireGlobalEvent:Y}}},{"./errors":12,"./es5":13,"./util":36}],10:[function(e,t,n){t.exports=function(e){function t(){return this.value}function n(){throw this.reason}e.prototype.return=e.prototype.thenReturn=function(n){return n instanceof e&&n.suppressUnhandledRejections(),this._then(t,void 0,void 0,{value:n},void 0)},e.prototype.throw=e.prototype.thenThrow=function(e){return this._then(n,void 0,void 0,{reason:e},void 0)},e.prototype.catchThrow=function(e){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:e},void 0);var t=arguments[1],r=function(){throw t};return this.caught(e,r)},e.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof e&&n.suppressUnhandledRejections(),this._then(void 0,t,void 0,{value:n},void 0);var r=arguments[1];r instanceof e&&r.suppressUnhandledRejections();var i=function(){return r};return this.caught(n,i)}}},{}],11:[function(e,t,n){t.exports=function(e,t){function n(){return i(this)}var r=e.reduce,i=e.all;e.prototype.each=function(e){return r(this,e,t,0)._then(n,void 0,void 0,this,void 0)},e.prototype.mapSeries=function(e){return r(this,e,t,t)},e.each=function(e,i){return r(e,i,t,0)._then(n,void 0,void 0,e,void 0)},e.mapSeries=function(e,n){return r(e,n,t,t)}}},{}],12:[function(e,t,n){function r(e,t){function n(r){return this instanceof n?(d(this,"message","string"==typeof r?r:t),d(this,"name",e),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new n(r)}return l(n,Error),n}function i(e){return this instanceof i?(d(this,"name","OperationalError"),d(this,"message",e),this.cause=e,this.isOperational=!0,void(e instanceof Error?(d(this,"message",e.message),d(this,"stack",e.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new i(e)}var o,a,s=e("./es5"),u=s.freeze,c=e("./util"),l=c.inherits,d=c.notEnumerableProp,h=r("Warning","warning"),g=r("CancellationError","cancellation error"),f=r("TimeoutError","timeout error"),m=r("AggregateError","aggregate error");try{o=TypeError,a=RangeError}catch(G){o=r("TypeError","type error"),a=r("RangeError","range error")}for(var p="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),_=0;_<p.length;++_)"function"==typeof Array.prototype[p[_]]&&(m.prototype[p[_]]=Array.prototype[p[_]]);s.defineProperty(m.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),m.prototype.isOperational=!0;var v=0;m.prototype.toString=function(){var e=Array(4*v+1).join(" "),t="\n"+e+"AggregateError of:\n";v++,e=Array(4*v+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),o=0;o<i.length;++o)i[o]=e+i[o];t+=(r=i.join("\n"))+"\n"}return v--,t},l(i,Error);var I=Error.__BluebirdErrorTypes__;I||(I=u({CancellationError:g,TimeoutError:f,OperationalError:i,RejectionError:i,AggregateError:m}),s.defineProperty(Error,"__BluebirdErrorTypes__",{value:I,writable:!1,enumerable:!1,configurable:!1})),t.exports={Error:Error,TypeError:o,RangeError:a,CancellationError:I.CancellationError,OperationalError:I.OperationalError,TimeoutError:I.TimeoutError,AggregateError:I.AggregateError,Warning:h}},{"./es5":13,"./util":36}],13:[function(e,t,n){var r=function(){return void 0===this}();if(r)t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return!(n&&!n.writable&&!n.set)}};else{var i={}.hasOwnProperty,o={}.toString,a={}.constructor.prototype,s=function(e){var t=[];for(var n in e)i.call(e,n)&&t.push(n);return t};t.exports={isArray:function(e){try{return"[object Array]"===o.call(e)}catch(t){return!1}},keys:s,names:s,defineProperty:function(e,t,n){return e[t]=n.value,e},getDescriptor:function(e,t){return{value:e[t]}},freeze:function(e){return e},getPrototypeOf:function(e){try{return Object(e).constructor.prototype}catch(t){return a}},isES5:r,propertyIsWritable:function(){return!0}}}},{}],14:[function(e,t,n){t.exports=function(e,t){var n=e.map;e.prototype.filter=function(e,r){return n(this,e,r,t)},e.filter=function(e,r,i){return n(e,r,i,t)}}},{}],15:[function(e,t,n){t.exports=function(t,n,r){function i(e,t,n){this.promise=e,this.type=t,this.handler=n,this.called=!1,this.cancelPromise=null}function o(e){this.finallyHandler=e}function a(e,t){return null!=e.cancelPromise&&(arguments.length>1?e.cancelPromise._reject(t):e.cancelPromise._cancel(),e.cancelPromise=null,!0)}function s(){return c.call(this,this.promise._target()._settledValue())}function u(e){return a(this,e)?void 0:(h.e=e,h)}function c(e){var i=this.promise,c=this.handler;if(!this.called){this.called=!0;var l=this.isFinallyHandler()?c.call(i._boundValue()):c.call(i._boundValue(),e);if(l===r)return l;if(void 0!==l){i._setReturnedNonUndefined();var g=n(l,i);if(g instanceof t){if(null!=this.cancelPromise){if(g._isCancelled()){var f=new d("late cancellation observer");return i._attachExtraTrace(f),h.e=f,h}g.isPending()&&g._attachCancellationCallback(new o(this))}return g._then(s,u,void 0,this,void 0)}}}return i.isRejected()?(a(this),h.e=e,h):(a(this),e)}var l=e("./util"),d=t.CancellationError,h=l.errorObj,g=e("./catch_filter")(r);return i.prototype.isFinallyHandler=function(){return 0===this.type},o.prototype._resultCancelled=function(){a(this.finallyHandler)},t.prototype._passThrough=function(e,t,n,r){return"function"!=typeof e?this.then():this._then(n,r,void 0,new i(this,t,e),void 0)},t.prototype.lastly=t.prototype.finally=function(e){return this._passThrough(e,0,c,c)},t.prototype.tap=function(e){return this._passThrough(e,1,c)},t.prototype.tapCatch=function(e){var n=arguments.length;if(1===n)return this._passThrough(e,1,void 0,c);var r,i=new Array(n-1),o=0;for(r=0;n-1>r;++r){var a=arguments[r];if(!l.isObject(a))return t.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+l.classString(a)));i[o++]=a}i.length=o;var s=arguments[r];return this._passThrough(g(i,s,this),1,void 0,c)},i}},{"./catch_filter":7,"./util":36}],16:[function(e,t,n){t.exports=function(t,n,r,i,o,a){function s(e,n,i,o){if(a.cancellation()){var s=new t(r),u=this._finallyPromise=new t(r);this._promise=s.lastly((function(){return u})),s._captureStackTrace(),s._setOnCancel(this)}else(this._promise=new t(r))._captureStackTrace();this._stack=o,this._generatorFunction=e,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(h):h,this._yieldedPromise=null,this._cancellationPhase=!1}var u=e("./errors").TypeError,c=e("./util"),l=c.errorObj,d=c.tryCatch,h=[];c.inherits(s,o),s.prototype._isResolved=function(){return null===this._promise},s.prototype._cleanup=function(){this._promise=this._generator=null,a.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},s.prototype._promiseCancelled=function(){if(!this._isResolved()){var e;if(void 0!==this._generator.return)this._promise._pushContext(),e=d(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var n=new t.CancellationError("generator .return() sentinel");t.coroutine.returnSentinel=n,this._promise._attachExtraTrace(n),this._promise._pushContext(),e=d(this._generator.throw).call(this._generator,n),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(e)}},s.prototype._promiseFulfilled=function(e){this._yieldedPromise=null,this._promise._pushContext();var t=d(this._generator.next).call(this._generator,e);this._promise._popContext(),this._continue(t)},s.prototype._promiseRejected=function(e){this._yieldedPromise=null,this._promise._attachExtraTrace(e),this._promise._pushContext();var t=d(this._generator.throw).call(this._generator,e);this._promise._popContext(),this._continue(t)},s.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof t){var e=this._yieldedPromise;this._yieldedPromise=null,e.cancel()}},s.prototype.promise=function(){return this._promise},s.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},s.prototype._continue=function(e){var n=this._promise;if(e===l)return this._cleanup(),this._cancellationPhase?n.cancel():n._rejectCallback(e.e,!1);var r=e.value;if(!0===e.done)return this._cleanup(),this._cancellationPhase?n.cancel():n._resolveCallback(r);var o=i(r,this._promise);if(o instanceof t||null!==(o=function(e,n,r){for(var o=0;o<n.length;++o){r._pushContext();var a=d(n[o])(e);if(r._popContext(),a===l){r._pushContext();var s=t.reject(l.e);return r._popContext(),s}var u=i(a,r);if(u instanceof t)return u}return null}(o,this._yieldHandlers,this._promise))){var a=(o=o._target())._bitField;0==(50397184&a)?(this._yieldedPromise=o,o._proxy(this,null)):0!=(33554432&a)?t._async.invoke(this._promiseFulfilled,this,o._value()):0!=(16777216&a)?t._async.invoke(this._promiseRejected,this,o._reason()):this._promiseCancelled()}else this._promiseRejected(new u("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(r))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},t.coroutine=function(e,t){if("function"!=typeof e)throw new u("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(t).yieldHandler,r=s,i=(new Error).stack;return function(){var t=e.apply(this,arguments),o=new r(void 0,void 0,n,i),a=o.promise();return o._generator=t,o._promiseFulfilled(void 0),a}},t.coroutine.addYieldHandler=function(e){if("function"!=typeof e)throw new u("expecting a function but got "+c.classString(e));h.push(e)},t.spawn=function(e){if(a.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof e)return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=new s(e,this),i=r.promise();return r._run(t.spawn),i}}},{"./errors":12,"./util":36}],17:[function(e,t,n){t.exports=function(t,n,r,i,o){e("./util"),t.join=function(){var e,t=arguments.length-1;t>0&&"function"==typeof arguments[t]&&(e=arguments[t]);var r=[].slice.call(arguments);e&&r.pop();var i=new n(r).promise();return void 0!==e?i.spread(e):i}}},{"./util":36}],18:[function(e,t,n){t.exports=function(t,n,r,i,o,a){function s(e,n,r,i){this.constructor$(e),this._promise._captureStackTrace();var a=t._getContext();if(this._callback=c.contextBind(a,n),this._preservedValues=i===o?new Array(this.length()):null,this._limit=r,this._inFlight=0,this._queue=[],h.invoke(this._asyncInit,this,void 0),c.isArray(e))for(var s=0;s<e.length;++s){var u=e[s];u instanceof t&&u.suppressUnhandledRejections()}}function u(e,n,i,o){if("function"!=typeof n)return r("expecting a function but got "+c.classString(n));var a=0;if(void 0!==i){if("object"!=typeof i||null===i)return t.reject(new TypeError("options argument must be an object but it is "+c.classString(i)));if("number"!=typeof i.concurrency)return t.reject(new TypeError("'concurrency' must be a number but it is "+c.classString(i.concurrency)));a=i.concurrency}return new s(e,n,a="number"==typeof a&&isFinite(a)&&a>=1?a:0,o).promise()}var c=e("./util"),l=c.tryCatch,d=c.errorObj,h=t._async;c.inherits(s,n),s.prototype._asyncInit=function(){this._init$(void 0,-2)},s.prototype._init=function(){},s.prototype._promiseFulfilled=function(e,n){var r=this._values,o=this.length(),s=this._preservedValues,u=this._limit;if(0>n){if(r[n=-1*n-1]=e,u>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(u>=1&&this._inFlight>=u)return r[n]=e,this._queue.push(n),!1;null!==s&&(s[n]=e);var c=this._promise,h=this._callback,g=c._boundValue();c._pushContext();var f=l(h).call(g,e,n,o),m=c._popContext();if(a.checkForgottenReturns(f,m,null!==s?"Promise.filter":"Promise.map",c),f===d)return this._reject(f.e),!0;var p=i(f,this._promise);if(p instanceof t){var _=(p=p._target())._bitField;if(0==(50397184&_))return u>=1&&this._inFlight++,r[n]=p,p._proxy(this,-1*(n+1)),!1;if(0==(33554432&_))return 0!=(16777216&_)?(this._reject(p._reason()),!0):(this._cancel(),!0);f=p._value()}r[n]=f}return++this._totalResolved>=o&&(null!==s?this._filter(r,s):this._resolve(r),!0)},s.prototype._drainQueue=function(){for(var e=this._queue,t=this._limit,n=this._values;e.length>0&&this._inFlight<t;){if(this._isResolved())return;var r=e.pop();this._promiseFulfilled(n[r],r)}},s.prototype._filter=function(e,t){for(var n=t.length,r=new Array(n),i=0,o=0;n>o;++o)e[o]&&(r[i++]=t[o]);r.length=i,this._resolve(r)},s.prototype.preservedValues=function(){return this._preservedValues},t.prototype.map=function(e,t){return u(this,e,t,null)},t.map=function(e,t,n,r){return u(e,t,n,r)}}},{"./util":36}],19:[function(e,t,n){t.exports=function(t,n,r,i,o){var a=e("./util"),s=a.tryCatch;t.method=function(e){if("function"!=typeof e)throw new t.TypeError("expecting a function but got "+a.classString(e));return function(){var r=new t(n);r._captureStackTrace(),r._pushContext();var i=s(e).apply(this,arguments),a=r._popContext();return o.checkForgottenReturns(i,a,"Promise.method",r),r._resolveFromSyncValue(i),r}},t.attempt=t.try=function(e){if("function"!=typeof e)return i("expecting a function but got "+a.classString(e));var r,u=new t(n);if(u._captureStackTrace(),u._pushContext(),arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var c=arguments[1],l=arguments[2];r=a.isArray(c)?s(e).apply(l,c):s(e).call(l,c)}else r=s(e)();var d=u._popContext();return o.checkForgottenReturns(r,d,"Promise.try",u),u._resolveFromSyncValue(r),u},t.prototype._resolveFromSyncValue=function(e){e===a.errorObj?this._rejectCallback(e.e,!1):this._resolveCallback(e,!0)}}},{"./util":36}],20:[function(e,t,n){function r(e){var t;if(function(e){return e instanceof Error&&s.getPrototypeOf(e)===Error.prototype}(e)){(t=new a(e)).name=e.name,t.message=e.message,t.stack=e.stack;for(var n=s.keys(e),r=0;r<n.length;++r){var o=n[r];u.test(o)||(t[o]=e[o])}return t}return i.markAsOriginatingFromRejection(e),e}var i=e("./util"),o=i.maybeWrapAsError,a=e("./errors").OperationalError,s=e("./es5"),u=/^(?:name|message|stack|cause)$/;t.exports=function(e,t){return function(n,i){if(null!==e){if(n){var a=r(o(n));e._attachExtraTrace(a),e._reject(a)}else if(t){var s=[].slice.call(arguments,1);e._fulfill(s)}else e._fulfill(i);e=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(e,t,n){t.exports=function(t){function n(e,t){if(!o.isArray(e))return r.call(this,e,t);var n=s(t).apply(this._boundValue(),[null].concat(e));n===u&&a.throwLater(n.e)}function r(e,t){var n=this._boundValue(),r=void 0===e?s(t).call(n,null):s(t).call(n,null,e);r===u&&a.throwLater(r.e)}function i(e,t){if(!e){var n=new Error(e+"");n.cause=e,e=n}var r=s(t).call(this._boundValue(),e);r===u&&a.throwLater(r.e)}var o=e("./util"),a=t._async,s=o.tryCatch,u=o.errorObj;t.prototype.asCallback=t.prototype.nodeify=function(e,t){if("function"==typeof e){var o=r;void 0!==t&&Object(t).spread&&(o=n),this._then(o,i,void 0,this,e)}return this}}},{"./util":36}],22:[function(e,t,n){t.exports=function(){function n(){}function r(e){e!==T&&function(e,t){if(null==e||e.constructor!==r)throw new b("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof t)throw new b("expecting a function but got "+d.classString(t))}(this,e),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(e),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function i(e){this.promise._resolveCallback(e)}function o(e){this.promise._rejectCallback(e,!1)}function a(e){var t=new r(T);t._fulfillmentHandler0=e,t._rejectionHandler0=e,t._promise0=e,t._receiver0=e}var s=function(){return new b("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},u=function(){return new r.PromiseInspection(this._target())},c=function(e){return r.reject(new b(e))},l={},d=e("./util");d.setReflectHandler(u);var h=function(){var e=process.domain;return void 0===e?null:e},g=function(){return{domain:h(),async:null}},f=d.isNode&&d.nodeSupportsAsyncResource?e("async_hooks").AsyncResource:null,m=function(){return{domain:h(),async:new f("Bluebird::Promise")}},p=d.isNode?g:function(){return null};d.notEnumerableProp(r,"_getContext",p);var _=e("./es5"),v=e("./async"),I=new v;_.defineProperty(r,"_async",{value:I});var y=e("./errors"),b=r.TypeError=y.TypeError;r.RangeError=y.RangeError;var D=r.CancellationError=y.CancellationError;r.TimeoutError=y.TimeoutError,r.OperationalError=y.OperationalError,r.RejectionError=y.OperationalError,r.AggregateError=y.AggregateError;var T=function(){},S={},w={},C=e("./thenables")(r,T),E=e("./promise_array")(r,T,C,c,n),M=e("./context")(r),P=M.create,A=e("./debuggability")(r,M,(function(){p=m,d.notEnumerableProp(r,"_getContext",m)}),(function(){p=g,d.notEnumerableProp(r,"_getContext",g)})),x=e("./finally")(r,C,w),R=e("./catch_filter")(w),k=e("./nodeback"),L=d.errorObj,F=d.tryCatch;return r.prototype.toString=function(){return"[object Promise]"},r.prototype.caught=r.prototype.catch=function(e){var t=arguments.length;if(t>1){var n,r=new Array(t-1),i=0;for(n=0;t-1>n;++n){var o=arguments[n];if(!d.isObject(o))return c("Catch statement predicate: expecting an object but got "+d.classString(o));r[i++]=o}if(r.length=i,"function"!=typeof(e=arguments[n]))throw new b("The last argument to .catch() must be a function, got "+d.toString(e));return this.then(void 0,R(r,e,this))}return this.then(void 0,e)},r.prototype.reflect=function(){return this._then(u,u,void 0,this,void 0)},r.prototype.then=function(e,t){if(A.warnings()&&arguments.length>0&&"function"!=typeof e&&"function"!=typeof t){var n=".then() only accepts functions but was passed: "+d.classString(e);arguments.length>1&&(n+=", "+d.classString(t)),this._warn(n)}return this._then(e,t,void 0,void 0,void 0)},r.prototype.done=function(e,t){this._then(e,t,void 0,void 0,void 0)._setIsFinal()},r.prototype.spread=function(e){return"function"!=typeof e?c("expecting a function but got "+d.classString(e)):this.all()._then(e,void 0,void 0,S,void 0)},r.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(e.fulfillmentValue=this.value(),e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this.reason(),e.isRejected=!0),e},r.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new E(this).promise()},r.prototype.error=function(e){return this.caught(d.originatesFromRejection,e)},r.getNewLibraryCopy=t.exports,r.is=function(e){return e instanceof r},r.fromNode=r.fromCallback=function(e){var t=new r(T);t._captureStackTrace();var n=arguments.length>1&&!!Object(arguments[1]).multiArgs,i=F(e)(k(t,n));return i===L&&t._rejectCallback(i.e,!0),t._isFateSealed()||t._setAsyncGuaranteed(),t},r.all=function(e){return new E(e).promise()},r.cast=function(e){var t=C(e);return t instanceof r||((t=new r(T))._captureStackTrace(),t._setFulfilled(),t._rejectionHandler0=e),t},r.resolve=r.fulfilled=r.cast,r.reject=r.rejected=function(e){var t=new r(T);return t._captureStackTrace(),t._rejectCallback(e,!0),t},r.setScheduler=function(e){if("function"!=typeof e)throw new b("expecting a function but got "+d.classString(e));return I.setScheduler(e)},r.prototype._then=function(e,t,n,i,o){var a=void 0!==o,s=a?o:new r(T),u=this._target(),c=u._bitField;a||(s._propagateFrom(this,3),s._captureStackTrace(),void 0===i&&0!=(2097152&this._bitField)&&(i=0!=(50397184&c)?this._boundValue():u===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,s));var l=p();if(0!=(50397184&c)){var h,g,f=u._settlePromiseCtx;0!=(33554432&c)?(g=u._rejectionHandler0,h=e):0!=(16777216&c)?(g=u._fulfillmentHandler0,h=t,u._unsetRejectionIsUnhandled()):(f=u._settlePromiseLateCancellationObserver,g=new D("late cancellation observer"),u._attachExtraTrace(g),h=t),I.invoke(f,u,{handler:d.contextBind(l,h),promise:s,receiver:i,value:g})}else u._addCallbacks(e,t,s,i,l);return s},r.prototype._length=function(){return 65535&this._bitField},r.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},r.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},r.prototype._setLength=function(e){this._bitField=-65536&this._bitField|65535&e},r.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},r.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},r.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},r.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},r.prototype._isFinal=function(){return(4194304&this._bitField)>0},r.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},r.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},r.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},r.prototype._setAsyncGuaranteed=function(){if(!I.hasCustomScheduler()){var e=this._bitField;this._bitField=e|(536870912&e)>>2^134217728}},r.prototype._setNoAsyncGuarantee=function(){this._bitField=-134217729&(536870912|this._bitField)},r.prototype._receiverAt=function(e){var t=0===e?this._receiver0:this[4*e-4+3];return t===l?void 0:void 0===t&&this._isBound()?this._boundValue():t},r.prototype._promiseAt=function(e){return this[4*e-4+2]},r.prototype._fulfillmentHandlerAt=function(e){return this[4*e-4+0]},r.prototype._rejectionHandlerAt=function(e){return this[4*e-4+1]},r.prototype._boundValue=function(){},r.prototype._migrateCallback0=function(e){var t=e._fulfillmentHandler0,n=e._rejectionHandler0,r=e._promise0,i=e._receiverAt(0);void 0===i&&(i=l),this._addCallbacks(t,n,r,i,null)},r.prototype._migrateCallbackAt=function(e,t){var n=e._fulfillmentHandlerAt(t),r=e._rejectionHandlerAt(t),i=e._promiseAt(t),o=e._receiverAt(t);void 0===o&&(o=l),this._addCallbacks(n,r,i,o,null)},r.prototype._addCallbacks=function(e,t,n,r,i){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=n,this._receiver0=r,"function"==typeof e&&(this._fulfillmentHandler0=d.contextBind(i,e)),"function"==typeof t&&(this._rejectionHandler0=d.contextBind(i,t));else{var a=4*o-4;this[a+2]=n,this[a+3]=r,"function"==typeof e&&(this[a+0]=d.contextBind(i,e)),"function"==typeof t&&(this[a+1]=d.contextBind(i,t))}return this._setLength(o+1),o},r.prototype._proxy=function(e,t){this._addCallbacks(void 0,void 0,t,e,null)},r.prototype._resolveCallback=function(e,t){if(0==(117506048&this._bitField)){if(e===this)return this._rejectCallback(s(),!1);var n=C(e,this);if(!(n instanceof r))return this._fulfill(e);t&&this._propagateFrom(n,2);var i=n._target();if(i===this)return void this._reject(s());var o=i._bitField;if(0==(50397184&o)){var a=this._length();a>0&&i._migrateCallback0(this);for(var u=1;a>u;++u)i._migrateCallbackAt(this,u);this._setFollowing(),this._setLength(0),this._setFollowee(n)}else if(0!=(33554432&o))this._fulfill(i._value());else if(0!=(16777216&o))this._reject(i._reason());else{var c=new D("late cancellation observer");i._attachExtraTrace(c),this._reject(c)}}},r.prototype._rejectCallback=function(e,t,n){var r=d.ensureErrorObject(e),i=r===e;if(!i&&!n&&A.warnings()){var o="a promise was rejected with a non-error: "+d.classString(e);this._warn(o,!0)}this._attachExtraTrace(r,!!t&&i),this._reject(e)},r.prototype._resolveFromExecutor=function(e){if(e!==T){var t=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(e,(function(e){t._resolveCallback(e)}),(function(e){t._rejectCallback(e,n)}));n=!1,this._popContext(),void 0!==r&&t._rejectCallback(r,!0)}},r.prototype._settlePromiseFromHandler=function(e,t,n,r){var i=r._bitField;if(0==(65536&i)){var o;r._pushContext(),t===S?n&&"number"==typeof n.length?o=F(e).apply(this._boundValue(),n):(o=L).e=new b("cannot .spread() a non-array: "+d.classString(n)):o=F(e).call(t,n);var a=r._popContext();0==(65536&(i=r._bitField))&&(o===w?r._reject(n):o===L?r._rejectCallback(o.e,!1):(A.checkForgottenReturns(o,a,"",r,this),r._resolveCallback(o)))}},r.prototype._target=function(){for(var e=this;e._isFollowing();)e=e._followee();return e},r.prototype._followee=function(){return this._rejectionHandler0},r.prototype._setFollowee=function(e){this._rejectionHandler0=e},r.prototype._settlePromise=function(e,t,i,o){var a=e instanceof r,s=this._bitField,c=0!=(134217728&s);0!=(65536&s)?(a&&e._invokeInternalOnCancel(),i instanceof x&&i.isFinallyHandler()?(i.cancelPromise=e,F(t).call(i,o)===L&&e._reject(L.e)):t===u?e._fulfill(u.call(i)):i instanceof n?i._promiseCancelled(e):a||e instanceof E?e._cancel():i.cancel()):"function"==typeof t?a?(c&&e._setAsyncGuaranteed(),this._settlePromiseFromHandler(t,i,o,e)):t.call(i,o,e):i instanceof n?i._isResolved()||(0!=(33554432&s)?i._promiseFulfilled(o,e):i._promiseRejected(o,e)):a&&(c&&e._setAsyncGuaranteed(),0!=(33554432&s)?e._fulfill(o):e._reject(o))},r.prototype._settlePromiseLateCancellationObserver=function(e){var t=e.handler,n=e.promise,i=e.receiver,o=e.value;"function"==typeof t?n instanceof r?this._settlePromiseFromHandler(t,i,o,n):t.call(i,o,n):n instanceof r&&n._reject(o)},r.prototype._settlePromiseCtx=function(e){this._settlePromise(e.promise,e.handler,e.receiver,e.value)},r.prototype._settlePromise0=function(e,t,n){var r=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(r,e,i,t)},r.prototype._clearCallbackDataAtIndex=function(e){var t=4*e-4;this[t+2]=this[t+3]=this[t+0]=this[t+1]=void 0},r.prototype._fulfill=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(e===this){var n=s();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=e,(65535&t)>0&&(0!=(134217728&t)?this._settlePromises():I.settlePromises(this),this._dereferenceTrace())}},r.prototype._reject=function(e){var t=this._bitField;if(!((117506048&t)>>>16))return this._setRejected(),this._fulfillmentHandler0=e,this._isFinal()?I.fatalError(e,d.isNode):void((65535&t)>0?I.settlePromises(this):this._ensurePossibleRejectionHandled())},r.prototype._fulfillPromises=function(e,t){for(var n=1;e>n;n++){var r=this._fulfillmentHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,t)}},r.prototype._rejectPromises=function(e,t){for(var n=1;e>n;n++){var r=this._rejectionHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,t)}},r.prototype._settlePromises=function(){var e=this._bitField,t=65535&e;if(t>0){if(0!=(16842752&e)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,e),this._rejectPromises(t,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,e),this._fulfillPromises(t,r)}this._setLength(0)}this._clearCancellationData()},r.prototype._settledValue=function(){var e=this._bitField;return 0!=(33554432&e)?this._rejectionHandler0:0!=(16777216&e)?this._fulfillmentHandler0:void 0},"undefined"!=typeof Symbol&&Symbol.toStringTag&&_.defineProperty(r.prototype,Symbol.toStringTag,{get:function(){return"Object"}}),r.defer=r.pending=function(){return A.deprecated("Promise.defer","new Promise"),{promise:new r(T),resolve:i,reject:o}},d.notEnumerableProp(r,"_makeSelfResolutionError",s),e("./method")(r,T,C,c,A),e("./bind")(r,T,C,A),e("./cancel")(r,E,c,A),e("./direct_resolve")(r),e("./synchronous_inspection")(r),e("./join")(r,E,C,T,I),r.Promise=r,r.version="3.7.2",e("./call_get.js")(r),e("./generators.js")(r,c,T,C,n,A),e("./map.js")(r,E,c,C,T,A),e("./nodeify.js")(r),e("./promisify.js")(r,T),e("./props.js")(r,E,C,c),e("./race.js")(r,T,C,c),e("./reduce.js")(r,E,c,C,T,A),e("./settle.js")(r,E,A),e("./some.js")(r,E,c),e("./timers.js")(r,T,A),e("./using.js")(r,c,C,P,T,A),e("./any.js")(r),e("./each.js")(r,T),e("./filter.js")(r,T),d.toFastProperties(r),d.toFastProperties(r.prototype),a({a:1}),a({b:2}),a({c:3}),a(1),a((function(){})),a(void 0),a(!1),a(new r(T)),A.setBounds(v.firstLineError,d.lastLineError),r}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36,async_hooks:void 0}],23:[function(e,t,n){t.exports=function(t,n,r,i,o){function a(e){var r=this._promise=new t(n);e instanceof t&&(r._propagateFrom(e,3),e.suppressUnhandledRejections()),r._setOnCancel(this),this._values=e,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var s=e("./util");return s.inherits(a,o),a.prototype.length=function(){return this._length},a.prototype.promise=function(){return this._promise},a.prototype._init=function e(n,o){var a=r(this._values,this._promise);if(a instanceof t){var u=(a=a._target())._bitField;if(this._values=a,0==(50397184&u))return this._promise._setAsyncGuaranteed(),a._then(e,this._reject,void 0,this,o);if(0==(33554432&u))return 0!=(16777216&u)?this._reject(a._reason()):this._cancel();a=a._value()}if(null!==(a=s.asArray(a)))return 0===a.length?void(-5===o?this._resolveEmptyArray():this._resolve(function(e){switch(e){case-2:return[];case-3:return{};case-6:return new Map}}(o))):void this._iterate(a);var c=i("expecting an array or an iterable object but got "+s.classString(a)).reason();this._promise._rejectCallback(c,!1)},a.prototype._iterate=function(e){var n=this.getActualLength(e.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var i=this._promise,o=!1,a=null,s=0;n>s;++s){var u=r(e[s],i);a=u instanceof t?(u=u._target())._bitField:null,o?null!==a&&u.suppressUnhandledRejections():null!==a?0==(50397184&a)?(u._proxy(this,s),this._values[s]=u):o=0!=(33554432&a)?this._promiseFulfilled(u._value(),s):0!=(16777216&a)?this._promiseRejected(u._reason(),s):this._promiseCancelled(s):o=this._promiseFulfilled(u,s)}o||i._setAsyncGuaranteed()},a.prototype._isResolved=function(){return null===this._values},a.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},a.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},a.prototype._reject=function(e){this._values=null,this._promise._rejectCallback(e,!1)},a.prototype._promiseFulfilled=function(e,t){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},a.prototype._promiseCancelled=function(){return this._cancel(),!0},a.prototype._promiseRejected=function(e){return this._totalResolved++,this._reject(e),!0},a.prototype._resultCancelled=function(){if(!this._isResolved()){var e=this._values;if(this._cancel(),e instanceof t)e.cancel();else for(var n=0;n<e.length;++n)e[n]instanceof t&&e[n].cancel()}},a.prototype.shouldCopyValues=function(){return!0},a.prototype.getActualLength=function(e){return e},a}},{"./util":36}],24:[function(e,t,n){t.exports=function(t,n){function r(e){return!p.test(e)}function i(e){try{return!0===e.__isPromisified__}catch(t){return!1}}function o(e,t,n){var r=c.getDataPropertyOrDefault(e,t+n,m);return!!r&&i(r)}function a(e,t,n,r){for(var a=c.inheritedDataKeys(e),s=[],u=0;u<a.length;++u){var l=a[u],d=e[l],h=r===_||_(l,d,e);"function"!=typeof d||i(d)||o(e,l,t)||!r(l,d,e,h)||s.push(l,d)}return function(e,t,n){for(var r=0;r<e.length;r+=2){var i=e[r];if(n.test(i))for(var o=i.replace(n,""),a=0;a<e.length;a+=2)if(e[a]===o)throw new f("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",t))}}(s,t,n),s}function s(e,t,n,r,i){for(var o=new RegExp(v(t)+"$"),s=a(e,t,o,n),l=0,d=s.length;d>l;l+=2){var h=s[l],g=s[l+1],f=h+t;if(r===I)e[f]=I(h,u,h,g,t,i);else{var m=r(g,(function(){return I(h,u,h,g,t,i)}));c.notEnumerableProp(m,"__isPromisified__",!0),e[f]=m}}return c.toFastProperties(e),e}var u={},c=e("./util"),l=e("./nodeback"),d=c.withAppended,h=c.maybeWrapAsError,g=c.canEvaluate,f=e("./errors").TypeError,m={__isPromisified__:!0},p=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),_=function(e){return c.isIdentifier(e)&&"_"!==e.charAt(0)&&"constructor"!==e},v=function(e){return e.replace(/([$])/,"\\$")},I=g?void 0:function(e,r,i,o,a,s){function g(){var i=r;r===u&&(i=this);var o=new t(n);o._captureStackTrace();var a="string"==typeof m&&this!==f?this[m]:e,c=l(o,s);try{a.apply(i,d(arguments,c))}catch(U){o._rejectCallback(h(U),!0,!0)}return o._isFateSealed()||o._setAsyncGuaranteed(),o}var f=function(){return this}(),m=e;return"string"==typeof m&&(e=o),c.notEnumerableProp(g,"__isPromisified__",!0),g};t.promisify=function(e,t){if("function"!=typeof e)throw new f("expecting a function but got "+c.classString(e));if(i(e))return e;var n=function(e,t,n){return I(e,t,void 0,e,null,n)}(e,void 0===(t=Object(t)).context?u:t.context,!!t.multiArgs);return c.copyDescriptors(e,n,r),n},t.promisifyAll=function(e,t){if("function"!=typeof e&&"object"!=typeof e)throw new f("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var n=!!(t=Object(t)).multiArgs,r=t.suffix;"string"!=typeof r&&(r="Async");var i=t.filter;"function"!=typeof i&&(i=_);var o=t.promisifier;if("function"!=typeof o&&(o=I),!c.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var a=c.inheritedDataKeys(e),u=0;u<a.length;++u){var l=e[a[u]];"constructor"!==a[u]&&c.isClass(l)&&(s(l.prototype,r,i,o,n),s(l,r,i,o,n))}return s(e,r,i,o,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(e,t,n){t.exports=function(t,n,r,i){function o(e){var t,n=!1;if(void 0!==s&&e instanceof s)t=d(e),n=!0;else{var r=l.keys(e),i=r.length;t=new Array(2*i);for(var o=0;i>o;++o){var a=r[o];t[o]=e[a],t[o+i]=a}}this.constructor$(t),this._isMap=n,this._init$(void 0,n?-6:-3)}function a(e){var n,a=r(e);return c(a)?(n=a instanceof t?a._then(t.props,void 0,void 0,void 0,void 0):new o(a).promise(),a instanceof t&&n._propagateFrom(a,2),n):i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var s,u=e("./util"),c=u.isObject,l=e("./es5");"function"==typeof Map&&(s=Map);var d=function(){function e(e,r){this[t]=e,this[t+n]=r,t++}var t=0,n=0;return function(r){n=r.size,t=0;var i=new Array(2*r.size);return r.forEach(e,i),i}}();u.inherits(o,n),o.prototype._init=function(){},o.prototype._promiseFulfilled=function(e,t){if(this._values[t]=e,++this._totalResolved>=this._length){var n;if(this._isMap)n=function(e){for(var t=new s,n=e.length/2|0,r=0;n>r;++r)t.set(e[n+r],e[r]);return t}(this._values);else{n={};for(var r=this.length(),i=0,o=this.length();o>i;++i)n[this._values[i+r]]=this._values[i]}return this._resolve(n),!0}return!1},o.prototype.shouldCopyValues=function(){return!1},o.prototype.getActualLength=function(e){return e>>1},t.prototype.props=function(){return a(this)},t.props=function(e){return a(e)}}},{"./es5":13,"./util":36}],26:[function(e,t,n){function r(e){this._capacity=e,this._length=0,this._front=0}r.prototype._willBeOverCapacity=function(e){return this._capacity<e},r.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1),this[this._front+t&this._capacity-1]=e,this._length=t+1},r.prototype.push=function(e,t,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(e),this._pushOne(t),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=e,this[i+1&o]=t,this[i+2&o]=n,this._length=r},r.prototype.shift=function(){var e=this._front,t=this[e];return this[e]=void 0,this._front=e+1&this._capacity-1,this._length--,t},r.prototype.length=function(){return this._length},r.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<1)},r.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e,function(e,t,n,r,i){for(var o=0;i>o;++o)n[o+r]=e[o+0],e[o+0]=void 0}(this,0,this,t,this._front+this._length&t-1)},t.exports=r},{}],27:[function(e,t,n){t.exports=function(t,n,r,i){function o(e,o){var u=r(e);if(u instanceof t)return s(u);if(null===(e=a.asArray(e)))return i("expecting an array or an iterable object but got "+a.classString(e));var c=new t(n);void 0!==o&&c._propagateFrom(o,3);for(var l=c._fulfill,d=c._reject,h=0,g=e.length;g>h;++h){var f=e[h];(void 0!==f||h in e)&&t.cast(f)._then(l,d,void 0,c,null)}return c}var a=e("./util"),s=function(e){return e.then((function(t){return o(t,e)}))};t.race=function(e){return o(e,void 0)},t.prototype.race=function(){return o(this,void 0)}}},{"./util":36}],28:[function(e,t,n){t.exports=function(t,n,r,i,o,a){function s(e,n,r,i){this.constructor$(e);var a=t._getContext();this._fn=h.contextBind(a,n),void 0!==r&&(r=t.resolve(r))._attachCancellationCallback(this),this._initialValue=r,this._currentCancellable=null,this._eachValues=i===o?Array(this._length):0===i?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function u(e,t){this.isFulfilled()?t._resolve(e):t._reject(e)}function c(e,t,n,i){return"function"!=typeof t?r("expecting a function but got "+h.classString(t)):new s(e,t,n,i).promise()}function l(e){this.accum=e,this.array._gotAccum(e);var n=i(this.value,this.array._promise);return n instanceof t?(this.array._currentCancellable=n,n._then(d,void 0,void 0,this,void 0)):d.call(this,n)}function d(e){var n,r=this.array,i=r._promise,o=g(r._fn);i._pushContext(),(n=void 0!==r._eachValues?o.call(i._boundValue(),e,this.index,this.length):o.call(i._boundValue(),this.accum,e,this.index,this.length))instanceof t&&(r._currentCancellable=n);var s=i._popContext();return a.checkForgottenReturns(n,s,void 0!==r._eachValues?"Promise.each":"Promise.reduce",i),n}var h=e("./util"),g=h.tryCatch;h.inherits(s,n),s.prototype._gotAccum=function(e){null!=this._eachValues&&e!==o&&this._eachValues.push(e)},s.prototype._eachComplete=function(e){return null!==this._eachValues&&this._eachValues.push(e),this._eachValues},s.prototype._init=function(){},s.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},s.prototype.shouldCopyValues=function(){return!1},s.prototype._resolve=function(e){this._promise._resolveCallback(e),this._values=null},s.prototype._resultCancelled=function(e){return e===this._initialValue?this._cancel():void(this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof t&&this._currentCancellable.cancel(),this._initialValue instanceof t&&this._initialValue.cancel()))},s.prototype._iterate=function(e){this._values=e;var n,r,i=e.length;void 0!==this._initialValue?(n=this._initialValue,r=0):(n=t.resolve(e[0]),r=1),this._currentCancellable=n;for(var o=r;i>o;++o){var a=e[o];a instanceof t&&a.suppressUnhandledRejections()}if(!n.isRejected())for(;i>r;++r)n=n._then(l,void 0,void 0,{accum:null,value:e[r],index:r,length:i,array:this},void 0),0==(127&r)&&n._setNoAsyncGuarantee();void 0!==this._eachValues&&(n=n._then(this._eachComplete,void 0,void 0,this,void 0)),n._then(u,u,void 0,n,this)},t.prototype.reduce=function(e,t){return c(this,e,t,null)},t.reduce=function(e,t,n,r){return c(e,t,n,r)}}},{"./util":36}],29:[function(e,t,n){var r,i=e("./util"),o=i.getNativePromise();if(i.isNode&&"undefined"==typeof MutationObserver){var a=global.setImmediate,s=process.nextTick;r=i.isRecentNode?function(e){a.call(global,e)}:function(e){s.call(process,e)}}else if("function"==typeof o&&"function"==typeof o.resolve){var u=o.resolve();r=function(e){u.then(e)}}else r="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)||!("classList"in document.documentElement)?"undefined"!=typeof setImmediate?function(e){setImmediate(e)}:"undefined"!=typeof setTimeout?function(e){setTimeout(e,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}:function(){var e=document.createElement("div"),t={attributes:!0},n=!1,r=document.createElement("div");new MutationObserver((function(){e.classList.toggle("foo"),n=!1})).observe(r,t);var i=function(){n||(n=!0,r.classList.toggle("foo"))};return function(n){var r=new MutationObserver((function(){r.disconnect(),n()}));r.observe(e,t),i()}}();t.exports=r},{"./util":36}],30:[function(e,t,n){t.exports=function(t,n,r){function i(e){this.constructor$(e)}var o=t.PromiseInspection;e("./util").inherits(i,n),i.prototype._promiseResolved=function(e,t){return this._values[e]=t,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},i.prototype._promiseFulfilled=function(e,t){var n=new o;return n._bitField=33554432,n._settledValueField=e,this._promiseResolved(t,n)},i.prototype._promiseRejected=function(e,t){var n=new o;return n._bitField=16777216,n._settledValueField=e,this._promiseResolved(t,n)},t.settle=function(e){return r.deprecated(".settle()",".reflect()"),new i(e).promise()},t.allSettled=function(e){return new i(e).promise()},t.prototype.settle=function(){return t.settle(this)}}},{"./util":36}],31:[function(e,t,n){t.exports=function(t,n,r){function i(e){this.constructor$(e),this._howMany=0,this._unwrap=!1,this._initialized=!1}function o(e,t){if((0|t)!==t||0>t)return r("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new i(e),o=n.promise();return n.setHowMany(t),n.init(),o}var a=e("./util"),s=e("./errors").RangeError,u=e("./errors").AggregateError,c=a.isArray,l={};a.inherits(i,n),i.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var e=c(this._values);!this._isResolved()&&e&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},i.prototype.init=function(){this._initialized=!0,this._init()},i.prototype.setUnwrap=function(){this._unwrap=!0},i.prototype.howMany=function(){return this._howMany},i.prototype.setHowMany=function(e){this._howMany=e},i.prototype._promiseFulfilled=function(e){return this._addFulfilled(e),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},i.prototype._promiseRejected=function(e){return this._addRejected(e),this._checkOutcome()},i.prototype._promiseCancelled=function(){return this._values instanceof t||null==this._values?this._cancel():(this._addRejected(l),this._checkOutcome())},i.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var e=new u,t=this.length();t<this._values.length;++t)this._values[t]!==l&&e.push(this._values[t]);return e.length>0?this._reject(e):this._cancel(),!0}return!1},i.prototype._fulfilled=function(){return this._totalResolved},i.prototype._rejected=function(){return this._values.length-this.length()},i.prototype._addRejected=function(e){this._values.push(e)},i.prototype._addFulfilled=function(e){this._values[this._totalResolved++]=e},i.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},i.prototype._getRangeError=function(e){return new s("Input array must contain at least "+this._howMany+" items but contains only "+e+" items")},i.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},t.some=function(e,t){return o(e,t)},t.prototype.some=function(e){return o(this,e)},t._SomePromiseArray=i}},{"./errors":12,"./util":36}],32:[function(e,t,n){t.exports=function(e){function t(e){void 0!==e?(e=e._target(),this._bitField=e._bitField,this._settledValueField=e._isFateSealed()?e._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}t.prototype._settledValue=function(){return this._settledValueField};var n=t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=t.prototype.error=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=t.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},o=t.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},a=t.prototype.isPending=function(){return 0==(50397184&this._bitField)},s=t.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};t.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},e.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},e.prototype._isCancelled=function(){return this._target().__isCancelled()},e.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},e.prototype.isPending=function(){return a.call(this._target())},e.prototype.isRejected=function(){return o.call(this._target())},e.prototype.isFulfilled=function(){return i.call(this._target())},e.prototype.isResolved=function(){return s.call(this._target())},e.prototype.value=function(){return n.call(this._target())},e.prototype.reason=function(){var e=this._target();return e._unsetRejectionIsUnhandled(),r.call(e)},e.prototype._value=function(){return this._settledValue()},e.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},e.PromiseInspection=t}},{}],33:[function(e,t,n){t.exports=function(t,n){function r(e,r,a){var s=new t(n),u=s;a&&a._pushContext(),s._captureStackTrace(),a&&a._popContext();var c=!0,l=i.tryCatch(r).call(e,(function(e){s&&(s._resolveCallback(e),s=null)}),(function(e){s&&(s._rejectCallback(e,c,!0),s=null)}));return c=!1,s&&l===o&&(s._rejectCallback(l.e,!0,!0),s=null),u}var i=e("./util"),o=i.errorObj,a=i.isObject,s={}.hasOwnProperty;return function(e,i){if(a(e)){if(e instanceof t)return e;var u=function(e){try{return function(e){return e.then}(e)}catch(t){return o.e=t,o}}(e);if(u===o){i&&i._pushContext();var c=t.reject(u.e);return i&&i._popContext(),c}if("function"==typeof u)return function(e){try{return s.call(e,"_promise0")}catch(t){return!1}}(e)?(c=new t(n),e._then(c._fulfill,c._reject,void 0,c,null),c):r(e,u,i)}return e}}},{"./util":36}],34:[function(e,t,n){t.exports=function(t,n,r){function i(e){this.handle=e}function o(e){return clearTimeout(this.handle),e}function a(e){throw clearTimeout(this.handle),e}var s=e("./util"),u=t.TimeoutError;i.prototype._resultCancelled=function(){clearTimeout(this.handle)};var c=function(e){return l(+this).thenReturn(e)},l=t.delay=function(e,o){var a,s;return void 0!==o?(a=t.resolve(o)._then(c,null,null,e,void 0),r.cancellation()&&o instanceof t&&a._setOnCancel(o)):(a=new t(n),s=setTimeout((function(){a._fulfill()}),+e),r.cancellation()&&a._setOnCancel(new i(s)),a._captureStackTrace()),a._setAsyncGuaranteed(),a};t.prototype.delay=function(e){return l(e,this)};var d=function(e,t,n){var r;r="string"!=typeof t?t instanceof Error?t:new u("operation timed out"):new u(t),s.markAsOriginatingFromRejection(r),e._attachExtraTrace(r),e._reject(r),null!=n&&n.cancel()};t.prototype.timeout=function(e,t){e=+e;var n,s,u=new i(setTimeout((function(){n.isPending()&&d(n,t,s)}),e));return r.cancellation()?(s=this.then(),(n=s._then(o,a,void 0,u,void 0))._setOnCancel(u)):n=this._then(o,a,void 0,u,void 0),n}}},{"./util":36}],35:[function(e,t,n){t.exports=function(t,n,r,i,o,a){function s(e){setTimeout((function(){throw e}),0)}function u(e,n){var i=0,a=e.length,u=new t(o);return function o(){if(i>=a)return u._fulfill();var c=function(e){var t=r(e);return t!==e&&"function"==typeof e._isDisposable&&"function"==typeof e._getDisposer&&e._isDisposable()&&t._setDisposable(e._getDisposer()),t}(e[i++]);if(c instanceof t&&c._isDisposable()){try{c=r(c._getDisposer().tryDispose(n),e.promise)}catch(l){return s(l)}if(c instanceof t)return c._then(o,s,null,null,null)}o()}(),u}function c(e,t,n){this._data=e,this._promise=t,this._context=n}function l(e,t,n){this.constructor$(e,t,n)}function d(e){return c.isDisposer(e)?(this.resources[this.index]._setDisposable(e),e.promise()):e}function h(e){this.length=e,this.promise=null,this[e-1]=null}var g=e("./util"),f=e("./errors").TypeError,m=e("./util").inherits,p=g.errorObj,_=g.tryCatch,v={};c.prototype.data=function(){return this._data},c.prototype.promise=function(){return this._promise},c.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():v},c.prototype.tryDispose=function(e){var t=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=t!==v?this.doDispose(t,e):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},c.isDisposer=function(e){return null!=e&&"function"==typeof e.resource&&"function"==typeof e.tryDispose},m(l,c),l.prototype.doDispose=function(e,t){return this.data().call(e,e,t)},h.prototype._resultCancelled=function(){for(var e=this.length,n=0;e>n;++n){var r=this[n];r instanceof t&&r.cancel()}},t.using=function(){var e=arguments.length;if(2>e)return n("you must pass at least 2 arguments to Promise.using");var i=arguments[e-1];if("function"!=typeof i)return n("expecting a function but got "+g.classString(i));var o,s=!0;2===e&&Array.isArray(arguments[0])?(e=(o=arguments[0]).length,s=!1):(o=arguments,e--);for(var l=new h(e),f=0;e>f;++f){var m=o[f];if(c.isDisposer(m)){var v=m;(m=m.promise())._setDisposable(v)}else{var I=r(m);I instanceof t&&(m=I._then(d,null,null,{resources:l,index:f},void 0))}l[f]=m}var y=new Array(l.length);for(f=0;f<y.length;++f)y[f]=t.resolve(l[f]).reflect();var b=t.all(y).then((function(e){for(var t=0;t<e.length;++t){var n=e[t];if(n.isRejected())return p.e=n.error(),p;if(!n.isFulfilled())return void b.cancel();e[t]=n.value()}D._pushContext(),i=_(i);var r=s?i.apply(void 0,e):i(e),o=D._popContext();return a.checkForgottenReturns(r,o,"Promise.using",D),r})),D=b.lastly((function(){var e=new t.PromiseInspection(b);return u(l,e)}));return l.promise=D,D._setOnCancel(l),D},t.prototype._setDisposable=function(e){this._bitField=131072|this._bitField,this._disposer=e},t.prototype._isDisposable=function(){return(131072&this._bitField)>0},t.prototype._getDisposer=function(){return this._disposer},t.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},t.prototype.disposer=function(e){if("function"==typeof e)return new l(e,this,i());throw new f}}},{"./errors":12,"./util":36}],36:[function(e,t,n){function r(){try{var e=d;return d=null,e.apply(this,arguments)}catch(t){return f.e=t,f}}function i(e){return null==e||!0===e||!1===e||"string"==typeof e||"number"==typeof e}function o(e,t,n){return i(e)||h.defineProperty(e,t,{value:n,configurable:!0,enumerable:!1,writable:!0}),e}function a(e){try{return e+""}catch(t){return"[no string representation]"}}function s(e){return e instanceof Error||null!==e&&"object"==typeof e&&"string"==typeof e.message&&"string"==typeof e.name}function u(e){return s(e)&&h.propertyIsWritable(e,"stack")}function c(e){return{}.toString.call(e)}var d,h=e("./es5"),g="undefined"==typeof navigator,f={e:{}},m=void 0!==q?q:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0!==this?this:null,p=function(){var e=[Array.prototype,Object.prototype,Function.prototype],t=function(t){for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1};if(h.isES5){var n=Object.getOwnPropertyNames;return function(e){for(var r=[],i=Object.create(null);null!=e&&!t(e);){var o;try{o=n(e)}catch(l){return r}for(var a=0;a<o.length;++a){var s=o[a];if(!i[s]){i[s]=!0;var u=Object.getOwnPropertyDescriptor(e,s);null!=u&&null==u.get&&null==u.set&&r.push(s)}}e=h.getPrototypeOf(e)}return r}}var r={}.hasOwnProperty;return function(n){if(t(n))return[];var i=[];e:for(var o in n)if(r.call(n,o))i.push(o);else{for(var a=0;a<e.length;++a)if(r.call(e[a],o))continue e;i.push(o)}return i}}(),_=/this\s*\.\s*\S+\s*=/,v=/^[a-z$_][a-z$_0-9]*$/i,I="stack"in new Error?function(e){return u(e)?e:new Error(a(e))}:function(e){if(u(e))return e;try{throw new Error(a(e))}catch(t){return t}},y=function(e){return h.isArray(e)?e:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var b="function"==typeof Array.from?function(e){return Array.from(e)}:function(e){for(var t,n=[],r=e[Symbol.iterator]();!(t=r.next()).done;)n.push(t.value);return n};y=function(e){return h.isArray(e)?e:null!=e&&"function"==typeof e[Symbol.iterator]?b(e):null}}var D,T="undefined"!=typeof process&&"[object process]"===c(process).toLowerCase(),S="undefined"!=typeof process&&void 0!==process.env,w={setReflectHandler:function(e){D=e},isClass:function(e){try{if("function"==typeof e){var t=h.names(e.prototype),n=h.isES5&&t.length>1,r=t.length>0&&!(1===t.length&&"constructor"===t[0]),o=_.test(e+"")&&h.names(e).length>0;if(n||r||o)return!0}return!1}catch(i){return!1}},isIdentifier:function(e){return v.test(e)},inheritedDataKeys:p,getDataPropertyOrDefault:function(e,t,n){if(!h.isES5)return{}.hasOwnProperty.call(e,t)?e[t]:void 0;var r=Object.getOwnPropertyDescriptor(e,t);return null!=r?null==r.get&&null==r.set?r.value:n:void 0},thrower:function(e){throw e},isArray:h.isArray,asArray:y,notEnumerableProp:o,isPrimitive:i,isObject:function(e){return"function"==typeof e||"object"==typeof e&&null!==e},isError:s,canEvaluate:g,errorObj:f,tryCatch:function(e){return d=e,r},inherits:function(e,t){function n(){for(var n in this.constructor=e,this.constructor$=t,t.prototype)r.call(t.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=t.prototype[n])}var r={}.hasOwnProperty;return n.prototype=t.prototype,e.prototype=new n,e.prototype},withAppended:function(e,t){var n,r=e.length,i=new Array(r+1);for(n=0;r>n;++n)i[n]=e[n];return i[n]=t,i},maybeWrapAsError:function(e){return i(e)?new Error(a(e)):e},toFastProperties:function(e){function t(){}function n(){return typeof r.foo}t.prototype=e;var r=new t;return n(),n(),e},filledRange:function(e,t,n){for(var r=new Array(e),i=0;e>i;++i)r[i]=t+i+n;return r},toString:a,canAttachTrace:u,ensureErrorObject:I,originatesFromRejection:function(e){return null!=e&&(e instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===e.isOperational)},markAsOriginatingFromRejection:function(e){try{o(e,"isOperational",!0)}catch(t){}},classString:c,copyDescriptors:function(e,t,n){for(var r=h.names(e),i=0;i<r.length;++i){var o=r[i];if(n(o))try{h.defineProperty(t,o,h.getDescriptor(e,o))}catch(l){}}},isNode:T,hasEnvVariables:S,env:function(e){return S?process.env[e]:void 0},global:m,getNativePromise:function(){if("function"==typeof Promise)try{if("[object Promise]"===c(new Promise((function(){}))))return Promise}catch(t){}},contextBind:function(e,t){if(null===e||"function"!=typeof t||t===D)return t;null!==e.domain&&(t=e.domain.bind(t));var n=e.async;if(null!==n){var r=t;t=function(){var e=new Array(2).concat([].slice.call(arguments));return e[0]=r,e[1]=this,n.runInAsyncScope.apply(n,e)}}return t}};w.isRecentNode=w.isNode&&function(){var e;return process.versions&&process.versions.node?e=process.versions.node.split(".").map(Number):process.version&&(e=process.version.split(".").map(Number)),0===e[0]&&e[1]>10||e[0]>0}(),w.nodeSupportsAsyncResource=w.isNode&&function(){var t=!1;try{t="function"==typeof e("async_hooks").AsyncResource.prototype.runInAsyncScope}catch(r){t=!1}return t}(),w.isNode&&w.toFastProperties(process);try{throw new Error}catch(L){w.lastLineError=L}t.exports=w},{"./es5":13,async_hooks:void 0}]},{},[4])(4)})),"undefined"!=typeof window&&null!==window?window.P=window.Promise:null!=q&&(q.P=q.Promise)),X=q,Q=function(){var e={d:function(t,n){for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})}},t=(e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(f){if("object"==typeof window)return window}}(),e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},{});function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.d(t,{default:function(){return Ie}});var a,s,u,c=void 0,l=function(e){return"function"==typeof e},d=function(e){return Array.isArray?Array.isArray(e):e instanceof Array},h=function(e){return!(!e||!o(e).match(/function|object/))},g=function(e){return!1===e||e===c||null===e},f="undefined",m=("undefined"==typeof TypeError?"undefined":o(TypeError))===f?Error:TypeError;function p(e){a((function(){throw e}))}function _(e){return this.then(e,c)}function v(e){return this.then(c,e)}function I(e,t){return this.then((function(t){return l(e)?e.apply(null,d(t)?t:[t]):T.onlyFuncs?t:e}),t||c)}function y(e){function t(){e()}return this.then(t,t),this}function b(e){return this.then((function(t){return l(e)?e.apply(null,d(t)?t.splice(0,0,void 0)&&t:[void 0,t]):T.onlyFuncs?t:e}),(function(t){return e(t)}))}function D(e){return this.then(c,e?function(t){throw e(t),t}:p)}a=("undefined"==typeof process?"undefined":o(process))!==f&&process.nextTick?process.nextTick:("undefined"==typeof MessageChannel?"undefined":o(MessageChannel))!==f?(s=new MessageChannel,u=[],s.port1.onmessage=function(){u.length&&u.shift()()},function(e){u.push(e),s.port2.postMessage(0)}):function(e){setTimeout(e,0)};var T=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");i(this,"alwaysAsyncFn",null),i(this,"status",0),i(this,"pendings",[]),i(this,"promise",{then:function(t,r){var i=new e;return this.pendings.push([function(r){try{g(t)?i.resolve(r):i.resolve(l(t)?t(r):e.onlyFuncs?r:t)}catch(n){i.reject(n)}},function(t){if((g(r)||!l(r)&&e.onlyFuncs)&&i.reject(t),r)try{i.resolve(l(r)?r(t):r)}catch(n){i.reject(n)}}]),0!==this.status&&this.alwaysAsyncFn(this.execCallbacks),i.promise},success:_,error:v,otherwise:v,apply:I,spread:I,ensure:y,nodify:b,rethrow:D,isPending:function(){return 0===this.status},getStatus:function(){return this.status}}),this.alwaysAsyncFn=(c!==t?t:e.alwaysAsync)?a:function(e){e()},this.promise.toSource=this.promise.toString=this.promise.valueOf=function(){return void 0===this.value?this:this.value}}var t,n;return t=e,(n=[{key:"resolve",value:function(e){var t=!1;function n(e){return function(n){return t?void 0:(t=!0,e(n))}}if(this.status)return this;try{var r=h(e)&&e.then;if(l(r)){if(e===this.promise)throw new m("Promise can't resolve itself");return r.call(e,n(this.resolve),n(this.reject)),this}}catch(i){return n(this.reject)(i),this}return this.alwaysAsyncFn((function(){this.value=e,this.status=1,this.execCallbacks()})),this}},{key:"reject",value:function(e){return this.status||this.alwaysAsyncFn((function(){try{throw e}catch(t){this.value=t}this.status=-1,this.execCallbacks()})),this}},{key:"execCallbacks",value:function(){if(0!==this.status){var e,t=this.pendings,n=0,r=t.length,i=~this.status?0:1;for(this.pendings=[];n<r;n++)(e=t[n][i])&&e(this.value)}}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}i(T,"deferred",T),i(T,"defer",T),i(T,"nextTick",a),i(T,"alwaysAsync",!0),i(T,"onlyFuncs",!0),i(T,"resolve",(function(e){return new T(!0).resolve(e).promise})),i(T,"resolved",T.resolve),i(T,"fulfilled",T.resolve),i(T,"reject",(function(e){return new T(!0).reject(e).promise})),i(T,"rejected",T.reject);var A,x,R,k,L,F,W,O,B,N,V,U,G,j,H,z,K,J,Y,X,Q,Z,$,ee,te,ne,re,ie,oe,ae,se,ue,ce,le=(f="undefined"!=typeof window?window:void 0!==q?q:void 0).Dynamsoft,de=!1,he=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e};if(!(de=!!((fe=le.Lib)&&fe.__ver&&fe.isNumber(fe.__ver)&&20220623<=fe.__ver)||de)){var ge=Date.now||function(){return+new Date};de=(fe=(f.Map||(f.Map=function(){this.keys=[],this.data={},this.set=function(e,t){null==this.data[e]&&-1==this.keys.indexOf(e)&&this.keys.push(e),this.data[e]=t},this.get=function(e){return this.data[e]}}),he(le.Lib,{win:f,doc:f.document,debug:!1,nil:void 0,mix:he,clone:function e(t){if(null==t||"object"!=P(t))return t;var n,r,i;if(t instanceof Date)return(n=new Date).setTime(t.getTime()),n;if(t instanceof Array){for(n=[],i=t.length,r=0;r<i;r++)n[r]=e(t[r]);return n}if(t instanceof Object){for(r in n={},t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}return 0},keys:Object.keys,now:ge,getRandom:function(){for(var e,t=ge()%1e4,n=[],r=0;r<5;r++)e=Math.floor(10*Math.random()),0==r&&0==e?r=-1:n.push(e);return t<10?n.push("000"):t<100?n.push("00"):t<1e3&&n.push("0"),n.push(t),n.join("")},guid:function(e){for(var t,n,r=[],i="0123456789abcdef",o=0;o<8;o++)n=Math.floor(16*Math.random()),r.push(i.substring(n,n+1));for(r.push("-"),o=0;o<4;o++)n=Math.floor(16*Math.random()),r.push(i.substring(n,n+1));for(r.push("-4"),o=0;o<3;o++)n=Math.floor(16*Math.random()),r.push(i.substring(n,n+1));for(r.push("-"),n=Math.floor(16*Math.random()),t=i.substring(n,n+1),t=i.substring(n=3&t|8,n+1),r.push(t),o=0;o<3;o++)n=Math.floor(16*Math.random()),r.push(i.substring(n,n+1));for(r.push("-"),o=0;o<8;o++)n=Math.floor(16*Math.random()),r.push(i.substring(n,n+1));return r.unshift(e),r.join("")},noop:function(){},stringify:f.JSON.stringify,parse:f.JSON.parse,__ver:20220623}),function(e){var t,r,i,o=e.Lib,a=(e=o.mix,{}.hasOwnProperty),s={},u="object"===("undefined"==typeof HTMLElement?"undefined":n(HTMLElement));function c(e){return e===t}function l(e){return i.apply(this,arguments)}function d(e,t){s["[object "+e+"]"]=t=e.toLowerCase(),o["is"+e]=function(e){return o.type(e)===t}}e(o,{isDef:function(e){return e!==t},isUndef:c,isUndefined:c,isNull:function(e){return null===e},isNaN:(i=function(e){return isNaN(e)},l.toString=function(){return i.toString()},l),type:function(e){return null===e||e===t?String(e):s[{}.toString.call(e)]||"object"},isPlainObject:function(e){if(!e||"object"!==o.type(e)||e.nodeType||e.window==e)return!1;var t,n;try{if((n=e.constructor)&&!a(e,"constructor")&&!a(n.prototype,"isPrototypeOf"))return!1}catch(s){return!1}for(t in e);return c(t)||a(e,t)},isDOM:function(e){return u?e instanceof HTMLElement:e&&"object"===n(e)&&(1===e.nodeType||9===e.nodeType)&&"string"==typeof e.nodeName},isDOMInBody:function(e){var t=e;if(o.isDOM(e))for(;!t&&t!=document.body;)t=t.parentNode;else t=0;return!!t}}),d("Function"),o.each=r=function(e,t,n){if(e){var r,i,a,s=0,u=e.length;if(n=n||null,c(u)||o.isFunction(e))for(a=o.keys(e);s<a.length&&!1!==t.call(n,e[r=a[s]],r,e);s++);else for(i=e[0];s<u&&!1!==t.call(n,i,s,e);i=e[++s]);}return e},e=["String","Object","Boolean","Number"],Array.isArray?o.isArray=Array.isArray:e.push("Array"),r(e,d)}(le),function(e){var t,n=e.Lib,r=(e=n.mix,n.win);n.isDef(r.console)&&(n.isFunction((t=r.console).log)&&n.isFunction(t.error)||(t=!1)),n.getFormatedNow=function(e){var t,n="yyyy-MM-dd HH:mm:ss.SSSZ",r={"M+":(e=e?new Date(e):new Date).getUTCMonth()+1,"d+":e.getUTCDate(),"H+":e.getUTCHours(),"h+":e.getUTCHours()%12||12,"m+":e.getUTCMinutes(),"s+":e.getUTCSeconds(),"q+":Math.floor((e.getUTCMonth()+3)/3),"S+":e.getUTCMilliseconds()};for(t in/(y+)/.test(n)&&(n=n.replace(RegExp.$1,(e.getUTCFullYear()+"").substr(4-RegExp.$1.length))),r)new RegExp("("+t+")").test(n)&&(n=n.replace(RegExp.$1,1==RegExp.$1.length?r[t]:("000"+r[t]).substr(("000"+r[t]).length-RegExp.$1.length)));return n},e(n,{log:function(e){var r;n.debug&&t&&n.isFunction(t.log)&&(r=n.getFormatedNow((new Date).getTime()),t.log(["[",r,"] ",e].join("")))},error:function(e){var r;n.debug&&t&&n.isFunction(t.error)&&(r=n.getFormatedNow((new Date).getTime()),t.error(["[",r,"] ",e].join("")))},warn:function(e){var r;n.debug&&t&&n.isFunction(t.warn)&&(r=n.getFormatedNow((new Date).getTime()),t.warn(["[",r,"] ",e].join("")))},info:function(e){var r;n.debug&&t&&n.isFunction(t.info)&&(r=n.getFormatedNow((new Date).getTime()),t.info(["[",r,"] ",e].join("")))},getLogger:function(){return t},setLogger:function(e){t=e}})}(le),(ce=le.Lib).mix(ce,{startsWith:function(e,t){return 0===e.lastIndexOf(t,0)},endsWith:function(e,t){var n=e.length-t.length;return 0<=n&&e.indexOf(t,n)===n},replaceAll:function(e,t,n){return e.replace(new RegExp(t,"gi"),n)},upperCaseFirst:function(e){return e.charAt(0).toUpperCase()+e.substr(1)},removeNonPrintableChar:function(e){return ce.isString(e)?e.replace(/[^\x20-\x7E]/g,""):e},makeArray:function(e){if(null==e)return[];if(ce.isArray(e))return e;var t=r(e.length),n=r(e);if("number"!==t||e.alert||"string"===n||"function"===n&&(!("item"in e)||"number"!==t))return[e];for(var i=[],o=0,a=e.length;o<a;o++)i[o]=e[o];return i}}),(ue=le.Lib).extend=function(e,t){var n=function(){e.apply(this,arguments),t&&t.apply(this,arguments)};return ue.each(e.prototype,(function(e,t){n.prototype[t]=e})),n.prototype.constructor=n},(se=le.Lib).mix(ve.prototype,{get:function(e){return e in this.__attrs?this.__attrs[e]:""},set:function(e,t){e in this.__attrs&&(this.__attrs[e]=t)},addAttrs:function(e){se.mix(this.__attrs,e)}}),ve.extend=function(e){var t;return(e=e||{}).constructor&&(t=e.constructor),t=se.extend(this,t),se.mix(t,e),t},se.Attributes=ve,fe=le.Lib,oe=(de=Array.prototype).indexOf,ae=de.filter,fe.mix(fe,{filter:function(e,t,n){return ae.call(e,t,n||this)},indexOf:function(e,t){return oe.call(t,e)},uniq:function(e){for(var t=[],n=e.length,r=0;r<n;r++){for(var i=r+1;i<n;i++)e[r]===e[i]&&(i=++r);t.push(e[r])}return t}}),de=le.Lib,re=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ie=(ie=(fe=String.prototype).trim)||(fe.trim=function(){return this.replace(re,"")}),de.trim=function(e){return null==e?"":ie.call(e)},(ne=le.Lib).getNavInfoByUserAgent=function(e,t){var n,r,i=ne.doc,o=(e=e.toLowerCase(),t=t.toLowerCase(),/harmonyos/g.test(e)),a=!o&&/cros/.test(e),s=!o&&/android/g.test(e)||/android/g.test(t),u=/iphone/g.test(e)||/iphone/g.test(t),c=/macintosh/.test(e),l=navigator.maxTouchPoints||0,d=(c=/ipad/g.test(e)||(c||"macintel"==t)&&1<l,!(l=/ucweb|ucbrowser/g.test(e))&&/nexus/g.test(e)&&/version\/[\d.]+.*safari\//g.test(e)),h=/playbook/g.test(e),g=/hp-tablet/g.test(e),f=/blackberry|bb10/g.test(e),m=/symbian/g.test(e),p=/windows phone/g.test(e),_=/mobile/g.test(e),v=/arm64|aarch64/g.test(e),I=/mips64/g.test(e),y=/huaweibrowser/g.test(e),b=v||I,D=("linux"==t&&0<=e.indexOf("windows nt")&&(t="harmonyos",o=!0),(w=!((_=!(g=h||c||g)&&(u||d||f||m||p||s||o||_))||g||a))&&/win32|win64|windows/.test(t)),T=D&&/win64|x64/.test(e),S=w&&/mac68k|macppc|macintosh|macintel/.test(e),w=w&&/linux/.test(t),C=(t="win64"==t||/wow64|x86_64|win64|x64/.test(e)||b,/wow64/g.test(e)),E=!1,M=/opera|opr/g.test(e),P=/360se/g.test(e),A=/maxthon/g.test(e),x=/tencenttraveler|qqbrowser/g.test(e),R=/the world/g.test(e),k=/metasr/g.test(e),L=/avant/g.test(e),F=/firefox|fxios/g.test(e),W=ne.preNavInfo.bEdge,O=ne.preNavInfo.bIE,B=!(f||h||l||M||W||y)&&/chrome|crios/g.test(e),N="",V=0,U=/gecko/g.test(e),G=_||g,j="";return!(S||u||c||D||f||h||d)||l||M||W||O||F||(n=e.match(/version\/([\d.]+).*safari\//))&&(f||h||d||(B=!(E=!0)),j=n[1]),W?(-1<(f=e.indexOf("edge/"))?f+=5:-1<(f=e.indexOf("edg/"))?f+=4:-1<(f=e.indexOf("edga/"))?f+=5:-1<(f=e.indexOf("edgios/"))&&(f+=7),-1<f&&-1<(n=(j=e.slice(f)).indexOf(" "))&&(j=j.slice(0,n)),G=!0):F?(G=!0,-1<(n=e.indexOf("firefox/"))?(n=-1<(h=(j=n=-1<(h=(n=e.slice(n+8)).indexOf(" "))?n.slice(0,h):n).indexOf("."))?j.slice(0,h):n)<27&&(G=!1):(u||c)&&-1<(n=e.indexOf("fxios/"))&&(j=n=(n=e.slice(n+6)).slice(0,n.indexOf(" ")))):O?(f=e.indexOf("msie "),h=e.indexOf("trident"),r=e.indexOf("rv:"),-1!=f?N=n=(n=e.slice(f+5)).slice(0,n.indexOf(";")):-1!=r?N=n=(n=(n=e.slice(r+3)).slice(0,n.indexOf(";"))).slice(0,n.indexOf(")")):-1!=h&&(N=n=(n=e.slice(h+7)).slice(0,n.indexOf(";"))),(""===N||10<=parseInt(N))&&(G=!0),j=n):E?(G=!0,-1<(n=j.indexOf("."))&&(n=j.slice(0,n))<7&&(G=!1)):l?(-1<(n=e.indexOf("ucweb"))?j=e.slice(n+5):-1<(n=e.indexOf("ucbrowser/"))&&-1<(n=(j=e.slice(n+10)).indexOf(" "))&&(j=j.slice(0,n)),G=!0):M?(-1<(n=e.indexOf("version/"))?j=e.slice(n+8):-1<(n=e.indexOf("opr/"))&&(j=e.slice(n+4)),G=!0):m?(-1<(n=e.indexOf("browserng/"))&&(j=e.slice(n+10)),G=!0):p?(-1<(n=e.indexOf("iemobile/"))&&(j=e.slice(n+9)),G=!0):B?(-1<(f=e.indexOf("chrome/"))?-1<(n=(j=e.slice(f+7)).indexOf(" "))&&(j=j.slice(0,n)):-1<(f=e.indexOf("crios/"))&&-1<(n=(j=e.slice(f+6)).indexOf(" "))&&(j=j.slice(0,n)),G=!0,-1<(n=j.indexOf("."))&&(n=j.slice(0,n))<27&&(G=!1)):y&&(-1<(r=e.indexOf("huaweibrowser"))&&-1<(n=(j=e.slice(r+14)).indexOf(" "))&&(j=j.slice(0,n)),G=!0),(W||O)&&(i.documentMode?V=i.documentMode:(V=5,i.compatMode&&"CSS1Compat"==i.compatMode&&(V=7))),(S||w)&&(t=!0,S&&(n=e.match(/mac os x (\d+)(_|\.)(\d+)/))&&3<n.length&&(10==n[1]&&n[3]<14||n[1]<10)&&(t=!1)),{bWin:D,bMac:S,bLinux:w,bMobile:_,bPad:g,bChromeOS:a,bHarmonyOS:o,bArm64:v,bMips64:I,bEmbed:b,bAndroid:s,biPhone:u,biPad:c,bWin64:T,bWOW64:C,bOSx64:t,bIE:O,bEdge:W,bChrome:B,bFirefox:F,bSafari:E,bOpera:M,bNexus:d,bUC:l,b360SE:P,bMaxthon:A,bTencentTraveler:x,bTheWorld:R,bMetaSr:k,bAvant:L,bHuaWeiBrowser:y,bGecko:U,bHTML5Edition:G,strBrowserVersion:j,IEMode:V}},function(e){var t,r,i=e.getLogger(),o=e.isDef,a=e.each,s={"&amp;":"&","&gt;":">","&lt;":"<","&#x60;":"`","&#x2F;":"/","&quot;":'"',"&#x27;":"'"},u={},c=/[\-#$\^*()+\[\]{}|\\,.?\s]/g;function l(e){var t=C(e);return null==e||"object"!==t&&"function"!==t}function d(e){return encodeURIComponent(String(e))}a(s,(function(e,t){u[e]=t})),e.mix(e,{urlEncode:d,urlDecode:function(e){return decodeURIComponent(e.replace(/\+/g," "))},fromUnicode:function(e){return e.replace(/\\u([a-f\d]{4})/gi,(function(e,t){return String.fromCharCode(parseInt(t,16))}))},escapeHtml:function(e){return(e+"").replace(function(){if(t)return t;var e="";return a(s,(function(t){e+=t+"|"})),e=e.slice(0,-1),t=new RegExp(e,"g")}(),(function(e){return u[e]}))},escapeRegExp:function(e){return e.replace(c,"\\$&")},unEscapeHtml:function(e){return e.replace(function(){if(r)return r;var e="";return a(u,(function(t){e+=t+"|"})),e+="&#(\\d{1,5});",r=new RegExp(e,"g")}(),(function(e,t){return s[e]||String.fromCharCode(+t)}))},param:function(t,n,r,i){n=n||"&",r=r||"=",e.isUndef(i)&&(i=!0);var s=[];return a(t,(function(t,u){var c=d(u);l(t)?(s.push(c),o(t)&&s.push(r,d(t+"")),s.push(n)):e.isArray(t)&&t.length&&a(t,(function(e){l(e)&&(s.push(c,i?d("[]"):""),o(e)&&s.push(r,d(e+"")),s.push(n))}))})),s.pop(),s.join("")},unparam:function(t,r,o){if(!e.isString(t)||!(t=e.trim(t)))return{};o=o||"=";for(var a,s,u,c={},l=e.urlDecode,d=t.split(r=r||"&"),h=0,g=d.length;h<g;++h){if(-1===(a=e.indexOf(o,d[h])))s=l(d[h]),u=void 0;else{s=l(d[h].substring(0,a)),u=d[h].substring(a+1);try{u=l(u)}catch(n){i.error("decodeURIComponent error : "+u),i.error(n)}e.endsWith(s,"[]")&&(s=s.substring(0,s.length-2))}s in c?e.isArray(c[s])?c[s].push(u):c[s]=[c[s],u]:c[s]=u}return c}})}(le.Lib),function(e){var t=/^(\/?)([\s\S]+\/(?!$)|\/)?((?:\.{1,2}$|[\s\S]+?)?(\.[^.\/]*)?)$/;function n(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r];i&&"."!==i&&(".."===i?n.length&&".."!==n[n.length-1]?n.pop():t&&n.push(".."):n.push(i))}return n}var r=e.Path={resolve:function(){for(var t,r="",i=arguments,o=!1,a=i.length-1;0<=a&&!o;a--)e.isString(t=i[a])&&t&&(r=t+"/"+r,o="/"===t.charAt(0));return(o?"/":"")+n(e.filter(r.split("/"),(function(e){return!!e})),!o).join("/")||"."},normalize:function(t){var r="/"===t.charAt(0),i="/"===t.slice(-1);return(t=(t=n(e.filter(t.split("/"),(function(e){return!!e})),!r).join("/"))||r?t:".")&&i&&(t+="/"),(r?"/":"")+t},join:function(){var t=e.makeArray(arguments);return r.normalize(e.filter(t,(function(t){return t&&e.isString(t)})).join("/"))},relative:function(t,n){t=r.normalize(t),n=r.normalize(n);for(var i=e.filter(t.split("/"),(function(e){return!!e})),o=[],a=e.filter(n.split("/"),(function(e){return!!e})),s=Math.min(i.length,a.length),u=0;u<s&&i[u]===a[u];u++);for(t=u;u<i.length;)o.push(".."),u++;return(o=o.concat(a.slice(t))).join("/")},basename:function(e,n){var r;return r=(e=e.match(t)||[])[3]||"",n&&r&&r.slice(-1*n.length)===n?r.slice(0,-1*n.length):r},dirname:function(e){var n=(e=e.match(t)||[])[1]||"";return e=e[2]||"",n||e?n+(e=e&&e.substring(0,e.length-1)):"."},extname:function(e){return(e.match(t)||[])[4]||""}}}(le.Lib),function(e){function t(t){t._queryMap||(t._queryMap=e.unparam(t._query))}var n=function(){function n(e){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");this._query=e||""}var r,i;return r=n,(i=[{key:"clone",value:function(){return new n(this.toString())}},{key:"reset",value:function(e){return this._query=e||"",this._queryMap=null,this}},{key:"count",value:function(){var n=0;return t(this),e.each(this._queryMap,(function(t){e.isArray(t)?n+=t.length:n++})),n}},{key:"has",value:function(n){var r;return t(this),r=this._queryMap,n?n in r:!e.isEmptyObject(r)}},{key:"get",value:function(e){var n;return t(this),n=this._queryMap,e?n[e]:n}},{key:"keys",value:function(){return t(this),e.keys(this._queryMap)}},{key:"set",value:function(r,i){var o;return t(this),o=this._queryMap,e.isString(r)?this._queryMap[r]=i:(r instanceof n&&(r=r.get()),e.each(r,(function(e,t){o[t]=e}))),this}},{key:"remove",value:function(e){return t(this),e?delete this._queryMap[e]:this._queryMap={},this}},{key:"add",value:function(r,i){var o,a,s=this;return e.isString(r)?(t(s),a=(o=s._queryMap)[r],a=e.isUndef(a)?i:[].concat(a).concat(i),o[r]=a):(r instanceof n&&(r=r.get()),e.each(r,(function(e,t){s.add(t,e)}))),s}},{key:"toString",value:function(n){return t(this),e.param(this._queryMap,void 0,void 0,n)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),n}();e.uriQuery=n}(le.Lib),function(e){var t=e.uriQuery,n=e.each,r=e.Path,i=e.getLogger(),o=/[#\/\?@]/g,a=/[#\?]/g,s=/[#@]/g,u=/#/g,c={scheme:1,userInfo:2,hostname:3,port:4,path:5,query:6,fragment:7},l=new RegExp("^(?:([\\w\\d+.-]+):)?(?://(?:([^/?#@]*)@)?([\\w\\d\\-\\u0100-\\uffff.+%]*|\\[[^\\]]+\\])(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function d(e,t){return e.toLowerCase()===t.toLowerCase()}function h(e,t){return encodeURI(e).replace(t,(function(e){return"%"+(1===(e=e.charCodeAt(0).toString(16)).length?"0"+e:e)}))}var g=function(){function g(r){if(!(this instanceof g))throw new TypeError("Cannot call a class as a function");if(r instanceof g)return e.clone(r);var o=this;return e.mix(o,{scheme:"",userInfo:"",hostname:"",port:"",path:"",query:"",fragment:""}),r=g.getComponents(r),n(r,(function(n,r){if(n=n||"","query"===r)o.query=new t(n);else{try{n=e.urlDecode(n)}catch(m){i.error(m+"urlDecode error : "+n)}o[r]=n}})),o}var f,m,p;return f=g,p=[{key:"getComponents",value:function(e){var t=(e=e||"").match(l)||[],r={};return n(c,(function(e,n){r[n]=t[e]})),r}}],(m=[{key:"clone",value:function(){var e=new g,t=this;return n(c,(function(n,r){e[r]=t[r]})),e.query=e.query.clone(),e}},{key:"resolve",value:function(t){e.isString(t)&&(t=new g(t));var i,o=0,a=this.clone();return n(["scheme","userInfo","hostname","port","path","query","fragment"],(function(n){var s;"path"===n?o?a[n]=t[n]:(s=t.path)&&(o=1,e.startsWith(s,"/")||(a.hostname&&!a.path?s="/"+s:a.path&&-1!==(i=a.path.lastIndexOf("/"))&&(s=a.path.slice(0,i+1)+s)),a.path=r.normalize(s)):"query"===n?(o||t.query.toString())&&(a.query=t.query.clone(),o=1):(o||t[n])&&(a[n]=t[n],o=1)})),a}},{key:"getScheme",value:function(){return this.scheme}},{key:"setScheme",value:function(e){return this.scheme=e,this}},{key:"getHostname",value:function(){return this.hostname}},{key:"setHostname",value:function(e){return this.hostname=e,this}},{key:"setUserInfo",value:function(e){return this.userInfo=e,this}},{key:"getUserInfo",value:function(){return this.userInfo}},{key:"setPort",value:function(e){return this.port=e,this}},{key:"getPort",value:function(){return this.port}},{key:"setPath",value:function(e){return this.path=e,this}},{key:"getPath",value:function(){return this.path}},{key:"setQuery",value:function(n){return e.isString(n)&&(e.startsWith(n,"?")&&(n=n.slice(1)),n=new t(h(n,s))),this.query=n,this}},{key:"getQuery",value:function(){return this.query}},{key:"getFragment",value:function(){return this.fragment}},{key:"setFragment",value:function(t){return e.startsWith(t,"#")&&(t=t.slice(1)),this.fragment=t,this}},{key:"isSameOriginAs",value:function(e){return d(this.hostname,e.hostname)&&d(this.scheme,e.scheme)&&d(this.port,e.port)}},{key:"toString",value:function(t){var n,i,s=[],c=this;return(n=c.scheme)&&(s.push(h(n,o)),s.push(":")),(n=c.hostname)&&(s.push("//"),(i=c.userInfo)&&(s.push(h(i,o)),s.push("@")),s.push(encodeURIComponent(n)),(i=c.port)&&(s.push(":"),s.push(i))),(i=c.path)&&(n&&!e.startsWith(i,"/")&&(i="/"+i),i=r.normalize(i),s.push(h(i,a))),(n=c.query.toString.call(c.query,t))&&(s.push("?"),s.push(n)),(i=c.fragment)&&(s.push("#"),s.push(h(i,u))),s.join("")}}])&&w(f.prototype,m),p&&w(f,p),Object.defineProperty(f,"prototype",{writable:!1}),g}();e.Uri=g}(le.Lib),fe=le).Lib).win,fe._promise_ver&&fe.isNumber(fe._promise_ver)&&20220622<=fe._promise_ver||(fe._promise_ver=20220622,fe.isFunction(de.__zone_symbol__Promise)&&(fe.nativePromise=de.__zone_symbol__Promise),fe.Promise=q&&q.Promise?q.Promise:de&&de.Promise?de.Promise:T,fe.nativePromise||(fe.nativePromise=fe.Promise)),(ee=($=le).Lib)._defaultAgent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36",ee._defaultPlatform="Win64",te=ee.Promise||window.Promise,ee.getNavInfoSync=function(){var e,t=ee.win,n=ee.preNavInfo.uaBrands,r="https:"===(i=t.location.protocol),i="https:"!==i&&"http:"!==i,o=!1,a=!0,s=!0,u=0,c=0,l=!1,d=!1,h=!1,g=!1,f=!1,m=!1,p=!1,_=!1,v=!1,I=!1,y=!1,b=!1;if(ee.preNavInfo.bUseUserAgent)$.navInfo?w=$.navInfo:(T=navigator,w=ee.getNavInfoByUserAgent(T.userAgent,T.platform),$.navInfo=w),s=w.bGecko,l=w.bWin,d=w.bMac,h=w.bLinux,f=w.bAndroid,g=w.bChromeOS,m=w.bHarmonyOS,p=w.bMobile,_=w.bChrome,v=w.bEdge,I=w.bOpera,y=w.bFirefox,b=w.bSafari,e=+w.strBrowserVersion,(o=w.bIE)&&(u=parseInt(e),c=w.IEMode),a=w.bHTML5Edition;else{var D,T="",S=0,w=navigator.userAgentData;for(w.platform&&""!=w.platform&&(T=w.platform.toLowerCase(),p=w.mobile,S=n.length),D=0;D<S;D++){var C=n[D].brand.toLowerCase();if(0<=C.indexOf("chrome")){_=!0,e=n[D].version;break}if(0<=C.indexOf("edge")){v=!0,e=n[D].version;break}if(0<=C.indexOf("opera")){I=!0,e=n[D].version;break}}_||v||I||(_=!0,e="100"),d=0<=T.indexOf("mac"),g=0<=T.indexOf("chromeos"),l="windows"==T,h="linux"==T,f="android"==T,m=0<=T.indexOf("harmony")}return{host:t,bSSL:r,bFileSystem:i,bIE:o,bGecko:s,IEVersion:u,IEMode:c,bHTML5Edition:a,bWin:l,bMac:d,bLinux:h,bAndroid:f,bChromeOS:g,bHarmonyOS:m,bMobile:p,bChrome:_,bEdge:v,bOpera:I,bFirefox:y,bSafari:b,strBrowserVersion:e}},ee.getNavInfoByUAData=function(e){var t=function(e){var t=$.navInfoSync,n=e.platform.toLowerCase(),r=e.architecture.toLowerCase(),i=(e="64"==e.bitness,-1<r.indexOf("arm")),o=(r=-1<r.indexOf("mips"),navigator.maxTouchPoints||0),a=t.bMobile,s=!1,u=!1;return/win32|win64|windows/.test(n)||((s=/android/g.test(n))?a=!0:/linux/.test(n)||(/iphone/g.test(n)?a=!0:"macintel"==n&&1<o&&(u=!0))),{bWin:t.bWin,bMac:t.bMac,bLinux:t.bLinux,bAndroid:s,bMobile:a,bPad:u,bChromeOS:t.bChromeOS,bHarmonyOS:t.bHarmonyOS,bArm64:i,bMips64:r,bEmbed:!1,bOSx64:e,bIE:!1,bEdge:t.bEdge,bChrome:t.bChrome,bFirefox:t.bFirefox,bSafari:t.bSafari,bOpera:t.bOpera,bGecko:!0,bHuaWeiBrowser:!1,bHTML5Edition:!0,strBrowserVersion:t.strBrowserVersion,IEMode:0}};return e?te.resolve((function(){return t(e)})):navigator.userAgentData.getHighEntropyValues(["platform","platformVersion","architecture","bitness"]).then(t)},ee.asyncGetNavInfo=function(){if($.navInfo)return te.resolve($.navInfo);var e=navigator;if("userAgentData"in e){var t=navigator.userAgentData;if(t.platform&&""!=t.platform){var n=[];if("brands"in t&&ee.isArray(t.brands)&&0<t.brands.length?n=t.brands:"uaList"in t&&ee.isArray(t.uaList)&&0<t.uaList.length&&(n=t.uaList),0<n.length)return ee.getNavInfoByUAData().then((function(e){return $.navInfo=e}))}}return $.navInfo="userAgent"in e?ee.getNavInfoByUserAgent(e.userAgent,e.platform):ee.getNavInfoByUserAgent(ee._defaultAgent,ee._defaultPlatform),te.resolve($.navInfo)},ee.getNavInfo=function(){if($.navInfo)return $.navInfo;var e=navigator;if("userAgentData"in e){var t=navigator.userAgentData;if(t.platform&&""!=t.platform){var n=[];if("brands"in t&&ee.isArray(t.brands)&&0<t.brands.length?n=t.brands:"uaList"in t&&ee.isArray(t.uaList)&&0<t.uaList.length&&(n=t.uaList),0<n.length)return ee.getNavInfoByUAData().then((function(e){$.navInfo=e})),!1}}return $.navInfo="userAgent"in e?ee.getNavInfoByUserAgent(e.userAgent,e.platform):ee.getNavInfoByUserAgent(ee._defaultAgent,ee._defaultPlatform),$.navInfo},$.navInfoSync=ee.getNavInfoSync();var fe=(de=le).Lib,me=!1,pe=!1;if(!((de=de.navInfoSync).bEdge&&de.bFileSystem||de.bIE&&de.IEVersion<8))try{pe=window.localStorage,me=!!pe}catch(ye){pe=!1}fe.LS={isSupportLS:function(){return me},item:function(e,t,n){var r=null;return this.isSupportLS()&&null!==(r=t?(pe.setItem(e,t),t):pe.getItem(e))?r:n},removeItem:function(e){return!!this.isSupportLS()&&(pe.removeItem(e),!0)}},function(e){var t=e.Lib,n=t.win,r=t.doc,i=e.navInfoSync,a=0,s=[],u=/\S/,c="DOMContentLoaded",l="readystatechange",d="complete",h=(m=!(!r||!r.addEventListener))?function(e,t,n){e.addEventListener(t,n,!1)}:function(e,t,n){e.attachEvent("on"+t,n)},g=m?function(e,t,n){e.removeEventListener(t,n,!1)}:function(e,t,n){e.detachEvent("on"+t,n)};if(t.mix(t,{isWindow:function(e){return null!=e&&e==e.window},globalEval:function(e){e&&u.test(e)&&(n.execScript?n.execScript(e):n.eval.call(n,e))},domReady:function(e){if(a)try{e(t)}catch(o){t.log(o.stack||o,"error"),setTimeout((function(){throw o}),0)}else s.push(e);return this}}),t.ready=t.domReady,t.checkDomReady=function(){a||(a=1,t.asyncGetNavInfo().then((function(e){r&&!i.nodejs&&g(n,"load",t.checkDomReady),function(){for(var e=0;e<s.length;e++)try{s[e](t)}catch(o){t.log(o.stack||o,"error"),setTimeout((function(){throw o}),0)}}()})))},r&&r.readyState!==d)if(h(n,"load",t.checkDomReady),m)h(r,c,(function e(){g(r,c,e),t.checkDomReady()}));else{h(r,l,(function e(){r.readyState===d&&(g(r,l,e),t.checkDomReady())}));var f,m,p=(m=r&&r.documentElement)&&m.doScroll;try{f=null===n.frameElement}catch(K){f=!1}p&&f&&function n(){try{p("left"),setTimeout(t.checkDomReady,30)}catch(e){setTimeout(n,40)}}()}else t.checkDomReady();if(e.navInfoSync.bIE)try{r.execCommand("BackgroundImageCache",!1,!0)}catch(J){}}(le),Z="none",(Q=le.Lib).mix(Q,{get:function(e){return Q.doc.getElementById(e)},hide:function(e){(e=Q.isString(e)?Q.get(e):e)&&(e.style.display=Z)},show:function(e){(e=Q.isString(e)?Q.get(e):e)&&(e.style.display="")},toggle:function(e){(e=Q.isString(e)?Q.get(e):e)&&(e.style.display=e.style.display===Z?"":Z)},empty:function(e){if(e)for(;e.firstChild;)e.removeChild(e.firstChild)}}),(de=(X=le).Lib).colorStrToInt=function(e){var t,n="0x";if(/^(rgb|RGB)/.test(e)){for(var r=e.replace(/[^\d,.]/g,"").split(","),i=0;i<3;++i)n+=t=1==(t=Number(r[i]).toString(16)).length?"0"+t:t;n+=4==r.length?t=1==(t=Math.round(255*Number(r[i])).toString(16)).length?"0"+t:t:"ff"}else if("transparent"==e)n+="00000000";else if(/^#[0-9a-fA-f]{6}$/.test(e))n+=e.replace(/#/,"")+"ff";else if(/^#[0-9a-fA-f]{3}$/.test(e)){for(i=0;i<3;++i)n+=e[i]+e[i];n+="ff"}else n="-1";return Number(n)},de.IntToColorStr=function(e){if(4294967295<e||e<0)return null;var t;if(X.navInfoSync.bHTML5Edition)t="rgba("+Math.floor(e/16777216)+","+Math.floor(e/65536)%256+","+Math.floor(e/256)%256+","+e%256/255+")";else if(e%256==0)t="transparent";else{for(t=Math.floor(e/256).toString(16);6!=t.length;)t="0"+t;t="#"+t}return t},z=(H=le).Lib,fe=(K=z.doc)&&K.documentElement,J=K.getElementsByTagName("head")[0]||fe,Y=K.createElement("script").readyState?function(e,t){var n=e.onreadystatechange;e.onreadystatechange=function(){var r=e.readyState;"loaded"===r||"complete"===r?(e.onreadystatechange=null,n&&n(),t.call(this,!0)):"loading"!==r&&t.call(this,!1)}}:function(e,t){e.addEventListener("load",t,!1),e.addEventListener("error",t,!1)},z.scriptOnload=Y,z.getScript=function(e,t,n){var r;if(z.isFunction(n)||(n=function(){}),z.isString(e)&&""!=e)return r=K.createElement("script"),e=["",e].join(""),r.src=e,t&&(r.async=!0),r.charset="utf-8",Y(r,n),J.insertBefore(r,J.firstChild),r;n()},z.getScripts=function(e,t,n){var r,i;z.isArray(e)?(i=function(e){e?r--:n(),r<=0&&n("ok")},(r=e.length)<=0?n("ok"):z.each(e,(function(e){z.getScript(e,t,i)}))):n()},z.getCss=function(e,t){var n;if(z.isFunction(t)||(t=!1),z.isString(e)&&""!=e)return(n=K.createElement("link")).href=e,n.rel="stylesheet",n.async=!0,t&&Y(n,t),J.insertBefore(n,J.firstChild),n;t&&t()},z.getAllCss=function(e,t){var n,r;z.isArray(e)?(n=e.length,r=function(e){e?n--:t(),n<=0&&t("ok")},z.each(e,(function(e){z.getCss(e,r)}))):t()},z.addScript=function(e){var t,n=e.body;z.isString(n)&&""!=n&&((t=K.createElement("script")).charset="utf-8",H.navInfoSync.bIE?t.text=n:t.appendChild(K.createTextNode(n)),t.language=e.language?e.language:"javascript",t.type=e.type?e.type:"text/javascript",J.insertBefore(t,J.firstChild))},z.addJS=function(e){z.addScript({body:e})},z.addVBS=function(e){z.addScript({body:e,language:"vbscript",type:"text/vbscript"})},function(e){var t,n=e.Lib,r=e.navInfoSync,i=r.bIE&&parseInt(r.IEVersion)<=9,o=(e=r.bIE&&parseInt(r.IEVersion)<=10,n.win),a=n.each,s=new n.Uri(location.href),u=s&&/^(?:about|app|app\-storage|.+\-extension|file|widget)$/.test(s.getScheme()),c=function(){try{return new o.XMLHttpRequest}catch(e){}},l=!(u||!o.XMLHttpRequest)&&"withCredentials"in(c()||[]),d=o.ActiveXObject?function(e){return!i&&!u&&c()||function(){try{var t=!1;return a(["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.3.0","Msxml3.XMLHTTP"],(function(e){try{return t=new o.ActiveXObject(e)}catch(u){n.error("new xhr error: "+u.message)}})),t}catch(e){}}()}:c,h=/^(?:GET|HEAD)$/,g=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,f={xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},m=t,p=(q&&q.fetch?q:o).fetch,_=(e&&(m=n.noop),function(e,t,n){return Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")})));function v(e){var t;if(e&&n.isString(e.url))return(t=new _).sendInternal(e),t;n.log("the url is error.")}n.mix(_.prototype,{url:!1,onSuccess:!1,onError:!1,onComplete:!1,method:"GET",async:!0,xhrFields:!1,mimeType:!1,username:!1,password:!1,data:!1,dataType:"text",headers:!1,contentType:"application/x-www-form-urlencoded; charset=UTF-8",beforeSend:!1,afterSend:!1,timeout:0,cache:!0,crossDomain:!1,retry:0,setRequestHeader:function(e,t){return this.headers[e]=t,this},getAllResponseHeaders:function(){return 2===this.state?this.responseHeadersString:null},getNativeXhr:function(){return this.nativeXhr},getResponseHeader:function(e){var t,n;if(e=e.toLowerCase(),2===this.state){if(!(n=this.responseHeaders))for(n=this.responseHeaders={};t=g.exec(this.responseHeadersString);)n[t[1].toLowerCase()]=t[2];t=n[e]}return void 0===t?null:t},overrideMimeType:function(e){return this.state||(this.mimeType=e),this},abort:function(e){var t=this;return e=e||"abort",t.state=3,t.status=0,t.statusText=e,t.nativeXhr&&t.nativeXhr.abort(),t._callback(),t},_ioReady:function(e,t){var r=this,i=!1;if(2!==r.state&&3!==r.state){1===r.state&&(r.state=2),r.readyState=4,200<=e&&e<300||304===e?(t=304===e?"not modified":"success",i=!0):e<0&&(e=0);try{200<=e&&r.handleResponseData()}catch(g){n.error(g.stack||g,"error"),t=g.message||"parser error"}if((e<200||!i)&&0<r.retry)return r.retry=r.retry-1,void setTimeout((function(){r.sendInternal()}),200);r.status=e,r.statusText=t,r._callback(i)}},_callback:function(e){var t=this,r=t.timeoutTimer;r&&(clearTimeout(r),t.timeoutTimer=0),a([e?t.onSuccess:t.onError,t.onComplete],(function(e){n.isFunction(e)&&e.apply(t.context,[t.responseData,t.statusText,t])})),t.responseData=null},handleResponseData:function(){var e=this,t=e.dataType,r=e.nativeXhr;if("blob"===t||"arraybuffer"===t)if(i){if("responseBody"in r)u=o.dsVbsBinGetLength(a=r.responseBody),s=new VBArray(o.dsVbsBinGetBytes(a,0,u)).toArray();else for(var a,s=[],u=(a=r.responseText).length,c=0;c<u;++c)s.push(255&a.charCodeAt(c));a=null}else s=o.Blob?r.response:"responseBody"in r?r.responseBody:r.responseText;else if("json"==t)s=r.responseType&&"json"==r.responseType.toLowerCase()?r.response:r.responseText?n.parse(r.responseText):{};else if("user-defined"===t)s=void 0!==r.response?r.response:r.responseText;else{e.responseText=s=r.responseText||"";try{var l=r.responseXML;l&&l.documentElement&&(e.responseXML=l)}catch(m){}}e.responseData=s},sendInternal:function(e){var t,s,u,c,g,p=this,_=(e=p._setup(e)).method;if(n.isString(_)&&(_=_.toUpperCase()),s=e.contentType,t=e.dataType,c=e.mimeType,n.isString(g=e.url)&&(p.nativeXhr=u=d(e.crossDomain),u)){try{if(p.state=1,e.username?u.open(_,g,e.async,e.username,e.password):u.open(_,g,e.async),(e.async||r.bIE)&&t&&"user-defined"!=t&&"responseType"in u)try{u.responseType=t}catch(m){}}catch(o){return void(p.state<2?(n.error(o.stack||o,"error"),p._ioReady(-1,"open error: "+(n.isNumber(o.number)?"("+o.number+")":"")+(o.message||""))):n.error(o))}"withCredentials"in(_=e.xhrFields||{})&&(l||delete _.withCredentials),a(_,(function(e,t){try{u[t]=e}catch(m){n.error(m)}})),c&&u.overrideMimeType&&u.overrideMimeType(c),!1===(g=e.headers||{})["X-Requested-With"]&&delete g["X-Requested-With"],"setRequestHeader"in u&&(s&&u.setRequestHeader("Content-Type",e.contentType),u.setRequestHeader("Accept",t&&f[t]?f[t]+("*"===t?"":", */*; q=0.01"):f["*"]),a(g,(function(e,t){u.setRequestHeader(t,e)}))),e.cache||(u.setRequestHeader("If-Modified-Since","0"),u.setRequestHeader("Cache-Control","no-cache")),c=(_=!h.test(e.method))&&e.data||null,_&&i&&(c=e.data),e.async&&0<e.timeout&&(e.timeout<300&&(e.timeout=300),p.timeoutTimer=setTimeout((function(){p.abort("timeout")}),e.timeout));try{if(p.state=1,n.isFunction(p.beforeSend)&&!1===p.beforeSend(u,p))return void p.abort("cancel");u.send(c),c=null,e.data=null,n.isFunction(p.afterSend)&&p.afterSend(p)}catch(m){p.state<2?(n.error(m.stack||m,"error"),p._ioReady(-1,"send error: "+(m.message||""))):n.error(m)}e.async&&4!==u.readyState?u.onreadystatechange=function(){p._xhrCallback()}:p._xhrCallback()}},_xhrCallback:function(e,t){var r=this.nativeXhr;try{if(4===r.readyState||t)if(r.onreadystatechange=m,t)4!==r.readyState&&r.abort();else{this.responseHeadersString=r.getAllResponseHeaders();var i,o=r.status;try{i=r.statusText}catch(p){n.error("xhr statusText error: "),n.error(p),i=""}this._ioReady(o,i)}}catch(p){n.error(p.stack||p,"error"),r.onreadystatechange=m,t||this._ioReady(-1,p.message||"process error")}},_setup:function(e){var t,r,i,o,a=this;if(e){for(r in a.context=e.context,delete e.context,e instanceof _&&(e=e.config),o=(a.config=e).url,o=n.startsWith(o,"http://")||n.startsWith(o,"https://")?new n.Uri(o):(n.startsWith(o,"//")&&(e.url=o="http:"+o),s.resolve(o)),t=e.dataType?e.dataType.toLowerCase():"text",e.dataType=t,e.method=e.method?e.method.toUpperCase():"GET","crossDomain"in e||(e.crossDomain=!o.isSameOriginAs(s)),i=e.headers)n.isUndefined(i[r])&&delete i[r];n.mix(a,e)}return a.state=1,a}}),n.mix(n,{ajax:v,io:{get:function(e,t,n,r){return v({method:"GET",url:e,onSuccess:t,onError:n,dataType:r})},post:function(e,t,n,r,i){return v({method:"POST",data:t,url:e,onSuccess:n,onError:r,dataType:i})},put:function(e,t,n,r,i){return v({method:"PUT",data:t,url:e,onSuccess:n,onError:r,dataType:i})}}}),p?n.fetch=function(e,t){var n="text",r=!1;return t&&(t.dataType&&(n=t.dataType),t.fetchRaw&&(r=!0)),e=p(e,t).then((function(e){if(e.ok)return e;throw{httpCode:e.status,errorString:["HTTP process error: ",e.statusText," (",e.status,")."].join("")}})),r?e:e.then("blob"==n?function(e){return e.blob()}:"json"==n?function(e){return e.json()}:"arraybuffer"==n?function(e){return e.arrayBuffer()}:function(e){return e.text()})}:(i&&n.addVBS(["Function dsVbsBinGetAt(strBinary,iOffset)\r\n"," dsVbsBinGetAt=AscB(MidB(strBinary,iOffset+1,1))\r\n","End Function\r\n","Function dsVbsBinGetBytes(strBinary,iOffset,iLength)\r\n"," Dim aBytes()\r\n"," ReDim aBytes(iLength-1)\r\n"," For i=0 To iLength-1\r\n","  aBytes(i)=dsVbsBinGetAt(strBinary,iOffset+i)\r\n"," Next\r\n"," dsVbsBinGetBytes=aBytes\r\n","End Function\r\n","Function dsVbsBinGetLength(strBinary)\r\n"," dsVbsBinGetLength=LenB(strBinary)\r\n","End Function"].join("")),n.fetch=function(e,r){return new(n.nativePromise||window.Promise)((function(o,s){var u={url:e,onSuccess:function(e,t,n){o(e)},onError:function(e,t,n){s({httpCode:n.status,errorString:t})},dataType:"text",method:t,data:t,headers:t,contentType:t,mimeType:t},c=!1;r&&(r.method&&(u.method=r.method),r.body&&(u.data=r.body),r.headers&&(u.headers||(u.headers={}),a(r.headers,(function(e,t){"content-type"==t.toLowerCase()&&(c=!0),u.headers[t]=e}))),r.dataType&&(u.dataType=r.dataType),r.contentType&&(u.contentType=r.contentType)),c&&(u.contentType=!1),"blob"==u.dataType&&i&&(u.mimeType="text/plain; charset=x-user-defined"),n.ajax(u)}))})}(le),function(e){var t=e.Lib;t.obj={customEvent:{fire:function(e){var n,r=this;r.exec=r.exec||{},e=e.toLowerCase(),n=Array.prototype.slice.call(arguments,1),t.each(r.exec[e]||[],(function(e){var i=e.f;e=e.c||r;try{i.apply(e,n)}catch(u){t.log(u)}}))},on:function(e,t,n){var r=this;r.exec=r.exec||{},e=e.toLowerCase(),r.exec[e]=r.exec[e]||[],r.exec[e].push({f:t,c:n})},off:function(e,t,n){var r=this.exec;if(r)if(e)if(e=e.toLowerCase(),t)for(var i=r[e]||[],o=i.length-1;0<=o;o--)i[o]===t&&i.splice(o,1);else r[e]=null;else this.exec=null}}}}(le),j=(U=le).Lib,G=function(e){return U.navInfoSync.bGecko&&"mousewheel"===e?"DOMMouseScroll":e},j.mix(j,{addEventListener:function(e,t,n){t=G(t),e&&e.addEventListener(t,n,!1)},removeEventListener:function(e,t,n){t=G(t),e&&e.removeEventListener(t,n,!1)},stopPropagation:function(e){(e=e||j.win.event).preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.returnValue=!1,e.cancelBubble=!0},fireEvent:function(e,t){var n=j.win.document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent&&t.dispatchEvent(n)}}),de=(de=le).Lib,N={encodeChars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",decodeChars:[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1]},de.base64={UTF16ToUTF8:function(e){for(var t=[],n=e.length,r=0;r<n;r++){var i,o,a=e.charCodeAt(r);0<a&&a<=127?t.push(e.charAt(r)):128<=a&&a<=2047?(i=192|a>>6&31,o=128|63&a,t.push(String.fromCharCode(i),String.fromCharCode(o))):2048<=a&&a<=65535&&(i=224|a>>12&15,o=128|a>>6&63,a=128|63&a,t.push(String.fromCharCode(i),String.fromCharCode(o),String.fromCharCode(a)))}return t.join("")},UTF8ToUTF16:function(e){for(var t,n,r,i=[],o=e.length,a=0;a<o;a++)0==((t=e.charCodeAt(a))>>7&255)?i.push(e.charAt(a)):6==(t>>5&255)?(r=(31&t)<<6|63&(n=e.charCodeAt(++a)),i.push(String.fromCharCode(r))):14==(t>>4&255)&&(r=(255&(t<<4|(n=e.charCodeAt(++a))>>2&15))<<8|(3&n)<<6|63&e.charCodeAt(++a),i.push(String.fromCharCode(r)));return i.join("")},encode:function(e){for(var t,n,r,i=this.UTF16ToUTF8(e),o=[],a=0,s=i.length;a<s;){if(t=255&i.charCodeAt(a++),a==s){o.push(N.encodeChars.charAt(t>>2)),o.push(N.encodeChars.charAt((3&t)<<4)),o.push("==");break}if(n=i.charCodeAt(a++),a==s){o.push(N.encodeChars.charAt(t>>2)),o.push(N.encodeChars.charAt((3&t)<<4|(240&n)>>4)),o.push(N.encodeChars.charAt((15&n)<<2)),o.push("=");break}r=i.charCodeAt(a++),o.push(N.encodeChars.charAt(t>>2)),o.push(N.encodeChars.charAt((3&t)<<4|(240&n)>>4)),o.push(N.encodeChars.charAt((15&n)<<2|(192&r)>>6)),o.push(N.encodeChars.charAt(63&r))}return o.join("")},encodeArray:function(e){for(var t,n,r,i=[],o=0,a=e.length;o<a;){if(t=255&e[o++],o==a){i.push(N.encodeChars.charAt(t>>2)),i.push(N.encodeChars.charAt((3&t)<<4)),i.push("==");break}if(n=255&e[o++],o==a){i.push(N.encodeChars.charAt(t>>2)),i.push(N.encodeChars.charAt((3&t)<<4|(240&n)>>4)),i.push(N.encodeChars.charAt((15&n)<<2)),i.push("=");break}r=255&e[o++],i.push(N.encodeChars.charAt(t>>2)),i.push(N.encodeChars.charAt((3&t)<<4|(240&n)>>4)),i.push(N.encodeChars.charAt((15&n)<<2|(192&r)>>6)),i.push(N.encodeChars.charAt(63&r))}return i.join("")},decode:function(e,t){for(var n,r,i,o,a=[],s=0,u=e.length;s<u;){for(;n=N.decodeChars[255&e.charCodeAt(s++)],s<u&&-1==n;);if(-1==n)break;for(;r=N.decodeChars[255&e.charCodeAt(s++)],s<u&&-1==r;);if(-1==r)break;a.push(t?n<<2|(48&r)>>4:String.fromCharCode(n<<2|(48&r)>>4));do{if(61==(i=255&e.charCodeAt(s++)))return t?a:this.UTF8ToUTF16(a.join(""))}while(i=N.decodeChars[i],s<u&&-1==i);if(-1==i)break;a.push(t?(15&r)<<4|(60&i)>>2:String.fromCharCode((15&r)<<4|(60&i)>>2));do{if(61==(o=255&e.charCodeAt(s++)))return t?a:this.UTF8ToUTF16(a.join(""))}while(o=N.decodeChars[o],s<u&&-1==o);if(-1==o)break;a.push(t?(3&i)<<6|o:String.fromCharCode((3&i)<<6|o))}return t?a:this.UTF8ToUTF16(a.join(""))}},de.utf8={fromUTF16:function(e){for(var t,n=[],r=0,i=e.length;r<i;)1<=(t=e.charCodeAt(r))&&t<=127?n.push(e.charAt(r)):(2047<t?(n.push(String.fromCharCode(224|t>>12&15)),n.push(String.fromCharCode(128|t>>6&63))):n.push(String.fromCharCode(192|t>>6&31)),n.push(String.fromCharCode(128|t>>0&63))),r++;return n.join("")},toUTF16:function(e){for(var t,n,r,i=[],o=0,a=e.length;o<a;)switch((t=e.charCodeAt(o++))>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:i.push(e.charAt(o-1));break;case 12:case 13:n=e.charCodeAt(o++),i.push(String.fromCharCode((31&t)<<6|63&n));break;case 14:n=e.charCodeAt(o++),r=e.charCodeAt(o++),i.push(String.fromCharCode((15&t)<<12|(63&n)<<6|(63&r)<<0))}return i.join("")}},V=void 0!==q?q:e.g,(_e.prototype=new Error).name="InvalidCharacterError",de.btoa=V.btoa?function(e){return V.btoa(e)}:function(e){var t,n,r=String(e),i=0,o=N.encodeChars,a="";for(i=0,o=N.encodeChars,a="";r.charAt(0|i)||(o="=",i%1);a+=o.charAt(63&t>>8-i%1*8)){if(255<(n=r.charCodeAt(i+=.75)))throw new _e("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");t=t<<8|n}return a},de.atob=V.atob?function(e){return V.atob(e)}:function(e){var t,n,r=String(e).replace(/[=]+$/,""),i=0,o=0,a="";if(r.length%4==1)throw new _e("'atob' failed: The string to be decoded is not correctly encoded.");for(o=i=0,a="";n=r.charAt(o++);~n&&(t=i%4?64*t+n:n,i++%4)&&(a+=String.fromCharCode(255&t>>(-2*i&6))))n=N.encodeChars.indexOf(n);return a},B={queue:[],doNextStarted:!1,timer:null,pushToDo:function(e,t,n){B.queue.push({obj:e,method:t,args:n})},doNext:function(){if(!B.doNextStarted)return clearTimeout(B.timer),void(B.timer=null);if(0==B.queue.length)B.timer=setTimeout(B.doNext,500);else{var e=(n=B.queue[0]).obj,t=n.method,n=n.args;if(B.queue.splice(0,1),e&&O.isFunction(e[t])){var i,o,s=!1;2<n.length&&(o=n[n.length-1],O.isFunction(i=n[n.length-2])&&O.isFunction(o)&&(n[n.length-2]=function(){try{i.apply(e,arguments)}catch(n){}B.timer=setTimeout(B.doNext,0)},n[n.length-1]=function(){try{o.apply(e,arguments)}catch(n){}B.timer=setTimeout(B.doNext,0)},s=!0));try{e[t].apply(e,n)}catch(r){}s||(B.timer=setTimeout(B.doNext,0))}else if(null===e&&O.isFunction(t)){try{t.apply(null,n)}catch(a){}B.timer=setTimeout(B.doNext,0)}else O.log("not invoke a function: "+t),B.timer=setTimeout(B.doNext,0)}},start:function(){B.doNextStarted||(B.doNextStarted=!0,B.timer=setTimeout(B.doNext,0))},stop:function(){clearTimeout(B.timer),B.doNextStarted=!1,B.queue=[]}},(O=le.Lib).asyncQueue=B,function(e){e=e.Lib;var t,n={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function r(e,r){for(var i,o,a,s,u,c,l,d=1,h=e.length,g="",f=0;f<h;f++)if("string"==typeof e[f])g+=e[f];else if("object"===S(e[f])){if((a=e[f]).keys)for(i=r[d],o=0;o<a.keys.length;o++){if(null==i)throw new Error(t('[sprintf] Cannot access property "%s" of undefined value "%s"',a.keys[o],a.keys[o-1]));i=i[a.keys[o]]}else i=a.param_no?r[a.param_no]:r[d++];if(n.not_type.test(a.type)&&n.not_primitive.test(a.type)&&i instanceof Function&&(i=i()),n.numeric_arg.test(a.type)&&"number"!=typeof i&&isNaN(i))throw new TypeError(t("[sprintf] expecting number but found %T",i));switch(n.number.test(a.type)&&(c=0<=i),a.type){case"b":i=parseInt(i,10).toString(2);break;case"c":i=String.fromCharCode(parseInt(i,10));break;case"d":case"i":i=parseInt(i,10);break;case"j":i=JSON.stringify(i,null,a.width?parseInt(a.width):0);break;case"e":i=a.precision?parseFloat(i).toExponential(a.precision):parseFloat(i).toExponential();break;case"f":i=a.precision?parseFloat(i).toFixed(a.precision):parseFloat(i);break;case"g":i=a.precision?String(Number(i.toPrecision(a.precision))):parseFloat(i);break;case"o":i=(parseInt(i,10)>>>0).toString(8);break;case"s":i=String(i),i=a.precision?i.substring(0,a.precision):i;break;case"t":i=String(!!i),i=a.precision?i.substring(0,a.precision):i;break;case"T":i=Object.prototype.toString.call(i).slice(8,-1).toLowerCase(),i=a.precision?i.substring(0,a.precision):i;break;case"u":i=parseInt(i,10)>>>0;break;case"v":i=i.valueOf(),i=a.precision?i.substring(0,a.precision):i;break;case"x":i=(parseInt(i,10)>>>0).toString(16);break;case"X":i=(parseInt(i,10)>>>0).toString(16).toUpperCase()}n.json.test(a.type)?g+=i:(!n.number.test(a.type)||c&&!a.sign?l="":(l=c?"+":"-",i=i.toString().replace(n.sign,"")),s=a.pad_char?"0"===a.pad_char?"0":a.pad_char.charAt(1):" ",u=a.width-(l+i).length,u=a.width&&0<u?function(e,t){if("_".repeat)return e.repeat(t);for(var n=0,r=[];n<t;n++)r.push(e);return r.join("")}(s,u):"",g+=a.align?l+i+u:"0"===s?l+u+i:u+l+i)}return g}var i=Object.create?Object.create(null):{};e.sprintf=t=function(e){return r(function(e){if(i[e])return i[e];for(var t,r=e,o=[],a=0;r;){if(null!==(t=n.text.exec(r)))o.push(t[0]);else if(null!==(t=n.modulo.exec(r)))o.push("%");else{if(null===(t=n.placeholder.exec(r)))throw new SyntaxError("[sprintf] unexpected placeholder");if(t[2]){a|=1;var s=[],u=t[2],c=[];if(null===(c=n.key.exec(u)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(s.push(c[1]);""!==(u=u.substring(c[0].length));)if(null!==(c=n.key_access.exec(u)))s.push(c[1]);else{if(null===(c=n.index_access.exec(u)))throw new SyntaxError("[sprintf] failed to parse named argument key");s.push(c[1])}t[2]=s}else a|=2;if(3===a)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");o.push({placeholder:t[0],param_no:t[1],keys:t[2],sign:t[3],pad_char:t[4],align:t[5],width:t[6],precision:t[7],type:t[8]})}r=r.substring(t[0].length)}return i[e]=o}(e),arguments)},e.vsprintf=function(e,n){return t.apply(null,[e].concat(n||[]))}}(le),L=(k=le.Lib).doc,k.Events={registedClass:[],registedObjs:[]},F=function(e){var t=e||window.event,n=!0;return k.each(k.Events.registedObjs,(function(e){k.each(k.Events.registedClass,(function(r){if(e instanceof r&&e.bFocus&&e.handlerKeyDown&&!(n=e.handlerKeyDown(t)))return!1}))})),n},k.ready((function(){k.addEventListener(L.documentElement,"keydown",F)})),k.mix(k,{getWheelDelta:function(e){var t,n=(e=e||window.event).wheelDelta;return n&&(t=n/120),(e=e.detail)?-(e%3==0?e/3:e):t}}),k.EnumMouseButton=W={LEFT:0,MIDDLE:1,RIGHT:2},k.detectButton=function(e){return null==(e=e||window.event).which?e.button<2?W.LEFT:4==e.button?W.MIDDLE:W.RIGHT:e.which<2?W.LEFT:2==e.which?W.MIDDLE:W.RIGHT},le.Lib.switchEvent=function(e){return e.which=null==(e=e||window.event).which?e.button<2?1:4==e.button?2:3:e.which<2?1:2==e.which?2:3,e},function(e){e.currentStyle=function(t,n){var r=e.win,i=r.doc;return t.currentStyle?t.currentStyle[n]:r.getComputedStyle?(n.replace(/([A-Z])/g,"-$1"),n.toLowerCase(),i.defaultView.getComputedStyle(t,null)[n]):null}}(le.Lib),function(e){var t=e.Lib,n=t.isString,r=t.each,i=Array.prototype.slice,o=" ",a=(e=e.navInfoSync).bIE&&e.IEMode<10,s=/[\n\t\r\.]/g,u=function(){function e(n,r,i){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");E(this,"isNodeList",!0),E(this,"length",0);var o=this;return o instanceof e?(n&&("string"==typeof n?t.error("Err 4001."):t.isArray(n)||n.isNodeList?Array.prototype.push.apply(o,t.makeArray(n)):(o[0]=n,o.length=1)),o):new e(n,r,i)}var n,o;return n=e,(o=[{key:"item",value:function(n){return t.isNumber(n)?n>=this.length?null:new e(this[n]):new e(n)}},{key:"slice",value:function(){return new e(i.apply(this,arguments))}},{key:"getDOMNodes",value:function(){return i.call(this)}},{key:"each",value:function(t,n){var i=this;return r(i,(function(r,o){return r=new e(r),t.call(n||r,r,o,i)})),i}},{key:"getEL",value:function(){return 0<this.length?this[0]:void 0}},{key:"all",value:function(n){return 0<this.length?t.all(n,this):new e}},{key:"one",value:function(e){return(e=this.all(e)).length?e.slice(0,1):e}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),e}();function c(e){return n(e)&&(e=t.trim(e))&&3<=e.length&&t.startsWith(e,"<")&&t.endsWith(e,">")}function l(e){return(o+e+o).replace(s,o)}function d(e){return e.replace(s,"")}function h(e,r){return r&&r.isNodeList&&(r=r.getEL()),n(e)?(c(e)&&t.err("Err 4002."),new u(t.sizzle(e,r))):e.isNodeList?e:new u(e)}t.mix(u.prototype,{before:function(e){var n=this.getEL(),i=[e];n&&(c(e)&&(i=t.parseHTML(e)),r(i,(function(e){n.insertBefore(e,n.childNodes[0])})))},append:function(e){var n=this.getEL(),i=[e];n&&(c(e)&&(i=t.parseHTML(e)),r(i,(function(e){n.appendChild(e)})))},html:function(e){var n,i=this.getEL();if(i){if(t.isUndef(e))return n=(n=i).innerHTML,document.all?(n=n.replace(/(\s+\w+)\s*=\s*([^<>"\s]+)(?=[^<>]*\/>)/gi,'$1="$2"').replace(/"'([^'"]*)'"/gi,'"$1"')).replace(/<(\/?)(\w+)([^>]*)>/g,(function(e,t,n,r){return t?"</"+n.toLowerCase()+">":("<"+n.toLowerCase()+r+">").replace(/=(("[^"]*?")|('[^']*?')|([\w\-\.]+))([\s>])/g,(function(e,t,n,r,i,o,a,s){return i?'="'+i+'"'+o:e}))})).replace(/<\/?([^>]+)>/g,(function(e){return e})):n;i.innerHTML="",r(t.parseHTML(e),(function(e){i.appendChild(e)}))}},attr:function(e,n){var r=this.getEL();if(r){if(t.isUndef(n))return"readonly"===e?r.readOnly?"readonly":"":"style"!==e&&a?r[e]:(r=r.attributes[e])&&r.value;"class"==e?r.className=n:r[e]=n}},style:function(e,n){var r=this.getEL();if(r)return t.style(r,e,n)},css:function(e){r(this,(function(n){r(e,(function(e,r){t.style(n,r,e)}))}))},addClass:function(e){var n=this.getEL();n&&function(e,n){var r,i,a,s,u=e.className,c=n.length;if(u){for(r=l(u),i=u,a=0;a<c;a++)s=d(n[a]),r.indexOf(o+s+o)<0&&(i+=o+s);i=t.trim(i)}else i=n.join(" ");e.className=i}(n,e.split(o))},removeClass:function(e){var n=this.getEL();n&&function(e,n){var r,i,a,s=e.className,u=n.length;if(s&&u){for(r=l(s),i=0;i<u;i++)for(a=o+d(n[i])+o;0<=r.indexOf(a);)r=r.replace(a,o);e.className=t.trim(r)}}(n,e.split(o))},hasClass:function(e){var t=this.getEL();if(t)return function(e,t){var n,r,i,a=t.length;if((e=e.className)&&a){for(n=l(e),r=0;r<a;r++)if(i=o+d(t[r])+o,n.indexOf(i)<0)return!1;return!0}return!1}(t,e.split(o))},parent:function(){var e=(e=this.getEL())&&e.parentNode;return new u(e)},remove:function(){var e=this.getEL();e&&e.parentNode&&e.parentNode.removeChild(e)},offset:function(){var e=this.getEL();return t.DOM.getElDimensions(e,!0)}}),t.mix(t,{all:h,one:function(e,t){return(e=h(e,t)).length?e.slice(0,1):e},isNodeList:function(e){return e instanceof u}}),t.ready((function(){t.all=h}))}(le),A=(fe=le.Lib).win,x=fe.doc,R=isNaN,fe.DOM={getOffset:function(e,t,n){e=e||A.event;for(var r,i,o=n||e.target,a=0,s=0,u=(n=0,0),c=!1;o&&!R(o.offsetLeft)&&!R(o.offsetTop);)i=o.scrollLeft,r=o.scrollTop,"BODY"===o.tagName?c?r=i=0:(i|=x.documentElement.scrollLeft,r|=x.documentElement.scrollTop):"fixed"===o.style.position&&(c=!0),a+=o.offsetLeft-i,s+=o.offsetTop-r,o=o.offsetParent;return t&&(n=t.Left,u=t.Top),{x:a=e.clientX-a-n,y:s=e.clientY-s-u}},getElDimensions:function(e,t){var n;return e?(n=e.style.display,e.style.display="",t=t?{offsetTop:e.offsetTop,offsetLeft:e.offsetLeft,offsetWidth:e.offsetWidth,offsetHeight:e.offsetHeight}:{clientTop:e.clientTop,clientLeft:e.clientLeft,clientWidth:e.clientWidth||(parseInt(e.style.width)?parseInt(e.style.width):0),clientHeight:e.clientHeight||(parseInt(e.style.height)?parseInt(e.style.height):0)},e.style.display=n,t):{offsetTop:0,offsetLeft:0,offsetWidth:0,offsetHeight:0}}},fe.getElDimensions=fe.DOM.getElDimensions,function(e){var t,n,r,i=e.Lib,o=(i.loaderBarClassName="ds-dwt-loaderBar",i.loaderBarSource="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjAiIHdpZHRoPSIxMDBweCIgaGVpZ2h0PSIxMDBweCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxjaXJjbGUgY3g9IjE2IiBjeT0iNjQiIHI9IjE2IiBmaWxsPSIjZmU4ZTE0Ii8+PGNpcmNsZSBjeD0iMTYiIGN5PSI2NCIgcj0iMTQuMzQ0IiBmaWxsPSIjZmU4ZTE0IiB0cmFuc2Zvcm09InJvdGF0ZSg0NSA2NCA2NCkiLz48Y2lyY2xlIGN4PSIxNiIgY3k9IjY0IiByPSIxMi41MzEiIGZpbGw9IiNmZThlMTQiIHRyYW5zZm9ybT0icm90YXRlKDkwIDY0IDY0KSIvPjxjaXJjbGUgY3g9IjE2IiBjeT0iNjQiIHI9IjEwLjc1IiBmaWxsPSIjZmU4ZTE0IiB0cmFuc2Zvcm09InJvdGF0ZSgxMzUgNjQgNjQpIi8+PGNpcmNsZSBjeD0iMTYiIGN5PSI2NCIgcj0iMTAuMDYzIiBmaWxsPSIjZmU4ZTE0IiB0cmFuc2Zvcm09InJvdGF0ZSgxODAgNjQgNjQpIi8+PGNpcmNsZSBjeD0iMTYiIGN5PSI2NCIgcj0iOC4wNjMiIGZpbGw9IiNmZThlMTQiIHRyYW5zZm9ybT0icm90YXRlKDIyNSA2NCA2NCkiLz48Y2lyY2xlIGN4PSIxNiIgY3k9IjY0IiByPSI2LjQzOCIgZmlsbD0iI2ZlOGUxNCIgdHJhbnNmb3JtPSJyb3RhdGUoMjcwIDY0IDY0KSIvPjxjaXJjbGUgY3g9IjE2IiBjeT0iNjQiIHI9IjUuMzc1IiBmaWxsPSIjZmU4ZTE0IiB0cmFuc2Zvcm09InJvdGF0ZSgzMTUgNjQgNjQpIi8+PGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJyb3RhdGUiIHZhbHVlcz0iNDUgNjQgNjQ7OTAgNjQgNjQ7MTM1IDY0IDY0OzE4MCA2NCA2NDsyMjUgNjQgNjQ7MjcwIDY0IDY0OzMxNSA2NCA2NDswIDY0IDY0IiBjYWxjTW9kZT0iZGlzY3JldGUiIGR1cj0iNzIwbXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIj48L2FuaW1hdGVUcmFuc2Zvcm0+PC9nPjwvc3ZnPg==",i.loaderBarSourceIE="data:image/gif;base64,R0lGODlhZABkAKUAAPyOFPzKjPyuVPzmxPy+dPyeNPzarPz27PzSnPy2ZPymRPzGhPyWJPzu3PzixPzOnPyyZPzChPyiRPzevPz+/PzWrPy6dPyqVPzOlPyyXPzq1PzCfPyiPPzetPz69PzWpPy6bPyqTPyaLPySHPzKlPyuXPzmzPy+fPyePPzatPz29PzSpPy2bPymTPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJCQAxACwAAAAAZABkAAAG/sCYcEgsGo/IpHLJbDqf0Kh0Sq1ar9hslXI4aEwHFUVLLicpjUBrBACMFKTG2Ewne1Khtl4fSnnqgFYUFSJ7hgAiFXOBjE8mDIeHIyaNlUweGZGRGX+WnkYTL5qHIhOfp0MubKN7Iy6oUhQwDSYmDTBPHiyshyydsEwUJgslCiIFCgkPcpcJvIYJv8BJBy4okW8r0kceIM97LIvTRw0Cq5ojBNtGqt9uC08qGisnBA9g4loHAt8jESpKJhT6VqqJMALn3AiYsE7QAneIFCVRkelbiYZFKDhooanAinxWHFyDKABXEhMJ0VFiAkMBqwITQE6hEAGinhRKBg3UlEim/pENzwQcyAKDn00AJ3wKucMxUogKGIsc2DlqhIMsGjgcBRBC6dI0Cla9IaHBKxEHKTWRyGKCqjsUZpeqOFArTFwiK9JGIsDW7TcOd7FU0HuIL5asWwVELfPo2wOiELYuCHzFQ4FnIzRkoYCBsCYGVz3lZZVuMRQNLiGyGOrpQORRClZuHv2tgAPKWNBA0KvgdhkPJzzrYfDBNB0uKwowYDCCQYETMHA78RDB7x6P42J4MFFhhQPWgA4YKJGWAQgHxrObkdXhhAAOHDK4wKd+GgUKHu5Lr8+/v///AAYo4IAEAgODBhNoYFKBdVCgAQkKMDdCcwq40EB6DDoBAwbW/rUhwgMLZlhFA7vxMkICmolIxQEhCLeHUCpK4YEzNvkiIhomOGACDKYNdhQDFWR4wAMCiMKAAA+AZ8QBFR2VgZIBwsACJHswwEKIRAi0FSKmDEjBLtiEYwQFJGzZBgb7eWICabIN4QEBZiKFISxAsRLBkmBumQCU/pXASwZL0rjlagMaNQqgRbwZpzoDnsDLnRmVaSYJaVoygGeTHKHlVgV5mWcvMjG5JQR8/icllcOBgCURKaDqDgM4MXgAAgJAciQCpbopqDs2ZugBDDnaYhwMF7jYxggwxihFAxm4OAIEKSq77AMdIoJBA9JW4UEDLkQ4IYUWzpmtEgcmuOq4/uimq+66/qHhwAQfVDABGOxGodECFyjnBgMoZBAAM/UuAcMJl6HDAQniZiuMVt9AAHDAQ1AwAcPuCIAtxENo0JRNECTs664QjUApxg7EycHFp/x64XpNbjVCAJVS4cAGJQhggR9kaFCtRecCsqmHk2mxgqtbFdAmIw5Y94EWNcUJAKyWeFDnISF4fIQFTrcRZCUw+BmJCNFagXXWWzdSFE9HUzG1mQwYYIkKYx+iQK5RPGAsKyKEVkkK1r2SRdJOh4ByIx48ZEgJdEfhwcYuJ/UJBSu0UIAIEriQuBQVxFnAALBsR68ZBzBuEwExC0hBBzt31LMRKqRAAAEpAESgYgfU2sSB3kscsOueBXqQnDshxOTECocsXeDpokeCImWv7QFBhlxUEIIIEx7LgAgQoBeF13sgeqMJD7gAAgEurPAwFHYb8hjGT4iqB6nsPyELkSWAWHr8+Oev//789+8/u0EAACH5BAkJADEALAAAAABkAGQAAAb+wJhwSCwaj8ikcslsOp/QqHRKrVqv2Kx2y+0uPY1JJ+XQeLxob2OhYAAAjNaika5fKYPL6M0HjC4DFHaDUSYofYgAKCaEjUweAomJAmeOlkYOe5J9Iw6Xn0MEm4kEoJ8UCqOICoKmUB4aJiYNrU4UHKp9HLWuSwcBAhwoBQolFZVMFC25fC28vUceFQWSIyEOz0gWzG8W0EoeLm6jIilNmdyeUBQNsg3IXhXjqhyMX5G5lK8uF8IKJ3S8HKDGjQU8JA5wjeKgzkmDEprejECBrYsLbm/KJXOgJ9Gfik5g4EtUwJ4WSBjfLDiIpEGENm8YKIgQ0NaKiKRYVtGgEGP+Ahi2NExIkWKChmy+QKgKUROLA4IYBTQddCCEqpJbBhxKKQCoowMXVC3aokFCSgAsDljycELVhalWUKZ0gTQNBQPzEI2IUJdKBZxiB3xSsQHwm65dPFhlNmKDzkEwXIjowwAC3CxPmbXwCspDCgICLrBYoRYNhRRQPba4bImChwMHPPTVYoLFZEQcInD+tjbFAgglSrAgYeIxb0KvYcA4MPu48+fQo0ufTr269evYs1t3DaOBdxiytXOB8VnBixEiJJwwsFt8lQEl8vJhUEKweyoUKvTcxMFA8/tG5HdbLiJU8B+AQzSwXy4csDYdBTBoAMOBF521gHYutcBBCBv+OCgEDANiVEB70lHgQAs4tRBIEvKcBUcF1x1QgiQllHbEAi6+EcF16HjUkBHb5OiNdRiMgkESSgl5HQmjkJAEji7uxaNhfvxYRItnMQCjdQeM1IcANhoBoosjXodHKn2oOBuUKV2YXQMnhCBBCAAxoWBKDYoHoYQHCshNgQciKER+CybCgYGCRuFAfJLQZ2WiIVVAgAQijPCCBARUQCKktnjQ3XfhcSrqqKSWauqpqBbhqSwTppqMCScoUIAIBRTQAgm0uGqEBw5AQCUcAAWaKAUPpLaJAiClSsEKL2AkwaOknmZsLkyl2oCXGFkgrHb5/aoKAx7aQcG2T3gwY47+ALgAigoYXCBHuFIc4G0urDThGmyhTqHCYm+gYJ8WDqD7RgHhHjABBhFYAEIEGEwQ5hMBJFICuUoYIDAAIpi06wolTFtACSsYF80yej1sRQUXZ3wEOyHIhwgDTAXqAZqImFzFBBcTvOsEhW6CwgSBioIbxUnAcLEEB5loFp7JKqHBVhkhelLP3IAgJrbcXGDzEb3uEUIKIktBAQnzbjLCv0NEIPCOnXqQ7xYN0JwSBM+Mia4Im4JCrMtXPfpA2aOM8IBzB5wAeEYrPENBAhcDkADRaHhAAN+IFBCymCQLvNlzKjygwK8jCJACUnderAC8l7CDweecQKBpXWU1zoFdBiWCYUIFKZgQ22xxN346qR6EdbEAKpQqtMCllDrB4dVMYCoF/LoYAuTVpUD5t+acKnmOJ4QtKAwgMD8CC3mPWvj180WwdakeIICi2S0g4P2o7KwgAE6hr5ArKEEAACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPyeNPzarPy+dPz27PzSnPymRPy2ZPzGhPyWJPzu3PzixPzOnPyiRPzevPzChPz+/PzWrPyqVPy6dPzOlPyyXPzq1PyiPPzetPzCfPz69PzWpPyqTPy6bPyaLPySHPzKlPyuXPzmzPyePPzatPy+fPz29PzSpPymTPy2bPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj8ikcslsOp/QqHRKrVqv2Kx2y+16v+CweAydRCyVjyUyIbujkwYGQK9jGu23Xtkg1f8AJA17hEYdLSKAdSItHYWPMA0Jin8Jg5CEA4mUdCIlmIQRnH8OoGUvJSUHeVAlm5yepkwTLyMaIrgMCQWrT5KjAJaySh0OK5QiGBmsS4evgCIBjsNHZhrAApdNfZyCVRPTYS/HwAAszEq0JM8iguhNcQYrGiwO71oj5XQMEWURIAIqrLk36wSDPyIWhNsy4Zo+ACgIisngEGG/Lg0OPqxwoFCAZ3a8OAA5StieDhY4aViYxdXDYNreTDDACQJLLC806hPQkdD+A5IAQHiZ8OGhCAkSxZFDmOELBaCAQjR91KCCRhEJ2Hw5oKAcI1AHEKBA8QAPmAkZKowSAaInqAlJtcRhobNOiBYvqOkxY0FAghUCUMTUK/NAhgYp4hJezLix48eQI0ueTLmy5cuYM397kaFEhheKNS+Z4ICDAA0mNAjgYE/0lA4oQigSEQLFTdd8BJTLhrvJCxZQF7HI2zvJBA/B/zBQEVov3OYHILwM5jZyBw8QQkDwcLuIg+l0SklOseBVwhRL8oEfMdmB7D8ELiahCd6A5AkXKD1IigI8APuRTfCAfkkF4B97kkXwnl3yIfEdeOJFdoAE5klQ3REHTPJSAhf+PnZddtt1R8QEKtQ1ynLNUQNOir8lB4AIwxW3RAO6YTOYjEd0YMCCf9QmIo5EFCOBABBoAIEAEjjwI5BF0JJKCaAxKeWUVFZp5ZVYPgHOCy8kluURL5yAAgYkCICBAWWN8VwHHcAFSgoPJGDiiyZIEGUXHTSgAgYmMMCABiBEcKceHZSgITAhULBkFAdcIN1sHyi61wmP6sPAA4s68ducPbaQ4hUlVPRQCB58ikQHfujDSKZXZOgfAARESEUHC0yXqKlwGPgqABiwikQJJoAnAHFgvFCpf7HMKgGyJ4hBAacvcVBFA0X5ZwGuTsy0ax0QYAtDCTy+tBIYB8yxLaz+Nzox0qsMZFqMCi20oIKSS7yg1rkhfDLFusj+SIstDOCSiwYjDFoEjecCkC8VA7jwKgESdUCBqIpowB2GqW4bQrrbHDqdAgR18AC0yu1nSErnjjvFASC8ylw1Jb7kQqlGjOAiMBhYcUK45ZjUpAPBTmdCa0RkQMC5DUrRQcsvMXDBPSnQVx9L2u66gq9INHAsMCx0KEQGPOvjwo0NhF0OAxR4S4ShXmFArBEIbIuAESTejBAKXk/RAAhhi0CABOglwcK2LOT4gNmzWZA3FSkUYEECIYjAQAgfJLlkta9WcKoKR59t4Rd5luCAAyWYxcRS/q1g3AAKBFfBCVi7kbFpfyQ0U0ILkIcQAgH0OODlYhxsK20THXAGZeyhbJt0cS9Q/JAGb8sooN2LmCzlC+a+pED0QJaw9SgQTEVlHB8kJ8IKplv5ggS3zKaBnV/CUOgICiRAAAEJKDBCCcj3NsEBDThMA3qBiSAAACH5BAkJAC8ALAAAAABkAGQAhfyOFPzKjPyuVPzmxPyeNPy+dPzarPz27PzSnPymRPy2ZPzGhPyWJPzu3PzOnPyiRPzChPzixPz+/PzWrPyqVPy6dPzOlPyyXPzq1PyiPPzCfPzevPz69PzWpPyqTPy6bPyaLPySHPzKlPyuXPzmzPyePPy+fPzatPz29PzSpPymTPy2bPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+wJdwSCwaj8ikcslsOp/QqHRKrVqv2Kx2y+16v+CweEwum4sS1yYg2rgk53gzIgDYQ5SIfI9sJOyAAAkNfIVCEgWBgSZwhnsNKoqAKoSOchh/koIYlnKQmoKVnU4SHByNUoghmoyjTRwRDiwBKSSoUA0PkoOuTC4VBKsAIRkWKFN0gHh6vUouI5ohEAepaiIBbreppdpeHB+gww7dcQ0LCSUFtmERBOEAKtSFB3WADwNgEg7vw5yFKZJWkMPCYQE/ABsMXZAEYuAVDiwOJiwETlEJh1YkpBAGKoSoPScktfpCIsM7AfL4cFgRiMLHLhJEMAAFYgNGMhIiFKgwISX+GBQaOAICkYJDszIHHCQQFmLEBqNHy0g4QGJDhAYHbkbdyrWr169gw4odS7as2bNow3BwgcEF1LRVOJwoQCHBgwQUCpx4C7fJ1BPBopXoqRWuBAwrhEZbgaEw1QEkfH5t4EFxRw8v0TQokAGE5wcFGhR2hKLeQUAjJA9BkcKdJAIpVPfiUMAyvxAF+AopaPvOAt29NoA4zXDiEAkTZr5r0WF0HBQmeh80wZfyacxRG5gkLimDKAknpAcKccK5mQjcoxmXYJD4AvNlEKTXlGLISu4rgFuKOF9RAPsVnfaBfo6I0J8iLBwHAXcQEGgIQAcCUt8h4Z1GHnxkoBfhMMz+CGHdQS5lt92B3hGBXAv8MIchGSgkEqEJkvEWTgi/cSXcgQQYRwRrrikC2zFc0dZfCBUQKMFmnXmWQWgrxnEABfN5IFsRLpAQAQkujPXhQSF44E9fSByW2G2MNSmWBChMUIJtIQyWFZhOyEVXAhngpZeDcCpxAFsuTJnnn4AGKuigUJRyAgsfrLDABG+MUYoLDTTgliMSkGCCcoooEAGQXhyQQgEjJKDCBRA8pVIKI2oCwjQwRTACpoAQ8EFmY3AgAoq3KYBnFBykMFw4GXSIkwOwvhMCdVqcUKwmJdBKUgnpMdAcFgek+s6AZHBgQn8jZHmFBdzVRMYBy3Kp4xT+B0TCHbJiTPCimS+Q0ONp3Y6x4IEe7LrEjdzxIkaA82WgrxIn/Eqcv0uU0kAEKaRw1SlMsHRgCQMn0U56FHjrzAkCCBWCACf4KcS2+FaMhAuZEFeByC808EG5ADAwqxIQ9odtFYhwx0AKGLmggnjwaGxEAxFOAG/LBvOTmp6m8YNSmAvNl8CXVlgANAAgCGuErVffIcJA/BIXgggmKwGdeAwggNGW1zl7NncXCH3FASIkrUwGey1RIXfkJeGCAl2X2EUDJqhQAggElOCBBXIfAVF/LDhIG8x2MHCBs1hMNcAGG5DA6RLf9FekEr2+KkkICYjQeCcoSJzeCiynsYFdBgJkUIIABUzQQNlnCDkfu0yUYoopR4uhT3/jDBqB3fxkTegBUROnAMtwXXxajoQe4sDVISSf/QsQUR5z5N/bd4IKyzKgQt7lE+GpAnXhpUBs7YcJKQYH8F6/IUEAACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPy+dPyeNPzarPz27Py2ZPymRPzSnPzGhPyWJPzu3PzixPzOnPyyZPzChPyiRPzevPz+/Py6dPyqVPzOlPyyXPzq1PzCfPyiPPzetPz69Py6bPyqTPzWrPyaLPySHPzKlPyuXPzmzPy+fPyePPzatPz29Py2bPymTPzSpPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj8ikcslsOp/QqHRKrVqv2Kx2y+16v+CweEwum5EUynkd7Uwuo0mHTVemTCEAIGRK1f9FFyJ6eiIjUhQdBygBJgQLIA0daoBPFAWEhCeUTm4qDJmFJCAHnJVKBy6hAAwHTwcLeauEDCoNp0yXq5tOLxWDs6EfGbhLI8CFh00HHsHBw6bFRAd4enyuuQHOzirYXB0ZICgN0VEHb3FzTS+y26sMIOVWvgUMLgUt8lBpUC3uzgLUZWmAKRQGb2QObPjn7FaWDghmGdLnxUE7hqFYaMlwMROJF2ZAgMK4SoMWFKpmJSBW5gEykoRUaOEwctVKMw9qwtTjQQv+wWAQEIoRuTPTAi0UTMxiwIJilxIdYYLY0gGCThcBnHbp8KGoHgYgtxx4IGBDAggG6LDwCkCFQKQvSmQoRUdh0RATtErbR5SkiAhv92LpkBOjiApCBWMZqzPY4bCKvxk4sS1EgMSRs1AYKyCECwagQyRoQS6zGAoZULB4AKKEH9OwY8ueTbu27duyOzRAYQJDAgwmxgXGHYVCgxYFQ+ErTbz4BAHuBOS1xM82BQ7JtxWYroTCCwcXTDxw8EJvsRIpGYYo0X0CBmQMMHCH3YHETgzDh6DITqgAB9koNPYPAyggwY4zIUAWGUReITAcBRq4o4F5dWQggVc3FXHACu7+rIBZMRNEpd4ERmSw0DYbsBSZAenB5EJaRZjozgkqKhagVwzAOE0C7iTwIS4heoWXERC6YwKFdGTAY1EZFnFgMAnSB0GD+cGw3ywFFBjbjTDBkwQF7tUU33ymHWAfTCRUKYR3DoygwQjkIVlJCQIiyF4TaciJC5j8BbOdnriBacFLoYhgAZnN4dnAAn0CsBygicKgGwe9/RbcC2pGqummnHbq6aeghlpcnqJa8p0CLWjwwASSkKFbBhmUd8oLCghA6AYBZAApniAgkIAEG6ygwp11NGCVYxY4sOuXDRBA6B6XLUtFA0tWxoG0RVDgQLWzfLTGC2f+E4JDWbxgwT/+BGBrSWEYEZApFC7944IDZrwAHUknDPBQo7OooG4TEzzrTj5YZCCwSgqCQcEDRXnwmhUoHLzKBsSGQUEERXl7RcQYUYyInEllnPAUJUgcSgLkMnFACRMowAIHJfxIBAUjFNXNYiLOAsG7QnTggAonIHOCB3IwEfBOC/DcRAUMiaAREx2MwO8JF7wrI0khaInFT9Hp1UEEJgMAWHcthJ3JzkiBwK8eTSrBsTsi/KdEBueO+A0HXa0iggoD6HVA3v98IDOYOWcyURfe4SHC4gwUwAJdTIDQ4jYvLsFnZSMoTYXPE0xQApJFkjSh5RlU0GcIGCibWQcqwORWEz4HUAFdBhioAMnDkaUQEUkOWpLCCy8coDkgFDBNUgX/mnaMYQGUOgRUGK3n/JqtM+TB8IkesDYhG4wsKpjc2oSo8xSUAMGzIkBQAvabJsIB0CGEcIIKciTf3AHeT69/qUEAACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPy+dPzarPyeNPz27PzSnPy2ZPymRPzGhPyWJPzu3PzixPzOnPyyZPzChPzevPyiRPz+/PzWrPy6dPzOlPyyXPzq1PzCfPzetPyiPPz69PzWpPy6bPyqTPyaLPySHPzKlPyuXPzmzPy+fPzatPyePPz29PzSpPy2bPymTPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj0gk5dDYPBaRx6ZxoCSv2Kx2yx2mThYDYExGfU6prnrN5r5WIbKcHFq92vg8m1ICzf9kLCVWeoWGRnwTgIsACoOHkIYHAoyMAgeRmXgPlZUPmqBdL3GdiyF3oalXDyKliyKfqrJFFBiujBiEs7MvLLeLLKhYFMS6u2olHL+AHCVXFC8lJw8PFQ4NxsdZJSjLfyjOSC8qGKRjDCAB2Npayd5zzUgZAgyvCifZ7EYvCu9yCsKGUHAgphODB/n0CbTlbwyEbIluicCnEAmnhrCMHFjR6haLBqAodMjQoEPCfea8nTIiod4vEQE6ZDrQwqUBFSeLXPSWkVb+gncfI1Fo0fGcBC0HSLy7ZKSDi3cMHERK4VIOiZwCSyj6pcBBvgYNcUIqwQxkFj5+SolwlJCsvxFY1WRgFhDLm5R/6tQl4vbdhbhdOhSUswIwkQMbLCiDZ+EEpiQvGlYwvIWCh6IAGJjtsiSDhCcLpGSogkXwuxBShUrAwGHChwwKKUR4h2HvoRePKw7AaxBhxVkdZv8SYPu3phckMDMyANv4rgYClP/hcNT5sQYmeJ9b8cj6sQ4lIgwGECKBBNLe2RE7kCHDC5Pp48ufT7++/fv48+vfn17kAfj8aQKNBAGY8IEJI2zwAmUBnlWBAE/J4QIJHsjUYB4paFDVHwz+RJDbhWq88FMpdmxxgAMbOFCcfR0Q5YoILViYBAUFgGBACAYIQNF+DWhnymZHdPBAhGQcJCN+wv2iwRUlaBdCOPh10M0yKBxZRAuMtKBfBj4yEkJzRyi1CAn6ObChK1ElwRAgGJR5ZilpIoHlIlrmx6VKYBrRJCBP6ielN1UmISSRY7jwgJX2aeDNks8UIMCNKAhQAIPO9fhLCEBC5oAEKjbYonSAwIgoiFgckACocohQIqlqZPhmkRp8yCoXFKgA4RwuCCDWrHu8sMEIBByY4IK86uEfgMUmq+yyzDbr7LPQRqveqNIicYAEF0SgwQgnZFotER2sFkJRISiAQBr+qXQQzQMqjEZpJiks8CoAqq6jyQEBTDnGPejq08ECpdR2nAWAMDCCrLtsMO8cdULy6SIM7HjMAWt2shIkBFWiAMKqnNDlHw0XQsEIpUA5y8ioAvLQIR0QUEoF2gS3DAj96tEBwZ2oELOiv4DAMRsdBFBKaruMvMxVkLRUiQErItGBA9kucIEE1B5RwcJ/RBDJARBUMkLVR5RQTkciGICByVc00M+LaBfSQFpziGBB00V04IGPIagA9hCsuFKYJhlAkJIBC9BNBAUeLy2xoCuUokCeW//6gQUPOLB33WtrfDkMDVT8R1fvqtFBCshyccItJ2gBTQvjxv1a6No07ndgFw2MgAEIIJCwQHf3UZB5JwqEnsLP9VGwWCkcwH4hJa6Q+S0Mc5YSsrQZpEyGCJBHS8EHpVigPIgvQICqCBAY3mwDFrzJgAXZP39ABQmQUkcFxH/r3wH4l/78/vz3T0QQACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPy+dPzarPyeNPz27PzSnPy2ZPymRPzGhPyWJPzu3PzixPzOnPyyZPzChPzevPz+/PzWrPy6dPyqVPzOlPyyXPzq1PzCfPzetPyiPPz69PzWpPy6bPyqTPyaLPySHPzKlPyuXPzmzPy+fPzatPyePPz29PzSpPy2bPymTPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj8ikcslsOp9QZad08lBOpUN0y+1CDyoMx8UQhVAYldbLbnMnDpAIQK/TRSDJxM3vIzsUDHaDdQwUHX6JfRMUIYSPACEUe4qVXSUKkJAKJZaeUB0EmpoEiJ+nShkuo5AMGahsGRQBEREXFGtLCKyaKrBREx0nJCFlcyIMKCslpkgQvJAQv09wAnOaIgQNlEYc0I8c003CBt8CA9xEjt+DBuMlFA8PHg4pihMn5ewsr0Yo7IPCKZlQYgUHYwwMWDiRjg0cfQBZ5BqCAaAdDEoORBD0SESCbW5SWLBYR0NDFSTp+EJyQBQrCw3cFEhJx0AnIhk4AnSFZML+iGusEjR7I4AmABER0nWoQJKAvSMlvEETcYJNiXU0BcTEKfUbpz8RAIKYGEWFzpQoBhRhhJWVpIZDGoAAaMCBlwVAUzLYYATQ2VaHkmRoy4vBSi4mjN6hcGSCBBZ57YhgoUdJicisRIzwklixiAJJwGBAYcwFBxJqmJT4m3lzlwCYAbqQsOQAFQoeTgx4yiQDRGiGvARSzOGmpRdF2RX30uA3SQxkE/mMDWnFUGAJjIp4ADdRAxbfGKhl44A6Lw5bP00owPpR0jYdVqTc3l1Rhwft62SLzqVBcnYirFBfJcIoEBsHI/DWBhzgfSMCBun9MkEDD5BgAAMJWRBBCQP+vpFBJrwECJI4QkzwQgYllJDBiJUcsAAK1DHAgQodkojKBBksIMAYyITAQQIPsGjjkEO8UIIEJ5wgQQkKEunkk1BGKeWUVFZp5ZVYZvlGCjVq6UcHDrTwAQQftODAdV76QRAGIQBlBgYcpplIBwWYZwiacr5xAmGEhFBAlyUaKWSe30HDQoQ9NbAChgysMKiWEwTAzgg1vlDRRS/kCcMBXZ3X5FoqRCYCjXm+YB4hImSaRAedDWICnleWYJFxR4TySCl5ZmBRPz2ZNYhhgEZpKoCqJvECCYOQUGyaKYAIjQL8EWFiBYxW8EKwUU7QwqSATujAtZrG1SArh4brxXr+fA7iJ6zmjjMcYOy228SabZkBQZzytpFCmBWQ2YIEn+br0AHxCmzwwQgnrPDCDDfs8MMQRywxlPhoAAEGBKQ28R8SyCGZASoU7EYHDaQI7pMdqJDuURFEy0cDC4DAAQcCjCDyJxKsTAcDNltygMf6vUrkBHOxYgCifMTXEaVDnnBqHRFUchUkAiw7jQlP06FAJe8SshyJE1xaGLZO+PqITTaGHR7ZTTiwMghIw8IUNAIlcsB/kkVwsyIUZA0AAZasRgjcRB7gXEd2VUKQAMUwEEICLg/UwAgGiqDACI8qEeooIgjtyb5WMPOGA+PWwYID2HawESQiQBC3lRkUTQhgP1+MwGfnr1fJ6iieO0FyBCxgyIEJZ+b6jyYo8LoxDOVxnvjyzPPy/PKCa8IArRsjN0rV0AtxX34McNe9EAd8gJkIH0QesbYw3oFCC2wzjOMDC0TwQAbxj6///vz3v38QACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPy+dPyeNPzarPz27Py2ZPymRPzSpPzGhPyWJPzu3PzixPzOnPyyZPzChPyiRPzevPz+/Py6dPyqVPzOlPyyXPzq1PzCfPyiPPzetPz69Py6bPyqTPzWpPyaLPySHPzKlPyuXPzmzPy+fPyePPzatPz29Py2bPymTPzGjPyWLPzy5PzWrP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj8ikcslsOp/QqHRKrUI7pcmk1LF6v9ZOxlNgmBmFSqYLbruRjQgDQK/TGZrGe/92YeyAdCIkLnyGYRWBigAVbIePThQXc4uADBcUkJpLDR+Vih96m6NGKJSfdgwopFMUHQcZEw4NBx2ZSx0LqIoLjqxMFA0KAiKpHigut0gHCLuBCAe/TR0vFsWKDBgOSgckzoAk0dJKFAstuxsoykXM33bQTi4vASwKa3wdLNe7IS/rQx0iuKvTawmFEipEFFMoIsEEX14ogDjnbkMJJKYGqsKloMAiBgsKgWmwYiAdBP+EdBoYasmLEJ9EsIDY6sE+dyIyHKEw4ub+JwYjUhJx4REVgwlfOpQ0SccEkg4evnmgSYSCiW8JhEI54NPdCqowXJDoameQyCQulu4ScdFKCaZ1Cpw10kDDKUsmRClxUHTtAy8c4NIpoDOJGBVlzhTwUEJrkZfuFniZIBgA4SYHsmwR5wQFTGcyvWSofGKuoRInvolQ4OXAXZaO2xzwBFovlQ7N4F4YZdOZii8UXrx2xsD2oxS0PxVo60UsUw2x3zhIXamFArBRKPAdKMA4JAoZMAwHcOIF9ikGPu/6wJxVBwUWToQIUWCFBtNggm/YJaDxOCEHDIACCrNEV8VBHpAFQAgRePcfKeAtsMIJBRRwwgcKNGDgg5r+UOBCA7RsyOGIJJZoIoQUiHjiHh5OcMECESwwwgTJrDiKCyYkEMI+IoSQgAn42ejGARf0pUiPF3AmZBsuRAVaBUEuOcUBEJgEj5RhaKBgJSJocJ6JWJiwwgYrmOAAWMGpN1AL/mB5kDeAiNBfSgf8IRgGStpYwn6LWGTEBFuuhdSSDViASndFEFAZHQQsmU+gAIiwwDrUVbYBoQk4s4JtkK6lIikTUGTUNkMsWkeeJaLgziqlmgoAqiSq+g2rQnSKighfjuPAeIGEQKoQfJJGqFqfJGBbIos2KuSjt7KwDqCViTCokA0IcKhxdVaGJ5YDBBvIBgMYkSZc/Xz6y0H+xMQ55xEB2VpWBLmS2IEDJnywwQdmntfOQCrAimUUDSQImgcO/ivFASMYGUiPI/hr8BQuaLBCCKcwEEKZDj9MhYccPMDCAiw8gIy5GkORIsklp6zyyiy37PLLMMcs88wcvvKhC7bQLAV4ERQVQgUToCyFGA3E26EDxNIRggJCR4KCAAVsgEFhHGaQHCAFcPAIBQrcxADV43SgwScCRPlFCgoDgIDRfBxQqSIhTLvHW98WvEkDkL5wCGWBXPZfA7uwZohrgQjA9h4uqBkIA1obUk6cckvTAbKLtHTIASxQUgDTHFIwgeJ1iBDUdwfIckDTQlBwwOkbd7S4CaifW0JlACp4EIB/Oz/9GQMfjJ7yC2+XV4ULE7wAAgpFq7wdICG0pzMuuT1z+MwNZKqIsc83kYEEi0gAdvbLXG2HBRmDL4Q+C7NgPhPOAVL2+kwEzEAxDBAMfzxamH3//vz37///AFxREAAAO2l6MlNnMjJPaEJTY1lvVkpORFI0dmF6ek1tK1ZrditmL1VXWmxseUxSc0NPYk4vVU5kVVRWeThHRmlpUWNqNWQ=",i.createShowMaskContent=function(e){var t,n="",r="230px",o="240px";return e&&(e.background&&(n=";background:"+e.background),e.width&&(r=e.width),e.height&&(o=e.height),e.imageSource&&(t=e.imageSource)),['<div align="center" ','class="',i.loaderBarClassName,'" ','style="margin:0 auto;max-width:',r,";max-height:",o,";line-height:",o,n,'"><img style="user-select: none;max-width:230px; max-height:240px; width:50%" src="',t=t||i.loaderBarSource,'" draggable="false" /></div>'].join("")},i.win),a=i.doc,s=!0,u=!1,c=5e5;function l(e){var t=a.createEvent("MouseEvents");return t.initMouseEvent(e.type,e.bubbles,e.cancelable,o,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget),t}function d(e){a.body.dispatchEvent(l(e))}function h(){n===t&&(n=a.createElement("div"),(r=n.style).position="fixed",r.display="block",r.left=r.top=r.margin=r.padding=0,r.backgroundColor="rgba(128, 128, 128, 0.1)",r.filter="alpha(opacity=10)",r.opacity=r.MozOpacity=.1,r.zIndex=c,r.width=r.height="100%",e.navInfoSync.bIE&&(n.innerHTML='<iframe src="javascript:\'\'" style="background:none;margin:0px auto;border:0;width:100%;height:100%;position:relative;z-index:9999;"></iframe>'),a.createEvent&&i.addEventListener(n,"click",d)),a.body.contains(n)||a.body.appendChild(n)}var g={pendingDialogStack:[],_updateStacking:function(e){var r,o=this.pendingDialogStack;0==o.length?n!==t&&(i.removeEventListener(n,"click",d),a&&a.body&&a.body.removeChild(n),n=t):(1!=e&&h(),r=c,i.each(o,(function(e){r++,e._dlgInfo.mask&&(e._dlgInfo.mask.style.zIndex=r++),e.style.zIndex=r})))},pushDialog:function(e,t){var n;e.getBoundingClientRect(),1e3<=this.pendingDialogStack.length?i.error("Too many modal dialogs."):((n=a.createElement("div")).className="dynamsoft-backdrop",1==t?(n.style.left=0,n.style.top=0,n.style.position="absolute"):(n.style.left=0,n.style.top=0,n.style.width="100%",n.style.height="100%",n.style.position="fixed"),a.createEvent&&i.addEventListener(n,"click",(function(t){e.dispatchEvent&&(t=l(t),e.dispatchEvent(t))})),e.parentNode.insertBefore(n,e.nextSibling),e._dlgInfo.mask=n,this.pendingDialogStack.push(e),this._updateStacking(t))},removeDialog:function(e){var t=i.isArray(this.pendingDialogStack)?i.indexOf(e,this.pendingDialogStack):-1;-1!=t&&(this.pendingDialogStack.splice(t,1),(t=e._dlgInfo.mask).parentNode&&t.parentNode.removeChild(t),e._dlgInfo.mask=null,this._updateStacking())}};function f(t,n){var r,c,l,d=this,h=n?"absolute":"fixed",f="50%",m="50%";d._dlgInfo&&d._dlgInfo.styleConfig&&(i.isString((r=d._dlgInfo.styleConfig).style)?c=r.style:(i.isString(r.position)&&(h=r.position),(i.isString(r.left)||i.isNumber(r.left))&&(m=r.left),(i.isString(r.top)||i.isNumber(r.top))&&(f=r.top))),d.open?i.error("showDialog called on open dialog."):(d.open=s,d.removeAttribute("closed"),d.setAttribute("open","open"),c?d.setAttribute("style",c):((r=["display:block;position:",h,";left:",m,";top:",f,";transform:translate(-50%, -50%)"]).push("DIALOG"==d.tagName?";margin:0;border-radius:6px;box-shadow:2px 2px 0 0 rgba(0,0,0,.05);-webkit-box-sizing:border-box;box-sizing:border-box;":";border:0;margin:0;-webkit-box-sizing:border-box;box-sizing:border-box;"),d.setAttribute("style",r.join(""))),c=d,o.getComputedStyle?l=o.getComputedStyle(c):c.currentStyle&&(l=c.currentStyle),(l&&"absolute"!=l.position||"auto"!=c.style.top&&""!=c.style.top||"auto"!=c.style.bottom&&""!=c.style.bottom?u:!function(t){for(var n=0;n<a.styleSheets.length;++n){var r=a.styleSheets[n],i=[],o=void 0,c=void 0,l=void 0;try{i=r.cssRules,o=a.querySelectorAll}catch(e){}if(i&&o)for(var d=0;d<i.length;++d){c=i[d],l=u;try{l=o(c.selectorText)}catch(e){}if(l&&function(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return s;return u}(l,t)){var h=c.style.getPropertyValue("top"),g=c.style.getPropertyValue("bottom");if(h&&"auto"!=h||g&&"auto"!=g)return s}}}return u}(c))&&(m=a.body.scrollTop||a.documentElement.scrollTop,(h=d).style.top=(m+=((f=o.innerHeight||a.documentElement.clientHeight)-h.offsetHeight)/2)+"px",h._dlgInfo.isTopOverridden=s),t&&(d._dlgInfo.modal=s,g.pushDialog(d,n)))}i.dialog={setup:function(e,t){e.show=f.bind(e,u,t),e.showModal=f.bind(e,s,t),e.close=(function(e){var t=this;return t.open||i.error("closeDialog called on closed dialog."),t.open=u,t.removeAttribute("open"),t.setAttribute("closed","closed"),t.style.display="none",void 0!==e&&(t.returnValue=e),t._dlgInfo.isTopOverridden&&(t.style.top="auto"),t._dlgInfo.modal&&g.removeDialog(t),t.returnValue}).bind(e),e._dlgInfo={}}},i.mask={dlgMask:!1,preOnresize:!1,preOnscroll:!1},i.showMask=function(t){var n,r,o,a,s,u,c,l,d;i.mask.dlgMask||i.dlgLoadingShowStatus||(a=!1,t&&(c={},t.style?c.style=t.style:((i.isString(t.top)||i.isNumber(t.top))&&(c.top=t.top),(i.isString(t.left)||i.isNumber(t.left))&&(c.left=t.left),i.isString(t.position)&&(c.position=t.position)),t.confined&&(a=t.confined),(i.isString(t.width)||i.isNumber(t.width))&&(n=t.width),(i.isString(t.height)||i.isNumber(t.height))&&(r=t.height),i.isString(t.background)&&(o=t.background),i.isString(t.imageSource)&&(d=t.imageSource),a&&t.wrapperEl&&i.isString(s=t.wrapperEl)&&(s=document.getElementById(s))),d=d||((l=e.DWT&&e.DWT.CustomizableDisplayInfo?e.DWT.CustomizableDisplayInfo:l)&&i.isString(l.loaderBarSource)&&""!=l.loaderBarSource?l.loaderBarSource:e.navInfoSync.bIE?i.loaderBarSourceIE:i.loaderBarSource),s&&(u=s.getBoundingClientRect(),s.style.position="relative"),(t=document.createElement("div")).className="dynamsoft-dialog-wrap",t.innerHTML=i.createShowMaskContent({width:n,height:r,backgroundColor:o,imageSource:d}),s?(s.appendChild(t),t.style.position="absolute",t.style.top="50%",t.style.left="50%",t.style.transform="translate(-50%, -50%)"):document.body.appendChild(t),a&&u&&(i.mask.preOnresize=!!window.onresize&&window.onresize,i.mask.preOnscroll=!!window.onscroll&&window.onscroll),i.mask.dlgMask=t,i.dialog.setup(t,a),c&&(t._dlgInfo.styleConfig=c),s&&(t._dlgInfo.wrapperEl=s),t.showModal())},i.hideMask=function(){var e=i.mask.dlgMask;e&&(e.close(),e._dlgInfo&&e._dlgInfo.wrapperEl?(e._dlgInfo.wrapperEl.removeChild(e),e._dlgInfo.wrapperEl=null):document.body.removeChild(e),i.mask.dlgMask=!1),window.onresize=i.mask.preOnresize?i.mask.preOnresize:null,i.mask.preOnresize=!1,window.onscroll=i.mask.preOnscroll?i.mask.preOnscroll:null,i.mask.preOnscroll=!1}}(le),function(e){var t,n,r,o,a=window.document,s=(u=[]).push,u=u.slice,c=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,l=function(){n()};try{s.apply(u.call(a.childNodes),a.childNodes)}catch(i){return}function d(e,t,i,u){var l,d,h=t&&t.ownerDocument,g=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==g&&9!==g&&11!==g)return i;if(!u&&((t?t.ownerDocument||t:a)!==r&&n(t),t=t||r,11!==g&&(d=c.exec(e))))if(u=d[1]){if(9===g){if(!(l=t.getElementById(u)))return i;if(l.id===u)return i.push(l),i}else if(h&&(l=h.getElementById(u))&&o(t,l)&&l.id===u)return i.push(l),i}else{if(d[2])return s.apply(i,t.getElementsByTagName(e)),i;if((u=d[3])&&t.getElementsByClassName)return s.apply(i,t.getElementsByClassName(u)),i}return i}n=d.setDocument=function(e){return(e=e?e.ownerDocument||e:a)!==r&&9===e.nodeType&&e.documentElement&&(a!==(r=e)&&(e=r.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",l,!1):e.attachEvent&&e.attachEvent("onunload",l)),o=function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1}),r},d.contains=function(e,t){return(e.ownerDocument||e)!==r&&n(e),o(e,t)},d.error=function(e){throw new Error("Syntax error: "+e)},t=d.getText=function(e){var n,r="",i=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)r+=t(e)}else if(3===o||4===o)return e.nodeValue}else for(;n=e[i++];)r+=t(n);return r},n(),e.support={},e.sizzle=d}(le.Lib),function(e){var t,n,r,i,o,a,s,u,c,l,d,h,g,f,m,p,_,v,I,y,b,D,T,S,w,C,E,P,A,x,R,k=e.doc,L=e.each,F=k.documentElement,W=e.support,O=e.sizzle,B=k.createElement("div"),N=k.createElement("div");function V(){var e;F.appendChild(B),N.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",t=r=a=!1,n=o=!0,window.getComputedStyle&&(e=window.getComputedStyle(N),t="1%"!==(e||{}).top,a="2px"===(e||{}).marginLeft,r="4px"===(e||{width:"4px"}).width,N.style.marginRight="50%",n="4px"===(e||{marginRight:"4px"}).marginRight,(e=N.appendChild(document.createElement("div"))).style.cssText=N.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",e.style.marginRight=e.style.width="0",N.style.width="1px",o=!parseFloat((window.getComputedStyle(e)||{}).marginRight),N&&N.removeChild(e)),N.style.display="none",(i=0===N.getClientRects().length)&&(N.style.display="",N.innerHTML="<table><tr><td></td><td>t</td></tr></table>",N.childNodes[0].style.borderCollapse="separate",(e=N.getElementsByTagName("td"))[0].style.cssText="margin:0;border:0;padding:0;display:none",(i=0===e[0].offsetHeight)&&(e[0].style.display="",e[1].style.display="none",i=0===e[0].offsetHeight)),F&&F.removeChild(B)}function U(e){if(e in E)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=P.length;n--;)if((e=P[n]+t)in E)return e}function G(t,n,r,i,o){for(var a=r===(i?"border":"content")?4:"width"===n?1:0,s=0;a<4;a+=2)"margin"===r&&(s+=e.css(t,r+w[a],!0,o)),i?("content"===r&&(s-=e.css(t,"padding"+w[a],!0,o)),"margin"!==r&&(s-=e.css(t,"border"+w[a]+"Width",!0,o))):(s+=e.css(t,"padding"+w[a],!0,o),"padding"!==r&&(s+=e.css(t,"border"+w[a]+"Width",!0,o)));return s}function j(t,n,r){var i=!0,o="width"===n?t.offsetWidth:t.offsetHeight,a=s(t),c=W.boxSizing&&"border-box"===e.css(t,"boxSizing",!1,a);if(o<=0||null==o){if(((o=u(t,n,a))<0||null==o)&&(o=t.style[n]),h.test(o))return o;i=c&&(W.boxSizingReliable()||o===t.style[n]),o=parseFloat(o)||0}return o+G(t,n,r||(c?"border":"content"),i,a)}function H(e){return new RegExp("^(?:([+-])=|)("+d+")([a-z%]*)$","i").exec(e)}N.style&&(N.style.cssText="float:left;opacity:.5",W.opacity="0.5"===N.style.opacity,W.cssFloat=!!N.style.cssFloat,N.style.backgroundClip="content-box",N.cloneNode(!0).style.backgroundClip="",W.clearCloneStyle="content-box"===N.style.backgroundClip,(B=document.createElement("div")).style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",N.innerHTML="",B.appendChild(N),W.boxSizing=""===N.style.boxSizing||""===N.style.MozBoxSizing||""===N.style.WebkitBoxSizing,e.mix(W,{reliableHiddenOffsets:function(){return null==t&&V(),i},boxSizingReliable:function(){return null==t&&V(),r},pixelMarginRight:function(){return null==t&&V(),n},pixelPosition:function(){return null==t&&V(),t},reliableMarginRight:function(){return null==t&&V(),o},reliableMarginLeft:function(){return null==t&&V(),a}}),c=/^margin/,l=/^(top|right|bottom|left)$/,d=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,h=new RegExp("^("+d+")(?!px)[a-z%]+$","i"),g=new RegExp("^("+d+")(.*)$","i"),window.getComputedStyle?(s=function(t){var n=(t=e.isFunction(t.getEL)?t.getEL():t).ownerDocument.defaultView;return(n=n&&n.opener?n:window).getComputedStyle(t)},u=function(t,n,r){var i,o,a=t.style;return""!==(o=(r=r||s(t))?r.getPropertyValue(n)||r[n]:void 0)&&void 0!==o||O.contains(t.ownerDocument,t)||(o=e.style(t,n)),r&&!W.pixelMarginRight()&&h.test(o)&&c.test(n)&&(t=a.width,n=a.minWidth,i=a.maxWidth,a.minWidth=a.maxWidth=a.width=o,o=r.width,a.width=t,a.minWidth=n,a.maxWidth=i),void 0===o?o:o+""}):F.currentStyle&&(s=function(e){return e.currentStyle},u=function(e,t,n){var r,i,o,a=e.style;return null==(n=(n=n||s(e))?n[t]:void 0)&&a&&a[t]&&(n=a[t]),h.test(n)&&!l.test(t)&&(r=a.left,(o=(i=e.runtimeStyle)&&i.left)&&(i.left=e.currentStyle.left),a.left="fontSize"===t?"1em":n,n=a.pixelLeft+"px",a.left=r,o&&(i.left=o)),void 0===n?n:n+""||"auto"}),f=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,m=/<([\w:-]+)/,p=/^\s+/,_=/<|&#?\w+;/,v=/<tbody/i,I=/^-ms-/,y=/-([\da-z])/gi,b=/^(none|table(?!-c[ea]).+)/,D=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,T={position:"absolute",visibility:"hidden",display:"block"},S={letterSpacing:"0",fontWeight:"400"},w=["Top","Right","Bottom","Left"],C={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:W.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},P=["Webkit","O","Moz","ms"],(k=document.createElement("div")).style&&(E=k.style,W.cssFloat=!!k.style.cssFloat,A=function(e,t){return t.toUpperCase()},x={type:e.type,cssHooks:{},htmlPrefilter:function(e){return e.replace(f,"<$1></$2>")},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;)e[i++]=t[r++];if(n!=n)for(;void 0!==t[r];)e[i++]=t[r++];return e.length=i,e},camelCase:function(e){return e.replace(I,"ms-").replace(y,A)},cssProps:{},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0}},k=["flo","at"].join(""),x.cssProps[k]=W.cssFloat?"cssFloat":"styleFloat",R=function(e,t,n,r){var i={};return L(t,(function(n,r){i[r]=e.style[r],e.style[r]=t[r]})),r=n.apply(e,r||[]),L(t,(function(t,n){e.style[n]=i[n]})),r},L(["height","width"],(function(t,n){x.cssHooks[t]={get:function(n,r,i){if(r)return b.test(e.css(n,"display"))&&0===n.offsetWidth?R(n,T,(function(){return j(n,t,i)})):j(n,t,i)},set:function(n,r,i){var o=i&&s(n);return r=r,i=i?G(n,t,i,W.boxSizing&&"border-box"===e.css(n,"boxSizing",!1,o),o):0,(n=g.exec(r))?Math.max(0,parseInt(n[1])-(i||0))+(n[2]||"px"):r}}})),e.style=function(t,n,r,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,a,s,u=x.camelCase(n),c=t.style;if(n=x.cssProps[u]||(x.cssProps[u]=U(u)||u),s=x.cssHooks[n]||x.cssHooks[u],void 0===r)return s&&"get"in s&&void 0!==(o=s.get(t,!1,i))?o:c[n]+"";"string"===(a=M(r))&&(o=H(r))&&o[1]&&(r=function(t,n,r,i){var o,a=1,s=20,u=function(){return e.css(t,n,"")},c=u(),l=r&&r[3]||(x.cssNumber[n]?"":"px"),d=(x.cssNumber[n]||"px"!==l&&+c)&&H(e.css(t,n));if(d&&d[3]!==l)for(l=l||d[3],r=r||[],d=+c||1;d/=a=a||".5",e.style(t,n,d+l),a!==(a=u()/c)&&1!==a&&--s;);return r&&(d=+d||+c||0,o=r[1]?d+(r[1]+1)*r[2]:+r[2]),o}(t,n,o),a="number"),null!=r&&r==r&&("number"===a&&(r+=o&&o[3]||(x.cssNumber[u]?"":"px")),W.clearCloneStyle||""!==r||0!==n.indexOf("background")||(c[n]="inherit"),s&&"set"in s&&void 0===(r=s.set(t,r,i))||(c[n]=r))}},e.css=function(e,t,n,r){var i,o=x.camelCase(t);return t=x.cssProps[o]||(x.cssProps[o]=U(o)||o),"normal"===(i=void 0===(i=(o=x.cssHooks[t]||x.cssHooks[o])&&"get"in o?o.get(e,!0,n):i)?u(e,t,r):i)&&t in S&&(i=S[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i},e.parseHTML=function(t,n){if(!t||"string"!=typeof t)return[];n=(n="boolean"!=typeof n&&n)||document;var r=D.exec(t);return r?[n.createElement(r[1])]:(r=function(t,n){for(var r,i,o,a,s,u,c=t.length,l=function(e){var t="abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video".split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}(n),d=[],h=0;h<c;h++)if((i=t[h])||0===i)if("object"===e.type(i))x.merge(d,i.nodeType?[i]:i);else if(_.test(i)){if(o=o||l.appendChild(n.createElement("div"))){for(a=(m.exec(i)||["",""])[1].toLowerCase(),o.innerHTML=(u=C[a]||C._default)[1]+x.htmlPrefilter(i)+u[2],r=u[0];r--;)o=o.lastChild;if(!W.leadingWhitespace&&p.test(i)&&d.push(n.createTextNode(p.exec(i)[0])),!W.tbody&&(r=(i="table"!==a||v.test(i)?"<table>"!==u[1]||v.test(i)?0:o:o.firstChild)&&i.childNodes.length,i))for(;r--;)x.nodeName(s=i.childNodes[r],"tbody")&&!s.childNodes.length&&i.removeChild(s);for(x.merge(d,o.childNodes),o.textContent="";o.firstChild;)o.removeChild(o.firstChild);o=l.lastChild}}else d.push(n.createTextNode(i));for(o&&l&&l.removeChild(o),h=0;i=d[h++];)"SCRIPT"!==i.tagName&&(O.contains(i.ownerDocument,i),l.appendChild(i));return o=null,l}([t],n),x.merge([],r.childNodes))}))}(le.Lib)}function _e(e){this.message=e}function ve(e){var t=this,n=t.constructor;for(t.__attrs={},t.__attrVals={},t.userConfig=e;n;)t.addAttrs(n.ATTRS),n=n.superclass?n.superclass.constructor:null;se.mix(t.__attrs,e)}var Ie=f.Dynamsoft=le;return t.default},"object"==typeof exports&&"object"==typeof e?e.exports=Q():"function"==typeof define&&define.amd?define([],Q):"object"==typeof exports?exports.Dynamsoft=Q():X.Dynamsoft=Q(),function(e){var t=e.DWT||(e.DWT={});e.Lib||(e.Lib={}),t.initQueue=[],e.initOrder=e.initOrder||[],e.unloadQueue=e.unloadQueue||[],window.Dynamsoft||(window.Dynamsoft=e)}(Z),Z.DWT.IfUseActiveXForIE10Plus=!1,function(t){if("object"==typeof exports)e.exports=t();else if("function"==typeof define&&define.amd)define(t);else{var n;try{n=window}catch(s){n=q}n.SparkMD5=t()}}((function(e){var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function n(e,t){var n=e[0],r=e[1],i=e[2],o=e[3];r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[0]-680876936|0)<<7|n>>>25)+r|0)&r|~n&i)+t[1]-389564586|0)<<12|o>>>20)+n|0)&n|~o&r)+t[2]+606105819|0)<<17|i>>>15)+o|0)&o|~i&n)+t[3]-1044525330|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[4]-176418897|0)<<7|n>>>25)+r|0)&r|~n&i)+t[5]+1200080426|0)<<12|o>>>20)+n|0)&n|~o&r)+t[6]-1473231341|0)<<17|i>>>15)+o|0)&o|~i&n)+t[7]-45705983|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[8]+1770035416|0)<<7|n>>>25)+r|0)&r|~n&i)+t[9]-1958414417|0)<<12|o>>>20)+n|0)&n|~o&r)+t[10]-42063|0)<<17|i>>>15)+o|0)&o|~i&n)+t[11]-1990404162|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[12]+1804603682|0)<<7|n>>>25)+r|0)&r|~n&i)+t[13]-40341101|0)<<12|o>>>20)+n|0)&n|~o&r)+t[14]-1502002290|0)<<17|i>>>15)+o|0)&o|~i&n)+t[15]+1236535329|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[1]-165796510|0)<<5|n>>>27)+r|0)&i|r&~i)+t[6]-1069501632|0)<<9|o>>>23)+n|0)&r|n&~r)+t[11]+643717713|0)<<14|i>>>18)+o|0)&n|o&~n)+t[0]-373897302|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[5]-701558691|0)<<5|n>>>27)+r|0)&i|r&~i)+t[10]+38016083|0)<<9|o>>>23)+n|0)&r|n&~r)+t[15]-660478335|0)<<14|i>>>18)+o|0)&n|o&~n)+t[4]-405537848|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[9]+568446438|0)<<5|n>>>27)+r|0)&i|r&~i)+t[14]-1019803690|0)<<9|o>>>23)+n|0)&r|n&~r)+t[3]-187363961|0)<<14|i>>>18)+o|0)&n|o&~n)+t[8]+1163531501|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[13]-1444681467|0)<<5|n>>>27)+r|0)&i|r&~i)+t[2]-51403784|0)<<9|o>>>23)+n|0)&r|n&~r)+t[7]+1735328473|0)<<14|i>>>18)+o|0)&n|o&~n)+t[12]-1926607734|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[5]-378558|0)<<4|n>>>28)+r|0)^r^i)+t[8]-2022574463|0)<<11|o>>>21)+n|0)^n^r)+t[11]+1839030562|0)<<16|i>>>16)+o|0)^o^n)+t[14]-35309556|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[1]-1530992060|0)<<4|n>>>28)+r|0)^r^i)+t[4]+1272893353|0)<<11|o>>>21)+n|0)^n^r)+t[7]-155497632|0)<<16|i>>>16)+o|0)^o^n)+t[10]-1094730640|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[13]+681279174|0)<<4|n>>>28)+r|0)^r^i)+t[0]-358537222|0)<<11|o>>>21)+n|0)^n^r)+t[3]-722521979|0)<<16|i>>>16)+o|0)^o^n)+t[6]+76029189|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[9]-640364487|0)<<4|n>>>28)+r|0)^r^i)+t[12]-421815835|0)<<11|o>>>21)+n|0)^n^r)+t[15]+530742520|0)<<16|i>>>16)+o|0)^o^n)+t[2]-995338651|0)<<23|r>>>9)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[0]-198630844|0)<<6|n>>>26)+r|0)|~i))+t[7]+1126891415|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[14]-1416354905|0)<<15|i>>>17)+o|0)|~n))+t[5]-57434055|0)<<21|r>>>11)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[12]+1700485571|0)<<6|n>>>26)+r|0)|~i))+t[3]-1894986606|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[10]-1051523|0)<<15|i>>>17)+o|0)|~n))+t[1]-2054922799|0)<<21|r>>>11)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[8]+1873313359|0)<<6|n>>>26)+r|0)|~i))+t[15]-30611744|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[6]-1560198380|0)<<15|i>>>17)+o|0)|~n))+t[13]+1309151649|0)<<21|r>>>11)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[4]-145523070|0)<<6|n>>>26)+r|0)|~i))+t[11]-1120210379|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[2]+718787259|0)<<15|i>>>17)+o|0)|~n))+t[9]-343485551|0)<<21|r>>>11)+i|0,e[0]=n+e[0]|0,e[1]=r+e[1]|0,e[2]=i+e[2]|0,e[3]=o+e[3]|0}function r(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}function i(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n}function o(e){var t,i,o,a,s,u,c=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=c;t+=64)n(l,r(e.substring(t-64,t)));for(i=(e=e.substring(t-64)).length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<i;t+=1)o[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(o[t>>2]|=128<<(t%4<<3),t>55)for(n(l,o),t=0;t<16;t+=1)o[t]=0;return a=(a=8*c).toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(a[2],16),u=parseInt(a[1],16)||0,o[14]=s,o[15]=u,n(l,o),l}function a(e){var n,r="";for(n=0;n<4;n+=1)r+=t[e>>8*n+4&15]+t[e>>8*n&15];return r}function s(e){var t;for(t=0;t<e.length;t+=1)e[t]=a(e[t]);return e.join("")}function u(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function c(e){var t,n=[],r=e.length;for(t=0;t<r-1;t+=2)n.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,n)}function l(){this.reset()}return s(o("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function t(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(n,r){var i,o,a,s,u=this.byteLength,c=t(n,u),l=u;return r!==e&&(l=t(r,u)),c>l?new ArrayBuffer(0):(i=l-c,o=new ArrayBuffer(i),a=new Uint8Array(o),s=new Uint8Array(this,c,i),a.set(s),o)}}(),l.prototype.append=function(e){return this.appendBinary(u(e)),this},l.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,i=this._buff.length;for(t=64;t<=i;t+=64)n(this._hash,r(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},l.prototype.end=function(e){var t,n,r=this._buff,i=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)o[t>>2]|=r.charCodeAt(t)<<(t%4<<3);return this._finish(o,i),n=s(this._hash),e&&(n=c(n)),this.reset(),n},l.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},l.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},l.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},l.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},l.prototype._finish=function(e,t){var r,i,o,a=t;if(e[a>>2]|=128<<(a%4<<3),a>55)for(n(this._hash,e),a=0;a<16;a+=1)e[a]=0;r=(r=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(r[2],16),o=parseInt(r[1],16)||0,e[14]=i,e[15]=o,n(this._hash,e)},l.hash=function(e,t){return l.hashBinary(u(e),t)},l.hashBinary=function(e,t){var n=s(o(e));return t?c(n):n},(l.ArrayBuffer=function(){this.reset()}).prototype.append=function(e){var t,r,o,a,s=(r=this._buff.buffer,o=e,(a=new Uint8Array(r.byteLength+o.byteLength)).set(new Uint8Array(r)),a.set(new Uint8Array(o),r.byteLength),a),u=s.length;for(this._length+=e.byteLength,t=64;t<=u;t+=64)n(this._hash,i(s.subarray(t-64,t)));return this._buff=t-64<u?new Uint8Array(s.buffer.slice(t-64)):new Uint8Array(0),this},l.ArrayBuffer.prototype.end=function(e){var t,n,r=this._buff,i=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)o[t>>2]|=r[t]<<(t%4<<3);return this._finish(o,i),n=s(this._hash),e&&(n=c(n)),this.reset(),n},l.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},l.ArrayBuffer.prototype.getState=function(){var e=l.prototype.getState.call(this);return e.buff=String.fromCharCode.apply(null,new Uint8Array(e.buff)),e},l.ArrayBuffer.prototype.setState=function(e){return e.buff=function(e,t){var n,r=e.length,i=new ArrayBuffer(r),o=new Uint8Array(i);for(n=0;n<r;n+=1)o[n]=e.charCodeAt(n);return o}(e.buff),l.prototype.setState.call(this,e)},l.ArrayBuffer.prototype.destroy=l.prototype.destroy,l.ArrayBuffer.prototype._finish=l.prototype._finish,l.ArrayBuffer.hash=function(e,t){var r=s(function(e){var t,r,o,a,s,u,c=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=c;t+=64)n(l,i(e.subarray(t-64,t)));for(r=(e=t-64<c?e.subarray(t-64):new Uint8Array(0)).length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<r;t+=1)o[t>>2]|=e[t]<<(t%4<<3);if(o[t>>2]|=128<<(t%4<<3),t>55)for(n(l,o),t=0;t<16;t+=1)o[t]=0;return a=(a=8*c).toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(a[2],16),u=parseInt(a[1],16)||0,o[14]=s,o[15]=u,n(l,o),l}(new Uint8Array(e)));return t?c(r):r},l}));var $={7682:function(e,t,n){e.exports=n(2626)},1445:function(e,t,n){e.exports=n(4122)},8066:function(e,t,n){e.exports=n(1086)},3701:function(e,t,n){e.exports=n(7895)},699:function(e,t,n){e.exports=n(4442)},5683:function(e,t,n){e.exports=n(9447)},677:function(e,t,n){e.exports=n(5376)},1006:function(e,t,n){e.exports=n(6769)},5238:function(e,t,n){e.exports=n(1493)},3662:function(e,t,n){e.exports=n(1777)},1614:function(e,t,n){e.exports=n(5319)},9104:function(e,t,n){e.exports=n(5425)},2825:function(e,t,n){e.exports=n(2740)},189:function(e,t,n){e.exports=n(6094)},4341:function(e,t,n){e.exports=n(3685)},4889:function(e,t,n){e.exports=n(4303)},9356:function(e,t,n){e.exports=n(3799)},9542:function(e,t,n){e.exports=n(5122)},5005:function(e,t,n){e.exports=n(1645)},7711:function(e,t,n){e.exports=n(3103)},9798:function(e,t,n){e.exports=n(9531)},3535:function(e,t,n){e.exports=n(856)},6019:function(e,t,n){e.exports=n(1490)},4579:function(e,t,n){e.exports=n(4803)},1446:function(e,t,n){e.exports=n(6600)},3882:function(e,t,n){e.exports=n(9759)},9927:function(e,t,n){e.exports=n(7740)},6944:function(e,t,n){e.exports=n(8714)},373:function(e,t,n){e.exports=n(2790)},3887:function(e,t,n){n.d(t,{Ho:function(){return i}}),t=n(5238);var r=n.n(t);function i(e){var t=Z.DWT.EnumDWT_ImageType,n=e;return(e instanceof ArrayBuffer||e instanceof Array)&&(n=new Uint8Array(r()(e).call(e,0,12))),37==(e=n)[0]&&80==e[1]&&68==e[2]&&70==e[3]?t.IT_PDF:73==(e=n)[0]&&73==e[1]&&42==e[2]&&0==e[3]||77==e[0]&&77==e[1]&&0==e[2]&&42==e[3]?t.IT_TIF:137==(e=n)[0]&&80==e[1]&&78==e[2]&&71==e[3]?t.IT_PNG:255==(e=n)[0]&&216==e[1]?t.IT_JPG:66==(e=n)[0]&&77==e[1]?t.IT_BMP:0==(e=n)[0]&&0==e[1]&&0==e[2]&&12==e[3]&&106==e[4]&&80==e[5]&&32==e[6]&&32==e[7]||255==e[0]&&79==e[1]&&255==e[2]&&81==e[3]?t.IT_J2K:t.IT_PNG}},9158:function(e,t,n){function r(e){return e}n.d(t,{T:function(){return r}})},668:function(e,t,n){n.d(t,{KX:function(){return i},ME:function(){return o},zW:function(){return r}});var r=3006,i=5001;function o(e){switch(e){case 0:return"3011";case 1:return"3012";case 2:return"3014";case 3:return"3013";case 4:return"3015";case 14:return"3016";case 3001:return"3001";case 3002:return"3002";case 3003:return"3003";case 3004:return"3004";case 3005:return"3005";case r:return"3006";case 3007:return"3007";case i:return"5001";case 4001:return"4001";case 4002:return"4002";case 4003:return"4003"}return""}},6870:function(){Z.Lib.domReady((function(){var e=document.createElement("style"),t=["dialog[open]{display:block}dialog[closed]{display:none}.dynamsoft-backdrop{position:fixed;background:rgba(128,128,128,0.1);top:0;bottom:0;left:0;right:0;z-index:-99999999;}.dynamsoft-dwt-dialogProgress{width:330px;background:#FFF}.dynamsoft-finalMessage{margin:0;color:#3a3a3a;font:20px Arial,sans-serif}.dynamsoft-desc{margin:7px 0;color:#3a3a3a;font:14px Arial,sans-serif}.dynamsoft-status{color:#555;font:14px/22px Arial,sans-serif;margin-bottom:5px}.dynamsoft-progressBar{-webkit-appearance:none;width:280px;margin-bottom:20px;height:14px}.dynamsoft-progressBar,.dynamsoft-progressBar::-webkit-progress-bar{background-color:#e7e7e7;border-radius:7px}.dynamsoft-progressBar::-webkit-progress-value,.dynamsoft-progressBar::-moz-progress-bar{background-color:#50a8e1;border-radius:7px}.dynamsoft-loadingMsg{width:290px;height:290px;margin:auto;color:#CCC;border-width:1px;background:#FFF}.dynamsoft-loadingMsg-msg{margin:0 0 15px 25px;color:#3a3a3a;font:20px Arial,sans-serif}.dynamsoft-loadingMsg-desc{text-align:center;margin:0 0 15px 0;color:#3a3a3a;font:14px Arial,sans-serif}.ds-dwt-loaderBar-noserver-parent{height:100%;}.ds-dwt-loaderBar-noserver{margin: 0 auto;padding-top: 50px;text-align: center;}.ds-dwt-loaderBar-noserver img{height: 100px}"].join("");e.type="text/css";try{e.appendChild(document.createTextNode(t))}catch(f){e.styleSheet.cssText=t}document.body.appendChild(e)}))},9032:function(){var e=Z.Lib;e.detect.showMask=function(t){e.detect.bMaskShow=!0,Z.DWT.ScanDirectly||(e.isFunction(Z.OnWebTwainPreExecuteCallback)?Z.OnWebTwainPreExecuteCallback():e.detect.OnWebTwainPreExecute(Z.DWT.IfConfineMaskWithinTheViewer,t))},e.detect.OnWebTwainPreExecute=function(t,n){var r;if(t&&(n?r=n._containerElement:0<Z.DWT.Containers.length&&Z.DWT.Containers[0].ContainerId&&(r=Z.Lib.get(Z.DWT.Containers[0].ContainerId)),r)){var i=r.getBoundingClientRect(),o=r.firstChild;if(o){for(;o;){if(e.isFunction(o.getBoundingClientRect)){i=o.getBoundingClientRect();break}o=o.nextSibling}r=o}}(null==i||1<Z.DWT.Containers.length||1==Z.DWT.Containers.length&&(0==i.width||0==i.height))&&(t=!1,r=null),e.showMask(n=t?{confined:t,wrapperEl:r}:{})},e.detect.hideMask=function(){e.detect.bMaskShow=!1,Z.DWT.ScanDirectly||(e.isFunction(Z.OnWebTwainPostExecuteCallback)?Z.OnWebTwainPostExecuteCallback():e.detect.OnWebTwainPostExecute())},e.detect.OnWebTwainPostExecute=e.hideMask},4393:function(){var e=Z.Lib;e.install={_divDWTNonInstallContainerID:"dwt-NonInstallContainerID",_divDWTemessageContainer:"",_dlgInstall:!1},e.install._strNonInstallDIV=['<div style="text-align:center;" id="',e.install._divDWTNonInstallContainerID,'"></div>'].join("")},5775:function(e,t,n){n.r(t),t=n(3662);var r=n.n(t),i=n(1695),o=(t=n(3535),n.n(t)),a=n(8420),s=n(7344);function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var c=n(189),l=n(4341),d=n(9542),h=n(1445);function g(e,t){var n;return(g=d?h(n=d).call(n):function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=c(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),l(e,"prototype",{writable:!1}),t&&g(e,t)}var m=n(9623);function p(e,t){if(t&&("object"===(0,m.Z)(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return u(e)}var _=n(4889);function v(e){var t;return(v=d?h(t=_).call(t):function(e){return e.__proto__||_(e)})(e)}function I(e,t,n){if(t.has(e))return t.get(e);throw new TypeError("attempted to "+n+" private field on non-instance")}function y(e,t){return t=I(e,t,"get"),e=e,(t=t).get?t.get.call(e):t.value}t=n(4845);var b=n(6944),D=(b=n.n(b),n(373));D=n.n(D);var T=n(5238),S=n.n(T),w=new(b()),C=function(){function e(){(0,a.Z)(this,e),function(e,t,n){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object");t.set(e,{writable:!0,value:{}})}(this,w)}return(0,s.Z)(e,[{key:"fire",value:function(e){var t,n=this;e=e.toLowerCase(),t=S()(Array.prototype).call(arguments,1),i.D.each(y(n,w)[e]||[],(function(e){var r=e.f;e=e.c||n;try{r.apply(e,t)}catch(b){i.D.log(b)}}))}},{key:"on",value:function(e,t,n){e=e.toLowerCase(),y(this,w)[e]=y(this,w)[e]||[],y(this,w)[e].push({f:t,c:n})}},{key:"off",value:function(e,t,n){if(e&&t){e=e.toLowerCase();for(var i=y(this,w)[e]||[],o=i.length-1;0<=o;o--)i[o]===t&&r()(i).call(i,o,1)}else!function(e,t,n){if((t=I(e,t,"set")).set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(this,w,{})}}]),e}(),E=(T=n(7711),n.n(T));function M(e){var n=function(){if("undefined"==typeof Reflect||!o())return!1;if(o().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(o()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var t,r=v(e);return p(this,n?(t=v(this).constructor,o()(r,arguments,t)):r.apply(this,arguments))}}function P(e,t){A(e,t),t.add(e)}function A(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function x(e,t,n){if(t.has(e))return n;throw new TypeError("attempted to get private field on non-instance")}var R="[bio]: ",k=(T=i.D.win)&&T.FormData,L=new(b()),F=new(D()),W=new(D()),O=new(D()),B=new(D()),N=new(D()),V=new(D()),U=new(D()),G=new(D()),j=new(D()),H=new(D()),z=function(){f(t,C);var e=M(t);function t(n){var r,o,s,c;return(0,a.Z)(this,t),P(u(r=e.call(this)),H),P(u(r),j),P(u(r),G),P(u(r),U),P(u(r),V),P(u(r),N),P(u(r),B),P(u(r),O),P(u(r),W),P(u(r),F),c={writable:!0,value:{}},A(o=u(r),s=L),s.set(o,c),i.D.mix(y(u(r),L),{action:"",data:{},bChunkedSendData:!0,blockSize:0,ajaxConfig:{value:{},type:"post",processData:!1,cache:!1,dataType:"text",async:!0,contentType:!1,retry:0,headers:{"X-Requested-With":!1}},ajax:"",formData:"",CORS:!1,bOnlyEmptyIsOK:!0}),i.D.mix(y(u(r),L),n),x(u(r),F,K).call(u(r)),r}return(0,s.Z)(t,[{key:"get",value:function(e){return e in y(this,L)?y(this,L)[e]:""}},{key:"set",value:function(e,t){e in y(this,L)&&(y(this,L)[e]=t)}},{key:"uploadToServer",value:function(e){var t;return(0<(t=this).get("blockSize")&&e&&0<e.size?x(t,B,X):x(t,W,J)).call(t,e)}},{key:"uploadFilesToServer",value:function(e){return x(this,O,Y).call(this,e)}},{key:"abort",value:function(){var e=this.get("ajax");return i.D.isObject(e)?(e.abort(),this.set("ajax",!1)):i.D.log(R+"abort(), the value of io invalid!"),this}},{key:"setRequestHeader",value:function(e,t){var n=this.get("ajaxConfig");return n.headers[e]=t,this.set("ajaxConfig",n),t}}]),t}();function K(){this.get("CORS");var e=this.get("ajaxConfig");return i.D.mix(e,{xhrFields:{withCredentials:!1}}),e}function J(e){var t=this,n=t.get("ajaxConfig"),r=!0,o=(x(t,N,Q).call(t),e&&0<e.size&&(x(t,V,q).call(t,e),t.name=i.D.isString(e.name)&&""!=e.name?e.name:e.fileName),i.D.mix(n,{data:t.get("formData"),url:t.get("action"),beforeSend:function(e,n,r){e.upload.addEventListener("progress",(function(e){t.fire(z.event.PROGRESS,{loaded:e.loaded,total:e.total,name:t.name})}),!1)}}),i.D.mix(n,{method:"POST",onSuccess:function(e){var n="";e&&(i.D.isArray(e)&&1<e.length?n=e[0]:i.D.isString(e)&&(n=e)),n=x(t,H,ne).call(t,n),t.fire(z.event.SUCCESS,n)},onError:function(n,o,a){var s;r=!1,n=n&&i.D.isArray(n)&&2<n.length?(s=n[1],n[2]):(s=o,a),x(t,U,$).call(t,n,s,e)}}),i.D.ajax(n));return t.set("formData",null),n.async?(t.set("ajax",o),!0):(t.set("ajax",!1),r)}function Y(e){var t=this,n=t.get("ajaxConfig"),r=!0,o=[],a=(x(t,N,Q).call(t),i.D.each(e,(function(e){e&&0<e.size?(x(t,V,q).call(t,e),i.D.isString(e.name)&&""!=e.name?o.push(e.name):o.push(e.fileName)):o.push("")})),i.D.mix(n,{data:t.get("formData"),url:t.get("action"),beforeSend:function(e,n,r){e.upload.addEventListener("progress",(function(e){t.fire(z.event.PROGRESS,{loaded:e.loaded,total:e.total,name:""})}),!1)}}),i.D.mix(n,{method:"POST",onSuccess:function(e){var n="";o=[],e&&(i.D.isArray(e)&&1<e.length?n=e[0]:i.D.isString(e)&&(n=e)),n=x(t,H,ne).call(t,n),t.fire(z.event.SUCCESS,n)},onError:function(n,a,s){var u;r=!1,o=[],n=n&&i.D.isArray(n)&&2<n.length?(u=n[1],n[2]):(u=a,s),x(t,U,$).call(t,n,u,e)}}),t.name="",i.D.ajax(n));return t.set("formData",null),n.async?(t.set("ajax",a),!0):(t.set("ajax",!1),r)}function X(e){var t=this,n=t.get("ajaxConfig"),r=function(n,r,o){var a;n=n&&i.D.isArray(n)&&2<n.length?(a=n[1],n[2]):(a=r,o),x(t,U,$).call(t,n,a,e)},o=(i.D.mix(n,{url:t.get("action")}),e.size),a=0,s=t.get("blockSize")||o,u=S()(e)||e.webkitSlice||e.mozSlice;!function c(l){var d=u.call(e,a,a+s,e.type),h=d.size,g=e.name;x(t,j,te).call(t,a,h,o),x(t,N,Q).call(t),l&&t.set("data",[]),i.D.isString(g)&&""!=g||(g=e.fileName),d.name=g,t.name=g,x(t,V,q).call(t,d),i.D.mix(n,{data:t.get("formData")}),i.D.mix(n,{method:"POST",onSuccess:function(e,n,r){a=x(t,G,ee).call(t,r)||a+h,t.fire(z.event.PROGRESS,{loaded:a,total:o,name:t.name}),a<o?c(!1):function(e){var n="";e&&(i.D.isArray(e)&&1<e.length?n=e[0]:i.D.isString(e)&&(n=e)),n=x(t,H,ne).call(t,n),t.fire(z.event.SUCCESS,n)}(e)},onError:r}),i.D.ajax(n),t.set("formData",null)}(!0)}function Q(){var e,t=this.get("data");if(k)if(t instanceof k)this.set("formData",t);else{e=new k;try{i.D.each(t,(function(t,n){e.append(n,t)})),this.set("formData",e)}catch(n){i.D.log(R+"something error when reset FormData.")}}else i.D.log(R+"the browser does not support ajax.")}function q(e){if(!i.D.isObject(e))return i.D.log(R+"_addFileData(), file parameter invalid!"),!1;var t=this.get("formData"),n=(n=e.remoteFilename)||"RemoteFile";return t.append(n,e,e.name),this.set("formData",t),t}function $(e,t,n){var r=z.status.ERROR;t={status:r,msg:t,response:!1,name:this.name},e&&(t.httpStatus=e.status,t.response=e.responseText),this.fire(r,t)}function ee(e){return(e=(e=(e=e.getResponseHeader("Range"))&&e.split("-"))&&1<e.length&&E()(e[1],10))&&e+1}function te(e,t,n){return e="bytes "+e+"-"+(e+t-1)+"/"+n,this.get("ajaxConfig").headers["Content-Range"]=e}function ne(e){var t,n,r,o,a=!1,s=this.name,u=z.status.SUCCESS,c=z.event.ERROR;if(i.D.log("Response from server: "+e),!this.get("bOnlyEmptyIsOK"))return{status:u,msg:!1,json:!1,response:e,name:s};if(i.D.isUndefined(e)||""===e)o={status:u,msg:!1,json:!1,response:"",name:s};else if(i.D.isString(e)){try{for(t=0;t<e.length&&!(10<t);t++){if("{"==(n=e[t])){a=!0;break}if(" "!=n&&"\r"!=n&&"\n"!=n&&"\t"!=n)break}a&&(o=1==(r=i.D.parse(e)).status?{status:u,msg:!1,json:r,response:e,name:s}:{status:c,msg:!1,json:r,response:e,name:s})}catch(y){a=!1,i.D.log(y)}a||(o=""==String(e).replace(/( |\t|\r|\n)/g,"")?{status:u,msg:!1,json:!1,response:e,name:s}:{status:c,msg:!1,json:!1,response:e,name:s})}else o={status:u,msg:!1,json:!1,response:"",name:s};return o}function re(e){var n=function(){if("undefined"==typeof Reflect||!o())return!1;if(o().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(o()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var t,r=v(e);return p(this,n?(t=v(this).constructor,o()(r,arguments,t)):r.apply(this,arguments))}}function ie(e,t){oe(e,t),t.add(e)}function oe(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ae(e,t,n){if(t.has(e))return n;throw new TypeError("attempted to get private field on non-instance")}(0,t.Z)(z,"event",{SUCCESS:"success",ERROR:"error",PROGRESS:"progress"}),(0,t.Z)(z,"status",{SUCCESS:"success",ERROR:"error"});var se=new(b()),ue=new(D()),ce=new(D()),le=new(D()),de=new(D()),he=function(){f(t,C);var e=re(t);function t(n){var r,o,s,c;return(0,a.Z)(this,t),ie(u(r=e.call(this)),de),ie(u(r),le),ie(u(r),ce),ie(u(r),ue),c={writable:!0,value:{}},oe(o=u(r),s=se),s.set(o,c),i.D.mix(y(u(r),se),{action:"",retry:0,timeout:0,CORS:!1,async:!0,dataType:"text",fileStatus:"",uploadType:!1,data:{},bOnlyEmptyIsOK:!0}),i.D.mix(y(u(r),se),n),ae(u(r),ce,fe).call(u(r)),r}return(0,s.Z)(t,[{key:"get",value:function(e){return e in y(this,se)?y(this,se)[e]:""}},{key:"set",value:function(e,t){e in y(this,se)&&(y(this,se)[e]=t)}},{key:"upload",value:function(e){var t,n=this.get("uploadType");if(e){if(i.D.isArray(e))return n.uploadFilesToServer(e);if(i.D.isObject(e))return(t=e).size?(t.id||(t.id=i.D.guid("file-")),t.size&&(t.textSize=ae(this,ue,ge).call(this,t.size))):t.size=0,n.uploadToServer(t)}return n.uploadToServer(e)}},{key:"abort",value:function(){return this.get("uploadType").abort(),!0}},{key:"setRequestHeader",value:function(e,t){this.get("uploadType").setRequestHeader(e,t)}}]),t}();function ge(e){for(var t=-1;t++,99<(e/=1024)&&t<4;);return Math.max(e,.1).toFixed(1)+["KB","MB","GB","TB"][t]}function fe(){var e=this,t={action:e.get("action"),data:e.get("data"),CORS:e.get("CORS"),bOnlyEmptyIsOK:e.get("bOnlyEmptyIsOK")},n=(t=new z(t)).get("ajaxConfig");return n&&(n.dataType=e.get("dataType"),n.async=e.get("async"),n.retry=e.get("retry")),t.on(z.event.SUCCESS,ae(e,de,pe),e),t.on(z.event.ERROR,ae(e,de,pe),e),t.on(z.event.PROGRESS,ae(e,le,me),e),e.set("uploadType",t),t}function me(e){this.fire(he.event.PROGRESS,e)}function pe(e){var t=e.status,n=e.msg,r=this.get("file");i.D.mix(e,{file:r}),"success"===t?this.fire(he.event.SUCCESS,e):(!1!==n&&("abort"===n?i.D.mix(e,{canceled:!0}):"timeout"===n&&i.D.mix(e,{timeout:!0})),this.fire(he.event.ERROR,e))}(0,t.Z)(he,"event",{SUCCESS:"success",ERROR:"error",PROGRESS:"progress"}),T=n(4579);var _e=n.n(T),ve=(i.I.DWT.__innerCheckCertDate=function(e){var t,n=Date.parse(e+"T00:00:00");""==e||isNaN(n)||i.I.DWT.CheckCertExpired&&(t=(new Date).getTime(),n-864e5*i.I.DWT.CertificateConfig.UpdateDaysBeforeExpired<=t&&(i.D.isFunction(i.I.OnCertExpired)&&i.I.OnCertExpired(e),_e()((function(){i.I.DWT.UpdateCert(i.I.DWT.CertificateConfig.URL,i.I.OnUpdateCertSuccess,i.I.OnUpdateCertFailure)}),5e3)))},i.I.DWT.__innerUpdateCert=function(e,t,n,r){var o=i.I.dcp;t=[t=t?o._getHttpPreUrl(o.detect.curPortIndex):o._getPreUrl(o.detect.curPortIndex),o._getModuleName(),o._getModuleVer(),"/LoadZipFromBytes?type=",2,"&dsver=",o.getServiceVersion().join(""),"&ts=",i.D.now()].join(""),i.D.ajax({method:"POST",url:t,async:!0,data:e,onSuccess:n,onError:function(){i.D.isFunction(r)&&r()}})},i.I.DWT.__innerReboot=function(e,t){var n=i.I.dcp,r=[n._getPreUrl(n.detect.curPortIndex),n._getModuleName(),n._getModuleVer(),"/admin?ts=",i.D.now()].join("");i.D.ajax({method:"POST",url:r,async:!0,data:'{"id":"'+(new Date).getTime().toString()+'","method":"Reboot","parameter":[],"version":"dwasm2_'+n._getModuleVer()+'"}',onSuccess:e,onError:t})},i.I.DWT.UpdateCert=function(e,t,n){i.D.isString(e)&&""!=e?i.D.fetch(e,{mode:"cors",dataType:"arraybuffer"}).then((function(e){i.I.DWT.__innerUpdateCert(e,!1,(function(){i.I.DWT.CheckCertExpired=!1,i.D.isFunction(t)&&t()}),(function(){i.I.navInfoSync.bSSL?i.I.DWT.__innerUpdateCert(e,!0,t,n):i.D.isFunction(n)&&n()})),e=null}),n):i.D.isFunction(n)&&n()},b=n(1614),n.n(b)),Ie=Z.Lib,ye=((D={Errors:{FilePathSyntaxIncorrect:function(e){e._errorCode=-3123,e._errorString="The filename, directory name, or volume label syntax is incorrect."}},checkFilePath:function(e,t){return Ie.isString(t)&&0!=t.length?!(ve()(Ie).call(Ie,t,"http://")||ve()(Ie).call(Ie,t,"https://")||ve()(Ie).call(Ie,t,"ftp://"))||(Ie.File.Errors.FilePathSyntaxIncorrect(e),!1):(Ie.Errors.InvalidFile(e),!1)}}).checkFolder=D.checkFilePath,Ie.File=D,Ie.showProgress=function(){},Ie.closeProgress=function(){},t=n(5683),n.n(t)),be=(T=n(9104),n.n(T)),De=n(1255),Te=De.CH+".",Se=Z.Lib,we=(Se.License={isLTS:function(){return Se.isString(Z.DWT.handshakeCode)||Se.isString(Z.DWT.organizationID)||Z.DWT.isPublicLicense()},_innerCheckProductKey:function(e,t,n,i){var o,a=i,s=e.__licenseInfo;if(s&&s.LTS){if(!s||!Se.isArray(s.Detail)||0==s.Detail.length)return Z.Lib.License.isLTS()?Se.Errors.LicenseNoCore(e):Se.Errors.LicenseEmptyOrInvalid(e),Se.License.ShowInvalidLicense("",!0),!1;a=!1}else if(!Se.isString(Z.DWT.ProductKey)||""==Z.DWT.ProductKey||"******"==Z.DWT.ProductKey||!s||!Se.isArray(s.Detail)||0==s.Detail.length)return Z.Lib.License.isLTS()?Se.Errors.LicenseNoCore(e):Se.Errors.LicenseEmptyOrInvalid(e),Se.License.ShowInvalidLicense("",!0),!1;var u,c,l,d=0,h=0,g=[],f=[],m=!1,p=!1,_=!1,v=!1,I=!1,y=!1;if(!this.isBindDomainOK(s.Domain))return Se.Errors.LicenseBadDomain(e),a&&Se.License.promptLicenseErr(e),!1;for(0<s.Detail.length&&(o="FALSE"!=(x=s.Detail[0]).Trial),T=1;T<s.Detail.length;T++)if("FALSE"==(x=s.Detail[T]).Trial&&o||"TRUE"==x.Trial&&!o)return Se.Errors.LicenseTrialFullMixed(e),a&&Se.License.promptLicenseErr(e),!1;if(t.Core||t.Webcam){for(var b=[],D=!1,T=0;T<s.Detail.length;T++)if(R=this.getEnumLicenseType((x=s.Detail[T]).EnumLicenseType),(t.Core||!t.Wasm)&&R.Core||(t.Webcam||!t.Wasm)&&R.Webcam){var S,w=this.getLicenseType(x.LicenseType);if(Se.isString(x.Version)&&0==ye()(S=x.Version).call(S,Te)){if(Se.product.bHTML5Edition){if(w.ActiveX&&!w.Html5)continue;f.push(x)}else{if(!w.ActiveX&&w.Html5)continue;f.push(x)}D=!0}else b.push(x)}else f.push(x);if(!D&&0<b.length)return r()(b).call(b,0),i=(0==De.Ne?[De.CH,De.$n]:[De.CH,De.$n,De.Ne]).join("."),Se.Errors.LicenseVersionNotCurrent(e,i),a&&Se.License.promptLicenseErr(e),!1;r()(b).call(b,0)}else f=s.Detail;for(T=0;T<f.length;T++){var C,M,P,A=!0,x=f[T],R=this.getEnumLicenseType(x.EnumLicenseType);(t.Core||this.isAllowLicenseType(R,t))&&(C=x.ExpireDate.replace(/-/g,"/"),(P="FALSE"!=x.Trial)&&!Z.DWT.HideTrialMessage&&(M=this.remainExpireDays(C))<=5&&(Se.isFunction(Z.OnLicenseExpiredMessage)&&Z.OnLicenseExpiredMessage(C,M),Z.DWT.HideTrialMessage=!0),this.isExpiredOrFuture(C,P)?g.push(C):R.Core&&15<=E()(x.Version)||!R.Core?t.Wasm?(M=!1,(M=!!(t.Core&&R.Core||t.PDFRasterizer&&R.PDFRasterizer||t.Webcam&&R.Webcam)||M)&&(-1<ye()(P=x.OS.toLowerCase()).call(P,"wasm")?this.isBrowserOK(x.Browser)||n?(d++,A=!1):p=!0:t.PDFRasterizer?I=!0:t.Webcam?y=!0:v=!0)):this.isOSOK(x.OS,e)?this.isBrowserOK(x.Browser)||n?(d++,A=!1):p=!0:m=!0:_=!0,A&&h++)}if(0<d)return!0;if(0==h)return this.setNoAllowedLicenseTypeError(e,t),a&&Se.License.promptLicenseErr(e),!1;if(0<g.length){var k,L=0,F=1e20,W="",O=(new Date).getTime();for(C="",T=0;T<g.length;T++)(k=this.parseDateFromString(g[T])).getTime()<O&&k.getTime()>L?(L=k.getTime(),C=g[T]):k.getTime()>O&&k.getTime()<F&&(F=k.getTime(),W=g[T]);return""!=C?(k=this.parseDateFromString(C),C=this.getLicenseDateString(k),Se.Errors.LicenseExpired(e,C),Z.Lib.License.isLTS()||Se.License.ShowInvalidLicense(C,o),a=!1):""!=W?(k=this.parseDateFromString(W),W=this.getLicenseDateString(k),Se.Errors.LicenseIsFuture(e,W)):(Se.Errors.LicenseExpired(e,""),a=!1,Se.License.ShowInvalidLicense()),a&&Se.License.promptLicenseErr(e),!1}return _?(Se.Errors.LicenseLower(e),a&&Se.License.promptLicenseErr(e),!1):(i=Z.navInfoSync,p?(i.bEdge?Se.Errors.LicenseNoEdge(e):i.bChrome?Se.Errors.LicenseNoChrome(e):i.bFirefox?Se.Errors.LicenseNoFirefox(e):i.bIE?Se.Errors.LicenseNoIE(e):i.bSafari?Se.Errors.LicenseNoSafari(e):Se.Errors.LicenseNotSupportBorwser(e),a&&Se.License.promptLicenseErr(e)):m?(l=c=u=!1,e._bRemoteMode?e.__serverPlatform==Z.DWT.EnumDWT_PlatformType.enumWindow?l=!0:e.__serverPlatform==Z.DWT.EnumDWT_PlatformType.enumLinux?c=!0:e.__serverPlatform==Z.DWT.EnumDWT_PlatformType.enumMac&&(u=!0):(u=i.bMac,c=i.bLinux,l=i.bWin),l?Se.Errors.LicenseNotSupportWindows(e):u?Se.Errors.LicenseNotSupportMAC(e):c?Se.Errors.LicenseNotSupportLinux(e):Se.Errors.LicenseNotSupportOS(e),a&&Se.License.promptLicenseErr(e)):v?(Se.Errors.LicenseNotSupportWasm(e),a&&Se.License.promptLicenseErr(e)):I?(Se.Errors.LicenseNotSupportPdfRWasm(e),a&&Se.License.promptLicenseErr(e)):y?(Se.Errors.LicenseNotSupportWebcamWasm(e),a&&Se.License.promptLicenseErr(e)):(Se.Errors.LicenseEmptyOrInvalid(e),a&&this.promptLicenseErr(e)),!1)},checkProductKey:function(e,t,n,r){var i=Z.DWT.licenseException,o=!0;return(Z.Lib.isString(Z.DWT.handshakeCode)||Z.Lib.isString(Z.DWT.organizationID))&&Z.Lib.isString(Z.DWT.ProductKey)&&(Z.Lib.Errors.LongKeyShortKeyMixed(e),o=!1),(o=o&&Z.Lib.License._innerCheckProductKey(e,t,n,r))||(i.code=e._errorCode,i.message=e._errorString,i.fromLTS=!1),o},promptLicenseErr:function(e){var t,n=!1,r=640<(r=screen.width)?640:r-10;Se.isNumber(e.ErrorCode)?(n=e.ErrorCode,t=e.ErrorString):Se.isNumber(e.code)?(n=e.code,t=e.message):Se.isString(e.message)&&(n=!0,t=e.message),!1!==n&&Z.DWT.ShowMessage(['<div class="dynamsoft-dwt-dlg-tips" style="text-align:left">',t,"</div>",'<div style="padding-top:35px"></div>'].join(""),{width:r,height:0,headerStyle:1})},ShowInvalidLicense:function(e,t){if(!Se.detect.needUpgrade){if(Se.License.isLTS())return n=Z.DWT.licenseException.message,void(Z.OnLTSLicenseError&&Z.OnLTSLicenseError(Z.Lib.License.getPublicLicenseContent(n)));var n=[],r="is not valid",i=640<(i=screen.width)?640:i-10;e&&""!=e&&(r=-1==ye()(e).call(e,"on")?"has expired on "+e:"has expired "+e),n.push('<div style="padding:0 25px 25px 25px;">'),Se.env.bMobile?(n.push("The <strong>ProductKey</strong> is not valid."),t&&(n.push(" Please <br /><ul><li>1. <a class='dynamsoft-major-color' href='https://www.dynamsoft.com/customer/license/trialLicense?product=dwt&utm_source=in-product' target='_blank'>Request a trial license</a>.</li>"),n.push("<li>2. <a class='dynamsoft-major-color' href='https://www.dynamsoft.com/web-twain/docs/indepth/development/upgrade.html#update-the-product-key?product=dwt&utm_source=in-product' target='_blank'>Update the ProductKey</a>.</li>"),n.push("</ul>"))):t?(n.push("You are seeing this message because your trial key "),n.push(r),n.push(". Two quick steps to extend your trial: <br /><div><ul>"),n.push("<li style='padding-left:25px'>1.<strong><a class='dynamsoft-major-color' href='https://www.dynamsoft.com/customer/license/trialLicense?product=dwt&utm_source=in-product' target='_blank'>Request a new trial key</a></strong> and follow the instructions to set the new key</li>"),n.push("<li style='padding-left:25px'>2.Refresh your scan page and try again</li>"),n.push("</ul></div>If you run into any issues, please <a class='dynamsoft-major-color' href='https://www.dynamsoft.com/company/contact/' target='_blank'>contact us</a>.")):(n.push("You are seeing this message because the license for doc scanning support "),n.push(r),n.push(".<br /><div><ul>"),n.push("<li><strong>If you are the owner of the website</strong>, please <a class='dynamsoft-major-color' href='https://www.dynamsoft.com/customer/order/renewalList' target='_blank'>renew your license</a> and follow the instructions to set the new key. Please <a class='dynamsoft-major-color' href='https://www.dynamsoft.com/company/contact/' target='_blank'>contact us</a> if you need any help.</li>"),n.push("<li><strong>If you are an end-user</strong>, please inform the owner or developer of this website.</li>"),n.push("</ul></div>")),n.push("</div>"),Z.DWT.ShowMessage(n.join(""),{width:i,height:0,headerStyle:1}),!Se.env.bMobile||(e=Se.one(".ds-dwt-ui-dlg-wrap"))&&0<e.length&&(e[0].style.fontSize="1.5em",e[0].style.lineHeight="1.5em")}},isBindDomainOK:function(e){if(Se.isUndefined(e)||null==e||""==e||"*"==e||"*.*"==e)return!0;var t=location.hostname,n=!1;if(""==t)return!0;for(var r=t.toLowerCase().split("."),i=r.length,o=e.toLowerCase().split(";"),a=0;a<o.length;a++){var s=o[a];if("*.*"==s){n=!0;break}var u=s.split("."),c=u.length;if(0<c&&c-1<=i){for(var l,d=!0,h=c-1;0<h;h--){if(-1<ye()(l=u[h]).call(l,"*")){n=!0;break}if(0<=h+i-c){if(r[h+i-c]!=u[h]){d=!1;break}}else if("*"!=u[h]){d=!1;break}}if(d&&("*"==u[0]||c<=i&&r[i-c]==u[0])){n=!0;break}}}return n},isExpiredOrFuture:function(e,t){if(""==e)return!1;if(!t&&2<(n=e.length)&&"/"==e[n-2]&&"0"==e[n-1])return!1;var n=this.parseDateFromString(e),r=(e=(new Date).getTime())+5184e6;return n.getTime()<e||!!(t&&n.getTime()>r)},remainExpireDays:function(e){if(""==e)return 65536;e=this.parseDateFromString(e);var t=(new Date).getTime(),n=(e.getTime()-t)/864e5;return e.getTime()<t?0:Math.ceil(n)},isOSOK:function(e,t){var n=!1,r=!1,i=!1,o=!1,a=!1,s=!1;return""==e||"0"==e||(t._bRemoteMode?t.__serverPlatform==Z.DWT.EnumDWT_PlatformType.enumWindow?i=!0:t.__serverPlatform==Z.DWT.EnumDWT_PlatformType.enumLinux?r=!0:t.__serverPlatform==Z.DWT.EnumDWT_PlatformType.enumMac?n=!0:t.__serverPlatform==Z.DWT.EnumDWT_PlatformType.enumEmbed?a=!0:t.__serverPlatform==Z.DWT.EnumDWT_PlatformType.enumChromeOS&&(s=!0):(n=(t=Z.navInfoSync).bMac,r=t.bLinux,i=t.bWin,o=Se.env.bMobile,s=t.bChromeOS,a=Z.navInfo.bEmbed),e=e.toLowerCase(),!!(-1<ye()(e).call(e,"windows")&&i||-1<ye()(e).call(e,"mac")&&n||-1<ye()(e).call(e,"linux")&&(r||s)||-1<ye()(e).call(e,"mobile")&&o||-1<ye()(e).call(e,"embed")&&a))},isBrowserOK:function(e){if(Se.isString(e)){if(""==e||"0"==e)return!0;e=(e=e.toLowerCase()).split(";");var t=!1,n=Z.navInfoSync;return Se.each(e,(function(e){("chrome"==be()(Se).call(Se,e)&&(n.bChrome||n.bSafari||n.bOpera||n.bEdge)||"ie"==be()(Se).call(Se,e)&&n.bIE||"firefox"==be()(Se).call(Se,e)&&n.bFirefox)&&(t=!0)})),t}return!1},parseDateFromString:function(e){return e=(e=e).replace(/-/g,"/"),e=Date.parse(e),isNaN(e)&&(e=0),(e=new Date(e)).setHours(23,59,59,999),e},getEnumLicenseType:function(e){var t=!1,n=!1,r=!1,i=!1,o=!1,a=!1,s=!1,u=!1,c=!1;return Se.isString(e)&&Se.each(e.split(";"),(function(e){2==(e=+e)||3==e||0==e||1==e?t=!0:4==e?n=!0:50==e?r=!0:51==e?i=!0:52==e?o=!0:7==e?a=!0:8==e?s=!0:9==e?u=!0:10==e&&(c=!0)})),{Core:t,PDFRasterizer:u,Webcam:s,barcode1D:n,QR:r,PDF417:i,DataMatrix:o,OCR:a,OCRPro:c}},getLicenseType:function(e){var t=!1,n=!1,r=!1,i=!1,o=!1,a=!1,s=!1,u=!1,c=!1,l=!1;return e&&""!=e&&("html5;activex;oldie"==(e=e.toLowerCase())?r=!0:"html5"==e||"win=(aph) or mac=(ph) or linux(h)"==e?t=!0:"html5;activex"==e?r=t=!0:"1d barcode reader"==e?n=!0:"2d barcode reader(qrcode)"==e?i=!0:"2d barcode reader(pdf417)"==e?o=!0:"2d barcode reader(data matrix)"==e?a=!0:"ocr"==e?s=!0:"webcam"==e?u=!0:"pdf rasterizer"==e?c=!0:"proocr"==e&&(l=!0)),{Html5:t,PDFRasterizer:c,Webcam:u,barcode1D:n,QR:i,PDF417:o,DataMatrix:a,OCR:s,OCRPro:l,ActiveX:r}},isAllowLicenseType:function(e,t){return t.Core?e.Core:t.PDFRasterizer?e.PDFRasterizer:t.Webcam?e.Webcam:t.barcode1D?e.barcode1D:t.QR?e.QR:t.PDF417?e.PDF417:t.DataMatrix?e.DataMatrix:t.OCR?e.OCR:t.OCRPro?e.OCRPro:e.Core},setNoAllowedLicenseTypeError:function(e,t){t.Core?t.Wasm?Se.Errors.LicenseNotSupportWasm(e):Se.Errors.LicenseNoCore(e):t.PDFRasterizer?t.Wasm?Se.Errors.LicenseNotSupportPdfRWasm(e):Se.Errors.LicenseNoPDF(e):t.Webcam?t.Wasm?Se.Errors.LicenseNotSupportWebcamWasm(e):Se.Errors.LicenseNoWebcam(e):t.OCR?Se.Errors.LicenseNoOCR(e):t.OCRPro?Se.Errors.LicenseNoOCRPro(e):Se.Errors.LicenseEmptyOrInvalid(e)},getLicenseDateString:function(e){var t,n=e.getFullYear();return[t=10<=(t=e.getMonth()+1)?""+t:"0"+t,"/",e=10<=e.getDate()?""+e.getDate():"0"+e.getDate(),"/",n].join("")},hasPDFRProductKey:function(e){if(e._isMobileMode()){if(!Se.License.checkProductKey(e,{PDFRasterizer:!0,Wasm:!0},!0))return e._resetErr(),!1}else if(!Se.License.checkProductKey(e,{PDFRasterizer:!0},!0))return e._resetErr(),!1;return!0},checkPDFProductKeyWhenNeeds:function(e,t){var n;return t!=Z.DWT.EnumDWT_ImageType.IT_PDF&&t!=Z.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF||(Se.product.bHTML5Edition?e.__addon&&e.__addon.PDF&&(n=e.__addon.PDF.GetConvertMode()):e.Addon&&e.Addon.PDF&&(n=e.Addon.PDF.GetConvertMode()),1!=n&&4!=n)||(Se.isFunction(e._isMobileMode)&&e._isMobileMode()?this.checkProductKey(e,{PDFRasterizer:!0,Wasm:!0},!0):this.checkProductKey(e,{PDFRasterizer:!0},!0))},getPublicLicenseContent:function(e){var t=[];if(!Se.isString(e)){if(Se.isUndef(e))return"";e=e instanceof Error||"message"in e?e.message:""+e}var n=ye()(e).call(e,"["),r=ye()(e).call(e,"]",n),i=ye()(e).call(e,"(",r),o=ye()(e).call(e,")",i);return-1==n||-1==r||-1==i||-1==o?e:(0<n&&t.push(e.substring(0,n)),n=e.substring(n+1,r),r=e.substring(i+1,o),t.push(['<a href="',r,'" target="_blank" class="dynamsoft-major-color">',n,"</a>"].join("")),t.push(e.substring(o+1)),t.join(""))}},Z.DWT.isPublicLicense=function(){return!(!Se.isUndef(Z.DWT.ProductKey)||!(Se.isUndef(Z.DWT.handshakeCode)&&Se.isUndef(Z.DWT.organizationID)||Se.isUndef(Z.DWT.handshakeCode)&&"200001"==Z.DWT.organizationID))},b=n(1006),n.n(b)),Ce=Z.navInfoSync,Ee=(D=Ce.bHTML5Edition,t=!1,Ce.bIE&&(""===(T=Ce.IEVersion)||10<=T?0==Z.DWT.IfUseActiveXForIE10Plus?D=!0:(t=!(D=!1),Ce.bHTML5Edition=D):(D=!1,9<=T&&(t=!0))),b={name:"Dynamic Web TWAIN",bHTML5Edition:D,bActiveXEdition:t,host:Z.dcp.host,wsProtocol:"dwt_command",_iImageCaptureDriverType:3,_iBrokerProcessType:1,getChromeEditionPath:Z.dcp.getDSPath,getPKGPath:function(){return Z.DWT.ResourcesPath+"/dist/mac/DynamicWebTWAINMacEdition.pkg"},getMSIPath:function(){return Z.DWT.ResourcesPath+"/dist/win/DynamicWebTWAINPlugIn.msi"},getActiveXCABx86Path:function(){return Z.DWT.ResourcesPath+"/dist/win/ActiveX/DynamicWebTWAIN.cab"},getActiveXCABx64Path:function(){return Z.DWT.ResourcesPath+"/dist/win/ActiveX/DynamicWebTWAINx64.cab"},strMIMEType:"Application/DynamicWebTwain-Plugin",strFullClassID:"E7DA7F8D-27AB-4EE9-8FC0-3FEC9ECFE758",scripts:{},bChromeEdition:D,getServerVersionInfo:function(e){var t=Z.DWT.ServerVersionInfo;return Ce.bWin||(Ce.bMac?t=Z.DWT.ServerMacVersionInfo:(Ce.bLinux||Ce.bChromeOS)&&(t=Z.DWT.ServerLinuxVersionInfo)),e?t:we()(e=Z.Lib).call(e,t,",","")},getDWTPrefix:function(){return!0===Z.DWT.CustomMode?"dwtc_":"dwt_"},loadResourcePath:!1,loadingResourcePath:!1},T=n(5005),t=n.n(T),D=n(677),T=n.n(D),n=(D=i.I.navInfoSync).bWin,D.bMac),Me=D.bLinux,Pe=D.bSafari,Ae=D.bFirefox,xe=D.bChrome,Re=location.hostname,ke=location.pathname,Le=0,Fe=D.bMobile,We=(t=t()(D.strBrowserVersion),i.I.navInfo&&(We=i.I.navInfo,Fe=Fe||We.bPad||We.biPhone||We.biPad),ke=""===Re?(n&&1<T()(ke).call(ke,"\\")?ke.substring(1,T()(ke).call(ke,"\\")):ke.substring(Le=1,T()(ke).call(ke,"/"))).replace(/%20/g," "):(Le=1,ke.substring(0,T()(ke).call(ke,"/"))),{bChrome:xe,bFirefox:Ae,bSafari:Pe,bIE:D.bIE,bEdge:D.bEdge,bWin:n,bMac:Ee,bLinux:Me,iPluginLength:0,bFileSystem:D.bFileSystem,bMobile:Fe,strIEVersion:D.IEVersion,strChromeVersion:D.bChrome?t:"",strFirefoxVersion:D.bFirefox?t:"",basePath:ke,pathType:Le,isDesktopViewer:function(){return i.I.navInfoSync.bWin||i.I.navInfoSync.bLinux||i.I.navInfoSync.bChromeOS||i.I.navInfoSync.bMac},isPadViewer:function(){return i.I.navInfo.bPad||i.I.navInfo.biPad},isMobileViewer:function(){return i.I.navInfoSync.bMobile||i.I.navInfo.biPhone},isWasmUseFastcomp:function(){if(i.I.Lib.preNavInfo.bUseUserAgent){var e=E()(i.I.navInfoSync.strBrowserVersion);if(i.I.navInfoSync.bSafari&&13<=e)return!1;if(i.I.navInfoSync.bFirefox&&94<=e)return!1;if(i.I.navInfoSync.bChrome&&94<=e)return!1}else{var t=[],n=0;"brands"in(e=navigator.userAgentData)&&i.D.isArray(e.brands)&&0<e.brands.length?t=e.brands:"uaList"in e&&i.D.isArray(e.uaList)&&0<e.uaList.length&&(t=e.uaList);for(n=0;n<t.length;n++){var r=t[n];if(r.brand&&("Chromium"==r.brand||"Google Chrome"==r.brand)&&r.version&&94<=E()(r.version,10))return!1}}return!0}}),Oe={getHex:function(e){return 1==(e=Number(e).toString(16).toUpperCase()).length?["0",e].join(""):e},getColor:function(e){var t=(65280&e)>>8,n=255&e;return["#",Oe.getHex(e>>16),Oe.getHex(t),Oe.getHex(n)].join("")},RGB2BGR:function(e){return(255&e)<<16|65280&e|e>>16}},Be=(Oe.BGR2RGB=Oe.RGB2BGR,Re=Oe,T=document.location.protocol,xe=location.hostname,Ae=i.I.navInfoSync.bSSL,i.D.env=We,i.D.product=b,i.D.mix(i.D,Re),i.D.BIO=he,{config:{debug:!(i.I.MSG={Loading:"Processing...",LoadingTiff:"Processing tiff...",LoadingPdf:"Processing pdf...",Encoding:"Processing...",ConvertingToBlob:"Converting to blob...",ConvertingToBase64:"Converting to base64...",SavingPdf:"Saving pdf...",SavingTiff:"Saving tiff...",Downloading:"Downloading...",Uploading:"Uploading...",Wasm_Initializing:"Initializing...",Init_LookingLicense:"Looking for license...",Init_LoadingViewerJs:"Loading the viewer script...",Init_AllJsLoaded:"All scripts loaded.",Init_FireBeforeInitEvt:"OnWebTwainWillInit triggered.",Init_InitActiveX:"Initializing the ActiveX...",Init_InitH5:"Initializing...",Init_InitWasm:"Initializing WebAssembly mode...",Init_DownloadingWasm:"Downloading WebAssembly code...",Init_CompilingWasm:"Compiling WebAssembly code...",Init_InitDynamsoftService:"Initializing the Service mode...",Init_CheckDWT:"Looking for the service module...",Init_CheckDWTVersion:"Checking the service module...",Init_CreatingDWT:"Creating a WebTwain instance...",Init_ConfiguringDWT:"Configuring the WebTwain instance...",Init_SetLicenseForDWT:"Activating the WebTwain instance...",Init_GetLicenseInfoForDWT:"Decoding the license...",Init_CheckingLicense:"Checking the license...",Err_BrowserNotSupportWasm:"It looks like your browser doesn't support the WebAssembly technology which is required to use the library."}),devMode:!1,usingMainMode:!1,bDiscardBlankImage:!1,msg:[],msgPrefix:'<span style="color:#cE5E04"><b>',msgSuffix:"</b></span><br />"},detect:{ssl:Ae,dcpStatus:0,dcpCallbackType:0,arySTwains:[],arySTwainsByIP:[],aryWSPool:[],bFirst:!0,bOK:!1,__dialog:!1,scriptLoaded:!1,wasmScriptLoaded:!1,wasmPdfReaderLoaded:!1,wasmLoad:!1,cssLoaded:!1,viewerScriptLoaded:!1,bNoControlEvent:!1,bNeedUpgradeEvent:!1,StartWSTimeoutId:!1,StartWSByIPTimeoutId:!1,bPromptJSOrServerOutdated:!1,bNeedWasm:!1,bAutoLoadDone:!1,detectType:Ae?1:"http:"===T||""===xe?0:-1,tryTimes:0,ports:[{port:i.I.DWT.SSLPort,ssl:!0},{port:i.I.DWT.Port,ssl:!1}],win64Ports:[{port:18621,ssl:!0},{port:18620,ssl:!1}],cUrlIndex:0,urls:[],onNoControl:!1,needUpgrade:!1,OnDetectNext:!1,OnCreatWS:!1,bMaskShow:!1},page:{bUnload:!1,OnUnload:!1},tmp:{IfAllowLocalCache:!0,EmptyFunction:function(){}}});Be.appendMessage=function(e){"string"==typeof e?Be.config.msg.push(e):"[object Array]"===Object.prototype.toString.call(e)&&i.I.Lib.each(e,(function(e){Be.appendMessage(e)}))},Be.appendRichMessage=function(e){Be.appendMessage([Be.config.msgPrefix,e,Be.config.msgSuffix])},Be.clearMessage=function(){var e;return r()(e=Be.config.msg).call(e,0),!0},Be.getRealPath=function(e){return void 0===e?"":1==Be.env.pathType?Be.env.basePath+e:Be.env.basePath+e.replace(new RegExp("/","g"),"\\\\")},Be.isLocalIP=function(e){return e&&("127.0.0.1"===e||"localhost"===e||"local.dynamsoftwebtwain.com"===e||"local.dynamsoft.com"===e)},Be.IsNeedLoadWasm=function(){return i.D.detect.bNeedWasm||!1===i.I.DWT.UseLocalService||i.D.isUndefined(i.I.DWT.UseLocalService)&&i.D.env.bMobile||i.I.DWT.UseBarcodeAddonWasm},Be.getShadowRoot=function(e){var t=e;if(i.D.win.ShadowRoot)for(;t;){if(t instanceof i.D.win.ShadowRoot)return t;t=t.parentNode}return!1},Be.isShadowRoot=function(e){return!!(i.D.win.ShadowRoot&&e instanceof i.D.win.ShadowRoot)},i.D.mix(i.D,Be),i.D.Addon_Events=[],i.D.Addon_Sendback_Events=[]},2053:function(e,t,n){n.r(t);var r,i,o,a,s,u=n(9623),c=(t=n(7711),n.n(t)),l=(t=n(4579),n.n(t)),d=(t=n(5238),n.n(t)),h=n(1695),g=(t=n(1255),n=c()(t.CH),c()(t.$n)),f=c()(t.Ne),m=t.Bm,p=t.Bm,_=h.I.managerEnv,v=h.D.LS,I=h.I.navInfoSync.host,y=20220401,b=function(){if(h.I.dcp){var e=h.I.dcp.dcpJSVer;if(h.D.isNumber(e))return y<=e}return!1};_||(h.I.managerEnv={},_=h.I.managerEnv),_.resourcesPath=_.resourcesPath||"Resources",_.IfUpdateService=!!_.IfUpdateService,b()?y=b=r:(a=[],s=0,h.I.dcp=i={host:"127.0.0.1",ports:[[18625,18626]],dcpJSVer:y,oldDWASMVerStr:"dwasm_13000404",oldDWASMVer:[13,0,0,"0404"],managerVersion:[n,g,f,m],managerVersionMac:[n,g,f,m],managerVersionLinux:[n,g,f,m],serviceVersion:[t.UJ,t.oU,t.$E,p],serviceVersionMac:[t.UJ,t.oU,t.$E,p],serviceVersionLinux:[t.UJ,t.oU,t.$E,p],detect:o={dcpStatus:0,bConnected:!1,connectedResult:"",curPortIndex:0,bConnectNumLimited:!0,IMAXCONNECTCOUNT:5,EnumDCP_DetectStatus:{Init:0,Connected:1,DownloadingZip:2,DownloadedZip:3,DownloadFailed:4,CheckingManagerVer:15,CheckingServiceVer:16,NotInstalled:17,CheckedService:5,VerifyingZip:6,VerifiedZip:7,UpdatingService:8,UpdateSucceed:9,UpdateFailed:10,UpdateSkipped:11}},strSID:"",bEnhancedMode:!1,b64bit:!1,wsProtocol:"dwt_command",dwtPort:0,onReadys:[],getManagerVersion:function(){var e=h.I.navInfoSync;if(!e.bWin){if(e.bMac)return i.managerVersionMac;if(e.bLinux)return i.managerVersionLinux}return i.managerVersion},getServiceVersion:function(){var e=h.I.navInfoSync;if(!e.bWin){if(e.bMac)return i.serviceVersionMac;if(e.bLinux)return i.serviceVersionLinux}return i.serviceVersion},versionInfo:function(e,t){var n=0;o.dcpStatus=o.EnumDCP_DetectStatus.CheckingManagerVer,this._postBase("VersionInfo",!0,t,(function(t){if(h.D.isArray(t)&&0<t.length&&t[0]){o.curPort=i.ports[n%i.ports.length];var r=t[0];if(h.D.isString(r)&&i._compareVersion(r.split(","),i.oldDWASMVer))return i._setDefaultValuesFromServer(t),o.bConnected=!0,o.dcpStatus=o.EnumDCP_DetectStatus.Connected,i._sendStatusEvent(!1,r),h.D.isFunction(e)&&l()((function(){e(i.strSID,i.bEnhancedMode)}),0),!0}return!1}),(function(t,r,a){return++n,o.curPortIndex=n%i.ports.length,o.bConnected=!1,!!(o.bConnectNumLimited&&n>=o.IMAXCONNECTCOUNT)&&(l()((function(){e(t,r,a)}),0),!0)}))},_checkOldManagerVersion:function(e,t){o.dcpStatus=o.EnumDCP_DetectStatus.CheckingManagerVer,this._postBase("VersionInfo",!0,r,e,t)},_checkManagerVersion:function(e,t,n){o.dcpStatus=o.EnumDCP_DetectStatus.CheckingManagerVer,this._postBase("VersionInfo",!1,e,t,n)},_checkService:function(e,t){o.dcpStatus=o.EnumDCP_DetectStatus.CheckingServiceVer,this._postBase("DSVersion",!1,r,e,t)},_checkUpdateFile:function(e,t){this._postBase("CheckUpdateFile",!1,r,e,t)},_updateService:function(e,t){this._postBase("UpdateService",!1,r,e,t)},_postBase:function(e,t,n,r,o){var a=t?i.oldDWASMVerStr:"dwasm2_"+i._getModuleVer();return a={id:(new Date).getTime().toString(),method:e,version:a,parameter:[]},n&&(a.productKey=n),this._postBaseV2(e,t,a,500,r,o),!0},_postBaseV2:function(e,t,n,r,o,u){var c,l,d,g=h.D.stringify(n);if(h.D.isFunction(o)&&h.D.isFunction(u))if(i.detect.bConnected&&"VersionInfo"==e&&""!=i.detect.connectedResult)o(i.detect.connectedResult);else{if(c=function(e,t,n){0==--s&&u(e,t,n)},l=function(e,t,n){var r=i._getJSON(e);if(r&&"result"in r){if(s=-1,i.detect.bConnected)return;if(i.detect.bConnected=!0,i.detect.dcpStatus=i.detect.EnumDCP_DetectStatus.Connected,i.detect.curPort=i.ports[n.index],i.ports=[i.detect.curPort],i.detect.curPortIndex=0,v.isSupportLS()&&v.item("DCP_port",i.detect.curPort[1]),o(r.result))return}c(e,t,n)},1<(s=i.ports.length)&&v.isSupportLS()){var f=v.item("DCP_port");if(h.D.isString(f)&&""!==f)for(d=1;d<s;d++){var m=i.ports[d],p=m[0];(m=m[1])==f&&(i.ports[d][0]=i.ports[0][0],i.ports[d][1]=i.ports[0][1],i.ports[0][0]=p,i.ports[0][1]=m);break}}for(i.detect.bConnected&&(s=1),a=[],i.detect.bConnected=!1,d=0;d<s;d++){var _=[i._getPreUrl(d),t?"dcp/":i._getModuleName(),t?i.oldDWASMVerStr:i._getModuleVer(),"/",e,"?type=1&dsver=",i.getServiceVersion().join(""),"&ts=",h.D.now()].join("");a.push({method:"POST",url:_,timeout:r,data:g,onSuccess:l,onError:c})}for(d=0;d<s;d++)h.D.ajax(a[d]).index=d}},loadZip:function(e,t,n,r){var a=t,s=n;100===t&&(a=0,s=function(e){h.D.isString(e)&&(e=e.replace('"result" : [ 0,','"result" : [ 100,')),n(e)}),t=(h.I.managerEnv.IfUpdateService?[i._getPreUrl(o.curPortIndex),i._getModuleName(),i._getModuleVer(),"/LoadZipFromBytes?type=",a,"&dsver=",i.getServiceVersion().join(""),"&ts=",h.D.now()]:[i._getPreUrl(o.curPortIndex),"dcp/",i.oldDWASMVerStr,"/LoadZipFromBytes?type=0","&dsver=",i.getServiceVersion().join(""),"&ts=",h.D.now()]).join(""),h.D.ajax({method:"POST",url:t,async:!0,data:e,onSuccess:s,onError:r})},oldLoadZip:function(e,t,n,r){var a=[i._getPreUrl(o.curPortIndex),"dcp/",i.oldDWASMVerStr,"/LoadZipFromBytes?type=0","&dsver=",i.getServiceVersion().join(""),"&ts=",h.D.now()].join("");h.D.ajax({method:"POST",url:a,async:!0,data:e,onSuccess:n,onError:r})},_getPreUrl:function(e){var t;return e=h.I.navInfoSync.bSSL?(t="https://",i.ports[e][1]):(t="http://",i.ports[e][0]),[t,i.host,":",e,"/"].join("")},_getHttpPreUrl:function(e){return["http://",i.host,":",i.ports[e][0],"/"].join("")},_getDcpWsPreUrl:function(e){return i.getWsUrl(i.host,h.I.navInfoSync.bSSL?i.ports[e][1]:i.ports[e][0])},_getJSON:function(e){return!!e&&h.D.parse(e)},_getModuleName:function(){return"dcp/dwasm2_"},_getModuleVer:function(){return i.getManagerVersion().join("")},_compareVersion:function(e,t){return!h.D.isLocalIP(i.host)||(h.D.isArray(e)&&4==e.length&&h.D.isArray(t)&&4<=t.length?e[0]>t[0]||e[0]==t[0]&&e[1]>t[1]||e[0]==t[0]&&e[1]==t[1]&&e[2]>t[2]||e[0]==t[0]&&e[1]==t[1]&&e[2]==t[2]&&c()(e[3])>=c()(t[3]):!!(h.D.isArray(e)&&1==e.length&&h.D.isArray(t)&&1<=t.length)&&c()(e[0])>=c()(t[0]))},_getDSUpdateZipUrl:function(){var e,t=h.I.navInfoSync,n="",r="Win";return t.bMac?r="Mac":t.bLinux&&(r="Linux"),e=t.bFileSystem?"":"?t="+h.D.now(),t.bWin&&i.b64bit&&(n="_x64"),[h.I.managerEnv.resourcesPath,"/dist/serviceupdate/",r,"DSUpdate_",i.getManagerVersion().join("."),n,".zip",e].join("")},getPorts:function(e,t,n){var r="GetPorts",o="dwasm2_"+i._getModuleVer();this._postBaseV2(r,!1,{id:"1",method:r,version:o,parameter:[e]},700,t,n)},_setDefaultValuesFromServer:function(e){var t="",n=!1,r=!1,a={};4<e.length&&(t=h.D.isString(e[2])?e[2]:"",n=h.D.isString(e[3])&&"true"===e[3],r=h.D.isString(e[4])&&"64"===e[4]),5<e.length&&(a=e[5]),i.detect.connectedResult=e,i.strSID=t,i.bEnhancedMode=n,i.b64bit=r,i.objEnhancedPorts=a,o.curPort=n&&a&&a.dcp?[(e=a.dcp).port,e.sslPort]:i.ports[o.curPortIndex],n&&a&&a.dwt&&(o.dwtPort=(t=a.dwt)?h.I.navInfoSync.bSSL?t.sslPort:t.port:0)},checkDcpForUpdate:function(e,t,n,r,a,s,u,c){var d,g,f,m,p,_,v=!1,I=!0,y=3,b=0,D=(d=function(t){if(!(h.D.isArray(t)&&0<t.length&&t[0]))return!1;var d,g,p,_=t[0].split(","),y=!1;return 4<t.length&&(y=h.D.isString(t[4])&&"64"===t[4]),i.b64bit=y,h.I.managerEnv.IfUpdateService?i._compareVersion(_,i.oldDWASMVer)?(t=i._getDSUpdateZipUrl(),v=!0,p=function(e){o.dcpStatus=o.EnumDCP_DetectStatus.DownloadedZip,i._sendStatusEvent(),i.oldLoadZip(e,0,(function(){l()((function(){i._checkManagerVersion(c,f,m)}),5e3)}),d)},d=function(e,t,n){i._funUpdateFailed(a,s,e,n.status),l()(u,0)},g=function(e){o.dcpStatus=o.EnumDCP_DetectStatus.DownloadFailed,a&&a(),e="The update package can't be downloaded. The error code is "+e.httpCode+".",s&&s(!0,e),i._sendStatusEvent(!0,e),l()(u,0)},n&&n(),r&&r(),o.dcpStatus=o.EnumDCP_DetectStatus.DownloadingZip,i._sendStatusEvent(),h.D.fetch(t,{mode:"cors",dataType:"arraybuffer"}).then(p,g)):I&&(o.dcpStatus=o.EnumDCP_DetectStatus.NotInstalled,n&&n(),e&&e(),i._sendStatusEvent(),I=!1):(o.bConnected=!0,o.dcpStatus=o.EnumDCP_DetectStatus.UpdateSkipped,i._sendStatusEvent(),l()(u,0)),!0},g=function(e,t){return++b,o.curPortIndex=b%i.ports.length,o.bConnected=!1,o.bConnectNumLimited&&b>=o.IMAXCONNECTCOUNT?(o.dcpStatus=o.EnumDCP_DetectStatus.NotInstalled,i._sendStatusEvent()):l()((function(){i._checkOldManagerVersion(d,g)}),1e3),!0},f=function(e){if(!(h.D.isArray(e)&&0<e.length&&e[0]))return!1;var t=e[0].split(",");return!!i._compareVersion(t,i.getManagerVersion())&&(i.detect.connectedResult=e,h.I.managerEnv.IfUpdateService?v?l()((function(){i._checkUpdateZip(r,a,s,u)}),0):l()((function(){i._checkService(p,_)}),0):(o.dcpStatus=o.EnumDCP_DetectStatus.UpdateSkipped,i._sendStatusEvent(),l()(u,0)),!0)},m=function(e,t,n){var r=y<3?500:1e3;return--y<0?(i._funShowUpgradeDialogWhenUpdateFailed(a,s),l()(u,0)):l()((function(){i._checkManagerVersion(c,f,m)}),r),!0},p=function(e){if(!(h.D.isArray(e)&&0<e.length&&e[0]))return n&&n(),!1;var t=e[0].split(",");return i._compareVersion(t,i.getServiceVersion())?(o.bConnected=!0,a&&a(),o.dcpStatus=o.EnumDCP_DetectStatus.CheckedService,i._sendStatusEvent(!1,e[0]),o.dcpStatus=o.EnumDCP_DetectStatus.UpdateSucceed,i._sendStatusEvent(),l()(u,0)):l()((function(){i._checkUpdateZip(r,a,s,u)}),0),!0},_=function(e,t,n){return i._funUpdateFailed(a,s,e,n.status),l()(u,0),!0},function(t){if(!(h.D.isArray(t)&&0<t.length&&t[0]))return!1;var r=t[0];return h.D.isString(r)&&i._compareVersion(r.split(","),i.oldDWASMVer)?(i._setDefaultValuesFromServer(t),o.curPort=i.ports[b%i.ports.length],h.I.managerEnv.IfUpdateService?l()((function(){i._checkService(p,_)}),0):(o.dcpStatus=o.EnumDCP_DetectStatus.UpdateSkipped,i._sendStatusEvent(),l()(u,0))):(b=0,o.curPortIndex=0,I&&(n&&n(),e&&e(),I=!1),l()((function(){i._checkOldManagerVersion(d,g)}),1e3)),!0});t&&t(),i._checkManagerVersion(c,D,(function t(r,a){return++b,o.curPortIndex=b%i.ports.length,o.bConnected=!1,I&&(n&&n(),e&&e(r,a),I=!1),o.bConnectNumLimited&&b>=o.IMAXCONNECTCOUNT?(b=0,o.curPortIndex=0,l()((function(){i._checkOldManagerVersion(d,g)}),1e3)):l()((function(){i._checkManagerVersion(c,D,t)}),1e3),!0}))},_checkUpdateZip:function(e,t,n,r,a){var s,u,c,d,g,f,m,p=3;s=function(e,t,n){var r=-1;return 0==(r=n?n.status:r)?(l()((function(){i._checkService(f,m)}),5e3),!0):(n=i._getDSUpdateZipUrl(),o.dcpStatus=o.EnumDCP_DetectStatus.DownloadingZip,i._sendStatusEvent(),h.D.fetch(n,{mode:"cors",dataType:"arraybuffer"}).then(d,u),!0)},u=function(e){return o.dcpStatus=o.EnumDCP_DetectStatus.DownloadFailed,t&&t(),e="The update package can't be downloaded. The error code is "+e.httpCode+".",n&&n(!0,e),i._sendStatusEvent(!0,e),l()(r,0),!0},c=function(e){if(!(h.D.isArray(e)&&1<e.length))return!1;if(1==e[1])o.dcpStatus=o.EnumDCP_DetectStatus.VerifiedZip,i._sendStatusEvent(),o.dcpStatus=o.EnumDCP_DetectStatus.UpdatingService,i._sendStatusEvent(),l()((function(){i._checkService(f,m)}),5e3);else{var a=0;if(-2373==(a="exception"in e?e.exception:a))return i._funUpdateFailed(t,n,e,200),l()(r,0),!0;l()(s,0)}return!0},d=function(e){h.I.dcp.loadZip(e,1,(function(e){var o,a;try{h.D.isString(e)&&"result"in(a=h.D.parse(e.replace(/\0/g,"")))&&(o=a.result)}catch(p){}h.D.isArray(o)&&2<o.length&&1==o[2]?l()((function(){i._checkService(f,m)}),5e3):(i._funUpdateFailed(t,n,e,200),l()(r,0))}),g)},g=function(e,o,a){var s=-1;return 0==(s=a?a.status:s)?l()((function(){i._checkService(f,m)}),5e3):(i._funUpdateFailed(t,n,e,a.status),l()(r,0)),!0},f=function(e){if(!(h.D.isArray(e)&&0<e.length&&e[0]))return!1;var n=e[0].split(",");return!!i._compareVersion(n,i.getServiceVersion())&&(o.bConnected=!0,t&&t(),o.dcpStatus=o.EnumDCP_DetectStatus.CheckedService,i._sendStatusEvent(!1,e[0]),o.dcpStatus=o.EnumDCP_DetectStatus.UpdateSucceed,i._sendStatusEvent(),l()(r,0),!0)},m=function(e,o){var a=p<3?500:1e3;return--p<0?(i._funShowUpgradeDialogWhenUpdateFailed(t,n),l()(r,0)):l()((function(){i._checkService(f,m)}),a),!0},e&&e(),o.dcpStatus=o.EnumDCP_DetectStatus.VerifyingZip,i._sendStatusEvent(),i._checkUpdateFile(c,s)},_getStatusString:function(e,t){var n,r="";return e==o.EnumDCP_DetectStatus.Init?"Getting manager version":e==o.EnumDCP_DetectStatus.Connected?"Getting manager version succeeded and the version is "+(r=t||r):e==o.EnumDCP_DetectStatus.DownloadingZip?"Downloading the update package":e==o.EnumDCP_DetectStatus.DownloadedZip?"Update package downloaded":e==o.EnumDCP_DetectStatus.DownloadFailed?(n=".","Update package failed to download"+(t&&0<t.length?("."==d()(t).call(t,t.length-1)&&(n="")," with the error: "+t):"")+n):e==o.EnumDCP_DetectStatus.CheckingManagerVer?"Getting manager version":e==o.EnumDCP_DetectStatus.CheckingServiceVer?"Getting service version":e==o.EnumDCP_DetectStatus.NotInstalled?"Dynamsoft Service Not Installed":e==o.EnumDCP_DetectStatus.UpdateSkipped?"Update skipped":e==o.EnumDCP_DetectStatus.CheckedService?"Getting service version succeeded and the version is "+(r=t||r):e==o.EnumDCP_DetectStatus.VerifyingZip?"Verifying the update package":e==o.EnumDCP_DetectStatus.VerifiedZip?"Update package verified":e==o.EnumDCP_DetectStatus.UpdatingService?"Updating the service":e==o.EnumDCP_DetectStatus.UpdateSucceed?"Update succeeded":e==o.EnumDCP_DetectStatus.UpdateFailed?(n=".","The update failed"+(t&&0<t.length?("."==d()(t).call(t,t.length-1)&&(n="")," with the error: "+t):"")+n):""},_sendStatusEvent:function(e,t){e=!!e,h.D.isFunction(I.OnGetServiceUpdateStatus)&&I.OnGetServiceUpdateStatus(e,o.dcpStatus,i._getStatusString(o.dcpStatus,t))},_getErr:function(e){var t,n="";try{h.D.isString(e)?(t=e.replace(/\0/g,""),t=h.D.parse(t)):e&&(t=e),"description"in t&&(n=t.description)}catch(r){}return n},_funShowUpgradeDialogWhenUpdateFailed:function(e,t){return o.bConnected=!0,o.dcpStatus=o.EnumDCP_DetectStatus.UpdateFailed,e&&e(),t&&t(),i._sendStatusEvent(!0),!0},_funUpdateFailed:function(e,t,n,r){var a;return o.bConnected=!0,o.dcpStatus=o.EnumDCP_DetectStatus.UpdateFailed,e&&e(),e=200==r?(a="The update failed.",i._getStatusString(o.dcpStatus,i._getErr(n))):a="The update failed. The error code is "+r,t&&t(!0,a),i._sendStatusEvent(!0,e),!0},getDSPath:function(e,t){var n,r,i=h.I.managerEnv.resourcesPath;return h.I.Lib.isString(i)&&0<i.length?"/"!=i[i.length-1]&&(i+="/"):i="Resources/",t||(n=h.I.navInfo,t=(r=h.I.navInfoSync).bMac?".pkg":n.bArm64?"-arm64.deb":n.bMips64?"-mips64el.deb":r.bLinux||r.bChromeOS||r.bHarmonyOS?".deb":".msi"),[i,"dist/DynamsoftServiceSetup",t].join("")},getLinuxHTML5DebPath:function(){return h.I.dcp.getDSPath(!1,".deb")},getLinuxHTML5RpmPath:function(){return h.I.dcp.getDSPath(!1,".rpm")},newWebsocket:function(e,t){var n,r=i.wsProtocol,o=window.MozWebSocket;if(void 0!==o)n=r?new o(e,r):new o(e);else{var a=window.WebSocket;if(t){var s=window,u=parent;try{for(;s!=u&&u.WebSocket;)a=u.WebSocket,s=u.window,u=u.parent}catch(f){a=window.WebSocket}}n=r?new a(e,r):new a(e)}return n},_checkManagerVersionWS:function(e,t,n){var r=i._getDcpWsPreUrl(0),o={id:(new Date).getTime().toString(),method:"VersionInfo",version:"dwasm2_"+i._getModuleVer(),parameter:[]};return e&&(o.productKey=e),i.postStringDataByWS(r,h.D.stringify(o),(function(e){(e=h.D.parse(e))&&"result"in e?t(e.result):n()}),n)},getWsUrl:function(e,t){return[h.I.navInfoSync.bSSL?"wss://":"ws://",e,":",t,"/"].join("")},postStringDataByWS:function(e,t,n,r){var o=0,a=i.newWebsocket(e,!1);a.onopen=function(){1==a.readyState?(a.onopen=null,a.send(t)):0==a.readyState&&l()(a.onopen,100)},a.onmessage=function(e){var t=e.data;if("object"===(0,u.Z)(t))return e=t=null,r(),void a.close();e=t.replace(/\0/g,"");try{n(e),a.close()}catch(o){h.D.log(t),r(),a.close()}t=null},a.onerror=function(t){if(0==o&&h.I.navInfoSync.bEdge)return o++,void(a=i.newWebsocket(e,!0));t&&h.D.log("websocket error: "+t),r(),a.close()},a.onclose=function(e){a.onclose=null,a.onerror=null,a.onmessage=null}},getBinaryFileInfo:function(e,t){var n,r="GetBinaryFileInfo",o={id:(new Date).getTime().toString(),method:r,version:"dwasm2_"+i._getModuleVer(),parameter:[]},a=(o=h.D.stringify(o),function(n,r,o){var a=i._getJSON(n);a?e(a):t(n,r,o)});if(h.I.DWT.ConnectWithSocket&&h.I.navInfoSync.bHTML5Edition)return n=i._getDcpWsPreUrl(0),i.postStringDataByWS(n,o,a,t);n=[i._getPreUrl(0),i._getModuleName(),i._getModuleVer(),"/",r,"?type=1&dsver=",i.getServiceVersion().join(""),"&ts=",h.D.now()].join(""),h.D.ajax({method:"POST",url:n,timeout:500,data:o,onSuccess:a,onError:t})},checkDcpV3:function(e,t,n){var r=!0,a=0,s=function(e){return!!(h.D.isArray(e)&&0<e.length&&e[0])&&(i._setDefaultValuesFromServer(e),o.dcpStatus=o.EnumDCP_DetectStatus.UpdateSkipped,i._sendStatusEvent(),l()(n,0),!0)},u=function n(u,c){return++a,o.bConnectNumLimited&&a>=o.IMAXCONNECTCOUNT?(o.bConnected=!1,o.dcpStatus=o.EnumDCP_DetectStatus.NotInstalled,i._sendStatusEvent()):l()((function(){h.I.DWT.ConnectWithSocket&&h.I.navInfoSync.bHTML5Edition?i._checkManagerVersionWS(e,s,n):i._checkManagerVersion(e,s,n)}),1e3),r&&(t&&t(u,c),r=!1),!0};o.curPortIndex=0,o.bConnected=!1,h.I.DWT.ConnectWithSocket&&h.I.navInfoSync.bHTML5Edition?i._checkManagerVersionWS(e,s,u):i._checkManagerVersion(e,s,u)}},_=y=b=r,h.D.domReady((function(){0<i.onReadys.length&&h.D.each(i.onReadys,(function(e){h.D.isFunction(e)&&e()}))})))},1383:function(e,t,n){n.r(t);var r=n(1695),i=(t=n(1255),r.I.DWT);(n={CertificateConfig:{},CustomizableDisplayInfo:{}}).RegisterEvent=function(e,t){return("OnWebTwainReady"===e&&r.D.isFunction(t)||"OnWebTwainInitMessage"===e&&r.D.isFunction(t))&&(r.I.DWT[e]=t),!0},r.D.mix(n,t.Sf),r.D.mix(n.CertificateConfig,t.LX),r.D.mix(n.CustomizableDisplayInfo,t.Vn),r.D.mix(n,i),r.I.DWT=n},7378:function(e,t,n){n.r(t);var r=n(1695),i=(t=n(4579),n.n(t)),o=(n(4393),r.I.DWT),a=(o.CloseDialog=function(){var e,t=r.D.install._dlgInstall;t&&(e=r.D.all(".dynamsoft-dialog-close"),r.D.each(e,(function(e,t){r.D.removeEventListener(e,"click",o.CloseDialog)})),t.open&&t.close(),document.body.removeChild(t),r.D.install._dlgInstall=!1)},o.ShowDialog=function(e,t,n,r,i){var a;!1!==n&&(e={width:e,height:t,position:"absolute"},r?(a=['<div class="dynamsoft-dwt-dialog-body">',n,"</div>"].join(""),e.closeButton=!1):a=['<div class="ds-dwt-ui-showdlg">','<div class="dynamsoft-dwt-dialog-body">','<div class="dynamsoft-dwt-dlg-header">',i?"":'<div class="dynamsoft-dialog-close"></div>',"</div>",n,"</div>","</div>"].join(""),i&&(e.closeButton=!1),o.ShowMessage(a,e))},o.ShowMessage=function(e,t){var n,a,s,u=r.D.install,c="ds-dwt-ui-dlg",l="ds-dwt-ui-dlg-wrap",d=screen.width,h=!0,g=0,f=!0,m=!0,p=0,_="fixed",v="Error",I=r.D.product.bActiveXEdition;t&&(n=t.width,a=t.height,t.seconds&&(g=t.seconds),t.headerStyle&&(p=t.headerStyle),!1===t.closeButton&&(f=!1),t.bAutoClose&&(s=t.bAutoClose,f=!0),0==t.bReadyClosed&&(h=!1),t.position&&(_=t.position),t.caption&&(v=t.caption)),n?d-10<n&&(n=d-10):n=600<d?600:d-10,a=a||"100%",1==p?e=['<div class="dynamsoft-dialog">','<div class="dynamsoft-dwt-dialog-body">','<div class="dynamsoft-dwt-dlg-header">',f?'<div class="dynamsoft-dialog-close"></div>':"","</div>",e,"</div></div>"].join(""):2==p&&(e=['<div class="dynamsoft-dialog">','<div class="dynamsoft-dwt-ltsdlg-header"><span style="color:#FFF;line-height:35px;margin-left:15px">',v,"</span>",f?'<div class="dynamsoft-dialog-close"></div>':"","</div>",'<div class="dynamsoft-dwt-ltsdlg-body" style="padding:25px 50px 20px 50px;">',e,"</div></div>"].join("")),0==r.D.one("."+c).length?(t=document.createElement("div"),d=document.createElement("div"),p=document.createElement("div"),t.className=c,d.className=l,d.style.margin="auto",d.style.zIndex="9999",d.style.position="relative",d.style.border="0",s&&((v=document.createElement("div")).className="dynamsoft-dialog-close",d.insertBefore(v,d.firstChild),(c=document.createElement("div")).className="dynamsoft-dialog-closeTimer",c.style.width="100%",c.style.height="2px",c.style.marginTop="-2px",c.style.backgroundColor="#fe8e14",d.insertBefore(c,d.firstChild)),d.appendChild(p),p.innerHTML=e,t.appendChild(d),document.body.appendChild(t),u._dlgInstall=t,r.D.dialog.setup(u._dlgInstall,!1),r.I.navInfoSync.bIE&&((v=document.createElement("iframe")).frameborder="0",v.marginheight="0",v.marginwidth="0",v.style.border="0",v.style.backgroundColor="transparent",v.style.position="absolute",v.style.left=0,v.style.top=0,v.style.width="100%",v.style.height=document.body.clientHeight+"px",v.style.margin="0 auto",v.style.zIndex="9990",v.src=["javas","cript:",'""'].join(""),(c=r.D.one(".dynamsoft-backdrop"))&&0<c.length&&(c[0].innerHTML="",c[0].appendChild(v)))):m=!1,(p=r.D.one("."+l))&&p.getEL()&&(p[0].style.width=n+"px",p[0].style.height=r.D.isNumber(a)&&0<a?a+"px":"100%",m||r.D.each(p[0].childNodes,(function(t){if("DIV"==t.tagName&&"dynamsoft-dialog-close"!=t.className&&"dynamsoft-dialog-closeTimer"!=t.className)return t.innerHTML=e,!1}))),I&&(d=r.D.one(".dynamsoft-dialog"))&&d.getEL()&&(d.getEL().style.border="1px solid #999"),u._dlgInstall.open&&u._dlgInstall.close(),u._dlgInstall.showModal({position:_}),u._dlgInstall.bReadyClosed=h,f&&(t=r.D.all(".dynamsoft-dialog-close"),r.D.each(t,(function(e,t){r.D.addEventListener(e,"click",o.CloseDialog)})),0<t.length&&s&&0<g&&i()(r.D._zdgb_xkz_dhk,100))},o.OnWebTwainPreExecute=function(){r.I.Lib.detect.OnWebTwainPreExecute(r.I.DWT.IfConfineMaskWithinTheViewer)},o.OnWebTwainPostExecute=function(){r.I.Lib.detect.OnWebTwainPostExecute()},function(e,t){var n=r.I.Lib;if(t||r.I.DWT.CloseDialog(),(t=n.get(n.install._divDWTNonInstallContainerID))&&t.parentNode&&t.parentNode.removeChild(t),e&&n.isDOM(e)&&n.show(e),e&&n.isString(e))n.show(e);else{var i,o=r.I.DWT.Containers;if(o)for(i=0;i<o.length;i++)o[i].ContainerId&&n.show(o[i].ContainerId);if(o=r.I.DWT.DynamicContainers)for(i=0;i<o.length;i++)o[i].ContainerId&&n.show(o[i].ContainerId);o=null}""!=n.install._divDWTemessageContainer&&n.show(n.install._divDWTemessageContainer)}),s=(r.D.win.DCP_DWT_OnClickCloseInstall=a,n(9032),t=n(7711),n.n(t)),u=(n(6870),r.D._zdgb_xkz_dhk=function(){var e,t=r.D.install._dlgInstall;t&&(t=r.D.one(".dynamsoft-dialog-closeTimer",t)).getEL()&&(e=s()(t.getEL().style.width),--e<=0?r.I.DWT.CloseDialog():(t.getEL().style.width=e+"%",i()(r.D._zdgb_xkz_dhk,100)))},r.D.ShowLicenseDialog=r.I.DWT.ShowMessage,r.D.createLoadingBarContent=function(){var e=r.D.loaderBarClassName+"-noserver",t=r.D.loaderBarClassName+"-noserver-parent",n="",i=(""!=r.D.loaderBarBackgroundColor&&(n=";background:"+r.D.loaderBarBackgroundColor),[]);return i.push('<dialog class="dynamsoft-loadingMsg" closed="closed" style="top:30%">'),i.push(['<div class="',t,'" style="margin:0 auto',n,'">'].join("")),i.push(['<div class="',e,'" style="margin:0 auto',n,'">'].join("")),i.push(['<img src="',r.D.loaderBarSource,'" />'].join("")),i.push('</div><h3 class="dynamsoft-loadingMsg-msg"> </h3>'),i.push('<p class="dynamsoft-loadingMsg-desc"> </p>'),i.push("</div></dialog>"),i.join("")},r.D.openLoadingMsg=function(){var e,t;r.D.product.bHTML5Edition&&!r.D.dlgLoadingShowStatus&&r.I.DWT.showLoadingMsgDialog&&(e=r.I.DWT.UseLocalService,r.D.env.bMobile||!r.D.isUndefined(e)&&1!=e?(r.D.detect.hideMask(),r.D.dlgLoading||((e=r.D.one(".dynamsoft-loadingMsg"))&&e.getEL()&&e.remove(),(t=r.D.parseHTML(r.D.createLoadingBarContent()))&&0<t.length&&document.body.appendChild(t[0]),(e=r.D.one(".dynamsoft-loadingMsg"))&&e.getEL()&&(r.D.dlgLoading=e[0],r.D.dialog.setup(r.D.dlgLoading))),r.D.dlgLoading.showModal(),r.D.dlgLoadingShowStatus=!0):r.D.detect.showMask())},r.D.showLoadingMsg=function(e,t,n){var i,o;0!=r.D.dlgLoadingShowStatus&&(r.D.one(".dynamsoft-loadingMsg"),i=r.D.one(".dynamsoft-loadingMsg-msg"),o=r.D.one(".dynamsoft-loadingMsg-desc"),i&&i.getEL()&&i.html(t),o&&o.getEL()&&(r.D.env.bMobile&&(o.getEL().style.fontSize="1.4em"),o.html(n)))},r.D.closeLoadingMsg=function(e){r.D.log("closeLoadingMsg:"+e),r.D.detect.hideMask(),1==r.D.dlgLoadingShowStatus&&(r.D.dlgLoading&&r.D.dlgLoading.close(),r.D.dlgLoadingShowStatus=!1)},n(1255)),c=!0;r.D._funsAfterConfigLoaded=[],r.D._safePromptCustomMsg=function(e){var t,n;r.D.product.loadResourcePath?e&&r.D._funsAfterConfigLoaded.push(e):(c&&(n=r.I.DWT.CustomizableDisplayInfo,r.D.mix(t={},u.Vn),n&&(n.loaderBarClassName&&(t.loaderBarClassName=n.loaderBarClassName),n.loaderBarSource&&(t.loaderBarSource=n.loaderBarSource),n.loaderBarWidth&&(t.loaderBarWidth=n.loaderBarWidth),n.loaderBarHeight&&(t.loaderBarHeight=n.loaderBarHeight),n.errorMessages&&r.D.mix(t.errorMessages,n.errorMessages),n.generalMessages&&r.D.mix(t.generalMessages,n.generalMessages),n.customProgressText&&r.D.mix(t.customProgressText,n.customProgressText),n.buttons&&(n.buttons.titles&&r.D.mix(t.buttons.titles,n.buttons.titles),n.buttons.bShowAllButtons&&r.D.mix(t.buttons.bShowAllButtons,n.buttons.bShowAllButtons),n.buttons.visibility&&r.D.mix(t.buttons.visibility,n.buttons.visibility)),n.dialogText&&r.D.mix(t.dialogText,n.dialogText)),r.I.DWT.CustomizableDisplayInfo=t,c=!1),e&&e())}},5930:function(e,t,n){n.r(t),(t=n(1695).I.DWT).EnumDWT_PixelType={TWPT_BW:0,TWPT_GRAY:1,TWPT_RGB:2,TWPT_PALLETE:3,TWPT_CMY:4,TWPT_CMYK:5,TWPT_YUV:6,TWPT_YUVK:7,TWPT_CIEXYZ:8,TWPT_LAB:9,TWPT_SRGB:10,TWPT_SCRGB:11,TWPT_INFRARED:16},t.EnumDWT_BorderStyle={TWBS_NONE:0,TWBS_SINGLEFLAT:1,TWBS_SINGLE3D:2},t.EnumDWT_MessageType={TWQC_GET:1,TWQC_SET:2,TWQC_GETDEFAULT:4,TWQC_GETCURRENT:8,TWQC_RESET:16},t.EnumDWT_Cap={CAP_NONE:0,CAP_XFERCOUNT:1,ICAP_COMPRESSION:256,ICAP_PIXELTYPE:257,ICAP_UNITS:258,ICAP_XFERMECH:259,CAP_AUTHOR:4096,CAP_CAPTION:4097,CAP_FEEDERENABLED:4098,CAP_FEEDERLOADED:4099,CAP_TIMEDATE:4100,CAP_SUPPORTEDCAPS:4101,CAP_EXTENDEDCAPS:4102,CAP_AUTOFEED:4103,CAP_CLEARPAGE:4104,CAP_FEEDPAGE:4105,CAP_REWINDPAGE:4106,CAP_INDICATORS:4107,CAP_SUPPORTEDCAPSEXT:4108,CAP_PAPERDETECTABLE:4109,CAP_UICONTROLLABLE:4110,CAP_DEVICEONLINE:4111,CAP_AUTOSCAN:4112,CAP_THUMBNAILSENABLED:4113,CAP_DUPLEX:4114,CAP_DUPLEXENABLED:4115,CAP_ENABLEDSUIONLY:4116,CAP_CUSTOMDSDATA:4117,CAP_ENDORSER:4118,CAP_ALARMS:4120,CAP_ALARMVOLUME:4121,CAP_AUTOMATICCAPTURE:4122,CAP_TIMEBEFOREFIRSTCAPTURE:4123,CAP_TIMEBETWEENCAPTURES:4124,CAP_CLEARBUFFERS:4125,CAP_MAXBATCHBUFFERS:4126,CAP_DEVICETIMEDATE:4127,CAP_POWERSUPPLY:4128,CAP_CAMERAPREVIEWUI:4129,CAP_SERIALNUMBER:4132,CAP_PRINTER:4134,CAP_PRINTERENABLED:4135,CAP_PRINTERINDEX:4136,CAP_PRINTERMODE:4137,CAP_PRINTERSTRING:4138,CAP_PRINTERSUFFIX:4139,CAP_LANGUAGE:4140,CAP_FEEDERALIGNMENT:4141,CAP_FEEDERORDER:4142,CAP_REACQUIREALLOWED:4144,CAP_BATTERYMINUTES:4146,CAP_BATTERYPERCENTAGE:4147,CAP_CAMERASIDE:4148,CAP_SEGMENTED:4149,CAP_CAMERAENABLED:4150,CAP_CAMERAORDER:4151,CAP_MICRENABLED:4152,CAP_FEEDERPREP:4153,CAP_FEEDERPOCKET:4154,CAP_AUTOMATICSENSEMEDIUM:4155,CAP_CUSTOMINTERFACEGUID:4156,ICAP_AUTOBRIGHT:4352,ICAP_BRIGHTNESS:4353,ICAP_CONTRAST:4355,ICAP_CUSTHALFTONE:4356,ICAP_EXPOSURETIME:4357,ICAP_FILTER:4358,ICAP_FLASHUSED:4359,ICAP_GAMMA:4360,ICAP_HALFTONES:4361,ICAP_HIGHLIGHT:4362,ICAP_IMAGEFILEFORMAT:4364,ICAP_LAMPSTATE:4365,ICAP_LIGHTSOURCE:4366,ICAP_ORIENTATION:4368,ICAP_PHYSICALWIDTH:4369,ICAP_PHYSICALHEIGHT:4370,ICAP_SHADOW:4371,ICAP_FRAMES:4372,ICAP_XNATIVERESOLUTION:4374,ICAP_YNATIVERESOLUTION:4375,ICAP_XRESOLUTION:4376,ICAP_YRESOLUTION:4377,ICAP_MAXFRAMES:4378,ICAP_TILES:4379,ICAP_BITORDER:4380,ICAP_CCITTKFACTOR:4381,ICAP_LIGHTPATH:4382,ICAP_PIXELFLAVOR:4383,ICAP_PLANARCHUNKY:4384,ICAP_ROTATION:4385,ICAP_SUPPORTEDSIZES:4386,ICAP_THRESHOLD:4387,ICAP_XSCALING:4388,ICAP_YSCALING:4389,ICAP_BITORDERCODES:4390,ICAP_PIXELFLAVORCODES:4391,ICAP_JPEGPIXELTYPE:4392,ICAP_TIMEFILL:4394,ICAP_BITDEPTH:4395,ICAP_BITDEPTHREDUCTION:4396,ICAP_UNDEFINEDIMAGESIZE:4397,ICAP_EXTIMAGEINFO:4399,ICAP_MINIMUMHEIGHT:4400,ICAP_MINIMUMWIDTH:4401,ICAP_AUTODISCARDBLANKPAGES:4404,ICAP_FLIPROTATION:4406,ICAP_BARCODEDETECTIONENABLED:4407,ICAP_SUPPORTEDBARCODETYPES:4408,ICAP_BARCODEMAXSEARCHPRIORITIES:4409,ICAP_BARCODESEARCHPRIORITIES:4410,ICAP_BARCODESEARCHMODE:4411,ICAP_BARCODEMAXRETRIES:4412,ICAP_BARCODETIMEOUT:4413,ICAP_ZOOMFACTOR:4414,ICAP_PATCHCODEDETECTIONENABLED:4415,ICAP_SUPPORTEDPATCHCODETYPES:4416,ICAP_PATCHCODEMAXSEARCHPRIORITIES:4417,ICAP_PATCHCODESEARCHPRIORITIES:4418,ICAP_PATCHCODESEARCHMODE:4419,ICAP_PATCHCODEMAXRETRIES:4420,ICAP_PATCHCODETIMEOUT:4421,ICAP_FLASHUSED2:4422,ICAP_IMAGEFILTER:4423,ICAP_NOISEFILTER:4424,ICAP_OVERSCAN:4425,ICAP_AUTOMATICBORDERDETECTION:4432,ICAP_AUTOMATICDESKEW:4433,ICAP_AUTOMATICROTATE:4434,ICAP_JPEGQUALITY:4435,ICAP_FEEDERTYPE:4436,ICAP_ICCPROFILE:4437,ICAP_AUTOSIZE:4438,ICAP_AUTOMATICCROPUSESFRAME:4439,ICAP_AUTOMATICLENGTHDETECTION:4440,ICAP_AUTOMATICCOLORENABLED:4441,ICAP_AUTOMATICCOLORNONCOLORPIXELTYPE:4442,ICAP_COLORMANAGEMENTENABLED:4443,ICAP_IMAGEMERGE:4444,ICAP_IMAGEMERGEHEIGHTTHRESHOLD:4445,ICAP_SUPPORTEDEXTIMAGEINFO:4446},t.EnumDWT_CapType={TWON_NONE:0,TWON_ARRAY:3,TWON_ENUMERATION:4,TWON_ONEVALUE:5,TWON_RANGE:6},t.EnumDWT_TransferMode={TWSX_NATIVE:0,TWSX_FILE:1,TWSX_MEMORY:2},t.EnumDWT_FileFormat={TWFF_TIFF:0,TWFF_PICT:1,TWFF_BMP:2,TWFF_XBM:3,TWFF_JFIF:4,TWFF_FPX:5,TWFF_TIFFMULTI:6,TWFF_PNG:7,TWFF_SPIFF:8,TWFF_EXIF:9,TWFF_PDF:10,TWFF_JP2:11,TWFF_JPN:12,TWFF_JPX:13,TWFF_DEJAVU:14,TWFF_PDFA:15,TWFF_PDFA2:16},t.EnumDWT_TIFFCompressionType={TIFF_AUTO:0,TIFF_NONE:1,TIFF_RLE:2,TIFF_FAX3:3,TIFF_T4:3,TIFF_FAX4:4,TIFF_T6:4,TIFF_LZW:5,TIFF_JPEG:7,TIFF_PACKBITS:32773},t.EnumDWT_InterpolationMethod={IM_NEARESTNEIGHBOUR:1,IM_BILINEAR:2,IM_BICUBIC:3,IM_BESTQUALITY:5},t.EnumDWT_ImageType={IT_BMP:0,IT_JPG:1,IT_TIF:2,IT_PNG:3,IT_PDF:4,IT_ALL:5,IT_MULTIPAGE_PDF:7,IT_MULTIPAGE_TIF:8,IT_J2K:14},t.EnumDWT_PDFCompressionType={PDF_AUTO:0,PDF_FAX3:1,PDF_FAX4:2,PDF_LZW:3,PDF_RLE:4,PDF_JPEG:5,PDF_JP2000:6,PDF_JBIG2:7},t.EnumDWT_ShowMode={SW_ACTIVE:0,SW_MAX:1,SW_MIN:2,SW_CLOSE:3,SW_IFLIVE:4},t.EnumDWT_CapValueType={TWTY_INT8:0,TWTY_INT16:1,TWTY_INT32:2,TWTY_UINT8:3,TWTY_UINT16:4,TWTY_int:5,TWTY_BOOL:6,TWTY_FIX32:7,TWTY_FRAME:8,TWTY_STR32:9,TWTY_STR64:10,TWTY_STR128:11,TWTY_STR255:12},t.EnumDWT_UnitType={TWUN_INCHES:0,TWUN_CENTIMETERS:1,TWUN_PICAS:2,TWUN_POINTS:3,TWUN_TWIPS:4,TWUN_PIXELS:5,TWUN_MILLIMETERS:6},t.EnumDWT_DUPLEX={TWDX_NONE:0,TWDX_1PASSDUPLEX:1,TWDX_2PASSDUPLEX:2},t.EnumDWT_CapLanguage={TWLG_DAN:0,TWLG_DUT:1,TWLG_ENG:2,TWLG_FCF:3,TWLG_FIN:4,TWLG_FRN:5,TWLG_GER:6,TWLG_ICE:7,TWLG_ITN:8,TWLG_NOR:9,TWLG_POR:10,TWLG_SPA:11,TWLG_SWE:12,TWLG_USA:13,TWLG_USERLOCALE:-1,TWLG_AFRIKAANS:14,TWLG_ALBANIA:15,TWLG_ARABIC:16,TWLG_ARABIC_ALGERIA:17,TWLG_ARABIC_BAHRAIN:18,TWLG_ARABIC_EGYPT:19,TWLG_ARABIC_IRAQ:20,TWLG_ARABIC_JORDAN:21,TWLG_ARABIC_KUWAIT:22,TWLG_ARABIC_LEBANON:23,TWLG_ARABIC_LIBYA:24,TWLG_ARABIC_MOROCCO:25,TWLG_ARABIC_OMAN:26,TWLG_ARABIC_QATAR:27,TWLG_ARABIC_SAUDIARABIA:28,TWLG_ARABIC_SYRIA:29,TWLG_ARABIC_TUNISIA:30,TWLG_ARABIC_UAE:31,TWLG_ARABIC_YEMEN:32,TWLG_BASQUE:33,TWLG_BYELORUSSIAN:34,TWLG_BULGARIAN:35,TWLG_CATALAN:36,TWLG_CHINESE:37,TWLG_CHINESE_HONGKONG:38,TWLG_CHINESE_PRC:39,TWLG_CHINESE_SINGAPORE:40,TWLG_CHINESE_SIMPLIFIED:41,TWLG_CHINESE_TAIWAN:42,TWLG_CHINESE_TRADITIONAL:43,TWLG_CROATIA:44,TWLG_CZECH:45,TWLG_DANISH:0,TWLG_DUTCH:1,TWLG_DUTCH_BELGIAN:46,TWLG_ENGLISH:2,TWLG_ENGLISH_AUSTRALIAN:47,TWLG_ENGLISH_CANADIAN:48,TWLG_ENGLISH_IRELAND:49,TWLG_ENGLISH_NEWZEALAND:50,TWLG_ENGLISH_SOUTHAFRICA:51,TWLG_ENGLISH_UK:52,TWLG_ENGLISH_USA:13,TWLG_ESTONIAN:53,TWLG_FAEROESE:54,TWLG_FARSI:55,TWLG_FINNISH:4,TWLG_FRENCH:5,TWLG_FRENCH_BELGIAN:56,TWLG_FRENCH_CANADIAN:3,TWLG_FRENCH_LUXEMBOURG:57,TWLG_FRENCH_SWISS:58,TWLG_GERMAN:6,TWLG_GERMAN_AUSTRIAN:59,TWLG_GERMAN_LUXEMBOURG:60,TWLG_GERMAN_LIECHTENSTEIN:61,TWLG_GERMAN_SWISS:62,TWLG_GREEK:63,TWLG_HEBREW:64,TWLG_HUNGARIAN:65,TWLG_ICELANDIC:7,TWLG_INDONESIAN:66,TWLG_ITALIAN:8,TWLG_ITALIAN_SWISS:67,TWLG_JAPANESE:68,TWLG_KOREAN:69,TWLG_KOREAN_JOHAB:70,TWLG_LATVIAN:71,TWLG_LITHUANIAN:72,TWLG_NORWEGIAN:9,TWLG_NORWEGIAN_BOKMAL:73,TWLG_NORWEGIAN_NYNORSK:74,TWLG_POLISH:75,TWLG_PORTUGUESE:10,TWLG_PORTUGUESE_BRAZIL:76,TWLG_ROMANIAN:77,TWLG_RUSSIAN:78,TWLG_SERBIAN_LATIN:79,TWLG_SLOVAK:80,TWLG_SLOVENIAN:81,TWLG_SPANISH:11,TWLG_SPANISH_MEXICAN:82,TWLG_SPANISH_MODERN:83,TWLG_SWEDISH:12,TWLG_THAI:84,TWLG_TURKISH:85,TWLG_UKRANIAN:86,TWLG_ASSAMESE:87,TWLG_BENGALI:88,TWLG_BIHARI:89,TWLG_BODO:90,TWLG_DOGRI:91,TWLG_GUJARATI:92,TWLG_HARYANVI:93,TWLG_HINDI:94,TWLG_KANNADA:95,TWLG_KASHMIRI:96,TWLG_MALAYALAM:97,TWLG_MARATHI:98,TWLG_MARWARI:99,TWLG_MEGHALAYAN:100,TWLG_MIZO:101,TWLG_NAGA:102,TWLG_ORISSI:103,TWLG_PUNJABI:104,TWLG_PUSHTU:105,TWLG_SERBIAN_CYRILLIC:106,TWLG_SIKKIMI:107,TWLG_SWEDISH_FINLAND:108,TWLG_TAMIL:109,TWLG_TELUGU:110,TWLG_TRIPURI:111,TWLG_URDU:112,TWLG_VIETNAMESE:113},t.EnumDWT_CapSupportedSizes={TWSS_NONE:0,TWSS_A4LETTER:1,TWSS_B5LETTER:2,TWSS_USLETTER:3,TWSS_USLEGAL:4,TWSS_A5:5,TWSS_B4:6,TWSS_B6:7,TWSS_USLEDGER:9,TWSS_USEXECUTIVE:10,TWSS_A3:11,TWSS_B3:12,TWSS_A6:13,TWSS_C4:14,TWSS_C5:15,TWSS_C6:16,TWSS_4A0:17,TWSS_2A0:18,TWSS_A0:19,TWSS_A1:20,TWSS_A2:21,TWSS_A4:1,TWSS_A7:22,TWSS_A8:23,TWSS_A9:24,TWSS_A10:25,TWSS_ISOB0:26,TWSS_ISOB1:27,TWSS_ISOB2:28,TWSS_ISOB3:12,TWSS_ISOB4:6,TWSS_ISOB5:29,TWSS_ISOB6:7,TWSS_ISOB7:30,TWSS_ISOB8:31,TWSS_ISOB9:32,TWSS_ISOB10:33,TWSS_JISB0:34,TWSS_JISB1:35,TWSS_JISB2:36,TWSS_JISB3:37,TWSS_JISB4:38,TWSS_JISB5:2,TWSS_JISB6:39,TWSS_JISB7:40,TWSS_JISB8:41,TWSS_JISB9:42,TWSS_JISB10:43,TWSS_C0:44,TWSS_C1:45,TWSS_C2:46,TWSS_C3:47,TWSS_C7:48,TWSS_C8:49,TWSS_C9:50,TWSS_C10:51,TWSS_USSTATEMENT:52,TWSS_BUSINESSCARD:53,TWSS_MAXSIZE:54},t.EnumDWT_CapFeederAlignment={TWFA_NONE:0,TWFA_LEFT:1,TWFA_CENTER:2,TWFA_RIGHT:3},t.EnumDWT_CapFeederOrder={TWFO_FIRSTPAGEFIRST:0,TWFO_LASTPAGEFIRST:1},t.EnumDWT_CapPrinter={TWPR_IMPRINTERTOPBEFORE:0,TWPR_IMPRINTERTOPAFTER:1,TWPR_IMPRINTERBOTTOMBEFORE:2,TWPR_IMPRINTERBOTTOMAFTER:3,TWPR_ENDORSERTOPBEFORE:4,TWPR_ENDORSERTOPAFTER:5,TWPR_ENDORSERBOTTOMBEFORE:6,TWPR_ENDORSERBOTTOMAFTER:7},t.EnumDWT_CapPrinterMode={TWPM_SINGLESTRING:0,TWPM_MULTISTRING:1,TWPM_COMPOUNDSTRING:2},t.EnumDWT_CapBitdepthReduction={TWBR_THRESHOLD:0,TWBR_HALFTONE:1,TWBR_CUSTHALFTONE:2,TWBR_DIFFUSION:3},t.EnumDWT_CapBitOrder={TWBO_LSBFIRST:0,TWBO_MSBFIRST:1},t.EnumDWT_CapFilterType={TWFT_RED:0,TWFT_GREEN:1,TWFT_BLUE:2,TWFT_NONE:3,TWFT_WHITE:4,TWFT_CYAN:5,TWFT_MAGENTA:6,TWFT_YELLOW:7,TWFT_BLACK:8},t.EnumDWT_CapFlash={TWFL_NONE:0,TWFL_OFF:1,TWFL_ON:2,TWFL_AUTO:3,TWFL_REDEYE:4},t.EnumDWT_CapFlipRotation={TWFR_BOOK:0,TWFR_FANFOLD:1},t.EnumDWT_CapImageFilter={TWIF_NONE:0,TWIF_AUTO:1,TWIF_LOWPASS:2,TWIF_BANDPASS:3,TWIF_HIGHPASS:4,TWIF_TEXT:3,TWIF_FINELINE:4},t.EnumDWT_CapLightPath={TWLP_REFLECTIVE:0,TWLP_TRANSMISSIVE:1},t.EnumDWT_CapLightSource={TWLS_RED:0,TWLS_GREEN:1,TWLS_BLUE:2,TWLS_NONE:3,TWLS_WHITE:4,TWLS_UV:5,TWLS_IR:6},t.EnumDWT_MagType={TWMD_MICR:0,TWMD_RAW:1,TWMD_INVALID:2},t.EnumDWT_CapNoiseFilter={TWNF_NONE:0,TWNF_AUTO:1,TWNF_LONEPIXEL:2,TWNF_MAJORITYRULE:3},t.EnumDWT_CapORientation={TWOR_ROT0:0,TWOR_ROT90:1,TWOR_ROT180:2,TWOR_ROT270:3,TWOR_PORTRAIT:0,TWOR_LANDSCAPE:3,TWOR_AUTO:4,TWOR_AUTOTEXT:5,TWOR_AUTOPICTURE:6},t.EnumDWT_CapOverscan={TWOV_NONE:0,TWOV_AUTO:1,TWOV_TOPBOTTOM:2,TWOV_LEFTRIGHT:3,TWOV_ALL:4},t.EnumDWT_CapPixelFlavor={TWPF_CHOCOLATE:0,TWPF_VANILLA:1},t.EnumDWT_CapPlanarChunky={TWPC_CHUNKY:0,TWPC_PLANAR:1},t.EnumDWT_DataSourceStatus={TWDSS_CLOSED:0,TWDSS_OPENED:1,TWDSS_ENABLED:2,TWDSS_ACQUIRING:3},t.EnumDWT_FitWindowType={enumFitWindow:0,enumFitWindowHeight:1,enumFitWindowWidth:2},t.EnumDWT_PlatformType={enumUnknown:-1,enumWindow:0,enumMac:1,enumLinux:2,enumEmbed:3,enumChromeOS:4,enumHarmonyOS:5},t.EnumDWT_UploadDataFormat={Binary:0,Base64:1},t.EnumDWT_MouseShape={Default:0,Hand:1,Crosshair:2,Zoom:3,NWResize:4,EResize:5,NResize:6,Resize:7,Move:8},t.EnumDWT_Language={English:0,French:1,Arabic:2,Spanish:3,Portuguese:4,German:5,Italian:6,Russian:7,Chinese:8},t.EnumDWT_InitMsg={Info:1,Error:2,NotInstalledError:3,DownloadError:4,DownloadNotRestartError:5},t.EnumDWT_Driver={TWAIN:0,ICA:3,SANE:3,TWAIN_AND_ICA:4,TWAIN_AND_TWAIN64:4,TWAIN64:5},t.EnumDWT_CompressionType={TWCP_NONE:0,TWCP_PACKBITS:1,TWCP_GROUP31D:2,TWCP_GROUP31DEOL:3,TWCP_GROUP32D:4,TWCP_GROUP4:5,TWCP_JPEG:6,TWCP_LZW:7,TWCP_JBIG:8,TWCP_PNG:9,TWCP_RLE4:10,TWCP_RLE8:11,TWCP_BITFIELDS:12,TWCP_ZIP:13,TWCP_JPEG2000:14},t.EnumDWT_SelectionMode={Single:0,Multiple:1},t.EnumDWT_ConfirmExitType={Cancel:0,Exit:1,SaveAndExit:2}},9435:function(e,t,n){n.r(t),t=n(5683);var r=n.n(t),i=n(1695);function o(e){return i.I.Lib.isString(e)?e:("errorMessage"in e&&(t=e.errorMessage),"message"in e&&(t=e.message),i.I.Lib.isString(t)||(t="message"in t?t.message:""),"errorCode"in e&&-1==r()(t).call(t,"(")&&(t+="("+e.errorCode+")"),"code"in e&&-1==r()(t).call(t,"(")&&(t+="("+e.code+")"),t);var t}i.I.DWT.EnumDWT_Error={ModuleNotExists:-2371},i.D.Errors={OutOfRange:function(e){e._errorCode=-1010,e._errorString="Data parameter out of supported range."},InvalidIndex:function(e){e._errorCode=-1033,e._errorString="Invalid index."},InvalidValue:function(e){e._errorCode=-1034,e._errorString="Invalid value."},NoImage:function(e){e._errorCode=-1035,e._errorString="There is no image."},UnrecognizedExt:function(e){e._errorCode=-1110,e._errorString="Unrecognized file extension."},LoadTextPDFButSetImageOnly:function(e){e._errorCode=-1119,e._errorString="The text-based PDF file was not imported correctly because ConvertMode was set to CM_IMAGEONLY, which means PDF Rasterizer is turned off. Please set ConvertMode to Dynamsoft.DWT.EnumDWT_ConvertMode.CM_AUTO to enable it."},SourceHasNothingToCapture:function(e){e._errorCode=-1029,e._errorString="Source has nothing to capture."},bImageOnlyError_NotPurelyPDF:function(e){return-1416==e},MustUpgradeService:function(e){e._errorCode=-2207,e._errorString="The Dynamsoft Service installed on your computer is outdated and no longer works with the JavaScript code on the website."},Server_Restarted:function(e){e._errorCode=-2208,e._errorString="The connection with the local Dynamsoft Service encountered a problem and has been reset."},HTML5NotSupport:function(e){e._errorCode=-2209,e._errorString="The HTML5 edition does not support this method or property."},CannotCallUIMethodWhenNotBindDefaultViewer:function(e){e._errorCode=-2210,e._errorString="You cannot call this method on this WebTwain instance because it does not use the default viewer."},HttpServerCannotEmpty:function(e){e._errorCode=-2300,e._errorString="Http upload error: the HTTP Server name/ip cannot be empty."},NetworkError:function(e){e._errorCode=-2301,e._errorString="Network error."},InvalidResultFormat:function(e){e._errorCode=-2302,e._errorString="The result format is invalid."},UploadError:function(e,t,n,r){t?(e._errorCode=-2303,e._errorString="Upload cancelled."):(e._errorCode=-2003,r&&0<r||n?(t=["HTTP process error: "],n&&t.push(n),r&&0<r&&t.push(" ("+r+")"),e._errorString=t.join("")+"."):e._errorString="HTTP process error.")},HttpDownloadUrlError:function(e){e._errorCode=-2304,e._errorString="Http download error: the url is invalid."},HttpDownloadError:function(e,t,n,r){t?(e._errorCode=-2305,e._errorString="User cancelled the operation."):(e._errorCode=-2003,r&&0<r||n?(t=["HTTP process error: "],n&&t.push(n),r&&0<r&&t.push(" ("+r+")"),e._errorString=t.join("")+"."):e._errorString="HTTP process error.")},UploadFileCannotEmpty:function(e){e._errorCode=-2306,e._errorString="Upload Error: the upload file cannot be empty."},InvalidWidthOrHeight:function(e){e._errorCode=-2307,e._errorString="The width or height you entered is invalid."},Server_Invalid:function(e){0==e._errorCode&&(e._errorCode=-2308,e._errorString="The local Dynamsoft Service has been stopped.")},InvalidLocalFilename:function(e,t){e._errorCode=-2309,e._errorString="The LocalFile is empty in the name "+t+" Function."},BarCode_InvalidIndex:function(e,t){e._errorCode=-2310,e._errorString="The index is out of range."},BarCode_InvalidRemoteFilename:function(e){e._errorCode=-2311,e._errorString="The RemoteFile field is empty in the Barcode Download Function."},ImageFileLengthCannotZero:function(e){e._errorCode=-2312,e._errorString="The file length is empty."},UploadExceededMaxSize:function(e){e._errorCode=-2313,e._errorString="The size of the images you are about to upload has exceeded the limit."},ParameterCannotEmpty:function(e){e._errorCode=-2314,e._errorString="The parameter cannot be empty."},Webcam_InvalidIndex:function(e,t){e._errorCode=-2315,e._errorString="The index is out of range."},Webcam_InvalidRemoteFilename:function(e){e._errorCode=-2316,e._errorString="The RemoteFile field is empty in the Webcam Download Function."},Pdf_InvalidRemoteFilename:function(e){e._errorCode=-2317,e._errorString="The RemoteFile field is empty in the Pdf Download Function."},InvalidDestination:function(e){e._errorCode=-2318,e._errorString="Invalid destination file."},InvalidSourceFile:function(e){e._errorCode=-2319,e._errorString="Invalid source file."},InvalidFile:function(e){e._errorCode=-2320,e._errorString="Invalid file."},hasLicenseError:function(e){return-2348<=e._errorCode&&e._errorCode<=-2325},OCR_InvalidIndex:function(e,t){e._errorCode=-2321,e._errorString="The index is out of range."},OCR_InvalidLeftOrTopOrRightOrBottom:function(e){e._errorCode=-2322,e._errorString="The left or top or right or bottom you entered is invalid."},OCR_InvalidOutputFormat:function(e){e._errorCode=-2323,e._errorString="The OCR output format is not supported."},OCR_InvalidPageSetMode:function(e){e._errorCode=-2324,e._errorString="The OCR page set mode is not supported."},LicenseEmptyOrInvalid:function(e){e._errorCode=-2325,i.I.Lib.License.isLTS()?(e._errorString="The license is invalid.",i.I.Lib.Errors.SetLTSException(e)):e._errorString="The current product key is empty or invalid."},LicenseExpired:function(e,t){e._errorCode=-2326;var n="";t&&""!=t&&-1==r()(t).call(t,"on")&&(n=" on "+t),i.I.Lib.License.isLTS()?(e._errorString="The license has expired"+n+".",i.I.DWT.lcexp().then((function(){e._errorString=i.I.DWT.licenseException.message}))):e._errorString="The current product key has expired"+n+", please contact the site administrator."},LicenseNoChrome:function(e){e._errorCode=-2327,e._errorString="The current product key does not support Chrome, please contact the site administrator."},LicenseNoFirefox:function(e){e._errorCode=-2328,e._errorString="The current product key does not support Firefox, please contact the site administrator."},LicenseNoIE:function(e){e._errorCode=-2329,e._errorString="The current product key does not support IE, please contact the site administrator."},LicenseNoEdge:function(e){e._errorCode=-2330,e._errorString="The current product key does not support Edge, please contact the site administrator."},LicenseNoSafari:function(e){e._errorCode=-2392,e._errorString="The current product key does not support Safari, please contact the site administrator."},LicenseNoCore:function(e){e._errorCode=-2333,i.I.Lib.License.isLTS()?(e._errorString="The license for the module twain is not found or has expired.",i.I.Lib.Errors.SetLTSException(e)):e._errorString="The current product key is missing the core license, please contact the site administrator."},LicenseNoWebcam:function(e){e._errorCode=-2338,i.I.Lib.License.isLTS()?(e._errorString="The license for the module direct show is not found or has expired.",i.I.Lib.Errors.SetLTSException(e)):e._errorString="The current product key does not support Webcam, please contact the site administrator."},LicenseNoPDF:function(e){e._errorCode=-2339,i.I.Lib.License.isLTS()?(e._errorString="The license for the module pdf rasterizer is not found or has expired.",i.I.Lib.Errors.SetLTSException(e)):e._errorString="The current product key does not support pdf rasterizer, please contact the site administrator."},LicenseNoOCR:function(e){e._errorCode=-2340,i.I.Lib.License.isLTS()?(e._errorString="The license for the module ocr is not found or has expired.",i.I.Lib.Errors.SetLTSException(e)):e._errorString="The current product key does not support OCR, please contact the site administrator."},LicenseNoOCRPro:function(e){e._errorCode=-2341,i.I.Lib.License.isLTS()?(e._errorString="The license for the module ocr pro is not found or has expired.",i.I.Lib.Errors.SetLTSException(e)):e._errorString="The current product key does not support OCR pro, please contact the site administrator."},LicenseBadDomain:function(e){e._errorCode=-2342,e._errorString="The domain of your current site does not match the domain bound in the current product key, please contact the site administrator."},LicenseNotSupportBorwser:function(e){e._errorCode=-2343,e._errorString="The current product key does not support your browser, please contact the site administrator."},LicenseNotSupportWindows:function(e){e._errorCode=-2344,e._errorString="The current product key does not support Windows OS, please contact the site administrator."},LicenseNotSupportMAC:function(e){e._errorCode=-2345,e._errorString="The current product key does not support MAC OS, please contact the site administrator."},LicenseNotSupportLinux:function(e){e._errorCode=-2346,e._errorString="The current product key does not support Linux OS, please contact the site administrator."},LicenseNotSupportOS:function(e){e._errorCode=-2347,e._errorString="The current product key does not support your OS, please contact the site administrator."},LicenseLower:function(e){e._errorCode=-2348,e._errorString="The current product key is invalid because it's generated with the licenses of a different major version."},BarcodeLicenseEmpty:function(e){e._errorCode=-2349,e._errorString="The current product key does not include a license for reading barcode, please contact the site administrator."},IndicesCannotEmpty:function(e){e._errorCode=-2350,e._errorString="The indices cannot be empty."},UploadIndexMoreThanOne:function(e){e._errorCode=-2351,e._errorString="You cannot upload more than one image when the format is BMP, JPG or PNG"},IndicesOutOfRange:function(e){e._errorCode=-2352,e._errorString="The indices are out of range."},HttpHeaderNotAllowed:function(e){e._errorCode=-2353,e._errorString="The header name being used is a protected keyword and is not allowed."},HttpHeaderIsEmpty:function(e){e._errorCode=-2354,e._errorString="The header name cannot be empty."},HttpHeaderIsNull:function(e){e._errorCode=-2355,e._errorString="The header name cannot be null."},HttpHeaderIsUndefined:function(e){e._errorCode=-2356,e._errorString="The header name cannot be undefined."},HttpHeaderIsInvalid:function(e){e._errorCode=-2357,e._errorString="The header name you entered is invalid."},IndicesNotArray:function(e){e._errorCode=-2358,e._errorString="The type of the parameter indices must be an Array."},IndexOutOfRange:function(e){e._errorCode=-2359,e._errorString="The index is out of range."},IndexNullOrUndefined:function(e){e._errorCode=-2360,e._errorString="The index is null or undefined."},ConvertBase64IndexMoreThanOne:function(e){e._errorCode=-2361,e._errorString="You cannot convert more than one image to base64 string when the format is BMP, JPG or PNG."},InvalidImageType:function(e){e._errorCode=-2362,e._errorString="The image type is not supported."},InvalidDataFormat:function(e){e._errorCode=-2363,e._errorString="The data format is not supported."},InvalidUploadInSegments:function(e){e._errorCode=-2364,e._errorString="Please use a Boolean value for the parameter bUploadInSegments."},InvalidUrl:function(e){e._errorCode=-2365,e._errorString="The url is invalid."},ConvertBase64Failed:function(e){e._errorCode=-2366,e._errorString="Converting images to a base64 string failed."},InvalidSegmentUploadThreshold:function(e){e._errorCode=-2367,e._errorString="Invalid value for the parameter segmentUploadThreshold."},InvalidModuleSize:function(e){e._errorCode=-2368,e._errorString="Invalid value for the parameter moduleSize."},LicenseNotSupportWasm:function(e){e._errorCode=-2369,e._errorString="The current product key is missing the WASM core license, please contact the site administrator."},LicenseNotSupportPdfRWasm:function(e){e._errorCode=-2370,i.I.Lib.License.isLTS()?(e._errorString="The license for the module pdf rasterizer is not found or has expired.",i.I.Lib.Errors.SetLTSException(e)):e._errorString="The current product key does not support Pdf Rasterizer Wasm, please contact the site administrator."},WebTwainModuleNotExist:function(e){e._errorCode=i.I.DWT.EnumDWT_Error.ModuleNotExists,e._errorString="Dynamic Web TWAIN scanner module is not installed and it is also missing on the server, please contact the site administrator."},ConvertBinaryIndexMoreThanOne:function(e){e._errorCode=-2372,e._errorString="You cannot convert more than one image to binary when the format is BMP, JPG or PNG."},Overlay_InvalidLeftOrTopOrRightOrBottom:function(e){e._errorCode=-2375,e._errorString="The left or top or right or bottom you entered is invalid."},GenerateURL_InvalidRetFromServer:function(e){e._errorCode=-2376,e._errorString="The generate url failed."},ImageCaptureDriverTypeError:function(e){e._errorCode=-2377,e._errorString="Failed to set Image Capture Driver Type."},InvalidTiffTagError:function(e){e._errorCode=-2378,e._errorString="Invalid value for the tiff tag code."},OCR_InvalidRemoteFilename:function(e){e._errorCode=-2379,e._errorString="The RemoteFile field is empty in the OCR Download Function."},Uploader_ModuleError:function(e){e._errorCode=-2380,e._errorString="Please make sure the Uploader Module has been installed."},ScanUploader_InvalidScanSetup:function(e){e._errorCode=-2381,e._errorString="scanSetup is invalid."},ScanUploader_InvalidTransferMode:function(e){e._errorCode=-2382,e._errorString="Scanner setup error: Invalid Transfer Mode."},ScanUploader_InvalidFileXfer:function(e){e._errorCode=-2383,e._errorString="Scanner setup error: fileXfer is invalid."},ScanUploader_InvalidFileXferFilename:function(e){e._errorCode=-2384,e._errorString="Scanner setup error: Invalid fileName in fileXfer."},ScanUploader_InvalidFileXferFileFormat:function(e){e._errorCode=-2385,e._errorString="Scanner setup error: Invalid fileFormat in fileXfer."},ScanUploader_InvalidHttpParams:function(e){e._errorCode=-2386,e._errorString="Output setup error: Invalid httpParams in outputSetup."},ScanUploader_InvalidHttpType:function(e){e._errorCode=-2387,e._errorString="Output setup error: Invalid type in outputSetup."},ScanUploader_InvalidHttpUrl:function(e){e._errorCode=-2388,e._errorString="Output setup error: Invalid url in outputSetup.httpParams."},ScanUploader_InvalidHttpFilename:function(e){e._errorCode=-2389,e._errorString="Output setup error: Invalid fileName in outputSetup.httpParams."},ScanUploader_InvalidOutputFormat:function(e){e._errorCode=-2390,e._errorString="Output setup error: Invalid format in outputSetup."},InvalidImageID:function(e){e._errorCode=-1034,e._errorString="Invalid image ID."},InvalidEventName:function(e){e._errorCode=-2391,e._errorString="Invalid event name."},ConvertBlobIsEmpty:function(e){e._errorCode=-2393,e._errorString="Failed to convert the data to blob."},InvalidTagName:function(e){e._errorCode=-2394,e._errorString="Invalid tag name."},WebTwainModuleDownloadFailure:function(e){e._errorCode=-2395,e._errorString="The module for Dynamic Web TWAIN has failed to download."},LicenseIsFuture:function(e,t){e._errorCode=-2396,e._errorString="The current product key is invalid, please contact the site administrator."},ServiceNotSupport:function(e,t){e._errorCode=-2397,e._errorString=t+" doesn't work under current settings."},MobileNotSupport:function(e,t){e._errorCode=-2400,e._errorString=t+" doesn't work under current settings."},LoadImageFailed:function(e,t){e._errorCode=-2401,e._errorString="Failed to load image: "+o(t)},RotateFailed:function(e,t){e._errorCode=-2402,e._errorString="Failed to rotate image: "+o(t)},FlipFailed:function(e,t){e._errorCode=-2403,e._errorString="Failed to flip image: "+o(t)},MirrorFailed:function(e,t){e._errorCode=-2404,e._errorString="Failed to mirror image: "+o(t)},EraseFailed:function(e,t){e._errorCode=-2405,e._errorString="Failed to erase image: "+o(t)},InvertFailed:function(e,t){e._errorCode=-2406,e._errorString="Failed to invert image: "+o(t)},SaveImageFailed:function(e,t){e._errorCode=-2407,e._errorString="Failed to save image: "+o(t)},ChangeImageSizeFailed:function(e,t){e._errorCode=-2408,e._errorString="Failed to change image size: "+o(t)},CropFailed:function(e,t){e._errorCode=-2409,e._errorString="Failed to crop image: "+o(t)},SkewAngleFailed:function(e,t){e._errorCode=-2410,e._errorString="Failed to skew angle: "+o(t)},ConvertToGrayScaleFailed:function(e,t){e._errorCode=-2411,e._errorString="Failed to convert to gray scale: "+o(t)},ConvertToBWScaleFailed:function(e,t){e._errorCode=-2412,e._errorString="Failed to convert to black and white scale: "+o(t)},SetDPIFailed:function(e,t){e._errorCode=-2413,e._errorString="Failed to set dpi: "+o(t)},SetImageWidthFailed:function(e,t){e._errorCode=-2414,e._errorString="Failed to set image width: "+o(t)},GetLicenseInfoFailed:function(e,t){e._errorCode=-2415,e._errorString="Failed to get license info: "+o(t)},InvalidParameter:function(e){e._errorCode=-2416,e._errorString="Invalid parameter type."},MobileServer_InvalidLeftOrTopOrRightOrBottom:function(e){e._errorCode=-2417,e._errorString="The left or top or right or bottom you entered is invalid."},MobileServer_InvalidWidth:function(e){e._errorCode=-2418,e._errorString="The width you entered is invalid."},MobileServer_InvalidHeight:function(e){e._errorCode=-2419,e._errorString="The height you entered is invalid."},MobileServer_InvalidXResolution:function(e){e._errorCode=-2420,e._errorString="The x resolution you entered is invalid."},MobileServer_InvalidYResolution:function(e){e._errorCode=-2421,e._errorString="The y resolution you entered is invalid."},MobileServer_InvalidImage:function(e){e._errorCode=-2422,e._errorString="The image source is invalid."},MobileServer_InvalidIndex:function(e){e._errorCode=-2423,e._errorString="The index is invalid."},GetMD5Failed:function(e,t){e._errorCode=-2424,e._errorString="Failed to get MD5: "+o(t)},ConvertFromBase64Failed:function(e){e._errorCode=-2425,e._errorString="Converting image from a base64 string failed."},LicenseTrialFullMixed:function(e){e._errorCode=-2426,e._errorString="You have used a full license with a trial license which is not permitted. Please check and update Dynamsoft.DWT.ProductKey."},BarcodeReaderError:function(e,t){e._errorCode=-2427,e._errorString=t},TiffTagCountExceedError:function(e){e._errorCode=-2428,e._errorString="Tiff tag count has exceeded the limit."},SelectSourceMustAsync:function(e){e._errorCode=-2429,e._errorString="The method SelectSource() must be invoked asynchronously (i.e. with callback functions) when ImageCaptureDriverType is set to TWAIN_AND_ICA or TWAIN_AND_TWAIN64."},HttpLicenseInvalid:function(e){e._errorCode=-2430,e._errorString="The current product key is invalid."},LicenseNotSupportWebcamWasm:function(e){e._errorCode=-2431,e._errorString="The current product key does not support Webcam Wasm, please contact the site administrator."},InvalidParameterInCallback:function(e){e._errorCode=-2432,e._errorString="Invalid parameter."},ActiveXNotSupport:function(e){e._errorCode=-2433,e._errorString="The ActiveX edition does not support this method or property."},DetectCallbackErr:function(e){e._errorCode=-2434},PerspectiveCallback:function(e){e._errorCode=-2435},webtwain_id_not_string:function(){return'Error: The "WebTwainId" is not a string.'},container_id_not_string:function(){return'Error: The argument you passed to the parameter "conatinerId" is not a string.'},container_id_not_exist:function(e){return'Error: The element specified by the id "'+e+"\" doesn't exist."},StartScanFailed:function(e){e._errorCode=-2436,e._errorString="Operation in progress, please try again when the current operation has finished."},ImageEditorOpenCannotPlayVideo:function(e){e._errorCode=-2437,e._errorString="The video can not be played while the Image Editor is open."},SelectSourceMustAsyncWhenRemote:function(e){e._errorCode=-2438,e._errorString="The method SelectSource() must be invoked asynchronously (i.e. with callback functions) when the scanning is done on a remote machine."},CannotBindViewerWhenNoViewerJS:function(e){e._errorCode=-2439,e._errorString="You cannot call the method bindViewer() when Dynamsoft.DWT.UseDefaultViewer is set to false."},LongKeyShortKeyMixed:function(e){e._errorCode=-2444,e._errorString="You can only specify the license once and have already specified it with the API ProductKey."},ImageEditorExist:function(e){e._errorCode=-2500,e._errorString="An ImageEditor already exists."},ThumbnailViewerExist:function(e){e._errorCode=-2501,e._errorString="A ThumbnailViewer already exists."},CustomElementExist:function(e){e._errorCode=-2502,e._errorString="A CustomElement already exists."},ImageEditorNotExist:function(e){e._errorCode=-2503,e._errorString="This ImageEditor doesn't exist."},ImageEditorDispose:function(e){e._errorCode=-2504,e._errorString="The ImageEditor object has been disposed."},ThumbnailViewerNotExist:function(e){e._errorCode=-2505,e._errorString="This ThumbnailViewer doesn't exist."},ThumbnailViewerDispose:function(e){e._errorCode=-2506,e._errorString="The ThumbnailViewer object has been disposed."},CustomElementNotExist:function(e){e._errorCode=-2507,e._errorString="This CustomElement doesn't exist."},CustomElementDispose:function(e){e._errorCode=-2508,e._errorString="The CustomElement object has been disposed."},EventNotExist:function(e){e._errorCode=-2509,e._errorString="The specified event doesn't exist."},CallbackNotAFunction:function(e){e._errorCode=-2510,e._errorString="The callback is not a function."},ElementRequired:function(e){e._errorCode=-2511,e._errorString="Parameter 'element' is required."},ElementNotExist:function(e){e._errorCode=-2512,e._errorString="Parameter 'element' doesn't exist."},Destroyed:function(e){e._errorCode=-2513,e._errorString="The WebTwain instance has been destroyed and can not be used anymore."},InvalidPropertyValue:function(e){e._errorCode=-2514,e._errorString="Invalid property value. "},HostNotAvailable:function(e,t){e._errorCode=-2515,e._errorString="The Dynamsoft Service is not configured correctly on "+t+". Please check."},CameraRequired:function(e){e._errorCode=-2516,e._errorString="The camera addon is required."},OldTagNameRequired:function(e){e._errorCode=-2517,e._errorString="Old tag name is required."},NewTagNameRequired:function(e){e._errorCode=-2518,e._errorString="New tag name is required."},CursorInvalidMode:function(e){e._errorCode=-2519,e._errorString="The current mode does not support setting the cursor to zoom-in."},SystemExceptionError:function(e,t){e._errorCode=-2520,e._errorString=t},ChangeContrastFailed:function(e,t){e._errorCode=-2521,e._errorString="Failed to change contrast: "+o(t)},ChangeBrightnessFailed:function(e,t){e._errorCode=-2522,e._errorString="Failed to change brightening: "+o(t)},ConvertToGrayScaleFilterCallbackErr:function(e,t){e._errorCode=-2523,e._errorString='Failed to apply "gray" filter: '+o(t)},ConvertToBWScaleFilterCallbackErr:function(e,t){e._errorCode=-2524,e._errorString='Failed to apply "black and white" filter: '+o(t)},RemoveShadowFilterCallbackErr:function(e,t){e._errorCode=-2525,e._errorString='Failed to apply "remove shadow" filter: '+o(t)},EnhanceAndSharpenFilterCallbackErr:function(e,t){e._errorCode=-2526,e._errorString='Failed to apply "enhance and sharpen" filter: '+o(t)},BrightenFilterCallbackErr:function(e,t){e._errorCode=-2527,e._errorString='Failed to apply "brightening" filter: '+o(t)},SaveTonerCallbackErr:function(e,t){e._errorCode=-2528,e._errorString='Failed to apply "save toner" filter: '+o(t)},GetBlurryScoreErr:function(e,t){e._errorCode=-2529,e._errorString="Failed to get blurry score: "+o(t)},FileNameCannotEmpty:function(e){e._errorCode=-2530,e._errorString="Document name cannot be empty."},FileNameNotString:function(e){e._errorCode=-2531,e._errorString="Document name is not a string."},DocumentEditorNotExist:function(e){e._errorCode=-2532,e._errorString="This documentEditor doesn't exist."},DocumentEditorDispose:function(e){e._errorCode=-2533,e._errorString="The documentEditor object has been disposed."},DocumentEditorExist:function(e){e._errorCode=-2534,e._errorString="A documentEditor already exists."},RgbaImageToBlobErr:function(e,t){e._errorCode=-2535,e._errorString="Failed to convert image data: "+o(t)},LoadTextPDFButNoPdfrLicenseErr:function(e){e._errorCode=-2536,e._errorString="This PDF file is not supported by the Core module. You may need to activate your PDF Rasterizer licence to support this PDF file. Please contact support for further information."},WasmNotLoaded:function(e){e._errorCode=-2537,e._errorString="The wasm not loaded."},WasmNotLoaded_UseWasmFalse:function(e){e._errorCode=-2538,e._errorString="The wasm not loaded when Dynamsoft.DWT.UseCameraAddonWasm is set to false."},LicenseVersionNotCurrent:function(e,t){e._errorCode=-2539,e._errorString="The current product key is not for version ".concat(t,", please contact the site administrator.")},FileNotExist:function(e){e._errorCode=-2540,e._errorString="The document does not exist."},FileExist:function(e){e._errorCode=-2541,e._errorString="The document already exists."},WebviewerError:function(e,t,n){e._errorCode=n||-2600,e._errorString=t},ClearErrorInfo:function(e){e._errorCode=0,e._errorString=""},SetLTSException:function(e){var t=i.I.DWT.licenseException;t.code=e._errorCode,t.message=e._errorString,t.fromLTS=!1},__last:!1}},7843:function(e,t,n){n.r(t),t=n(1614);var r,i,o,a,s=n.n(t),u=(t=n(1006),n.n(t)),c=(t=n(3701),n.n(t)),l=(t=n(3662),n.n(t)),d=(t=n(9798),n.n(t)),h=(t=n(7682),n.n(t)),g=(t=n(2825),n.n(t)),f=(t=n(4579),n.n(t)),m=(t=n(7711),n.n(t)),p=(t=n(5683),n.n(t)),_=n(1188),v=n(4130),I=n(8420),y=n(7344),b=n(4845),D=n(1695),T=function(){function e(t){(0,I.Z)(this,e),(0,b.Z)(this,"m_iUsingTime",0),(0,b.Z)(this,"m_jvUsingTime",void 0),(0,b.Z)(this,"m_countMap",{}),(0,b.Z)(this,"m_newConsum",!1),(0,b.Z)(this,"m_mapSavedToDb",!1),(0,b.Z)(this,"m_minExpiredTime",void 0),(0,b.Z)(this,"m_maxExpiredTime",void 0),(0,b.Z)(this,"m_cu",void 0),(0,b.Z)(this,"m_ar",void 0),(0,b.Z)(this,"m_ltsInstance",void 0),this.clearData(),(this.m_enumInstance=t)==D.I.DWT.EnumInstance.dwt_desktop?this.m_deploymentType="desktop":t!=D.I.DWT.EnumInstance.dwt_browser&&t!=D.I.DWT.EnumInstance.dbr||(this.m_deploymentType="browser")}return(0,y.Z)(e,[{key:"clearData",value:function(){this.m_iUsingTime=0,this.m_jvUsingTime=D.D.nil,this.m_countMap={},this.m_newConsum=!1,this.m_mapSavedToDb=!1,this.m_minExpiredTime=D.D.nil,this.m_maxExpiredTime=D.D.nil,this.m_cu=D.D.nil,this.m_ar=D.D.nil,this.m_ltsInstance=D.D.nil}},{key:"set_cu",value:function(e){this.m_cu=e}},{key:"get_cu",value:function(){return this.m_cu}},{key:"set_ar",value:function(e){this.m_ar=e}},{key:"get_ar",value:function(){return this.m_ar}},{key:"get_ltsInstance",value:function(e){return this.m_ltsInstance||(this.m_ltsInstance=e(this.m_enumInstance)),this.m_ltsInstance}},{key:"inited_ltsInstance",value:function(e){return!!this.m_ltsInstance}},{key:"set_maxExpiredTime",value:function(e){this.m_maxExpiredTime=e}},{key:"get_maxExpiredTime",value:function(){return this.m_maxExpiredTime}},{key:"set_minExpiredTime",value:function(e){this.m_minExpiredTime=e}},{key:"get_minExpiredTime",value:function(){return this.m_minExpiredTime}},{key:"get_deploymentType",value:function(){return this.m_deploymentType}}]),e}(),S=(t=n(668),D.I.DWT.LTS=D.I.DWT.LTS||{},D.I.DWT.lwscmd=[],D.I.DWT.licenseException={code:0,message:"",fromLTS:!1},D.I.DWT.bLTSOnline=!0,D.I.DWT.axInstance=void 0,D.I.DWT.lOnUpdateDWObj=[],D.I.DWT.globalWS=[],D.I.DWT.EnumInstance={dwt_desktop:0,dwt_browser:1,dbr:2},0),w={},C=!1,E=!1,M=!1,P=!1,A=!1,x=Z.Lib;function R(){var e=D.I.DWT.handshakeCode;return D.I.Lib.isString(e)?e:""}function k(){var e=D.I.DWT.organizationID;return D.I.Lib.isNumber(e)?e=""+e:D.I.Lib.isString(e)||(e=""),e}function L(){return D.I.DWT.JSVersion.split(",")[0]}function F(e){return(e=e===D.I.Lib.nil?Z.Lib.IsNeedLoadWasm()?D.I.DWT.EnumInstance.dwt_browser:D.I.DWT.EnumInstance.dwt_desktop:e)==D.I.DWT.EnumInstance.dwt_browser?i=i||new T(e):e==D.I.DWT.EnumInstance.dbr?a=a||new T(e):o=o||new T(e)}function W(e){var t,n,r=Z.DWT.licenseServer;if(r&&0<r.length)for(t=0;t<r.length;t++)n=r[t],c()(x).call(x,n,"/")||(r[t]=n+"/");var i,o={lf:x.localforage,btoa:x.btoa,atob:x.atob,sutlcb:function(){x.isFunction(Z.DWT.lonsend)&&Z.DWT.lonsend()},fol:Z.DWT.OnFirstOffline,dwt:!0,product:"dwt|dbr"};return o.feab=e==Z.DWT.EnumInstance.dwt_browser||e==Z.DWT.EnumInstance.dbr?Z.DWT.lfeab_wasm:Z.DWT.lfeab_ax,!Z.navInfoSync.bIE&&Z.DWT.ltsDebug&&(o.debugLog=console.log),Z.LTS&&Z.LTS._?Z.LTS._.createLtsInstance(o):((e={}).i=i=function(){return x.Promise.reject({code:-2446,message:"The dynamsoft.lts.js load failed."})},e.s=i,e.caret=i,e)}function O(){return h()()}function B(e){var t,n="yyyy-MM-ddTHH:mm:ss.SSSZ",r={"M+":(e=e?new Date(e):new Date).getUTCMonth()+1,"d+":e.getUTCDate(),"H+":e.getUTCHours(),"h+":e.getUTCHours()%12||12,"m+":e.getUTCMinutes(),"s+":e.getUTCSeconds(),"q+":Math.floor((e.getUTCMonth()+3)/3),"S+":e.getUTCMilliseconds()};for(t in/(y+)/.test(n)&&(n=n.replace(RegExp.$1,(e.getUTCFullYear()+"").substr(4-RegExp.$1.length))),r)new RegExp("("+t+")").test(n)&&(n=n.replace(RegExp.$1,1==RegExp.$1.length?r[t]:("000"+r[t]).substr(("000"+r[t]).length-RegExp.$1.length)));return n}D.I.DWT.lupverfy=function(){F(D.I.DWT.EnumInstance.dwt_desktop).get_ltsInstance(W),F(D.I.DWT.EnumInstance.dwt_browser).get_ltsInstance(W),F(D.I.DWT.EnumInstance.dbr).get_ltsInstance(W)},D.I.DWT.lsmid=function(e){F(D.I.DWT.EnumInstance.dwt_desktop).set_cu(e)},D.I.DWT.laddDWTObj=function(e){var t=!1;D.I.Lib.each(D.I.DWT.lOnUpdateDWObj,(function(n){if(n==e)return!(t=!0)})),t||D.I.DWT.lOnUpdateDWObj.push(e)},D.I.DWT.lremoveDWTObj=function(e){D.I.Lib.each(D.I.DWT.lOnUpdateDWObj,(function(t,n){if(t==e)return l()(t=D.I.DWT.lOnUpdateDWObj).call(t,n,1),!1}))},D.I.DWT.lsendUpdateEvt=function(e){var t=[];if(D.I.Lib.each(D.I.DWT.lOnUpdateDWObj,(function(n){e==Z.DWT.EnumInstance.dwt_desktop?(n.isUsingActiveX()||n._bLocalService)&&t.push(n):e!=Z.DWT.EnumInstance.dwt_browser||n.isUsingActiveX()||n._bLocalService||t.push(n)})),0==t.length)return D.I.Lib.Promise.resolve();var n=t[0];return n.isUsingActiveX()?(D.I.Lib.each(t,(function(t){t.SetLTSInfo(F(e).get_ar(),F(e).get_cu())})),n.GetLicenseInfo().then((function(t){t&&D.I.Lib.isArray(t.Detail)&&0<t.Detail.length&&Z.DWT.lsexp(e,t.Detail[0].ExpireDate)}))):(n=n.SetLTSLicenseAsync(F(e).get_ar()).then((function(t){t&&D.I.Lib.isArray(t.Detail)&&0<t.Detail.length&&Z.DWT.lsexp(e,t.Detail[0].ExpireDate)})),D.I.Lib.each(t,(function(t,n){0!=n&&t.SetLTSLicenseAsync(F(e).get_ar())})),n)},D.I.DWT.lgcb=function(){var e=D.I.navInfo,t=D.I.navInfoSync,n=[];return t.bChrome?n.push("Chrome"):t.bFirefox?n.push("Firefox"):t.bEdge?n.push("Edge"):t.bIE?n.push("IE"):t.bSafari?n.push("Safari"):t.bOpera?n.push("Opera"):e.b360SE?n.push("360SE"):e.bTencentTraveler?n.push("TencentTraveler"):e.bMaxthon?n.push("Maxthon"):e.bMetaSr?n.push("MetaSr"):e.bTheWorld?n.push("TheWorld"):e.bUC?n.push("UC"):e.bHuaWeiBrowser&&n.push("HuaWeiBrowser"),n.push(t.strBrowserVersion),t.bWin?n.push("Windows"):t.bMac?n.push("Mac"):t.bLinux?n.push("Linux"):t.bAndroid?n.push("Android"):t.bChromeOS?n.push("ChromeOS"):t.bHarmonyOS?n.push("HarmonyOS"):Z.Lib.env.bMobile?n.push("Mobile OS"):e.bEmbed&&n.push("Embed OS"),n.join(" ")},D.I.DWT.lglic=function(e){var t=F(e);if(D.I.DWT.lclex(),t.get_ar()&&t.get_cu())return d().resolve({ar:t.get_ar(),cu:t.get_cu()});var n,r,i,o={engineResourcePath:(o=D.I.DWT.ResourcesPath,i="",[o,i=c()(r=Z.Lib).call(r,o,"/")?i:"/","src"].join("")),version:u()(r=D.I.Lib).call(r,D.I.DWT.JSVersion,",","."),pk:R(),dm:location.origin?s()(n=D.I.Lib).call(n,location.origin,"http")?location.origin:"https://localhost":s()(n=D.I.Lib).call(n,location.href,"http")?location.href:"https://localhost",browserInfo:D.I.DWT.lgcb(),deviceFriendlyName:D.I.DWT.DeviceFriendlyName||"",ls:D.I.DWT.licenseServer,sp:D.I.DWT.sessionPassword,og:k(),getMinExpireTime:function(){return t.get_maxExpiredTime()},getMaxExpireTime:function(){return t.get_minExpiredTime()},fol:D.I.DWT.OnFirstOffline};return o.dt=t.get_deploymentType(),e==D.I.DWT.EnumInstance.dwt_desktop&&(o.lsu=t.get_cu()),e!=D.I.DWT.EnumInstance.dbr&&(o.dwt=!0,o.updateLicense=function(n){t.set_ar(n.ar),t.get_cu()||t.set_cu(n.cu),D.I.DWT.lsendUpdateEvt(e)}),t.get_ltsInstance(W).i(o).then((function(e){return t.get_ar()||t.set_ar()(e.ar),t.get_cu()||t.set_cu(e.cu),e}))},D.I.DWT.lshow=function(){return{t:r,t2:S,m:g()(w)}},D.I.DWT.lgct=t.ME,D.I.DWT.lcvrf=function(e){var t=e.isUsingActiveX()||e._bLocalService?Z.DWT.EnumInstance.dwt_desktop:Z.DWT.EnumInstance.dwt_browser;f()((function(){D.I.DWT.lcvrf_(e,t)}),1)},D.I.DWT.lcvrf_=function(e,t){var n,i,o,a,s=D.I.DWT.lgcb(),c=F(t),l=function(e,t){var n,i,o=Z.Lib,a=0;o.isString(e)&&""!=e&&"{}"!=e&&t&&o.isArray(t)&&(t.length<1||(i=F(t[0]),t=o.parse(e),D.I.DWT.lclex(),0==S&&(e=O(),n="",r=B(S=e),w={},a=0,o.each(t,(function(e,t){(t<a||0==a)&&(a=t,n=e)})),0<a&&i.get_ltsInstance(W).s(D.I.DWT.licenseServer,n,a,!0).then((function(){}),(function(e){}))),o.each(t,(function(e,t){var n=!1,r=m()(t);0<r&&r!=a&&(r+18e4<O()&&(n=!0),i.get_ltsInstance(W).s(D.I.DWT.licenseServer,e,t,n).then((function(){}),(function(e){})))}))))};if((s={handShake:R(),organization:k(),clientUuid:c.get_cu(),clientFriendName:"",cw:"",os:s,versionMajor:L(),deploymentType:c.get_deploymentType(),edition:"javascript"}).product="dwt|dbr",c=g()(s),!e.isUsingActiveX())return s=Z.Lib.html5.Funs,n="GetBuffer",i=(0,_.dv)(u()(i=Z.Lib).call(i,c,'"','\\"')),c=e._objWS,o=e.clientId,a=(0,v.R)(),D.I.DWT.lwscmd.push({cmd:n,cmdId:a,sFun:l,fFun:function(){},params:[t,e._host]}),s.sendData(c,D.I.DWT.lgj(o,n,i,a),!1,!0);l(e.GetBuffer(c),[t,""])},D.I.DWT.lavrf=function(e,t,n){var i=1;""!=e&&(1<t&&(i=t),t=O(),0<S&&S+18e4<t&&(E?(w={},D.I.DWT.lavrf__unload()):D.I.DWT.lavrf__(!0,n),t=O()+1,r=B(S=t),w={}),E=!(C=!0),w[e]?w[e]+=i:w[e]=i,0==S&&D.I.DWT.lavrf__(!0,n))},D.I.DWT.lavrf_=function(e,t){C&&(e=e||1,f()((function(){D.I.DWT.lavrf__(!1,t)}),e))},D.I.DWT.lavrf__=function(e,t){var n,i=O(),o=!1,a=(e=!!e,0),s=(t=F(t=D.I.Lib.isUndefined(t)?D.I.DWT.EnumInstance.dwt_browser:t),C=!1,0==S&&(o=!0,r=B(S=i)),n=S,c=r,{}),u=(s.usingTime=c,{});if(Z.Lib.each(w,(function(e,t){0<(u[t]=e)&&a++})),s.counts=u,e||n+18e4<i){e=!0;var c=O()+1;if(r=B(S=c),E=!(w={}),0==a)return}else{if(0==a)return;E=!0}s.concurrentDuration=o?1:180,i=D.I.DWT.lgcb(),c={handShake:R(),organization:k(),clientUuid:t.get_cu(),clientFriendName:"",cw:"",os:i,versionMajor:L(),deploymentType:t.get_deploymentType(),edition:"javascript",records:[s],product:"dwt|dbr"},o=g()(c),D.I.DWT.ltsDebug&&B(),D.I.DWT.lclex(),t.get_ltsInstance(W).s(D.I.DWT.licenseServer,o,""+n,e).then((function(){}),(function(e){}))},D.I.DWT.lavrf__unload=function(){var e=O(),t=F(D.I.DWT.EnumInstance.dwt_desktop),n=F(D.I.DWT.EnumInstance.dwt_browser),i=F(D.I.DWT.EnumInstance.dbr),o=(C=!1,0==S&&(r=B(S=e)),e=S,O()+1);r=B(S=o),E=!(w={}),e+=1,D.I.DWT.lclex(),t.inited_ltsInstance()&&t.get_ltsInstance(W).s(D.I.DWT.licenseServer,!1,""+e,!0).then((function(){}),(function(e){})),n.inited_ltsInstance()&&n.get_ltsInstance(W).s(D.I.DWT.licenseServer,!1,""+e,!0).then((function(){}),(function(e){})),i.inited_ltsInstance()&&i.get_ltsInstance(W).s(D.I.DWT.licenseServer,!1,""+e,!0).then((function(){}),(function(e){}))},D.I.DWT.lclex=function(){var e=D.I.DWT.licenseException;e.code=0,e.message="",e.httpResponse="",e.fromLTS=!1},D.I.DWT.li=function(e){var t;return e.axInstance&&(D.I.DWT.axInstance=e.axInstance,D.I.DWT.axInstance)?(t=D.I.DWT.axInstance.GetUUID(),F(e.instanceMode).set_cu(t),t):F(e.instanceMode).get_cu()},D.I.DWT.lfeab_ax=function(e){return new(d())((function(t,n){var r="";if(D.I.DWT.axInstance)try{r=D.I.DWT.axInstance.Encrypt(e,0)}catch(o){}t(r)}))},D.I.DWT.lfeab_wasm=function(e){return new(d())((function(t,n){var r=new Z.Imagecore;r.getAesResult(e).then((function(e){r.terminate(),t(e)}),(function(e){r.terminate(),n(e)}))}))},D.I.DWT.lgj=function(e,t,n,r){var i=[];return r=[(i.push("{"),i.push('"id":"'),i.push(e),i.push('"'),r&&(i.push(',"cmdId":"'),i.push(r),i.push('"')),i.push(',"method":"'),i.push(t),i.push('"'),i.push(',"module":"dwt","version":"'),e=Z.Lib).product.getDWTPrefix(),e.product.getServerVersionInfo()].join(""),i.push(r),i.push('"'),null!=n&&(i.push(',"parameter":'),i.push(n)),i.push("}"),i.join("")},D.I.DWT.lwsproc=function(e){var t,n;if(0<=p()(e).call(e,"Exception:")||0==p()(e).call(e,"Error"))return t=e,void((n=Z.DWT.lwscmd.pop()||{}).fFun&&n.fFun({code:-2520,message:t}));try{e=Z.Lib.parse(e)}catch(s){return void((n=D.I.DWT.lwscmd.pop()||{}).fFun&&n.fFun(s))}if(e.cmdId){for(var r=-1,i=Z.DWT.lwscmd.length-1;0<=i;i--)if(Z.DWT.lwscmd[i].cmdId==e.cmdId){var o;r=i,n=l()(o=Z.DWT.lwscmd).call(o,r,1)[0];break}if(r<0)return}"GetBuffer"==e.method?void 0!==e.exception&&void 0!==e.description?n.fFun&&n.fFun({code:e.exception,message:e.description}):n.sFun(n.sFun&&0<e.result.length?e.result[0]:"",n.params):n.sFun&&n.sFun(e)},D.I.DWT.lsexp=function(e,t){3==(r=(t=u()(r=D.I.Lib).call(r,t,"/","-")).split("-")).length&&(i=r[0],n=r[1],r=r[2],t=[i,n=n.length<2?(n="00"+n).substr(n.length-2):n,r=r.length<2?(r="00"+r).substr(r.length-2):r].join("-"));var n,r,i=[t,"T23:59:59.999Z"].join("");F(e).set_minExpiredTime(i),F(e).set_maxExpiredTime(i)},D.I.DWT.lunload=function(){D.I.DWT.lavrf__unload();var e=F(D.I.DWT.EnumInstance.dwt_desktop),t=F(D.I.DWT.EnumInstance.dwt_browser),n=F(D.I.DWT.EnumInstance.dbr);e.clearData(),t.clearData(),n.clearData(),S=0,r=D.I.Lib.nil,A=P=M=C=E=!(w={}),D.I.DWT.lwscmd=[],D.I.DWT.lclex(),D.I.DWT.bLTSOnline=!0,D.I.DWT.axInstance=D.I.Lib.nil,D.I.DWT.lOnUpdateDWObj=[],D.I.DWT.globalWS=[]},D.I.DWT.lcexp=function(e){return F(e).get_ltsInstance(W).caret().then((function(){return!1}),(function(e){var t=Z.DWT.licenseException,n="";return e instanceof Error||"message"in e?n=e.message:D.I.Lib.isString(e)&&(n=e),D.I.DWT.lsetException(-2445,n,!1),P||(P=!0,console&&console,Z.OnLTSLicenseError&&Z.OnLTSLicenseError(Z.Lib.License.getPublicLicenseContent(t.message))),!0}))},D.I.DWT.OnLicenseException=function(){var e,t,n,r=D.I.DWT.licenseException,i=r.message;D.I.Lib.isString(i)&&(-1<p()(i).call(i,"Error Code")?i=u()(e=D.I.Lib).call(e,i,"Error Code","error code"):-1<p()(i).call(i,"Error code")&&(i=u()(e=D.I.Lib).call(e,i,"Error code","error code"))),-1<p()(i).call(i,"(https://www.dynamsoft.com/purchase-center/)")&&(i=i.replace("(https://www.dynamsoft.com/purchase-center/)","(https://www.dynamsoft.com/store/dynamic-web-twain/)"),r.message=i),-1<p()(i).call(i,"error code:")?(e=i.substr(0,p()(i).call(i,"message")),t=i.substr(p()(i).call(i,"message")),-1<p()(e).call(e,"{")&&(e=e.substr(p()(e).call(e,"{")+1)),-1<p()(t).call(t,"}")&&(t=t.substr(0,p()(t).call(t,"}"))),e=u()(n=D.I.Lib).call(n,e,"error code:",""),t=u()(n=D.I.Lib).call(n,t,"message: ",""),D.I.DWT.lsetException(m()(e),t,!0),console&&console,Z.OnLTSLicenseError&&Z.OnLTSLicenseError(Z.Lib.License.getPublicLicenseContent(i))):(r.code||(n=-2440,-1<p()(i).call(i,"timed out")||-1<p()(i).call(i,"timeout")?n=-2441:(-1<p()(i).call(i,"access-control-allow-origin")||-1<p()(i).call(i,"cors"))&&(n=-2443),D.I.DWT.lsetException(n,i,!0)),console&&console,-2446!=r.code&&Z.OnLTSLicenseError&&Z.OnLTSLicenseError(Z.Lib.License.getPublicLicenseContent(r.message)))},D.I.DWT.lol=function(){return D.I.DWT.bLTSOnline},D.I.DWT.OnFirstOffline=function(e){D.I.DWT.bLTSOnline=!1},D.I.DWT.lpubdlg=function(e,t){if(D.I.Lib.isString(e)&&""!=e){if(e=D.I.Lib.atob(e),console&&console,1==t)return M||(M=!0,Z.OnLTSPublicLicenseMessage&&Z.OnLTSPublicLicenseMessage(Z.Lib.License.getPublicLicenseContent(e))),!0;2==t&&(M=M||!0)}return!1},D.I.DWT.lcheckLic=function(e,t){var n=!1;if(t){if(D.I.Lib.isArray(t.Detail)&&0<t.Detail.length)return Z.DWT.lsexp(e,t.Detail[0].ExpireDate),Z.DWT.lcexp().then((function(e){var n=!1;e?n=!0:1!=t.Trial&&2!=t.Trial||(n=D.I.DWT.lpubdlg(t.Message,t.Trial)),n||D.I.DWT.bLTSOnline||A||(A=!0,Z.OnLTSConnectionWarning&&Z.OnLTSConnectionWarning())}));1!=t.Trial&&2!=t.Trial||(n=D.I.DWT.lpubdlg(t.Message,t.Trial))}n||D.I.DWT.bLTSOnline||A||(A=!0,Z.OnLTSConnectionWarning&&Z.OnLTSConnectionWarning())},D.I.DWT.lisValidID=function(e){return!(!D.I.Lib.isString(e)||""==e)||(e=D.I.DWT.licenseException,D.I.DWT.lsetException(-2447,"Failed to generate an ID for your device to license it: not enough permission.",!0),console&&console,e=e.message,Z.OnLTSUUIDError&&Z.OnLTSUUIDError(e),!1)},D.I.DWT.lsetException=function(e,t,n){var r=Z.DWT.licenseException;r.code=e,r.message=t,D.I.Lib.isUndefined(n)||(r.fromLTS=n)}},6831:function(e,t,n){n.r(t),t=n(3662);var r=n.n(t),i=(t=n(4579),n.n(t)),o=(t=n(9798),n.n(t)),a=(t=n(5683),n.n(t)),s=n(1695),u=(t=n(7711),n.n(t));function c(e,t){var n=this,r=0,i=(e=s.D.isString(e)?document.getElementById(e):e,n.isLoaded=!1,n.displayType=0,n.progress=0,n.progressPosition=0,n.borderWidth={left:0,right:0,top:0,bottom:0},n.orientation=t.orientation||c.Orientation.Horizontal,n.direction=t.direction||c.Direction.LeftToRight,n.creationType=t.creationType||c.CreationType.Replace,n.value=0,n.initialValue=t.value||0,n.minValue=t.minValue||0,n.maxValue=t.maxValue||100,n.showLabel=void 0===t.showLabel||t.showLabel,n.labelText=t.labelText||"",n.width=t.width||280,n.height=t.height||20,n.borderRadius=t.borderRadius||10,n.orientation==c.Orientation.Horizontal&&n.borderRadius>n.height/2&&(n.borderRadius=Math.round(n.height/2)),n.orientation==c.Orientation.Vertical&&n.borderRadius>n.width/2&&(n.borderRadius=Math.round(n.width/2)),n.backColor=t.backColor||"",n.color=t.color||"#50a8e1",n.animationStyle=0,n.animationInterval=t.animationInterval||100,["parent","background","wrapper","left","middle","right","horizontalText","verticalText","marker"]);for(n.extraClassName={},r=0;r<i.length;r++)n.extraClassName[i[r]]=t.extraClassName?"string"==typeof t.extraClassName?t.extraClassName:t.extraClassName[i[r]]||"":"";n.onLoad=t.onLoad||null,n.onValueChanged=t.onValueChanged||null,n.onAnimate=t.onAnimate||null,n.creationType==c.CreationType.Replace?n.parentElement=e:(n.parentElement=document.createElement("DIV"),e.appendChild(n.parentElement)),n.finishLoading()}c.Orientation={Horizontal:0,Vertical:1},c.Direction={LeftToRight:0,RightToLeft:1,TopToBottom:0,BottomToTop:1},c.CreationType={Replace:0,AppendChild:1},c.AnimationStyle={None:0,Static:1,StaticFull:2,Custom:3,CustomFull:4,Flickering1:10,Flickering2:11,Flickering3:12,LeftToRight1:20,LeftToRight2:21,RightToLeft1:22,RightToLeft2:23,TwoWay:24},c.prototype.finishLoading=function(){var e,t=this,n=(t.wrapperElement=null,t.backgroundElement=null,t.valueElement=null,t.leftElement=null,t.middleElement=null,t.rightElement=null,t.backgroundElement=document.createElement("DIV"),t.backgroundElement.className="progressbar_background"+(t.extraClassName.background?" ":"")+t.extraClassName.background,t.backgroundElement.style.cssText=t.backgroundElement.style.cssText+c._createBorderRadiusCss(t.borderRadius),t.parentElement.appendChild(t.backgroundElement),["border-radius","border-bottom-right-radius","-moz-border-radius-bottomright","-webkit-border-bottom-right-radius","-khtml-border-radius-bottomright","-khtml-border-bottom-right-radius"]),r=0,i="";for(r=0;r<n.length&&!(i=c._elementCurrentStyle(t.backgroundElement,n[r]))&&"string"!=typeof i;r++);""!=i&&c._parseInt(i)!=t.borderRadius&&(t.borderRadius=c._parseInt(i)),t.displayType=t.orientation==c.Orientation.Horizontal||t.orientation==c.Orientation.Vertical?0:1,t.parentElement.className=(""!=t.parentElement.className?" ":"")+"progressbar_parent dynamsoft-progressBar"+(t.extraClassName.parent?" ":"")+t.extraClassName.parent,0==t.displayType?((e=t.wrapperElement=document.createElement("DIV")).style.border="1px solid #A0A0A0",e.style.cssFloat="left",e.style.display="inline-block",e.style.width=t.width+"px",e.style.height=t.height+"px",e.style.left="0px",e.style.top=-t.height+"px",e.style.backgroundColor=t.backColor,e.style.backgroundRepeat="no-repeat",e.style.position="relative",e.style.cssText=e.style.cssText+c._createBorderRadiusCss(t.borderRadius),t.parentElement.appendChild(e),t.borderWidth={left:c._parseInt(c._elementCurrentStyle(e,"border-left-width")),right:c._parseInt(c._elementCurrentStyle(e,"border-right-width")),top:c._parseInt(c._elementCurrentStyle(e,"border-top-width")),bottom:c._parseInt(c._elementCurrentStyle(e,"border-bottom-width"))}):1==t.displayType&&(t.orientation==c.Orientation.Horizontal?t.borderRadius>t.width/2&&(t.borderRadius=t.width):t.orientation==c.Orientation.Vertical&&t.borderRadius>t.height/2&&(t.borderRadius=t.height),t.valueElement=document.createElement("DIV"),t.valueElement.className="",t.leftElement=document.createElement("DIV"),t.middleElement=document.createElement("DIV"),t.rightElement=document.createElement("DIV"),t.leftElement.style.border="1px solid #A0A0A0",t.leftElement.style.cssFloat="left",t.leftElement.style.display="inline-block",t.leftElement.style.backgroundColor=t.backColor,t.leftElement.style.backgroundRepeat="no-repeat",t.leftElement.style.position="relative",t.rightElement.style.border="1px solid #A0A0A0",t.rightElement.style.cssFloat="left",t.rightElement.style.display="inline-block",t.rightElement.style.backgroundColor=t.backColor,t.rightElement.style.backgroundRepeat="no-repeat",t.rightElement.style.position="relative",t.middleElement.style.border="1px solid #A0A0A0",t.middleElement.style.cssFloat="left",t.middleElement.style.display="inline-block",t.middleElement.style.overflow="hidden",t.middleElement.style.position="relative",t.valueElement.style.backgroundColor=t.backColor,t.valueElement.style.position="relative",t.orientation==c.Orientation.Horizontal?(t.leftElement.style.width=t.borderRadius+"px",t.leftElement.style.height=t.height+"px",t.leftElement.style.top=-t.height+"px",t.leftElement.style.left="0px",t.leftElement.style.borderRight="none",t.leftElement.style.cssText=t.leftElement.style.cssText+c._createBorderRadiusCss(t.borderRadius,0,0,t.borderRadius),t.rightElement.style.width=t.borderRadius+"px",t.rightElement.style.height=t.height+"px",t.rightElement.style.top=-t.height+"px",t.rightElement.style.borderLeft="none",t.rightElement.style.cssText=t.rightElement.style.cssText+c._createBorderRadiusCss(0,t.borderRadius,t.borderRadius,0),t.middleElement.style.width=t.width-2*t.borderRadius+"px",t.middleElement.style.height=t.height+"px",t.middleElement.style.top=-t.height+"px",t.middleElement.style.borderLeft="none",t.middleElement.style.borderRight="none",t.valueElement.style.width="0px",t.valueElement.style.height=t.height+"px"):t.orientation==c.Orientation.Vertical&&(t.leftElement.style.width=t.width+"px",t.leftElement.style.height=t.borderRadius+"px",t.leftElement.style.top=-t.height+"px",t.leftElement.style.left="0px",t.leftElement.style.borderBottom="none",t.leftElement.style.cssText=t.leftElement.style.cssText+c._createBorderRadiusCss(t.borderRadius,t.borderRadius,0,0),t.rightElement.style.width=t.width+"px",t.rightElement.style.height=t.borderRadius+"px",t.rightElement.style.top=-t.height+"px",t.rightElement.style.left="0px",t.rightElement.style.borderTop="none",t.rightElement.style.cssText=t.rightElement.style.cssText+c._createBorderRadiusCss(0,0,t.borderRadius,t.borderRadius),t.middleElement.style.width=t.width+"px",t.middleElement.style.height=t.height-2*t.borderRadius+"px",t.middleElement.style.top=-t.height+"px",t.middleElement.style.left="0px",t.middleElement.style.borderTop="none",t.middleElement.style.borderBottom="none",t.valueElement.style.width=t.width+"px",t.valueElement.style.height="0px"),t.middleElement.appendChild(t.valueElement),t.parentElement.appendChild(t.leftElement),t.parentElement.appendChild(t.middleElement),t.parentElement.appendChild(t.rightElement),t.orientation==c.Orientation.Horizontal?t.borderWidth={left:c._parseInt(c._elementCurrentStyle(t.leftElement,"border-left-width")),right:c._parseInt(c._elementCurrentStyle(t.rightElement,"border-right-width")),top:c._parseInt(c._elementCurrentStyle(t.middleElement,"border-top-width")),bottom:c._parseInt(c._elementCurrentStyle(t.middleElement,"border-bottom-width"))}:t.orientation==c.Orientation.Vertical&&(t.borderWidth={left:c._parseInt(c._elementCurrentStyle(t.middleElement,"border-left-width")),right:c._parseInt(c._elementCurrentStyle(t.middleElement,"border-right-width")),top:c._parseInt(c._elementCurrentStyle(t.leftElement,"border-top-width")),bottom:c._parseInt(c._elementCurrentStyle(t.rightElement,"border-bottom-width"))})),t.parentElement.style.width=t.width+t.borderWidth.left+t.borderWidth.right+"px",t.parentElement.style.height=t.height+t.borderWidth.top+t.borderWidth.bottom+"px",t.backgroundElement.style.cssFloat="left",t.backgroundElement.style.display="inline-block",t.backgroundElement.style.width=t.width+t.borderWidth.left+t.borderWidth.right+"px",t.backgroundElement.style.height=t.height+"px",t.backgroundElement.style.backgroundColor="#FFFFFF",t.backgroundElement.style.position="relative",0==t.displayType&&(t.backgroundElement.style.width=t.width+t.borderWidth.left+t.borderWidth.right+"px"),t.backgroundElement.style.top=t.borderWidth.top+"px",t.markerElement=document.createElement("DIV"),t.markerElement.style.display="inline-block",t.markerElement.style.zoom="1.0",t.markerElement.style.width=t.width+"px",t.markerElement.style.height=t.height+"px",t.markerElement.style.top=2*-t.height-t.borderWidth.top+"px",t.markerElement.style.left=t.borderWidth.left+"px",t.markerElement.style.backgroundColor=t.color,t.markerElement.style.lineHeight=t.height+"px",t.markerElement.style.position="relative",t.parentElement.appendChild(t.markerElement),t.isLoaded=!0,t.setValue(t.initialValue),null!=t.onLoad&&t.onLoad()},c.prototype.setValue=function(e){var t,n,r,i,o=this;null!==(e=null!==(e=null!==e&&e<o.minValue?o.minValue:e)&&e>o.maxValue?o.maxValue:e)&&(o.value=e),o.isLoaded&&(e=0,o.orientation==c.Orientation.Horizontal?(o.progressPosition=e=o.value/o.maxValue*o.width,0==o.displayType||1==o.displayType&&(o.direction==c.Direction.LeftToRight?o.valueElement.style.width=e<=o.borderRadius?"0px":e>=o.width-o.borderRadius?o.middleElement.style.width:e-o.borderRadius+"px":e<=o.borderRadius?o.valueElement.style.width="0px":e>=o.width-o.borderRadius?(o.valueElement.style.left="0px",o.valueElement.style.width=o.middleElement.style.width):(o.valueElement.style.left=o.width-e-o.borderRadius+"px",o.valueElement.style.width=e-o.borderRadius+"px")),0<e?(o.markerElement.style.width=o.animationStyle!=c.AnimationStyle.StaticFull&&o.animationStyle!=c.AnimationStyle.CustomFull?e+"px":o.width+"px",o.markerElement.style.visibility="visible"):(o.markerElement.style.width=o.width+"px",o.animationStyle!=c.AnimationStyle.StaticFull&&o.animationStyle!=c.AnimationStyle.CustomFull&&(o.markerElement.style.visibility="hidden")),o.markerElement.style.left=o.animationStyle==c.AnimationStyle.StaticFull||o.animationStyle==c.AnimationStyle.CustomFull||o.direction==c.Direction.LeftToRight?o.borderWidth.left+"px":o.width-e+o.borderWidth.left+"px",i=2*-o.height-o.borderWidth.top,0==e||o.width==e?(o.markerElement.style.top=i+"px",o.markerElement.style.height=o.height+"px",o.markerElement.style.cssText=o.markerElement.style.cssText+c._createBorderRadiusCss(o.borderRadius)):e<o.borderRadius?(r=o.height-2.25*(o.borderRadius-Math.sqrt(Math.pow(o.borderRadius,2)-Math.pow(o.borderRadius-e,2))),o.markerElement.style.top=(n=i+o.height/2-r/2)+"px",o.markerElement.style.height=r+"px",o.markerElement.style.cssText=o.direction==c.Direction.LeftToRight?o.markerElement.style.cssText+c._createBorderRadiusCss(o.borderRadius,0,0,o.borderRadius):o.markerElement.style.cssText+c._createBorderRadiusCss(0,o.borderRadius,o.borderRadius,0)):o.width-e<o.borderRadius?(t=(2*(o.borderRadius-(o.width-e))+(o.borderRadius-Math.sqrt(Math.pow(o.borderRadius,2)-Math.pow(o.borderRadius-(o.width-e),2))))/3,o.markerElement.style.cssText=o.direction==c.Direction.LeftToRight?o.markerElement.style.cssText+c._createBorderRadiusCss(o.borderRadius,t,t,o.borderRadius):o.markerElement.style.cssText+c._createBorderRadiusCss(t,o.borderRadius,o.borderRadius,t)):(o.markerElement.style.top=i+"px",o.markerElement.style.height=o.height+"px",o.markerElement.style.cssText=o.direction==c.Direction.LeftToRight?o.markerElement.style.cssText+c._createBorderRadiusCss(o.borderRadius,0,0,o.borderRadius):o.markerElement.style.cssText+c._createBorderRadiusCss(0,o.borderRadius,o.borderRadius,0))):o.orientation==c.Orientation.Vertical&&(o.progressPosition=e=o.value/o.maxValue*o.height,0==o.displayType||1==o.displayType&&(o.direction==c.Direction.TopToBottom?o.valueElement.style.height=e<=o.borderRadius?"0px":e>=o.height-o.borderRadius?o.middleElement.style.height:e-o.borderRadius+"px":e<=o.borderRadius?o.valueElement.style.height="0px":e>=o.height-o.borderRadius?(o.valueElement.style.top="0px",o.valueElement.style.height=o.middleElement.style.height):(o.valueElement.style.top=o.height-e-o.borderRadius+"px",o.valueElement.style.height=e+2*o.borderRadius+"px")),0<e?(o.animationStyle!=c.AnimationStyle.StaticFull&&o.animationStyle!=c.AnimationStyle.CustomFull?o.markerElement.style.height=e+"px":(o.markerElement.style.height=o.height+"px",o.markerElement.style.cssText=o.markerElement.style.cssText+c._createBorderRadiusCss(o.borderRadius)),o.markerElement.style.visibility="visible"):(o.markerElement.style.height="0px",o.animationStyle!=c.AnimationStyle.StaticFull&&o.animationStyle!=c.AnimationStyle.CustomFull&&(o.markerElement.style.visibility="hidden")),n=o.borderWidth.left,0==e||o.height==e?(o.markerElement.style.left=n+"px",o.markerElement.style.width=o.width+"px",o.markerElement.style.cssText=o.markerElement.style.cssText+c._createBorderRadiusCss(o.borderRadius)):e<o.borderRadius?((r=2.5*e)>o.width&&(r=o.width),o.markerElement.style.left=(i=n+o.width/2-r/2)+"px",o.markerElement.style.width=r+"px",o.markerElement.style.cssText=o.direction==c.Direction.BottomToTop?o.markerElement.style.cssText+c._createBorderRadiusCss(0,0,o.borderRadius,o.borderRadius):o.markerElement.style.cssText+c._createBorderRadiusCss(o.borderRadius,o.borderRadius,0,0)):o.height-e<o.borderRadius?(t=(2*(o.borderRadius-(o.height-e))+(o.borderRadius-Math.sqrt(Math.pow(o.borderRadius,2)-Math.pow(o.borderRadius-(o.height-e),2))))/3,o.markerElement.style.cssText=o.direction==c.Direction.BottomToTop?o.markerElement.style.cssText+c._createBorderRadiusCss(t,t,o.borderRadius,o.borderRadius):o.markerElement.style.cssText+c._createBorderRadiusCss(o.borderRadius,o.borderRadius,t,t)):(o.markerElement.style.left=n+"px",o.markerElement.style.width=o.width+"px",o.markerElement.style.cssText=o.direction==c.Direction.BottomToTop?o.markerElement.style.cssText+c._createBorderRadiusCss(0,0,o.borderRadius,o.borderRadius):o.markerElement.style.cssText+c._createBorderRadiusCss(o.borderRadius,o.borderRadius,0,0)),o.markerElement.style.top=o.animationStyle==c.AnimationStyle.StaticFull||o.animationStyle==c.AnimationStyle.CustomFull||o.direction==c.Direction.TopToBottom?2*-o.height-o.borderWidth.top+"px":-o.height-e-o.borderWidth.top+"px"),o.progress=o.value/o.maxValue),null!=o.onValueChanged&&o.onValueChanged()},c._elementCurrentStyle=function(e,t){if(e.currentStyle){var n=0,r="",i=!1;for(n=0;n<t.length;n++)i="-"==t[n].toString()||(r+=i?t[n].toString().toUpperCase():t[n].toString(),!1);return e.currentStyle[t=r]}return getComputedStyle(e,null).getPropertyValue(t)},c._parseInt=function(e){return e=u()(e),isNaN(e)?0:e},c._createBorderRadiusCss=function(e,t,n,r){return null!=e&&null==t&&null==n&&null==r?"; -moz-border-radius: "+e+"px; -ms-border-radius: "+e+"px; -o-border-radius: "+e+"px; -webkit-border-radius: "+e+"px; -khtml-border-radius: "+e+"px; border-radius: "+e+"px;":"; -moz-border-radius: "+(e=e||0)+"px "+(t=t||0)+"px "+(n=n||0)+"px "+(r=r||0)+"px; -ms-border-radius: "+e+"px "+t+"px "+n+"px "+r+"px; -o-border-radius: "+e+"px "+t+"px "+n+"px "+r+"px; -webkit-border-radius: "+e+"px "+t+"px "+n+"px "+r+"px; -khtml-border-radius: "+e+"px "+t+"px "+n+"px "+r+"px; border-radius: "+e+"px "+t+"px "+n+"px "+r+"px;"};var l,d=c,h=(t=s.I.DWT,s.I.navInfo),g=s.D.each;function f(e,t,n){var a={host:e,port:t,ssl:n,ws:null};return new(o())((function(e,t){if(s.D.product.bHTML5Edition)try{a.ws=s.D.getWS(a.host,a.port,a.ssl),s.D.log(["connecting ... [host ssl port:",a.host,a.ssl,a.port,"]"].join(" ")),a.ws.onopen=function(){1==a.ws.readyState?e(a):0==a.ws.readyState&&i()(a.ws.onopen,100)},a.ws.onclose=a.ws.onerror=function(){s.I.Lib.each(s.I.DWT.globalWS,(function(e,t){if(e==a.ws)return r()(e=s.I.DWT.globalWS).call(e,t,1),!1})),a.ws.onopen=null,a.ws.onclose=null,a.ws.onerror=null,a.ws=null,t("WebSocket closed.")}}catch(n){s.D.log(n),a.ws&&(s.I.Lib.each(s.I.DWT.globalWS,(function(e,t){if(e==a.ws)return r()(e=s.I.DWT.globalWS).call(e,t,1),!1})),a.ws.onopen=null,a.ws.onclose=null,a.ws.onerror=null,a.ws=null),t(n.message)}else t("This browser is currently not supported. Please try Chrome or Firefox!")}))}s.D.ProgressBar=d,s.D.env.WSVersion="12.0.0",s.D.env.WSSession=(new Date).getTime(),s.D.getHttpUrl=function(e){return(e.ssl?["https://",e.host,":",e.port,"/"]:["http://",e.host,":",e.port,"/"]).join("")},s.D.getWSUrl=function(e,t,n){return(n?["wss://",e,":",t]:["ws://",e,":",t]).join("")},s.D.getWS_bywsurl=function(e){var t=s.D.product.wsProtocol,n=window.MozWebSocket;if(this.detect.OnCreatWS&&this.detect.OnCreatWS(e,t),void 0!==n)i=t?new n(e,t):new n(e);else{var r=window.WebSocket,i=t?new r(e,t):new r(e);if(3==i.readyState&&s.I.navInfoSync.bEdge){var o=window,a=parent;try{for(;o!=a&&a.WebSocket;)r=a.WebSocket,o=a.window,a=a.parent;i=t?new r(e,t):new r(e)}catch(c){}}}return s.I.DWT.globalWS.push(i),i},s.D.getWS=function(e,t,n){return e=s.D.getWSUrl(e,t,n),s.D.getWS_bywsurl(e)},s.D._init=function(e){var t,n=s.I.Lib,i=s.I.dcp,o=n.LS.item("DWT_port"),a=n.LS.item("DWT_ssl");if(i.bEnhancedMode)return!0;if(r()(i=n.detect.urls).call(i,0),n.detect.cUrlIndex=0,!e.bLocalService)return!0;o!==l&&a!==l&&(t={port:o,ssl:"true"==a});var u=function(e){return!t||!(!e||e.port==t.port&&e.ssl==t.ssl)};1===n.detect.detectType?(t!==l&&t.ssl&&n.detect.urls.push(t),g(n.detect.ports,(function(e){e.ssl&&u(e)&&n.detect.urls.push(e)}))):0===n.detect.detectType?(t===l||t.ssl||n.detect.urls.push(t),g(n.detect.ports,(function(e){!1===e.ssl&&u(e)&&n.detect.urls.push(e)}))):(t!==l&&n.detect.urls.push(t),g(n.detect.ports,(function(e){u(e)&&n.detect.urls.push(e)})))},s.D._reconnect=function(){var e=s.I.DWT.ContainerMap;e&&s.D.each(e,(function(e,t){s.D._reconnectDWT(e)}))},s.D._reconnectDWT=function(e){var t,n,o,a;if(e&&!e.__bConnecting&&!e.bReady){e.__bConnecting=!0,t=e._host,o=e._ssl,n=e._port;try{(a=s.D.getWS(t,n,o)).onopen=function(){1==a.readyState?((e._objWS=a).clientId=e.clientId,e.bReady||e._OnReady(!0),e.__bConnecting=!1,s.D.detect.hideMask(),s.D.detect.bOK=!0):0==a.readyState?i()(a.onopen,100):e.__bConnecting=!1},a.onclose=a.onerror=function(){a.onopen=null,e.__bConnecting=!1,e.bReady?(s.D.closeProgress(e,"Reconnect"),s.D.detect.hideMask()):(e.__wsRetry++,e.__wsRetry<5?i()(s.D._reconnect,500):(s.D.closeProgress(e,"Reconnect"),s.D.Errors.Server_Restarted(e))),s.I.Lib.each(s.I.DWT.globalWS,(function(e,t){if(e==a)return r()(e=s.I.DWT.globalWS).call(e,t,1),!1}))}}catch(d){s.D.log(d),a&&s.I.Lib.each(s.I.DWT.globalWS,(function(e,t){if(e==a)return r()(e=s.I.DWT.globalWS).call(e,t,1),!1})),e.__bConnecting=!1,e.bReady?s.D.detect.hideMask():(e.__wsRetry++,e.__wsRetry<5&&i()(s.D._reconnect,500))}}},s.D._checkAndReconnect=function(e,t){s.I.DWT.CheckConnectToTheService(e,t,(function(){i()(s.D._reconnect,500)}),(function(){i()((function(){s.D._checkAndReconnect(e,t)}),500)}))},s.D.connectToWS=function(e){if(!e.bReady&&!e.__bConnecting){var n;e.__bConnecting=!0;try{n=s.D.getWS(s.D.product.host,e._port,e._ssl),s.D.log(["connecting ... [port:",e._port,"]"].join("")),n.onopen=function(){e.__bConnecting=!1,1==n.readyState?((e._objWS=n).clientId=e.clientId,e.bReady||e._OnReady(!0)):0==n.readyState&&i()(n.onopen,100)},n.onclose=n.onerror=function(){n.onopen=null,e.__bConnecting=!1,e.bReady&&s.D.detect.hideMask(),s.I.Lib.each(s.I.DWT.globalWS,(function(e,t){if(e==n)return r()(e=s.I.DWT.globalWS).call(e,t,1),!1}))}}catch(t){s.D.log(t),n&&s.I.Lib.each(s.I.DWT.globalWS,(function(e,t){if(e==n)return r()(e=s.I.DWT.globalWS).call(e,t,1),!1})),e.__bConnecting=!1,e.bReady&&s.D.detect.hideMask()}}},s.D.startWS=function(){var e=s.D.detect,t=!0;if(s.D.product.bHTML5Edition){if(!((t=!s.D.IsNeedLoadWasm()&&t)&&5<e.tryTimes)){if(e.OnDetectNext&&e.OnDetectNext(),0==e.tryTimes&&0<e.cUrlIndex&&0<e.arySTwains.length&&(e.bNoControlEvent||(e.hideMask(),s.D.isFunction(e.onNoControl)&&(u=(a=e.arySTwains[0])._width,e.onNoControl(a._containerElement,u=u<=0?270:u,o=(o=a._height)<=0?350:o,a)),e.bNoControlEvent=!0)),t&&e.cUrlIndex>=e.urls.length&&(e.cUrlIndex=0,e.tryTimes++),!(0<e.arySTwains.length))return s.D.closeLoadingMsg(),void(e.bOK=!0);var n,o,a,u=(n=e.arySTwains[0])._getWebTwainId();return s.I.DWT.ContainerMap[u]?(n._OnReady(),n.dispose()):0==n._bLocalService&&(n.bReady=!0,n._OnReady()),n.bReady||n._destroy?(r()(o=e.arySTwains).call(o,0,1),void(e.arySTwains.length<=0?e.bOK=!0:i()(s.D.startWS,100))):(e.bNoControlEvent||e.showMask(),n.__bConnecting?void 0:(n.__bConnecting=!0,f(s.D.product.host,(a=e.urls[e.cUrlIndex]).port,a.ssl).then((function(t){n.__bConnecting=!1,n._objWS=t.ws,t.ws.clientId=n.clientId,n._host=t.host,n._port=t.port,n._ssl=t.ssl,s.I.DWT.IfUseWSPool&&s.D._addToWSPool(n),n.bReady||(n.bReady=!0,n._OnReady()),r()(t=e.arySTwains).call(t,0,1),e.arySTwains.length<=0?(e.hideMask(),e.bOK=!0):i()(s.D.startWS,100)}),(function(t){s.D.log(t),n.__bConnecting=!1,n.bReady?e.hideMask():(e.cUrlIndex++,i()(s.D.startWS,100))}))))}s.D.log("Failed more than 5 times.")}else s.D.appendMessage("This browser is currently not supported. Please try Chrome or Firefox!")},s.D.startWSByIP=function(){var e=s.D.detect;if(s.D.product.bHTML5Edition){if(!(0<e.arySTwainsByIP.length))return e.hideMask(),void(e.bOK=!0);var t,n,o=(t=e.arySTwainsByIP[0])._getWebTwainId();return s.I.DWT.ContainerMap[o]?(t._OnReady(),t.dispose()):0==t._bLocalService&&(t.bReady=!0,t._OnReady()),t.bReady||t._destroy?(r()(o=e.arySTwainsByIP).call(o,0,1),void(e.arySTwainsByIP.length<=0?(e.hideMask(),e.bOK=!0):i()(s.D.startWSByIP,100))):(e.bNoControlEvent||e.showMask(),t.__bConnecting?void 0:(0<t.__wsRetry&&(e.bNoControlEvent||(e.hideMask(),s.D.isFunction(e.onNoControl)&&e.onNoControl(t._containerElement,o=(o=t._width)<=0?270:o,n=(n=t._height)<=0?350:n,t),e.bNoControlEvent=!0)),t.__bConnecting=!0,f(t._host,t._port,t._ssl).then((function(n){t.__bConnecting=!1,t._objWS=n.ws,n.ws.clientId=t.clientId,s.I.DWT.IfUseWSPool&&s.D._addToWSPool(t),t.bReady||(t.bReady=!0,t._OnReady()),r()(n=e.arySTwainsByIP).call(n,0,1),e.arySTwainsByIP.length<=0?(e.hideMask(),e.bOK=!0):i()(s.D.startWSByIP,100)}),(function(n){s.D.log(n),t.__bConnecting=!1,t.bReady?e.hideMask():(t.__wsRetry++,i()(s.D.startWSByIP,100))}))))}s.D.appendMessage("This browser is currently not supported. Please try Chrome or Firefox!")},s.D.html5.closeAll=function(){var e,t,n,i,o,a,u,c,l;for(s.D.dlgProgress=!1,s.D.detect.bOK=!1,s.D.detect.bFirst=!0,e=s.D.detect.arySTwains.length-1;0<=e;e--)if(n=s.D.detect.arySTwains[e]){for(a=n._id,n._containerElement&&(o=n._containerElement,i=n._containerElement.id),c=!1,t=0;t<s.I.DWT.Containers.length;t++)if((u=s.I.DWT.Containers[t])&&(a==u.WebTwainId||i&&i==u.ContainerId||o==u.Container)){c=!0;break}c&&(n.__unload(),r()(l=s.D.detect.arySTwains).call(l,e,1)),n._isMobileMode()}},s.D.bio=!1,s.D.progressMessage="",s.D.dialogShowStatus=!1,s.D.needShowTwiceShowDialog=!1,s.D.dlgProgress=!1,s.D.cancelFrome=0,s.D.dlgRef=0,s.D.initProgress=function(e){var t,n;s.D.dlgProgress||((n=[]).push('<dialog class="dynamsoft-dwt-dialogProgress" closed="closed" style="top:30%"><div class="ds-dwt-progressWrap">'),n.push('<h3 class="dynamsoft-finalMessage"> </h3>'),n.push('<p class="dynamsoft-desc"> </p><p class="dynamsoft-status">0%</p>'),n.push(h.bIE?'<div class="dynamsoft-progressBar" value="" max="100"></div>':'<progress class="dynamsoft-progressBar" value="" max="100"></progress>'),n.push('<br /><div style="width:100%;text-align:center"><button class="dynamsoft-btnCancel" value="cancel" autofcus>cancel</button></div>'),n.push("</div></dialog>"),(t=s.D.one(".dynamsoft-dwt-dialogProgress"))&&t.getEL()&&t.remove(),(n=s.D.parseHTML(n.join("")))&&0<n.length&&document.body.appendChild(n[0]),h.bIE&&(n=(n=s.D.one(".dynamsoft-progressBar"))&&n.getEL())&&(n.objProgressBar=new d(n,{width:280,height:20})),(t=s.D.one(".dynamsoft-dwt-dialogProgress"))&&t.getEL()&&(s.D.dlgProgress=t[0],s.D.dialog.setup(s.D.dlgProgress)),s.D.dlgRef=0,s.D.dialogShowStatus=!1,s.D.cancelFrome=0)},s.D.setBtnCancelVisibleForProgress=function(e){var t;s.D.dlgRef<=0||0==s.D.dialogShowStatus||(t=(t=s.D.one(".dynamsoft-btnCancel"))&&t.getEL())&&(t.style.display=e?"":"none")},s.D.showProgressMsg=function(e,t,n){var r,o,a,u,c;s.D.dlgRef<=0||0==s.D.dialogShowStatus||(r=s.D.one(".dynamsoft-progressBar"),o=s.D.one(".dynamsoft-status"),a=s.D.one(".dynamsoft-finalMessage"),u=s.D.one(".dynamsoft-desc"),(c=e)<0?c=0:100<e&&(c=100),c=Math.floor(c),a&&a.getEL()&&a.html(t),u&&u.getEL()&&u.html(n),!c&&0!==c||(o&&o.getEL()&&o.html(c+"%"),r&&r.getEL()&&(h.bIE?r[0].objProgressBar?r[0].objProgressBar.setValue(c):r[0].value=c:(h.bEdge&&(r[0].style.display=""),r[0].value=c))),c&&(100<=c||s.D.dlgRef<=0)&&(i()((function(){r&&r.getEL()&&(h.bIE?r[0].objProgressBar?r[0].objProgressBar.setValue(0):r[0].value=0:(h.bEdge&&(r[0].style.display="none"),r[0].value=0))}),300),s.D.dlgRef<=0&&s.D.closeProgress(null,"OnPercentDone")))},s.D.showProgress=function(e,t,n){var r,i=s.I.DWT.IfConfineMaskWithinTheViewer?e._containerElement||(0<s.I.DWT.Containers.length&&s.I.DWT.Containers[0].ContainerId?s.I.Lib.get(s.I.DWT.Containers[0].ContainerId):document.body):document.body;!i||i===document.body||""!==(i=(r=i.firstChild)&&r!==s.D.dlgProgress?r:i).style.position&&"static"!==i.style.position||(i.style.position="relative",e.progressContainer={el:i}),i.appendChild(s.D.dlgProgress),s.D.log("showProgress:"+t+",bCancel:"+n),(0==s.D.cancelFrome&&1==e.__IfShowProgressBar||0!=s.D.cancelFrome&&1==e.__IfShowCancelDialogWhenImageTransfer)&&((i=(r=s.D.one(".dynamsoft-btnCancel"))&&r.getEL())&&(i.style.display=0==n?"none":""),0==s.D.dialogShowStatus&&(s.D.dlgProgress&&(s.D.dialog.setup(s.D.dlgProgress,!0),s.D.dlgProgress.showModal()),s.D.dialogShowStatus=!0,t=s.D.one(".dynamsoft-finalMessage"),r=(e=s.D.one(".dynamsoft-progressBar"))&&e.getEL(),i=s.D.one(".dynamsoft-status"),t&&t.getEL()&&t.html(""),i&&i.getEL()&&i.html("0%"),r&&(h.bIE&&r.objProgressBar?r.objProgressBar.setValue(0):r.value=0)),s.D.dlgRef++)},s.D.closeProgress=function(e,t){s.D.log("closeProgress:"+t),t=s.D.one(".dynamsoft-btnCancel"),s.D.dlgRef--,s.D.dlgRef<=0&&(s.D.dlgRef=0),1==s.D.needShowTwiceShowDialog&&1==s.D.cancelFrome?t&&t.getEL()&&(t[0].innerHTML="Cancel"):(t&&t.getEL()&&(t[0].innerHTML="Cancel"),0==s.D.dlgRef&&(1==s.D.dialogShowStatus&&(s.D.dlgProgress&&(s.D.dlgProgress.close(),document.body.appendChild(s.D.dlgProgress),e&&e.progressContainer&&e.progressContainer.el&&(e.progressContainer.el.style.position="",e.progressContainer=null)),s.D.dialogShowStatus=!1),s.D.needShowTwiceShowDialog=!1,s.D.cancelFrome=0))},s.D.html5.CreateDWTObject=function(e){for(var t,n=0;n<s.D.detect.arySTwains.length;n++)if(s.D.detect.arySTwains[n]._id==e.id)return!1;return t=new s.D.html5.STwain(e),e.customIP?s.D.detect.arySTwainsByIP.push(t):(s.D.detect.arySTwains.push(t),s.D.detect.bFirst&&s.D._init(e),s.D.detect.bFirst=!1),t},t.RemoveAllAuthorizations=function(){var e=s.D.LS.item("DWT_port"),t="http://";return t=[t="true"==s.D.LS.item("DWT_ssl")?"https://":t,s.D.product.host,":",e,"/dwt/",s.D.product.getDWTPrefix(),s.D.product.getServerVersionInfo(),"/RemoveAllAuthorizations?t=",s.D.now()].join(""),s.D.ajax({method:"GET",xhrFields:{withCredentials:!0},url:t,async:!0}),!0},s.D._reconnectWSPool=function(){s.D.each(s.D.detect.aryWSPool,(function(e){!e||e.bOK||e.__bConnecting||s.D._reconnectWSElement(e)}))},s.D._reconnectWSElement=function(e){var t,n;if(e&&!e.bOK&&!e.__bConnecting){t=e.wsurl,e.__bConnecting=!0,e.__wsRetry=0;var a=function(){n&&(s.I.Lib.each(s.I.DWT.globalWS,(function(e,t){if(e==n)return r()(e=s.I.DWT.globalWS).call(e,t,1),!1})),n.onopen=null),e.__wsRetry++,e.__wsRetry<5?i()(s.D._reconnectWSPool,500):(e.__bConnecting=!1,s.D.closeProgress(_stwain,"Reconnect"),s.D.each(e.list,(function(e,t){s.D.Errors.Server_Restarted(e)})))};try{(n=s.D.getWS_bywsurl(t)).onopen=function(){1==n.readyState?(n.onopen=null,s.D.each(e.list,(function(e,t){(e._objWS=n).clientId=e.clientId,e.bReady||e._OnReady(!0)})),e.__bConnecting=!1,e.bOK=!0,s.D.detect.hideMask()):0==n.readyState?i()(n.onopen,300):e.__bConnecting=!1},n.onclose=a}catch(o){s.D.log(o),n&&s.I.Lib.each(s.I.DWT.globalWS,(function(e,t){if(e==n)return r()(e=s.I.DWT.globalWS).call(e,t,1),!1})),i()(a,500)}}},s.D._deliverMsg=function(e,t){var n=t.id,r=[];0<=a()(t).call(t,'"method" : "EnableBuffer"')||0<=a()(t).call(t,'"method" : "GetBuffer"')?s.I.DWT.lwsproc(t):(s.D.each(s.D.detect.aryWSPool,(function(t,n){if(t.wsurl==e)return r=t.list,!1})),s.D.each(r,(function(e,r){if(e.clientId==n)return e._OnRecieveMsg&&e._OnRecieveMsg(t),!1})))},s.D._addToWSPool=function(e){var t,n=e._objWS.url;s.D.each(s.D.detect.aryWSPool,(function(e,r){if(e.wsurl==n)return t=e,!1})),t&&s.D.isArray(t.list)?t.list.push(e):s.D.detect.aryWSPool.push({wsurl:n,list:[e]})},s.D._removeFromWSPool=function(e){var t,n,i;e&&e._objWS&&(n=e._objWS.url),s.D.each(s.D.detect.aryWSPool,(function(e,r){if(e.wsurl==n)return t=e,!1})),t&&s.D.isArray(t.list)&&(-1<(i=a()(i=t.list).call(i,e))&&r()(e=t.list).call(e,i,1),0==t.list.length&&(t.ws.close(),t.wsurl="",delete t.ws,-1<(i=a()(e=s.D.detect.aryWSPool).call(e,t))&&r()(e=s.D.detect.aryWSPool).call(e,i,1)))}},3839:function(e,t,n){n.r(t),t=n(7711);var r=n.n(t),i=(t=n(3662),n.n(t)),o=(t=n(4579),n.n(t)),a=(t=n(5683),n.n(t)),s=n(1695),u=s.I.navInfo,c=(t=s.D.html5).Funs,d={upload:"Uploading...",download:"Downloading...",load:"Processing...",decode:"Processing...",decodeTIFF:"Processing tiff...",decodePDF:"Processing pdf...",encodeTIFF:"Processing tiff...",encodePDF:"Processing pdf...",encode:"Processing..."},h=function(e,t){var n;s.D.config.bDiscardBlankImage&&(n=e._ImgManager.getCurrentImageIndex(),e.IsBlankImage(n)&&e.RemoveImage(n),n=["Blank Discard (",t,"): ",e.ErrorString].join(""),s.D.isFunction(e.__OnPrintMsg)&&e.__OnPrintMsg(n))};(t=(n=t.STwain).prototype).RegisterEvent=function(e,t){return this._resetErr(),!!this._isValid()&&(this[["__",e].join("")]=t,!0)},t.onEvent=function(e,t){this.RegisterEvent(e,t)},t.on=function(e,t){this.RegisterEvent(e,t)},t.OnRefreshUI=function(e,t,n,r){var i=this;return n&&i._ImgManager.refresh(e,i._ImgManager.count(),!0,r),s.I.Lib.isFunction(i.__OnRefreshUI)&&i.__OnRefreshUI(i._ImgManager.getCurrentImageIndex(),i._ImgManager.count()),!0},t._OnRemoteScanStatusAsync=function(e){var t,n,r,i=this;if(e&&2<=e.length){try{var o=new String(e[1]),a=s.D.parse(o)}catch(l){s.D.log(l.message),s.D.log("parse json failed: "+e[1])}a=a||{sequence:0,screen:[]}}return a&&a.sequence&&(0<a.sequence&&a.screen&&0<a.screen.length?(n=a.sequence,r=a.wnds,o=(e=(o=a.screen)[0]).img,s.D.isString(o)&&""!=o&&(t=e.wnd),n&&t&&(e=s.D.one(".ds-img-screen"))&&i._acquireDivEL&&(i._acquireDivEL.evtFun&&(s.D.removeEventListener(e[0],"mouseup",i._acquireDivEL.evtFun),i._acquireDivEL.evtFun=null),e[0].src=o,i._acquireDivEL.evtFun=function(e){e=s.D.stringify({sequence:n,wnds:r=r||"0",wnd:t+"",type:2,x:e.offsetX,y:e.offsetY}),i._innerSendCmd("SendEventToScannerUI",["[",e,"]"].join(""))},s.D.addEventListener(e[0],"mouseup",i._acquireDivEL.evtFun))):i.__closeRemoteScanUI(!1)),s.D.isFunction(i.__OnRemoteScanStatusAsync)&&i.__OnRemoteScanStatusAsync(a),!0},t._OnConsumed=function(e){},t._OnBitmapChanged=function(e,t,n){var o,a=this,u="10"==e[0],c="c2"==e[0],l="0"==e[0]||c||u,d=e[1].split(","),h=e[2],g=e[3],f=a.__maxImagesInBuffer,m=n,p=(n=-1,[]);if(m||""==(m=a.GetCurrentDocumentName())&&(m=a._ImgManager.getWebViewer().GetDefaultFileName()),u?5<e.length&&(p.push(o=e[5]),!a._blts||1!=h&&2!=h||s.I.Lib.isUndef(o.verify)||(n=s.I.DWT.lgct(o.verify),s.D.isFunction(a.__OnLtsverify)&&a.__OnLtsverify(n,1,s.I.DWT.EnumInstance.dwt_browser),s.I.DWT.lavrf(n,1,s.I.DWT.EnumInstance.dwt_browser))):c?(5<e.length&&(p=e[5]),s.D.isArray(p)||(p=[])):(o={},5<e.length&&(o.width=e[5]),6<e.length&&(o.height=e[6]),7<e.length&&(o.bitDepth=e[7]),8<e.length&&(o.resolutionX=e[8]),9<e.length&&(o.resolutionY=e[9]),10<e.length&&(n=e[10]),p.push(o),-1<n&&a._blts&&(1==h||2==h)&&(c=s.I.DWT.lgct(n),s.D.isFunction(a.__OnLtsverify)&&a.__OnLtsverify(c,1))),s.D.log("OnBitmapChanged:"+e),2==h||1==h&&!a.__IfAppendImage?(s.D.each(d,(function(e,t){var n=r()(e);if(e=a._ImgManager.getCurrentImageIndex(),(t=t<p.length&&p[t]?p[t]:{}).currentFileName=m,isNaN(n)||n<0)return!0;if(l)a._aryBitmapCache.push(n);else for(var o,s=0;s<a._aryBitmapCache.length;s++)if(a._aryBitmapCache[s]==n)return i()(o=a._aryBitmapCache).call(o,s,1),!0;if(a._ImgManager.exists(n))return!0;-1<a.__insertingIndex&&(e=a.__insertingIndex),a._ImgManager.insertBefore(e=-1==e?0:e,f,n,t),-1<a.__insertingIndex&&(a.__insertingIndex=a.__insertingIndex+1)})),s.D.isFunction(a.__OnRefreshUI)&&a.__OnRefreshUI(a._ImgManager.getCurrentImageIndex(),a._ImgManager.count())):1==h&&a.__IfAppendImage?(s.D.each(d,(function(e,t){var n=r()(e);if(isNaN(n)||n<0)return!0;if((e=t<p.length&&p[t]?p[t]:{}).currentFileName=m,l)a._aryBitmapCache.push(n);else for(var o,s=0;s<a._aryBitmapCache.length;s++)if(a._aryBitmapCache[s]==n)return i()(o=a._aryBitmapCache).call(o,s,1),!0;if(a._ImgManager.exists(n))return!0;a._ImgManager.append(f,n,e)})),s.D.isFunction(a.__OnRefreshUI)&&a.__OnRefreshUI(a._ImgManager.getCurrentImageIndex(),a._ImgManager.count())):3==h&&l?(o=!1,(o=1==d.length&&-1==d[0]||o)?a._ImgManager.clear():s.D.each(d,(function(e,t){if(e=r()(e),isNaN(e)||e<0)return!0;a._ImgManager.removeByServerId(m,e)})),s.D.isFunction(a.__OnRefreshUI)&&a.__OnRefreshUI(a._ImgManager.getCurrentImageIndex(),a._ImgManager.count())):4==h?s.D.each(d,(function(e,t){if(e=r()(e),isNaN(e)||e<0)return!0;(t=t<p.length&&p[t]?p[t]:{}).currentFileName=m,0<=e&&!a.__bLoadingImage&&(a._isBindViewer()&&(0==a._ImgManager.bImageJustChangedInEditor?a._ImgManager.bImageChangedInViewer=!0:(a._ImgManager.bImageJustChangedInEditor=!1,a._ImgManager.bImageChangedInViewer=!1)),-1<(e=a._ImgManager.convertServerIdToClientIndex(e))&&a.OnRefreshUI(e,a._ImgManager.count(),!0,t))})):5==h&&0<=g&&!a.__bLoadingImage&&((n=0<p.length&&p[0]?p[0]:{}).currentFileName=m,0==a.__IfAppendImage&&a.OnRefreshUI(g,a._ImgManager.count(),!0,n),a._ImgManager.refresh(g,a._ImgManager.count(),!1,n)),s.D.isFunction(a.__OnBitmapChanged)){if(!u){if(s.I.navInfo.bFirefox&&!l)return!0;if(!s.I.navInfo.bFirefox&&l)return!0}var _=[];s.D.each(d,(function(e){if(e=r()(e),isNaN(e)||e<0)return!0;-1<(e=a._ImgManager.convertServerIdToClientIndex(e))&&_.push(e)})),c=a._ImgManager.getCurrentImageIndex(),e=h,1==h&&(e=a.__IfAppendImage?1:2),a.__OnBitmapChanged(_,e,c,a._ImgManager.count())}},t._OnPostLoad=function(e,t){var n,r,i=this;void 0!==t&&void 0!==t.exception&&void 0!==t.description&&(i._errorCode=t.exception,i._errorString=t.description),s.D.log("OnPostLoad Results:"),t=e[1].split(","),e=s.D.base64.decode(t[0]),n=s.D.base64.decode(t[1]),s.D.log(e),s.D.log(n),s.D.log(t[2]),h(i,"On PostLoad"),0<=(r=i._ImgManager.getCurrentImageIndex())&&i.OnRefreshUI(r),s.D.isFunction(i.__OnPostLoad)&&i.__OnPostLoad(e,n,t[2])},t._OnPostTransfer=function(e){s.D.log("On PostTransfer Results:"+e),h(this,"On PostTransfer"),s.D.isFunction(this.__OnPostTransfer)&&this.__OnPostTransfer()},t._OnPostTransferAsync=function(e){if(s.D.log("On PostTransfer Async Results:"+e),s.D.isFunction(this.__OnPostTransferAsync)){if(e&&2<=e.length)try{var t,n=String(e[1]).replace(/\\/g,"\\\\");(t=s.D.parse(n)).imageId&&(t.imageId=this.objImageIndexManager.convertServerIdToGuid(t.imageId))}catch(g){s.D.log(e)}this.__OnPostTransferAsync(t=t||{imageId:-1})}},t._OnPreAllTransfersAsync=function(e){var t=this;if(s.D.isFunction(t.__OnPreAllTransfersAsync)){var n={event:"beforeAcquire",result:{}};try{s.D.isArray(e)&&1<e.length&&(n=s.D.parse(e[1]))}catch(g){}o()((function(){t.__OnPreAllTransfersAsync(n)}),10)}},t._OnPostAllTransfers=function(e){var t=this;2<=e.length&&0==t._errorCode&&(t._errorCode=e[1],t._errorString=e[2]),s.D.log("On PostAllTransfers Results:"+e),t.__bLoadingImage=!1,t.__bAcquireImageNow=!1,t.__closeRemoteScanUI(!0),s.D.isFunction(t.__OnPostAllTransfers)&&t.__OnPostAllTransfers(),s.D.License.isLTS()&&s.I.DWT.lcvrf(t)},t._OnResult=function(e){e=e[1],s.D.isFunction(this.__OnResult)&&this.__OnResult(e)},t._OnTransferCancelled=function(e){var t=this;t._ImgManager.getCurrentImageIndex(),t._ImgManager.count(),t.__bLoadingImage=!1,t.__bAcquireImageNow=!1,s.D.isFunction(t.__OnTransferCancelled)&&t.__OnTransferCancelled()},t._OnTransferError=function(e){s.D.isFunction(this.__OnTransferError)&&this.__OnTransferError()},t._OnSourceUIClose=function(e){this.__closeRemoteScanUI(!0),s.D.isFunction(this.__OnSourceUIClose)&&this.__OnSourceUIClose()},t._OnPreTransfer=function(e){s.D.isFunction(this.__OnPreTransfer)&&this.__OnPreTransfer()},t._OnPreAllTransfers=function(e){s.D.isFunction(this.__OnPreAllTransfers)&&this.__OnPreAllTransfers()},t._OnPercentDone=function(e){var t,n,r,i,l,h,g,f,m,p=this,_=!1,v=s.I.Lib,I=!1,y=0;v.isArray(e)&&2<e.length&&(i=e[0],n=e[2],3<e.length&&(g=e[3]),4<e.length&&(l=e[4]),(t=y=e[1])<0?t=0:100<y&&(t=100),t=Math.floor(t),1!=v.cancelFrome&&2!=v.cancelFrome&&5!=v.cancelFrome||(I=l)),!p._bServerPercentDone&&0!=i||((0<y||0==y)&&(1!=v.cancelFrome&&2!=v.cancelFrome||"http"==g&&(_=!0),3!=v.cancelFrome&&4!=v.cancelFrome||"ftp"==l&&(_=!0)),(0==v.cancelFrome&&1==p.__IfShowProgressBar||0!=v.cancelFrome&&1==p.__IfShowCancelDialogWhenImageTransfer)&&(r=v.one(".dynamsoft-progressBar"),e=v.one(".dynamsoft-status"),i=v.one(".dynamsoft-finalMessage"),l=v.one(".dynamsoft-desc"),3!=v.cancelFrome&&4!=v.cancelFrome||(0==(g=g)?c.setBtnCancelVisibleForProgress(p,!1):1==g&&c.setBtnCancelVisibleForProgress(p,!0)),h=y<0?(v.progressMessage=n,v.progressMessage):""!=n&&"1/1"!=n?v.progressMessage+"("+n+")":v.progressMessage,i&&i.getEL()&&(m=f="",a()(h).call(h," ...")&&(h=h.replace(" ...","...")),-1!=a()(h).call(h,"(")?(f=h.substr(0,a()(h).call(h,"(")),m=h.substr(a()(h).call(h,"("))):f=h,v.each(d,(function(e,t){-1!=a()(e).call(e,f)&&(h=s.I.DWT.CustomizableDisplayInfo.customProgressText[t]+m)})),""==h&&(h="&nbsp;"),i.html(h)),0!=I?(""==I||v.isUndef(I)?I="&nbsp;":v.isString(I)&&30<I.length&&(I=I.substring(0,30)+"..."),l.html(I)):l.html("&nbsp;"),!t&&0!==t||(e&&e.getEL()&&e.html(t+"%"),r&&r.getEL()&&(u.bIE?r[0].objProgressBar?r[0].objProgressBar.setValue(t):r[0].value=t:(u.bEdge&&(r[0].style.display=""),r[0].value=t))),t&&(100<=t||v.dlgRef<=0)&&(o()((function(){r&&r.getEL()&&(u.bIE?r[0].objProgressBar?r[0].objProgressBar.setValue(0):r[0].value=0:(u.bEdge&&(r[0].style.display="none"),r[0].value=0))}),1e3),v.dlgRef<=0&&v.closeProgress(p,"OnPercentDone"))),1==_&&(v.isFunction(p.__OnInternetTransferPercentage)&&p.__OnInternetTransferPercentage(t,!1),v.isFunction(p.__OnInternetTransferPercentageEx)&&p.__OnInternetTransferPercentageEx(t,!1)),v.isFunction(p.__OnPercentDone)&&p.__OnPercentDone())},t._OnGetFilePath=function(e){var t,n=e[1].split(",");s.D.log("On GetFilePath Results:"+e),e=s.D.base64.decode(n[3]),t=s.D.base64.decode(n[4]),"-1032"==n[2]&&(n[2]="-1",e=t=""),s.D.isFunction(this.__OnGetFilePath)&&this.__OnGetFilePath(+n[0],+n[1],+n[2],e,t),this.__bOpenFileNow=!1},t.checkErrorString=function(){var e=this.ErrorCode;return-2115===e||(-2003!==e||s.I.DWT.IfHttpPostErrorNoWindow||window.open("","ErrorMessage","height=500,width=750,top=0,left=0,toolbar=no,menubar=no,scrollbars=no, resizable=no,location=no, status=no").document.writeln(this.__HTTPPostResponseString),0===e)},t.__GetLoadEventsNum=function(){var e=0;return s.D.isFunction(this.__OnPostLoad)&&(e|=1),s.D.isFunction(this.__OnGetFilePath)&&(e|=2),e},t._OnPageFocus=function(e){var t,n=this;if(n.bPageFocus=!0,!n._isMobileMode()&&!n.bReady)return s.I.Lib.connectToWS(n);u.bWin&&!n._isMobileMode()&&s.I.DWT.IfAlwaysFocusOnPopupWindow&&(t=s.D.stringify({sequence:0,wnds:0,wnd:"0",type:3,x:0,y:0}),(n.__bAcquireImageNow||e||n.__bOpenFileNow)&&(n.bServerAlwaysFocusOnPopupWindow=!0,n._innerSendCmd("SendEventToScannerUI",["[",t,"]"].join(""))))},t._OnPageBlur=function(e){var t=this;if(u.bWin&&!t._isMobileMode()){if(!t.bReady)return s.I.Lib.connectToWS(t);var n=s.D.stringify({sequence:0,wnds:0,wnd:"0",type:4,x:0,y:0});0==t.bPageFocus&&!e||(t.bPageFocus=!1,(t.__bAcquireImageNow||e||t.__bOpenFileNow)&&(t.bServerAlwaysFocusOnPopupWindow=!1,t._innerSendCmd("SendEventToScannerUI",["[",n,"]"].join(""))))}}},7367:function(e,t,n){n.r(t),t=n(5683);var r=n.n(t),i=(t=n(7711),n.n(t)),o=(t=n(4579),n.n(t)),a=(t=n(5238),n.n(t)),s=(t=n(677),n.n(t)),u=(t=n(4341),n.n(t)),c=n(1695),l=n(1188);c.D.html5=c.D.html5||{};var d=c.D.html5.Funs={notSupportProperty:function(e){},notSupportMethod:function(e){},cformat:function(e,t){if(c.D.isString(e)){var n,i,o,a=r()(e).call(e,"<%");if(-1==a)return e;if(n=e.substring(0,a),!(a+2<(i=r()(e).call(e,">",n))))return e;a=e.substring(a+1,i),i=e.substring(i+1);try{o=c.D.sprintf(a,t)}catch(_){o=""}return[n,o,i].join("")}return""},sendData:function(e,t,n,r){var o,a,s,u,l;if(!r){try{e.send(t)}catch(d){c.D.log(d)}return!1}for(r=new ArrayBuffer(12),a=n&&n.size?n.size:0,s=(o=(t=new Blob([t])).size)+a,u=new DataView(r),l=0;l<8&&s;l++)u.setUint8(l,s%256),s=i()(s/256);for(l=0;l<4&&o;l++)u.setUint8(8+l,o%256),o=i()(o/256);return r=new Blob([r,t]),e.send(r),0<a&&e.send(n),!(u=null)},getJson:function(e,t,n,r){var i=[];return i.push("{"),i.push('"id":"'),i.push(e.clientId),i.push('"'),r&&(i.push(',"cmdId":"'),i.push(r),i.push('"')),i.push(',"method":"'),i.push(t),i.push('"'),i.push(',"module":"dwt","version":"'),e=[c.D.product.getDWTPrefix(),c.D.product.getServerVersionInfo()].join(""),i.push(e),i.push('"'),null!=n&&(i.push(',"parameter":'),i.push(n)),i.push("}"),i.join("")},refreshImageAfterInvokeFun:function(e,t,n){return 1==n},loadHttpBlob:function(e,t,n,r,i,a,s,u){var l,d,h=!1,g={method:t,dataType:"blob"};if(u&&(g.headers=u),""!=e.HTTPUserName&&(g.username=e.HTTPUserName,g.password=e.HTTPPassword),r){if((c.I.Lib.env.bMobile||c.I.navInfo.bChrome||c.I.navInfo.bFirefox)&&"get"==t)return g.fetchRaw=!0,fetch(n,g).then((function(e){if(!e.ok)throw{httpCode:e.status,errorString:e.statusText};var t=e.headers.get("Content-Length"),n=0,r=e.body.getReader(),i=new ReadableStream({start:function(e){o()((function i(){r.read().then((function(r){r.done?e.close():(s({loaded:n+=r.value.length,total:t}),e.enqueue(r.value),o()(i,0))}))}),0)}});return(e=e.headers.get("Content-Type"))&&""!=e||(e="application/octet-stream"),new Response(i,{headers:{"Content-Type":e}})})).then((function(e){return e.blob()})).then((function(e){i(e)}),(function(t){t&&t.httpCode?c.D.Errors.HttpDownloadError(e,!1,t.errorString,t.httpCode):c.D.Errors.HttpDownloadUrlError(e),c.D.isFunction(a)&&a({code:e._errorCode,message:e._errorString})})),!0;g.onSuccess=i,c.D.isFunction(s)&&(g.beforeSend=function(e){e.addEventListener("progress",(function(e){delete e.totalSize,delete e.position,s(e)}),!1)}),h=!0}else c.I.navInfoSync.bIE?(g.dataType="arraybuffer",g.onSuccess=function(t,n,r){var o;(t=t||r.responseData)&&(o=new Uint8Array(t)),e._errorCode=0,e._errorString="",i(o),h=!(o=null)}):(g.dataType="text",g.contentType="text/plain; charset=x-user-defined",g.mimeType="text/plain; charset=x-user-defined",g.onSuccess=function(t,n,r){for(var o=r.responseText,a=o.length,s=new Uint8Array(a),u=0;u<a;u++)s[u]=o.charCodeAt(u);e._errorCode=0,e._errorString="",i(s),h=!(s=null)}),g.headers?c.D.mix(g.headers,{"X-Requested-With":!1}):g.headers={"X-Requested-With":!1};if("post"==t&&(u=e.httpFormFields))try{d=new FormData,c.D.each(u,(function(e,t){e instanceof Blob?d.append(t,e,e.name):d.append(t,e)})),c.D.mix(g,{data:d,processData:!1,contentType:!1})}catch(T){}return l=function(t,n,r){var i;2==(t=t&&c.D.isArray(t)&&2<t.length?(i=t[1],t[2]):(i=n,r)).state&&0==t.status?"abort"===t.statusText?c.D.Errors.HttpDownloadError(e,!0):c.D.Errors.HttpDownloadUrlError(e):c.D.Errors.HttpDownloadError(e,!1,i,t.status),c.D.isFunction(a)&&a()},g.url=n,g.async=r,g.onError=l,g.onComplete=function(){c.D.bio=!1},t=c.D.ajax(g),r&&(c.D.bio=t),h},combineUrl:function(e,t,n){var i=[],o=t;return void 0!==o&&void 0!==n&&(c.D.isString(o)||(o=String(t)),0==r()(o).call(o,"http://")?(o=o.replace("http://",""),i.push("http://")):0==r()(o).call(o,"https://")?(o=o.replace("https://",""),i.push("https://")):(0==r()(o).call(o,"//")&&(o=o.replace("//","")),i.push(e.IfSSL?"https://":"http://")),i.push(o),r()(o).call(o,":")<0&&(""==e.HTTPPort&&(e.HTTPPort=c.D.detect.ssl?443:80),(!c.D.detect.ssl&&80!=e.HTTPPort||c.D.detect.ssl&&443!=e.HTTPPort)&&(i.push(":"),i.push(e.HTTPPort))),0!==r()(n).call(n,"/")&&i.push("/"),i.push(n),i.join(""))},httpPostUpload:function(e,t,n,r,i,o,s,u,l,d,h,g){if(!n||n.size<=0)return c.D.Errors.UploadFileCannotEmpty(e),c.D.isFunction(g)&&g(),!1;var f,m=e.MaxUploadImageSize,p=n.size,_=n.type;return m<p&&-1!=m?(c.D.Errors.UploadExceededMaxSize(e),c.D.isFunction(g)&&g(),!1):(""===_||_&&_!=e.HttpContentTypeFieldValue?(m=a()(n)||n.webkitSlice||n.mozSlice,c.D.isString(_=n.name)&&""!=_||(_=n.fileName),(f=m.call(n,0,p,e.HttpContentTypeFieldValue)).name=_):f=n,n=null,f.remoteFilename=e.__remoteFilename,p=this.httpUploadByBIO(e,t,f,i,r,o,s,u,l,d,h,g),f=null,p)},httpPostUploadFiles:function(e,t,n,r,i,o,s,u,l,d,h){var g,f=e.MaxUploadImageSize,m=0;if(!n||!c.D.isArray(n)||n.length<=0)return c.D.Errors.UploadFileCannotEmpty(e),c.D.isFunction(h)&&h(),!1;for(g=0;g<n.length;g++){var p=n[g];if(!p||p.size<=0)return c.D.Errors.UploadFileCannotEmpty(e),c.D.isFunction(h)&&h(),!1;var _,v=p.size,I=p.type;m+=v,(""===I||I&&I!=e.HttpContentTypeFieldValue)&&(I=a()(p)||p.webkitSlice||p.mozSlice,_=p.name,v=I.call(p,0,v,e.HttpContentTypeFieldValue),c.D.isString(_)&&""!=_||(_=p.fileName),v.name=this.cformat(_,g+1),n[g]=v),n[g].remoteFilename=this.cformat(e.__remoteFilename,g+1),p=null}if(f<m&&-1!=f)return c.D.Errors.UploadExceededMaxSize(e),c.D.isFunction(h)&&h(),!1;for(ret=this.httpUploadByBIO(e,t,n,i,r,o,s,u,l,!1,d,h),g=0;g<n.length;g++)n[g]=null;return n=null,ret},httpPostUploadString:function(e,t,n,r,i,o,a,s,u,l,d){if(""==n)return c.D.Errors.UploadFileCannotEmpty(e),c.D.isFunction(d)&&d(),!1;if((h=e.MaxUploadImageSize)<n.length&&-1!=h)return c.D.Errors.UploadExceededMaxSize(e),c.D.isFunction(d)&&d(),!1;(h=new Blob([n],{type:"text/plain"})).name=r,n=this.httpUploadByBIO(e,t,h,i,!0,o,a,s,u,!1,l,d);var h=null;return n},httpUploadByBIO:function(e,t,n,r,i,o,a,s,u,l,d,h){var g=e.httpFormFields,f=new FormData;return c.D.each(g,(function(e,t){e instanceof Blob?f.append(t,e,e.name):f.append(t,e)})),c.D.bio=new c.D.BIO({action:t,data:f,async:i,retry:s,bOnlyEmptyIsOK:u}),(g=c.D.bio.get("uploadType"))&&((t=g.get("ajaxConfig"))&&t.headers&&o&&c.D.mix(t.headers,o),0<=r&&g.set("blockSize",r),e.__withCredentials&&c.D.mix(t.xhrFields,{withCredentials:!0})),e.__HTTPPostResponseString=!1,c.D.bio.on(c.D.BIO.event.SUCCESS,(function(t){c.D.bio=!1,e.__HTTPPostResponseString=t&&c.D.isString(t.response)?t.response:"",c.D.isFunction(e.__OnHttpUploadStatus)&&e.__OnHttpUploadStatus(t={fileName:t.name,percentage:100,statusCode:200,responseString:e.__HTTPPostResponseString}),c.D.isFunction(d)&&d(e.__HTTPPostResponseString)})),c.D.bio.on(c.D.BIO.event.ERROR,(function(t){var n=t&&t.canceled,r=!1,i=0;c.D.bio=!1,e.__HTTPPostResponseString=t&&c.D.isString(t.response)?t.response:"",n||(t&&t.msg&&(r=t.msg),t&&t.httpStatus&&(i=t.httpStatus)),c.D.Errors.UploadError(e,n,r,i),c.D.isFunction(e.__OnHttpUploadStatus)&&e.__OnHttpUploadStatus(n={fileName:t.name,percentage:100,statusCode:i,responseString:e.__HTTPPostResponseString}),c.D.isFunction(h)&&h(e.__HTTPPostResponseString)})),(a||c.D.isFunction(e.__OnHttpUploadStatus))&&(c.D.bio.on(c.D.BIO.event.PROGRESS,(function(t){delete t.totalSize,delete t.position;var n=0===t.total?100:Math.round(100*t.loaded/t.total);[t.loaded," / ",t.total].join(""),c.D.isFunction(e.__OnHttpUploadStatus)&&e.__OnHttpUploadStatus({fileName:t.name,percentage:n=99<n?99:n,statusCode:0,responseString:""}),a&&e._OnPercentDone([0,n,"","http",t.name])})),a&&e._OnPercentDone([0,-1,c.I.MSG.Uploading,"http"]),c.D.isFunction(e.__OnHttpUploadStatus)&&(i="",c.D.isArray(n)&&0<n.length||(n&&n.name&&""!=n.name?i=n.name:n&&n.fileName&&(i=n.fileName)),e.__OnHttpUploadStatus({fileName:i,percentage:0,statusCode:0,responseString:""}))),l&&l.bCancel?(l.st=2,c.D.isFunction(h)&&h(!1),!1):c.D.bio.upload(n)},httpPutImage:function(e,t,n,r,i,o,a){var s=!0;return t={method:"PUT",url:t,hasContent:!0,processData:!1,async:r,data:n,onSuccess:i,onError:function(){s=!1,c.D.isFunction(o)&&o()},onComplete:function(){c.D.bio=!1},beforeSend:function(e){c.D.isFunction(a)&&e.upload.addEventListener("progress",(function(e){delete e.totalSize,delete e.position,a(e)}),!1)}},""!=e.HTTPUserName&&(t.username=e.HTTPUserName,t.password=e.HTTPPassword),r||c.D.mix(t,{headers:{"X-Requested-With":!1}}),c.D.bio=c.D.ajax(t),s},dialog:!1,dialogRef:0,showMask:function(e){c.D.log("showMask:"+e+"--"+this.dialogRef),0==this.dialogRef&&c.D.detect.showMask(),this.dialogRef++},hideMask:function(e){var t=this;c.D.log("hideMask:"+e+"--"+t.dialogRef),1<t.dialogRef?t.dialogRef--:t.dialogRef<=1&&(c.D.detect.hideMask(),t.dialog=!1,t.dialogRef=0)},setBtnCancelVisibleForProgress:function(e,t){(0==c.D.cancelFrome&&1==e.__IfShowProgressBar||0!=c.D.cancelFrome&&1==e.__IfShowCancelDialogWhenImageTransfer)&&c.D.setBtnCancelVisibleForProgress(t)},EVENTS:["OnPostAllTransfers","OnPostTransfer","OnPostLoad","OnPreTransfer","OnPreAllTransfers","OnResult","OnTransferCancelled","OnTransferError","OnSourceUIClose","OnGetFilePath","OnPercentDone","OnPostTransferAsync","OnPreAllTransfersAsync","OnRemoteScanStatusAsync","OnConsumed"],SEND_BACK_EVENTS:["OnPreAllTransfers","OnPreTransfer","OnPostTransfer","OnGetFilePath","OnPostLoad"],handleOnBitmapChangedEvent:function(e,t,n){var r="_OnBitmapChanged";return c.D.isFunction(e[r])&&e[r](t.result,t,n),!1},handleEvent:function(e,t,n){var r=t.result[0],i=e._objWS,o=!1;return c.D.each(d.EVENTS,(function(n,r){if(t.event===n)return n=["_",n].join(""),o=!0,c.D.isFunction(e[n])&&e[n](t.result,t),!1})),o?(c.D.log("handled event:"+t.event),c.D.each(d.SEND_BACK_EVENTS,(function(n,o){return!d.isServerInvalid(e)&&(t.event===n?(c.D.log("sendback event:"+t.event),d.sendData(i,d.getJson(e,t.event,(0,l.dv)(r),0),!1,!0),!1):void 0)}))):(c.D.each(c.D.Addon_Events,(function(n,r){if(t.event===n)return n=["_",n].join(""),o=!0,c.D.isFunction(e[n])&&e[n](t.result),!1})),o&&(c.D.log("handled addon event:"+t.event),c.D.each(c.D.Addon_Sendback_Events,(function(n,o){return!d.isServerInvalid(e)&&(t.event===n?(c.D.log("sendback addon event:"+t.event),d.sendData(i,d.getJson(e,t.event,(0,l.dv)(r),0),!1,!0),!1):void 0)})))),o},getImageType:function(e){if(void 0===e)return-1;if(e.length<4)return-1;var t=s()(e).call(e,".");return-1===t?-1:".bmp"===(e=a()(e).call(e,t).toLowerCase())||".dib"===e?c.I.DWT.EnumDWT_ImageType.IT_BMP:".jpg"===e||".jpe"===e||".jpeg"===e||".jfif"===e?c.I.DWT.EnumDWT_ImageType.IT_JPG:".tif"===e||".tiff"===e?c.I.DWT.EnumDWT_ImageType.IT_TIF:".png"===e?c.I.DWT.EnumDWT_ImageType.IT_PNG:".pdf"===e?c.I.DWT.EnumDWT_ImageType.IT_PDF:".jp2"===e||".j2k"===e||".j2c"===e?c.I.DWT.EnumDWT_ImageType.IT_J2K:-1},addImageFileExt:function(e,t){var n,r=e.substring(s()(e).call(e,".")).toLowerCase();return".bmp"==r||".dib"==r||".jpg"==r||".jpe"==r||".jpeg"==r||".jfif"==r||".tif"==r||".tiff"==r||".png"==r||".pdf"==r?e:(t==c.I.DWT.EnumDWT_ImageType.IT_BMP?n=[e,".bmp"].join(""):t==c.I.DWT.EnumDWT_ImageType.IT_JPG?n=[e,".jpg"].join(""):t==c.I.DWT.EnumDWT_ImageType.IT_PNG?n=[e,".png"].join(""):t==c.I.DWT.EnumDWT_ImageType.IT_TIF?n=[e,".tif"].join(""):t==c.I.DWT.EnumDWT_ImageType.IT_PDF?n=[e,".pdf"].join(""):t==c.I.DWT.EnumDWT_ImageType.IT_J2K&&(n=[e,".jp2"].join("")),n)},replaceLocalFilename:function(e){return void 0===e?"":(e=(e=String(e)).replace(/\\/g,"\\\\"),c.I.navInfoSync.bFileSystem?decodeURI(e):e)},GetImageInfo:function(e,t){return-1==(t=e._ImgManager.convertClientIndexToServerId(t))?(c.D.Errors.IndexOutOfRange(e),!1):e._innerFun("GetImageInfo",(0,l.dv)(t))},isServerInvalid:function(e){var t=!e.bReady||null===e._objWS,n=e.__bMustUpgradeService;return t?c.D.Errors.Server_Invalid(e):n?c.D.Errors.MustUpgradeService(e):e._destroy&&c.D.Errors.Destroyed(e),t||n||-2208==e._errorCode||e._destroy},isHttpServerInvalid:function(e){var t=!e.bReady||null===e.httpUrl,n=e.__bMustUpgradeService;return t?c.D.Errors.Server_Invalid(e):n&&c.D.Errors.MustUpgradeService(e),t||n||-2208==e._errorCode},getBlobTypeByImageType:function(e){var t="application/octet-stream";switch(e){case 0:t="image/bmp";break;case 1:t="image/jpeg";break;case 2:t="image/tiff";break;case 3:t="image/png";break;case 4:t="application/pdf";break;case 14:t="image/jp2"}return t},DEF:function(e,t,n,r){var i;0!==n&&1!==n?i=n:(i={},n&&(i.set=1==r?function(n){return!c.D.isNumber(n=+n)||isNaN(n)?(c.D.Errors.InvalidValue(e),!1):(e._resetErr(),!!e._isValid()&&e._innerFun(t,(0,l.dv)(n)))}:2==r?function(n){return c.D.isBoolean(n)?(e._resetErr(),!!e._isValid()&&e._innerFun(t,(0,l.dv)(n))):(c.D.Errors.InvalidValue(e),!1)}:function(n){return c.D.isString(n)?(e._resetErr(),!!e._isValid()&&e._innerFun(t,(0,l.dv)(n))):(c.D.Errors.InvalidValue(e),!1)})),i.get||(i.get=function(){return e._resetErr(),!!e._isValid()&&("CurrentSourceName"==t?(n=e._innerFun(t),e.__currentImageCaptureDriverType==c.I.DWT.EnumDWT_Driver.TWAIN64&&0<n.length?"Twain64-"+n:e.__currentImageCaptureDriverType==c.I.DWT.EnumDWT_Driver.ICA&&e.__serverPlatform==c.I.DWT.EnumDWT_PlatformType.enumMac&&0<n.length?"ICA-"+n:n):e._innerFun(t));var n}),t in e||u()(e,t,i)},_DEF_NOT_SUPPORT_MOBILE_A:function(e,t,n){var r={get:function(){return e._mobileNotSupport(t)}};1!==n&&!c.D.isUndef(n)||(r.set=r.get),t in e||u()(e,t,r)},DEF_NOT_SUPPORT_MOBILE:function(e,t,n){c.D.isArray(t)?c.D.each(t,(function(t){d._DEF_NOT_SUPPORT_MOBILE_A(e,t,n)})):d._DEF_NOT_SUPPORT_MOBILE_A(e,t,n)},callbacks:[],pushCallback:function(e,t,n){d.callbacks({method:e,callback:t,ticks:n})},refreshUIRef:0,makeParams:l.dv}},1505:function(e,t,n){n.r(t);var r=n(1695);r.D.LS={isSupportLS:function(){var e=r.I.navInfoSync,t=!1;if(!e.bEdge||!e.bFileSystem)try{t=!!window.localStorage}catch(n){}return t},item:function(e,t,n){var r=null;return this.isSupportLS()&&null!==(r=t?(localStorage.setItem(e,t),t):localStorage.getItem(e))?r:n},removeItem:function(e){return!!this.isSupportLS()&&(localStorage.removeItem(e),!0)}}},8743:function(e,t,n){n.r(t);var r,o,a,s,u,c,l,d,h,g,f,m,p,_,v,I,y,b,D,T,S,w,C=n(9623),E=(t=n(5005),n.n(t)),M=(t=n(4579),n.n(t)),P=(t=n(5683),n.n(t)),A=(t=n(9927),n.n(t)),x=(t=n(7711),n.n(t)),R=(t=n(9798),n.n(t)),k=n(1695),L=n(3887),F=n(668),W=k.D.html5.STwain,O=(t=W.prototype,0),B=null,N=function(){return new k.I.Imagecore},V=function(){return new k.I.ImageProc},U=function(){return new k.I.PdfReader},G=(k.D.MobileFuns={makeParams:function(){return arguments},_innerSaveLocal:function(e,t,n){var r,i=window,o=k.I.navInfo,a=k.I.navInfoSync;return i=i.requestFileSystem||i.webkitRequestFileSystem||i.mozRequestFileSystem,!o.biPad&&!o.biPhone||i||!(a.bSafari&&E()(a.strBrowserVersion)<13)&&a.bSafari?((i=document.createElementNS("http://www.w3.org/1999/xhtml","a")).href=e,i.download=t,i.target="_blank",document.body.appendChild(i),o.bEdge?i.click():((a=document.createEvent("MouseEvents")).initMouseEvent("click",!0,!1),i.dispatchEvent(a)),document.body.removeChild(i),!0):(r=window.open(e,"","",!1),M()((function(){r.document.title=t}),100),!0)},saveLocal:function(e,t,n){k.D.isString(e)&&-1<P()(e).call(e,"blob:http://")?k.D.MobileFuns._innerSaveLocal(e,t,n):e instanceof Blob?k.D.MobileFuns._innerSaveLocal(A().createObjectURL(e),t,n):e instanceof ArrayBuffer?k.D.MobileFuns._innerSaveLocal(A().createObjectURL(new Blob([e])),t,n):k.D.MobileFuns._innerSaveLocal(e,t,n)},dataURLtoBlob:function(e){var t,n,r,i=(e=e.split(","))[0].match(/:(.*?);/)[1];try{t=atob(e[1])}catch(a){return t="",!1}for(n=t.length,r=new Uint8Array(n);n--;)r[n]=t.charCodeAt(n);return new Blob([r],{type:i})},appendTiffPage:function(e,t,n,r){var i=e,o=t,a=(e=n.context.bShowPercentProgress,i._aryTiffTag.length);if(0<a){32<a&&(a=32);for(var s=0;s<a;s++)o=(o=o.then((function(e){var t;return n.context.tagIndex=0,k.D.log("[Wasm]Save Image: page "+n.context.cIndex+" add tiff tag "+(t=i._aryTiffTag[t=n.context.tagIndex]).tag),n.addTag(t.tag,t.content,t.UseBase64Encoding)}))).then((function(){n.context.tagIndex=n.context.tagIndex+1}))}return o=o.then((function(){k.D.log("[Wasm]Save Image: page "+n.context.cIndex+" add tiff tag successfully");var e=n.context.aryIndex,t=n.context.cIndex;return i._ImgManager.getWebViewer().GetImageData(i._ImgManager.getUidByIndex(e[t]))})),o=(o=i._scaleDownThreshold<=0?o:(o=o.then((function(e){var t=e&&e.metadata?e.metadata:{},r=(k.D.log("[Wasm]Save Image: scale"),1==(n.context.metaData=t).bitDepth);return k.I.ImageProcWrapper.resize(e.oriData,t.width,t.height,i._scaleDownThreshold,5,r)}))).then((function(e){return k.D.log("[Wasm]Save Image: scaled"),{oriData:e.imageData,metadata:n.context.metaData}}))).then((function(e){var t=k.I.DWT.EnumDWT_ImageType.IT_ALL,r=n.context.tiffFormat,o=(k.D.log("[Wasm]Save Image: page "+n.context.cIndex+" append to tiff"),1==e.metadata.bitDepth);return n.appendImage(e.oriData,t,r,i._jpgQuality,o)})),(o=e?o.then((function(){var e=n.context.aryIndex.length,t=n.context.cIndex+1;i._OnPercentDone([0,100*t/+e,t+"/"+e,""])})):o).then((function(){var e=n.context.cIndex;return n.context.cIndex=e+1,e+1}))},unloadWasm:function(){return B&&(B.terminate(),B=null),k.D.Promise.resolve()},loadCallback:function(e){if(e&&e.customData){var t,n,r=e.fPdfReader,i=e.imgCore,o=(e=(n=e.customData).src,n.imgType),a=n.index,s=n.password,u=n.resolution,c=n.convertMode,l=!1;if(o==(n=k.I.DWT.EnumDWT_ImageType).IT_PDF)return r||(r=U(),l=!0),t=function(e){r.close(),l&&r.terminate()},r.open(e,s).then((function(e){var t,n,i;return(k.I.navInfoSync.bMobile||k.I.navInfoSync.bPad)&&(t=5,n=85,i=3840),r.readPage(a,u,c,k.I.DWT.EnumDWT_ImageType.IT_JPG,!1,!1,k.I.navInfo.bMac||k.I.navInfo.biPhone||k.I.navInfo.biPad,t,n,i)}),t).then((function(e){return r.close(),l&&r.terminate(),e.imageData}),t);if(o==n.IT_TIF)return i||(i=N(),l=!0),t=function(e){l&&i.terminate()},i.openTiff(e).then((function(e){var t,n,r;return(k.I.navInfoSync.bMobile||k.I.navInfoSync.bPad)&&(t=5,n=85,r=3840),i.readTiff(a,k.I.DWT.EnumDWT_ImageType.IT_JPG,!1,k.I.navInfo.bMac||k.I.navInfo.biPhone||k.I.navInfo.biPad,t,n,r)})).then((function(e){return l&&i.terminate(),e.imageData}),t);if(o==n.IT_PNG||o==n.IT_JPG||o==n.IT_BMP)return i=i||N(),l=!0,s=_this._jpgQuality,t=function(e){l&&i.terminate()},o=k.I.navInfo.bMac||k.I.navInfo.biPhone||k.I.navInfo.biPad,(k.I.navInfoSync.bMobile||k.I.navInfoSync.bPad)&&(l&&i.terminate(),r1&&(3840<r1.imageWidth||3840<r1.imageHeight))?k.I.ImageProcWrapper.resizeImageWithMeta(e,r1,5,s,3840).then((function(e){return e.imageData})):i.readImage(e,k.I.DWT.EnumDWT_ImageType.IT_JPG,s,!1,o).then((function(e){return l&&i.terminate(),e.imageData}),t)}return k.D.Promise.resolve()},convertOutputType:function(e){return e},isBlobUrl:function(e){return k.D.isString(e)&&-1<P()(e).call(e,"blob:http://")},revoke:function(e){return!k.D.MobileFuns.isBlobUrl(e)||(A()||window.webkitURL).revokeObjectURL(e)}},t._innerSendToMobile=function(e,t,n,i,a){var s=this;return"GetLicenseInfo"==e||"SetLTSLicense"==e?(k.D.detect.showMask(s),o(s,t).then((function(e){k.D.hideMask(),k.D.isFunction(i)&&i(e)}),(function(e){k.D.hideMask(),k.D.Errors.GetLicenseInfoFailed(s,e),a&&a(s._errorCode,s._errorString)}))):k.D.License.checkProductKey(s,{Core:!0,Wasm:!0},!0)?("SaveImage"==e?r(s,t).then((function(e){i&&i(e.blobData,e.type,e.MD5)}),(function(){k.D.isFunction(a)&&a(s._errorCode,s._errorString)})):s._innerSendToMobileV2(e,t).then(i,(function(){k.D.isFunction(a)&&a(s._errorCode,s._errorString)})),!0):(a&&a(s._errorCode,s._errorString),!1)},t._innerSendToMobileV2=function(e,t){var n=this;return"GetLicenseInfo"==e||"SetLTSLicense"==e?o(n,t):k.D.License.checkProductKey(n,{Core:!0,Wasm:!0},!0)?"LoadImageFromBinary"==e?c(n,t):"RotateEx"==e?l(n,t):"Flip"==e?h(n,t):"Mirror"==e?g(n,t):"Invert"==e?f(n,t):"SaveImage"==e?r(n,t):"Crop"==e?m(n,t):"Erase"==e?p(n,t):"ChangeImageSize"==e?_(n,t):"GetSkewAngleOnly"==e?v(n,t):"GetSkewAngle"==e?I(n,t):"ConvertToGrayScale"==e?y(n,t):"ConvertToBWScale"==e?b(n,t):"SetDPI"==e?D(n,t):"SetImageWidth"==e?T(n,t):"IsTextBasedPDF"==e?S(n,t):"GetMD5"==e?a(n,t):"ChangeBrightness"==e?u(n,t):"ChangeContrast"==e?s(n,t):k.D.Promise.reject({code:-1e3,message:"invalid method: "+e}):k.D.Promise.reject(k.I.DWT.licenseException)},function(){var e=k.I.DWT.ProductKey;return k.D.License.isLTS()&&k.I.WasmEnv?k.I.WasmEnv.productKey:e});S=function(e,t){var n,r,i,o=k.I.DWT.EnumDWT_ImageType;return(t=t[0])instanceof FileList?n=t[0]:t instanceof Blob||!(t instanceof ArrayBuffer||t instanceof Uint8Array)?n=t:(n=new Blob([t]),r=(0,L.Ho)(t)),k.D.isUndefined(r)&&(n.type?"application/pdf"==n.type&&(r=o.IT_PDF):r=k.D.html5.Funs.getImageType(n.name)),r==o.IT_PDF?(i=U(),k.D.detect.showMask(e),i.open(n,e._pdfPassword).then((function(e){return k.D.hideMask(),i.close(),i.terminate(),e.isTextBased}),(function(t){throw k.D.hideMask(),k.D.Errors.LoadImageFailed(e,t),i.close(),i.terminate(),{code:e._errorCode,message:e._errorString}}))):(k.D.Errors.LoadImageFailed(e,"not pdf."),k.D.Promise.reject({code:e._errorCode,message:e._errorString}))},c=function(e,t){var n,r,o,s,u,l=t[0],d=t[1],h=!1,g=0,f=!1,m=k.I.DWT.EnumDWT_ImageType,p=!1;if(3<t.length&&(n=t[3]),4<t.length&&(f=t[4]),5<t.length&&(p=t[5]),n||""==(n=e.GetCurrentDocumentName())&&(n=e._ImgManager.getWebViewer().GetDefaultFileName()),l instanceof FileList?r=l[0]:l instanceof Blob||!(l instanceof ArrayBuffer||l instanceof Uint8Array)?r=l:(r=new Blob([l]),s=(0,L.Ho)(l)),k.D.isUndefined(r))return k.D.Errors.InvalidSourceFile(e),k.D.Promise.reject({code:e._errorCode,message:e._errorString});if(k.D.isUndefined(s))if(r.type){if(-1==(s="application/pdf"==r.type?m.IT_PDF:"image/png"==r.type?m.IT_PNG:"image/jpeg"==r.type||"image/jpg"==r.type?m.IT_JPG:"image/bmp"==r.type?m.IT_BMP:"image/tiff"==r.type||"image/tif"==r.type?m.IT_TIF:"image/jp2"==r.type?m.IT_J2K:k.D.html5.Funs.getImageType(r.name))&&"application/octet-stream"==r.type)return new k.D.Promise((function(e,n){var i=new FileReader;i.onload=function(n){t[0]=n=n.target.result,e(t)},i.readAsArrayBuffer(r)})).then((function(t){return c(e,t)}))}else s=k.D.html5.Funs.getImageType(r.name);return o=r.name,s==m.IT_JPG||s==m.IT_PNG||s==m.IT_BMP||s==m.IT_J2K?(f||k.D.detect.showMask(e),l=e._jpgQuality,(h=N()).readImage(r,m.IT_JPG,l,!1,k.I.navInfo.bMac||k.I.navInfo.biPhone||k.I.navInfo.biPad).then((function(t){return(k.I.navInfoSync.bMobile||k.I.navInfoSync.bPad)&&t&&(3840<t.imageWidth||3840<t.imageHeight)?k.I.ImageProcWrapper.resizeImageWithMeta(r,t,5,e._jpgQuality,3840):t})).then((function(u){var c=0,l=(d?(c=F.zW,p&&(u.imageBitDepth=1)):1==u.originalFormat?c=m.IT_BMP:2==u.originalFormat?c=m.IT_JPG:3==u.originalFormat?c=m.IT_PNG:14==u.originalFormat&&(c=m.IT_J2K),c={src:u.imageData,imgType:u.imageType,verify:c,dataType:"url"},r instanceof File||2==u.originalFormat&&r instanceof Blob&&(c.src=r),t[2]),g={};g.width=u.imageWidth,g.height=u.imageHeight,g.bitDepth=u.imageBitDepth,g.resolutionX=u.imageXResolution,g.resolutionY=u.imageYResolution,l&&(g.oriBlobData=l),c.metadata=g,O++,u=!1;try{c.imageId=O,e._OnBitmapChanged(["10",""+O,1,e._ImgManager.getCurrentImageIndex(),e._ImgManager.count(),c],null,n)}catch(i){u=!0,k.D.Errors.SystemExceptionError(e,i.message)}if(f||k.D.hideMask(),!u&&k.D.isFunction(e.__OnPostLoad))try{e.__OnPostLoad("",o,s)}catch(a){u=!0,k.D.Errors.SystemExceptionError(e,a.message)}if(h&&h.terminate(),k.I.DWT.lavrf_(1,k.I.DWT.EnumInstance.dwt_browser),u)throw{code:e._errorCode,message:e._errorString}}),(function(t){throw k.D.Errors.LoadImageFailed(e,t),f||k.D.hideMask(),h&&h.terminate(),{code:e._errorCode,message:e._errorString}}))):s==m.IT_PDF?((u=U()).context={},k.D.showProgress(e),e._OnPercentDone([0,-1,k.I.MSG.LoadingPdf,""]),u.open(r,e._pdfPassword).then((function(r){var i,a=r.PdfCount;if(r.isTextBased&&2==e._pdfRealConvertMode)return k.I.Lib.closeProgress(e),2==e._pdfConvertMode?k.I.Lib.Errors.LoadTextPDFButSetImageOnly(e):k.I.Lib.Errors.LoadTextPDFButNoPdfrLicenseErr(e),u.close(),u.terminate(),k.D.Promise.reject({code:e._errorCode,message:e._errorString});for(e._OnPercentDone([0,0,"0/"+a,""]),i=k.D.Promise.resolve(0),u.context.cIndex=0,u.context.pdfCount=a,g=0;g<a;g++)i=(i=i.then((function(){var t,n,r;return(k.I.navInfoSync.bMobile||k.I.navInfoSync.bPad)&&(t=5,n=85,r=3840),u.readPage(u.context.cIndex,e._pdfResolution,e._pdfRealConvertMode,k.I.DWT.EnumDWT_ImageType.IT_JPG,!1,!1,k.I.navInfo.bMac||k.I.navInfo.biPhone||k.I.navInfo.biPad,t,n,r)}))).then((function(r){var i=u.context.cIndex,o=i+1,a={},s=k.I.DWT.EnumDWT_ImageType.IT_PDF,c=(1==r.realReadMode&&(s=F.KX),e._OnPercentDone([0,100*o/+(c=u.context.pdfCount),o+"/"+c,""]),k.I.Lib.isArray(r.imageInfos)&&0<r.imageInfos.length&&(a.width=(o=r.imageInfos[0]).imageWidth,a.height=o.imageHeight,a.bitDepth=o.imageBitDepth,a.resolutionX=o.imageXResolution,a.resolutionY=o.imageYResolution),O++,{src:r.imageData,dataType:"url",imgType:k.I.DWT.EnumDWT_ImageType.IT_PDF,verify:s,index:r.pageIndex,metadata:a,imageId:O});try{e._OnBitmapChanged(["10",""+O,1,e._ImgManager.getCurrentImageIndex(),e._ImgManager.count(),c],null,n)}catch(t){throw k.I.Lib.Errors.SystemExceptionError(e,t.message),0}u.context.cIndex=i+1}));return i.then((function(){k.I.Lib.closeProgress(e),u.close(),u.terminate(),k.I.DWT.lavrf_(1,k.I.DWT.EnumInstance.dwt_browser),k.I.Lib.isFunction(e.__OnPostLoad)&&e.__OnPostLoad("",o,s)}),(function(t){throw k.I.Lib.closeProgress(e),u.close(),u.terminate(),t&&k.I.Lib.Errors.LoadImageFailed(e,t),{code:e._errorCode,message:e._errorString}}))}),(function(t){throw k.I.Lib.closeProgress(e),u.close(),u.terminate(),t&&k.I.Lib.Errors.LoadImageFailed(e,t),{code:e._errorCode,message:e._errorString}}))):s==m.IT_TIF?(h=N(),k.D.showProgress(e),e._OnPercentDone([0,-1,k.I.MSG.LoadingTiff,""]),h.openTiff(r).then((function(t){var r=t.pageCount,i=t.imageInfos,a=k.D.Promise.resolve(0);e._OnPercentDone([0,0,"0/"+r,""]);for(var u=0;u<r;u++)a=a.then((function(t){var o,a,s;return(k.I.navInfoSync.bMobile||k.I.navInfoSync.bPad)&&(o=5,a=85,s=3840),h.readTiff(t,k.I.DWT.EnumDWT_ImageType.IT_JPG,!1,k.I.navInfo.bMac||k.I.navInfo.biPhone||k.I.navInfo.biPad,o,a,s).then((function(o){var a=(e._OnPercentDone([0,100*(a=t+1)/+r,a+"/"+r,""]),O++,{src:o.imageData,dataType:"url",imgType:k.I.DWT.EnumDWT_ImageType.IT_TIF,verify:k.I.DWT.EnumDWT_ImageType.IT_TIF,index:t,metadata:i[t],imageId:O});try{e._OnBitmapChanged(["10",""+O,1,e._ImgManager.getCurrentImageIndex(),e._ImgManager.count(),a],null,n)}catch(s){throw k.I.Lib.Errors.SystemExceptionError(e,s.message),0}return t+1}))}));return a.then((function(){k.I.Lib.closeProgress(e),h.closeTiff(),h.terminate(),k.I.DWT.lavrf_(1,k.I.DWT.EnumInstance.dwt_browser),k.I.Lib.isFunction(e.__OnPostLoad)&&e.__OnPostLoad("",o,s)}),(function(t){throw k.I.Lib.closeProgress(e),h.closeTiff(),h.terminate(),t&&k.I.Lib.Errors.LoadImageFailed(e,t),{code:e._errorCode,message:e._errorString}}))}),(function(t){throw k.I.Lib.closeProgress(e),h.closeTiff(),h.terminate(),k.I.Lib.Errors.LoadImageFailed(e,t),{code:e._errorCode,message:e._errorString}}))):(k.D.Errors.LoadImageFailed(e,"invalid image type."),k.D.Promise.reject({code:e._errorCode,message:e._errorString}))},l=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=(k.D.isUndefined(r)&&(r=0),k.D.isUndefined(i)&&(i=!0),(k.D.isUndefined(o)||o<1||3<o)&&(o=3),k.D.isUndefined(a)&&(a="FFFFFF"),r<0?r=r%360+360:360<=r&&(r%=360),k.D.detect.showMask(e),V()),u=e._ImgManager.convertClientIndexToServerId(n);return s.context={},e._ImgManager.getWebViewer().GetImageData(e._ImgManager.getUidByIndex(n)).then((function(e){return s.context.metadata=e&&e.metadata?e.metadata:{},s.initImage(e.oriData)})).then((function(){if(0!=r)return s.rotate(r,a,i,o)})).then((function(){return s.getImage()})).then((function(t){return(k.I.navInfoSync.bMobile||k.I.navInfoSync.bPad)&&t&&(3840<t.imageWidth||3840<t.imageHeight)?k.I.ImageProcWrapper.resizeImageWithMeta(t.imageData,t,5,e._jpgQuality,3840):t})).then((function(t){"width"in t&&(t.imageWidth=t.imageWidth),"height"in t&&(t.imageHeight=t.imageHeight),t={src:t.imageData,imgType:k.D.MobileFuns.convertOutputType(t.imageType),dataType:"url",metadata:{width:t.imageWidth,height:t.imageHeight}};var n=!1;try{e._OnBitmapChanged(["10",""+u,4,e._ImgManager.getCurrentImageIndex(),e._ImgManager.count(),t])}catch(r){n=!0,k.D.Errors.SystemExceptionError(e,r.message)}if(k.D.hideMask(),s.terminate(),n)throw{code:e._errorCode,message:e._errorString}}),(function(t){throw k.D.Errors.RotateFailed(e,t),k.D.hideMask(),s.terminate(),{code:e._errorCode,message:e._errorString}}))},d=function(e,t,n){var r=V(),i=e._ImgManager.convertClientIndexToServerId(t);return r.context={},k.D.detect.showMask(e),e._ImgManager.getWebViewer().GetImageData(e._ImgManager.getUidByIndex(t)).then((function(e){return r.context.metadata=e&&e.metadata?e.metadata:{},r.initImage(e.oriData)})).then((function(){return r.flip(n)})).then((function(){return r.getImage()})).then((function(t){t={src:t.imageData,imgType:k.D.MobileFuns.convertOutputType(t.imageType),dataType:"url"};try{e._OnBitmapChanged(["10",""+i,4,e._ImgManager.getCurrentImageIndex(),e._ImgManager.count(),t])}catch(n){throw k.D.Errors.SystemExceptionError(e,n.message),0}})).then((function(){k.D.hideMask(),r.terminate()}),(function(t){throw k.D.hideMask(),t&&(-1==n?k.D.Errors.MirrorFailed(e,t):k.D.Errors.FlipFailed(e,t)),r.terminate(),{code:e._errorCode,message:e._errorString}}))},g=function(e,t){return d(e,t=t[0],-1)},h=function(e,t){return d(e,t=t[0],1)},f=function(e,t){t=t[0];var n=V(),r=e._ImgManager.convertClientIndexToServerId(t);return n.context={},k.D.detect.showMask(e),e._ImgManager.getWebViewer().GetImageData(e._ImgManager.getUidByIndex(t)).then((function(e){return n.context.metadata=e&&e.metadata?e.metadata:{},n.initImage(e.oriData)})).then((function(){return n.invert()})).then((function(){return n.getImage()})).then((function(t){t={src:t.imageData,imgType:k.D.MobileFuns.convertOutputType(t.imageType),dataType:"url"};try{e._OnBitmapChanged(["10",""+r,4,e._ImgManager.getCurrentImageIndex(),e._ImgManager.count(),t])}catch(n){throw k.D.Errors.SystemExceptionError(e,n.message),0}})).then((function(){k.D.hideMask(),n.terminate()}),(function(t){throw k.D.hideMask(),t&&k.D.Errors.InvertFailed(e,t),n.terminate(),{code:e._errorCode,message:e._errorString}}))},m=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4];if(!(k.D.isNumber(r)&&k.D.isNumber(i)&&k.D.isNumber(o)&&k.D.isNumber(a)))return k.D.Errors.MobileServer_InvalidLeftOrTopOrRightOrBottom(e),k.D.Promise.reject({code:e._errorCode,message:e._errorString});var s=V(),u=e._ImgManager.convertClientIndexToServerId(n);return s.context={},k.D.detect.showMask(e),e._ImgManager.getWebViewer().GetImageData(e._ImgManager.getUidByIndex(n)).then((function(e){return s.context.metadata=e&&e.metadata?e.metadata:{},s.initImage(e.oriData)})).then((function(){return s.crop(r,i,o,a)})).then((function(){return s.getImage()})).then((function(t){t={src:t.imageData,imgType:k.D.MobileFuns.convertOutputType(t.imageType),dataType:"url",metadata:{imageData:t.imageData,width:t.imageWidth,height:t.imageHeight}};try{e._OnBitmapChanged(["10",""+u,4,e._ImgManager.getCurrentImageIndex(),e._ImgManager.count(),t])}catch(n){throw k.D.Errors.SystemExceptionError(e,n.message),0}})).then((function(){k.D.hideMask(),s.terminate()}),(function(t){throw k.D.hideMask(),t&&k.D.Errors.CropFailed(e,t),s.terminate(),{code:e._errorCode,message:e._errorString}}))},p=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5];if(!(k.D.isNumber(r)&&k.D.isNumber(i)&&k.D.isNumber(o)&&k.D.isNumber(a)))return k.D.Errors.MobileServer_InvalidLeftOrTopOrRightOrBottom(e),k.D.Promise.reject({code:e._errorCode,message:e._errorString});k.D.isUndefined(s)&&(s="FFFFFF");var u=V(),c=e._ImgManager.convertClientIndexToServerId(n);return u.context={},k.D.detect.showMask(e),e._ImgManager.getWebViewer().GetImageData(e._ImgManager.getUidByIndex(n)).then((function(e){return u.context.metadata=e&&e.metadata?e.metadata:{},u.initImage(e.oriData)})).then((function(){return u.erase(r,i,o,a,s)})).then((function(){return u.getImage()})).then((function(t){t={src:t.imageData,imgType:k.D.MobileFuns.convertOutputType(t.imageType),dataType:"url",metadata:{imageData:t.imageData,width:t.imageWidth,height:t.imageHeight}};try{e._OnBitmapChanged(["10",""+c,4,e._ImgManager.getCurrentImageIndex(),e._ImgManager.count(),t])}catch(n){throw k.D.Errors.SystemExceptionError(e,n.message),0}})).then((function(){k.D.hideMask(),u.terminate()}),(function(t){throw k.D.hideMask(),t&&k.D.Errors.EraseFailed(e,t),u.terminate(),{code:e._errorCode,message:e._errorString}}))},_=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3];if(!k.D.isNumber(r))return k.D.Errors.MobileServer_InvalidWidth(e),k.D.Promise.reject({code:e._errorCode,message:e._errorString});if(!k.D.isNumber(i))return k.D.Errors.MobileServer_InvalidHeight(e),k.D.Promise.reject({code:e._errorCode,message:e._errorString});k.D.isUndefined(o)&&(o=5);var a=V(),s=e._ImgManager.convertClientIndexToServerId(n);return a.context={},k.D.detect.showMask(e),e._ImgManager.getWebViewer().GetImageData(e._ImgManager.getUidByIndex(n)).then((function(e){return a.context.metadata=e&&e.metadata?e.metadata:{},a.initImage(e.oriData)})).then((function(){return a.resize(r,i,o,5,1==a.context.metadata.bitDepth)})).then((function(){return a.getImage()})).then((function(t){t={src:t.imageData,imgType:k.D.MobileFuns.convertOutputType(t.imageType),dataType:"url",metadata:{imageData:t.imageData,width:t.imageWidth,height:t.imageHeight}};try{e._OnBitmapChanged(["10",""+s,4,e._ImgManager.getCurrentImageIndex(),e._ImgManager.count(),t])}catch(n){throw k.D.Errors.SystemExceptionError(e,n.message),0}})).then((function(){k.D.hideMask(),a.terminate()}),(function(t){throw k.D.hideMask(),t&&k.D.Errors.ChangeImageSizeFailed(e,t),a.terminate(),{code:e._errorCode,message:e._errorString}}))},v=function(e,t){t=t[0];var n=V();if(e._ImgManager.convertClientIndexToServerId(t),n.context={},k.D.detect.showMask(e),t=e._ImgManager.getWebViewer().GetMinPageData())return n.initImage(t.data,!0,t.width,t.height).then((function(){return n.getSkewAngle()})).then((function(e){return k.D.hideMask(),delete n.context,n.terminate(),e}),(function(t){throw k.D.hideMask(),k.D.Errors.SkewAngleFailed(e,t),n.terminate(),{code:e._errorCode,message:e._errorString}}))},I=function(e,t){t=t[0];var n=V();return e._ImgManager.convertClientIndexToServerId(t),n.context={},k.D.detect.showMask(e),e._ImgManager.getWebViewer().GetImageData(e._ImgManager.getUidByIndex(t)).then((function(e){return n.context.metadata=e&&e.metadata?e.metadata:{},n.initImage(e.oriData)})).then((function(){return n.getSkewAngle()})).then((function(e){return k.D.hideMask(),delete n.context,n.terminate(),e}),(function(t){throw k.D.hideMask(),k.D.Errors.SkewAngleFailed(e,t),n.terminate(),{code:e._errorCode,message:e._errorString}}))},y=function(e,t){t=t[0];var n=V(),r=e._ImgManager.convertClientIndexToServerId(t);return n.context={},k.D.detect.showMask(e),e._ImgManager.getWebViewer().GetImageData(e._ImgManager.getUidByIndex(t)).then((function(e){return n.context.metadata=e&&e.metadata?e.metadata:{},n.initImage(e.oriData)})).then((function(){return n.toGrayscale()})).then((function(){return n.getImage()})).then((function(t){t={src:t.imageData,imgType:k.D.MobileFuns.convertOutputType(t.imageType),dataType:"url",metadata:{imageData:t.imageData,width:t.imageWidth,height:t.imageHeight,bitDepth:8}};try{e._OnBitmapChanged(["10",""+r,4,e._ImgManager.getCurrentImageIndex(),e._ImgManager.count(),t])}catch(n){throw k.D.Errors.SystemExceptionError(e,n.message),0}})).then((function(){k.D.hideMask(),n.terminate()}),(function(t){throw k.D.hideMask(),t&&k.D.Errors.ConvertToGrayScaleFailed(e,t),n.terminate(),{code:e._errorCode,message:e._errorString}}))},b=function(e,t){t=t[0];var n=V(),r=e._ImgManager.convertClientIndexToServerId(t);return n.context={},k.D.detect.showMask(e),e._ImgManager.getWebViewer().GetImageData(e._ImgManager.getUidByIndex(t)).then((function(e){return n.context.metadata=e&&e.metadata?e.metadata:{},n.initImage(e.oriData)})).then((function(){return n.toBinary(!1,void 0)})).then((function(){return n.getImage()})).then((function(t){t={src:t.imageData,imgType:k.D.MobileFuns.convertOutputType(t.imageType),dataType:"url",metadata:{imageData:t.imageData,width:t.imageWidth,height:t.imageHeight,bitDepth:1}};try{e._OnBitmapChanged(["10",""+r,4,e._ImgManager.getCurrentImageIndex(),e._ImgManager.count(),t])}catch(n){throw k.D.Errors.SystemExceptionError(e,n.message),0}})).then((function(){k.D.hideMask(),n.terminate()}),(function(t){throw k.D.hideMask(),t&&k.D.Errors.ConvertToBWScaleFailed(e,t),n.terminate(),{code:e._errorCode,message:e._errorString}}))},D=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4];if(!k.D.isNumber(r))return k.D.Errors.MobileServer_InvalidXResolution(e),k.D.Promise.reject({code:e._errorCode,message:e._errorString});if(!k.D.isNumber(i))return k.D.Errors.MobileServer_InvalidYResolution(e),k.D.Promise.reject({code:e._errorCode,message:e._errorString});k.D.isUndefined(a)&&(a=k.I.DWT.EnumDWT_InterpolationMethod.IM_BICUBIC);var s,u,c=V(),l=e._ImgManager.convertClientIndexToServerId(n);return c.context={},t=e._ImgManager._UIView.GetMetaDataByIndex(n),s=t.resolutionX,u=t.resolutionY,k.D.detect.showMask(e),e._ImgManager.getWebViewer().GetImageData(e._ImgManager.getUidByIndex(n)).then((function(e){return c.context.metadata=e&&e.metadata?e.metadata:{},c.initImage(e.oriData)})).then((function(){return c.setDPI(s,u,r,i,o,a)})).then((function(){return c.getImage()})).then((function(t){t={src:t.imageData,imgType:k.D.MobileFuns.convertOutputType(t.imageType),dataType:"url",metadata:{imageData:t.imageData,width:t.imageWidth,height:t.imageHeight,resolutionX:r,resolutionY:i}};try{e._OnBitmapChanged(["10",""+l,4,e._ImgManager.getCurrentImageIndex(),e._ImgManager.count(),t])}catch(n){throw k.D.Errors.SystemExceptionError(e,n.message),0}})).then((function(){k.D.hideMask(),c.terminate()}),(function(t){throw k.D.hideMask(),t&&k.D.Errors.SetDPIFailed(e,t),c.terminate(),{code:e._errorCode,message:e._errorString}}))},T=function(e,t){var n=t[0],r=t[1];if(!k.D.isNumber(r))return k.D.Errors.MobileServer_InvalidWidth(e),k.D.Promise.reject({code:e._errorCode,message:e._errorString});var i=V(),o=e._ImgManager.convertClientIndexToServerId(n);return i.context={},k.D.detect.showMask(e),e._ImgManager.getWebViewer().GetImageData(e._ImgManager.getUidByIndex(n)).then((function(e){return i.context.metadata=e&&e.metadata?e.metadata:{},i.initImage(e.oriData)})).then((function(){return i.setImageWidth(r)})).then((function(){return i.getImage()})).then((function(t){t={src:t.imageData,imgType:k.D.MobileFuns.convertOutputType(t.imageType),dataType:"url",metadata:{imageData:t.imageData,width:t.imageWidth,height:t.imageHeight}};try{e._OnBitmapChanged(["10",""+o,4,e._ImgManager.getCurrentImageIndex(),e._ImgManager.count(),t])}catch(n){throw k.D.Errors.SystemExceptionError(e,n.message),0}})).then((function(){k.D.hideMask(),i.terminate()}),(function(t){throw k.D.hideMask(),t&&k.D.Errors.SetImageWidthFailed(e,t),i.terminate(),{code:e._errorCode,message:e._errorString}}))},r=function(e,t){var n,r,o=t[0],a=t[1],s=t[2],u=t[3],c=t[4],l=!1,d=!1;if(t=k.I.DWT.EnumDWT_ImageType,k.D.isUndefined(o))return k.D.Errors.MobileServer_InvalidImage(e),k.D.Promise.reject({code:e._errorCode,message:e._errorString});if(!k.D.isArray(a))return k.D.Errors.MobileServer_InvalidIndex(e),k.D.Promise.reject({code:e._errorCode,message:e._errorString});if(k.D.isUndefined(s)&&(s="jpg"),k.D.isString(o)&&""!=o||(o="img."+s),"png"==s||"jpg"==s||"bmp"==s)return o=a[0],r=e._jpgQuality,k.D.log("[Wasm]Save Image: save "+s),1==u&&k.D.detect.showMask(e),n="png"==s?t.IT_PNG:"bmp"==s?t.IT_BMP:t.IT_JPG,t=e._ImgManager.getWebViewer().GetImageData(e._ImgManager.getUidByIndex(o)),(d=N()).context={},d.context.bSaveAsBinary=c,(t=e._scaleDownThreshold<=0?t.then((function(e){return k.D.log("[Wasm]Save Image: get original image data successfully."),d.saveImage(e.oriData,n,r,d.context.bSaveAsBinary?k.I.Enum_ReturnType.RT_BINARY:k.I.Enum_ReturnType.RT_BASE64,1==e.metadata.bitDepth)})):(t=t.then((function(t){k.D.log("[Wasm]Save Image: save to new type successfully.");var n=t&&t.metadata?t.metadata:{};return d.context.bOneBit=1==n.bitDepth,k.I.ImageProcWrapper.resize(t.oriData,n.width,n.height,e._scaleDownThreshold,5,d.context.bOneBit)}))).then((function(e){return k.D.log("[Wasm]Save Image: image scale successfully."),d.saveImage(e.imageData,n,r,d.context.bSaveAsBinary?k.I.Enum_ReturnType.RT_BINARY:k.I.Enum_ReturnType.RT_BASE64,d.context.bOneBit)}))).then((function(e){return 1==u&&k.D.hideMask(),d&&d.terminate(),l&&l.terminate(),k.D.log("[Wasm]Save Image: save image terminate."),{blobData:e.imageData,type:s,MD5:e.MD5}}),(function(t){throw 1==u&&k.D.hideMask(),k.D.Errors.SaveImageFailed(e,t),k.D.log("[Wasm]Save Image: save image failed."),d&&d.terminate(),l&&l.terminate(),{code:e._errorCode,message:e._errorString}}));if("pdf"!=s){if("tiff"!=s)return k.D.Errors.InvalidImageType(e),k.D.Promise.reject({code:e._errorCode,message:e._errorString});var h=a.length,g=(k.D.log("[Wasm]Save Image: save tiff"),(d=N()).context={},d.context.bSaveAsBinary=c,0<e._scaleDownThreshold&&((l=V()).context={}),u&&(d.context.bShowPercentProgress=!0,k.D.showProgress(e),e._OnPercentDone(2==u?[0,-1,k.I.MSG.ConvertingToBlob,""]:3==u?[0,-1,k.I.MSG.ConvertingToBase64,""]:4==u?[0,-1,k.I.MSG.Encoding,""]:[0,-1,k.I.MSG.SavingTiff,""])),d.createTiff());for(o=k.I.DWT.EnumDWT_TIFFCompressionType,d.context.cIndex=0,t=0,e._tiffCompressionType==o.TIFF_AUTO?t=0:e._tiffCompressionType==o.TIFF_FAX3||e._tiffCompressionType==o.TIFF_T4?t=1:e._tiffCompressionType==o.TIFF_FAX4||e._tiffCompressionType==o.TIFF_T6?t=2:e._tiffCompressionType==o.TIFF_LZW?t=3:e._tiffCompressionType==o.TIFF_JPEG?t=5:e._tiffCompressionType==o.TIFF_PACKBITS&&(t=4),d.context.tiffFormat=t,d.context.aryIndex=a,i=0;i<h;i++)g=k.D.MobileFuns.appendTiffPage(e,g,d,l);return(g=g.then((function(){return k.D.log("[Wasm]Save Image: generate tiff data."),d.getTiff(d.context.bSaveAsBinary?k.I.Enum_ReturnType.RT_BINARY:k.I.Enum_ReturnType.RT_AUTO)}))).then((function(t){return k.D.log("[Wasm]Save Image: save tiff successfully."),d.context.bShowPercentProgress&&k.D.closeProgress(e),d.closeTiff(),d.terminate(),l&&l.terminate(),{blobData:t.imageData,type:"tiff",MD5:t.MD5}}),(function(t){throw d.context.bShowPercentProgress&&k.D.closeProgress(e),k.D.Errors.SaveImageFailed(e,t),k.D.log("[Wasm]Save Image: save tiff failed."),d.closeTiff(),d.terminate(),l&&l.terminate(),{code:e._errorCode,message:e._errorString}}))}return o=function(){var t,n=new k.I.PdfWriter,r=a.length,i=(n.context={},k.D.log("[Wasm]Save Image: save pdf"),u&&(k.D.showProgress(e),e._OnPercentDone(2==u?[0,-1,k.I.MSG.ConvertingToBlob,""]:3==u?[0,-1,k.I.MSG.ConvertingToBase64,""]:4==u?[0,-1,k.I.MSG.Encoding,""]:[0,-1,k.I.MSG.SavingPdf,""])),n.initPdfSetting(e._pdfWriteSetting));for(0<e._scaleDownThreshold&&((l=V()).context={}),n.context.cIndex=0,n.context.aryIndex=a,n.context.bSaveAsBinary=c,t=0;t<r;t++)i=i.then((function(){var t=n.context.cIndex,r=n.context.aryIndex;return k.D.log("[Wasm]Save Image: page "+n.context.cIndex+" start process."),e._ImgManager.getWebViewer().GetImageData(e._ImgManager.getUidByIndex(r[t]))})),i=(i=e._scaleDownThreshold<=0?i.then((function(e){return k.D.log("[Wasm]Save Image: page "+n.context.cIndex+" get image data successfully. (no scale)"),n.appendPage(e.oriData,1==e.metadata.bitDepth)})):(i=i.then((function(t){k.D.log("[Wasm]Save Image: page "+n.context.cIndex+" get image data successfully.");var r=t&&t.metadata?t.metadata:{},i=1==r.bitDepth;return n.context.bOneBit=i,k.I.ImageProcWrapper.resize(t.oriData,r.width,r.height,e._scaleDownThreshold,5,i)}))).then((function(e){return k.D.log("[Wasm]Save Image: page "+n.context.cIndex+" scale successfully."),n.appendPage(e.imageData,n.context.bOneBit)}))).then((function(){var t,r=n.context.cIndex,i=n.context.aryIndex.length;u&&e._OnPercentDone([0,100*(t=r+1)/+i,t+"/"+i,""]),k.D.log("[Wasm]Save Image: page "+n.context.cIndex+" processed."),n.context.cIndex=r+1}));return{v:i.then((function(){return n.writePdf(n.context.bSaveAsBinary?k.I.Enum_ReturnType.RT_BINARY:k.I.Enum_ReturnType.RT_AUTO)})).then((function(t){return k.D.log("[Wasm]Save Image: save pdf successfully."),u&&k.D.closeProgress(e),n.terminate(),l&&l.terminate(),{blobData:t.pdfData,type:"pdf",MD5:t.MD5}}),(function(t){throw u&&k.D.closeProgress(e),k.D.Errors.SaveImageFailed(e,t),k.D.log("[Wasm]Save Image: save pdf failed."),n.terminate(),l&&l.terminate(),{code:e._errorCode,message:e._errorString}}))}}(),"object"===(0,C.Z)(o)?o.v:void 0},o=function(e,t){return t=0<t.length?t[0]:G(),k.I.WasmEnv?k.I.WasmEnv.getLicenseInfo(t,k.I.WasmEnv.licMode,k.I.WasmEnv.uuid).then((function(t){if(t&&t.Detail)return t;throw k.D.Errors.LicenseEmptyOrInvalid(e),{code:e._errorCode,message:e._errorString}}),(function(t){throw k.D.Errors.GetLicenseInfoFailed(e,t),{code:e._errorCode,message:e._errorString}})):(k.D.Errors.GetLicenseInfoFailed(e,"wasm not load."),k.D.Promise.reject({code:e._errorCode,message:e._errorString}))},a=function(e,t){var n=t=t[0],r=(t instanceof FileList?n=t[0]:(t instanceof Uint8ClampedArray||t instanceof ArrayBuffer||t instanceof Uint8Array)&&(n=new Blob([t])),N());return r.getMD5(n).then((function(e){return r.terminate(),e}),(function(t){throw k.D.Errors.GetMD5Failed(e,t),r.terminate(),{code:e._errorCode,message:e._errorString}}))},s=function(e,t){var n=t[0],r=t[1],i=V(),o=e._ImgManager.convertClientIndexToServerId(n);return i.context={},k.D.detect.showMask(e),e._ImgManager.getWebViewer().GetImageData(e._ImgManager.getUidByIndex(n)).then((function(e){return i.context.metadata=e&&e.metadata?e.metadata:{},i.initImage(e.oriData)})).then((function(){return i.changeContrast(r)})).then((function(){return i.getImage()})).then((function(t){t={src:t.imageData,imgType:k.D.MobileFuns.convertOutputType(t.imageType),dataType:"url",metadata:{imageData:t.imageData,width:t.imageWidth,height:t.imageHeight,bitDepth:8}};try{e._OnBitmapChanged(["10",""+o,4,e._ImgManager.getCurrentImageIndex(),e._ImgManager.count(),t])}catch(n){throw k.D.Errors.SystemExceptionError(e,n.message),0}})).then((function(){k.D.hideMask(),i.terminate()}),(function(t){throw k.D.hideMask(),t&&k.D.Errors.ChangeContrastFailed(e,t),i.terminate(),{code:e._errorCode,message:e._errorString}}))},u=function(e,t){var n=t[0],r=t[1],i=V(),o=e._ImgManager.convertClientIndexToServerId(n);return i.context={},k.D.detect.showMask(e),k.D.log("[Wasm]Change Brightness: value "+r),e._ImgManager.getWebViewer().GetImageData(e._ImgManager.getUidByIndex(n)).then((function(e){return k.D.log("[Wasm]Change Brightness: get original image data"),i.context.metadata=e&&e.metadata?e.metadata:{},i.initImage(e.oriData)})).then((function(){return k.D.log("[Wasm]Change Brightness: change brightness"),i.changeBrightness(r)})).then((function(){return i.getImage()})).then((function(t){k.D.log("[Wasm]Change Brightness: change brightness successfully"),t={src:t.imageData,imgType:k.D.MobileFuns.convertOutputType(t.imageType),dataType:"url",metadata:{imageData:t.imageData,width:t.imageWidth,height:t.imageHeight,bitDepth:8}};try{e._OnBitmapChanged(["10",""+o,4,e._ImgManager.getCurrentImageIndex(),e._ImgManager.count(),t])}catch(n){throw k.D.Errors.SystemExceptionError(e,n.message),0}})).then((function(){k.D.hideMask(),i.terminate()}),(function(t){throw k.D.hideMask(),t&&k.D.Errors.ChangeBrightnessFailed(e,t),i.terminate(),{code:e._errorCode,message:e._errorString}}))},t._saveImageCallback=function(e){var t,n,r,i=this;if(!k.D.isArray(e))return k.D.Errors.InvalidSourceFile(i),k.D.Promise.reject({code:i._errorCode,message:i._errorString});for(k.D.log("[Wasm]camera callback: save image"),t=k.D.Promise.resolve({aryData:e,curIndex:0,count:r=e.length}),n=0;n<r;n++)t=(t=t.then((function(e){var t,n=e.aryData[e.curIndex];if(e.bOneBit=!1,n){var r=n.iImageData;if(r instanceof Blob||r instanceof ArrayBuffer)return e.captureBlob=r,e;t=r.imageData,e.bOneBit=1==r.imageBitDepth}return t instanceof Blob||t instanceof ArrayBuffer?e.bOneBit&&i._bLocalService?w(t).then((function(t){return e.captureBlob=t.blobData,e})):(e.captureBlob=t,e):(k.I.Lib.Errors.InvalidSourceFile(i),k.D.log("[Wasm]camera callback: save image error - page "+e.curIndex+" source invalid."),k.I.Lib.Promise.reject({code:i._errorCode,message:i._errorString}))}))).then((function(t){var n,r=t.aryData[t.curIndex];return e&&r&&(n=r.file),k.D.log("[Wasm]camera callback: save image - page "+t.curIndex+" data ready"),new k.I.Lib.Promise((function(e,r){var o=t.captureBlob,a=-1,s=k.I.DWT.EnumDWT_ImageType;i._bLocalService?(k.I.Lib.isString(o.type)&&("application/pdf"==o.type?a=s.IT_PDF:"image/png"==o.type?a=s.IT_PNG:"image/jpeg"==o.type||"image/jpg"==o.type?a=s.IT_JPG:"image/bmp"==o.type?a=s.IT_BMP:"image/tiff"==o.type||"image/tif"==o.type?a=s.IT_TIF:"image/jp2"==o.type&&(a=s.IT_J2K)),i.__captureImage(o,a,(function(){k.D.log("[Wasm]camera callback: save image - page "+t.curIndex+" data saved from service"),t.curIndex=t.curIndex+1,t.captureBlob=null,e(t)}),(function(e,t){r({code:e,message:t})}))):(""==(s=i.GetCurrentDocumentName())&&(s=i._ImgManager.getWebViewer().GetDefaultFileName()),i._innerSendToMobile("LoadImageFromBinary",[o,!0,n,s,!0,t.bOneBit],0,(function(){k.D.log("[Wasm]camera callback: save image - page "+t.curIndex+" data saved"),t.curIndex=t.curIndex+1,t.captureBlob=null,e(t)}),(function(e,t){r({code:e,message:t})})))}))}));return t},t._insertImageCallback=function(e,t,n){var r=this,i=t.oriData,o=!0;if(i&&(i instanceof Blob||i instanceof ArrayBuffer||i instanceof Uint8Array)&&(o=!1),!t||o)throw k.I.Lib.Errors.InvalidSourceFile(r),k.D.log("[Wasm]camera callback: save image error - source invalid."),{code:r._errorCode,message:r._errorString};(i=t.customData)&&(o=i.oriBlob),k.D.log("[Wasm]camera callback: save image - data ready"),O++,i.imageId=O,r._ImgManager.insertImage(e,t,n),o=r._ImgManager.getWebViewer().GetUidByIndex(n),r._ImgManager.getView().innerInsertModel(O,o)},W._areaDetectCallback=function(e,t,n,r,i){var o=V();return k.D.log("[Wasm]camera callback: area detect"),o.initImage(e.imageData,e.rgba,e.imageWidth,e.imageHeight,e.bgra).then((function(e){return k.D.log("[Wasm]camera callback: image is ready"),o.src=e.srcBuffer,o.detectDocument(i,t,n,r)})).then((function(e){return k.D.log("[Wasm]camera callback: area detect successfully"),e.src=o.src,o.terminate(),o.src=null,e}),(function(e){k.D.closeLoadingMsg(),k.D.log("[Wasm]camera callback: area detect failed"),o.terminate();var t={};throw e&&e.code&&e.message?(t._errorString=e.message,t._errorCode=e.code):(t._errorString=e,k.D.Errors.DetectCallbackErr(t)),{code:t._errorCode,message:t._errorString}}))},W._perspectiveCallback=function(e,t){var n,r=V();return k.D.log("[Wasm]camera callback: perspective"),k.D.isArray(t)&&8==t.length?r.initImage(e.imageData,e.rgba,e.imageWidth,e.imageHeight,e.bgra).then((function(e){return k.D.log("[Wasm]camera callback: image is ready"),r.src=e.srcBuffer,r.perspective(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7])})).then((function(){k.D.log("[Wasm]camera callback: perspective successfully");var t=void 0,n=k.I.Enum_ImageType.IT_JPG,i=(e.imageBitDepth<=8&&(t=e.imageBitDepth,n=k.I.Enum_ImageType.IT_PNG),k.I.navInfo.bMac||k.I.navInfo.biPhone||k.I.navInfo.biPad);return r.getImage(85,!0,!1,t,e.imageXResolution,e.imageYResolution,!0,n,i)})).then((function(e){k.D.log("[Wasm]camera callback: filter process successfully");var t=r.src;return r.terminate(),r.src=null,{src:t,result:e}}),(function(e){k.D.log("[Wasm]camera callback: filter process failed"),k.D.closeLoadingMsg(),r.terminate();var t={};throw e&&e.code&&e.message?(t._errorString=e.message,t._errorCode=e.code):(t._errorString=e,k.D.Errors.PerspectiveCallback(t)),{code:t._errorCode,message:t._errorString}})):(k.D.Errors.InvalidParameterInCallback(n={}),k.D.Promise.reject({code:n._errorCode,message:n._errorString}))},W._convertToGrayScaleFilterCallback=function(e,t){var n=V();return k.D.log("[Wasm]camera callback: convert to gray scale filter"),n.initImage(e.imageData,e.rgba,e.imageWidth,e.imageHeight,e.bgra).then((function(e){var r;return k.D.log("[Wasm]camera callback: image is ready"),n.src=e.srcBuffer,t&&(r=t.level),n.toGrayscale(r)})).then((function(){k.D.log("[Wasm]camera callback: gray scale successfully");var t=void 0,r=k.I.Enum_ImageType.IT_JPG,i=(e.imageBitDepth<=8&&(t=e.imageBitDepth,r=k.I.Enum_ImageType.IT_PNG),k.I.navInfo.bMac||k.I.navInfo.biPhone||k.I.navInfo.biPad);return n.getImage(85,!0,!1,t,e.imageXResolution,e.imageYResolution,!0,r,i)})).then((function(e){k.D.log("[Wasm]camera callback: filter process successfully");var t=n.src;return n.terminate(),n.src=null,{src:t,result:e}}),(function(e){k.D.log("[Wasm]camera callback: filter process failed"),k.D.closeLoadingMsg(),n.terminate();var t={};throw k.D.Errors.ConvertToGrayScaleFilterCallbackErr(t,e),{code:t._errorCode,message:t._errorString}}))},W._saveTonerFilterCallback=function(e,t){return W._convertToBWScaleFilterCallback(e,t,!0)},W._convertToBWScaleFilterCallback=function(e,t,n){var r=V();return k.D.log(n?"[Wasm]camera callback: save toner filter":"[Wasm]camera callback: convert to BW scale filter"),r.initImage(e.imageData,e.rgba,e.imageWidth,e.imageHeight,e.bgra).then((function(e){var i;return k.D.log("[Wasm]camera callback: image is ready"),r.src=e.srcBuffer,t&&(i=t.level),r.toBinary(!!n,i)})).then((function(){return r.getImage(85,!0,!1,1,e.imageXResolution,e.imageYResolution,!0,k.I.Enum_ImageType.IT_PNG,k.I.navInfo.bMac||k.I.navInfo.biPhone||k.I.navInfo.biPad)})).then((function(e){k.D.log("[Wasm]camera callback: filter process successfully");var t=r.src;return r.terminate(),r.src=null,{src:t,result:e}}),(function(e){k.D.log("[Wasm]camera callback: filter process failed"),k.D.closeLoadingMsg(),r.terminate();var t={};throw n?k.D.Errors.SaveTonerCallbackErr(t,e):k.D.Errors.ConvertToBWScaleFilterCallbackErr(t,e),{code:t._errorCode,message:t._errorString}}))},W._cleanFilterCallback=function(e,t){var n=V();return k.D.log("[Wasm]camera callback: remove shadow filter"),n.initImage(e.imageData,e.rgba,e.imageWidth,e.imageHeight,e.bgra).then((function(e){var r,i;return k.D.log("[Wasm]camera callback: image is ready"),t&&(r=t.level,i=t.alpha),n.src=e.srcBuffer,n.removeShadow(r,i)})).then((function(){var t=void 0,r=k.I.Enum_ImageType.IT_JPG,i=(e.imageBitDepth<=8&&(t=e.imageBitDepth,r=k.I.Enum_ImageType.IT_PNG),k.I.navInfo.bMac||k.I.navInfo.biPhone||k.I.navInfo.biPad);return n.getImage(85,!0,!1,t,e.imageXResolution,e.imageYResolution,!0,r,i)})).then((function(e){k.D.log("[Wasm]camera callback: remove shadow successfully");var t=n.src;return n.terminate(),n.src=null,{src:t,result:e}}),(function(e){k.D.log("[Wasm]camera callback: remove shadow failed"),k.D.closeLoadingMsg(),n.terminate();var t={};throw k.D.Errors.RemoveShadowFilterCallbackErr(t,e),{code:t._errorCode,message:t._errorString}}))},W._enhanceAndSharpenFilterCallback=function(e,t){var n=V();return k.D.log("[Wasm]camera callback: enhance and sharpen filter"),n.initImage(e.imageData,e.rgba,e.imageWidth,e.imageHeight,e.bgra).then((function(e){var r;return k.D.log("[Wasm]camera callback: image is ready"),n.src=e.srcBuffer,t&&(r=t.level),n.enhanceAndSharpenImage(r)})).then((function(){var t=void 0,r=k.I.Enum_ImageType.IT_JPG,i=(e.imageBitDepth<=8&&(t=e.imageBitDepth,r=k.I.Enum_ImageType.IT_PNG),k.I.navInfo.bMac||k.I.navInfo.biPhone||k.I.navInfo.biPad);return n.getImage(85,!0,!1,t,e.imageXResolution,e.imageYResolution,!0,r,i)})).then((function(e){k.D.log("[Wasm]camera callback: enhance and sharpen successfully");var t=n.src;return n.terminate(),n.src=null,{src:t,result:e}}),(function(e){k.D.log("[Wasm]camera callback: enhance and sharpen failed"),k.D.closeLoadingMsg(),n.terminate();var t={};throw k.D.Errors.EnhanceAndSharpenFilterCallbackErr(t,e),{code:t._errorCode,message:t._errorString}}))},W._brightenFilterCallback=function(e,t){var n=V();return k.D.log("[Wasm]camera callback: brighten filter"),n.initImage(e.imageData,e.rgba,e.imageWidth,e.imageHeight,e.bgra).then((function(e){var r;return k.D.log("[Wasm]camera callback: image is ready"),n.src=e.srcBuffer,t&&(r=t.level),n.brighten(r)})).then((function(){var t=void 0,r=k.I.Enum_ImageType.IT_JPG,i=(e.imageBitDepth<=8&&(t=e.imageBitDepth,r=k.I.Enum_ImageType.IT_PNG),k.I.navInfo.bMac||k.I.navInfo.biPhone||k.I.navInfo.biPad);return n.getImage(85,!0,!1,t,e.imageXResolution,e.imageYResolution,!0,r,i)})).then((function(e){k.D.log("[Wasm]camera callback: brighten successfully");var t=n.src;return n.terminate(),n.src=null,{src:t,result:e}}),(function(e){k.D.log("[Wasm]camera callback: brighten failed"),k.D.closeLoadingMsg(),n.terminate();var t={};throw k.D.Errors.BrightenFilterCallbackErr(t,e),{code:t._errorCode,message:t._errorString}}))},W._getBlurryScore=function(e){var t=V();return k.D.log("[Wasm]camera callback: get blurry score filter"),t.initImage(e.imageData,e.rgba,e.imageWidth,e.imageHeight,e.bgra).then((function(e){return k.D.log("[Wasm]camera callback: image is ready"),t.src=e.srcBuffer,t.getBlurryScore()})).then((function(e){k.D.log("[Wasm]camera callback: get blurry score successfully");var n=t.src;return t.terminate(),t.src=null,{src:n,result:100<=e}}),(function(e){k.D.log("[Wasm]camera callback: get blurry score failed"),k.D.closeLoadingMsg(),t.terminate();var n={};throw k.D.Errors.GetBlurryScoreErr(n,e),{code:n._errorCode,message:n._errorString}}))},W._imageDataToBlob=function(e,t,n,r,i,o){k.D.log("[Wasm]ImageDataToBlob: init image");var a={source:{},output:{}};return k.D.mix(a.source,e),t&&(t<0?t=t%360+360:360<=t&&(t%=360),0!=t&&(a.source.angle=t)),n&&(a.polygon=n),r&&n&&n.points&&(a.doPerspective=!0),!1!==i&&(a.output.orgImage=k.D.isObject(i)?i:{quality:85,returnType:k.I.Enum_ImageType.IT_JPG,returnBlob:!0}),!1!==o&&(a.output.previewImage=k.D.isObject(o)?o:{quality:85,width:200,height:200,returnType:k.I.Enum_ImageType.IT_JPG,returnBlob:!0,nInterplationMethod:5}),k.I.ImageProcWrapper.createImage(a)},W._freeCallback=function(){B&&(B.terminate(),B=null)},t._checkWebcamWasmLicense=function(){return k.D.License.checkProductKey(this,{Webcam:!0},!0)&&k.D.License.checkProductKey(this,{Webcam:!0,Wasm:!0},!0)?{errorCode:0}:k.I.DWT.licenseException},t.GetRawDataAsync=function(e){var t,n=this;return n._resetErr(),n._isMobileMode()?(e=x()(e),isNaN(e)?(k.D.Errors.InvalidIndex(n),k.D.Promise.reject({code:n._errorCode,message:n._errorString})):e<0||e>=n._ImgManager.count()?(k.D.Errors.IndexOutOfRange(n),k.D.Promise.reject({code:n._errorCode,message:n._errorString})):(t=n.Viewer&&n.Viewer._webViewer?n.Viewer._webViewer.GetUidByIndex(e):t)?n.Viewer._webViewer.GetImageData(t).then((function(e){var t={displayImage:{},documentData:{polygon:[],originImage:{}}};return e.oriData&&(t.displayImage.data=e.oriData),e.metadata&&(e.metadata.bitDepth&&(t.displayImage.bitDepth=e.metadata.bitDepth),e.metadata.height&&(t.displayImage.height=e.metadata.height),e.metadata.width&&(t.displayImage.width=e.metadata.width),e.metadata.resolutionX&&(t.displayImage.resolutionX=e.metadata.resolutionX),e.metadata.resolutionY&&(t.displayImage.resolutionY=e.metadata.resolutionY)),e.customData&&(t.documentData.angle=k.D.isNumber(e.customData.angle)?e.customData.angle:0,e.customData.detectArea&&(t.documentData.polygon.push({x:e.customData.detectArea[0],y:e.customData.detectArea[1]}),t.documentData.polygon.push({x:e.customData.detectArea[2],y:e.customData.detectArea[3]}),t.documentData.polygon.push({x:e.customData.detectArea[4],y:e.customData.detectArea[5]}),t.documentData.polygon.push({x:e.customData.detectArea[6],y:e.customData.detectArea[7]})),e.customData.filterValue&&(t.documentData.filterValue=e.customData.filterValue),e.customData.oriBlob&&(e.customData.oriBlob.imageBitDepth&&(t.documentData.originImage.bitDepth=e.customData.oriBlob.imageBitDepth),e.customData.oriBlob.imageData&&(t.documentData.originImage.data=e.customData.oriBlob.imageData),e.customData.oriBlob.imageHeight&&(t.documentData.originImage.height=e.customData.oriBlob.imageHeight),e.customData.oriBlob.imageWidth&&(t.documentData.originImage.width=e.customData.oriBlob.imageWidth),e.customData.oriBlob.imageXResolution&&(t.documentData.originImage.resolutionX=e.customData.oriBlob.imageXResolution),e.customData.oriBlob.imageYResolution&&(t.documentData.originImage.resolutionY=e.customData.oriBlob.imageYResolution))),t})):R().resolve(null)):n._serviceNotSupportAsync("GetRawDataAsync")},t.SetRawDataAsync=function(e,t){return(r=this)._resetErr(),r._isMobileMode()?(e=x()(e),isNaN(e)?(k.D.Errors.InvalidIndex(r),k.D.Promise.reject({code:r._errorCode,message:r._errorString})):e<0||e>=r._ImgManager.count()?(k.D.Errors.IndexOutOfRange(r),k.D.Promise.reject({code:r._errorCode,message:r._errorString})):r.Viewer&&r.Viewer._webViewer&&(e=r.Viewer._webViewer.GetUidByIndex(e))&&(r=r.Viewer._webViewer.mydvs)?(n=t.displayImage.data,delete t.displayImage.data,n={oriData:n,metadata:t.displayImage,customData:{}},t.documentData&&(n.customData.angle=k.D.isNumber(t.documentData.angle)?t.documentData.angle:0,t.documentData.polygon&&4==t.documentData.polygon.length&&(n.customData.detectArea=[t.documentData.polygon[0].x,t.documentData.polygon[0].y,t.documentData.polygon[1].x,t.documentData.polygon[1].y,t.documentData.polygon[2].x,t.documentData.polygon[2].y,t.documentData.polygon[3].x,t.documentData.polygon[3].y]),t.documentData.filterValue&&(n.customData.filterValue=t.documentData.filterValue),t.documentData.originImage&&(n.customData.oriBlob={},t.documentData.originImage.bitDepth&&(n.customData.oriBlob.imageBitDepth=t.documentData.originImage.bitDepth),t.documentData.originImage.data&&(n.customData.oriBlob.imageData=t.documentData.originImage.data),t.documentData.originImage.height&&(n.customData.oriBlob.imageHeight=t.documentData.originImage.height),t.documentData.originImage.width&&(n.customData.oriBlob.imageWidth=t.documentData.originImage.width),n.customData.oriBlob.imageXResolution&&(n.customData.oriBlob.imageXResolution=t.documentData.originImage.resolutionX),t.documentData.originImage.resolutionY&&(n.customData.oriBlob.imageYResolution=t.documentData.originImage.resolutionY))),t=r.DataControl.updateSync(e,n,!0),R().resolve(t)):R().resolve(null)):r._serviceNotSupportAsync("GetRawDataAsync");var n,r},t.GetImageDataAsync=function(e){var t;return(t=this.Viewer&&this.Viewer._webViewer?this.Viewer._webViewer.GetUidByIndex(e):t)?this.Viewer._webViewer.GetImageData(t):R().resolve(null)},t.SetCustomDataAsync=function(e,t){var n,r=this;return(n=r.Viewer&&r.Viewer._webViewer?r.Viewer._webViewer.GetUidByIndex(e):n)&&t?r.Viewer._webViewer.GetImageData(n).then((function(e){return e.customData=t,r.Viewer._webViewer.UpdateImageData(n,e)})):R().resolve(!1)},w=function(e){var t=N();return t.saveImage(e,k.I.DWT.EnumDWT_ImageType.IT_PNG,85,k.I.Enum_ReturnType.RT_BINARY,!0).then((function(e){return t&&t.terminate(),{blobData:e.imageData,type:"png",MD5:e.MD5}}),(function(e){throw t&&t.terminate(),{code:_this._errorCode,message:_this._errorString}}))}},5719:function(e,t,n){n.r(t),t=n(5683);var r=n.n(t),i=(t=n(4579),n.n(t)),o=(t=n(7711),n.n(t)),a=(t=n(1006),n.n(t)),s=(t=n(3662),n.n(t)),u=n(1695),c=n(1188),l=n(3887),d=n(9158),h=u.D.html5.Funs;(t=u.D.html5.STwain.prototype).SetCookie=function(e){return this._cookie=e,document.cookie=e,!0},t.LoadImageFromBase64Binary=function(e,t,n,i){var o=this;if(o._resetErr(),!o._isValid())return!1;if(!e)return u.D.Errors.InvalidParameter(o),u.D.isFunction(i)&&i(o.ErrorCode,o.ErrorString),!1;var a=!1,s="LoadImageFromBase64Binary",d=t,g=1;if((f=e)instanceof u.I.Lib.html5.Base64Result&&u.D.isFunction(f.getLength)&&u.D.isFunction(f.getData)&&(f=f.getData(0,f.getLength())),(d=u.D.isString(f)?-1!=r()(f).call(f,"data:image/bmp")?0:-1!=r()(f).call(f,"data:image/jpeg")?1:-1!=r()(f).call(f,"data:image/tif")?2:-1!=r()(f).call(f,"data:image/png")?3:-1!=r()(f).call(f,"data:application/pdf")?4:-1!=r()(f).call(f,"data:image/jp2")?14:(e=f.substr(0,64),e=u.I.Lib.base64.decode(e,!0),(0,l.Ho)(e)):d)!=u.I.DWT.EnumDWT_ImageType.IT_BMP&&d!=u.I.DWT.EnumDWT_ImageType.IT_JPG&&d!=u.I.DWT.EnumDWT_ImageType.IT_TIF&&d!=u.I.DWT.EnumDWT_ImageType.IT_PNG&&d!=u.I.DWT.EnumDWT_ImageType.IT_PDF&&d!=u.I.DWT.EnumDWT_ImageType.IT_J2K&&(d=-1),!u.D.License.checkProductKey(o,{Core:!0}))return u.D.isFunction(i)&&i(o.ErrorCode,o.ErrorString),!1;if(!u.D.License.checkPDFProductKeyWhenNeeds(o,d))return u.D.isFunction(i)&&i(o.ErrorCode,o.ErrorString),!1;if(""==(e=o.GetCurrentDocumentName())&&(e=o._ImgManager.getWebViewer().GetDefaultFileName()),o._isMobileMode()){u.D.cancelFrome=2,u.D.showProgress(o,s,!0),o.__bLoadingImage=!0;var f,m,p=f;if(u.D.isString(f)){if(0<=r()(f).call(f,"blob:")||0<=r()(f).call(f,"data:")||(f=[m=d==u.I.DWT.EnumDWT_ImageType.IT_PNG?"data:image/png;base64,":d==u.I.DWT.EnumDWT_ImageType.IT_JPG?"data:image/jpeg;base64,":d==u.I.DWT.EnumDWT_ImageType.IT_TIF?"data:image/tif;base64,":d==u.I.DWT.EnumDWT_ImageType.IT_PDF?"data:application/pdf;base64,":d==u.I.DWT.EnumDWT_ImageType.IT_BMP?"data:image/bmp;base64,":d==u.I.DWT.EnumDWT_ImageType.IT_J2K?"data:image/jp2;base64,":"data:application/octet-stream;base64,",f].join("")),0<=r()(f).call(f,"data:")&&0==(p=u.D.MobileFuns.dataURLtoBlob(f)))return u.I.Lib.closeProgress(o,s),o.__bLoadingImage=!1,u.D.Errors.ConvertFromBase64Failed(o),u.D.isFunction(i)&&i(o.ErrorCode,o.ErrorString,f,t),!1}else f instanceof ArrayBuffer&&(m="image/png",d==u.I.DWT.EnumDWT_ImageType.IT_PNG?m="image/png":d==u.I.DWT.EnumDWT_ImageType.IT_JPG?m="image/jpeg":d==u.I.DWT.EnumDWT_ImageType.IT_TIF?m="image/tiff":d==u.I.DWT.EnumDWT_ImageType.IT_PDF?m="application/pdf":d==u.I.DWT.EnumDWT_ImageType.IT_BMP?m="image/bmp":d==u.I.DWT.EnumDWT_ImageType.IT_J2K&&(m="image/jp2"),p=new Blob([f],{type:m}));return m=o._innerSendToMobile("LoadImageFromBinary",(0,c.An)(p,!1,null,e),0,(function(){var e;return u.I.Lib.closeProgress(o,s),o.__bLoadingImage=!1,o._isBindViewer()&&0<=(e=o._ImgManager.getCurrentImageIndex())&&o.OnRefreshUI(e),n&&n(f,t),!0}),(function(){u.I.Lib.closeProgress(o,s),o.__bLoadingImage=!1,u.D.isFunction(i)&&i(o.ErrorCode,o.ErrorString,f,t)})),!0}if(u.D.isFunction(n)&&(a=!0),u.D.isString(f)&&-1!=r()(f).call(f,"base64,")&&(f=f.substr(r()(f).call(f,"base64,")+7)),p=o.__GetLoadEventsNum(),a){if(h.isServerInvalid(o))return u.D.isFunction(i)&&i(o.ErrorCode,o.ErrorString,f,t),!1;u.D.cancelFrome=2,u.D.showProgress(o,s,!0),o.__bLoadingImage=!0,m=o._innerSend(s,(0,c.dv)(f,d,p,g=0),!0,(function(){var e;return u.I.Lib.closeProgress(o,s),o.__bLoadingImage=!1,o._isBindViewer()&&0<=(e=o._ImgManager.getCurrentImageIndex())&&o.OnRefreshUI(e),n&&n(f,t),!0}),(function(){u.I.Lib.closeProgress(o,s),o.__bLoadingImage=!1,u.D.isFunction(i)&&i(o.ErrorCode,o.ErrorString,f,t)}))}else m=o.__innerLoadImageFun(s,(0,c.dv)(f,d,p,g),g,e);return m},t.SaveSelectedImagesToBytes=function(e,t){return u.D.Errors.HTML5NotSupport(this),!1},t.LoadImageFromBytes=function(e,t,n){return u.D.Errors.HTML5NotSupport(this),!1},t.UnregisterEvent=function(e,t){return this._resetErr(),!!this._isValid()&&!(this[["__",e].join("")]=null)},t.SetCancel=function(e,t){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("SetCancel",t):this._innerSend("SetCancel",null,!0,e,t))},t._asyncSetImageWidth=function(e,t,n,r){var a=this,s=o()(e);return a._innerSendToMobile("SetImageWidth",(0,c.An)(s,t),0,(function(){h.refreshImageAfterInvokeFun(a,e),u.D.isFunction(n)&&i()(n,30)}),(function(){u.D.isFunction(r)&&r(a.ErrorCode,a.ErrorString)}))},t.SetImageWidth=function(e,t,n,r){var i=this;return i._resetErr(),!!i._isValid()&&(e=o()(e),isNaN(e)?(u.D.Errors.InvalidIndex(i),u.D.isFunction(r)&&r(i.ErrorCode,i.ErrorString),!1):e<0||e>=i._ImgManager.count()?(u.D.Errors.IndexOutOfRange(i),u.D.isFunction(r)&&r(i.ErrorCode,i.ErrorString),!1):u.D.isUndefined(t)?(u.D.Errors.InvalidParameter(i),u.D.isFunction(r)&&r(i.ErrorCode,i.ErrorString),!1):i._isMobileMode()?i._asyncSetImageWidth(e,t,n,r):-1==(e=i._ImgManager.convertClientIndexToServerId(e))?(u.D.Errors.IndexOutOfRange(i),u.D.isFunction(r)&&r(i.ErrorCode,i.ErrorString),!1):((e=1==i._innerFun("SetImageWidth",(0,c.dv)(e,t)))?u.D.isFunction(n)&&n():u.D.isFunction(r)&&r(i.ErrorCode,i.ErrorString),e))},t.HTTPDownloadStreamThroughPost=function(e,t){return u.D.Errors.HTML5NotSupport(this),!1},t.HTTPUploadStreamThroughPost=function(e,t,n,r,i){return u.D.Errors.HTML5NotSupport(this),!1},t.HTTPUploadThroughPutDirectly=function(e,t,n,r,i){return u.D.Errors.HTML5NotSupport(this),!1},t.SetCustomDSDataEx=function(e){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("SetCustomDSDataEx"):this._innerFun("SetCustomDSDataEx",(0,c.dv)(e)))},t.SetCustomDSData=function(e){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("SetCustomDSData"):(e=h.replaceLocalFilename(e),this._innerFun("SetCustomDSData",(0,c.dv)(e))))},t.GetCustomDSDataEx=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("GetCustomDSDataEx"):this._innerFun("GetCustomDSDataEx"))},t.GetCustomDSData=function(e){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("GetCustomDSData"):(e=h.replaceLocalFilename(e),this._innerFun("GetCustomDSData",(0,c.dv)(e))))},t._asyncConvertToBW=function(e,t,n){var r=this,i=o()(e);return r._innerSendToMobile("ConvertToBWScale",(0,c.An)(i),0,(function(){h.refreshImageAfterInvokeFun(r,e),u.D.isFunction(t)&&t()}),(function(){u.D.isFunction(n)&&n(r.ErrorCode,r.ErrorString)}))},t.ConvertToBW=function(e,t,n){var r=this;if(r._resetErr(),!r._isValid())return!1;if(!u.D.License.checkProductKey(r,{Core:!0}))return u.D.isFunction(n)&&n(r.ErrorCode,r.ErrorString),!1;var i=o()(e);return isNaN(i)?(u.D.Errors.InvalidIndex(r),u.D.isFunction(n)&&n(r.ErrorCode,r.ErrorString),!1):i<0||i>=r._ImgManager.count()?(u.D.Errors.IndexOutOfRange(r),u.D.isFunction(n)&&n(r.ErrorCode,r.ErrorString),!1):r._isMobileMode()?r._asyncConvertToBW(i,t,n):((i=r.ChangeBitDepth(e,1,!0))?u.D.isFunction(t)&&t():u.D.isFunction(n)&&n(r.ErrorCode,r.ErrorString),i)},t.LoadImageFromBinary=function(e,t,n){var r,i=this;if(!u.D.License.checkProductKey(i,{Core:!0}))return u.D.isFunction(n)&&n(i.ErrorCode,i.ErrorString),!1;if(!e||""==e)return u.D.Errors.ParameterCannotEmpty(i),u.D.isFunction(n)&&n(i.ErrorCode,i.ErrorString),!1;var o,a,s,l=(l=(l=e.currentFileName)||i.GetCurrentDocumentName())||i._ImgManager.getWebViewer().GetDefaultFileName();if(e instanceof FileList){if(1==e.length)return e[0].currentFileName=l,i.LoadImageFromBinary(e[0],t,n);if(1<e.length){for(var d=0;d<e.length;d++)e[d].currentFileName=l,u.D.asyncQueue.pushToDo(i,"LoadImageFromBinary",[e[d],t,n]);return u.D.asyncQueue.start(),!0}return u.D.Errors.ParameterCannotEmpty(i),u.D.isFunction(n)&&n(i.ErrorCode,i.ErrorString),!1}return window.ReadableStream&&e instanceof ReadableStream?r=new Response(e):window.Response&&e instanceof Response&&(r=e),i._bLocalService?r?r.arrayBuffer().then((function(e){e=new Blob([e]),i.__LoadImageFromBytes(e,-1,"",!0,t,n)})):(((o=e)instanceof ArrayBuffer||o instanceof Uint8Array)&&((o=new Blob([e])).currentFileName=e.currentFileName),a=-1,s=u.I.DWT.EnumDWT_ImageType,u.D.isString(o.type)&&("application/pdf"==o.type?a=s.IT_PDF:"image/png"==o.type?a=s.IT_PNG:"image/jpeg"==o.type||"image/jpg"==o.type?a=s.IT_JPG:"image/bmp"==o.type?a=s.IT_BMP:"image/tiff"==o.type||"image/tif"==o.type?a=s.IT_TIF:"image/jp2"==o.type&&(a=s.IT_J2K)),i.__LoadImageFromBytes(o,a,"",!0,t,n)):r?r.arrayBuffer().then((function(e){i._innerSendToMobile("LoadImageFromBinary",(0,c.An)(e,!1,null,l),0,t,n)})):i._innerSendToMobile("LoadImageFromBinary",(0,c.An)(e,!1,null,l),0,t,n),!0},t.EnableSourceUI=function(e,t){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("EnableSourceUI",t):this._innerSend("EnableSourceUI",null,!0,e,t))},t.getCapabilities=function(e,t){var n=this;return n._bLocalService?n._innerFunRaw("GetCapabilities",null,!0,!1,!1,(function(r){var i,o;0<r.length&&(o=r[0]);try{i=u.D.isString(o)?(o=u.D.removeNonPrintableChar(o),o=a()(u.D).call(u.D,o,"\\\\","\\\\"),JSON.parse(o)):{}}catch(s){return n._errorCode=-2302,n._errorString=s,void(u.D.isFunction(t)&&t(n.ErrorCode,n.ErrorString))}0==i.errorCode?u.D.isFunction(e)&&e(i.response):(n._errorCode=i.errorCode,n._errorString=i.errorString,u.D.isFunction(t)&&t(n.ErrorCode,n.ErrorString))}),t):n._mobileNotSupport("GetCapabilities",t)},t.setCapabilities=function(e,t,n){return this._bLocalService?u.D.isObject(e)&&!u.D.isArray(e)?(e=["[",u.D.stringify(e),"]"].join(""),this._innerSend("SetCapabilities",e,0,(function(e){u.D.isFunction(t)&&t(e)}),n)):(u.D.Errors.InvalidParameter(this),u.D.isFunction(n)&&n(this.ErrorCode,this.ErrorString),!1):this._mobileNotSupport("SetCapabilities",n)},t.BindViewer=function(e){var t=e;return u.I.DWT.UseDefaultViewer?(u.D.isString(e)&&(t=u.D.get(e)),this.config.container!=t&&(this.config.container=t,this.config.ifBindViewer=!0,u.D.html5.ui.init(this,this.config)),t=this._ImgManager.BindView(e),this._bBindViewer=!0,this.config.ifBindViewer=!1,t):(u.D.Errors.CannotBindViewerWhenNoViewerJS(this),!1)},t.UnbindViewer=function(){return this.__funResize&&(u.D.removeEventListener(window,"resize",this.__funResize),this.__funResize=!1),this._bBindViewer=!1,this.config.container=null,!!this._ImgManager&&this._ImgManager.UnbindView()},t.GetIfShowVideoContainer=function(){return this._ImgManager.GetIfShowVideoContainer()},t.ShowVideoContainer=function(e){return this._ImgManager.ShowVideoContainer(e)},t.UpdateVideoContainer=function(e){return this._ImgManager.UpdateVideoContainer(e)},t.ChangeBitDepth=function(e,t,n){var r=this;return r._resetErr(),!!r._isValid()&&(r._isMobileMode()?r._mobileNotSupport("ChangeBitDepth"):(e=o()(e),isNaN(e)?(u.D.Errors.InvalidIndex(r),!1):e<0||e>=r._ImgManager.count()||-1==(e=r._ImgManager.convertClientIndexToServerId(e))?(u.D.Errors.IndexOutOfRange(r),!1):r._innerFun("ChangeBitDepth",(0,c.dv)(e,t,n))))},t._asyncConvertToGrayScale=function(e,t,n){var r=this,a=function(){u.D.isFunction(n)&&n(r.ErrorCode,r.ErrorString)};if(!u.D.License.checkProductKey(r,{Core:!0}))return a(),!1;var s=o()(e);return r._innerSendToMobile("ConvertToGrayScale",(0,c.An)(s),0,(function(){h.refreshImageAfterInvokeFun(r,e),u.D.isFunction(t)&&i()(t,30)}),a)},t.ConvertToGrayScale=function(e,t,n){var r=this;if(r._resetErr(),!r._isValid())return!1;if(e=o()(e),isNaN(e))return u.D.Errors.InvalidIndex(r),u.D.isFunction(n)&&n(r.ErrorCode,r.ErrorString),!1;if(e<0||e>=r._ImgManager.count())return u.D.Errors.IndexOutOfRange(r),u.D.isFunction(n)&&n(r.ErrorCode,r.ErrorString),!1;if(r._isMobileMode())return r._asyncConvertToGrayScale(e,t,n);var i=r._ImgManager.convertClientIndexToServerId(e);return-1==i?(u.D.Errors.IndexOutOfRange(r),u.D.isFunction(n)&&n(r.ErrorCode,r.ErrorString),!1):((i=1==r._innerFun("ConvertToGrayScale",(0,c.dv)(i)))?(h.refreshImageAfterInvokeFun(r,e),u.D.isFunction(t)&&t()):u.D.isFunction(n)&&n(r.ErrorCode,r.ErrorString),i)},t.ClearTiffCustomTag=function(){var e;return this._resetErr(),!!this._isValid()&&(s()(e=this._aryTiffTag).call(e,0,this._aryTiffTag.length),!!this._isMobileMode()||this._innerFun("ClearTiffCustomTag"))},t.SetTiffCustomTag=function(e,t,n){var r=this;if(r._resetErr(),!r._isValid())return!1;if(u.D.isUndef(e)||u.D.isUndef(t))return u.D.Errors.InvalidParameter(r),!1;var i=+e,o=u.D.isString(t)?a()(u.D).call(u.D,t,'"','\\"'):t;if(i<=0||2147483647<i)return u.D.Errors.InvalidTiffTagError(r),!1;var s,l=0,d=!1,h=r._aryTiffTag.length;for(l=0;l<h;l++)(s=r._aryTiffTag[l]).tag==i&&(s.Content=t,s.UseBase64Encoding=n,d=!0);return!d&&32<=h?(u.D.Errors.TiffTagCountExceedError(r),!1):r._isMobileMode()?(d||r._aryTiffTag.push({tag:e,content:t,UseBase64Encoding:n}),!0):r._innerFun("SetTiffCustomTag",(0,c.dv)(i,o,n))},t.IsBlankImage=function(e){var t=this;return t._resetErr(),!!t._isValid()&&(t._isMobileMode()?t._mobileNotSupport("IsBlankImage"):(e=o()(e),isNaN(e)?(u.D.Errors.InvalidIndex(t),!1):e<0||e>=t._ImgManager.count()||-1==(e=t._ImgManager.convertClientIndexToServerId(e))?(u.D.Errors.IndexOutOfRange(t),!1):t._innerFun("IsBlankImage",(0,c.dv)(e,!1))))},t.IsBlankImageExpress=function(e){var t=this;return t._resetErr(),!!t._isValid()&&(t._isMobileMode()?t._mobileNotSupport("IsBlankImageExpress"):(e=o()(e),isNaN(e)?(u.D.Errors.InvalidIndex(t),!1):e<0||e>=t._ImgManager.count()||-1==(e=t._ImgManager.convertClientIndexToServerId(e))?(u.D.Errors.IndexOutOfRange(t),!1):t._innerFun("IsBlankImage",(0,c.dv)(e,!0))))},t.SetOpenSourceTimeout=function(e){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("SetOpenSourceTimeout"):this._innerFun("SetOpenSourceTimeout",(0,c.dv)(e)))},t.GetImageURL=function(e,t,n,r,i){var a=this;if(a._resetErr(),!a._isValid())return!1;if(a._isMobileMode()){if(!u.D.isFunction(t))return a._mobileNotSupport("GetImageURL");a._ImgManager.getWebViewer().GetImageData(a._ImgManager.getWebViewer().GetUidByIndex(e)).then((function(e){t(e.oriData)}),(function(e){n(e.message)}))}var s=o()(t),c=o()(n),l=(r=r?(l="","dwt://"):(l=a.httpUrl,"dwt/"),[l,r,u.D.product.getDWTPrefix(),u.D.product.getServerVersionInfo(),"/img?id=",a.clientId]);if(u.D.isUndefined(e)||null===e)return u.D.Errors.IndexNullOrUndefined(a),"";if(i)l.push("&index=-1&width=-1&height=-1&webcam="),l.push(i);else{if(e=o()(e),isNaN(e))return u.D.Errors.InvalidIndex(a),"";if(e<-1||e>=a._ImgManager.count())return u.D.Errors.IndexOutOfRange(a),"";if(-1==(r=a._ImgManager.convertClientIndexToServerId(e)))return"";l.push("&index="),l.push(r),0<s&&0<c&&(l.push("&width="),l.push(s),l.push("&height="),l.push(c))}return l.push("&t="),l.push((new Date).getTime()),l.join("")},t.GetImagePartURL=function(e,t,n){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("GetImagePartURL"):(e=o()(e),isNaN(e)?(u.D.Errors.InvalidIndex(this),""):e<0||e>=this._ImgManager.count()?(u.D.Errors.IndexOutOfRange(this),""):this.GetImageURL(e,t,n,!0)))},t.SetLanguage=function(e){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("SetLanguage"):this._innerFun("SetLanguageForSecurity",(0,c.dv)(e)))},t._wasmGetLicenseInfo=function(e,n){var r=this;return r._innerSendToMobile("GetLicenseInfo",(0,c.An)(),0,(function(i){if(i)if(i.exception)n&&n(i.exception);else{if(r.__licenseInfo=(0,d.T)(i),u.D.detect.wasmScriptLoaded&&!u.D.detect.wasmPdfReaderLoaded)try{u.I.WasmEnv.loadPdfReader(),u.D.detect.wasmPdfReaderLoaded=!0}catch(t){}e&&e(r.__licenseInfo)}else n&&n()}),n)},t.GetLicenseInfo=function(e,n){var r=this;if(r.__licenseInfo)u.D.isFunction(e)&&e(r.__licenseInfo);else{if(r._isMobileMode())return r._wasmGetLicenseInfo(e,n);if(h.isHttpServerInvalid(r))return!1;r._innerFunRaw("GetLicenseInfo",null,!0,!1,!0,(function(i){if(i)if(i.exception)u.D.isFunction(n)&&n(i.exception);else{if(r.__licenseInfo=(0,d.T)(i),u.D.detect.wasmScriptLoaded&&!u.D.detect.wasmPdfReaderLoaded)try{u.I.WasmEnv.loadPdfReader(),u.D.detect.wasmPdfReaderLoaded=!0}catch(t){}u.D.isFunction(e)&&e(r.__licenseInfo)}else u.D.isFunction(n)&&n()}),n)}return!0},t.IndexToImageID=function(e){return this._resetErr(),!!this._isValid()&&(e=o()(e),isNaN(e)?(u.D.Errors.InvalidIndex(this),-1):e<0||e>=this._ImgManager.count()?(u.D.Errors.IndexOutOfRange(this),-1):(e=this._ImgManager.convertClientIndexToServerId(e),this.objImageIndexManager.convertServerIdToGuid(e)))},t.ImageIDToIndex=function(e){var t=-1;return this._resetErr(),!!this._isValid()&&(-1==(t=0<(e=this.objImageIndexManager.convertGuidToServerId(e))?this._ImgManager.convertServerIdToClientIndex(e):t)&&u.D.Errors.InvalidImageID(this),t)},t._setProductKeyV2=function(e){var t=this;if(t._resetErr(),!t._isValid())return!1;if(h.isHttpServerInvalid(t))return u.D.Promise.reject({code:t._errorCode,message:t._errorString});if(!u.D.isString(e)||"******"==e)return u.D.Errors.LicenseEmptyOrInvalid(t),u.D.Promise.reject({code:t._errorCode,message:t._errorString});var n,r=u.I.DWT.ProductKey;return(n=(n=t._innerFunRawV2("ProductKey",(0,c.dv)(e))).then((function(e){if(e){if(void 0!==e.exception&&void 0!==e.description)throw t._errorCode=e.exception,t._errorString=e.description,u.I.DWT.ProductKey=r,n.context=null,{code:t._errorCode,message:t._errorString};return u.I.DWT.ProductKey=n.context.productKey,n.context=null,t._innerFunRawV2("GetLicenseInfo")}throw u.D.Errors.LicenseEmptyOrInvalid(t),u.I.DWT.ProductKey=r,n.context=null,{code:t._errorCode,message:t._errorString}}))).context={productKey:e},n},t.SetProductKeyAsync=function(e){var n=this;return n._resetErr(),n._isValid()?u.D.isUndefined(e)?(u.D.Errors.LicenseEmptyOrInvalid(n),u.D.Promise.reject({code:n._errorCode,message:n._errorString})):(n._isMobileMode()?n._innerSendToMobileV2("GetLicenseInfo",(0,c.An)(e)):n._setProductKeyV2(e)).then((function(r){if(!r||r.message)throw u.D.Errors.LicenseEmptyOrInvalid(n),r&&r.message&&(n._errorString=r.message),{code:n._errorCode,message:n._errorString};if(u.D.License.isLTS()||(u.I.DWT.ProductKey=e),n.__licenseInfo=(0,d.T)(r),u.D.detect.wasmScriptLoaded&&!u.D.detect.wasmPdfReaderLoaded)try{u.I.WasmEnv.loadPdfReader(),u.D.detect.wasmPdfReaderLoaded=!0}catch(t){}return r})):u.D.Promise.reject({code:n.ErrorCode,message:n.ErrorString})},t.GetVersionInfoAsync=function(){return this._innerFunV2("VersionInfo")},t.isUsingActiveX=function(){return!1},t._setLTSLic=function(e){var t=this;return t._resetErr(),!!t._isValid()&&(h.isHttpServerInvalid(t)?u.D.Promise.reject({code:t._errorCode,message:t._errorString}):u.D.isString(e)?t._innerFunRawV2("LTSLicense",(0,c.dv)(e)).then((function(e){if(e){if(void 0!==e.exception&&void 0!==e.description)throw t._errorCode=e.exception,t._errorString=e.description,{code:t._errorCode,message:t._errorString};return t._innerFunRawV2("GetLicenseInfo")}throw u.D.Errors.LicenseEmptyOrInvalid(t),{code:t._errorCode,message:t._errorString}})):(u.D.Errors.LicenseEmptyOrInvalid(t),u.D.Promise.reject({code:t._errorCode,message:t._errorString})))},t.SetLTSLicenseAsync=function(e){var n=this;return n._resetErr(),n._isValid()?u.D.isString(e)?(n._isMobileMode()?n._innerSendToMobileV2("GetLicenseInfo",(0,c.An)(e)):n._setLTSLic(e)).then((function(e){if(!e||e.message)throw u.D.Errors.LicenseEmptyOrInvalid(n),e&&e.message&&(n._errorString=e.message),{code:n._errorCode,message:n._errorString};if(n.__licenseInfo=(0,d.T)(e),u.D.detect.wasmScriptLoaded&&!u.D.detect.wasmPdfReaderLoaded)try{u.I.WasmEnv.loadPdfReader(),u.D.detect.wasmPdfReaderLoaded=!0}catch(t){}return n.__licenseInfo&&(n.__licenseInfo.LTS=!0),e})):(u.D.Errors.LicenseEmptyOrInvalid(n),u.D.Promise.reject({code:n._errorCode,message:n._errorString})):u.D.Promise.reject({code:n._errorCode,message:n._errorString})}},2696:function(e,t,n){n.r(t),t=n(9104);var r=n.n(t),i=n(1695),o=n(1188),a=i.I.navInfo,s=i.D.html5.Funs,u=s.DEF,c=s.DEF_NOT_SUPPORT_MOBILE,l=function(e,t,n){2==n&&i.D.each(t,(function(t,n){u(e,t,{get:function(){return e._resetErr(),!!e._isValid()},set:function(t){return e._resetErr(),!!e._isValid()}})}))},d=function(e,t){i.D.each(t,(function(t,n){u(e,t,1,2)}))},h=function(e,t){i.D.each(t,(function(t,n){u(e,t,1,1)}))},g=function(e,t){i.D.each(t,(function(t,n){u(e,t,0)}))},f=function(e,t){i.D.each(t,(function(t,n){u(e,t,1)}))};i.D.DynamicLoadAddonFuns=[],i.D.attachAddon=function(e){i.D.each(i.D.DynamicLoadAddonFuns,(function(t){i.D.isFunction(t)&&t(e)}))},i.D.attachProperty=function(e){var t=e;u(t,"ErrorCode",{get:function(){return t._errorCode}}),u(t,"ErrorString",{get:function(){return-2207==t._errorCode&&t.__bMustUpgradeService&&i.D.Errors.MustUpgradeService(t),0!=t._errorCode?t._errorString:"Successful."}}),u(t,"ProductKey",{get:function(){return i.I.DWT.ProductKey},set:function(e){return i.D.isString(e)?(t._resetErr(),!!t._isValid()&&t._setProductKey(e,!1)):(i.D.Errors.InvalidValue(t),!1)}}),u(t,"ProductName",{get:function(){return t.__strProductName},set:function(e){return t._resetErr(),i.D.isString(e)?(t.__strProductName=e,!0):(i.D.Errors.InvalidValue(t),!1)}}),u(t,"VersionInfo",{get:function(){return t.__versionInfo}}),t._isMobileMode()?c(t,"DefaultSourceName",0):u(t,"DefaultSourceName",{get:function(){if(t._resetErr(),!t._isValid())return!1;i.D.isUndefined(t.__currentImageCaptureDriverType)&&(t.__currentImageCaptureDriverType=0);var e="",n=0,r=t._innerFun("GetDefaultSourceName",(0,o.dv)(t._driverType));return 0<r.length&&(n=(r=JSON.parse(r)).type,e=i.I.Lib.base64.decode(r.ProductName)),4==t._driverType?n==i.I.DWT.EnumDWT_Driver.TWAIN64&&0<e.length?"Twain64-"+e:n==i.I.DWT.EnumDWT_Driver.ICA&&t.__serverPlatform==i.I.DWT.EnumDWT_PlatformType.enumMac&&0<e.length?"ICA-"+e:e:t.__currentImageCaptureDriverType==i.I.DWT.EnumDWT_Driver.TWAIN64?0<e.length&&n==i.I.DWT.EnumDWT_Driver.TWAIN64?"Twain64-"+e:e:t.__currentImageCaptureDriverType==i.I.DWT.EnumDWT_Driver.ICA&&0<e.length&&t.__serverPlatform==i.I.DWT.EnumDWT_PlatformType.enumMac?"ICA-"+e:e}}),t._isMobileMode()?c(t,["ImageCaptureDriverType","IfShowCancelDialogWhenImageTransfer"]):(u(t,"IfShowCancelDialogWhenImageTransfer",{get:function(){return t._resetErr(),!!t._isValid()&&t.__IfShowCancelDialogWhenImageTransfer},set:function(e){return i.D.isBoolean(e)?(t._resetErr(),!!t._isValid()&&(t.__IfShowCancelDialogWhenImageTransfer=e)):(i.D.Errors.InvalidValue(t),!1)}}),u(t,"ImageCaptureDriverType",{get:function(){return t._resetErr(),t._isValid()?t._driverType:0},set:function(e){var n=!1,r=!1,s=!1;if(t._bRemoteMode?t.__serverPlatform==i.I.DWT.EnumDWT_PlatformType.enumWindow?s=!0:t.__serverPlatform==i.I.DWT.EnumDWT_PlatformType.enumLinux?r=!0:t.__serverPlatform==i.I.DWT.EnumDWT_PlatformType.enumMac&&(n=!0):(n=a.bMac,r=a.bLinux,s=a.bWin),t._resetErr(),!t._isValid())return!1;if(""===e)return i.D.Errors.ImageCaptureDriverTypeError(t),!1;if((e=+e)<i.I.DWT.EnumDWT_Driver.TWAIN||e>i.I.DWT.EnumDWT_Driver.TWAIN64)return i.D.Errors.ImageCaptureDriverTypeError(t),!1;if(s){if(e===i.I.DWT.EnumDWT_Driver.TWAIN_AND_TWAIN64){if(i.I.dcp.b64bit)return t._driverType=e,t.__icaSourceCount=-1,t._innerFun("SetImageCaptureDriverType",(0,o.dv)(i.I.DWT.EnumDWT_Driver.TWAIN,t._driverType))}else if(e!=i.I.DWT.EnumDWT_Driver.TWAIN&&e!=i.I.DWT.EnumDWT_Driver.TWAIN64)return i.D.Errors.ImageCaptureDriverTypeError(t),!1;i.I.dcp.b64bit||(e=i.I.DWT.EnumDWT_Driver.TWAIN),t._driverType=e,t.__currentImageCaptureDriverType=e}else{if(r)return t._driverType=e=i.I.DWT.EnumDWT_Driver.SANE,(t.__currentImageCaptureDriverType=e)===i.I.DWT.EnumDWT_Driver.SANE||(i.D.Errors.ImageCaptureDriverTypeError(t),!1);if(n){if(e===i.I.DWT.EnumDWT_Driver.TWAIN_AND_ICA)return t._driverType=e,t.__icaSourceCount=-1,!0;if(e!=i.I.DWT.EnumDWT_Driver.ICA&&e!=i.I.DWT.EnumDWT_Driver.TWAIN&&e!=i.I.DWT.EnumDWT_Driver.TWAIN64)return i.D.Errors.ImageCaptureDriverTypeError(t),!1;t._driverType=e,t.__currentImageCaptureDriverType=e}}return t.__icaSourceCount=0,t.CloseSourceManager(),s=t._innerFun("SetImageCaptureDriverType",(0,o.dv)(e,t._driverType)),t.OpenSourceManager(),s}})),t._isMobileMode()?c(t,"SourceCount",0):u(t,"SourceCount",{get:function(){var e,n,o,s,u,c,l,d,h,g=[],f=!1,m=!1;if(t._bRemoteMode?t.__serverPlatform==i.I.DWT.EnumDWT_PlatformType.enumWindow?m=!0:t.__serverPlatform==i.I.DWT.EnumDWT_PlatformType.enumLinux||t.__serverPlatform==i.I.DWT.EnumDWT_PlatformType.enumMac&&(f=!0):(f=a.bMac,m=a.bWin),t._resetErr(),!t._isValid())return 0;if(!i.D.License.checkProductKey(t,{Core:!0}))return 0;if(t._resetSources(),t.__icaSourceCount=0,f&&t._driverType===i.I.DWT.EnumDWT_Driver.TWAIN_AND_ICA){for(n=[],l=t._getSourceNamesSyncV2(i.I.DWT.EnumDWT_Driver.ICA),c=0;c<l.length;c++)i.D.isString(s=l[c].ProductName)&&""!==(s=r()(i.D).call(i.D,s))&&(1==l[c].IsDefaultSource&&(o=s),g.push("ICA"===l[c].DriverType?"ICA-"+s:s),n.push(l[c]));for(void 0===o&&0<l.length&&i.D.isString(s=l[0].ProductName)&&""!==(s=r()(i.D).call(i.D,s))&&(o="ICA"===l[0].DriverType?"ICA-"+s:s),h=t._getSourceNamesSyncV2(i.I.DWT.EnumDWT_Driver.TWAIN),c=0;c<h.length;c++)i.D.isString(s=h[c].ProductName)&&""!==(s=r()(i.D).call(i.D,s))&&(1==h[c].IsDefaultSource&&(o=s),g.push("ICA"===h[c].DriverType?"ICA-"+s:s),n.push(h[c]));void 0===o&&0<h.length&&i.D.isString(s=h[0].ProductName)&&""!==(s=r()(i.D).call(i.D,s))&&(o="ICA"===h[0].DriverType?"ICA-"+s:s),e=n.length,t.__defaultSourceName=o,t.__icaSourceCount=l.length,t.__sourceCount=e,t.__sourceName=g,t.__sourceDetails=n}else if(m&&i.I.dcp.b64bit&&t._driverType===i.I.DWT.EnumDWT_Driver.TWAIN_AND_TWAIN64){for(n=[],h=t._getSourceNamesSyncV2(i.I.DWT.EnumDWT_Driver.TWAIN),c=0;c<h.length;c++)i.D.isString(s=h[c].ProductName)&&""!==(s=r()(i.D).call(i.D,s))&&(1==h[c].IsDefaultSource&&(o=s),g.push(s),n.push(h[c]));if(void 0===o&&0<h.length&&i.D.isString(s=h[0].ProductName)&&""!==(s=r()(i.D).call(i.D,s))&&(o=s),i.I.dcp.b64bit){for(d=t._getSourceNamesSyncV2(i.I.DWT.EnumDWT_Driver.TWAIN64),c=0;c<d.length;c++)i.D.isString(s=d[c].ProductName)&&""!==(s=r()(i.D).call(i.D,s))&&(1==d[c].IsDefaultSource&&(o=s),g.push("TWAIN(64Bit)"===d[c].DriverType?"Twain64-"+s:s),n.push(d[c]));void 0===o&&0<d.length&&i.D.isString(s=d[0].ProductName)&&""!==(s=r()(i.D).call(i.D,s))&&(o="TWAIN(64Bit)"===d[0].DriverType?"Twain64-"+s:s)}else d=[];e=n.length,t.__defaultSourceName=o,t.__icaSourceCount=h.length,t.__sourceCount=e,t.__sourceName=g,t.__sourceDetails=n}else{if(u=t._getSourceNamesSyncV2(),t.__defaultSourceName="",u&&1<=u.length){for(c=0;c<u.length;c++)i.D.isString(s=u[c].ProductName)&&""!==(s=r()(i.D).call(i.D,s))&&(1==u[c].IsDefaultSource&&(o=s),g.push(s));i.D.isString(o)?t.__defaultSourceName=o:i.D.isString(s=u[0].ProductName)&&""!==(s=r()(i.D).call(i.D,s))&&(t.__defaultSourceName="ICA"===u[0].DriverType?"ICA-"+s:s)}else u=[],g=[];t.__sourceCount=e=u.length,t._driverType===i.I.DWT.EnumDWT_Driver.ICA&&f&&0<e&&(i.D.each(g,(function(e,t){i.D.isString(e)&&""!==(e=r()(i.D).call(i.D,e))&&(g[t]="ICA-"+e)})),""!==t.__defaultSourceName&&(t.__defaultSourceName="ICA-"+t.__defaultSourceName)),t.__sourceName=g,t.__sourceDetails=u}return e<=0?(n=[],g=[],t.__sourceName=[],t.__sourceDetails=[],t.__defaultSourceName="",t.__sourceCount=0):e}}),u(t,"HowManyImagesInBuffer",{get:function(){return t._isValid()?t._ImgManager.count():0}}),u(t,"HTTPPostResponseString",{get:function(){return t._resetErr(),t._isValid()&&t.__HTTPPostResponseString||""}}),u(t,"IfAppendImage",{get:function(){return t._resetErr(),!!t._isValid()&&t.__IfAppendImage},set:function(e){return t._resetErr(),!!t._isValid()&&(i.D.isBoolean(e)?t.__IfAppendImage=e:(i.D.Errors.InvalidValue(t),!1))}}),t._isMobileMode()?c(t,["FTPPort","IfShowProgressBar","IfAppendImage"]):(u(t,"FTPPort",{get:function(){return t._resetErr(),t._isValid()?t._innerFun("FTPPort"):0},set:function(e){return t._resetErr(),!!t._isValid()&&(""!==e?t._innerFun("FTPPort",(0,o.dv)(+e)):void 0)}}),u(t,"IfShowProgressBar",{get:function(){return t._resetErr(),!!t._isValid()&&t.__IfShowProgressBar},set:function(e){return t._resetErr(),!!t._isValid()&&(i.D.isBoolean(e)?t.__IfShowProgressBar=e:(i.D.Errors.InvalidValue(t),!1))}})),t._isMobileMode()?u(t,"JPEGQuality",{get:function(){return t._resetErr(),!!t._isValid()&&t._jpgQuality},set:function(e){return 100<=(e=+e)?e=100:e<0&&(e=0),t._resetErr(),!!t._isValid()&&(t._jpgQuality=e,!0)}}):u(t,"JPEGQuality",{get:function(){return t._resetErr(),t._isValid()?t._innerFun("JPEGQuality"):0},set:function(e){return 100<=(e=+e)?e=100:e<0&&(e=0),t._resetErr(),!!t._isValid()&&t._innerFun("JPEGQuality",(0,o.dv)(e))}}),t._isMobileMode()?u(t,"TIFFCompressionType",{get:function(){return t._resetErr(),t._isValid()?t._tiffCompressionType:0},set:function(e){return t._resetErr(),!!t._isValid()&&(t._tiffCompressionType=e,!0)}}):u(t,"TIFFCompressionType",1,1),t._isMobileMode()?u(t,"BufferMemoryLimit",{get:function(){return t._resetErr(),t._isValid(),0},set:function(e){return t._resetErr(),t._isValid(),!1}}):u(t,"BufferMemoryLimit",1,1),t._isMobileMode()?u(t,"LogLevel",{get:function(){return t._resetErr(),t._isValid()?t._logLevel:0},set:function(e){return t._resetErr(),!!t._isValid()&&(14<=(e=+e)?e=14:e<0&&(e=0),i.I.WasmEnv&&i.I.WasmEnv.setLoglevel(t._logLevel),t._logLevel=e,!0)}}):u(t,"LogLevel",1,1),u(t,"HttpContentTypeFieldValue",{get:function(){return t._resetErr(),t._isValid()?t.__strHttpContentTypeFieldValue:""},set:function(e){return t._resetErr(),!!t._isValid()&&(t.__strHttpContentTypeFieldValue=e)}}),u(t,"BrokerProcessType",{get:function(){return t._resetErr(),t._isValid()?1:0},set:function(e){return t._resetErr(),!!t._isValid()}}),u(t,"BorderStyle",{get:function(){return t._resetErr(),!!t._isValid()&&0},set:function(e){return t._resetErr(),t._isValid(),!1}}),u(t,"HttpFieldNameOfUploadedImage",{get:function(){return t._resetErr(),!!t._isValid()&&t.__remoteFilename},set:function(e){return t._resetErr(),!!t._isValid()&&(t.__remoteFilename=e)}}),u(t,"style",{get:function(){return t._isValid()?t.__style:""}}),u(t,"Addon",{get:function(){return t.__addon}}),u(t,"HTTPRequestswithCredentials",{get:function(){return t._resetErr(),!!t._isValid()&&t.__withCredentials},set:function(e){return t._resetErr(),!!t._isValid()&&(t.__withCredentials=e)}}),u(t,"ScaleDownThreshold",{get:function(){return t._resetErr(),t._isValid()?t._scaleDownThreshold:0},set:function(e){var n=+e;return!i.D.isNumber(n)||isNaN(n)?(i.D.Errors.InvalidValue(q),!1):(t._resetErr(),!!t._isValid()&&(t._scaleDownThreshold=e))}}),u(t,"CurrentImageIndexInBuffer",{get:function(){return t._isValid()?t._ImgManager.getCurrentImageIndex():0},set:function(e){return e=+e,t._resetErr(),!!t._isValid()&&(0<=e&&e<t._ImgManager.count()&&(t._ImgManager.Go(e),t._isBindViewer()&&s.__innerRefreshFromUIView(t,t._ImgManager.getCurrentImageIndex())),!0)}}),u(t,"SelectedImagesIndices",{get:function(){return t._resetErr(),!t._isValid()||t._ImgManager.count()<=0?[]:t._ImgManager.getSelectedClientIndexArray()}}),u(t,"MaxImagesInBuffer",{get:function(){return t._resetErr(),t._isValid()?t.__maxImagesInBuffer:0},set:function(e){return e=+e,t._resetErr(),!!t._isValid()&&(0<e&&e<32768?t.__maxImagesInBuffer=e:i.D.Errors.OutOfRange(t),t.__maxImagesInBuffer)}}),u(t,"MaxUploadImageSize",{get:function(){return t._resetErr(),!!t._isValid()&&t.__maxUploadImageSize},set:function(e){return e=+e,t._resetErr(),!!t._isValid()&&(t.__maxUploadImageSize=e,t._isMobileMode()||t._innerFun("MaxUploadImageSize",(0,o.dv)(e)),t.__maxUploadImageSize)}}),u(t,"IfSSL",{get:function(){return t._ifSSL},set:function(e){return t._ifSSL=e,t._isMobileMode()||t._innerFun("IfSSL",(0,o.dv)(e)),!0}}),t._isMobileMode()?u(t,"IfAllowLocalCache",{get:function(){return!1},set:function(e){return!1}}):u(t,"IfAllowLocalCache",1,2),u(t,"UseLocalService",{get:function(){return!t._isMobileMode()}}),u(t,"PDFCompressionType",{get:function(){return t._resetErr(),!!t._isValid()&&(t._isMobileMode()?t._mobileNotSupport("PDFCompressionType"):t._innerFun("PDFCompressionType"))},set:function(e){return(e=+e)==i.I.DWT.EnumDWT_PDFCompressionType.PDF_FAX3&&(e=i.I.DWT.EnumDWT_PDFCompressionType.PDF_FAX4),t._resetErr(),!!t._isValid()&&(t._isMobileMode()?t._mobileNotSupport("PDFCompressionType"):t._innerFun("PDFCompressionType",(0,o.dv)(e)))}}),t._getPdfDllname=function(){var e=!1,n=!1;return t._bRemoteMode?t.__serverPlatform==i.I.DWT.EnumDWT_PlatformType.enumWindow||(t.__serverPlatform==i.I.DWT.EnumDWT_PlatformType.enumLinux?n=!0:t.__serverPlatform==i.I.DWT.EnumDWT_PlatformType.enumMac&&(e=!0)):(e=a.bMac,n=a.bLinux),e?i.I.dcp.b64bit?"libDynamicPdfCorex64_"+i.I.DWT.PdfVersion+".dylib":"libDynamicPdfCore_"+i.I.DWT.PdfVersion+".dylib":n?"libDynamicPdfCore_"+i.I.DWT.PdfVersion+".so":i.I.dcp.b64bit?"DynamicPdfCorex64_"+i.I.DWT.PdfVersion+".dll":"DynamicPdfCore_"+i.I.DWT.PdfVersion+".dll"},t._setConvertModeInner=function(e){return!(!i.D.License.checkProductKey(t,{Core:!0})||(e=+e,t._resetErr(),!t._isValid()||(isNaN(e)?(i.D.Errors.ParameterCannotEmpty(t),1):1!=e&&2!=e&&3!=e&&4!=e?(i.D.Errors.InvalidValue(t),1):(t._pdfRealConvertMode=2==(t._pdfConvertMode=e)||i.D.License.hasPDFRProductKey(t)?e:2,0))))},t._setConvertMode=function(e){return!!t._setConvertModeInner(e)&&(t._isMobileMode()||(e=t._getPdfDllname(),t._innerFun("SetPDFConvertMode",(0,o.dv)(t._pdfRealConvertMode,e))),!(2==t._pdfRealConvertMode&&1==t._pdfConvertMode||2==t._pdfRealConvertMode&&4==t._pdfConvertMode)||(i.D.Errors.LicenseNoPDF(t),!1))},t._setConvertModeAsync=function(e){return t._setConvertModeInner(e)?t._isMobileMode()?2==t._pdfRealConvertMode&&1==t._pdfConvertMode||2==t._pdfRealConvertMode&&4==t._pdfConvertMode?(i.D.Errors.LicenseNoPDF(t),i.D.Promise.reject({code:t._errorCode,message:t._errorString})):i.D.Promise.resolve(!0):(e=t._getPdfDllname(),t._innerFunV2("SetPDFConvertMode",(0,o.dv)(t._pdfRealConvertMode,e)).then((function(){if(2==t._pdfRealConvertMode&&1==t._pdfConvertMode||2==t._pdfRealConvertMode&&4==t._pdfConvertMode)throw i.D.Errors.LicenseNoPDF(t),{code:t._errorCode,message:t._errorString};return!0}))):i.D.Promise.reject({code:t._errorCode,message:t._errorString})},t._setProductKey=function(e,n,r,a){var s=!0,u=function(e){return e||(t.__licenseInfo=!1),e=!0,a||(e=i.D.License.checkProductKey(t,{Core:!0})),i.D.isFunction(r)&&r(),e};if(t._resetErr(),!t._isValid())return!1;if(i.D.isString(e)&&"******"!=e||(e=""),""==(i.I.DWT.ProductKey=e))s=!1,u();else{if(t._isMobileMode())return i.D.showProgressMsg(-1,"",i.I.MSG.Init_GetLicenseInfoForDWT),t.GetLicenseInfo((function(e){i.I.WasmEnv&&i.I.WasmEnv.setLoglevel(t._logLevel),t._setConvertMode(t._pdfConvertMode),t._resetErr(),u(!0)}),u),!0;t._innerFunRaw("ProductKey",(0,o.dv)(e),n,!1,!1,(function(e){var r=i.D.isArray(e)?e[0]:e;i.D.isArray(e)&&3<=e.length&&"1"===e[1]&&i.D.isFunction(i.I.DWT.ShowMessage)&&i.I.DWT.ShowMessage(e[2],{width:510,height:272,headerStyle:1,seconds:10}),n||(s=r),i.D.showProgressMsg(-1,"",i.I.MSG.Init_GetLicenseInfoForDWT),t.GetLicenseInfo((function(){t._setConvertMode(t._pdfConvertMode),u(!0)}),u)}),(function(){n||(s=!1),u()}))}return s},f(t,["ProxyServer"]),e=["CapValueString","CapDescription","FTPPassword","FTPUserName","Manufacturer","ProductFamily","PDFAuthor","PDFCreationDate","PDFCreator","PDFKeywords","PDFModifiedDate","PDFProducer","PDFSubject","PDFTitle","PDFVersion"],(t._isMobileMode()?c:f)(t,e),g(t,["ImageBitsPerPixel","ImageLength","ImageWidth","ImageXResolution","ImageYResolution"]),e=["BlankImageCurrentStdDev","CapDefaultIndex","CapDefaultValue","DataSourceStatus","Duplex","PendingXfers","ImageLayoutDocumentNumber","ImageLayoutFrameBottom","ImageLayoutFrameLeft","ImageLayoutFrameNumber","ImageLayoutFrameRight","ImageLayoutFrameTop","ImageLayoutPageNumber","ImagePixelType","MagData","MagType","IfFeederLoaded","IfPaperDetectable","IfUIControllable"],t._isMobileMode()?c(t,e,0):g(t,e),d(t,["AllowPluginAuthentication","IfModalUI","IfScanInNewThread","_AutoCropMethod"]),e=["CurrentSourceName","IfDisableSourceAfterAcquire","IfDuplexEnabled","IfFeederEnabled","IfShowFileDialog","IfShowUI","IfPASVMode","IfAutoBright","IfAutoDiscardBlankpages","IfAutoFeed","IfAutomaticBorderDetection","IfAutomaticDeskew","IfAutoScan","IfShowIndicator","IfUseTwainDSM","IfTiffMultiPage"],(t._isMobileMode()?c:d)(t,e),h(t,["MaxInternetTransferThreads"]),e=["BlankImageMaxStdDev","BlankImageThreshold","BitDepth","Brightness","PageSize","PixelType","Resolution","Capability","CapCurrentIndex","CapCurrentValue","CapMaxValue","CapMinValue","CapNumItems","CapStepSize","CapType","CapValue","CapValueType","Contrast","PixelFlavor","TransferMode","Unit","XferCount"],(t._isMobileMode()?c:h)(t,e),l(t,["AsyncMode","EnableInteractiveZoom","IfThrowException","ImageEditorIfEnableEnumerator","ImageEditorIfReadonly","ImageEditorIfModal","ImageEditorWindowTitle","IfShowPrintUI","VScrollBar"],2),e=["IfOpenImageWithGDIPlus"],(t._isMobileMode()?c:l)(t,e)},i.D.attachPropertyUI||(i.D.attachPropertyUI=function(){})},8975:function(e,t,n){n.r(t),t=n(9104);var r=n.n(t),i=(t=n(7711),n.n(t)),o=n(1695),a=n(1188),s=o.I.navInfoSync,u=o.D.html5.Funs,c=o.D.removeNonPrintableChar,l=["OnPreAllTransfers","OnPreTransfer","OnPostTransfer","OnPostTransferAsync"],d=((t=o.D.html5.STwain.prototype).LoadDibFromClipboard=function(e,t){if(this._resetErr(),!this._isValid())return!1;if(this._isMobileMode())return this._mobileNotSupport("LoadDibFromClipboard",t);var n=this.__GetLoadEventsNum();return this.__innerLoadImage("LoadDibFromClipboard",(0,a.dv)(n,1),-1,!0,1,e,t)},t.LoadImage=function(e,t,n){var r=this;if(r._resetErr(),!r._isValid())return!1;if(r._isMobileMode())return r._mobileNotSupport("LoadImage",n);e=u.replaceLocalFilename(e);var i,s,c,l=o.D.html5.Funs.getImageType(e);return t&&o.D.isFunction(t)&&(s=function(){t()}),n&&o.D.isFunction(n)&&(c=function(){n(r.ErrorCode,r.ErrorString)}),i=r.__GetLoadEventsNum(),""==e&&(r.__bOpenFileNow=!0),r.__innerLoadImage("LoadImage",(0,a.dv)(e,i,1),l,!0,1,s,c)},t.LoadImageEx=function(e,t,n,r){var i=this;if(i._resetErr(),!i._isValid())return!1;if(i._isMobileMode())return 0==(d=o.D.one(".d-loadImage")).length?((l=document.createElement("input"))._stwain=i,l.setAttribute("type","file"),l.setAttribute("multiple","multiple"),l.style="position:absolute;top:-2px;left:-2px;width:1px;height:1px;",l.className="d-loadImage",l.setAttribute("accept",t==o.I.DWT.EnumDWT_ImageType.IT_BMP?"image/bmp":t==o.I.DWT.EnumDWT_ImageType.IT_JPG?"image/jpeg":t==o.I.DWT.EnumDWT_ImageType.IT_TIF?"image/tiff":t==o.I.DWT.EnumDWT_ImageType.IT_PNG?"image/png":t==o.I.DWT.EnumDWT_ImageType.IT_PDF?".pdf":t==o.I.DWT.EnumDWT_ImageType.IT_J2K?".jp2,.j2k,.j2c":o.D.env.bMobile?"image/jpeg,image/png,image/tiff,image/tif":"image/*,.pdf,.jp2,.j2k,.j2c"),l.ondoubleclick=function(){0<this.files.length&&this._stwain.LoadImageFromBinary(this.files,n,r),this.value="",this._stwain=null},l.onchange=function(){0<this.files.length&&this._stwain.LoadImageFromBinary(this.files,n,r),this.value="",this._stwain=null},document.body.appendChild(l),l.click()):(d[0].setAttribute("accept",t==o.I.DWT.EnumDWT_ImageType.IT_BMP?"image/bmp":t==o.I.DWT.EnumDWT_ImageType.IT_JPG?"image/jpeg":t==o.I.DWT.EnumDWT_ImageType.IT_TIF?"image/tiff":t==o.I.DWT.EnumDWT_ImageType.IT_PNG?"image/png":t==o.I.DWT.EnumDWT_ImageType.IT_PDF?".pdf":t==o.I.DWT.EnumDWT_ImageType.IT_J2K?".jp2,.j2k,.j2c":o.D.env.bMobile?"image/jpeg,image/png,image/tiff,image/tif":"image/*,.pdf,.jp2,.j2k,.j2c"),d[0].value="",d[0]._stwain=i,d[0].click()),!0;var s,c,l=u.replaceLocalFilename(e),d=t;return n&&o.D.isFunction(n)&&(s=function(){n()}),r&&o.D.isFunction(r)&&(c=function(){r(i.ErrorCode,i.ErrorString)}),d==o.I.DWT.EnumDWT_ImageType.IT_ALL&&(d=-1),e=i.__GetLoadEventsNum(),""==l&&(i.__bOpenFileNow=!0),i.__innerLoadImage("LoadImageEx",(0,a.dv)(l,d,e,1),d,!0,1,s,c)},t.EnableSource=function(e,t,n){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("EnableSource",n):this.AcquireImage(e,t,n))},t.AcquireImage=function(e,t,n){var r,i,a=this,s=null,c=null;if(a._resetErr(),!a._isValid())return!1;if(o.D.isUndefined(n)&&(o.D.isFunction(e)&&o.D.isFunction(t)||o.D.isFunction(e)&&o.D.isUndefined(t)||o.D.isFunction(e)&&null==t||null==e&&o.D.isFunction(t))?(i={},o.D.isFunction(e)&&(s=e),o.D.isFunction(t)&&(c=t)):(i=o.D.isUndefined(e)||null==e?{}:o.D.clone(e),o.D.isFunction(t)&&(s=function(){t(i)}),o.D.isFunction(n)&&(c=function(){n(i,a._errorCode,a._errorString)})),!o.D.License.checkProductKey(a,{Core:!0}))return o.D.isFunction(c)&&c(a.ErrorCode,a.ErrorString),!1;if(a._isMobileMode())return a._mobileNotSupport("AcquireImage",c);if(u.isServerInvalid(a))return o.D.isFunction(c)&&c(a.ErrorCode,a.ErrorString),!1;!a._bRemoteMode&&i.RemoteScan&&(i.RemoteScan=!1),a._bRemoteMode&&i.RemoteScan&&(o.D.isFunction(a.__OnRemoteScanStatusAsync)||(a.__OnRemoteScanStatusAsync=function(){}),o.D.isFunction(a.__OnSourceUIClose)||(a.__OnSourceUIClose=function(){}));for(var d,h=0,g=0;g<l.length;g++){var f=["__",l[g]].join("");o.D.isFunction(a[f])&&(h|=1<<g)}return i.EnableEvents=h,a._enableEvents=h,a._bRemoteMode&&i.RemoteScan&&(a._isBindViewer()||i.ShowRemoteScanUI)&&((e=document.createElement("div")).style.position="absolute",e.style.zIndex="510000",e.style.left="0",e.style.top="0",(d=document.createElement("img")).className="ds-img-screen",e.appendChild(d),document.body.appendChild(e),a._acquireDivEL=e),"SelectSourceByIndex"in i?(d=i.SelectSourceByIndex,delete i.SelectSourceByIndex,a.SelectSourceByIndexAsync(d).then((function(){return r=["[",o.D.stringify(i),"]"].join(""),a.__bAcquireImageNow=!0,a.__innerAcquireImage("AcquireImage",r,!1,s,c)}),(function(e){c(e.code,e.message)}))):(a._bRemoteMode||(a.bPageFocus&&o.I.DWT.IfAlwaysFocusOnPopupWindow?a.bServerAlwaysFocusOnPopupWindow||a._OnPageFocus(!0):a.bServerAlwaysFocusOnPopupWindow&&a._OnPageBlur(!0)),r=["[",o.D.stringify(i),"]"].join(""),a.__bAcquireImageNow=!0,a.__innerAcquireImage("AcquireImage",r,!1,s,c))},t._startScan=function(e,t,n){var r=this,i=null,a=null,s=o.D.isUndefined(e)||null==e?{}:e;if(r._resetErr(),!r._isValid())return!1;if(o.D.isFunction(t)&&(i=function(){t(s)}),o.D.isFunction(n)&&(a=function(e,t){n(e,t,s)}),u.isServerInvalid(r))return o.D.isFunction(a)&&a(r._errorCode,r._errorString),!1;if(!o.D.License.checkProductKey(r,{Core:!0}))return o.D.isFunction(a)&&a(r._errorCode,r._errorString),!1;for(var c=0,d=0;d<l.length;d++){var h=["__",l[d]].join("");o.D.isFunction(r[h])&&(c|=1<<d)}return s.EnableEvents=c,e=["[",o.D.stringify(s),"]"].join(""),r.__bAcquireImageNow=!0,r.__innerAcquireImage("StartScan",e,!1,i,a)},t.CancelAllPendingTransfers=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CancelAllPendingTransfers"):this._innerFun("CancelAllPendingTransfers"))},t.CloseSource=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CloseSource"):this._innerFun("CloseSource"))},t.CloseSourceManager=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CloseSourceManager"):this._innerFun("CloseSourceManager"))},t.CloseSourceAsync=function(){return this._resetErr(),this._isValid()?this._isMobileMode()?this._mobileNotSupportAsync("CloseSource"):this._innerFunV2("CloseSource"):o.D.Promise.reject({code:this._errorCode,message:this._errorString})},t.CloseSourceManagerAsync=function(){return this._resetErr(),this._isValid()?this._isMobileMode()?this._mobileNotSupportAsync("CloseSourceManager"):this._innerFunV2("CloseSourceManager"):o.D.Promise.reject({code:this._errorCode,message:this._errorString})},t.DisableSource=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("DisableSource"):this._innerFun("DisableSource"))},t.FeedPage=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("FeedPage"):this._innerFun("FeedPage"))},t.GetDeviceType=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("GetDeviceType"):this._innerFun("GetDeviceType"))},t.GetSourceNameItems=function(e){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("GetSourceNameItems"):(this.__sourceCount<0&&(this.SourceCount=0),e<this.__sourceCount&&0<=e?this.__sourceName[e]:""))},t.SourceNameItems=function(e){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("SourceNameItems"):this.GetSourceNameItems(e))},function(e){return e=JSON.parse(c(e)),o.D.each(e,(function(e){e.ProductName&&(e.ProductName=o.D.base64.decode(e.ProductName)),e.ProductFamily&&(e.ProductFamily=o.D.base64.decode(e.ProductFamily)),e.Manufacturer&&(e.Manufacturer=o.D.base64.decode(e.Manufacturer)),e.Version&&e.Version.Info&&(e.Version.Info=o.D.base64.decode(e.Version.Info))})),e});t._getSourceNamesSyncV2=function(e){var t=[];if(e=this._innerFun("GetSourceNames",(0,a.dv)(1,e)),0!=this._errorCode&&-3032!=this._errorCode)return[];if(""!=e)for(var n=d(e),r=0;r<n.length;r++){var i,o="true"==(i=n[r]).IsCurrentSource,s="true"==i.IsDefaultSource;i.IsCurrentSource=o,i.IsDefaultSource=s,t.push(i)}return t},t._getSourceNamesAsyncV2=function(e){var t=this;return t._innerFunV2("GetSourceNames",(0,a.dv)(1,e)).then((function(e){if(0!=t._errorCode&&-3032!=t._errorCode)throw 0;var n=[];if(""!=e)for(var r=d(e),i=0;i<r.length;i++){var o,a="true"==(o=r[i]).IsCurrentSource,s="true"==o.IsDefaultSource;o.IsCurrentSource=a,o.IsDefaultSource=s,n.push(o)}return n}))},t.GetSourceNames=function(e){return e?this.__sourceDetails:this.__sourceName},t._resetSources=function(){this.__defaultSourceName="",this.__sourceCount=0,this.__icaSourceCount=-1,this.__sourceName=[],this.__sourceDetails=[]},t.GetSourceCountAsync=function(e){var t=this,n=!1,i=!1;return t._resetErr(),t._isValid()?t._isMobileMode()?o.D.Promise.resolve(0):(t._bRemoteMode?t.__serverPlatform==o.I.DWT.EnumDWT_PlatformType.enumWindow?i=!0:t.__serverPlatform==o.I.DWT.EnumDWT_PlatformType.enumLinux||t.__serverPlatform==o.I.DWT.EnumDWT_PlatformType.enumMac&&(n=!0):(n=s.bMac,i=s.bWin),t._resetSources(),o.D.detect.showMask(t),e&&(t._driverType=e),n&&t._driverType===o.I.DWT.EnumDWT_Driver.TWAIN_AND_ICA?t._getSourceNamesAsyncV2(o.I.DWT.EnumDWT_Driver.ICA).then((function(e){for(var n,i,a=0;a<e.length;a++)n=(i=e[a]).ProductName,o.D.isString(n)&&""!==(n=c(r()(o.D).call(o.D,n)))&&("ICA"===i.DriverType&&(n="ICA-"+n),1==i.IsDefaultSource&&(t.__defaultSourceName=n),t.__sourceName.push(n),t.__sourceDetails.push(i));t.__icaSourceCount=t.__sourceDetails.length})).then((function(){return t._getSourceNamesAsyncV2(o.I.DWT.EnumDWT_Driver.TWAIN)})).then((function(e){for(var n,i,a=0;a<e.length;a++)n=(i=e[a]).ProductName,o.D.isString(n)&&""!==(n=c(r()(o.D).call(o.D,n)))&&("ICA"===i.DriverType&&(n="ICA-"+n),1==i.IsDefaultSource&&(t.__defaultSourceName=n),t.__sourceName.push(n),t.__sourceDetails.push(i))})).then((function(){var e=t.__sourceDetails.length;return t.__sourceCount=e,""===t.__defaultSourceName&&0<t.__sourceName.length&&(t.__defaultSourceName=t.__sourceName[0]),o.D.hideMask(),e}),(function(){return t._resetSources(),t.__icaSourceCount=0,o.D.hideMask(),0})):i&&o.I.dcp.b64bit&&t._driverType===o.I.DWT.EnumDWT_Driver.TWAIN_AND_TWAIN64?(e=t._getSourceNamesAsyncV2(o.I.DWT.EnumDWT_Driver.TWAIN).then((function(e){for(var n,i,a=0;a<e.length;a++)n=(i=e[a]).ProductName,o.D.isString(n)&&""!==(n=c(r()(o.D).call(o.D,n)))&&(1==i.IsDefaultSource&&(t.__defaultSourceName=n),t.__sourceName.push(n),t.__sourceDetails.push(i));t.__icaSourceCount=t.__sourceDetails.length})),(e=o.I.dcp.b64bit?e.then((function(){return t._getSourceNamesAsyncV2(o.I.DWT.EnumDWT_Driver.TWAIN64)})).then((function(e){for(var n,i,a=0;a<e.length;a++)n=(i=e[a]).ProductName,o.D.isString(n)&&""!==(n=r()(o.D).call(o.D,n))&&("TWAIN(64Bit)"===i.DriverType&&(n="Twain64-"+n),1==i.IsDefaultSource&&(t.__defaultSourceName=n),t.__sourceName.push(n),t.__sourceDetails.push(i))})):e).then((function(){var e=t.__sourceDetails.length;return t.__sourceCount=e,""===t.__defaultSourceName&&0<t.__sourceName.length&&(t.__defaultSourceName=t.__sourceName[0]),o.D.hideMask(),e}),(function(){return t._resetSources(),t.__icaSourceCount=0,o.D.hideMask(),0}))):t._getSourceNamesAsyncV2().then((function(e){for(var n,i,a=0;a<e.length;a++)n=(i=e[a]).ProductName,o.D.isString(n)&&""!==(n=c(r()(o.D).call(o.D,n)))&&("ICA"===i.DriverType&&(n="ICA-"+n),1==i.IsDefaultSource&&(t.__defaultSourceName=n),t.__sourceName.push(n),t.__sourceDetails.push(i))})).then((function(){var e=t.__sourceDetails.length;return t.__sourceCount=e,""===t.__defaultSourceName&&0<t.__sourceName.length&&(t.__defaultSourceName=t.__sourceName[0]),t.__icaSourceCount=0,o.D.hideMask(),e}),(function(){return t._resetSources(),t.__icaSourceCount=0,o.D.hideMask(),0}))):o.D.Promise.reject({code:t._errorCode,message:t._errorString})},t.getSourceCount=function(e){return this.GetSourceCountAsync(e)},t.GetSourceNamesAsync=function(e){var t=this;return t._resetErr(),t._isValid()?t._isMobileMode()?t._mobileNotSupportAsync("GetSourceNames"):t.getSourceCount().then(e?function(e){return t.__sourceDetails}:function(e){return t.__sourceName}):o.D.Promise.reject({code:t._errorCode,message:t._errorString})},t.GetSourceType=function(e){return e=i()(e),this._resetErr(),isNaN(e)?(o.D.Errors.InvalidParameter(this),!1):(e=this.__SetImageCaptureTypeInner(e),this._innerFun("GetSourceType",(0,a.dv)(e)))},t.OpenSource=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("OpenSource"):this._innerFun("OpenSource"))},t.OpenSourceManager=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("OpenSourceManager"):this._innerFun("OpenSourceManager"))},t.OpenSourceAsync=function(){return this._resetErr(),this._isValid()?this._isMobileMode()?this._mobileNotSupportAsync("OpenSource"):this._innerFunV2("OpenSource"):o.D.Promise.reject({code:this._errorCode,message:this._errorString})},t.OpenSourceManagerAsync=function(){return this._resetErr(),this._isValid()?this._isMobileMode()?this._mobileNotSupportAsync("OpenSourceManager"):this._innerFunV2("OpenSourceManager"):o.D.Promise.reject({code:this._errorCode,message:this._errorString})},t.ResetImageLayout=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("ResetImageLayout"):this._innerFun("ResetImageLayout"))},t.RewindPage=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("RewindPage"):this._innerFun("RewindPage"))},t.SelectSource=function(e,t){var n=this;return n._resetErr(),!!n._isValid()&&(n._isMobileMode()?n._mobileNotSupport("SelectSource",t):o.D.isUndefined(e)?n._bRemoteMode&&n.IfShowUI?(o.D.Errors.SelectSourceMustAsyncWhenRemote(n),!1):n._driverType==o.I.DWT.EnumDWT_Driver.TWAIN_AND_TWAIN64?(o.D.Errors.SelectSourceMustAsync(n),!1):n._innerFun("SelectSource"):(n.SelectSourceAsync().then(e,(function(){o.D.isFunction(t)&&t(n.ErrorCode,n.ErrorString)})),!0))},t.SelectSourceAsync=function(e){var t=this;return t._resetErr(),t._isValid()?t._isMobileMode()?t._mobileNotSupportAsync("SelectSource"):e?t._innerFunV2("SelectSource",(0,a.dv)(e)):t.getSourceCount().then((function(e){var n,r=document,a=o.I.DWT;if(e<=0)return e=a.CustomizableDisplayInfo.dialogText.selectSource[3],alert(e),o.D.Promise.reject(e);if(o.D.dialog.selectsourcedlg)(e=o.I.Lib.one(".dynamsoft-dialog-selectsource"))&&0<e.length&&(u=e[0]);else{var u,c=-1;for((u=r.createElement("dialog")).className="dynamsoft-dialog-selectsource",u.style.top="20%",s.bIE&&(u.style.width="300px"),u.setAttribute("closed","closed"),(d=[]).push('<ul id="dynamsoft-dialog-selectsource-sourcelist-ul">'),n=0;n<t.__sourceCount;n++){var l="";(""==t.__defaultSourceName&&0==n||t.__defaultSourceName==t.__sourceName[n])&&(l=" dynamsoft-dialog-selectsource-sourcelist-li-selected",c=n),d.push('<li class="dynamsoft-dialog-selectsource-item'+l+'" sourceindex='+n+">"+t.__sourceName[n]+"</li>")}d.push("</ul>");var d=d.join("");e=["<p>",a.CustomizableDisplayInfo.dialogText.selectSource[0],"</p>",'<div id="dynamsoft-dialog-selectsource-sourcelist">',d,"</div>",'<div><input type="button" value="',a.CustomizableDisplayInfo.dialogText.selectSource[1],'" class="dynamsoft-dialog-selectsource-button-select">','<input type="button" value="',a.CustomizableDisplayInfo.dialogText.selectSource[2],'" class="dynamsoft-dialog-selectsource-button-cancel"></div>'].join(""),u.innerHTML=e,o.D.dialog.selectsourcedlg=u,r.body.appendChild(o.D.dialog.selectsourcedlg),o.D.each(o.D.all(".dynamsoft-dialog-selectsource-item"),(function(e,t){o.D.addEventListener(e,"click",(function(e){for(var t=(e=e.target).attributes.sourceindex.value,n=e.parentElement.children,r=0;r<n.length;r++)n[r].className="dynamsoft-dialog-selectsource-item";e.className="dynamsoft-dialog-selectsource-item dynamsoft-dialog-selectsource-sourcelist-li-selected",o.D.get("dynamsoft-dialog-selectsource-sourcelist-ul").setAttribute("selectedSourceIndex",t)}))})),o.D.get("dynamsoft-dialog-selectsource-sourcelist-ul").setAttribute("selectedSourceIndex",c.toString()),o.D.dialog.setup(o.D.dialog.selectsourcedlg)}return o.D.dialog.selectsourcedlg.showModal(),a=0,0<(a=("CSS1Compat"==r.compatMode?r.documentElement:r.body).scrollTop)&&u&&(e=o.D.DOM.getElDimensions(u,!0).offsetTop,u.style.top=(e+=a)+"px"),new o.D.Promise((function(e,n){o.D.removeEventListener(o.D.one(".dynamsoft-dialog-selectsource-button-select")[0],"click"),o.D.removeEventListener(o.D.one(".dynamsoft-dialog-selectsource-button-cancel")[0],"click"),o.D.addEventListener(o.D.one(".dynamsoft-dialog-selectsource-button-select")[0],"click",(function(){var n=i()(o.I.Lib.get("dynamsoft-dialog-selectsource-sourcelist-ul").attributes.selectedSourceIndex.value);t.SelectSourceByIndexAsync(n).then((function(){o.D.dialog.selectsourcedlg.close(),document.body.removeChild(o.D.dialog.selectsourcedlg),o.D.dialog.selectsourcedlg=!1,e(n)}))})),o.D.addEventListener(o.D.one(".dynamsoft-dialog-selectsource-button-cancel")[0],"click",(function(){o.D.dialog.selectsourcedlg.close(),document.body.removeChild(o.D.dialog.selectsourcedlg),o.D.dialog.selectsourcedlg=!1,n({code:-1032,message:"User cancelled the operation."})}))}))})):o.D.Promise.reject({code:t._errorCode,message:t._errorString})},t.SelectSourceByIndex=function(e){var t=i()(e);return this._resetErr(),this._isMobileMode()?this._mobileNotSupport("SelectSourceByIndex"):isNaN(t)?(o.D.Errors.InvalidParameter(this),!1):(t=this.__getSourceIndexAndImageCaptureType(e),this._innerFun("SelectSourceByIndex",(0,a.dv)(t[0],t[1],t[2])))},t.__getSourceIndexAndImageCaptureType=function(e){var t=this,n=(e=+e,!1),r=!1;return t._isValid()&&(t._bRemoteMode?t.__serverPlatform==o.I.DWT.EnumDWT_PlatformType.enumWindow?r=!0:t.__serverPlatform==o.I.DWT.EnumDWT_PlatformType.enumLinux||t.__serverPlatform==o.I.DWT.EnumDWT_PlatformType.enumMac&&(n=!0):(n=s.bMac,r=s.bWin),n&&t._driverType===o.I.DWT.EnumDWT_Driver.TWAIN_AND_ICA?e>=t.__icaSourceCount?(e-=t.__icaSourceCount,t.__currentImageCaptureDriverType=o.I.DWT.EnumDWT_Driver.TWAIN):t.__currentImageCaptureDriverType=o.I.DWT.EnumDWT_Driver.ICA:r&&o.I.dcp.b64bit&&t._driverType===o.I.DWT.EnumDWT_Driver.TWAIN_AND_TWAIN64&&(e>=t.__icaSourceCount?(e-=t.__icaSourceCount,t.__currentImageCaptureDriverType=o.I.DWT.EnumDWT_Driver.TWAIN64):t.__currentImageCaptureDriverType=o.I.DWT.EnumDWT_Driver.TWAIN)),n=void 0===t._driverType?0:t._driverType,[e,void 0===t.__currentImageCaptureDriverType?n:t.__currentImageCaptureDriverType,n]},t.__SetImageCaptureTypeInner=function(e){return!!this._isValid()&&(e=this.__getSourceIndexAndImageCaptureType(e),this._innerFun("SetImageCaptureDriverType",(0,a.dv)(e[1],e[2])),e[0])},t._resetImageCaptureDriverType=function(e){var t,n=this,r=e,i=!1,u=!1;return n._resetErr(),!!n._isValid()&&(n._bRemoteMode?n.__serverPlatform==o.I.DWT.EnumDWT_PlatformType.enumWindow?u=!0:n.__serverPlatform==o.I.DWT.EnumDWT_PlatformType.enumLinux||n.__serverPlatform==o.I.DWT.EnumDWT_PlatformType.enumMac&&(i=!0):(i=s.bMac,u=s.bWin),(t=i&&n._driverType===o.I.DWT.EnumDWT_Driver.TWAIN_AND_ICA?(t=-1==n.__icaSourceCount?n.getSourceCount():o.D.Promise.resolve(n.__sourceCount),e>=n.__icaSourceCount?(r-=n.__icaSourceCount,n.__currentImageCaptureDriverType=o.I.DWT.EnumDWT_Driver.TWAIN,t.then((function(){return n._innerFunV2("SetImageCaptureDriverType",(0,a.dv)(o.I.DWT.EnumDWT_Driver.TWAIN,n._driverType))}))):(n.__currentImageCaptureDriverType=o.I.DWT.EnumDWT_Driver.ICA,t.then((function(){return n._innerFunV2("SetImageCaptureDriverType",(0,a.dv)(o.I.DWT.EnumDWT_Driver.ICA,n._driverType))})))):u&&o.I.dcp.b64bit&&n._driverType===o.I.DWT.EnumDWT_Driver.TWAIN_AND_TWAIN64?(t=-1==n.__icaSourceCount?n.getSourceCount():o.D.Promise.resolve(n.__sourceCount),e>=n.__icaSourceCount?(r-=n.__icaSourceCount,n.__currentImageCaptureDriverType=o.I.DWT.EnumDWT_Driver.TWAIN64,t.then((function(){return n._innerFunV2("SetImageCaptureDriverType",(0,a.dv)(o.I.DWT.EnumDWT_Driver.TWAIN64,n._driverType))}))):(n.__currentImageCaptureDriverType=o.I.DWT.EnumDWT_Driver.TWAIN,t.then((function(){return n._innerFunV2("SetImageCaptureDriverType",(0,a.dv)(o.I.DWT.EnumDWT_Driver.TWAIN,n._driverType))})))):o.D.Promise.resolve(0)).then((function(){return r})))},t.GetSourceTypeAsync=function(e){var t=this;return e=+e,t._resetErr(),t._isValid()?t._isMobileMode()?t._mobileNotSupportAsync("GetSourceType"):t._resetImageCaptureDriverType(e).then((function(e){return t._innerFunV2("GetSourceType",(0,a.dv)(e))})):o.D.Promise.reject({code:t._errorCode,message:t._errorString})},t.SelectSourceByIndexAsync=function(e){var t=this;return e=+e,t._resetErr(),t._isValid()?o.D.isNaN(e)?(o.D.Errors.InvalidIndex(t),o.D.Promise.reject({code:t._errorCode,message:t._errorString})):t._isMobileMode()?t._mobileNotSupportAsync("SelectSourceByIndex"):t._resetImageCaptureDriverType(e).then((function(e){return t._innerFunV2("SelectSourceByIndex",(0,a.dv)(e))})):o.D.Promise.reject({code:t._errorCode,message:t._errorString})},t.SetFileXferInfo=function(e,t){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("SetFileXferInfo"):(e=o.I.navInfoSync.bFileSystem?e.replace(/<%/g,"<%25"):e,e=u.replaceLocalFilename(e),this._innerFun("SetFileXferInfo",(0,a.dv)(e,t))))},t.SetImageLayout=function(e,t,n,r){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("SetImageLayout"):this._innerFun("SetImageLayout",(0,a.dv)(e,t,n,r)))},t.CapGet=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CapGet"):this._innerFun("CapGet"))},t.CapGetCurrent=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CapGetCurrent"):this._innerFun("CapGetCurrent"))},t.CapGetDefault=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CapGetDefault"):this._innerFun("CapGetDefault"))},t.CapGetFrameBottom=function(e){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CapGetFrameBottom"):this._innerFun("CapGetFrameBottom",(0,a.dv)(e)))},t.CapGetFrameLeft=function(e){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CapGetFrameLeft"):this._innerFun("CapGetFrameLeft",(0,a.dv)(e)))},t.CapGetFrameRight=function(e){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CapGetFrameRight"):this._innerFun("CapGetFrameRight",(0,a.dv)(e)))},t.CapGetFrameTop=function(e){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CapGetFrameTop"):this._innerFun("CapGetFrameTop",(0,a.dv)(e)))},t.CapGetHelp=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CapGetHelp"):this._innerFun("CapGetHelp"))},t.CapGetLabel=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CapGetLabel"):this._innerFun("CapGetLabel"))},t.CapGetLabels=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CapGetLabels"):this._innerFun("CapGetLabels"))},t.CapIfSupported=function(e){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CapIfSupported"):this._innerFun("CapIfSupported",(0,a.dv)(e)))},t.CapReset=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CapReset"):this._innerFun("CapReset"))},t.CapSet=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CapSet"):this._innerFun("CapSet"))},t.CapSetFrame=function(e,t,n,r,i){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CapSetFrame"):this._innerFun("CapSetFrame",(0,a.dv)(e,t,n,r,i)))},t.GetCapItems=function(e){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("GetCapItems"):this._innerFun("GetCapItems",(0,a.dv)(e)))},t.GetCapItemsString=function(e){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("GetCapItemsString"):this._innerFun("GetCapItemsString",(0,a.dv)(e)))},t.SetCapItems=function(e,t){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("SetCapItems"):this._innerFun("SetCapItems",(0,a.dv)(e,t)))},t.SetCapItemsString=function(e,t){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("SetCapItemsString"):this._innerFun("SetCapItemsString",(0,a.dv)(e,t)))},t.GenerateURLForUploadData=function(e,t,n,r,i){var a,s,u=this,c=[];if(t==o.I.DWT.EnumDWT_ImageType.IT_BMP||t==o.I.DWT.EnumDWT_ImageType.IT_JPG||t==o.I.DWT.EnumDWT_ImageType.IT_PNG){if(!o.D.isArray(e))return o.D.Errors.IndicesNotArray(u),o.D.isFunction(r)&&r(u.ErrorCode,u.ErrorString,"",e,t),"";if(1<e.length)return o.D.Errors.UploadIndexMoreThanOne(u),o.D.isFunction(r)&&r(u.ErrorCode,u.ErrorString,"",e,t),"";if(!u._checkIndices(e))return r(u.ErrorCode,u.ErrorString,"",e,t),!1;var l=u._ImgManager.convertClientIndexToServerId(e[0]);-1!=l&&c.push(l)}else{if(t!=o.I.DWT.EnumDWT_ImageType.IT_TIF&&t!=o.I.DWT.EnumDWT_ImageType.IT_PDF)return o.D.isArray(e)?o.D.Errors.InvalidImageType(u):o.D.Errors.IndicesNotArray(u),o.D.isFunction(r)&&r(u.ErrorCode,u.ErrorString,u.__HTTPPostResponseString,e,t),"";if(o.D.isArray(e)){if(!u._checkIndices(e))return r(u.ErrorCode,u.ErrorString,"",e,t),!1;a=e}else{if(-1!=e)return o.D.Errors.IndicesNotArray(u),o.D.isFunction(r)&&r(u.ErrorCode,u.ErrorString,u.__HTTPPostResponseString,e,t),"";for(a=[],s=0;s<u._ImgManager.count();s++)a.push(s)}o.D.each(a,(function(e){-1!=(e=u._ImgManager.convertClientIndexToServerId(e))&&c.push(e)}))}return o.D.isFunction(n)&&o.D.isFunction(r)?(u._asyncGenerateURLForUploadData(c,t,i,n,(function(e){r(u.ErrorCode,u.ErrorString,u.__HTTPPostResponseString,e,t)})),!0):this._syncGenerateURLForUploadData(c,t,i)},t._syncGenerateURLForUploadData=function(e,t,n){var r=this,i=!1,a=o.I.dcp.managerVersion.join(""),s=",",u=(o.D.isString(n)&&""!=n||(s=n=""),t=["[",'"dcp","dwasm_'+a,'",',t,',"',e.join(","),'"',s,n,"]"].join(""),(s=this._innerFunRaw("GenerateURLForUploadData",t,!1,!1,!0))&&o.D.isArray(s.result)&&1<s.result.length&&(t=s.result[1],1==(n=s.result[0])&&(i=["dcp://dwasm_",a,"/file/",t].join(""))),[]);return o.D.isArray(e)&&o.D.each(e,(function(e){-1<(e=r._ImgManager.convertServerIdToClientIndex(e))&&u.push(e)})),0==i?(o.D.Errors.GenerateURL_InvalidRetFromServer(r),""):i},t._asyncGenerateURLForUploadData=function(e,t,n,r,i){var a=this,s=function(){var t;return o.D.isFunction(i)&&(t=[],o.D.isArray(e)&&o.D.each(e,(function(e){-1<(e=a._ImgManager.convertServerIdToClientIndex(e))&&t.push(e)})),i(t)),""},u=",";if((d=t)==o.I.DWT.EnumDWT_ImageType.IT_BMP||d==o.I.DWT.EnumDWT_ImageType.IT_JPG||d==o.I.DWT.EnumDWT_ImageType.IT_PNG){if(1<e.length)return o.D.Errors.UploadIndexMoreThanOne(a),s(),""}else if(d!=o.I.DWT.EnumDWT_ImageType.IT_TIF&&d!=o.I.DWT.EnumDWT_ImageType.IT_PDF)return o.D.Errors.InvalidImageType(a),s(),"";var c=!1,l=o.I.dcp.managerVersion.join(""),d=(o.D.isString(n)&&""!=n||(u=n=""),["[",'"dcp","dwasm_'+l,'",',d,',"',e.join(","),'"',u,n,"]"].join(""));return this._innerFunRaw("GenerateURLForUploadData",d,!0,!1,!0,(function(n){var i;return n&&o.D.isArray(n.result)&&0<n.result.length?1==n.result[0]&&1<n.result.length?c=["dcp://dwasm_",l,"/file/",n.result[1]].join(""):void 0!==n.exception&&void 0!==n.description?(a._errorCode=n.exception,a._errorString=n.description):o.D.Errors.GenerateURL_InvalidRetFromServer(a):o.D.Errors.GenerateURL_InvalidRetFromServer(a),0==c?(s(),""):(o.D.isFunction(r)&&(i=[],o.D.isArray(e)&&o.D.each(e,(function(e){-1<(e=a._ImgManager.convertServerIdToClientIndex(e))&&i.push(e)})),r(c,i,t)),c)}),s)}},5505:function(e,t,n){n.r(t);var r=n(9623),i=(t=n(4579),n.n(t)),o=(t=n(1614),n.n(t)),a=(t=n(677),n.n(t)),s=n(1695),u=s.D.html5.Funs,c=function e(t,n){if(!s.D.isUndef(t)&&!s.D.isUndef(n)&&null!=t&&null!=n){for(var i in n)t.hasOwnProperty(i)?"object"===(0,r.Z)(t[i])&&e(t[i],n[i]):t[i]=n[i];return t}};(t=s.D.html5.STwain).prototype.checkStartScanParams=function(e,t){var n=this;if(!e)return s.D.Errors.ScanUploader_InvalidScanSetup(n),!1;if(!s.D.isUndefined(t.transferMode)&&0!=e.transferMode&&1!=e.transferMode&&2!=e.transferMode)return s.D.Errors.ScanUploader_InvalidTransferMode(n),!1;if(e.transferMode==s.I.DWT.EnumDWT_TransferMode.TWSX_FILE){if(!e.fileXfer)return s.D.Errors.ScanUploader_InvalidFileXfer(n),!1;if(!s.D.isString(e.fileXfer.fileName)||""==e.fileXfer.fileName)return s.D.Errors.ScanUploader_InvalidFileXferFilename(n),!1;if(!s.D.isNumber(e.fileXfer.fileFormat)||e.fileXfer.fileFormat<0||16<e.fileXfer.fileFormat)return s.D.Errors.ScanUploader_InvalidFileXferFileFormat(n),!1}if(t){if(!s.D.isString(t.type)||""==t.type)return s.D.Errors.ScanUploader_InvalidHttpType(n),!1;if(!t.httpParams)return s.D.Errors.ScanUploader_InvalidHttpParams(n),!1;if(e.transferMode!=s.I.DWT.EnumDWT_TransferMode.TWSX_FILE&&s.D.isUndefined(t.format))return s.D.Errors.ScanUploader_InvalidOutputFormat(n),!1;if(!s.D.isString(t.httpParams.url)||""==t.httpParams.url)return s.D.Errors.ScanUploader_InvalidHttpUrl(n),!1;if(!s.D.isString(t.httpParams.fileName)||""==t.httpParams.fileName)return s.D.Errors.ScanUploader_InvalidHttpFilename(n),!1}return!0},t.prototype.startScan=function(e){var t=this;if(t._resetErr(),!t._isValid())return!1;if(t._isMobileMode())return t._mobileNotSupportAsync("startScan");if(1==t.startScanFlag)return s.D.Errors.StartScanFailed(t),s.D.Promise.reject({code:t.ErrorCode,message:t.ErrorString});t.startScanFlag=!0,s.D.isObject(e)||(e={});var n,r,l=!1,d=!0,h=!0,g=!0,f=!1,m=e.onFinally,p=[],_=[],v=0,I=1,y=[],b={type:"http",format:s.I.DWT.EnumDWT_ImageType.IT_PDF,reTries:3,useUploader:!1,singlePost:!0,showProgressBar:!0,removeAfterOutput:!0,httpParams:{url:"",headers:{},formFields:{},remoteName:"RemoteFile",fileName:""}},D=s.D.clone(e),T=e,S=D.funcScanStatus;if(delete D.funcScanStatus,D.bfuncScanStatus=!!s.D.isFunction(S),!(D.outputSetup?(e={pdfSetup:{},tiffSetup:{}},c(D.outputSetup,b),r=D.outputSetup,delete D.outputSetup,!r.pdfSetup||r.format!=s.I.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF&&r.format!=s.I.DWT.EnumDWT_ImageType.IT_PDF||s.D.mix(e.pdfSetup,r.pdfSetup),!r.tiffSetup||r.format!=s.I.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF&&r.format!=s.I.DWT.EnumDWT_ImageType.IT_TIF||s.D.mix(e.tiffSetup,r.tiffSetup),r.format!=s.I.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF&&r.format!=s.I.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF||(r.singlePost=!0),s.D.isNumber(r.httpParams.threads)&&(I=r.httpParams.threads),l=s.D.stringify(e),t.checkStartScanParams(D,r)):((r=b).type="",t.checkStartScanParams(D,!1))))return new s.D.Promise((function(e,n){d&&(n({code:t.ErrorCode,message:t.ErrorString,response:""}),d=!1,t.startScanFlag=!1)}));r.funcHttpUploadStatus&&(f=r.funcHttpUploadStatus);var w,C,E,M,P,A=t.HttpFieldNameOfUploadedImage,x=t.MaxUploadImageSize,R=t.IfShowProgressBar,k=t.__IfShowCancelDialogWhenImageTransfer,L=t.__OnPostTransferAsync,F=t.__OnPostAllTransfers,W=t.__OnHttpUploadStatus,O=t.__insertingIndex,B=t.__IfAppendImage,N=t.httpFormFields,V=t._tiffCompressionType,U=!1,G=r.showProgressBar,j=function(e){var t=!0;s.D.each(y,(function(e,n){-1==e.st&&(t=!1)})),t?w(e):i()((function(){j(e)}),200)};return w=function(e){e.__OnPostTransferAsync=L,e.__OnPostAllTransfers=F,e.__OnHttpUploadStatus=W,e.HttpFieldNameOfUploadedImage=A,e.__maxUploadImageSize=x,e.IfShowProgressBar=R,e.__IfShowCancelDialogWhenImageTransfer=k,e.__insertingIndex=O,e.__IfAppendImage=B,e.httpFormFields=N,e._tiffCompressionType=V,e.__OnCancel=!1,s.I.FileUploader&&(s.I.FileUploader.nextLoopTime=600),e.startScanFlag=!1},C=function(e,t,n){h?(t(n),j(e)):i()((function(){C(e,t,n)}),200)},E=function(e,n){U=!0,d&&(d=!1,h||t._innerSendCmd("CancelAllPendingTransfers"),C(t,e,n))},M=function(e,t,n,r){var o,a;s.D.isFunction(f)&&(t=t,o=0,s.D.isNumber(r)&&0<r&&(o=r),a={fileName:t,percentage:n,statusCode:o,responseString:e.__HTTPPostResponseString},i()((function(){f(a)}),10))},t.__OnCancel=!1,t.__HTTPPostResponseString="",t.IfShowProgressBar=G,t.__IfShowCancelDialogWhenImageTransfer=G,s.D.isNumber(D.insertingIndex)&&-1<D.insertingIndex&&(t.__insertingIndex=D.insertingIndex,t.__IfAppendImage=!1),t.__OnHttpUploadStatus=!!s.D.isFunction(f)&&f,r.useUploader&&!s.I.FileUploader?new s.D.Promise((function(e,n){s.D.Errors.Uploader_ModuleError(t),h=!0,E(n,{code:t.ErrorCode,message:t.ErrorString,response:""})})):(n=r.reTries,r.useUploader?(e=r.httpParams.url,o()(s.D).call(s.D,e,"http://")||o()(s.D).call(s.D,e,"https://")||(b=window.location.href,P=a()(b).call(b,"/"),b=b.substring(0,P+1),r.httpParams.url=b+e)):(s.D.each(r.httpParams.headers,(function(e,n){t.SetHTTPHeader(n,e)})),s.D.each(r.httpParams.formFields,(function(e,n){t.SetHTTPFormField(n,e)}))),""!==r.httpParams.remoteName&&(t.HttpFieldNameOfUploadedImage=r.httpParams.remoteName),new s.D.Promise((function(e,n){r.useUploader?s.I.FileUploader.Init(0,(function(t){e({uploadManager:t})}),(function(e,r){e={code:t._errorCode=e,message:t._errorString=r,response:t.__HTTPPostResponseString},h=!0,E(n,e)})):e({})})).then((function(e){return new s.D.Promise((function(o,a){var c=function e(){(D.transferMode==s.I.DWT.EnumDWT_TransferMode.TWSX_FILE?v==_.length:v==p.length)?(s.D.closeProgress(t,"Scan Upload"),U=!0,o(T),w(t)):i()(e,100)},d=(S&&s.D.isFunction(S)&&(t.__OnPreAllTransfersAsync=function(e){S(e)}),t.RegisterEvent("OnPostTransferAsync",(function(o){var c,d,m=r.httpParams.url,b=t.objImageIndexManager.convertGuidToServerId(o.imageId),T=r.singlePost,w=D.transferMode==s.I.DWT.EnumDWT_TransferMode.TWSX_FILE,C=r.removeAfterOutput,P=0;if(g=g&&(h=!1),w?(P=_.length,_.push(o.path)):(P=p.length,p.push(b)),S&&s.D.isFunction(S)&&(d={event:"postTransfer",bScanCompleted:!1,result:{currentPageNum:P+1}},i()((function(){S(d)}),10)),U)return!1;if("http"==r.type){var A,x,R=u.cformat(r.httpParams.fileName,P+1),k=u.cformat(r.httpParams.remoteName,P+1);if(T||"http"!=r.type);else if(s.D.isNumber(r.httpParams.maxSizeLimit)&&(t.__maxUploadImageSize=r.httpParams.maxSizeLimit),r.useUploader){G&&(s.I.FileUploader.nextLoopTime=300,s.D.showProgress(t,"Scan Upload",!0)),A=function(e,n){return t.__HTTPPostResponseString=n,M(t,e._fileName,100,200),t._OnPercentDone([0,100,"","http",e._fileName]),G&&s.D.closeProgress(t,"Scan Upload"),!w&&r.removeAfterOutput?i()((function(){-1<t._ImgManager.convertServerIdToClientIndex(b)?t._removeImageById(b,(function(){v++}),(function(){v++})):v++}),100):v++,!0};var L,F,W,O,B=e.uploadManager;L=function(){if(G)for(var e=(w?_:p).length,n=0;n<e;n++)s.D.closeProgress(t,"Scan Upload");return!w&&r.removeAfterOutput&&i()((function(){-1<t._ImgManager.convertServerIdToClientIndex(b)&&t._removeImageById(b)}),100),B.CancelAllUpload(),E(a,{code:t.ErrorCode,message:t.ErrorString,response:t.__HTTPPostResponseString}),!1},x=function(e,n,r,i){var o=303;12==n?o=404:13==n?o=500:14==n&&(o=503),t._errorCode=n,t._errorString=r,t.__HTTPPostResponseString=i,M(t,R,100,o),L()},t.__OnCancel=function(){x(null,-1032,"User cancelled the operation.","")},F=function(){t.__HTTPPostResponseString="",M(t,R,100,303),L()},w?(W=B.CreateJob(),O=W.FormField,s.D.each(r.httpParams.headers,(function(e,t){W.HttpHeader[t]=e})),s.D.each(r.httpParams.formFields,(function(e,t){O.Add(t,e)})),W.ServerUrl=m,W.bDeleteFile=C,W.reTries=n,s.D.isNumber(r.httpParams.maxSizeLimit)&&(W.maxSizeLimit=r.httpParams.maxSizeLimit),W._fileName=R,W.SourceValue.Add(o.path,R,k),W.ImageType=D.fileXfer.fileFormat,W.ThreadNum=I,W.OnRunSuccess=A,W.OnRunFailure=x,(G||s.D.isFunction(f))&&(W.OnUploadTransferPercentage=function(e,n){0<n&&n<=100&&(100==n&&(n=99),G&&t._OnPercentDone([0,n,"","http",e._fileName]),s.D.isFunction(f)&&M(t,e._fileName,n,0))},s.D.cancelFrome=5,G&&t._OnPercentDone([0,-1,s.I.MSG.Uploading,"http",R]),M(t,R,0,0)),B.Run(W)):((c=r.format)==s.I.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF?c=s.I.DWT.EnumDWT_ImageType.IT_PDF:c==s.I.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF&&(c=s.I.DWT.EnumDWT_ImageType.IT_TIF),G&&(s.D.cancelFrome=5,t._OnPercentDone([0,-1,s.I.MSG.Encoding,"http",R])),t._asyncGenerateURLForUploadData([b],c,l,(function(e){var i=B.CreateJob(),o=i.FormField;s.D.each(r.httpParams.headers,(function(e,t){i.HttpHeader[t]=e})),s.D.each(r.httpParams.formFields,(function(e,t){o.Add(t,e)})),i.ServerUrl=m,i.bDeleteFile=C,i.reTries=n,s.D.isNumber(r.httpParams.maxSizeLimit)&&(i.maxSizeLimit=r.httpParams.maxSizeLimit),i._fileName=R,i.SourceValue.Add(e,R,k),i.ImageType=c,i.ThreadNum=I,i.OnRunSuccess=A,i.OnRunFailure=x,(G||s.D.isFunction(f))&&(i.OnUploadTransferPercentage=function(e,n){0<n&&n<=100&&(100==n&&(n=99),G&&t._OnPercentDone([0,n,"","http",e._fileName]),s.D.isFunction(f)&&M(t,e._fileName,n,0))},s.D.cancelFrome=5,G&&t._OnPercentDone([0,-1,s.I.MSG.Uploading,"http",R]),M(t,R,0,0)),B.Run(i)}),F))}else{var N={id:b,st:-1,bCancel:!1};if(y.push(N),0==P&&s.D.showProgress(t,"Scan Upload",!0),w)A=function(e){return N.st=0,!w&&r.removeAfterOutput?i()((function(){-1<t._ImgManager.convertServerIdToClientIndex(b)?t._removeImageById(b,(function(){v++}),(function(){v++})):v++}),100):v++,!0},x=function(){!w&&r.removeAfterOutput&&i()((function(){-1<t._ImgManager.convertServerIdToClientIndex(b)&&t._removeImageById(b)}),100);var e={code:t.ErrorCode,message:t.ErrorString,response:t.__HTTPPostResponseString};return s.D.closeProgress(t,"Scan Upload"),2==N.st||(N.st=1,s.D.each(y,(function(e,t){-1==e.st&&(e.bCancel=!0)})),E(a,e)),!1},t._innerUploadDirectly(m,o.path,R,G,C,n,!1,N,A,x);else{if(A=function(e,n){return N.st=0,!w&&r.removeAfterOutput?i()((function(){-1<t._ImgManager.convertServerIdToClientIndex(b)?t._removeImageById(b,(function(){v++}),(function(){v++})):v++}),100):v++,!0},x=function(e){!w&&r.removeAfterOutput&&i()((function(){-1<t._ImgManager.convertServerIdToClientIndex(b)&&t._removeImageById(b)}),100);var n={code:t.ErrorCode,message:t.ErrorString,response:t.__HTTPPostResponseString};return s.D.closeProgress(t,"Scan Upload"),2==N.st||(N.st=1,s.D.each(y,(function(e,t){-1==e.st&&(e.bCancel=!0)})),E(a,n)),!1},s.D.isUndefined(c=r.format))return T=t._ImgManager.convertServerIdToClientIndex(b),s.D.Errors.InvalidImageType(t),x([T]),!1;c==s.I.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF?c=s.I.DWT.EnumDWT_ImageType.IT_PDF:c==s.I.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF&&(c=s.I.DWT.EnumDWT_ImageType.IT_TIF),s.D._asyncUploadCmd(P={bOnlyUploadForm:!1,method:"startScan",_this:t,url:m,serverIds:[b],enumImageType:c,saveSetup:l,fileName:R,dataFormat:s.I.DWT.EnumDWT_UploadDataFormat.Binary,retry:n,bOnlyEmptyIsOK:!1,objUploadFileStatus:N,asyncSuccessFunc:A,asyncFailureFunc:x})}}}})),t.__OnPostAllTransfers=function(){var d,g,y,b,C,P,A,x,R,k,L,F,W,O,B=-1,N=s.I.DWT.EnumDWT_UploadDataFormat.Binary,V=r.httpParams.url,j=r.singlePost,H=D.transferMode==s.I.DWT.EnumDWT_TransferMode.TWSX_FILE,z=r.removeAfterOutput;if(S&&s.D.isFunction(S)&&(d={event:"postTransfer",bScanCompleted:!0,result:{currentPageNum:B=(H?_:p).length}},i()((function(){S(d)}),10)),0==B)return s.D.Errors.SourceHasNothingToCapture(t),void i()((function(){h=!0,m&&s.D.isFunction(m)&&m(),E(a,{code:t.ErrorCode,message:t.ErrorString,response:t.__HTTPPostResponseString})}),1e3);if(0<B&&-1029==t.ErrorCode)t._errorCode=0;else if(0!=t.ErrorCode)return h=!0,m&&s.D.isFunction(m)&&m(),void E(a,B={code:t.ErrorCode,message:t.ErrorString,response:t.__HTTPPostResponseString});"http"==r.type&&j&&"http"==r.type&&(b=p,s.D.isNumber(r.httpParams.maxSizeLimit)&&(t.__maxUploadImageSize=r.httpParams.maxSizeLimit),r.useUploader?(P=(C=e.uploadManager).CreateJob(),A=P.FormField,G&&(s.I.FileUploader.nextLoopTime=300,s.D.showProgress(t,"Scan Upload",!0)),g=function(e,n){return e=(e=e._fileName)||"",t._bServerPercentDone=!0,t.__HTTPPostResponseString=n,M(t,e,100,200),t._OnPercentDone([0,100,"","http"]),G&&s.D.closeProgress(t,"Scan Upload"),!H&&r.removeAfterOutput?i()((function(){v=0,s.D.each(b,(function(e){-1<t._ImgManager.convertServerIdToClientIndex(e)?t._removeImageById(e,(function(){v++}),(function(){v++})):v++})),i()(c,100)}),100):(U=!0,o(T),w(t)),!0},x=function(){return t._OnPercentDone([0,100,"","http"]),G&&s.D.closeProgress(t,"Scan Upload"),t._bServerPercentDone=!0,E(a,{code:t.ErrorCode,message:t.ErrorString,response:t.__HTTPPostResponseString}),!H&&r.removeAfterOutput&&i()((function(){s.D.each(b,(function(e){-1<t._ImgManager.convertServerIdToClientIndex(e)&&t._removeImageById(e)}))}),100),!1},y=function(e,n,r,i){var o=303;12==n?o=404:13==n?o=500:14==n&&(o=503),t._errorCode=n,t._errorString=r,t.__HTTPPostResponseString=i,M(t,"",100,o),x()},t.__OnCancel=function(){y(null,-1032,"User cancelled the operation.","")},R=function(){t.__HTTPPostResponseString="",M(t,"",100,303),x()},H?(s.D.each(r.httpParams.headers,(function(e,t){P.HttpHeader[t]=e})),s.D.each(r.httpParams.formFields,(function(e,t){A.Add(t,e)})),P.ServerUrl=V,P.bDeleteFile=z,P.reTries=n,s.D.isNumber(r.httpParams.maxSizeLimit)&&(P.maxSizeLimit=r.httpParams.maxSizeLimit),s.D.each(_,(function(e,t){var n=u.cformat(r.httpParams.fileName,t+1);t=u.cformat(r.httpParams.remoteName,t+1),P.SourceValue.Add(e,n,t)})),P.ImageType=D.fileXfer.fileFormat,P.ThreadNum=I,P.OnRunSuccess=g,P.OnRunFailure=y,(G||s.D.isFunction(f))&&(P.OnUploadTransferPercentage=function(e,n){0<n&&n<=100&&(100==n&&(n=99),G&&t._OnPercentDone([0,n,"","http"]),s.D.isFunction(f)&&M(t,"",n=99<n?99:n,0))},G&&t._OnPercentDone([0,-1,s.I.MSG.Uploading,"http"]),M(t,"",0,0)),C.Run(P)):(O=r.format)==s.I.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF||O==s.I.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF?(O==s.I.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF?O=s.I.DWT.EnumDWT_ImageType.IT_PDF:O==s.I.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF&&(O=s.I.DWT.EnumDWT_ImageType.IT_TIF),G&&t._OnPercentDone([0,-1,s.I.MSG.Encoding,"http"]),t._asyncGenerateURLForUploadData(b,O,l,(function(e){s.D.each(r.httpParams.headers,(function(e,t){P.HttpHeader[t]=e})),s.D.each(r.httpParams.formFields,(function(e,t){A.Add(t,e)})),P.ServerUrl=V,P.bDeleteFile=z,P.reTries=n,s.D.isNumber(r.httpParams.maxSizeLimit)&&(P.maxSizeLimit=r.httpParams.maxSizeLimit);var i=u.cformat(r.httpParams.fileName,1),o=u.cformat(r.httpParams.remoteName,1);P._fileName=i,P.SourceValue.Add(e,i,o),P.ImageType=O,P.ThreadNum=I,P.OnRunSuccess=g,P.OnRunFailure=y,(G||s.D.isFunction(f))&&(P.OnUploadTransferPercentage=function(e,n){0<n&&n<=100&&(100==n&&(n=99),G&&t._OnPercentDone([0,n,"","http",i]),s.D.isFunction(f)&&M(t,i,n,0))},s.D.cancelFrome=5,G&&t._OnPercentDone([0,-1,s.I.MSG.Uploading,"http",i])),C.Run(P)}),R)):(k=b.length,F=L=0,W="",G&&(t._bServerPercentDone=!1,t._OnPercentDone([0,-1,s.I.MSG.Encoding,"http"])),s.D.each(b,(function(e,i){var o=u.cformat(r.httpParams.fileName,i+1),a=u.cformat(r.httpParams.remoteName,i+1);t._asyncGenerateURLForUploadData([e],O,l,(function(e){F=(L+1)/k*100,W=[L+1,"/",k].join(""),t._OnPercentDone([0,F,W,"http"]),P.SourceValue.Add(e,o,a),k<=++L&&(G&&(t._bServerPercentDone=!0),s.D.each(r.httpParams.headers,(function(e,t){P.HttpHeader[t]=e})),s.D.each(r.httpParams.formFields,(function(e,t){A.Add(t,e)})),P.ServerUrl=V,P.bDeleteFile=z,P.reTries=n,s.D.isNumber(r.httpParams.maxSizeLimit)&&(P.maxSizeLimit=r.httpParams.maxSizeLimit),P.ImageType=O,P.ThreadNum=I,P.OnRunSuccess=g,P.OnRunFailure=y,(G||s.D.isFunction(f))&&(P.OnUploadTransferPercentage=function(e,n){0<n&&n<=100&&(100==n&&(n=99),G&&t._OnPercentDone([0,n,"","http"]),s.D.isFunction(f)&&M(t,"",n=99<n?99:n,0))},G&&t._OnPercentDone([0,-1,s.I.MSG.Uploading,"http"])),C.Run(P))}),R)})))):H?(g=function(e){return t._bServerPercentDone=!0,!H&&r.removeAfterOutput?i()((function(){v=0,s.D.each(b,(function(e){-1<t._ImgManager.convertServerIdToClientIndex(e)?t._removeImageById(e,(function(){v++}),(function(){v++})):v++})),i()(c,100)}),100):(U=!0,o(T),w(t)),!0},y=function(e){return t._bServerPercentDone=!0,E(a,{code:t.ErrorCode,message:t.ErrorString,response:t.__HTTPPostResponseString}),!H&&r.removeAfterOutput&&i()((function(){s.D.each(b,(function(e){-1<t._ImgManager.convertServerIdToClientIndex(e)&&t._removeImageById(e)}))}),100),!1},t._innerUploadFilesDirectly(V,_,r.httpParams.fileName,G,z,n,!1,g,y)):(g=function(e,n){return t._bServerPercentDone=!0,!H&&r.removeAfterOutput?i()((function(){v=0,s.D.each(b,(function(e){-1<t._ImgManager.convertServerIdToClientIndex(e)?t._removeImageById(e,(function(){v++}),(function(){v++})):v++})),i()(c,100)}),100):(U=!0,o(T),w(t)),!0},y=function(e){return t._bServerPercentDone=!0,E(a,{code:t.ErrorCode,message:t.ErrorString,response:t.__HTTPPostResponseString}),!H&&r.removeAfterOutput&&i()((function(){s.D.each(b,(function(e){-1<t._ImgManager.convertServerIdToClientIndex(e)&&t._removeImageById(e)}))}),100),!1},(O=r.format)==s.I.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF||O==s.I.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF?(O==s.I.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF?O=s.I.DWT.EnumDWT_ImageType.IT_PDF:O==s.I.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF&&(O=s.I.DWT.EnumDWT_ImageType.IT_TIF),B=u.cformat(r.httpParams.fileName,1),u.cformat(r.httpParams.remoteName,1),s.D._asyncUploadCmd(B={bOnlyUploadForm:!1,method:"startScan",_this:t,url:V,serverIds:b,enumImageType:O,saveSetup:l,fileName:B,dataFormat:N,retry:n,bOnlyEmptyIsOK:!1,objUploadFileStatus:!1,asyncSuccessFunc:g,asyncFailureFunc:y})):0<b.length&&t._asyncUploadFilesCmd(V,b,O,r.httpParams.fileName,l,G,n,!1,g,y))),h=!0,m&&s.D.isFunction(m)&&m()},function(){"http"!=r.type?(U=!0,o(T),w(t)):r.singlePost||i()(c,100)});t._startScan(D,d,(function(e){if(-1029==t.ErrorCode&&(D.transferMode==s.I.DWT.EnumDWT_TransferMode.TWSX_FILE?0<_.length:0<p.length))return t._errorCode=0,d();E(a,{code:t.ErrorCode,message:t.ErrorString,response:t.__HTTPPostResponseString})}))}))})))}},9475:function(e,t,n){n.r(t);var r=n(9623),i=(t=n(3662),n.n(t)),o=(t=n(4579),n.n(t)),a=(t=n(5683),n.n(t)),s=n(1695),u=n(1188),c=n(8420),l=n(7344),d=function(){function e(){(0,c.Z)(this,e)}return(0,l.Z)(e,[{key:"convertServerIdToGuid",value:function(e){return+e+239514e3}},{key:"convertGuidToServerId",value:function(e){return+e-239514e3}}]),e}(),h=s.D.html5.Funs,g=s.I.dcp;(s.D.html5.STwain=function(e){var t=this,n=(e=e||{}).bNoViewer,r=e.bLocalService;(t._destroy=!1,t.config=e,t.clientId=s.D.getRandom(),t._id=e.id,e.container?t._containerElement=e.container:e.containerID&&(t._containerElement=s.D.get(e.containerID)),t._bBindViewer=!n,t._customIP=!1,t._ssl=s.D.detect.ssl,e.customIP?(t._customIP=!0,t._host=e.host):t._host=s.D.product.host,""==t._host||s.D.isLocalIP(t._host)?(t._bLocalService=!!r,t._bRemoteMode=!1):(t._bLocalService=!0,t._bRemoteMode=!0),(e.customIP||g.bEnhancedMode)&&(t._port=e.port),t.bReady=!1,t.httpFormFields={},t._objWS=null,t.__wsRetry=0,t.curCommand=[],t.__OnInternetTransferPercentage=e.onInternetTransferPercentage||"",t.__OnInternetTransferPercentageEx=e.onInternetTransferPercentageEx||"",t.__OnReady=e.onReady||null,t.__OnWSReconnect=e.onWSReconnect||null,t.__OnWSClose=e.onWSClose||null,t.__OnWSMessage=e.onWSMessage||null,t.__OnWSError=e.onWSError||null,t.__OnPercentDone=e.onPercentDone||"",t.__OnPrintMsg=e.onPrintMsg||"",t.__OnResult=e.onResult||"",t.HTTPPassword=e.HTTPPassword||"",t.HTTPPort=e.HTTPPort||(s.D.detect.ssl?443:80),t.HTTPUserName=e.HTTPUserName||"",t.__HTTPPostResponseString="",t.__strHttpContentTypeFieldValue="application/octet-stream",t.__IfShowProgressBar=!0,t.__IfShowCancelDialogWhenImageTransfer=!0,t._errorCode=0,t._errorString="",t.__bLoadingImage=!1,t.__bAcquireImageNow=!1,t.__bOpenFileNow=!1,t.__backgroundColor=!1,t.__addon={},t.__remoteFilename="RemoteFile",t.__sourceName=[],t.__defaultSourceName="",t.__sourceCount=0,t.__icaSourceCount=-1,t.__serverId="",t.__bConnecting=!1,t.__bTrial=!1,t.__licenseInfo=!1,t.__httpHeaderMap=!1,t.__bForceClose=!1,t.__strProductName=t._bLocalService?"":s.I.DWT.ProductName,t.__versionInfo=s.I.DWT.JSVersion,t.__bMustUpgradeService=!1,t.__withCredentials=!1,t._moduleSize=1048576,t._segementUploadThreshold=s.I.dcp.b64bit?4294967296:524288e3,t._driverType=s.I.DWT.EnumDWT_Driver.TWAIN,t.__IfAppendImage=!0,t.__maxImagesInBuffer=32767,t.__maxUploadImageSize=-1,t.__insertingIndex=-1,t.objImageIndexManager=new d(t.__maxImagesInBuffer),t._bServerPercentDone=!0,t._aryBitmapCache=[],t._aryTiffTag=[],t._tiffCompressionType=s.I.DWT.EnumDWT_TIFFCompressionType.TIFF_AUTO,t._jpgQuality=80,t._pdfConvertMode=3,t._pdfRealConvertMode=3,t._pdfResolution=200,t._pdfPassword="",t._ifSSL=s.I.navInfoSync.bSSL,t._bRegistedLoad=!1,t._logLevel=0,t._scaleDownThreshold=0,t._pdfWriteSetting={},t.__serverPlatform=s.I.DWT.EnumDWT_PlatformType.enumUnknown,t.bPageFocus=!0,t.bServerAlwaysFocusOnPopupWindow=!0,s.D.License.isLTS()&&(t._blts=!0),n=t).__OnAfterOperate=(r=(r=e)||{}).onAfterOperate||"",n.__OnBeforeOperate=r.onBeforeOperate||"",n.__OnOperateStatus=r.onOperateStatus||"",n.__OnBitmapChanged=r.onBitmapChanged||"",n.__OnGetFilePath=r.onGetFilePath||"",n.__OnPreAllTransfers=r.onPreAllTransfers||"",n.__OnPreTransfer=r.onPreTransfer||"",n.__OnPostLoad=r.onPostLoad||"",n.__OnPostTransfer=r.onPostTransfer||"",n.__OnPostAllTransfers=r.onPostAllTransfers||"",n.__OnSourceUIClose=r.onSourceUIClose||"",n.__OnTransferCancelled=r.onTransferCancelled||"",n.__OnTransferError=r.onTransferError||"",n.__OnInternetTransferPercentage=r.onInternetTransferPercentage||"",n.__OnInternetTransferPercentageEx=r.onInternetTransferPercentageEx||"",n.__OnRemoteScanStatusAsync=r.onRemoteScanStatusAsync||""},t=s.D.html5.STwain.prototype).getInstance=function(){return this},t._getWebTwainId=function(){return this._id},t._isMobileMode=function(){return!(!s.D.isLocalIP(this._host)&&""!=this._host||this._bLocalService)},t._isPC=function(){var e=s.I.navInfo;return e.bWin||e.bMac||e.bLinux},t._resetErr=function(){this._errorCode=0,this._errorString="";var e=s.I.DWT.licenseException;e.code=0,e.message=""},t._isValid=function(){return!this._destroy||(s.D.Errors.Destroyed(this),!1)},t._isBindViewer=function(){return this._bBindViewer},t._isNoViewer=function(){return!this._bBindViewer},t._mobileNotSupport=function(e,t){return s.D.Errors.MobileNotSupport(this,e),s.D.isFunction(t)&&t(this.ErrorCode,this.ErrorString),!1},t._mobileNotSupportAsync=function(e){return s.D.Errors.MobileNotSupport(this,e),s.D.Promise.reject({code:this.ErrorCode,message:this.ErrorString})},t._serviceNotSupportAsync=function(e){return s.D.Errors.ServiceNotSupport(this,e),s.D.Promise.reject({code:this.ErrorCode,message:this.ErrorString})},t._nouiNotSupport=function(e,t){return s.D.Errors.CannotCallUIMethodWhenNotBindDefaultViewer(this,e),s.D.isFunction(t)&&t(this.ErrorCode,this.ErrorString),!1},t._OnRecieveMsg=function(e){var t,n=this;if(e.event)if("OnBitmapChanged"!=e.event)h.handleEvent(n,e,t);else{if(e.cmdId)for(var r=n.curCommand.length-1;0<=r;r--)if(n.curCommand[r].cmdId==e.cmdId)return void h.handleOnBitmapChangedEvent(n,e,t=n.curCommand[r].currentFileName);h.handleOnBitmapChangedEvent(n,e)}else{if(e.cmdId){for(var o=-1,a=n.curCommand.length-1;0<=a;a--)if(n.curCommand[a].cmdId==e.cmdId){o=a;var c,l=i()(c=n.curCommand).call(c,o,1)[0];break}if(o<0)return}else l=n.curCommand.pop()||{};if(void 0!==e.exception&&void 0!==e.description?(n._errorCode=e.exception,n._errorString=e.description):"StartScan"!=e.method&&"GetAddOnVersion"!=e.method&&(n._errorCode=0,n._errorString=""),"ReadBarcode"==e.method||"OCRRecognize"==e.method||e.request&&"OCRProRecognize"==e.request.method)l.sFun&&l.sFun(e);else{if("ActiveUI"==e.method||"VersionInfo"==e.method||"ConvertToBase64"==e.method||"SaveSelectedImagesToBase64Binary"==e.method||"ConvertToBlob"==e.method){if(l.sFun&&0<e.result.length)return void l.sFun(e.result)}else if("ShowFileDialog"==e.method||"SplitTiff"==e.method||"SplitPDF"==e.method||"EncodeAsBase64"==e.method||"ProductKey"==e.method||"GetSourceNames"==e.method||"GetSkewAngle"==e.method||"GetImageInfo"==e.method){if(l.sFun)return void l.sFun(e.result)}else if("GetLicenseInfo"==l.cmd&&s.D.isArray(e.Detail)){if(l.sFun)return void l.sFun(e)}else if("SetCapabilities"==e.method)return"exception"in e&&"0"!=e.exception?(e.result.errorCode&&e.result.errorString?(n._errorCode=e.result.errorCode,n._errorString=e.result.errorString):(n._errorCode=e.exception,n._errorString=e.description),l.fFun&&l.fFun(e.result)):l.sFun&&l.sFun(e.result),void(e=null);if(e.result&&e.result.length&&("1"==e.result[0]||1==e.result[0]))l.sFun&&l.sFun();else if(e.exception){var d=!1;!(d=l.fFun?l.fFun(n._errorString):d)&&e.exception&&e.exception<0&&-2115!=e.exception&&s.D.isFunction(n.__OnPrintMsg)&&n.__OnPrintMsg(n._errorString)}else{if("LoadImage"==e.method||"LoadImageEx"==e.method||"LoadImageFromBytes"==e.method||"LoadImageFromBase64Binary"==e.method||"LoadDibFromClipboard"==e.method||"FTPDownload"==e.method||"FTPDownloadEx"==e.method)return l.sFun&&l.sFun(e.result),void(e=null);l.fFun&&l.fFun((0,u.yN)(["result:"],e.result))}}}},t._OnReady=function(e){var t=this,n=t._getWebTwainId();if(s.D.detect.starting=!1,s.D.detect.bOK=!0,t.bReady=!0,t.__wsRetry=0,!e&&s.I.DWT.ContainerMap[n]){var u=s.I.DWT.ContainerMap[n];if(!u._destroy)return void(t!=u&&(s.D.isFunction(t.__OnReady)&&t.__OnReady(u),t.dispose()));s.I.DWT.ContainerMap[n]=null}if(t._bLocalService&&s.I.DWT.IfUseWSPool){if(null===(l=t._objWS))return;if(l.onopen=null,t.httpUrl=s.D.getHttpUrl({host:t._host,ssl:t._ssl,port:t._port}),l.onmessage=function(e){var n=e.data;if("object"===(0,r.Z)(n)){if(s.I.DWT.ConnectWithSocket){for(var o=t.curCommand.length-1;0<=o;o--)if("ConvertToBlob"==t.curCommand[o].cmd||"GetImageByIndex"==t.curCommand[o].cmd){var a,u=o,c=i()(a=t.curCommand).call(a,u,1)[0];break}c.sFun(n)}e=n=null}else{e=n.replace(/\0/g,"");try{e=s.D.parse(e)}catch(d){s.D.log(n)}e.id&&s.D._deliverMsg(l.url,e)}},l.onclose=l.onerror=function(e){s.D.page.bUnload||s.D.detect.starting||(o()(s.D._reconnectWSPool,500),s.D.detect.starting=!0),e&&s.D.log("websocket error: "+e),h.hideMask(!0),s.D.detect.bOK=!1,s.I.Lib.each(s.I.DWT.globalWS,(function(e,t){if(e==l)return i()(e=s.I.DWT.globalWS).call(e,t,1),!1}))},e)return void t._innerActiveUI((function(e){var n,r,o,a=t.__serverId;e&&6<=e.length?(n=e[1],o=e[5],t.__strProductName=r=e[2],s.D.isString(o)&&("win"==o?t.__serverPlatform=s.I.DWT.EnumDWT_PlatformType.enumWindow:"linux"==o?t.__serverPlatform=s.I.DWT.EnumDWT_PlatformType.enumLinux:"mac"==o?t.__serverPlatform=s.I.DWT.EnumDWT_PlatformType.enumMac:"embed"==o?t.__serverPlatform=s.I.DWT.EnumDWT_PlatformType.enumEmbed:"chromeos"==o&&(t.__serverPlatform=s.I.DWT.EnumDWT_PlatformType.enumChromeOS))):e&&3<=e.length?(n=e[1],t.__strProductName=r=e[2]):e&&2<=e.length?n=e[1]:s.D.log("ActiveUI return parameters error."),r=r&&r.toLowerCase(),t.__serverId=n,t._blts?s.I.DWT.lglic(s.I.DWT.EnumInstance.dwt_desktop).then((function(e){return s.D.closeProgress(t,"Reconnect"),t.SetLTSLicenseAsync(e.ar)})).then((function(e){s.I.DWT.laddDWTObj(t),s.I.DWT.lcheckLic(s.I.DWT.EnumInstance.dwt_desktop,e)}),(function(e){e&&(s.I.DWT.lsetException(e.code||e.ltsErrorCode,e.message),s.I.DWT.OnLicenseException()),t.__unload(),s.I.DWT.ContainerMap={},i()(e=s.D.detect.arySTwains).call(e,0),i()(e=s.D.detect.arySTwainsByIP).call(e,0)})):(s.D.closeProgress(t,"Reconnect"),t.SetProductKeyAsync(s.I.DWT.ProductKey)),a!=n?(s.D.Errors.Server_Restarted(t),t._ImgManager&&(t._ImgManager.clear(),t._ImgManager.OnReady())):t._ImgManager&&t._innerFunRawV2("HowManyImagesInBuffer").then((function(e){e&&e.result&&0==e.result[0]&&t._ImgManager.clear(),t._ImgManager.OnReady(),t._resetErr()}))}));s.D.isLocalIP(t._host)&&(s.D.LS.item("DWT_port",t._port),s.D.LS.item("DWT_ssl",t._ssl?"true":"false"))}else if(t._bLocalService&&!s.I.DWT.IfUseWSPool){var c,l=t._objWS;if(t._customIP?c={host:t._host,ssl:t._ssl,port:t._port}:(c=s.D.detect.urls[s.D.detect.cUrlIndex])?c.host=s.D.product.host:c={host:s.D.product.host,ssl:t._ssl,port:t._port},t.httpUrl=s.D.getHttpUrl(c),null===l)return;if(l.onopen=null,l.onmessage=function(e){var n,o=e.data;if("object"===(0,r.Z)(o)){if(s.I.DWT.ConnectWithSocket){for(var u=t.curCommand.length-1;0<=u;u--)if("ConvertToBlob"==t.curCommand[u].cmd||"GetImageByIndex"==t.curCommand[u].cmd){var c,l=u,d=i()(c=t.curCommand).call(c,l,1)[0];break}d.sFun(o)}e=o=null}else{var h;if(t.__OnWSMessage&&t.__OnWSMessage(o),e=o.replace(/\0/g,""),0<=a()(e).call(e,'"method" : "EnableBuffer"')||0<=a()(e).call(e,'"method" : "GetBuffer"'))s.I.DWT.lwsproc(e);else{if(0<=a()(e).call(e,"Exception:")||0==a()(e).call(e,"Error"))return h=o,d=t.curCommand.pop()||{},n=!1,s.D.log(h+"@"+d.cmd),void(!(n=d.fFun?d.fFun(h):n)&&s.D.isFunction(t.__OnPrintMsg)&&t.__OnPrintMsg(h));try{e=s.D.parse(e)}catch(D){s.D.log(o)}t._OnRecieveMsg&&t._OnRecieveMsg(e)}}},l.onclose=function(){t.bReady=!1,t.__wsRetry=0,s.D.Errors.Server_Invalid(t),t.__bForceClose||s.D.page.bUnload||s.D.detect.starting||(o()((function(){s.D._checkAndReconnect(t._host,t._port)}),500),s.D.detect.starting=!0),t.__OnWSClose&&t.__OnWSClose(),h.hideMask(!0),s.D.detect.bOK=!1,t.__bForceClose=!1,s.I.Lib.each(s.I.DWT.globalWS,(function(e,t){if(e==l)return i()(e=s.I.DWT.globalWS).call(e,t,1),!1}))},l.onerror=function(e){t.bReady=!1,t.__wsRetry=0,s.D.Errors.Server_Invalid(t),s.D.detect.bOK=!1,s.D.page.bUnload||s.D.detect.starting||(o()((function(){s.D._checkAndReconnect(t._host,t._port)}),500),s.D.detect.starting=!0),e&&s.D.log("websocket error: "+e),t.__OnWSError&&t.__OnWSError(),h.hideMask(!0)},e)return void t._innerActiveUI((function(e){var n,r,o,a=t.__serverId;e&&6<=e.length?(n=e[1],o=e[5],t.__strProductName=r=e[2],s.D.isString(o)&&("win"==o?t.__serverPlatform=s.I.DWT.EnumDWT_PlatformType.enumWindow:"linux"==o?t.__serverPlatform=s.I.DWT.EnumDWT_PlatformType.enumLinux:"mac"==o?t.__serverPlatform=s.I.DWT.EnumDWT_PlatformType.enumMac:"embed"==o?t.__serverPlatform=s.I.DWT.EnumDWT_PlatformType.enumEmbed:"chromeos"==o&&(t.__serverPlatform=s.I.DWT.EnumDWT_PlatformType.enumChromeOS))):e&&3<=e.length?(n=e[1],t.__strProductName=r=e[2]):e&&2<=e.length?n=e[1]:s.D.log("ActiveUI return parameters error."),r=r&&r.toLowerCase(),t.__serverId=n,t._blts?s.I.DWT.lglic(s.I.DWT.EnumInstance.dwt_desktop).then((function(e){return s.D.closeProgress(t,"Reconnect"),t.SetLTSLicenseAsync(e.ar)})).then((function(e){s.I.DWT.laddDWTObj(t),s.I.DWT.lcheckLic(s.I.DWT.EnumInstance.dwt_desktop,e)}),(function(e){e&&(s.I.DWT.lsetException(e.code||e.ltsErrorCode,e.message),s.I.DWT.OnLicenseException()),t.__unload(),s.I.DWT.ContainerMap={},i()(e=s.D.detect.arySTwains).call(e,0),i()(e=s.D.detect.arySTwainsByIP).call(e,0)})):(s.D.closeProgress(t,"Reconnect"),t.SetProductKeyAsync(s.I.DWT.ProductKey)),a!=n?(s.D.Errors.Server_Restarted(t),t._ImgManager&&(t._ImgManager.clear(),t._ImgManager.OnReady()),s.D.isFunction(t.__OnWSReconnect)&&(o=s.D.getWSUrl(t._host,t._port,t._ssl),t.__OnWSReconnect(o,t.httpUrl))):t._ImgManager&&t._innerFunRawV2("HowManyImagesInBuffer").then((function(e){e&&e.result&&0==e.result[0]&&t._ImgManager.clear(),t._ImgManager.OnReady(),t._resetErr()}))}));s.D.isLocalIP(t._host)&&(s.D.LS.item("DWT_port",c.port),s.D.LS.item("DWT_ssl",c.ssl?"true":"false"))}else t._port||(t._port=t._ssl?s.I.DWT.SSLPort:s.I.DWT.Port),t.httpUrl=s.D.getHttpUrl({host:t._host,ssl:t._ssl,port:t._port});s.D.attachProperty(t),s.D.html5.ui.init(t,t.config),s.D.html5.ui.addMethods(t),s.D.attachPropertyUI(t),t._ImgManager.OnReady(),t._bLocalService?t._innerActiveUI((function(e){var n,r,o,a=!1;e&&6<=e.length?(n=e[1],o=e[5],t.__strProductName=r=e[2],s.D.isString(o)&&("win"==o?t.__serverPlatform=s.I.DWT.EnumDWT_PlatformType.enumWindow:"linux"==o?t.__serverPlatform=s.I.DWT.EnumDWT_PlatformType.enumLinux:"mac"==o?t.__serverPlatform=s.I.DWT.EnumDWT_PlatformType.enumMac:"embed"==o?t.__serverPlatform=s.I.DWT.EnumDWT_PlatformType.enumEmbed:"chromeos"==o&&(t.__serverPlatform=s.I.DWT.EnumDWT_PlatformType.enumChromeOS))):e&&3<=e.length?(n=e[1],t.__strProductName=r=e[2]):e&&2<=e.length?(n=e[1],a=!0):(a=!0,s.D.log("ActiveUI return parameters error.")),s.D.attachAddon(t),r=r&&r.toLowerCase(),t.__serverId=n,(t.__bMustUpgradeService=a)?s.D.isFunction(t.__OnReady)&&t.__OnReady(t):(s.D.showLoadingMsg(-1,"",s.I.MSG.Init_SetLicenseForDWT),(t._blts?(o=t._bLocalService,s.D.isUndefined(o),s.I.DWT.lglic(s.I.DWT.EnumInstance.dwt_desktop).then((function(e){return t.SetLTSLicenseAsync(e.ar)})).then((function(e){s.I.DWT.laddDWTObj(t),s.I.DWT.lcheckLic(s.I.DWT.EnumInstance.dwt_desktop,e)}))):""==(e=s.I.DWT.ProductKey)||"******"==e?s.D.Promise.resolve(0):t.SetProductKeyAsync(e)).then((function(){s.D.closeLoadingMsg();var e=!1;if(t._blts?0==s.I.DWT.licenseException.code&&(s.D.License.checkProductKey(t,{Core:!0},!0)||s.D.License.checkProductKey(t,{Webcam:!0},!0)?(s.I.DWT.lclex(),e=!0):s.D.License.checkProductKey(t,{Core:!0},!0)):s.D.License.checkProductKey(t,{Core:!0})||s.D.License.checkProductKey(t,{Webcam:!0},!0)?(s.I.DWT.lclex(),e=!0):s.D.License.checkProductKey(t,{Core:!0},!1,!0),s.D.isFunction(t.__OnReady)&&t.__OnReady(t),e)return t._setConvertModeAsync(t._pdfConvertMode).catch((function(){}))}),(function(e){if(s.D.closeLoadingMsg(),t._blts&&e)return s.I.DWT.lsetException(e.code||e.ltsErrorCode,e.message),s.I.DWT.OnLicenseException(),t.__unload(),s.I.DWT.ContainerMap={},i()(e=s.D.detect.arySTwains).call(e,0),void i()(e=s.D.detect.arySTwainsByIP).call(e,0);t._blts?s.D.License.checkProductKey(t,{Core:!0},!0):s.D.License.checkProductKey(t,{Core:!0})||s.D.License.checkProductKey(t,{Webcam:!0},!0)||s.D.License.checkProductKey(t,{Core:!0},!1,!0)})))})):(s.D.attachAddon(t),t.__serverId=1,t.__bMustUpgradeService=!1,s.D.showLoadingMsg(-1,"",s.I.MSG.Init_SetLicenseForDWT),(t._blts?(s.I.DWT.li({instanceMode:s.I.DWT.EnumInstance.dwt_browser}),s.I.DWT.lglic(s.I.DWT.EnumInstance.dwt_browser).then((function(e){return t.SetLTSLicenseAsync(e.ar)})).then((function(e){s.I.DWT.laddDWTObj(t),s.I.DWT.lcheckLic(s.I.DWT.EnumInstance.dwt_browser,e)}),(function(e){e&&(s.I.DWT.lsetException(e.code||e.ltsErrorCode,e.message),s.I.DWT.OnLicenseException()),t.__unload(),s.I.DWT.ContainerMap={},i()(e=s.D.detect.arySTwains).call(e,0),i()(e=s.D.detect.arySTwainsByIP).call(e,0)}))):""==(u=s.I.DWT.ProductKey)||"******"==u?s.D.Promise.resolve(0):t.SetProductKeyAsync(u)).then((function(){var e;s.D.closeLoadingMsg(),t.ErrorCode<0?s.D.License.promptLicenseErr(t):(e=!1,t._blts?0==s.I.DWT.licenseException.code&&(s.D.License.checkProductKey(t,{Core:!0},!0)||s.D.License.checkProductKey(t,{Webcam:!0},!0)?(s.I.DWT.lclex(),e=!0):s.D.License.checkProductKey(t,{Core:!0},!0)):s.D.License.checkProductKey(t,{Core:!0})||s.D.License.checkProductKey(t,{Webcam:!0},!0)?s.D.License.checkProductKey(t,{Core:!0,Wasm:!0},!0,!0)&&(s.I.DWT.lclex(),e=!0):s.D.License.checkProductKey(t,{Core:!0},!1,!0),e&&(s.I.WasmEnv&&s.I.WasmEnv.setLoglevel(t._logLevel),t._setConvertMode(t._pdfConvertMode)),s.D.isFunction(t.__OnReady)&&t.__OnReady(t))}),(function(e){s.D.closeLoadingMsg(),t.errorCode=e.code,t.errorString=e.message,s.I.OnLicenseError(e.message,e.code)})))},t.__unload=t.dispose=function(){var e,t=this;t._destroy||(t._ImgManager&&t._ImgManager.clear(),(e=t._objWS)&&(t.__bForceClose=!0,s.I.DWT.IfUseWSPool?s.D._removeFromWSPool(t):(e.close(),e.onmessage=null,e.onclose=null),i()(e=t.curCommand).call(e,0),delete t._objWS,t._objWS=null),t.bReady=!1,t.__addon&&t.__addon.Camera&&t.__addon.Camera._viewer&&(""!=t.__addon.Camera.getStatus()&&t.__addon.Camera.closeSource().catch((function(){})),t.__addon.Camera._viewer.dispose(),t.__addon.Camera._viewer=null),t._isBindViewer()&&(t.UnbindViewer(),s.D.html5.ui.unLoad(t)),t._ImgManager&&(t._ImgManager.dispose(),t._ImgManager=null,t.Viewer=null),t.objImageIndexManager&&(t.objImageIndexManager=null),t._OnRecieveMsg=null,s.I.DWT.lremoveDWTObj(t),t._destroy=!0)}},1097:function(e,t,n){n.r(t),t=n(9798);var r=n.n(t),i=(t=n(4579),n.n(t)),o=(t=n(5683),n.n(t)),a=(t=n(7711),n.n(t)),s=n(1695),u=window.SparkMD5,c=n(1188),l=n(4130),d=s.I.navInfoSync,h=s.D.html5.Funs;(t=s.D.html5.STwain.prototype).__innerLoadImage=function(e,t,n,r,i,o,a){var u=this;return s.D.License.checkProductKey(u,{Core:!0})&&s.D.License.checkPDFProductKeyWhenNeeds(u,n)?s.D.isFunction(o)?u.__innerAcquireImage(e,t,r,o,a):(""==(n=u.GetCurrentDocumentName())&&(n=u._ImgManager.getWebViewer().GetDefaultFileName()),u.__innerLoadImageFun(e,t,i,n)):(s.D.isFunction(a)&&a(u._errorCode,u._errorString),!1)},t.__innerLoadImageFun=function(e,t,n,r){var i=!0;if(h.isHttpServerInvalid(this))return!1;if(t=this._innerFunRaw(e,t,!1,!1,!0),this.__bOpenFileNow=!1,s.D.isArray(t.result)&&0<t.result.length){var o="",a=[];if(n?s.D.isObject(n=t.result[0])?(o=n.ids,a=n.metaData):(-1!=n||"LoadImage"!=e&&"FTPDownload"!=e)&&(n||"LoadImageFromBase64Binary"!=e)||(i=!1):o=t.result.join(","),s.D.isArray(a)||(a=[]),this._OnBitmapChanged(["c2",o,1,this._ImgManager.getCurrentImageIndex(),this._ImgManager.count(),a],null,r),i)return s.D.License.isLTS()&&s.I.DWT.lcvrf(this),!0}return s.I.Lib.Errors.bImageOnlyError_NotPurelyPDF(this._errorCode)&&s.I.Lib.Errors.LicenseNoPDF(this),!1},t.__closeRemoteScanUI=function(e){var t;this._acquireDivEL&&(t=s.D.one(".ds-img-screen"),this._acquireDivEL.evtFun?(t&&0<t.length&&s.D.removeEventListener(t[0],"mouseup",this._acquireDivEL.evtFun),this._acquireDivEL.evtFun=null):t&&0<t.length&&s.D.removeEventListener(t[0],"mouseup"),t&&0<t.length&&(t[0].src=""),e&&(document.body.removeChild(this._acquireDivEL),this._acquireDivEL=null))},t.__innerAcquireImage=function(e,t,n,r,i){var o=this,a="LoadImage"==e||"LoadImageEx"==e||"GenerateURLForUploadData"==e,u=a||"LoadDibFromClipboard"==e,c=function(t){o.__bLoadingImage=!1,o.__bAcquireImageNow=!1,o.__bOpenFileNow=!1;var n=o._ImgManager.getCurrentImageIndex();return 0<=n&&o.OnRefreshUI(n),s.I.Lib.Errors.bImageOnlyError_NotPurelyPDF(o._errorCode)&&s.I.Lib.Errors.LicenseNoPDF(o),s.D.isFunction(i)&&i(o.ErrorCode,o.ErrorString),a?s.I.Lib.closeProgress(o,e):h.hideMask(e),t&&s.I.Lib.log(t),o.__closeRemoteScanUI(!0),!1};return h.isServerInvalid(o)?(c(),!1):(a?s.I.Lib.showProgress(o,e,!1):h.showMask(e),o._innerSend(e,t,!0,(function(){var t;o.__bLoadingImage=!1,o.__bOpenFileNow=!1,a?(s.I.Lib.closeProgress(o,e),o._isBindViewer()&&0<=(t=o._ImgManager.getCurrentImageIndex())&&o.OnRefreshUI(t)):h.hideMask(e),s.D.isFunction(r)&&r(),o.__closeRemoteScanUI(!0),u&&s.D.License.isLTS()&&s.I.DWT.lcvrf(o)}),c),!0)},t.__innerSaveImage=function(e,t,n,r){return this._OnPercentDone([0,-1,s.I.MSG.Encoding]),this.__innerProgressFunction(e,t,!1,n,r)},t.__innerFTPDownloadDirectly=function(e,t,n,r,i){return s.D.License.checkProductKey(this,{Core:!0})&&s.D.License.checkPDFProductKeyWhenNeeds(this,n)?(s.D.cancelFrome=4,this.__innerProgressFunction(e,t,!0,r,i)):(s.D.isFunction(i)&&i(this._errorCode,this._errorString),!1)},t.__innerFTPDownload=function(e,t,n,r,i){var o=this;return s.D.License.checkProductKey(o,{Core:!0})&&s.D.License.checkPDFProductKeyWhenNeeds(o,n)?(s.D.cancelFrome=4,s.D.isFunction(i)?o.__innerProgressFunction(e,t,!0,(function(){var e=o._ImgManager.getCurrentImageIndex();0<=e&&o.OnRefreshUI(e),s.D.License.isLTS()&&s.I.DWT.lcvrf(o),s.D.isFunction(r)&&r()}),i):(""==(n=o.GetCurrentDocumentName())&&(n=o._ImgManager.getWebViewer().GetDefaultFileName()),(e=o.__innerLoadImageFun(e,t,1,n))&&s.D.License.isLTS()&&s.I.DWT.lcvrf(o),0<=(t=o._ImgManager.getCurrentImageIndex())&&o.OnRefreshUI(t),e)):(s.D.isFunction(i)&&i(o._errorCode,o._errorString),!1)},t.__innerFTPUpload=function(e,t,n,r){return s.I.Lib.cancelFrome=3,this.__innerProgressFunction(e,t,!0,n,r)},t.__innerProgressFunction=function(e,t,n,r,i){var o=this;return s.D.isFunction(i)?(s.I.Lib.showProgress(o,e,n),this._innerSend(e,t,!0,(function(){s.I.Lib.closeProgress(o,e),s.D.isFunction(r)&&r()}),(function(t){return s.D.isFunction(i)&&i(o.ErrorCode,o.ErrorString),s.I.Lib.closeProgress(o,e),t&&s.I.Lib.log(t),!0}))):this._innerFun(e,t)},t.__innerGetBarcodeResultAsyncFunction=function(e){var t=s.I.Lib.NewBarcodeResult();return e&&(t._errorCode=e.exception,t._errorString=e.description,t._resultlist=e.result,t._Count=e.result.length),t},t.__innerGetOCRResultAsyncFunction=function(e){var t=s.I.Lib.NewOCRResult(this);return e&&(t._errorCode=e.exception,t._errorString=e.description,t._resultlist=e.result),t},t._innerSendCmd=function(e,t){if(h.isHttpServerInvalid(this))return!1;this._innerFunRaw(e,t,!0,!1,!0)},t._innerFun=function(e,t){return!h.isHttpServerInvalid(this)&&(e=this._innerFunRaw(e,t,!1,!1,!1),s.I.Lib.isArray(e)?e[0]:e)},t._innerFunRawV2=function(e,t,n){var i=this;return i._resetErr(),!i._isValid()||h.isHttpServerInvalid(i)?s.D.Promise.reject({code:i._errorCode,message:i._errorString}):(n={method:"post",body:h.getJson(i,e,t,0),dataType:n},s.I.DWT.ConnectWithSocket?new(r())((function(n,r){i._innerSend(e,t,!1,(function(e){var t=!1;try{t=s.D.isString(e)?s.D.parse(e):e}catch(r){}if(t){if(t instanceof Blob||t instanceof ArrayBuffer)return void n(t);void 0!==t.exception&&void 0!==t.description&&(i._errorCode=t.exception,i._errorString=t.description)}i._resetErr(),n(t)}),(function(e){var t;s.I.Lib.Errors.NetworkError(i),e&&(t=[i._errorString," ",e.errorString],e.httpCode&&(t.push(" ("),t.push(e.httpCode),t.push(")")),i._errorString=t.join("")),r({code:i._errorCode,message:i._errorString})}))})):s.D.fetch([i.httpUrl,"fa/",e].join(""),n).then((function(e){var t=!1;try{t=s.D.isString(e)?s.D.parse(e):e}catch(n){}if(t){if(t instanceof Blob||t instanceof ArrayBuffer)return t;if(void 0===t.exception||void 0===t.description)return i._resetErr(),t;i._errorCode=t.exception,i._errorString=t.description}else s.I.Lib.Errors.InvalidResultFormat(i);throw{code:i._errorCode,message:i._errorString}}),(function(e){var t;throw s.I.Lib.Errors.NetworkError(i),e&&(t=[i._errorString," ",e.errorString],e.httpCode&&(t.push(" ("),t.push(e.httpCode),t.push(")")),i._errorString=t.join("")),{code:i._errorCode,message:i._errorString}})))},t._innerFunV2=function(e,t){return h.isHttpServerInvalid(this)?s.D.Promise.reject({code:this._errorCode,message:this._errorString}):this._innerFunRawV2(e,t,"text").then((function(e){return e&&s.I.Lib.isArray(e.result)&&0<e.result.length?e.result[0]:e}))},t._innerNewWS=function(e,t){var n=this,r=(0,l.R)(),o=h.getJson(n,e,t,r);return n._resetErr(),!n._isValid()||h.isHttpServerInvalid(n)?s.D.Promise.reject({code:n._errorCode,message:n._errorString}):new s.D.Promise((function(t,r){var a;try{a=s.D.getWS(n._host,n._port,n._ssl)}catch(e){a&&(a.close(),a=null),s.D.Errors.Server_Invalid(n),r({code:n._errorCode,message:n._errorString})}a.onopen=function(){1==a.readyState?(a.onopen=null,a.send(o)):0==a.readyState&&i()(a.onopen,100)},a.onmessage=function(e){t(e&&e.data?e.data:""),a.close()},a.onerror=function(e){r(e),a.close()},a.onclose=function(e){a&&(a.onclose=null,a.onerror=null,a.onmessage=null,a=null)}}))},t._innerFunRaw=function(e,t,n,r,i,a,c){var l,g=this,f="f/",m=!1;if(s.I.DWT.ConnectWithSocket)return this._innerSend(e,t,!1,a,c);if(h.isHttpServerInvalid(g))return!1;if(g._resetErr(),!g._isValid())return!1;if(n&&(m=!0,f="fa/"),e={method:"POST",url:n=[g.httpUrl,f,e].join(""),data:f=h.getJson(g,e,t,0),async:m,onSuccess:function(e,t,n){var r=!1;try{r=s.D.isString(e)&&"text/json"===n.getResponseHeader("content-type")?s.D.parse(e):e}catch(c){}l=r?(void 0!==r.exception&&void 0!==r.description?(g._errorCode=r.exception,g._errorString=r.description):g._resetErr(),i?r:r.result):(s.I.Lib.Errors.InvalidResultFormat(g),""),s.D.isFunction(a)&&a(l)},onError:function(){s.I.Lib.Errors.NetworkError(g),l="",s.D.isFunction(c)&&c()}},!m&&r)d.bIE?(e.dataType="arraybuffer",e.onSuccess=function(e,t,n){var r,i,c=!1;if(n.responseHeadersString&&(h=n.responseHeadersString,-1!=o()(h).call(h,"text/json")&&(c=!0)),h=n.responseData,g._resetErr(),l=!1,h&&(r=new Uint8Array(h),c?h=String.fromCharCode.apply(null,r):(l=new Blob([r],{type:g.__strHttpContentTypeFieldValue}),(i=new u.ArrayBuffer).append(r),l.md5=i.end())),!h||c){var d=!1,h=c?h:n.responseText;if(0<h.length){if("{"==h.charAt(0))try{d=s.D.parse(h),c=!0}catch(D){s.I.Lib.log(h)}c?l=void 0===d.exception||void 0===d.description||(g._errorCode=d.exception,g._errorString=d.description,!1):(r=new Uint8Array(h),l=new Blob([r],{type:g.__strHttpContentTypeFieldValue}),(i=new u.ArrayBuffer).append(r),l.md5=i.end())}}s.D.isFunction(a)&&a(l)}):(m||(e.dataType="text",e.contentType="text/plain; charset=x-user-defined",e.mimeType="text/plain; charset=x-user-defined"),e.onSuccess=function(e,t,n){var r,i;if(g._resetErr(),0<(i=(r=n.responseText).length)){var o;if(n=!1,"{"==r.charAt(0))try{o=s.D.parse(r),n=!0}catch(D){s.I.Lib.log(r)}if(n)l=void 0===o.exception||void 0===o.description||(g._errorCode=o.exception,g._errorString=o.description,!1);else{for(var c=new Uint8Array(i),d=0;d<i;d++)c[d]=r.charCodeAt(d);l=new Blob([c],{type:g.__strHttpContentTypeFieldValue}),(n=new u.ArrayBuffer).append(c),l.md5=n.end()}}else l="";s.D.isFunction(a)&&a(l)});else if(m&&r)return e={method:"POST",body:f},d.bIE?e.dataType="arraybuffer":e.fetchRaw=!0,t=s.D.fetch(n,e),(t=d.bIE?t:t.then((function(e){var t=e.headers.get("content-type");return 0<=o()(t).call(t,"image/")||0<=o()(t).call(t,"application/octet-stream")?e.arrayBuffer():e.json()}))).then((function(e){var t;g._resetErr(),e instanceof ArrayBuffer?(s.D.isFunction(a)&&a(e),e=null):s.D.isObject(e)?void 0!==(e=e).exception&&void 0!==e.description?(g._errorCode=e.exception,g._errorString=e.description,s.D.isFunction(c)&&c()):(t="",e.result&&(t=e.result),s.D.isFunction(a)&&a(t)):(s.I.Lib.Errors.NetworkError(g),s.D.isFunction(c)&&c())}),(function(e){s.I.Lib.Errors.NetworkError(g),s.D.isFunction(c)&&c()})),!0;return m||s.D.mix(e,{headers:{"X-Requested-With":!1}}),d.bFileSystem&&(e.crossDomain=!1),s.D.ajax(e),!!m||l},t._innerSend=function(e,t,n,r,i){var o=this._objWS,a=!1,u=!1,c=!1,d=!0;return"ActiveUI"==e?d=!1:c=h.isServerInvalid(this),c?(s.D.isFunction(i)&&i(),!0):(s.D.isFunction(r)&&(u=r),s.D.isFunction(i)&&(a=i),c=(0,l.R)(),r=s.I.DWT.ConnectWithSocket||"SaveSelectedImagesToBytes"!=e&&"ConvertToBlob"!=e?(""==(r=this.GetCurrentDocumentName())&&(r=this._ImgManager.getWebViewer().GetDefaultFileName()),this.curCommand.push({cmd:e,cmdId:c,sFun:u,fFun:a,currentFileName:r}),h.sendData(o,h.getJson(this,e,t,c),!1,d)):(i=h.getJson(this,e,t,c),this._innerFunRaw(e,i,!0,!0,!0,u,a),!0))},t.__innerConvertToBlob=function(e,t,n,r,i,o,a,c){return this._isMobileMode()?this.__innerConvertToBlobByMobile(e,t,n,i,o,a,c):(i=n,n=",",s.D.isString(i)&&""!=i||(n=i=""),t=["[",e,',"',t.join(","),'"',n,i,"]"].join(""),r?this._innerFunRaw("ConvertToBlob",t,!0,!0,!0,(function(t){var n,r=h.getBlobTypeByImageType(e);r=new Blob([t],{type:r}),s.I.DWT.IfAddMD5InUploadHeader?((n=new u.ArrayBuffer).append(t),s.D.isFunction(o)&&o(r,n.end(),c)):s.D.isFunction(o)&&o(r,"",c)}),a):(n=this._innerFunRaw("ConvertToBlob",t,!1,!0,!1),i="",0==this.ErrorCode?(n&&"md5"in n&&(i=n.md5),o(n,i,c)):(a(),!1)))},t.__innerConvertToBlobByMobile=function(e,t,n,r,i,o,a){var u,l,d=[];if(e==s.I.DWT.EnumDWT_ImageType.IT_BMP)return u="bmp",this._mobileNotSupport("Convert to bmp",o);for(u=e==s.I.DWT.EnumDWT_ImageType.IT_JPG?"jpg":e==s.I.DWT.EnumDWT_ImageType.IT_PNG?"png":e==s.I.DWT.EnumDWT_ImageType.IT_TIF?"tiff":e==s.I.DWT.EnumDWT_ImageType.IT_PDF?"pdf":e==s.I.DWT.EnumDWT_ImageType.IT_J2K?"jp2":"png",l=0;l<t.length;l++)d.push(this._ImgManager.convertServerIdToClientIndex(t[l]));return this._innerSendToMobile("SaveImage",(0,c.An)("",d,u,r,!0),0,(function(e,t,n){s.D.isFunction(i)&&i(e,a)}),o)},t.__innerConvertToBase64ByMobile=function(e,t,n,r,i,o){var a,u,l=this,d=[];if(n==s.I.DWT.EnumDWT_ImageType.IT_BMP)return a="bmp",l._mobileNotSupport("Convert to bmp",o);if(a=n==s.I.DWT.EnumDWT_ImageType.IT_JPG?"jpg":n==s.I.DWT.EnumDWT_ImageType.IT_PNG?"png":n==s.I.DWT.EnumDWT_ImageType.IT_TIF?"tiff":n==s.I.DWT.EnumDWT_ImageType.IT_PDF?"pdf":n==s.I.DWT.EnumDWT_ImageType.IT_J2K?"jp2":"png",s.D.isArray(t))for(u=0;u<t.length;u++)d.push(l._ImgManager.convertServerIdToClientIndex(t[u]));return l._innerSendToMobile("SaveImage",(0,c.An)(e,d,a,r,!1),0,(function(e,t,n){var r,a;if(e instanceof Uint8ClampedArray||e instanceof ArrayBuffer||e instanceof Uint8Array)return(r=new FileReader).onload=function(e){var t=s.D.isString(e=e.target.result)?e.split(","):[];2<=t.length&&(e=t[1]),s.D.isFunction(i)&&i({result:[e,e.length,r.md5]})},a="pdf"==t?"application/pdf":"image/"+t,void l._innerSendToMobile("GetMD5",(0,c.An)(e),0,(function(t){r.md5=t,r.readAsDataURL(new Blob([e],{type:a}))}),o);i({result:[e,e.length,n]})}),o)},t.__SaveLocalFileToBytes=function(e,t,n,r,i){return t?(this._innerFunRaw("SaveSelectedImagesToBytes",(0,c.dv)(0,0,e,n),t,!0,!0,(function(e){s.D.isFunction(r)&&(e=new Blob([e]),r(e))}),i),!0):(e=this._innerFunRaw("SaveSelectedImagesToBytes",(0,c.dv)(0,0,e,n),t,!0,!1),0==this.ErrorCode?r(e):(i(),!1))},t.__captureImage=function(e,t,n,r){return this.__LoadImageFromBytesV2(e,t,"",!0,n,r,0,0,"true")},t.__LoadImageFromBytes=function(e,t,n,r,i,o,a,s){return this.__LoadImageFromBytesV2(e,t,n,r,i,o,a,s,"false")},t.__LoadImageFromBytesV2=function(e,t,n,r,o,a,u,c,l){var d=this,g="LoadImageFromBytes",f=t||3,m=e.size||e.length,p=e.name,_=h.isServerInvalid(d),v=!0,I=0,y=1,b=(!isNaN(u)&&0<=u&&!isNaN(c)&&0<c?y=0:c=u=0,I=d.__GetLoadEventsNum(),f=["[",m,",",0,",",f,',"',n,'",',u,",",c,",",I,",",y,",",l,"]"].join(""),function(){var e;return s.I.Lib.closeProgress(d,g),d.__bLoadingImage=!1,v&&0<=(e=d._ImgManager.getCurrentImageIndex())&&d.OnRefreshUI(e),s.D.isFunction(a)&&a(d._errorCode,d._errorString,p),!1});return!_&&(s.D.License.checkProductKey(d,{Core:!0})||s.D.License.checkProductKey(d,{Webcam:!0},!0))&&s.D.License.checkPDFProductKeyWhenNeeds(d,t)?0===m?(s.I.Lib.Errors.ImageFileLengthCannotZero(d),v=!1,b()):(h.setBtnCancelVisibleForProgress(d,!1),this._innerSendBlob(g,f,e,r,y,(function(){var e;if((u+m==c||c<=0||isNaN(c))&&s.I.Lib.closeProgress(d,g),d.__bLoadingImage=!1,d._isBindViewer()&&(e=d._ImgManager.getCurrentImageIndex(),r&&0<=e&&d.OnRefreshUI(e)),s.D.isFunction(o))if(r)i()((function(){o(p)}),30);else try{o(p)}catch(t){s.I.Lib.log(t.message)}return s.D.License.isLTS()&&s.I.DWT.lcvrf(d),!0}),b)):(v=!1,b())},t._innerSendBlob=function(e,t,n,r,i,o,a){var u,c,g,f=this,m=f._objWS,p=!1;return h.isServerInvalid(f)?(s.D.isFunction(a)&&a(),!1):(s.D.isFunction(a)&&(p=a),r?(a=(0,l.R)(),f.curCommand.push({cmd:e,cmdId:a,sFun:function(){s.D.isFunction(o)&&o()},fFun:p,currentFileName:n.currentFileName}),void h.sendData(m,h.getJson(f,e,t,a),n,!0)):(c=[],g="",!h.isHttpServerInvalid(f)&&(f._resetErr(),!!f._isValid()&&(r=[f.httpUrl,"f/",e].join(""),m=h.getJson(f,e,t,0),m=(m+="\r\n\r\n")+s.I.Lib.base64.encodeArray(n),s.D.mix(a={method:"POST",url:r,processData:!1,data:m,async:!1,onSuccess:function(e,t,n){var r=!1,o=!1;try{r=s.D.isString(e)&&"text/json"===n.getResponseHeader("content-type")?s.D.parse(e):e}catch(a){}null!=r&&(void 0!==r.exception&&void 0!==r.description?(f._errorCode=r.exception,f._errorString=r.description):f._resetErr(),(u=r.result)&&s.D.isArray(u)&&1<=u.length&&(i?(n=u[0])&&s.D.isObject(n)&&(g=n.ids,s.D.isArray(n.metaData)&&(c=n.metaData),o=!0):(g=u.join(","),c=[],o=!0))),o||(s.I.Lib.Errors.InvalidResultFormat(f),u="",c=[])},onError:function(){s.I.Lib.Errors.NetworkError(f),u="",c=[]}},{headers:{"X-Requested-With":!1}}),d.bFileSystem&&(a.crossDomain=!1),s.D.ajax(a),0==f._errorCode?(0<g.length&&f._OnBitmapChanged(["c2",g,1,f._ImgManager.getCurrentImageIndex(),f._ImgManager.count(),c],null,n.currentFileName),s.D.isFunction(o)&&o()):s.D.isFunction(p)&&p(),u))))},t.GetImageAsync=function(e,t,n,r,i){var o,u=this;return u._resetErr(),u._isValid()?(e=a()(e),isNaN(e)?(s.D.Errors.InvalidIndex(u),s.D.Promise.reject({code:u._errorCode,message:u._errorString})):e<0||e>=u._ImgManager.count()?(s.D.Errors.IndexOutOfRange(u),s.D.Promise.reject({code:u._errorCode,message:u._errorString})):u._isMobileMode()?u._mobileNotSupportAsync("GetImageAsync"):h.isHttpServerInvalid(u)?s.D.Promise.reject({code:u._errorCode,message:u._errorString}):-1==(e=u._ImgManager.convertClientIndexToServerId(e))?(s.D.Errors.IndexOutOfRange(u),s.D.Promise.reject({code:u._errorCode,message:u._errorString})):(s.D.isNumber(t)?o=(0,c.dv)(e,t):s.D.isNumber(n)&&s.D.isNumber(r)?o=(0,c.dv)(e,n,r):s.D.isNumber(i)&&(o=(0,c.dv)(e,-1,-1,i)),u._innerFunRawV2("GetImageByIndex",o,"blob"))):s.D.Promise.reject({code:u._errorCode,message:u._errorString})},t.GetImageInfoAsync=function(e){var t=this;return t._resetErr(),t._isValid()?(e=a()(e),isNaN(e)?(s.D.Errors.InvalidIndex(t),s.D.Promise.reject({code:t._errorCode,message:t._errorString})):e<0||e>=t._ImgManager.count()?(s.D.Errors.IndexOutOfRange(t),s.D.Promise.reject({code:t._errorCode,message:t._errorString})):t._isMobileMode()?t._mobileNotSupportAsync("GetImageAsync"):-1==(e=t._ImgManager.convertClientIndexToServerId(e))?(s.D.Errors.IndexOutOfRange(t),s.D.Promise.reject({code:t._errorCode,message:t._errorString})):t._innerFunV2("GetImageInfo",(0,c.dv)(e)).then((function(e){var t=0,n=0,r=e;return s.I.Lib.isArray(e)&&1==e.length&&(r=e[0]),s.I.Lib.isString(r)&&(e=r.split(","),t=a()(e[0]),n=a()(e[1])),{width:t,height:n}}))):s.D.Promise.reject({code:t._errorCode,message:t._errorString})},t._innerActiveUI=function(e,t){var n=s.D.detect.ssl;if(this._blts){var r=this,i=s.I.DWT.li({instanceMode:s.I.DWT.EnumInstance.dwt_desktop});if(!s.I.DWT.lisValidID(i))return void(r=null);r._innerSend("ActiveUI",(0,c.dv)(s.I.Lib.env.WSVersion,s.I.Lib.env.WSSession,1,i,n),!1,e,t),r=null}else this._innerSend("ActiveUI",(0,c.dv)(s.I.Lib.env.WSVersion,s.I.Lib.env.WSSession,1,"",n),!1,e,t);return!0}},2246:function(e,t,n){n.r(t),t=n(7711);var r=n.n(t),i=n(1695),o=i.D.html5.Funs,a=o.DEF;i.D.html5.STwainStyle=function(e){this._parent=e,a(e=this,"width",{get:function(){return this._parent._width},set:function(e){this.SetSize(e,!1)}}),a(e,"height",{get:function(){return this._parent._height},set:function(e){this.SetSize(!1,e)}})},i.D.html5.STwainStyle.prototype.SetSize=function(e,t){var n,a,s,u;e=e,t=t,u=s=!1,(n=this._parent)._isBindViewer()&&(!(s=i.D.isString(e)&&0<e.length&&"%"===e.charAt(e.length-1)?e:s)&&e&&(a=r()(e))&&(s=a+"px"),!(u=i.D.isString(t)&&0<t.length&&"%"===t.charAt(t.length-1)?t:u)&&t&&(a=r()(t))&&(u=a+"px"),s&&(n._width=s),u&&(n._height=u),o.changeImageUISize(n,s,u))}},4666:function(e,t,n){n.r(t),t=n(5683);var r=n.n(t),i=(t=n(7711),n.n(t)),o=n(1695),a=n(1188),s=n(8420),u=n(7344),c=(t=n(9927),n.n(t)),l=(t=n(7682),n.n(t)),d=(t=n(9356),n.n(t)),h=n(4845),g=function(){function e(){(0,s.Z)(this,e),(0,h.Z)(this,"bIsDirty",!1),(0,h.Z)(this,"imageWidth",0),(0,h.Z)(this,"imageHeight",0),(0,h.Z)(this,"iImageControlWidth",0),(0,h.Z)(this,"iImageControlHeight",0),(0,h.Z)(this,"imageUrl",""),(0,h.Z)(this,"minImageUrl",""),(0,h.Z)(this,"uuid",-1),(0,h.Z)(this,"serverId",-1),(0,h.Z)(this,"aryOverlayRectangleData",[]),(0,h.Z)(this,"ticks",l()())}return(0,u.Z)(e,[{key:"Clear",value:function(){this.imageUrl="",this.minImageUrl="",this.serverId=-1,this.aryOverlayRectangleData=[]}}]),e}(),f=(0,u.Z)((function e(t,n,r){(0,s.Z)(this,e),this.Url=t,this.Width=n,this.Height=r})),m=(t=n(699),n.n(t)),p=(t=n(9798),n.n(t)),_=(t=n(4579),n.n(t)),v=function(){function e(t,n,r,i){(0,s.Z)(this,e);var a=1;this._webViewer=t,this.myViewer=this._webViewer.myViewer,this.element=n,o.D.isUndefined(r)||(a="left"==r?-1:1),o.D.isUndefined(i)&&(i=!1),this.myCustomElemet=this.myViewer.createCustomElement(n,a,i),this.myCustomElemet&&(this.hide(),this.bDispose=!1)}return(0,u.Z)(e,[{key:"show",value:function(){return this.myCustomElemet?(this.myCustomElemet.show(),!0):(this.bDispose?o.D.Errors.CustomElementDispose(this._webViewer._stwain):o.D.Errors.CustomElementNotExist(this._webViewer._stwain),!1)}},{key:"hide",value:function(){return this.myCustomElemet?(this.myCustomElemet.hide(),!0):(this.bDispose?o.D.Errors.CustomElementDispose(this._webViewer._stwain):o.D.Errors.CustomElementNotExist(this._webViewer._stwain),!1)}},{key:"dispose",value:function(){var e=!1;return!!this.bDispose||(this.myCustomElemet?(e=this.myCustomElemet.dispose())&&(this.bDispose=!0,this._webViewer._customElement=void 0,this.myCustomElemet=void 0,this.myViewer=null,this.element=null):e=this.bDispose=!0,e)}}]),e}();o.D.UI.CustomElement=v,t=n(373),t=n.n(t);var I=o.D.html5.Funs.DEF,y=new(t()),b=function(){function e(t,n){(0,s.Z)(this,e),function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object");t.add(e)}(this,y),this._ImgManager=n,this._stwain=n._stwain,this._webViewer=t,this._elements=[],function(e,t,n){if(t.has(e))return n;throw new TypeError("attempted to get private field on non-instance")}(this,y,D).call(this)}return(0,u.Z)(e,[{key:"dispose",value:function(){this._stwain=null,this._ImgManager=null,this._webViewer&&(this._webViewer=null),this._elements=[]}},{key:"next",value:function(){return this._webViewer.next()}},{key:"previous",value:function(){return this._webViewer.previous()}},{key:"first",value:function(){return this._webViewer.first()}},{key:"last",value:function(){return this._webViewer.last()}},{key:"gotoPage",value:function(e){return this._webViewer.go(e)}},{key:"render",value:function(){return this._webViewer.render()}},{key:"createDocumentEditor",value:function(e){return this._stwain._isMobileMode()?this._webViewer.createDocumentEditor(e):(o.D.Errors.ServiceNotSupport(this._stwain,"createDocumentEditor"),null)}},{key:"createImageEditor",value:function(e){return this._webViewer.createImageEditor(e)}},{key:"createThumbnailViewer",value:function(e){return this._webViewer.createThumbnailViewer(e)}},{key:"getUISettings",value:function(){return this._webViewer.getUISettings()}},{key:"resetUISettings",value:function(){return this._webViewer.resetUISettings()}},{key:"updateUISettings",value:function(e){return this._webViewer.updateUISettings(e)}},{key:"updateCheckboxStyle",value:function(e){return this._webViewer.UpdateCheckboxStyle(e)}},{key:"updatePageNumberStyle",value:function(e){return this._webViewer.UpdatePageNumberStyle(e)}},{key:"clearSelectedAreas",value:function(){return this._webViewer.clearSelectedAreas()}},{key:"setSelectedAreas",value:function(e){return this._webViewer.setSelectedAreas(e)}},{key:"createCustomElement",value:function(e,t,n){return this._webViewer.createCustomElement(e,t,n)}},{key:"fitWindow",value:function(e){return this._webViewer.SetFitType(e)}},{key:"setButtonClass",value:function(e,t){return this._webViewer.setButtonClass(e,t)}},{key:"setViewMode",value:function(e,t){return this._webViewer.SetViewMode(e,t)}},{key:"bind",value:function(e,t){var n,r,i;return o.D.isShadowRoot(e)&&(n=document.createElement("div"),e.appendChild(n),this._elements.push(n),e=n),o.D.isDOM(e)&&((n=o.D.getShadowRoot(e))?(r=o.I.Lib.timestamp,(i=document.createElement("style")).innerHTML=['@import url("',o.I.DWT.ResourcesPath,"/src/dynamsoft.viewer.css",r,'")'].join(""),n.appendChild(i),this._elements.push(i)):n=!1,e.id&&""!=e.id||(e.id=["dwt_",o.D.getRandom()].join(""))),t?this._webViewer.BindTemplate(e,t):this._webViewer.BindView(e)}},{key:"createTemplate",value:function(e,t){return this._stwain._isMobileMode()?this._webViewer.CreateTemplate(e,t):(o.D.Errors.ServiceNotSupport(this._stwain,"createTemplate"),null)}},{key:"show",value:function(){return this._webViewer.show()}},{key:"hide",value:function(){return this._webViewer.hide()}},{key:"unbind",value:function(){return this._webViewer._stwain.Template&&this._stwain.Template._documentTemplate.UnbindView(),o.D.each(this._elements,(function(e){e.parentNode&&e.parentNode.removeChild(e)})),this._webViewer.UnbindView()}},{key:"on",value:function(e,t){this._webViewer.on(e,t)}},{key:"off",value:function(e,t){this._webViewer.off(e,t)}}]),e}();function D(){var e=this;I(e,"width",{get:function(){return e._webViewer.GetWidth()},set:function(t){return e._webViewer.SetWidth(t)}}),I(e,"height",{get:function(){return e._webViewer.GetHeight()},set:function(t){return e._webViewer.SetHeight(t)}}),I(e,"idPostfix",{get:function(){return e._webViewer.GetIdPostfix()}}),I(e,"background",{get:function(){return e._webViewer.GetBackground()},set:function(t){return e._webViewer.SetBackground(t)}}),I(e,"border",{get:function(){return e._webViewer.GetBorder()},set:function(t){return e._webViewer.SetBorder(t)}}),I(e,"innerBorder",{get:function(){return e._webViewer.GetInnerBorder()},set:function(t){return e._webViewer.SetInnerBorder(t)}}),I(e,"selectedPageBorder",{get:function(){return e._webViewer.GetSelectedPageBorder()},set:function(t){return e._webViewer.SetSelectedPageBorder(t)}}),I(e,"selectedPageBackground",{get:function(){return e._webViewer.GetSelectedPageBackground()},set:function(t){return e._webViewer.SetSelectedPageBackground(t)}}),I(e,"showPageNumber",{get:function(){return e._webViewer.GetShowPageNumber()},set:function(t){return e._webViewer.SetShowPageNumber(t)}}),I(e,"selectedAreaBorderColor",{get:function(){return e._webViewer.GetSelectedAreaBorderColor()},set:function(t){return e._webViewer.SetSelectedAreaBorderColor(t)}}),I(e,"selectionRectAspectRatio",{get:function(){return e._webViewer.GetSelectionRectAspectRatio()},set:function(t){return e._webViewer.SetSelectionRectAspectRatio(t)}}),I(e,"cursor",{get:function(){return e._webViewer.GetCursor()},set:function(t){return e._webViewer.SetCursor(t)}}),I(e,"ifAutoScroll",{get:function(){return e._webViewer.GetIfAutoScroll()},set:function(t){return e._webViewer.SetIfAutoScroll(t)}}),I(e,"pageMargin",{get:function(){return e._webViewer.GetPageMargin()},set:function(t){return e._webViewer.SetPageMargin(t)}}),I(e,"zoom",{get:function(){return e._webViewer.GetZoom()},set:function(t){return e._webViewer.SetZoom(t)}}),I(e,"singlePageMode",{get:function(){return e._webViewer.GetIfSinglePageMode()},set:function(t){return e._webViewer.SetIfSinglePageMode(t)}}),I(e,"acceptDrop",{get:function(){return e._webViewer.GetAcceptDrop()},set:function(t){return e._webViewer.SetAcceptDrop(t)}}),I(e,"allowSlide",{get:function(){return e._webViewer.GetAllowSlide()},set:function(t){return e._webViewer.SetAllowSlide(t)}}),I(e,"autoChangeIndex",{get:function(){return e._webViewer.GetAutoChangeIndex()},set:function(t){return e._webViewer.SetAutoChangeIndex(t)}}),I(e,"showCheckbox",{get:function(){return e._webViewer.GetShowCheckbox()},set:function(t){return e._webViewer.SetShowCheckbox(t)}}),I(e,"selectionMode",{get:function(){return e._webViewer.GetMultiSelectMode()},set:function(t){return e._webViewer.SetMultiSelectMode(t)}}),I(e,"allowPageDragging",{get:function(){return e._webViewer.GetAllowPageDragging()},set:function(t){return e._webViewer.SetAllowPageDragging(t)}})}o.D.UI.DWTViewer=b;var T="dynamsoft-default-document",S="rgb(255, 255, 255)",w="transparent",C="1px solid rgb(238, 238, 238)",E="rgb(239, 246, 253)",M="1px solid rgb(238, 238, 238)",P="rgb(251, 236, 136)",A="1px solid rgb(125,162,206)",x="rgb(199, 222, 252)",R={visibility:"hidden",width:"24px",height:"24px",background:"#ffffff",borderWidth:"2px",borderColor:"#000000",checkMarkColor:"#000000",checkMarkLineWidth:"2px",borderRadius:0,opacity:.5,left:0,top:0,right:"",bottom:"",translateX:"",translateY:""},k={visibility:"hidden",width:"24px",height:"24px",background:"#ffffff",borderWidth:"1px",borderColor:"#a79898",borderRadius:"50%",opacity:.5,color:"#000000",fontFamily:"sans-serif",fontSize:12,left:"",top:"",right:0,bottom:0,translateX:"",translateY:""},L="url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI1LjQuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCAzMDAgMzAwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMDAgMzAwOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0NDQ0NDQzt9Cgkuc3Qxe2ZpbGw6I0YwRUZGNDt9Cjwvc3R5bGU+CjxnIGlkPSJHcm91cF8xMyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMyOS42NjggLTE3OC41ODkpIj4KCTxnIGlkPSJSZWN0YW5nbGVfMTciPgoJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik01OTgsMzQ3LjloLTQuMnYtMmgyLjJ2LTEuOGgyVjM0Ny45eiBNNTg3LjksMzQ3LjloLTZ2LTJoNlYzNDcuOXogTTU3NS45LDM0Ny45aC02di0yaDZWMzQ3Ljl6IE01NjMuOSwzNDcuOQoJCQloLTZ2LTJoNlYzNDcuOXogTTU1MS45LDM0Ny45aC02di0yaDZWMzQ3Ljl6IE01MzkuOSwzNDcuOWgtNnYtMmg2VjM0Ny45eiBNNTI3LjksMzQ3LjloLTZ2LTJoNlYzNDcuOXogTTUxNS45LDM0Ny45aC02di0yaDYKCQkJVjM0Ny45eiBNNTAzLjksMzQ3LjloLTZ2LTJoNlYzNDcuOXogTTQ5MS45LDM0Ny45aC02di0yaDZWMzQ3Ljl6IE00NzkuOSwzNDcuOWgtNnYtMmg2VjM0Ny45eiBNNDY3LjksMzQ3LjloLTZ2LTJoNlYzNDcuOXoKCQkJIE00NTUuOSwzNDcuOWgtNnYtMmg2VjM0Ny45eiBNNDQzLjksMzQ3LjloLTZ2LTJoNlYzNDcuOXogTTQzMS45LDM0Ny45aC02di0yaDZWMzQ3Ljl6IE00MTkuOSwzNDcuOWgtNnYtMmg2VjM0Ny45eiBNNDA3LjksMzQ3LjkKCQkJaC02di0yaDZWMzQ3Ljl6IE0zOTUuOSwzNDcuOWgtNnYtMmg2VjM0Ny45eiBNMzgzLjksMzQ3LjloLTZ2LTJoNlYzNDcuOXogTTM3OC42LDM0MS4xaC0ydi02aDJWMzQxLjF6IE01OTgsMzM4LjFoLTJ2LTZoMlYzMzguMXoKCQkJIE0zNzguNiwzMjkuMWgtMnYtNmgyVjMyOS4xeiBNNTk4LDMyNi4xaC0ydi02aDJWMzI2LjF6IE0zNzguNiwzMTcuMWgtMnYtNmgyVjMxNy4xeiBNNTk4LDMxNC4xaC0ydi02aDJWMzE0LjF6IE0zNzguNiwzMDUuMWgtMgoJCQl2LTZoMlYzMDUuMXogTTU5OCwzMDIuMWgtMnYtNmgyVjMwMi4xeiBNMzc4LjYsMjkzLjFoLTJ2LTZoMlYyOTMuMXogTTU5OCwyOTAuMWgtMnYtNmgyVjI5MC4xeiBNMzc4LjYsMjgxLjFoLTJ2LTZoMlYyODEuMXoKCQkJIE01OTgsMjc4LjFoLTJ2LTZoMlYyNzguMXogTTM3OC42LDI2OS4xaC0ydi02aDJWMjY5LjF6IE01OTgsMjY2LjFoLTJ2LTZoMlYyNjYuMXogTTM3OC42LDI1Ny4xaC0ydi02aDJWMjU3LjF6IE01OTgsMjU0LjFoLTJ2LTYKCQkJaDJWMjU0LjF6IE0zNzguNiwyNDUuMWgtMnYtNmgyVjI0NS4xeiBNNTk4LDI0Mi4xaC0ydi02aDJWMjQyLjF6IE0zNzguNiwyMzMuMWgtMnYtNmgyVjIzMy4xeiBNNTk4LDIzMC4xaC0ydi02aDJWMjMwLjF6CgkJCSBNMzc4LjYsMjIxLjFoLTJ2LTYuN2g3djJoLTVWMjIxLjF6IE01OTgsMjE4LjFoLTJ2LTEuNmgtMi40di0yaDQuNFYyMTguMXogTTU4Ny42LDIxNi41aC02di0yaDZWMjE2LjV6IE01NzUuNiwyMTYuNWgtNnYtMmg2CgkJCVYyMTYuNXogTTU2My42LDIxNi41aC02di0yaDZWMjE2LjV6IE01NTEuNiwyMTYuNWgtNnYtMmg2VjIxNi41eiBNNTM5LjYsMjE2LjVoLTZ2LTJoNlYyMTYuNXogTTUyNy42LDIxNi41aC02di0yaDZWMjE2LjV6CgkJCSBNNTE1LjYsMjE2LjVoLTZ2LTJoNlYyMTYuNXogTTUwMy42LDIxNi41aC02di0yaDZWMjE2LjV6IE00OTEuNiwyMTYuNWgtNnYtMmg2VjIxNi41eiBNNDc5LjYsMjE2LjVoLTZ2LTJoNlYyMTYuNXogTTQ2Ny42LDIxNi41CgkJCWgtNnYtMmg2VjIxNi41eiBNNDU1LjYsMjE2LjVoLTZ2LTJoNlYyMTYuNXogTTQ0My42LDIxNi41aC02di0yaDZWMjE2LjV6IE00MzEuNiwyMTYuNWgtNnYtMmg2VjIxNi41eiBNNDE5LjYsMjE2LjVoLTZ2LTJoNgoJCQlWMjE2LjV6IE00MDcuNiwyMTYuNWgtNnYtMmg2VjIxNi41eiBNMzk1LjYsMjE2LjVoLTZ2LTJoNlYyMTYuNXoiLz4KCTwvZz4KCTxnIGlkPSJGaWxlcy1Gb2xkZXJzX0NvbW1vbi1GaWxlc19jb21tb24tZmlsZS10ZXh0LWFkZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMi4zNjIgMi4xMzkpIj4KCQk8ZyBpZD0iR3JvdXBfNDIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM5Ny44MDYgMjAxLjk1KSI+CgkJCTxnIGlkPSJjb21tb24tZmlsZS10ZXh0LWFkZCI+CgkJCQk8ZyBpZD0iT3ZhbF8xOCI+CgkJCQkJPHBhdGggY2xhc3M9InN0MCIgZD0iTTEwNy4yLDExOC40TDEwNy4yLDExOC40TDEwNy4yLDExOC40Yy0xMi4zLDAtMjIuMy0xMC0yMi4zLTIyLjNjMC0xMi4zLDEwLTIyLjMsMjIuMy0yMi4zYzAsMCwwLDAsMCwwCgkJCQkJCWMxMi4zLDAsMjIuMywxMCwyMi4zLDIyLjNjMCw1LjktMi4zLDExLjUtNi41LDE1LjdDMTE4LjgsMTE2LjEsMTEzLjIsMTE4LjQsMTA3LjIsMTE4LjR6IE0xMDcuMiw3NS45CgkJCQkJCUMxMDcuMiw3NS45LDEwNy4yLDc1LjksMTA3LjIsNzUuOUM5Ni4xLDc1LjksODcsODUsODcsOTYuMmMwLDExLjIsOS4xLDIwLjMsMjAuMywyMC4zbDAsMXYtMWM1LjQsMCwxMC41LTIuMSwxNC4zLTUuOQoJCQkJCQljMy44LTMuOCw1LjktOC45LDUuOS0xNC4zQzEyNy41LDg1LDExOC40LDc1LjksMTA3LjIsNzUuOXoiLz4KCQkJCTwvZz4KCQkJCTxnIGlkPSJTaGFwZV8xMzMiPgoJCQkJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDcuMiwxMDcuOGMtMC42LDAtMS0wLjQtMS0xVjg1LjVjMC0wLjYsMC40LTEsMS0xczEsMC40LDEsMXYyMS4zQzEwOC4yLDEwNy4zLDEwNy44LDEwNy44LDEwNy4yLDEwNy44egoJCQkJCQkiLz4KCQkJCTwvZz4KCQkJCTxnIGlkPSJTaGFwZV8xMzQiPgoJCQkJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMTcuOSw5Ny4ySDk2LjZjLTAuNiwwLTEtMC40LTEtMXMwLjQtMSwxLTFoMjEuM2MwLjYsMCwxLDAuNCwxLDFTMTE4LjQsOTcuMiwxMTcuOSw5Ny4yeiIvPgoJCQkJPC9nPgoJCQkJPGcgaWQ9IlNoYXBlXzEzNSI+CgkJCQkJPHBhdGggY2xhc3M9InN0MCIgZD0iTTk0LjgsNjUuM0g2MS4xYy0wLjYsMC0xLTAuNC0xLTFzMC40LTEsMS0xaDMzLjdjMC42LDAsMSwwLjQsMSwxUzk1LjQsNjUuMyw5NC44LDY1LjN6Ii8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfMTM2Ij4KCQkJCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNODIuNCw3NS45SDYxLjFjLTAuNiwwLTEtMC40LTEtMXMwLjQtMSwxLTFoMjEuM2MwLjYsMCwxLDAuNCwxLDFTODMsNzUuOSw4Mi40LDc1Ljl6Ii8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfMTM3Ij4KCQkJCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNODYsNTQuNkg2MS4xYy0wLjYsMC0xLTAuNC0xLTFzMC40LTEsMS0xSDg2YzAuNiwwLDEsMC40LDEsMVM4Ni41LDU0LjYsODYsNTQuNnoiLz4KCQkJCTwvZz4KCQkJCTxnIGlkPSJTaGFwZV8xMzgiPgoJCQkJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik03NS4zLDg2LjVINjEuMWMtMC42LDAtMS0wLjQtMS0xczAuNC0xLDEtMWgxNC4yYzAuNiwwLDEsMC40LDEsMVM3NS45LDg2LjUsNzUuMyw4Ni41eiIvPgoJCQkJPC9nPgoJCQkJPGcgaWQ9IlNoYXBlXzEzOSI+CgkJCQkJPHBhdGggY2xhc3M9InN0MCIgZD0iTTc1LjMsOTcuMkg2MS4xYy0wLjYsMC0xLTAuNC0xLTFzMC40LTEsMS0xaDE0LjJjMC42LDAsMSwwLjQsMSwxUzc1LjksOTcuMiw3NS4zLDk3LjJ6Ii8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfMTQwIj4KCQkJCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNODIuNCwxMTguNEg1MC41Yy0yLjUsMC00LjUtMi00LjUtNC41VjM5LjRjMC0yLjUsMi00LjUsNC41LTQuNWg0Ny4xYzEuMiwwLDIuNCwwLjUsMy4yLDEuM0wxMTQsNDkuNAoJCQkJCQljMC45LDAuOSwxLjMsMiwxLjMsMy4ydjExLjdjMCwwLjYtMC40LDEtMSwxcy0xLTAuNC0xLTFWNTIuNmMwLTAuNy0wLjMtMS4zLTAuNy0xLjhMOTkuNCwzNy42Yy0wLjUtMC41LTEuMS0wLjctMS44LTAuN0g1MC41CgkJCQkJCWMtMS40LDAtMi41LDEuMS0yLjUsMi41djc0LjRjMCwxLjQsMS4xLDIuNSwyLjUsMi41aDMxLjljMC42LDAsMSwwLjQsMSwxUzgzLDExOC40LDgyLjQsMTE4LjR6Ii8+CgkJCQk8L2c+CgkJCTwvZz4KCQk8L2c+Cgk8L2c+Cgk8ZyBpZD0iQXJyb3dzLURpYWdyYW1zX0RpYWdyYW1zX2RpYWdyYW0tZGFzaC1kb3duLWZhc3QiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yIDQpIj4KCQk8ZyBpZD0iR3JvdXBfMTY1Ij4KCQkJPGcgaWQ9IkxpZ2h0XzE2NSI+CgkJCQk8ZyBpZD0iU2hhcGVfNTM5Ij4KCQkJCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNDg0LjEsNDQzbC00LjItNC4ybDEuNC0xLjRsNC4yLDQuMkw0ODQuMSw0NDN6IE00ODkuNyw0NDIuN2wtMS40LTEuNGw0LjItNC4ybDEuNCwxLjRMNDg5LjcsNDQyLjd6CgkJCQkJCSBNNDc1LjYsNDM0LjVsLTQuMi00LjJsMS40LTEuNGw0LjIsNC4yTDQ3NS42LDQzNC41eiBNNDk4LjIsNDM0LjJsLTEuNC0xLjRsMy45LTMuOWwxLjQsMS40TDQ5OC4yLDQzNC4yeiIvPgoJCQkJPC9nPgoJCQkJPGcgaWQ9IlNoYXBlXzU0MCI+CgkJCQkJPHBhdGggY2xhc3M9InN0MSIgZD0iTTQwMi43LDM0Ny42djQuMiIvPgoJCQkJCTxyZWN0IHg9IjQwMS43IiB5PSIzNDcuNiIgY2xhc3M9InN0MCIgd2lkdGg9IjIiIGhlaWdodD0iNC4yIi8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfNTQxIj4KCQkJCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNDAyLjcsMzYwLjN2OC42Ii8+CgkJCQkJPHJlY3QgeD0iNDAxLjciIHk9IjM2MC4zIiBjbGFzcz0ic3QwIiB3aWR0aD0iMiIgaGVpZ2h0PSI2Ii8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfNTQyIj4KCQkJCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNDAzLjMsMzc3LjRjMC44LDIuOCwyLjIsNS4zLDQuMyw3LjMiLz4KCQkJCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNDA1LjEsMzgzLjNjLTEuMy0xLjctMi4yLTMuNi0yLjgtNS43bDEuOS0wLjVjMC41LDEuOCwxLjMsMy41LDIuNSw1TDQwNS4xLDM4My4zeiIvPgoJCQkJPC9nPgoJCQkJPGcgaWQ9IlNoYXBlXzU0MyI+CgkJCQkJPHBhdGggY2xhc3M9InN0MSIgZD0iTTQxNC44LDM4OWMyLjgsMC42LDUuNywwLjksOC41LDAuNyIvPgoJCQkJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00MjAuNywzOTAuN2MtMi4xLDAtNC4xLTAuMy02LjItMC43bDAuNC0xLjljMS45LDAuNCwzLjgsMC43LDUuNywwLjdMNDIwLjcsMzkwLjd6Ii8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfNTQ0Ij4KCQkJCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNDMxLjgsMzg5LjZoOC42Ii8+CgkJCQkJPHJlY3QgeD0iNDMxLjgiIHk9IjM4OC42IiBjbGFzcz0ic3QwIiB3aWR0aD0iNiIgaGVpZ2h0PSIyIi8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfNTQ1Ij4KCQkJCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNDQ4LjksMzg5LjZoOC42Ii8+CgkJCQkJPHJlY3QgeD0iNDQ4LjkiIHk9IjM4OC42IiBjbGFzcz0ic3QwIiB3aWR0aD0iNiIgaGVpZ2h0PSIyIi8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfNTQ2Ij4KCQkJCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNDY2LDM4OS42YzIuOS0wLjIsNS43LDAsOC41LDAuNiIvPgoJCQkJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00NzEuOCwzOTAuOGMtMS45LTAuMy0zLjgtMC4zLTUuOC0wLjJsLTAuMS0yYzIuMS0wLjEsNC4yLTAuMSw2LjIsMC4yTDQ3MS44LDM5MC44eiIvPgoJCQkJPC9nPgoJCQkJPGcgaWQ9IlNoYXBlXzU0NyI+CgkJCQkJPHBhdGggY2xhc3M9InN0MSIgZD0iTTQ4MS43LDM5NC41YzIsMiwzLjUsNC41LDQuMyw3LjMiLz4KCQkJCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNDg0LjIsMzk5LjljLTAuOC0xLjctMS45LTMuMy0zLjItNC42bDEuNC0xLjRjMS41LDEuNSwyLjcsMy4zLDMuNiw1LjJMNDg0LjIsMzk5Ljl6Ii8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfNTQ4Ij4KCQkJCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNDg2LjcsNDEwLjN2OC42Ii8+CgkJCQkJPHJlY3QgeD0iNDg1LjciIHk9IjQxMC4zIiBjbGFzcz0ic3QwIiB3aWR0aD0iMiIgaGVpZ2h0PSI2Ii8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfNTQ5Ij4KCQkJCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNDg2LjcsNDI3LjR2NC4yIi8+CgkJCQkJPHJlY3QgeD0iNDg1LjciIHk9IjQyNy40IiBjbGFzcz0ic3QwIiB3aWR0aD0iMiIgaGVpZ2h0PSI0LjIiLz4KCQkJCTwvZz4KCQkJPC9nPgoJCTwvZz4KCTwvZz4KPC9nPgo8L3N2Zz4K) center /auto no-repeat,#F0EFF4",F=["click","onExitFunc","onMultiSelectionFunc","onAddDocumentFunc","onMultiSelectionCencelFunc","onAllSelectionFunc","onCancelAllSelectionFunc","onSaveFunc","onUploadFunc","bufferChanged","onRemoveSelectedFunc"],W={toolbars:{topMenu:!0,bottomMenu:!0},groups:{viewMenu:!1,global:!1,viewChange:!1,viewerCorner:!1,pager:!1,myMainTopGroup:{visibility:!0,location:"topMenu",sequence:1},myMainBottomGroup:{visibility:!0,location:"bottomMenu",sequence:1},myMultiSelectionTopGroup:{visibility:!0,location:"topMenu",sequence:2},myMultiSelectionBottomGroup:{visibility:!0,location:"bottomMenu",sequence:2},myGroup3:{visibility:!0,location:"header",sequence:1}},cropStyle:{cropMask:!1,cropBar:!1},buttonResize:{ifResize:!0,maxSize:18,minSize:12},buttons:{exit:{visibility:!0,location:"myMainTopGroup",iconClass:"ds-dvs-ui-pagePre ds-dwt-ui-icon-color ds-dwt-ui-icon-left",sequence:1,onButtonClick:"onExitFunc"},fileName:{visibility:!0,location:"myMainTopGroup",iconClass:"ds-dvs-ui-pagePre1 ds-dwt-ui-icon-color",sequence:2,text:""},addDocument:{visibility:!0,location:"myMainBottomGroup",iconClass:"ds-dwt-ui-icon-addImageFromCamera  ds-dwt-ui-icon-color",sequence:1,onButtonClick:"onAddDocumentFunc"},multiSelection:{visibility:!0,location:"myMainTopGroup",iconClass:"ds-dwt-ui-icon-selectAll ds-dwt-ui-icon-color ds-dwt-ui-icon-right",sequence:3,onButtonClick:"onMultiSelectionFunc"},cancel:{visibility:!0,location:"myMultiSelectionTopGroup",iconClass:"ds-dvs-ui-pagePre ds-dwt-ui-icon-color ds-dwt-ui-icon-left",sequence:1,onButtonClick:"onMultiSelectionCencelFunc"},selectCount:{visibility:!0,location:"myMultiSelectionTopGroup",iconClass:"ds-dvs-ui-pagePre2 ds-dwt-ui-icon-color",sequence:2,text:"selected count: "},selectAll:{visibility:!0,location:"myMultiSelectionTopGroup",iconClass:"ds-dwt-ui-mobile-icon-unselected ds-dwt-ui-icon-color dynamsoft-dwt-selectColor ds-dwt-ui-icon-right",sequence:2,onButtonClick:"onAllSelectionFunc"},cancelAllSelect:{visibility:!0,location:"myMultiSelectionTopGroup",iconClass:"ds-dwt-ui-mobile-icon-a-allselected ds-dwt-ui-icon-color dynamsoft-dwt-selectColor ds-dwt-ui-icon-right",sequence:3,onButtonClick:"onCancelAllSelectionFunc"},save:{visibility:!0,location:"myMultiSelectionBottomGroup",iconClass:"ds-dwt-ui-icon-saveImage ds-dwt-ui-icon-color",sequence:2,onButtonClick:"onSaveFunc"},upload:{visibility:!0,location:"myMultiSelectionBottomGroup",iconClass:"ds-dwt-ui-mobile-icon-a-uploadfromserver ds-dwt-ui-icon-color",sequence:2,onButtonClick:"onUploadFunc"},removeSelected:{visibility:!0,location:"myMultiSelectionBottomGroup",iconClass:"ds-dwt-ui-mobile-icon-delete ds-dwt-ui-icon-color",sequence:2,onButtonClick:"onRemoveSelectedFunc"}},content:{besides:{visibility:!1,sequence:4},thumbnail:{backgroundColor:"#fff"}},canvasConfig:{columns:2,rows:2,background:S,pageBackground:"rgb(255,255,255)",allowPageDragging:!0,checkbox:{visibility:R.visibility,width:"30px",height:"30px",background:R.background,borderWidth:"3px",borderColor:"#FE8E14",checkMarkColor:"#FE8E14",checkMarkLineWidth:"3px",borderRadius:R.borderRadius,opacity:1,left:R.left,top:R.top,right:R.right,bottom:R.bottom,translateX:R.translateX,translateY:R.translateY},pageNumber:{visibility:"visible",width:"36px",height:"36px",background:k.background,borderWidth:k.borderWidth,borderColor:k.borderColor,borderRadius:k.borderRadius,opacity:1,color:k.color,fontFamily:k.fontFamily,fontSize:18,left:k.left,top:k.top,right:k.right,bottom:k.bottom,translateX:k.translateX,translateY:k.translateY}},thumbnail:{showThumbnailControl:!1,selectedBorderColor:"#7DA2CE",selectedBackgroundColor:"rgb(199, 222, 252)",imageBackgroundColor:"transparent",imageBorderColor:"rgb(238, 238, 238)",hoverBackgroundColor:"rgb(239, 246, 253)",hoverBorderColor:"rgb(238, 238, 238)",placeholderBackgroundColor:"rgb(251, 236, 136)"}},O=function(){function e(t,n,r,i){(0,s.Z)(this,e),this._ImgManager=n,this._stwain=n._stwain,this._webViewer=t,this._template=r,this._documentConfiguration=i}return(0,u.Z)(e,[{key:"BindView",value:function(e){var t=this;e=e&&"DIV"==e.nodeName?e:document.getElementById(e),o.D.isUndefined(e)||o.D.isNull(e)?(t.newContainer=document.createElement("div"),document.body.appendChild(t.newContainer),document.body.insertBefore(t.newContainer,document.body.firstElementChild),t.newContainer.style.width="100%",t.newContainer.style.height="100%",t.newContainer.style.position="fixed",t.newContainer.style.left="0px",t.newContainer.style.top="0px",t.bFullScreen=!0):(t.newContainer=e,t.bFullScreen=!1),t._webViewer.BindView(t.newContainer),t._webViewer.updateUISettings(W)}},{key:"initView",value:function(){var e=this,t=((t=document.createElement("div")).id="btnCapture"+e._webViewer.myViewer.postfix,t.className="ds-dwt-ui-icon-addImageFromCamera dynamsoft-dwt-btnCapture",t.onclick=function(){e._webViewer.myViewer.emit("onAddDocumentFunc")},0==e._webViewer.GetHowManyImagesInBuffer()&&e._webViewer.SetBackground(L),(n=document.getElementById("WebViewer"+e._webViewer.myViewer.postfix))&&n.appendChild(t),e.setMultiSelectMode(!1),e.__bindButtonEvents(),e._webViewer.SetCursor("pointer"),e.DWTCustomWrapper=document.createElement("div"),o.I.Lib.env.isMobileViewer()),n=o.I.Lib.env.isPadViewer();t||n?e.customElement=e._webViewer.createCustomElement(e.DWTCustomWrapper,"right",!0):(e.DWTCustomWrapper.style.height="100%",e.DWTCustomWrapper.style.width="20%",e.customElement=e._webViewer.createCustomElement(e.DWTCustomWrapper,"right",!1)),(t=document.getElementById("fileName"+e._webViewer.myViewer.postfix))&&(t.style.width="80%",t.style.whiteSpace="nowrap"),(n=document.getElementById("selectCount"+e._webViewer.myViewer.postfix))&&(n.style.width="200px",n.style.whiteSpace="nowrap"),(t=document.getElementById("bottomMenu"+e._webViewer.myViewer.postfix))&&(t.style.border="0",t.style.display="none")}},{key:"UnbindView",value:function(){var e=this,t=(e._unbindButtonEvents(),e._documentEditor&&e._documentEditor.dispose(),document.getElementById("btnCapture"+e._webViewer.myViewer.postfix));return t&&(t.onclick=function(){}),e.newContainer&&1==e.bFullScreen&&this.newContainer.parentNode&&0<e.newContainer.childNodes.length&&e.newContainer.parentNode.removeChild(e.newContainer),e.newContainer="",!(e.DWTCustomWrapper="")}},{key:"setMultiSelectMode",value:function(e){var t=document.getElementById("myMainTopGroup"+this._webViewer.GetIdPostfix()),n=document.getElementById("myMainBottomGroup"+this._webViewer.GetIdPostfix()),r=document.getElementById("myMultiSelectionTopGroup"+this._webViewer.GetIdPostfix()),i=document.getElementById("myMultiSelectionBottomGroup"+this._webViewer.GetIdPostfix());e?(t.style.display="none",n.style.display="none",r.style.display="",i.style.display=""):(t.style.display="",n.style.display="",r.style.display="none",i.style.display="none")}},{key:"__bindButtonEvents",value:function(){var e=this;o.I.Lib.each(F,(function(t){e._webViewer.on(t,(function(n,r){e[t](n,r)}))}))}},{key:"_unbindButtonEvents",value:function(){var e=this;o.D.each(F,(function(t){e._webViewer.off(t)}))}},{key:"bufferChanged",value:function(e){var t=this,n=("shift"!=e.action&&"remove"!=e.action&&"add"!=e.action||(n=document.getElementById("selectCount"+t._webViewer.GetIdPostfix()),e.selectedIds&&n&&(n.innerText="selected count: "+e.selectedIds.length),t.setSelectAllButtonEnable(!e.selectedIds||e.selectedIds.length!=t._stwain.HowManyImagesInBuffer||0==t._stwain.HowManyImagesInBuffer)),e.selectedIds&&0==e.selectedIds.length?(t._webViewer.setButtonClass("save","ds-dwt-ui-icon-color-grey"),t._webViewer.setButtonClass("upload","ds-dwt-ui-icon-color-grey"),t._webViewer.setButtonClass("removeSelected","ds-dwt-ui-icon-color-grey")):(t._webViewer.setButtonClass("save","ds-dwt-ui-icon-color"),t._webViewer.setButtonClass("upload","ds-dwt-ui-icon-color"),t._webViewer.setButtonClass("removeSelected","ds-dwt-ui-icon-color")),document.getElementById("btnCapture"+t._webViewer.myViewer.postfix));n&&""==n.style.display&&(o.D.isUndefined(e.imageIds)||e.imageIds&&0==e.imageIds.length)?t._webViewer.SetBackground(L):t._webViewer.SetBackground(S)}},{key:"Dynamsoft_DocumentTemplate_OnVideoClosed",value:function(){this._webViewer.OpenFile(this._webViewer.currentFileName)}},{key:"click",value:function(e){-1!=e.index&&this._webViewer.GetMultiSelectMode()==o.I.DWT.EnumDWT_SelectionMode.Single&&0<this._stwain.HowManyImagesInBuffer&&(e=this._webViewer.createDocumentEditor(this._documentConfiguration))&&e.show()}},{key:"onExitFunc",value:function(){this._template.onExitFunc()}},{key:"ifShowDocumentTemplate",value:function(e){this.newContainer&&(this.newContainer.style.display=e?"":"none")}},{key:"setTemplateTitle",value:function(e){var t=o.I.Lib.env.isMobileViewer(),n=document.getElementById("fileName"+this._webViewer.myViewer.postfix);n&&(n.innerText=t&&26<e.length?e.substring(0,10)+"..."+e.substring(e.length-13,e.length):!t&&100<e.length?e.substring(0,80)+"..."+e.substring(e.length-17,e.length):e)}},{key:"onMultiSelectionFunc",value:function(){this._MultiSelectionInner([])}},{key:"_MultiSelectionInner",value:function(e){var t=this,n=document.getElementById("bottomMenu"+t._webViewer.myViewer.postfix);n&&(n.style.display=""),t._stwain.SelectImages(e),t.setMultiSelectMode(!0),t._webViewer.GetShowCheckbox()||(document.getElementById("selectCount"+t._webViewer.GetIdPostfix()).innerText="selected count: "+t._stwain.SelectedImagesIndices.length,t._webViewer.SetShowCheckbox(!0),t.setSelectAllButtonEnable(t._stwain.SelectedImagesIndices.length!=t._stwain.HowManyImagesInBuffer||0==t._stwain.HowManyImagesInBuffer),(n=document.getElementById("btnCapture"+t._webViewer.myViewer.postfix))&&(n.style.display="none",t._webViewer.SetBackground(S)),t._template&&!o.I.Lib.isFunction(t._template.onSaveFunc)&&(e=document.getElementById("save"+t._webViewer.myViewer.postfix))&&(e.style.display="none"),t._template&&!o.I.Lib.isFunction(t._template.onUploadFunc)&&(n=document.getElementById("upload"+t._webViewer.myViewer.postfix))&&(n.style.display="none"))}},{key:"onAddDocumentFunc",value:function(){this._template.onAddDocumentFunc()}},{key:"onMultiSelectionCencelFunc",value:function(){var e;this.setMultiSelectMode(!1),this._webViewer.SetShowCheckbox(!1),this._stwain.SelectImages([]),(e=document.getElementById("bottomMenu"+this._webViewer.myViewer.postfix))&&(e.style.border="0",e.style.display="none"),(e=document.getElementById("btnCapture"+this._webViewer.myViewer.postfix))&&(e.style.display="",0==this._webViewer.GetHowManyImagesInBuffer()?this._webViewer.SetBackground(L):this._webViewer.SetBackground(S)),this._webViewer.SetViewMode(2,2)}},{key:"onAllSelectionFunc",value:function(){this._stwain.SelectAllImages(),this.setSelectAllButtonEnable(!1)}},{key:"onCancelAllSelectionFunc",value:function(){this._stwain.SelectImages([]),this.setSelectAllButtonEnable(!0)}},{key:"setSelectAllButtonEnable",value:function(e){var t=document.getElementById("cancelAllSelect"+this._webViewer.GetIdPostfix()),n=document.getElementById("selectAll"+this._webViewer.GetIdPostfix());n&&t&&(e?(n.style.display="",t.style.display="none"):(n.style.display="none",t.style.display=""))}},{key:"onSaveFunc",value:function(){0<this._stwain.SelectedImagesIndices.length&&o.I.Lib.isFunction(this._template.onSaveFunc)&&this._template.onSaveFunc()}},{key:"onUploadFunc",value:function(){0<this._stwain.SelectedImagesIndices.length&&o.I.Lib.isFunction(this._template.onUploadFunc)&&this._template.onUploadFunc()}},{key:"onRemoveSelectedFunc",value:function(){0<this._stwain.SelectedImagesIndices.length&&this._template.onRemoveSelectedFunc()}},{key:"getCustomElement",value:function(){return this.customElement}}]),e}(),B=(o.D.UI.DocumentTemplate=O,function(){function e(t,n,r){(0,s.Z)(this,e),this._webViewer=t,this._ImgManager=n,this._documentTemplate=new O(t,n,this,r)}return(0,u.Z)(e,[{key:"getCustomElement",value:function(){return this._documentTemplate.getCustomElement()}},{key:"onExitFunc",value:function(){this._webViewer.hide()}},{key:"onAddDocumentFunc",value:function(){var e=this;e._documentTemplate._documentConfiguration?e._webViewer.showVideoInner(e._documentTemplate._documentConfiguration):""==e._webViewer._documentScanConfiguration?0==e._documentTemplate.bFullScreen?(e._documentTemplate.newContainer.style.width=e._webViewer.GetWidth()+"px",e._documentTemplate.newContainer.style.height=e._webViewer.GetHeight()+"px",e._webViewer.showVideoInner({element:e._documentTemplate.newContainer})):e._webViewer.showVideoInner():e._webViewer.showVideoInner(e._webViewer._documentScanConfiguration)}},{key:"onRemoveSelectedFunc",value:function(){0<this._ImgManager._stwain.SelectedImagesIndices.length&&this._ImgManager._stwain.RemoveAllSelectedImages()}}]),e}());function N(e){if(null!=e){var t=e;if(o.D.isString(t)&&(t=t.toLowerCase()),"hidden"===e||!1===e)return!1}return!0}o.D.UI.Template=B;var V,U,G,j=function(){function e(t,n,r){(0,s.Z)(this,e),(0,h.Z)(this,"bShowDocumentEdit",!1);var i=this;0==(i._webViewer=t,i._stwain=t._stwain,i._webViewer.mydocEditManager||i._webViewer.createDocumentEditManager(),i._mydocEditManager=t.mydocEditManager,i._webViewer.notBindCameraForDocumentEditManager()&&i._webViewer.bindCameraForDocumentEditManager(),t=i._webViewer.GetCurrentFileName()).length&&(i._webViewer.CreateFile(T),i._webViewer.OpenFile(T),t=T),r.fileName=t,r.viewerUid=i._webViewer.myViewer.uid,i.myDocumentEditor=i._mydocEditManager.createEditPage(n,r),i.bShowDocumentEdit=N(r.visibility)&&N(r.documentEditorSettings.visibility),i.myDocumentEditor||o.D.Errors.WebviewerError(i._webViewer._stwain,i._webViewer.mydocEditManager.Error.errorMessage,i._webViewer.mydocEditManager.Error.errorCode),i.bDispose=!1}return(0,u.Z)(e,[{key:"dispose",value:function(){var e=this,t=!1;return e.bShowDocumentEdit=!1,e.myDocumentEditor&&e.myDocumentEditor.hide(),e._mydocEditManager?e.myDocumentEditor.isDestroyed?(o.D.Errors.DocumentEditorDispose(e._webViewer._stwain),e.myDocumentEditor=void 0,e._webViewer._documentEditor=void 0,e._webViewer._documentEditorInner=void 0,e._mydocEditManager=null,e._stwain=null,!(e.bDispose=!0)):((t=e._mydocEditManager.removeEditPage(e.myDocumentEditor))&&(e.myDocumentEditor=void 0,e._webViewer._documentEditor=void 0,e._webViewer._documentEditorInner=void 0,e._mydocEditManager=null,e._stwain=null,e.bDispose=!0),t):(e.bDispose?o.D.Errors.DocumentEditorDispose(e._webViewer._stwain):o.D.Errors.DocumentEditorNotExist(e._webViewer._stwain),!1)}},{key:"show",value:function(){return this.myDocumentEditor?this.myDocumentEditor.isDestroyed?(o.D.Errors.DocumentEditorDispose(this._webViewer._stwain),!1):(this.bShowDocumentEdit||this.myDocumentEditor.show(),this.bShowDocumentEdit=!0):(this.bDispose?o.D.Errors.DocumentEditorDispose(this._webViewer._stwain):o.D.Errors.DocumentEditorNotExist(this._webViewer._stwain),!1)}},{key:"hide",value:function(){return this.bShowDocumentEdit=!1,this.myDocumentEditor?this.myDocumentEditor.isDestroyed?(o.D.Errors.DocumentEditorDispose(this._webViewer._stwain),!1):(this.myDocumentEditor.hide(),!0):(this.bDispose?o.D.Errors.DocumentEditorDispose(this._webViewer._stwain):o.D.Errors.DocumentEditorNotExist(this._webViewer._stwain),!1)}},{key:"syncFile",value:function(e){this._mydocEditManager.syncFile(e)}}]),e}(),H=(o.D.UI.DocumentEditorInner=j,function(){function e(t,n,r){(0,s.Z)(this,e),(0,h.Z)(this,"_documentEditorInner",void 0),(0,h.Z)(this,"myDocumentEditor",void 0),this._documentEditorInner=new j(t,n,r),this.myDocumentEditor=this._documentEditorInner.myDocumentEditor}return(0,u.Z)(e,[{key:"show",value:function(){return this._documentEditorInner.show()}},{key:"hide",value:function(){return this._documentEditorInner.hide()}},{key:"dispose",value:function(){return this._documentEditorInner.dispose()}},{key:"syncFile",value:function(e){return this._documentEditorInner.syncFile(e)}}]),e}()),z=(o.D.UI.DocumentEditor=H,o.I.navInfoSync),K={getImageUrl:function(e,t,n,r,i){return e=[e],o.D.isNumber(t)&&t<0?"":(null!=t&&(e.push("&index="),e.push(t)),e.push("&width="),e.push(n),e.push("&height="),e.push(r),e.push("&ticks="),e.push(i||l()()),e.join(""))},getUrlByAct:function(e,t,n){return e=[e],null!=t&&(e.push("&index="),e.push(t)),n&&(e.push("&act="),e.push(n)),e.push("&ticks="),e.push(l()()),e.join("")},output:function(e,t){o.I.DWT.Debug&&o.D.log(t)},print:function(e){var t=850,n=1120,r=0,a=0,s=0,u="";for(o.D.product.bHTML5Edition&&(z.bIE&&(n=1160),z.bFirefox&&(n=1150)),r=0;r<e.length;r++){var c=n,l=(h=e[r]).Width,d=h.Height,h=h.Url,g=t/(l=l<=0?t:l),f=c/(d=d<=0?c:d);g<f?c=i()(d*g):f<g&&(t=i()(l*f)),a+=l,s+=d,u=u+'<div style="width:'+t+"px;height:"+c+'px"><img id="D_img'+r+'" src="'+h+'" style="position:relative;left:0px;top:0px;width: '+t+"px;height: "+c+'px" referrerpolicy="strict-origin-when-cross-origin" /></div>'}var m=["alwaysRaised=yes,z-look=yes,top=0,left=0,toolbar=no,menubar=no,location=no,status=no,width=",a,",height=",s].join(""),p=window.open("about:blank","_blank",m);p&&(p.document.write('<html><body id="D_img">'+u+"</body></html>"),p.document.close(),p.focus(),(m=p.document.getElementById("D_img"))?m.onload=function(){p.print(),o.D.log("print image...ok")}:o.D.log("cannot find image"))}},J=(o.D.html5.Funs2=K,document),Y=window,X=o.I.DWT,Q=X.CustomizableDisplayInfo.dialogText,Z=K,q={isFunction:function(e){return e&&"function"==typeof e},addClass:function(e,t){(e=o.D.one(e))&&0<e.length&&e.addClass(t)},removeClass:function(e,t){(e=o.D.one(e))&&0<e.length&&e.removeClass(t)},output:function(e,t){o.I.DWT.Debug&&o.D.log(t)},getTop:function(e){var t=e.offsetTop;return null!=e.offsetParent&&(t+=q.getTop(e.offsetParent)),t},getLeft:function(e){var t=e.offsetLeft;return null!=e.offsetParent&&(t+=q.getLeft(e.offsetParent)),t}},$=(o.D._safePromptCustomMsg((function(){Q=X.CustomizableDisplayInfo.dialogText,U={toolbars:{bottomMenu:!1,header:!1,topMenu:!0,asideMenu:!1},groups:{viewMenu:{visibility:!1},myGroup:{visibility:!0,location:"topMenu",sequence:1}},buttonResize:{ifResize:!0,maxSize:22,minSize:16},buttons:{loadImage:{visibility:!1},readDirection:{visibility:!1},panelChange:{visibility:!1},previousImage:{visibility:!0,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-preImage",sequence:1,onButtonClick:"OnPreviousImage"},nextImage:{visibility:!0,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-nextImage",sequence:2,onButtonClick:"OnNextImage"},blank1:{visibility:!0,location:"myGroup",sequence:3},acquire:{visibility:1==(V=X.CustomizableDisplayInfo.buttons).visibility.scan,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-acquire",sequence:4,onButtonClick:"OnAcquire"},loadImages:{visibility:1==V.visibility.load,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-load",sequence:5,onButtonClick:"OnLoadImage"},print:{visibility:1==V.visibility.print,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-printImage",sequence:6,onButtonClick:"OnPrint"},blank2:{visibility:!!(V.visibility.scan||V.visibility.load||V.visibility.print),location:"myGroup",sequence:7},removeAll:{visibility:1==V.visibility.removeall,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-removeall",sequence:8,onButtonClick:"OnRemoveAll"},remove:{visibility:1==V.visibility.removeselected,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-removeImage",sequence:9,onButtonClick:"OnRemove"},blank3:{visibility:!(!V.visibility.removeall&&!V.visibility.removeselected),location:"myGroup",sequence:10},rotateLeft:{visibility:1==V.visibility.rotateleft,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-rotateLeftImage",sequence:11,onButtonClick:"OnRotateLeft"},rotate:{visibility:1==V.visibility.rotate,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-rotate",sequence:12,onButtonClick:"OnRotate"},rotateRight:{visibility:1==V.visibility.rotateright,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-rotateRightImage",sequence:13,onButtonClick:"OnRotateRight"},deskew:{visibility:1==V.visibility.deskew,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-deskew",sequence:14,onButtonClick:"OnDeskew"},blank4:{visibility:!!(V.visibility.rotateleft||V.visibility.rotate||V.visibility.rotateright||V.visibility.deskew),location:"myGroup",sequence:15},crop:{visibility:1==V.visibility.crop,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-cropImage-grey",sequence:16,onButtonClick:"OnCrop"},cut:{visibility:1==V.visibility.cut,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-erase-grey",sequence:17,onButtonClick:"OnErase"},changeImageSize:{visibility:1==V.visibility.changeimagesize,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-changeImageSize",sequence:18,onButtonClick:"OnChangeImageSize"},flip:{visibility:1==V.visibility.flip,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-flipImage",sequence:19,onButtonClick:"OnFlip"},mirror:{visibility:1==V.visibility.mirror,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-mirrorImage",sequence:20,onButtonClick:"OnMirror"},blank5:{visibility:!!(V.visibility.crop||V.visibility.cut||V.visibility.changeimagesize||V.visibility.flip||V.visibility.mirror),location:"myGroup",sequence:21},zoomin:{visibility:1==V.visibility.zoomin,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-zoomin",sequence:22,onButtonClick:"OnZoomin"},originalsize:{visibility:1==V.visibility.originalsize,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-originalsize",sequence:23,onButtonClick:"OnOriginalsize"},zoomout:{visibility:1==V.visibility.zoomout,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-zoomout",sequence:24,onButtonClick:"OnZoomout"},blank6:{visibility:!!(V.visibility.zoomin||V.visibility.originalsize||V.visibility.zoomout||V.visibility.stretch),location:"myGroup",sequence:26},fitPage:{visibility:1==V.visibility.fit,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-fullWebType",sequence:27,onButtonClick:"OnFitPage"},fitWidth:{visibility:1==V.visibility.fitw,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-fitWidthType",sequence:28,onButtonClick:"OnFitWidth"},fitHeight:{visibility:1==V.visibility.fith,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-fitHeightType",sequence:29,onButtonClick:"OnFitHeight"},blank7:{visibility:!!(V.visibility.fit||V.visibility.fitw||V.visibility.fith),location:"myGroup",sequence:30},hand:{visibility:1==V.visibility.hand,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-hand",sequence:31,onButtonClick:"OnHand"},select:{visibility:1==V.visibility.rectselect,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-select",sequence:32,onButtonClick:"OnSelect"},clicktozoomin:{visibility:1==V.visibility.zoom,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-clicktozoomin",sequence:33,onButtonClick:"OnClicktozoomin"},blank8:{visibility:!!(V.visibility.hand||V.visibility.rectselect||V.visibility.zoom),location:"myGroup",sequence:34},restore:{visibility:1==V.visibility.restore,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-restore",sequence:35,onButtonClick:"OnRestore"},save:{visibility:1==V.visibility.save,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-saveImage",sequence:36,onButtonClick:"OnSave"},close:{visibility:1==V.visibility.close,location:"topMenuRight",iconClass:"d-icon-font ds-dwt-ui-icon-close",sequence:1,onButtonClick:"OnClose"}},thumbnail:{visibility:!1,showThumbnailControl:!1,hoverBackgroundColor:"rgb(239, 246, 253)",hoverBorderColor:"rgb(238, 238, 238)",imageBackgroundColor:"transparent",imageBorderColor:"rgb(238, 238, 238)",placeholderBackgroundColor:"rgb(251, 236, 136)",selectedBorderColor:"rgb(125,162,206)"},tipsConfig:{previousImage:V.titles.previous,nextImage:V.titles.next,acquire:V.titles.scan,loadImages:V.titles.load,print:V.titles.print,removeAll:V.titles.removeall,remove:V.titles.removeselected,rotateLeft:V.titles.rotateleft,rotate:V.titles.rotate,rotateRight:V.titles.rotateright,deskew:V.titles.deskew,crop:V.titles.crop,cut:V.titles.cut,changeImageSize:V.titles.changeimagesize,flip:V.titles.flip,mirror:V.titles.mirror,zoomin:V.titles.zoomin,originalsize:V.titles.originalsize,zoomout:V.titles.zoomout,stretch:V.titles.stretch,fitPage:V.titles.fit,fitWidth:V.titles.fitw,fitHeight:V.titles.fith,hand:V.titles.hand,select:V.titles.rectselect,clicktozoomin:V.titles.zoom,restore:V.titles.restore,save:V.titles.save,close:V.titles.close},canvasConfig:{selectedPageBackground:w,selectedPageBorder:"",hoverPageBackground:w,canvasBorder:"",canvasBackground:"#434246"},outerBorder:"",topMenuBorder:""},G={toolbars:{header:!0,bottomMenu:!0,topMenu:!0,asideMenu:!1},groups:{viewMenu:{visibility:!1},global:{visibility:!1},viewChange:{visibility:!1},viewerCorner:{visibility:!1},pager:{visibility:!1},myGroup:{visibility:!0,location:"topMenu",sequence:1},myGroup2:{visibility:!0,location:"bottomMenu",sequence:1},myGroup3:{visibility:!0,location:"header",sequence:1},myGroup4:{visibility:!0,location:"bottomMenu",sequence:2}},buttonResize:{ifResize:!0,maxSize:32,minSize:26},buttons:{loadImage:{visibility:!1},readDirection:{visibility:!1},panelChange:{visibility:!1},print:{visibility:!1},loadImages:{visibility:1==V.visibility.load,location:"myGroup3",iconClass:"d-icon-font ds-dwt-ui-icon-load",sequence:1,onButtonClick:"OnLoadImage"},close:{visibility:1==V.visibility.close,location:"myGroup3",iconClass:"d-icon-font ds-dwt-ui-icon-close ds-dwt-ui-icon-close-right",sequence:2,onButtonClick:"OnClose"},rotateLeft:{visibility:1==V.visibility.rotateleft,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-rotateLeftImage",sequence:1,onButtonClick:"OnRotateLeft"},rotateRight:{visibility:1==V.visibility.rotateright,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-rotateRightImage",sequence:2,onButtonClick:"OnRotateRight"},flip:{visibility:1==V.visibility.flip,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-flipImage",sequence:3,onButtonClick:"OnFlip"},mirror:{visibility:1==V.visibility.mirror,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-mirrorImage",sequence:4,onButtonClick:"OnMirror"},crop:{visibility:1==V.visibility.crop,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-cropImage-grey",sequence:5,onButtonClick:"OnCrop"},cut:{visibility:1==V.visibility.cut,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-erase-grey",sequence:6,onButtonClick:"OnErase"},hand:{visibility:1==V.visibility.hand,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-hand",sequence:7,onButtonClick:"OnHand"},select:{visibility:1==V.visibility.rectselect,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-select",sequence:8,onButtonClick:"OnSelect"},firstPage:{visibility:!0,location:"myGroup2",iconClass:"ds-dvs-ui-pageStart",sequence:1,onButtonClick:"OnFirstImage"},previousPage:{visibility:!0,location:"myGroup2",iconClass:"ds-dvs-ui-pagePre",sequence:2,onButtonClick:"OnPreviousImage"},pagination:{visibility:!0,location:"myGroup2",sequence:3},nextPage:{visibility:!0,location:"myGroup2",iconClass:"ds-dvs-ui-pageNext",sequence:4,onButtonClick:"OnNextImage"},lastPage:{visibility:!0,location:"myGroup2",iconClass:"ds-dvs-ui-pageEnd",sequence:5,onButtonClick:"OnLastImage"},removeAll:{visibility:1==V.visibility.removeall,location:"myGroup4",iconClass:"d-icon-font ds-dwt-ui-icon-removeall",sequence:7,onButtonClick:"OnRemoveAll"},remove:{visibility:1==V.visibility.removeselected,location:"myGroup4",iconClass:"d-icon-font ds-dwt-ui-icon-removeImage",sequence:8,onButtonClick:"OnRemove"},restore:{visibility:1==V.visibility.restore,location:"myGroup4",iconClass:"d-icon-font ds-dwt-ui-icon-restore",sequence:10,onButtonClick:"OnRestore"},save:{visibility:1==V.visibility.save,location:"myGroup4",iconClass:"d-icon-font ds-dwt-ui-icon-saveImage",sequence:11,onButtonClick:"OnSave"}},thumbnail:{visibility:!1,showThumbnailControl:!1,hoverBackgroundColor:"rgb(239, 246, 253)",hoverBorderColor:"rgb(238, 238, 238)",imageBackgroundColor:"transparent",imageBorderColor:"rgb(238, 238, 238)",placeholderBackgroundColor:"rgb(251, 236, 136)",selectedBorderColor:"rgb(125,162,206)",pageBorderColor:"rgb(204, 204, 204)"},tipsConfig:{previousImage:V.titles.previous,nextImage:V.titles.next,acquire:V.titles.scan,loadImages:V.titles.load,print:V.titles.print,removeAll:V.titles.removeall,remove:V.titles.removeselected,rotateLeft:V.titles.rotateleft,rotate:V.titles.rotate,rotateRight:V.titles.rotateright,deskew:V.titles.deskew,crop:V.titles.crop,cut:V.titles.cut,changeImageSize:V.titles.changeimagesize,flip:V.titles.flip,mirror:V.titles.mirror,zoomin:V.titles.zoomin,originalsize:V.titles.originalsize,zoomout:V.titles.zoomout,stretch:V.titles.stretch,fitPage:V.titles.fit,fitWidth:V.titles.fitw,fitHeight:V.titles.fith,hand:V.titles.hand,select:V.titles.rectselect,clicktozoomin:V.titles.zoom,restore:V.titles.restore,save:V.titles.save,close:V.titles.close},canvasConfig:{selectedPageBackground:w,selectedPageBorder:"",hoverPageBackground:w,canvasBorder:"",canvasBackground:"#434246"},outerBorder:"",topMenuBorder:""}})),function(){function e(t,n){(0,s.Z)(this,e);var r=this,i=(r._webViewer=t,r.mydvs=t.mydvs,r._stwain=t._stwain,r.bShowImageEditForFullScreen=!1,r.bCouldBeTimeConsuming=!1,r.bShowImageEdit=!1,r.promptToSaveChange=!0,t=U,r.bMobile=!1);r._stwain._isPC()||(r.bPadViewer||(t=G,i=!0),r.bMobile=!0),t=r.updateWebviewerConfig(t,n,i),r.myImageEditor=r.mydvs.ViewControl.createViewer({container:"",displayMode:"single",uiConfig:t,scrollerConfig:{}},r._webViewer.myViewer.uid),r.myImageEditor.maxZoom=50,0!=r._webViewer.mydvs.Error.errorCode&&o.D.Errors.WebviewerError(r._webViewer._stwain,r._webViewer.mydvs.Error.errorMessage,r._webViewer.mydvs.Error.errorCode),r.bDispose=!1,r._BindImageEditorEvents(),r._bindView(),r._currentIndex=r._webViewer.GetCurrentIndex()}return(0,u.Z)(e,[{key:"updateWebviewerConfig",value:function(e,t,n){return t&&(this.editorSettings=t,o.D.isUndefined(t.buttons)||(o.D.isUndefined(t.buttons.titles)||(o.D.isUndefined(t.buttons.titles.previous)||(e.tipsConfig.previousImage=t.buttons.titles.previous),o.D.isUndefined(t.buttons.titles.next)||(e.tipsConfig.nextImage=t.buttons.titles.next),o.D.isUndefined(t.buttons.titles.print)||(e.tipsConfig.print=t.buttons.titles.print),o.D.isUndefined(t.buttons.titles.scan)||(e.tipsConfig.acquire=t.buttons.titles.scan),o.D.isUndefined(t.buttons.titles.load)||(e.tipsConfig.loadImages=t.buttons.titles.load),o.D.isUndefined(t.buttons.titles.rotateleft)||(e.tipsConfig.rotateLeft=t.buttons.titles.rotateleft),o.D.isUndefined(t.buttons.titles.rotate)||(e.tipsConfig.rotate=t.buttons.titles.rotate),o.D.isUndefined(t.buttons.titles.rotateright)||(e.tipsConfig.rotateRight=t.buttons.titles.rotateright),o.D.isUndefined(t.buttons.titles.deskew)||(e.tipsConfig.deskew=t.buttons.titles.deskew),o.D.isUndefined(t.buttons.titles.crop)||(e.tipsConfig.crop=t.buttons.titles.crop),o.D.isUndefined(t.buttons.titles.cut)||(e.tipsConfig.cut=t.buttons.titles.cut),o.D.isUndefined(t.buttons.titles.changeimagesize)||(e.tipsConfig.changeImageSize=t.buttons.titles.changeimagesize),o.D.isUndefined(t.buttons.titles.flip)||(e.tipsConfig.flip=t.buttons.titles.flip),o.D.isUndefined(t.buttons.titles.mirror)||(e.tipsConfig.mirror=t.buttons.titles.mirror),o.D.isUndefined(t.buttons.titles.zoomin)||(e.tipsConfig.zoomin=t.buttons.titles.zoomin),o.D.isUndefined(t.buttons.titles.originalsize)||(e.tipsConfig.originalsize=t.buttons.titles.originalsize),o.D.isUndefined(t.buttons.titles.zoomout)||(e.tipsConfig.zoomout=t.buttons.titles.zoomout),o.D.isUndefined(t.buttons.titles.stretch)||(e.tipsConfig.stretch=t.buttons.titles.stretch),o.D.isUndefined(t.buttons.titles.fit)||(e.tipsConfig.fitPage=t.buttons.titles.fit),o.D.isUndefined(t.buttons.titles.fitw)||(e.tipsConfig.fitWidth=t.buttons.titles.fitw),o.D.isUndefined(t.buttons.titles.fith)||(e.tipsConfig.fitHeight=t.buttons.titles.fith),o.D.isUndefined(t.buttons.titles.hand)||(e.tipsConfig.hand=t.buttons.titles.hand),o.D.isUndefined(t.buttons.titles.rectselect)||(e.tipsConfig.select=t.buttons.titles.rectselect),o.D.isUndefined(t.buttons.titles.zoom)||(e.tipsConfig.clicktozoomin=t.buttons.titles.zoom),o.D.isUndefined(t.buttons.titles.restore)||(e.tipsConfig.restore=t.buttons.titles.restore),o.D.isUndefined(t.buttons.titles.save)||(e.tipsConfig.save=t.buttons.titles.save),o.D.isUndefined(t.buttons.titles.close)||(e.tipsConfig.close=t.buttons.titles.close),o.D.isUndefined(t.buttons.titles.removeall)||(e.tipsConfig.removeAll=t.buttons.titles.removeall),o.D.isUndefined(t.buttons.titles.removeselected)||(e.tipsConfig.remove=t.buttons.titles.removeselected)),o.D.isUndefined(t.buttons.visibility)||(n?(e.buttons.loadImages.visibility=!!o.D.isUndefined(t.buttons.visibility.load)||1==t.buttons.visibility.load,e.buttons.close.visibility=!!o.D.isUndefined(t.buttons.visibility.close)||1==t.buttons.visibility.close,e.buttons.rotateLeft.visibility=!!o.D.isUndefined(t.buttons.visibility.rotateleft)||1==t.buttons.visibility.rotateleft,e.buttons.rotateRight.visibility=!!o.D.isUndefined(t.buttons.visibility.rotateright)||1==t.buttons.visibility.rotateright,e.buttons.flip.visibility=!!o.D.isUndefined(t.buttons.visibility.flip)||1==t.buttons.visibility.flip,e.buttons.mirror.visibility=!!o.D.isUndefined(t.buttons.visibility.mirror)||1==t.buttons.visibility.mirror,e.buttons.crop.visibility=!!o.D.isUndefined(t.buttons.visibility.crop)||1==t.buttons.visibility.crop,e.buttons.cut.visibility=!!o.D.isUndefined(t.buttons.visibility.cut)||1==t.buttons.visibility.cut,e.buttons.hand.visibility=!!o.D.isUndefined(t.buttons.visibility.hand)||1==t.buttons.visibility.hand,e.buttons.select.visibility=!!o.D.isUndefined(t.buttons.visibility.rectselect)||1==t.buttons.visibility.rectselect,e.buttons.removeAll.visibility=!!o.D.isUndefined(t.buttons.visibility.removeall)||1==t.buttons.visibility.removeall,e.buttons.remove.visibility=!!o.D.isUndefined(t.buttons.visibility.removeselected)||1==t.buttons.visibility.removeselected,e.buttons.restore.visibility=!!o.D.isUndefined(t.buttons.visibility.restore)||1==t.buttons.visibility.restore,e.buttons.save.visibility=!!o.D.isUndefined(t.buttons.visibility.save)||1==t.buttons.visibility.save):(e.buttons.acquire.visibility=!!o.D.isUndefined(t.buttons.visibility.scan)||1==t.buttons.visibility.scan,e.buttons.loadImages.visibility=!!o.D.isUndefined(t.buttons.visibility.load)||1==t.buttons.visibility.load,e.buttons.print.visibility=!!o.D.isUndefined(t.buttons.visibility.print)||1==t.buttons.visibility.print,e.buttons.blank2.visibility=!!(e.buttons.acquire.visibility||e.buttons.loadImages.visibility||e.buttons.print.visibility),e.buttons.removeAll.visibility=!!o.D.isUndefined(t.buttons.visibility.removeall)||1==t.buttons.visibility.removeall,e.buttons.remove.visibility=!!o.D.isUndefined(t.buttons.visibility.removeselected)||1==t.buttons.visibility.removeselected,e.buttons.blank3.visibility=!(!e.buttons.removeAll.visibility&&!e.buttons.remove.visibility),e.buttons.rotateLeft.visibility=!!o.D.isUndefined(t.buttons.visibility.rotateleft)||1==t.buttons.visibility.rotateleft,e.buttons.rotate.visibility=!!o.D.isUndefined(t.buttons.visibility.rotate)||1==t.buttons.visibility.rotate,e.buttons.rotateRight.visibility=!!o.D.isUndefined(t.buttons.visibility.rotateright)||1==t.buttons.visibility.rotateright,e.buttons.deskew.visibility=!!o.D.isUndefined(t.buttons.visibility.deskew)||1==t.buttons.visibility.deskew,e.buttons.blank4.visibility=!!(e.buttons.rotateLeft.visibility||e.buttons.rotate.visibility||e.buttons.rotateRight.visibility||e.buttons.deskew.visibility),e.buttons.crop.visibility=!!o.D.isUndefined(t.buttons.visibility.crop)||1==t.buttons.visibility.crop,e.buttons.cut.visibility=!!o.D.isUndefined(t.buttons.visibility.cut)||1==t.buttons.visibility.cut,e.buttons.changeImageSize.visibility=!!o.D.isUndefined(t.buttons.visibility.changeimagesize)||1==t.buttons.visibility.changeimagesize,e.buttons.flip.visibility=!!o.D.isUndefined(t.buttons.visibility.flip)||1==t.buttons.visibility.flip,e.buttons.mirror.visibility=!!o.D.isUndefined(t.buttons.visibility.mirror)||1==t.buttons.visibility.mirror,e.buttons.blank5.visibility=!!(e.buttons.crop.visibility||e.buttons.cut.visibility||e.buttons.changeImageSize.visibility||e.buttons.flip.visibility||e.buttons.mirror.visibility),e.buttons.zoomin.visibility=!!o.D.isUndefined(t.buttons.visibility.zoomin)||1==t.buttons.visibility.zoomin,e.buttons.originalsize.visibility=!!o.D.isUndefined(t.buttons.visibility.originalsize)||1==t.buttons.visibility.originalsize,e.buttons.zoomout.visibility=!!o.D.isUndefined(t.buttons.visibility.zoomout)||1==t.buttons.visibility.zoomout,e.buttons.blank6.visibility=!!(e.buttons.zoomin.visibility||e.buttons.originalsize.visibility||e.buttons.zoomout.visibility),e.buttons.fitPage.visibility=!!o.D.isUndefined(t.buttons.visibility.fit)||1==t.buttons.visibility.fit,e.buttons.fitWidth.visibility=!!o.D.isUndefined(t.buttons.visibility.fitw)||1==t.buttons.visibility.fitw,e.buttons.fitHeight.visibility=!!o.D.isUndefined(t.buttons.visibility.fith)||1==t.buttons.visibility.fith,e.buttons.blank7.visibility=!!(e.buttons.fitPage.visibility||e.buttons.fitWidth.visibility||e.buttons.fitHeight.visibility),e.buttons.hand.visibility=!!o.D.isUndefined(t.buttons.visibility.hand)||1==t.buttons.visibility.hand,e.buttons.select.visibility=!!o.D.isUndefined(t.buttons.visibility.rectselect)||1==t.buttons.visibility.rectselect,e.buttons.clicktozoomin.visibility=!!o.D.isUndefined(t.buttons.visibility.zoom)||1==t.buttons.visibility.zoom,e.buttons.blank7.visibility=!!(e.buttons.hand.visibility||e.buttons.select.visibility||e.buttons.clicktozoomin.visibility),e.buttons.restore.visibility=!!o.D.isUndefined(t.buttons.visibility.restore)||1==t.buttons.visibility.restore,e.buttons.save.visibility=!!o.D.isUndefined(t.buttons.visibility.save)||1==t.buttons.visibility.save,e.buttons.close.visibility=!!o.D.isUndefined(t.buttons.visibility.close)||1==t.buttons.visibility.close))),o.D.isUndefined(t.dialogText)||(X.CustomizableDisplayInfo.dialogText=Q=t.dialogText),o.D.isUndefined(t.promptToSaveChange)||(this.promptToSaveChange=t.promptToSaveChange),o.D.isUndefined(t.border)||(e.outerBorder=t.border),o.D.isUndefined(t.topMenuBorder)||(e.topMenuBorder=t.topMenuBorder),o.D.isUndefined(t.innerBorder)||(e.canvasConfig.canvasBorder=t.innerBorder),o.D.isUndefined(t.background)||(e.canvasConfig.canvasBackground=t.background)),e}},{key:"_bindView",value:function(){var e=this;if(e.bShowImageEdit)return!0;if(!e.myImageEditor)return e.bDispose?o.D.Errors.ImageEditorDispose(e._stwain):o.D.Errors.ImageEditorNotExist(e._stwain),!1;var t,n=o.D.one(".dynamsoft-cvs-container");return n&&n.getEL()?(e.cvsContainer=n,e.cvsParentId=n.parent()[0].id,e._stwain&&e._stwain.Addon&&e._stwain.Addon.Camera&&(e.cvsStatus=e._stwain.Addon.Camera.getStatus())):(e.cvsContainer="",e.cvsParentId="",e.cvsStatus=""),e.bShowImageEdit=!0,e.editorSettings&&e.editorSettings.element&&e.editorSettings.width&&e.editorSettings.height?(e.UIEditor=e.editorSettings.element,e.bFullScreen=!1,e.myImageEditor.width=e.editorSettings.width,e.myImageEditor.height=e.editorSettings.height,e.SetWidthInner(e.editorSettings.width,!0),e.SetHeightInner(e.editorSettings.height,!0),e.myImageEditor.bindView(e.UIEditor),e.hide(),e.cvsParentId&&(n=document.getElementById(e.cvsParentId))&&n.appendChild(e.cvsContainer[0])):(n=J.createElement("div"),J.body.appendChild(n),document.body.insertBefore(n,document.body.firstElementChild),e.UIEditor=n,e.bFullScreen=!0,e.UIEditor.className="D_ImageUIEditor",e.UIEditor.style.width="100%",e.UIEditor.style.height="100%",e.UIEditor.style.position="fixed",e.UIEditor.style.left="0px",e.UIEditor.style.top="0px",e.UIEditor.style.zIndex="9999",e.UIEditor.style.display="none",e.SetWidthInner("100%",!0),e.SetHeightInner("100%",!0),e.myImageEditor.bindView(e.UIEditor),e.hide(),e.bShowImageEditForFullScreen=!0),e.updateMode(),e.SetSelectionRectAspectRatio(e.editorSettings&&e.editorSettings.selectionRectAspectRatio?e.editorSettings.selectionRectAspectRatio:0),e.HideEditorButtonForPad(),e.actualSelectedCanvasAreas=[{left:0,top:0,right:0,bottom:0}],e._stwain._isMobileMode()&&((n=o.D.one(".ds-dwt-ui-icon-acquire"))&&n.getEL()&&(n[0].style.display="none"),e.dwtMobileFileId="dwtmobilefile",e.UIEditor&&"DIV"==e.UIEditor.nodeName?((t=document.createElement("div")).innerHTML=e.bMobile?"<input multiple accept='image/jpeg,image/png,image/tiff' id ='"+e.dwtMobileFileId+"' type='file' style='display:none' />":"<input multiple accept='image/*,.pdf' id ='"+e.dwtMobileFileId+"' type='file' style='display:none' />",e.UIEditor.appendChild(t)):(n=document.getElementById(e.UIEditor),(t=document.createElement("div")).innerHTML=e.bMobile?"<input id ='"+e.dwtMobileFileId+"' type='file' accept='image/jpeg,image/png,image/tiff' style='display:none' />":"<input id ='"+e.dwtMobileFileId+"' type='file' accept='image/*,.pdf' style='display:none' />",n.appendChild(t)),o.D.get(e.dwtMobileFileId).onchange=function(){for(var t=0;t<this.files.length;t++)e._stwain.LoadImageFromBinary(this.files[t]);document.getElementById(e.dwtMobileFileId).value=""}),e.myImageEditor.off("slideSwitch"),e.myImageEditor.on("slideSwitch",(function(t){"left"==t?e._webViewer.myViewer.previous():"right"==t&&e._webViewer.myViewer.next()})),!0}},{key:"dispose",value:function(){var e,t=this;return(e=t.mydvs.ViewControl.removeViewer(t.myImageEditor))&&(t.UIEditor&&t.UIEditor.lastChild&&t.UIEditor.removeChild(t.UIEditor.lastChild),t.myImageEditor=void 0,t._webViewer._imageEditor=void 0,t._webViewer._imageEditorInner=void 0,t.mydvs=null,t._stwain=null,t.bDispose=!0),e}},{key:"show",value:function(){return this.myImageEditor?(this.bFullScreen&&(this.UIEditor.style.display="",document.documentElement.scrollLeft=0,document.documentElement.scrollTop=0,document.body.style.overflow="hidden"),this.myImageEditor.showViewer=!0):(this.bDispose?o.D.Errors.ImageEditorDispose(this._webViewer._stwain):o.D.Errors.ImageEditorNotExist(this._webViewer._stwain),!1)}},{key:"hide",value:function(){return this.myImageEditor?(this.myImageEditor.showViewer=!1,this.bFullScreen&&(this.UIEditor.style.display="none"),!0):(this.bDispose?o.D.Errors.ImageEditorDispose(this._webViewer._stwain):o.D.Errors.ImageEditorNotExist(this._webViewer._stwain),!1)}},{key:"_BindImageEditorEvents",value:function(){var e=this;o.D.each(["OnPreviousImage","OnNextImage","OnAcquire","OnLoadImage","OnPrint","OnRemoveAll","OnRemove","OnRotateLeft","OnRotate","OnRotateRight","OnDeskew","OnCrop","OnErase","OnChangeImageSize","OnFlip","OnMirror","OnZoomin","OnOriginalsize","OnZoomout","OnFitPage","OnFitWidth","OnFitHeight","OnHand","OnSelect","OnClicktozoomin","OnRestore","OnSave","OnClose","click","imageClick","pageAreaSelected","pageAreaUnselected","onDrop","OnFirstImage","OnLastImage","pageChange","bufferChanged","pageRendered","wheel"],(function(t){e.myImageEditor.on(t,(function(n,r){e[t](n,r)}))}))}},{key:"HideEditorButtonForPad",value:function(){var e,t=this.myImageEditor,n=this.bPadViewer;(e=document.getElementById("rotateBtn"+t.postfix))&&(e.style.display=n?"none":""),(e=document.getElementById("deskewBtn"+t.postfix))&&(e.style.display=n?"none":""),(e=document.getElementById("changeImageSizeBtn"+t.postfix))&&(e.style.display=n?"none":"")}},{key:"BackImageData",value:function(){var e,t=this;t._stwain._isMobileMode()&&t.bShowImageEdit&&0<=(e=t._webViewer.GetCurrentIndex())&&t._webViewer.GetImageData(t._webViewer.GetUidByIndex(e)).then((function(n){t.BackImageBuffer=n.oriData,(n=t._webViewer.GetMetaDataByIndex(e))&&(t.BackModelImageControl={},t.BackModelImageControl.width=n.width,t.BackModelImageControl.height=n.height,t.BackModelImageControl.bitDepth=n.bitDepth,t.BackModelImageControl.resolutionX=n.resolutionX,t.BackModelImageControl.resolutionY=n.resolutionY)}))}},{key:"CloseShowImageEditor",value:function(){var e,t=this;return t.myImageEditor?(t.cvsContainer&&""!=t.cvsContainer&&t.cvsParentId&&""!=t.cvsParentId&&((e=document.getElementById(t.cvsParentId))&&e.appendChild(t.cvsContainer[0]),"playing"==t.cvsStatus&&t._stwain&&t._stwain.Addon&&t._stwain.Addon.Camera&&t._stwain.Addon.Camera.resume()),!0):(t.bDispose?o.D.Errors.ImageEditorDispose(t._stwain):o.D.Errors.ImageEditorNotExist(t._stwain),!1)}},{key:"UpdateInfo",value:function(){o.I.Lib.hideMask()}},{key:"clearSelectedAreas",value:function(){var e;return this._webViewer.GetHowManyImagesInBuffer()<=0||this._webViewer.GetCurrentIndex()<0||((e=this.myImageEditor.clearSelectedBoxes())||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),e)}},{key:"SetSelectionRectAspectRatio",value:function(e){return this.myImageEditor.selectionBoxAspectRatio=e,!0}},{key:"ZoomIn",value:function(){var e;return(e=this.myImageEditor.zoomIn())||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),e}},{key:"ZoomOut",value:function(){var e;return(e=this.myImageEditor.zoomOut())||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),e}},{key:"SetZoom",value:function(e,t,n){var r;return(r=t&n?this.myImageEditor.zoomTo(e,t,n):this.myImageEditor.zoomTo(e))||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),r}},{key:"GetZoom",value:function(){return this.myImageEditor.zoom}},{key:"SetFitType",value:function(e){var t="window";return o.D.isUndefined(e)||"width"!=e&&"height"!=e||(t=e),this.myImageEditor.fitType=t,!0}},{key:"SetMouseShape",value:function(e){var t;switch(e){case o.I.DWT.EnumDWT_MouseShape.Default:t="default";break;case o.I.DWT.EnumDWT_MouseShape.Hand:t="pointer";break;case o.I.DWT.EnumDWT_MouseShape.Crosshair:t="crosshair";break;case o.I.DWT.EnumDWT_MouseShape.Zoom:t="zoom-in";break;default:t="crosshair"}return this.SetCursor(t),!0}},{key:"SetCursor",value:function(e){if(!this._webViewer._NouiNotSupport("cursor"))return!1;var t="default";switch(e){case"default":t="default",this.SetOperationMode(1);break;case"pointer":t="pointer",this.SetOperationMode(0);break;case"crosshair":t="crosshair",this.SetOperationMode(1);break;case"zoom-in":t="zoom-in",this.SetOperationMode(2);break;default:t="crosshair"}return this.myImageEditor.canvasMouseShape=t,!0}},{key:"SetSelectionImageBorderColor",value:function(e){return this.myImageEditor.selectedPageBorderColor=e,!0}},{key:"SetBackgroundColor",value:function(e){return this.myImageEditor.imageBackgroundColor=e,!0}},{key:"SetWidth",value:function(e){return this.myImageEditor.width=e,!0}},{key:"SetWidthInner",value:function(e,t){return!t&&o.D.isString(e)&&0<=r()(e).call(e,"%")?(t=o.D.one("#"+this._stwain._containerID),this.myImageEditor.width=i()(o.D.css(t,"width")*i()(e)/100)):this.myImageEditor.width=e,!0}},{key:"SetHeight",value:function(e){return this.myImageEditor.height=e,!0}},{key:"SetHeightInner",value:function(e,t){return!t&&o.D.isString(e)&&0<=r()(e).call(e,"%")?(t=o.D.one(this._stwain._containerElement),this.myImageEditor.height=i()(o.D.css(t,"height")*i()(e)/100)):this.myImageEditor.height=e,!0}},{key:"SetIfAutoScroll",value:function(e){return this.myImageEditor.showLatestPage=e,!0}},{key:"ChangeButtonClass",value:function(e,t){return this.myImageEditor?this.myImageEditor.setButtonClass(e,t):void 0}},{key:"SetOperationMode",value:function(e){this.myImageEditor.operationMode=e}},{key:"UnbindContent",value:function(e){this.myImageEditor.unbindContent()}},{key:"SetSelectedPageBackground",value:function(e){this.myImageEditor.selectedPageBackground=e}},{key:"GetRealTimeMetadataByIndex",value:function(e){if(!(e<0||e>=this._webViewer.GetHowManyImagesInBuffer()))return this.myImageEditor.getRealTimeMetadataByIndex(e);o.D.Errors.IndexOutOfRange(this._stwain)}},{key:"DVSRotate",value:function(e){return this.myImageEditor.rotateMode=0,(e=this.myImageEditor.rotate(e))||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),e}},{key:"DVSFlip",value:function(){var e=this.myImageEditor.flip();return e||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),e}},{key:"DVSMirror",value:function(){var e=this.myImageEditor.mirror();return e||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),e}},{key:"DVSCrop",value:function(e,t,n,r){return(n=this.myImageEditor.crop(e,t,n-e,r-t))||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),n}},{key:"DVSErase",value:function(e,t,n,r){return(n=this.myImageEditor.erase(e,t,n-e,r-t,this._webViewer._UIView.BackgroundFillColor))||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),n}},{key:"DVSSaveTransformResult",value:function(e){var t=this;return t.myImageEditor.saveTransformation().then((function(){e(null,-1,null)}),(function(e){o.D.Errors.WebviewerError(t._stwain,t.mydvs.Error.errorMessage,t.mydvs.Error.errorCode)})),!0}},{key:"DVSRotateEx",value:function(e,t){return this.myImageEditor.rotateMode=t?1:0,(t=this.myImageEditor.rotate(e))||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),t}},{key:"DVSChangeImageSize",value:function(e,t,n){return(e=this.myImageEditor.changePageSize(i()(e),i()(t),n))||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),e}},{key:"DVSSkewAngle",value:function(){var e=this;return e._stwain._asyncGetSkewAngleOnly(e._webViewer.GetCurrentIndex(),(function(t){e.DVSRotateEx(t,!0),e.UpdateInfo(),e._IfChangedWithinTheEditor=!0,e.iChangedIndex=e._webViewer.GetCurrentIndex(),e.updateButtons()})),!0}},{key:"updateButtons",value:function(){1==this._IfChangedWithinTheEditor?(this.ChangeButtonClass("save","ds-dwt-ui-icon-saveImage"),this.ChangeButtonClass("restore","ds-dwt-ui-icon-restore")):(this.ChangeButtonClass("save","ds-dwt-ui-icon-saveImage-grey"),this.ChangeButtonClass("restore","ds-dwt-ui-icon-restore-grey"))}},{key:"updateMode",value:function(e){var t,n=this;if(n.bShowImageEdit){if(1<(t=n._webViewer.GetHowManyImagesInBuffer())?(n._webViewer.GetCurrentIndex()==t-1||n._webViewer.GetHowManyImagesInBuffer()<=1?n.ChangeButtonClass("nextImage","ds-dwt-ui-icon-nextImage-grey"):n.ChangeButtonClass("nextImage","ds-dwt-ui-icon-nextImage"),n._webViewer.GetCurrentIndex()<=0||n._webViewer.GetHowManyImagesInBuffer()<=1?n.ChangeButtonClass("previousImage","ds-dwt-ui-icon-preImage-grey"):n.ChangeButtonClass("previousImage","ds-dwt-ui-icon-preImage")):(n.ChangeButtonClass("nextImage","ds-dwt-ui-icon-nextImage-grey"),n.ChangeButtonClass("previousImage","ds-dwt-ui-icon-preImage-grey")),n.updateButtons(),n.__SetCropButtonGrey(!0),n.__SetEraseButtonGrey(!0),n.bMobile)switch(n.cursorStatus){case"rectselect":n.OnSelect();break;case"zoom":n.OnClicktozoomin();break;default:n.OnHand()}else switch(n.cursorStatus){case"hand":n.OnHand();break;case"zoom":n.OnClicktozoomin();break;default:n.OnSelect()}e&&(t=n._webViewer.GetCurrentIndex(),1==n._IfChangedWithinTheEditor&&t!=n.iChangedIndex&&n.ShowDialogForSaveImage(n._webViewer.GetCurrentIndex(),!1))}}},{key:"__SaveImageInner",value:function(e,t){var n=this;if(-1==n.iChangedIndex&&0==n._IfSaveChangesOutSideOfTheEditor)return n._IfChangedWithinTheEditor=!1,t&&t(),!1;if(1!=n._IfChangedWithinTheEditor&&0==n._IfSaveChangesOutSideOfTheEditor)return alert(X.CustomizableDisplayInfo.errorMessages.imageNotChanged),n._IfChangedWithinTheEditor=!1,t&&t(),!1;n._IfSaveChangesOutSideOfTheEditor&&(n.iChangedIndex=n._webViewer.GetCurrentIndex());var r=!0;if(1==n._IfChangedWithinTheEditor||1==n._IfSaveChangesOutSideOfTheEditor){var i=n.getImageManager().convertClientIndexToServerId(n.iChangedIndex);if(-1==i)return t&&t(),!1;n.OnGetImageFromServerForEdit(n._webViewer._UIView.mapModelImageControl[i],n.iChangedIndex,2,(function(r,i,a){if(r){if(1==e&&(o.D.log("__SaveImageInner: "+[r.guid].join(",")),n._webViewer.GetCurrentIndex()==i&&(n._stwain._isMobileMode()?n._webViewer.MobileUpdateImage(r,a):n._webViewer.UpdateImage(r,a))),n._IfChangedWithinTheEditor=!1,(n.iChangedIndex=-1)==r.serverId)return t&&t(),!1}else n._IfChangedWithinTheEditor=!1,n.iChangedIndex=-1;return n.updateButtons(),t&&t(),!0})),r=!1}return n._IfSaveChangesOutSideOfTheEditor=!1,r&&(n._IfChangedWithinTheEditor=!1,t&&t()),!0}},{key:"ShowDialogForSaveImage",value:function(e,t,n,r){var i,a=this,s=function(){a.__SaveImageInner(!0,(function(){Y.DCP_DWT_OnClickCloseInstall(a._stwain._containerID),-(o.D.bChangeImage=1)==e?t&&a.OnClose():a._webViewer.__goInner(e),t&&(document.body.style.overflow=""),q.isFunction(n)&&n()}))};a.promptToSaveChange?(o.I.DWT.ShowMessage((i=['<div class="dynamsoft-dwt-dlg-tips">',"<div>",Q.saveChangedImage[0],"</div>",'<div style="width: 200px;white-space:nowrap;margin-left: auto;margin-right: auto;">','<input class="dynamsoft_btnSave" style="width: 100px; height:30px; margin-right: 10px; margin-top: 10px;"  type="button" value="',Q.saveChangedImage[1],'" /><input class="dynamsoft_btnCancel" style="width: 100px; height:30px; margin-top: 10px;"  type="button" value="',Q.saveChangedImage[2],'" /></div>',"</div>"]).join(""),a.bMobile?{width:300,headerStyle:1}:{width:420,headerStyle:1}),(i=o.D.one(".dynamsoft_btnSave").getEL())&&(i.onclick=function(){s()}),(i=o.D.one(".dynamsoft_btnCancel").getEL())&&(i.onclick=function(){a.__RestoreImageInner(e,(function(){Y.DCP_DWT_OnClickCloseInstall(a._stwain._containerElement),o.D.bChangeImage=0,-1==e?t&&a.OnClose():a._webViewer.__goInner(e),t&&(document.body.style.overflow=""),q.isFunction(r)&&r()}))})):s()}},{key:"__SetCropButtonGrey",value:function(e){this.ChangeButtonClass("crop","ds-dwt-ui-icon-cropImage-grey"),e&&this.clearSelectedAreas()}},{key:"__SetEraseButtonGrey",value:function(e){this.ChangeButtonClass("cut","ds-dwt-ui-icon-erase-grey"),e&&this.clearSelectedAreas()}},{key:"__SetZoomInButtonEnable",value:function(e){this.ChangeButtonClass("zoomin",1==e?"ds-dwt-ui-icon-zoomin":"ds-dwt-ui-icon-zoomin-grey")}},{key:"__SetZoomOutButtonEnable",value:function(e){this.ChangeButtonClass("zoomout",1==e?"ds-dwt-ui-icon-zoomout":"ds-dwt-ui-icon-zoomout-grey")}},{key:"pageChange",value:function(e){var t=this._webViewer.GetHowManyImagesInBuffer();o.D.log("OnPagination"),t<=0?q.output(this,"No image in Buffer"):1!=t&&(!/^\d+$/.test(e)||e<=0?alert(X.CustomizableDisplayInfo.errorMessages.invalidIndex):((e=i()(e)-1)<0?e=0:t<=e&&(e=t-1),e!=this._webViewer.GetCurrentIndex()&&this.go(e)))}},{key:"bufferChanged",value:function(e){if(this._currentIndex!=this._webViewer.GetCurrentIndex())return this._currentIndex=this._webViewer.GetCurrentIndex(),this.updateMode(),"shift"!=e.action||1!=this._IfChangedWithinTheEditor||(this.ShowDialogForSaveImage(this._currentIndex,!1),!1)}},{key:"pageRendered",value:function(e){}},{key:"OnFirstImage",value:function(){o.D.Errors.ClearErrorInfo(this._stwain),this._webViewer.first()}},{key:"OnLastImage",value:function(){o.D.Errors.ClearErrorInfo(this._stwain),this._webViewer.last()}},{key:"OnPreviousImage",value:function(){var e=o.D.one(".ds-dwt-ui-icon-preImage-grey");o.D.Errors.ClearErrorInfo(this._stwain),this.hideImgEditorDilag(),e&&e.getEL()||this._webViewer.previous()}},{key:"OnNextImage",value:function(){var e=o.D.one(".ds-dwt-ui-icon-nextImage-grey");this.hideImgEditorDilag(),o.D.Errors.ClearErrorInfo(this._stwain),e&&e.getEL()||this._webViewer.next()}},{key:"go",value:function(e){if(this._webViewer.GetHowManyImagesInBuffer()<=0||this._webViewer.GetCurrentIndex()<0)return q.output(this,"No image in Buffer"),!1;if(1==this._IfChangedWithinTheEditor)return this.ShowDialogForSaveImage(e,!1),!1;if(this.bShowImageEdit&&void 0!==e){if(-1==e)return!1;this.bCouldBeTimeConsuming=!0,this.myImageEditor.gotoPage(e),this.updateMode()}return!0}},{key:"OnAcquire",value:function(){var e=this,t=function(){e._stwain.SelectSource((function(){e._stwain.CloseSource(),e._stwain.OpenSource(),e._stwain.IfShowUI=!0,1==o.I.DWT.IfConfineMaskWithinTheViewer?(o.I.DWT.IfConfineMaskWithinTheViewer=!1,e._stwain.AcquireImage({},(function(){o.I.DWT.IfConfineMaskWithinTheViewer=!0,null==window.onresize&&(window.onresize=function(){e._stwain.ShowImageEditorEx(-1,-1,-1,-1)})}),(function(){null==window.onresize&&(window.onresize=function(){e._stwain.ShowImageEditorEx(-1,-1,-1,-1)})}))):e._stwain.AcquireImage()}),(function(){o.D.log("User did not select a source")}))};o.D.Errors.ClearErrorInfo(e._stwain),e.hideImgEditorDilag(),e._IfChangedWithinTheEditor?e.ShowDialogForSaveImage(e._webViewer.GetCurrentIndex(),!1,t,t):t()}},{key:"OnLoadImage",value:function(){var e=this,t=null,n=function(){if(e._stwain._isMobileMode())return(n=document.getElementById(e.dwtMobileFileId)).value="",void n.click();var n,r;e._stwain.IfShowFileDialog=!0,e._stwain.Addon&&e._stwain.Addon.PDF&&(n=!1,(e._stwain._isMobileMode()?o.D.License.checkProductKey(e._stwain,{PDFRasterizer:!0,Wasm:!0},!0):o.D.License.checkProductKey(e._stwain,{PDFRasterizer:!0},!0))&&(t=e._stwain.Addon.PDF.GetConvertMode(),r=e._stwain._innerFun("GetAddOnVersion",(0,a.dv)("pdf")),(n=!!(o.D.env.bMac&&r==o.I.DWT.PdfMacVersion||o.D.env.bLinux&&r==o.I.DWT.PdfLinuxVersion||r==o.I.DWT.PdfVersion)||n)&&e._stwain.Addon.PDF.SetConvertMode(3))),e._stwain.LoadImageEx("",5,(function(){o.D.log("Loaded an image successfully."),null!=t&&e._stwain.Addon.PDF.SetConvertMode(t)}),(function(n,r){o.D.log("Loading failed with the error: "+r),null!=t&&e._stwain.Addon.PDF.SetConvertMode(t)}))};o.D.Errors.ClearErrorInfo(e._stwain),e.hideImgEditorDilag(),e._IfChangedWithinTheEditor?e.ShowDialogForSaveImage(e._webViewer.GetCurrentIndex(),!1,n,n):n()}},{key:"OnPrint",value:function(){o.D.Errors.ClearErrorInfo(this._stwain),this.hideImgEditorDilag(),this._webViewer.GetCurrentIndex()<0?q.output(this,"No image in Buffer"):this._webViewer._UIView.Print()}},{key:"OnRemoveAll",value:function(){o.D.Errors.ClearErrorInfo(this._stwain),this.hideImgEditorDilag(),this._webViewer.GetHowManyImagesInBuffer()<=0||this._webViewer.GetCurrentIndex()<0?q.output(this,"No image in Buffer"):this._stwain.RemoveAllImages()}},{key:"OnRemove",value:function(){o.D.Errors.ClearErrorInfo(this._stwain),this.hideImgEditorDilag(),this._webViewer.GetHowManyImagesInBuffer()<=0||this._webViewer.GetCurrentIndex()<0?q.output(this,"No image in Buffer"):this._stwain.RemoveAllSelectedImages()}},{key:"OnRotateLeft",value:function(){var e=this;o.D.Errors.ClearErrorInfo(e._stwain),e.hideImgEditorDilag(),e._webViewer.GetHowManyImagesInBuffer()<=0||e._webViewer.GetCurrentIndex()<0?q.output(e,"No image in Buffer"):(1==e._webViewer._ImgManager.bImageChangedInViewer?(e._IfSaveChangesOutSideOfTheEditor=!0,e._webViewer._ImgManager.bImageChangedInViewer=!1,e.__SaveImageInner(!1,(function(){e.bCouldBeTimeConsuming=!0,o.I.Lib.detect.showMask(e._stwain),e._webViewer._ImgManager.bImageJustChangedInEditor=!0,e._stwain._isMobileMode()?(e.DVSRotate(270),e.UpdateInfo()):e._stwain.RotateLeft(e._webViewer.GetCurrentIndex()),e._IfChangedWithinTheEditor=!0,e.iChangedIndex=e._webViewer.GetCurrentIndex(),e.updateButtons()}))):(e.bCouldBeTimeConsuming=!0,o.I.Lib.detect.showMask(e._stwain),e._IfSaveChangesOutSideOfTheEditor=!1,e._webViewer._ImgManager.bImageJustChangedInEditor=!0,e._IfChangedWithinTheEditor=!0,e.iChangedIndex=e._webViewer.GetCurrentIndex(),e._stwain._isMobileMode()?(e.DVSRotate(270),e.UpdateInfo()):e._stwain.RotateLeft(e._webViewer.GetCurrentIndex())),e.updateMode())}},{key:"RotateEx",value:function(e,t,n){var r=this;r._webViewer.GetHowManyImagesInBuffer()<=0||r._webViewer.GetCurrentIndex()<0?q.output(r,"No image in Buffer"):(void 0===e||void 0===t||void 0===n?alert(X.CustomizableDisplayInfo.errorMessages.insufficientParas):1==r._webViewer._ImgManager.bImageChangedInViewer?(r._IfSaveChangesOutSideOfTheEditor=!0,r._webViewer._ImgManager.bImageChangedInViewer=!1,r.__SaveImageInner(!1,(function(){r.bCouldBeTimeConsuming=!0,o.I.Lib.detect.showMask(r._stwain),r._webViewer._ImgManager.bImageJustChangedInEditor=!0,r._stwain._isMobileMode()?(r.DVSRotateEx(e,t,n),r.UpdateInfo()):r._stwain.RotateEx(r._webViewer.GetCurrentIndex(),e,t,n),r._IfChangedWithinTheEditor=!0,r.iChangedIndex=r._webViewer.GetCurrentIndex(),r.updateButtons()}))):(r.bCouldBeTimeConsuming=!0,o.I.Lib.detect.showMask(r._stwain),r._IfSaveChangesOutSideOfTheEditor=!1,r._webViewer._ImgManager.bImageJustChangedInEditor=!0,r._IfChangedWithinTheEditor=!0,r.iChangedIndex=r._webViewer.GetCurrentIndex(),r._stwain._isMobileMode()?(r.DVSRotateEx(e,t,n),r.UpdateInfo()):r._stwain.RotateEx(r._webViewer.GetCurrentIndex(),e,t,n)),r.updateMode())}},{key:"OnRotate",value:function(e){var t,n,r,a,s=this;o.D.Errors.ClearErrorInfo(s._stwain),s._webViewer.GetHowManyImagesInBuffer()<=0||s._webViewer.GetCurrentIndex()<0?q.output(s,"No image in Buffer"):(o.D.hide("dynamsoft_ImgSizeEditor"),o.D.get("dynamsoft_RotateAnyAngle")||(t=['<div id="dynamsoft_RotateAnyAngle" class="dynamsoft-dwt-imgSizeEditor" style="display:none; z-index: 99999;">',"<ul>",'<li><label for="dynamsoft_Angle"><b>',Q.dlgRotateAnyAngle[0],'</b><input type="text" id="dynamsoft_Angle" style="width:50%;" size="10"/></label></li>','<li><label for="dynamsoft_Angle_InterpolationMethod"><b>',Q.dlgRotateAnyAngle[1],'</b>&nbsp;<select size="1" id="dynamsoft_Angle_InterpolationMethod"><option value = ""></option></select></li>','<li><label for="dynamsoft_KeepSize"><b></b>','<input type="checkbox" id="dynamsoft_KeepSize"/>',Q.dlgRotateAnyAngle[2],"</label></li></ul>","<div>",'<input id="dynamsoft_btnRotateAnyAngleOK" type="button" value="',Q.dlgRotateAnyAngle[3],'"/><span><input id= "dynamsoft_btnCancelRotateAnyAngle" type="button" value="',Q.dlgRotateAnyAngle[4],'" /></span></div>',"</div>"],o.D.one("body").append(t.join(""))),(t=o.D.get("dynamsoft_Angle_InterpolationMethod")).options.length=0,t.options.add(new Option("NearestNeighbor",1)),t.options.add(new Option("Bilinear",2)),t.options.add(new Option("Bicubic",3)),t=null,o.D.get("dynamsoft_btnRotateAnyAngleOK").onclick=function(){var e=o.D.get("dynamsoft_Angle").value;if(o.D.get("dynamsoft_Angle").className="",!/^\d+$/.test(e)||e<=0)return o.D.get("dynamsoft_Angle").className+=" invalid",o.D.get("dynamsoft_Angle").focus(),void alert(X.CustomizableDisplayInfo.errorMessages.invalidAngle);var t=o.D.get("dynamsoft_KeepSize").checked;s.bCouldBeTimeConsuming=!0,o.I.Lib.detect.showMask(s._stwain),e=i()(e),s.RotateEx(e,t,o.D.get("dynamsoft_Angle_InterpolationMethod").selectedIndex+1),0==s._stwain.ErrorCode&&o.D.hide("dynamsoft_RotateAnyAngle")},o.D.get("dynamsoft_btnCancelRotateAnyAngle").onclick=function(){o.D.hide("dynamsoft_RotateAnyAngle")},t=o.D.get("dynamsoft_RotateAnyAngle"),o.D.toggle("dynamsoft_RotateAnyAngle"),r=(r=(n=e.srcElement||e.target).y)||n.offsetTop+1,a=(a=n.x)||n.offsetLeft+1,s.UIEditor&&"DIV"==s.UIEditor.nodeName?(t.style.top=e.clientY+document.documentElement.scrollTop+"px",t.style.left=e.clientX+document.documentElement.scrollLeft+"px"):(e=J.getElementById(s.UIEditor),t.style.top=r+n.offsetHeight+q.getTop(e)+"px",t.style.left=a+q.getLeft(e)+"px"),o.D.get("dynamsoft_Angle").value="45")}},{key:"OnRotateRight",value:function(){var e=this;o.D.Errors.ClearErrorInfo(e._stwain),e.hideImgEditorDilag(),e._webViewer.GetHowManyImagesInBuffer()<=0||e._webViewer.GetCurrentIndex()<0?q.output(e,"No image in Buffer"):(1==e._webViewer._ImgManager.bImageChangedInViewer?(e._IfSaveChangesOutSideOfTheEditor=!0,e._webViewer._ImgManager.bImageChangedInViewer=!1,e.__SaveImageInner(!1,(function(){e.bCouldBeTimeConsuming=!0,o.I.Lib.detect.showMask(e._stwain),e._stwain._isMobileMode()?(e.DVSRotate(90),e.UpdateInfo()):e._stwain.RotateRight(e._webViewer.GetCurrentIndex()),e._webViewer._ImgManager.bImageJustChangedInEditor=!0,e._IfChangedWithinTheEditor=!0,e.iChangedIndex=e._webViewer.GetCurrentIndex(),e.updateButtons()}))):(e.bCouldBeTimeConsuming=!0,o.I.Lib.detect.showMask(e._stwain),e._IfSaveChangesOutSideOfTheEditor=!1,e._webViewer._ImgManager.bImageJustChangedInEditor=!0,e._IfChangedWithinTheEditor=!0,e.iChangedIndex=e._webViewer.GetCurrentIndex(),e._stwain._isMobileMode()?(e.DVSRotate(90),e.UpdateInfo()):e._stwain.RotateRight(e._webViewer.GetCurrentIndex())),e.updateMode())}},{key:"OnDeskew",value:function(){var e,t=this;o.D.Errors.ClearErrorInfo(t._stwain),t.hideImgEditorDilag(),t._webViewer.GetHowManyImagesInBuffer()<=0||t._webViewer.GetCurrentIndex()<0?q.output(t,"No image in Buffer"):1==t._webViewer._ImgManager.bImageChangedInViewer?(t._IfSaveChangesOutSideOfTheEditor=!0,t._webViewer._ImgManager.bImageChangedInViewer=!1,t.__SaveImageInner(!1,(function(){var e;t.bCouldBeTimeConsuming=!0,o.I.Lib.detect.showMask(t._stwain),t._webViewer._ImgManager.bImageJustChangedInEditor=!0,t._stwain._isMobileMode()?t.DVSSkewAngle():(0<=(e=t._webViewer.GetCurrentIndex())&&t._stwain.GetSkewAngleAsync(e).then((function(e){t.RotateEx(e,!0,1)})),t._IfChangedWithinTheEditor=!0,t.iChangedIndex=t._webViewer.GetCurrentIndex(),t.updateButtons())}))):(t.bCouldBeTimeConsuming=!0,o.I.Lib.detect.showMask(t._stwain),t._IfSaveChangesOutSideOfTheEditor=!1,t._webViewer._ImgManager.bImageJustChangedInEditor=!0,t._IfChangedWithinTheEditor=!0,t.iChangedIndex=t._webViewer.GetCurrentIndex(),t._stwain._isMobileMode()?t.DVSSkewAngle():0<=(e=t._webViewer.GetCurrentIndex())&&t._stwain.GetSkewAngleAsync(e).then((function(e){t.RotateEx(e,!0,1)})))}},{key:"OnCrop",value:function(){o.D.Errors.ClearErrorInfo(this._stwain),this.hideImgEditorDilag();var e=o.D.one(".ds-dwt-ui-icon-cropImage");e&&e.getEL()&&this.Crop()}},{key:"Crop",value:function(){var e,t,n,r,a,s=this;s._webViewer.GetHowManyImagesInBuffer()<=0||s._webViewer.GetCurrentIndex()<0?q.output(s,"No image in Buffer"):2!=(e=s.actualSelectedCanvasAreas).length?q.output(s,"No area selected for cropping"):(t=(e=e[1]).left,n=e.top,r=e.right,a=e.bottom,i()(t)-i()(r)!=0&&i()(n)-i()(a)!=0&&(1==s._webViewer._ImgManager.bImageChangedInViewer?(s._IfSaveChangesOutSideOfTheEditor=!0,s._webViewer._ImgManager.bImageChangedInViewer=!1,s.__SaveImageInner(!1,(function(){s.bCouldBeTimeConsuming=!0,o.I.Lib.detect.showMask(s._stwain),s._stwain._isMobileMode()?(s.DVSCrop(i()(t),i()(n),i()(r),i()(a)),s.UpdateInfo()):s._stwain.Crop(s._webViewer.GetCurrentIndex(),i()(t),i()(n),i()(r),i()(a)),s._webViewer._ImgManager.bImageJustChangedInEditor=!0,s.__SetCropButtonGrey(!0),s.__SetEraseButtonGrey(!0),s._IfChangedWithinTheEditor=!0,s.iChangedIndex=s._webViewer.GetCurrentIndex(),s.updateButtons()}))):(s.bCouldBeTimeConsuming=!0,o.I.Lib.detect.showMask(s._stwain),s._IfSaveChangesOutSideOfTheEditor=!1,s._webViewer._ImgManager.bImageJustChangedInEditor=!0,s._IfChangedWithinTheEditor=!0,s.iChangedIndex=s._webViewer.GetCurrentIndex(),s._stwain._isMobileMode()?(s.DVSCrop(i()(t),i()(n),i()(r),i()(a)),s.UpdateInfo()):s._stwain.Crop(s._webViewer.GetCurrentIndex(),i()(t),i()(n),i()(r),i()(a)),s.__SetCropButtonGrey(!0),s.__SetEraseButtonGrey(!0)),s.updateMode()))}},{key:"OnErase",value:function(){var e=o.D.one(".ds-dwt-ui-icon-erase");o.D.Errors.ClearErrorInfo(this._stwain),this.hideImgEditorDilag(),e&&e.getEL()&&this.Erase()}},{key:"Erase",value:function(){var e=this,t=!1;if(e._webViewer.GetHowManyImagesInBuffer()<=0||e._webViewer.GetCurrentIndex()<0)q.output(e,"No image in Buffer");else{var n=e.actualSelectedCanvasAreas;if(1==n.length)q.output(e,"No area selected for erasing");else{if(1==e._webViewer._ImgManager.bImageChangedInViewer)e._IfSaveChangesOutSideOfTheEditor=!0,e._webViewer._ImgManager.bImageChangedInViewer=!1,e.__SaveImageInner(!1,(function(){for(var r=1;r<n.length;r++){var a=(c=n[r]).left,s=c.top,u=c.right,c=c.bottom;i()(a)-i()(u)!=0&&i()(s)-i()(c)!=0&&(e.bCouldBeTimeConsuming=!0,o.I.Lib.detect.showMask(e._stwain),e._stwain._isMobileMode()?(e.DVSErase(i()(a),i()(s),i()(u),i()(c)),e.UpdateInfo()):e._stwain.CutFrameToClipboard(e._webViewer.GetCurrentIndex(),i()(a),i()(s),i()(u),i()(c)),e._webViewer._ImgManager.bImageJustChangedInEditor=!0,e._IfChangedWithinTheEditor=!0,e.iChangedIndex=e._webViewer.GetCurrentIndex(),e.updateButtons(),t=!0)}e.__SetEraseButtonGrey(t),e.__SetCropButtonGrey(t)}));else{e._IfSaveChangesOutSideOfTheEditor=!1,e._IfChangedWithinTheEditor=!0,e.iChangedIndex=e._webViewer.GetCurrentIndex();for(var r=1;r<n.length;r++){var a=(c=n[r]).left,s=c.top,u=c.right,c=c.bottom;i()(a)-i()(u)!=0&&i()(s)-i()(c)!=0&&(e.bCouldBeTimeConsuming=!0,o.I.Lib.detect.showMask(e._stwain),e._stwain._isMobileMode()?(e.DVSErase(i()(a),i()(s),i()(u),i()(c)),e.UpdateInfo()):e._stwain.CutFrameToClipboard(e._webViewer.GetCurrentIndex(),i()(a),i()(s),i()(u),i()(c)),e._webViewer._ImgManager.bImageJustChangedInEditor=!0,e._IfChangedWithinTheEditor=!0,e.iChangedIndex=e._webViewer.GetCurrentIndex(),t=!0)}e.__SetEraseButtonGrey(t),e.__SetCropButtonGrey(t)}e.updateMode()}}}},{key:"ChangeImageSize",value:function(e,t,n){var r=this;r._webViewer.GetHowManyImagesInBuffer()<=0||r._webViewer.GetCurrentIndex()<0?q.output(r,"No image in Buffer"):(1==r._webViewer._ImgManager.bImageChangedInViewer?(r._IfSaveChangesOutSideOfTheEditor=!0,r._webViewer._ImgManager.bImageChangedInViewer=!1,r.__SaveImageInner(!1,(function(){r.bCouldBeTimeConsuming=!0,o.I.Lib.detect.showMask(r._stwain),r._webViewer._ImgManager.bImageJustChangedInEditor=!0,r._stwain._isMobileMode()?(r.DVSChangeImageSize(e,t,n),r.UpdateInfo()):r._stwain.ChangeImageSize(r._webViewer.GetCurrentIndex(),e,t,n),r._IfChangedWithinTheEditor=!0,r.iChangedIndex=r._webViewer.GetCurrentIndex(),r.updateButtons()}))):(r.bCouldBeTimeConsuming=!0,o.I.Lib.detect.showMask(r._stwain),r._IfSaveChangesOutSideOfTheEditor=!1,r._webViewer._ImgManager.bImageJustChangedInEditor=!0,r._IfChangedWithinTheEditor=!0,r.iChangedIndex=r._webViewer.GetCurrentIndex(),r._stwain._isMobileMode()?(r.DVSChangeImageSize(e,t,n),r.UpdateInfo()):r._stwain.ChangeImageSize(r._webViewer.GetCurrentIndex(),e,t,n)),r.updateMode())}},{key:"OnChangeImageSize",value:function(e){var t,n,r,a,s=this;if(o.D.Errors.ClearErrorInfo(s._stwain),s.hideImgEditorDilag(),!(s._webViewer.GetHowManyImagesInBuffer()<=0||s._webViewer.GetCurrentIndex()<0))return o.D.hide("dynamsoft_RotateAnyAngle"),o.D.get("dynamsoft_ImgSizeEditor")||(r=['<div id="dynamsoft_ImgSizeEditor" class="dynamsoft-dwt-imgSizeEditor" style="display:none;z-index: 99999;">',"<ul>",'<li><label for="dynamsoft_img_height"><b>',Q.dlgChangeImageSize[0],'</b><input type="text" id="dynamsoft_img_height" style="width:50%;" size="10"/>pixel</label></li>','<li><label for="dynamsoft_img_width"><b>',Q.dlgChangeImageSize[1],'</b>&nbsp;<input type="text" id="dynamsoft_img_width" style="width:50%;" size="10"/>pixel</label></li>',"<li>",Q.dlgChangeImageSize[2],'<select size="1" id="dynamsoft_InterpolationMethod"><option value = ""></option></select></li>',"</ul>","<div>",'<input id="dynamsoft_btnChangeImageSizeOK" type="button" value="',Q.dlgChangeImageSize[3],'"/><span><input id= "dynamsoft_btnCancelChange" type="button" value="',Q.dlgChangeImageSize[4],'"/></span></div>',"</div>"],o.D.one("body").append(r.join(""))),(r=o.D.get("dynamsoft_InterpolationMethod")).options.length=0,r.options.add(new Option("NearestNeighbor",1)),r.options.add(new Option("Bilinear",2)),r.options.add(new Option("Bicubic",3)),r=null,o.D.get("dynamsoft_btnChangeImageSizeOK").onclick=function(){var e=o.D.get("dynamsoft_img_width").value,t=o.D.get("dynamsoft_img_height").value,n=(o.D.get("dynamsoft_img_width").className="",o.D.get("dynamsoft_img_height").className="",/^\d+$/);return!n.test(t)||t<=0?(o.D.get("dynamsoft_img_height").className+=" invalid",o.D.get("dynamsoft_img_height").focus(),void alert(X.CustomizableDisplayInfo.errorMessages.invalidHeightOrWidth)):!n.test(e)||e<=0?(o.D.get("dynamsoft_img_width").className+=" invalid",o.D.get("dynamsoft_img_width").focus(),void alert(X.CustomizableDisplayInfo.errorMessages.invalidHeightOrWidth)):(s.ChangeImageSize(e,t,o.D.get("dynamsoft_InterpolationMethod").selectedIndex+1),void(0==s._stwain.ErrorCode&&o.D.hide("dynamsoft_ImgSizeEditor")))},o.D.get("dynamsoft_btnCancelChange").onclick=function(){o.D.hide("dynamsoft_ImgSizeEditor")},r=o.D.get("dynamsoft_ImgSizeEditor"),o.D.toggle("dynamsoft_ImgSizeEditor"),t=(t=(n=e.srcElement||e.target).y)||n.offsetTop+1,a=(a=n.x)||n.offsetLeft+1,s.UIEditor&&"DIV"==s.UIEditor.nodeName?(r.style.top=e.clientY+document.documentElement.scrollTop+"px",r.style.left=e.clientX+document.documentElement.scrollLeft+"px"):(e=J.getElementById(s.UIEditor),r.style.top=t+n.offsetHeight+q.getTop(e)+"px",r.style.left=a+q.getLeft(e)+"px"),t=s._webViewer.GetCurrentIndex(),-1!=(n=s.getImageManager().convertClientIndexToServerId(t))&&!!s._webViewer._UIView.mapModelImageControl[n]&&(s._stwain._isMobileMode()?(a=r=0,(e=s.GetRealTimeMetadataByIndex())&&e.width&&(r=e.width),e&&e.height&&(a=e.height),o.D.get("dynamsoft_img_width").value=i()(r),o.D.get("dynamsoft_img_height").value=i()(a)):(o.D.get("dynamsoft_img_width").value=i()(s.getImageManager().GetImageWidth(t)),o.D.get("dynamsoft_img_height").value=i()(s.getImageManager().GetImageHeight(t))),!0);q.output(s,"No image in Buffer")}},{key:"OnFlip",value:function(){var e=this;o.D.Errors.ClearErrorInfo(e._stwain),e.hideImgEditorDilag(),e._webViewer.GetHowManyImagesInBuffer()<=0||e._webViewer.GetCurrentIndex()<0?q.output(e,"No image in Buffer"):(1==e._webViewer._ImgManager.bImageChangedInViewer?(e._IfSaveChangesOutSideOfTheEditor=!0,e._webViewer._ImgManager.bImageChangedInViewer=!1,e.__SaveImageInner(!1,(function(){e.bCouldBeTimeConsuming=!0,o.I.Lib.detect.showMask(e._stwain),e._stwain._isMobileMode()?(e.DVSFlip(),e.UpdateInfo()):e._stwain.Flip(e._webViewer.GetCurrentIndex()),e._webViewer._ImgManager.bImageJustChangedInEditor=!0,e._IfChangedWithinTheEditor=!0,e.iChangedIndex=e._webViewer.GetCurrentIndex(),e.updateButtons()}))):(e.bCouldBeTimeConsuming=!0,o.I.Lib.detect.showMask(e._stwain),e._IfSaveChangesOutSideOfTheEditor=!1,e._webViewer._ImgManager.bImageJustChangedInEditor=!0,e._IfChangedWithinTheEditor=!0,e.iChangedIndex=e._webViewer.GetCurrentIndex(),e._stwain._isMobileMode()?(e.DVSFlip(),e.UpdateInfo()):e._stwain.Flip(e._webViewer.GetCurrentIndex())),e.updateMode())}},{key:"OnMirror",value:function(){var e=this;o.D.Errors.ClearErrorInfo(e._stwain),e.hideImgEditorDilag(),e._webViewer.GetHowManyImagesInBuffer()<=0||e._webViewer.GetCurrentIndex()<0?q.output(e,"No image in Buffer"):(1==e._webViewer._ImgManager.bImageChangedInViewer?(e._IfSaveChangesOutSideOfTheEditor=!0,e._webViewer._ImgManager.bImageChangedInViewer=!1,e.__SaveImageInner(!1,(function(){e.bCouldBeTimeConsuming=!0,o.I.Lib.detect.showMask(e._stwain),e._stwain._isMobileMode()?(e.DVSMirror(),e.UpdateInfo()):e._stwain.Mirror(e._webViewer.GetCurrentIndex()),e._webViewer._ImgManager.bImageJustChangedInEditor=!0,e._IfChangedWithinTheEditor=!0,e.iChangedIndex=e._webViewer.GetCurrentIndex(),e.updateButtons()}))):(e.bCouldBeTimeConsuming=!0,o.I.Lib.detect.showMask(e._stwain),e._IfSaveChangesOutSideOfTheEditor=!1,e._webViewer._ImgManager.bImageJustChangedInEditor=!0,e._IfChangedWithinTheEditor=!0,e.iChangedIndex=e._webViewer.GetCurrentIndex(),e._stwain._isMobileMode()?(e.DVSMirror(),e.UpdateInfo()):e._stwain.Mirror(e._webViewer.GetCurrentIndex())),e.updateMode())}},{key:"wheel",value:function(e){this.__SetZoomInButtonEnable(this.myImageEditor.zoom<this.myImageEditor.maxZoom),this.__SetZoomOutButtonEnable(this.myImageEditor.zoom>this.myImageEditor.minZoom)}},{key:"OnZoomin",value:function(){var e=this,t=(e.hideImgEditorDilag(),o.D.one(".ds-dwt-ui-icon-zoomin-grey"));t&&t.getEL()||(o.D.Errors.ClearErrorInfo(e._stwain),e._webViewer.GetHowManyImagesInBuffer()<=0||e._webViewer.GetCurrentIndex()<0?q.output(e,"No image in Buffer"):(this.myImageEditor.zoom<this.myImageEditor.maxZoom?(e.ZoomIn(),e.__SetZoomInButtonEnable(!0)):e.__SetZoomInButtonEnable(!1),e.__SetZoomOutButtonEnable(!0),e.__SetCropButtonGrey(!0),e.__SetEraseButtonGrey(!0)))}},{key:"OnOriginalsize",value:function(){var e=this;o.D.Errors.ClearErrorInfo(e._stwain),e.hideImgEditorDilag(),e._webViewer.GetHowManyImagesInBuffer()<=0||e._webViewer.GetCurrentIndex()<0?q.output(e,"No image in Buffer"):(e.SetZoom(1),e.__SetZoomInButtonEnable(!0),e.__SetZoomOutButtonEnable(!0),e.__SetCropButtonGrey(!0),e.__SetEraseButtonGrey(!0))}},{key:"OnZoomout",value:function(){var e=this,t=(e.hideImgEditorDilag(),o.D.one(".ds-dwt-ui-icon-zoomout-grey"));t&&t.getEL()||(o.D.Errors.ClearErrorInfo(e._stwain),e._webViewer.GetHowManyImagesInBuffer()<=0||e._webViewer.GetCurrentIndex()<0?q.output(e,"No image in Buffer"):(this.myImageEditor.zoom>this.myImageEditor.minZoom?(e.ZoomOut(),e.__SetZoomOutButtonEnable(!0)):e.__SetZoomOutButtonEnable(!1),e.__SetZoomInButtonEnable(!0),e.__SetCropButtonGrey(!0),e.__SetEraseButtonGrey(!0)))}},{key:"OnFitPage",value:function(){var e=this;o.D.Errors.ClearErrorInfo(e._stwain),e.hideImgEditorDilag(),e._webViewer.GetHowManyImagesInBuffer()<=0||e._webViewer.GetCurrentIndex()<0?q.output(e,"No image in Buffer"):(e.SetFitType(),e.__SetZoomInButtonEnable(!0),e.__SetZoomOutButtonEnable(!0),e.__SetCropButtonGrey(!0),e.__SetEraseButtonGrey(!0))}},{key:"OnFitWidth",value:function(){var e=this;o.D.Errors.ClearErrorInfo(e._stwain),e.hideImgEditorDilag(),e._webViewer.GetHowManyImagesInBuffer()<=0||e._webViewer.GetCurrentIndex()<0?q.output(e,"No image in Buffer"):(e.SetFitType("width"),e.__SetZoomInButtonEnable(!0),e.__SetZoomOutButtonEnable(!0),e.__SetCropButtonGrey(!0),e.__SetEraseButtonGrey(!0))}},{key:"OnFitHeight",value:function(){var e=this;o.D.Errors.ClearErrorInfo(e._stwain),e.hideImgEditorDilag(),e._webViewer.GetHowManyImagesInBuffer()<=0||e._webViewer.GetCurrentIndex()<0?q.output(e,"No image in Buffer"):(e.SetFitType("height"),e.__SetZoomInButtonEnable(!0),e.__SetZoomOutButtonEnable(!0),e.__SetCropButtonGrey(!0),e.__SetEraseButtonGrey(!0))}},{key:"OnHand",value:function(){var e=o.I.DWT.EnumDWT_MouseShape.Hand;this.hideImgEditorDilag(),this.clearSelectedAreas(),this.SetMouseSelectInner(e)}},{key:"OnSelect",value:function(){var e=o.I.DWT.EnumDWT_MouseShape.Crosshair;this.hideImgEditorDilag(),this.SetMouseSelectInner(e)}},{key:"OnClicktozoomin",value:function(){var e=o.I.DWT.EnumDWT_MouseShape.Zoom;this.hideImgEditorDilag(),this.clearSelectedAreas(),this.SetMouseSelectInner(e)}},{key:"SetMouseSelectInner",value:function(e){var t=this;if(o.D.Errors.ClearErrorInfo(t._stwain),t._webViewer.GetHowManyImagesInBuffer()<=0||t._webViewer.GetCurrentIndex()<0)q.output(t,"No image in Buffer");else if(t.SetMouseShape(e),t.__EnableMouseShapButtons(e),t.bMobile)switch(e){case o.I.DWT.EnumDWT_MouseShape.Crosshair:t.cursorStatus="rectselect";break;case o.I.DWT.EnumDWT_MouseShape.Zoom:t.cursorStatus="zoom";break;default:t.cursorStatus="hand"}else switch(e){case o.I.DWT.EnumDWT_MouseShape.Hand:t.cursorStatus="hand";break;case o.I.DWT.EnumDWT_MouseShape.Zoom:t.cursorStatus="zoom";break;default:t.cursorStatus="rectselect"}}},{key:"OnRestore",value:function(){this.hideImgEditorDilag();var e=o.D.one(".ds-dwt-ui-icon-saveImage-grey");e&&e.getEL()||(o.D.Errors.ClearErrorInfo(this._stwain),this._webViewer.GetHowManyImagesInBuffer()<=0||this._webViewer.GetCurrentIndex()<0?q.output(this,"No image in Buffer"):this.__RestoreImageInner(-1))}},{key:"__RestoreImageInner",value:function(e,t){var n,r,i,a=this;if(-1==a.iChangedIndex)return a._IfChangedWithinTheEditor=!1,void(t&&t());a._stwain._isMobileMode()?(a.Reset(),a._IfChangedWithinTheEditor=!1,a.iChangedIndex=-1,a.updateButtons(),t&&t()):(n=function(n,r,i){return n&&(o.D.log("__RestoreImageInner: "+[n.guid].join(",")),a._stwain._isMobileMode()?a._webViewer.MobileUpdateImage(n,i):a._webViewer.UpdateImage(n,i)),a._IfChangedWithinTheEditor=!1,(a.iChangedIndex=-1)==(n&&n.serverId)?(a.updateButtons(),t&&t(),!1):(a.updateButtons(),-1==e&&-1==a.getImageManager().convertClientIndexToServerId(a._webViewer.GetCurrentIndex())?(o.D.Errors.IndexOutOfRange(a._stwain),t&&t(),!1):void(t&&t()))},r=!0,1==a._IfChangedWithinTheEditor&&(-1!=(i=a.getImageManager().convertClientIndexToServerId(a.iChangedIndex))&&a.OnGetImageFromServerForEdit(a._webViewer._UIView.mapModelImageControl[i],a.iChangedIndex,1,n),r=!1),r&&(a._IfChangedWithinTheEditor=!1,t&&t()))}},{key:"OnGetImageFromServerForEdit",value:function(e,t,n,r){var a=this;if(r&&a._webViewer._UIView.BaseUrl){var s,u=a.getImageManager().convertClientIndexToServerId(t);if(-1==u)return!1;a._stwain._isMobileMode()?1==n?((s=a._webViewer.GetMetaDataByIndex(t))&&(s.width=a.BackModelImageControl.width,s.height=a.BackModelImageControl.height,s.bitDepth=a.BackModelImageControl.bitDepth,s.resolutionX=a.BackModelImageControl.resolutionX,s.resolutionY=a.BackModelImageControl.resolutionY),e.ticks=l()(),e.imageUrl=a.BackImageBuffer,r(e,t,{metaData:s})):a.DVSSaveTransformResult(r):o.I.DWT.ConnectWithSocket?r():(s=Z.getUrlByAct(a._webViewer._UIView.BaseUrl,u,n),o.D.ajax({method:"GET",xhrFields:{withCredentials:!0},url:s,onSuccess:function(n){e.ticks=l()(),e.imageUrl=Z.getImageUrl(a._webViewer._UIView.BaseUrl,u,-1,-1,e.ticks),e.minImageUrl=Z.getImageUrl(a._webViewer._UIView.BaseUrl,u,i()(e.iImageControlWidth),i()(e.iImageControlHeight),e.ticks);var o,s=a._webViewer.GetMetaDataByIndex(t);s&&(s.width=(o=a._webViewer._UIView.GetDataImageControl(u))&&o.width?o.width:a._stwain.GetImageWidth(t),s.height=o&&o.height?o.height:a._stwain.GetImageHeight(t)),r(e,t,s)},onError:function(){}}))}return!0}},{key:"OnSave",value:function(){var e=this,t=(e.hideImgEditorDilag(),o.D.one(".ds-dwt-ui-icon-saveImage-grey"));t&&t.getEL()||(o.D.Errors.ClearErrorInfo(e._stwain),e._webViewer.GetHowManyImagesInBuffer()<=0||e._webViewer.GetCurrentIndex()<0?q.output(e,"No image in Buffer"):e.__SaveImageInner(!0,(function(){if(-1==e.getImageManager().convertClientIndexToServerId(e._webViewer.GetCurrentIndex()))return o.D.Errors.IndexOutOfRange(e._stwain),!1})))}},{key:"OnClose",value:function(){return o.D.Errors.ClearErrorInfo(this._stwain),1==this._IfChangedWithinTheEditor?(this.ShowDialogForSaveImage(-1,!0),!1):this.OnCloseInner()}},{key:"OnCloseInstall",value:function(){0==this._IfChangedWithinTheEditor&&Y.DCP_DWT_OnClickCloseInstall(this._stwain._containerElement)}},{key:"Reset",value:function(e){return this.myImageEditor.reset()}},{key:"OnCloseInner",value:function(e){var t=this;if(o.D.Errors.ClearErrorInfo(t._stwain),1==t._IfChangedWithinTheEditor){if(!e)return t.ShowDialogForSaveImage(-1,!0),!1;Y.DCP_DWT_OnClickCloseInstall(e=t._stwain._containerElement),o.D.bChangeImage=0,t.__RestoreImageInner(-1)}return t.UIEditor&&1==t.bFullScreen?t.UIEditor&&t.UIEditor.parentNode&&0<t.UIEditor.childNodes.length&&t.UIEditor.parentNode.removeChild(t.UIEditor):t.myImageEditor&&t.myImageEditor.unbindView(t.UIEditor),t.bShowImageEdit=!1,t._webViewer.bShowImageEdit=!1,t.bShowImageEditForFullScreen=!1,t.CloseShowImageEditor(),t.hideImgEditorDilag(),(e=o.D.get("dynamsoft_ImgSizeEditor"))&&e.parentNode.removeChild(e),(e=o.D.get("dynamsoft_RotateAnyAngle"))&&e.parentNode.removeChild(e),o.I.Lib.dialog.selectsourcedlg&&o.I.Lib.dialog.selectsourcedlg.close(),window.onresize=null,document.body.style.overflow="",o.D.isFunction(t._stwain.__CloseImageEditorUI)&&t._stwain.__CloseImageEditorUI(),t.dispose()}},{key:"__EnableMouseShapButtons",value:function(e){this.ChangeButtonClass("hand","ds-dwt-ui-icon-hand"),this.ChangeButtonClass("select","ds-dwt-ui-icon-select"),this.ChangeButtonClass("clicktozoomin","ds-dwt-ui-icon-clicktozoomin"),e==o.I.DWT.EnumDWT_MouseShape.Hand?this.ChangeButtonClass("hand","dynamsoft-dwt-EditorButton-selected"):e==o.I.DWT.EnumDWT_MouseShape.Crosshair?this.ChangeButtonClass("select","dynamsoft-dwt-EditorButton-selected"):e==o.I.DWT.EnumDWT_MouseShape.Zoom&&this.ChangeButtonClass("clicktozoomin","dynamsoft-dwt-EditorButton-selected")}},{key:"click",value:function(e){this.hideImgEditorDilag(),this.__SetZoomInButtonEnable(this.myImageEditor.zoom<this.myImageEditor.maxZoom),this.__SetZoomOutButtonEnable(!0)}},{key:"hideImgEditorDilag",value:function(){o.D.hide("dynamsoft_ImgSizeEditor"),o.D.hide("dynamsoft_RotateAnyAngle")}},{key:"imageClick",value:function(e,t){this.UpdateInfo()}},{key:"pageAreaSelected",value:function(e,t){var n=1;t&&0<t.length&&(0<(n=(t=t[t.length-1]).index?i()(t.index)+1:n)&&n<this.actualSelectedCanvasAreas.length?this.actualSelectedCanvasAreas[n]={left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height}:n==this.actualSelectedCanvasAreas.length&&this.actualSelectedCanvasAreas.push({left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height}),2==this.actualSelectedCanvasAreas.length&&0<t.width&&0<t.height?(this.ChangeButtonClass("crop","ds-dwt-ui-icon-cropImage"),this.ChangeButtonClass("cut","ds-dwt-ui-icon-erase")):(this.__SetCropButtonGrey(!1),this.__SetEraseButtonGrey(!1)))}},{key:"pageAreaUnselected",value:function(e){this.actualSelectedCanvasAreas=[{left:0,top:0,right:0,bottom:0}],this.ChangeButtonClass("crop","ds-dwt-ui-icon-cropImage-grey"),this.ChangeButtonClass("cut","ds-dwt-ui-icon-erase-grey")}},{key:"onDrop",value:function(e){this._webViewer.dropEvent(e)}},{key:"getImageManager",value:function(){return this._webViewer._ImgManager}}]),e}()),ee=(o.D.UI.ImageEditorInner=$,function(){function e(t,n){(0,s.Z)(this,e),(0,h.Z)(this,"_imageEditorInner",void 0),(0,h.Z)(this,"myImageEditor",void 0),this._imageEditorInner=new $(t,n),this.myImageEditor=this._imageEditorInner.myImageEditor}return(0,u.Z)(e,[{key:"show",value:function(){return this._imageEditorInner.show()}},{key:"hide",value:function(){return this._imageEditorInner.hide()}},{key:"dispose",value:function(){return this._imageEditorInner.OnCloseInner(!0)}}]),e}());o.D.UI.ImageEditor=ee;var te={showThumbnail:!1,location:"horizontal",sequence:-1,size:"30%",columns:1,rows:3,scrollDirection:"vertical",pageMargin:10,border:"",allowKeyboardControl:!0,allowPageDragging:!0,allowResizing:!1,pageBackground:w,pageBorder:C,hoverPageBackground:E,hoverPageBorder:M,placeholderBackground:P,autoChangeIndex:!1},ne=new(t()),re=function(){function e(t,n){(0,s.Z)(this,e),function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object");t.add(e)}(this,ne);var r=this;if(r._webViewer=t,n){if(n.location)switch(n.location){case"left":n.location="horizontal",n.sequence=-1;break;case"right":n.location="horizontal",n.sequence=1;break;case"top":n.location="vertical",n.sequence=-1;break;case"bottom":n.location="vertical",n.sequence=1;break;default:n.location="horizontal",n.sequence=-1}else n.location="horizontal",n.sequence=-1;o.D.isUndefined(n.size)&&(n.size=te.size),o.D.isUndefined(n.columns)&&(n.columns=te.columns),o.D.isUndefined(n.rows)&&(n.rows=te.rows),(o.D.isUndefined(n.scrollDirection)||"horizontal"!=n.scrollDirection)&&(n.scrollDirection=te.scrollDirection),o.D.isUndefined(n.pageMargin)&&(n.pageMargin=te.pageMargin),o.D.isUndefined(n.allowKeyboardControl)&&(n.allowKeyboardControl=te.allowKeyboardControl),o.D.isUndefined(n.allowPageDragging)&&(n.allowPageDragging=te.allowPageDragging),o.D.isUndefined(n.allowResizing)&&(n.allowResizing=te.allowResizing),o.D.isUndefined(n.border)&&(n.border=te.border),o.D.isUndefined(n.pageBackground)&&(n.pageBackground=te.pageBackground),o.D.isUndefined(n.pageBorder)&&(n.pageBorder=te.pageBorder),o.D.isUndefined(n.hoverPageBackground)&&(n.hoverPageBackground=te.hoverPageBackground),o.D.isUndefined(n.hoverPageBorder)&&(n.hoverPageBorder=te.hoverPageBorder),o.D.isUndefined(n.placeholderBackground)&&(n.placeholderBackground=te.placeholderBackground),o.D.isUndefined(n.autoChangeIndex)&&(n.autoChangeIndex=te.autoChangeIndex)}else n=o.I.Lib.clone(te);o.D.isUndefined(n.background)&&(n.background=r._webViewer.GetBackground()),o.D.isUndefined(n.pageNumber)&&(n.pageNumber=r._webViewer.GetPageNumberStyle()),o.D.isUndefined(n.checkbox)&&(n.checkbox=r._webViewer.GetCheckboxStyle()),o.D.isUndefined(n.multiSelectMode)&&(n.multiSelectMode=r._webViewer.GetMultiSelectMode()==o.I.DWT.EnumDWT_SelectionMode.Multiple),o.D.isUndefined(n.selectedPageBorder)&&(t=r._webViewer.GetSelectedPageBorder(),n.selectedPageBorder=o.D.isUndef(t)?te.selectedPageBorder:t),o.D.isUndefined(n.selectedPageBackground)&&(t=r._webViewer.GetSelectedPageBackground(),n.selectedPageBackground=o.D.isUndef(t)?te.selectedPageBackground:t),n.showThumbnail=!1,r.myThumbnailViewer=r._webViewer.myViewer.createThumbnailView(n),0!=r._webViewer.mydvs.Error.errorCode&&o.D.Errors.WebviewerError(r._webViewer._stwain,r._webViewer.mydvs.Error.errorMessage,r._webViewer.mydvs.Error.errorCode),function(e,t,n){if(t.has(e))return n;throw new TypeError("attempted to get private field on non-instance")}(this,ne,ie).call(this),r.bDispose=!1,r._webViewer.bThumbnailDispose=!1}return(0,u.Z)(e,[{key:"show",value:function(){return!!this._webViewer._NouiNotSupport("show")&&(this.myThumbnailViewer?(this._webViewer.myViewer.setViewMode(1,1),this._webViewer.SetIfSinglePageMode(!0),this.myThumbnailViewer.showThumbnail=!0):(this.bDispose?o.D.Errors.ThumbnailViewerDispose(this._webViewer._stwain):o.D.Errors.ThumbnailViewerNotExist(this._webViewer._stwain),!1))}},{key:"hide",value:function(){return!(!this._webViewer._NouiNotSupport("hide")||(this.myThumbnailViewer?this.myThumbnailViewer.showThumbnail=!1:(this.bDispose?o.D.Errors.ThumbnailViewerDispose(this._webViewer._stwain):o.D.Errors.ThumbnailViewerNotExist(this._webViewer._stwain),1)))}},{key:"dispose",value:function(){var e;return!!this.bDispose||((e=this._webViewer.myViewer.removeThumbnailView(this.myThumbnailViewer))&&(this.bDispose=!0,this._webViewer._thumbnailViewer=void 0,this._webViewer.myThumbnailViewer=void 0,this.myThumbnailViewer=void 0,this._webViewer.bThumbnailDispose=!0),e)}},{key:"updateViewMode",value:function(e){if(!this.myThumbnailViewer)return this.bDispose?o.D.Errors.ThumbnailViewerDispose(this._webViewer._stwain):o.D.Errors.ThumbnailViewerNotExist(this._webViewer._stwain),!1;if(e&&e.columns&&e.rows){if(e.columns<0||e.rows<0)return o.D.Errors.InvalidPropertyValue(this._webViewer._stwain),!1;this.myThumbnailViewer.showThumbnail=!1,this.myThumbnailViewer.setViewMode(e.columns,e.rows),!e.scrollDirection||"horizontal"!=e.scrollDirection&&"vertical"!=e.scrollDirection||(this.myThumbnailViewer.scrollDirection=e.scrollDirection),this.myThumbnailViewer.showThumbnail=!0}return!0}},{key:"updateCheckboxStyle",value:function(e){return this.myThumbnailViewer?(this.myThumbnailViewer.checkbox=e,!0):(this.bDispose?o.D.Errors.ThumbnailViewerDispose(this._webViewer._stwain):o.D.Errors.ThumbnailViewerNotExist(this._webViewer._stwain),!1)}},{key:"updatePageNumberStyle",value:function(e){return this.myThumbnailViewer?(this.myThumbnailViewer.pageNumber=e,!0):(this.bDispose?o.D.Errors.ThumbnailViewerDispose(this._webViewer._stwain):o.D.Errors.ThumbnailViewerNotExist(this._webViewer._stwain),!1)}},{key:"on",value:function(e,t){e&&(o.D.isFunction(t)?this.myThumbnailViewer.on(e,t):o.D.Errors.CallbackNotAFunction(this._webViewer._stwain))}},{key:"off",value:function(e,t){var n=this;e&&(o.D.isUndefined(t)?(n.myThumbnailViewer.off(e),"click"==e&&n.myThumbnailViewer.on("click",(function(e,t){n._webViewer.UpdateInfo(!0,!1,!0)}))):o.D.isFunction(t)?n.myThumbnailViewer.off(e,t):o.D.Errors.CallbackNotAFunction(n._webViewer._stwain))}}]),e}();function ie(){var e=this,t=o.D.html5.Funs.DEF;t(e,"location",{get:function(){return e._webViewer.GetThumLocation()},set:function(t){return e._webViewer.SetThumLocation(t)}}),t(e,"size",{get:function(){return e._webViewer.GetThumSize()},set:function(t){return e._webViewer.SetThumSize(t)}}),t(e,"scrollDirection",{get:function(){return e._webViewer.GetThumScrollDirection()},set:function(t){return e._webViewer.SetThumScrollDirection(t)}}),t(e,"showPageNumber",{get:function(){return e._webViewer.GetThumShowPageNumber()},set:function(t){return e._webViewer.SetThumShowPageNumber(t)}}),t(e,"showCheckbox",{get:function(){return e._webViewer.GetThumShowCheckbox()},set:function(t){return e._webViewer.SetThumShowCheckbox(t)}}),t(e,"pageMargin",{get:function(){return e._webViewer.GetThumMargin()},set:function(t){return e._webViewer.SetThumMargin(t)}}),t(e,"border",{get:function(){return e._webViewer.GetThumBorder()},set:function(t){return e._webViewer.SetThumBorder(t)}}),t(e,"background",{get:function(){return e._webViewer.GetThumBackground()},set:function(t){return e._webViewer.SetThumBackground(t)}}),t(e,"pageBackground",{get:function(){return e._webViewer.GetThumPageBackground()},set:function(t){return e._webViewer.SetThumPageBackground(t)}}),t(e,"pageBorder",{get:function(){return e._webViewer.GetThumPageBorder()},set:function(t){return e._webViewer.SetThumPageBorder(t)}}),t(e,"hoverPageBackground",{get:function(){return e._webViewer.GetThumHoverBackground()},set:function(t){return e._webViewer.SetThumHoverBackground(t)}}),t(e,"hoverPageBorder",{get:function(){return e._webViewer.GetThumHoverBorder()},set:function(t){return e._webViewer.SetThumHoverBorder(t)}}),t(e,"placeholderBackground",{get:function(){return e._webViewer.GetThumPlaceholderBackground()},set:function(t){return e._webViewer.SetThumPlaceholderBackground(t)}}),t(e,"selectedPageBorder",{get:function(){return e._webViewer.GetThumSelectedPageBorder()},set:function(t){return e._webViewer.SetThumSelectedPageBorder(t)}}),t(e,"selectedPageBackground",{get:function(){return e._webViewer.GetThumSelectedPageBackground()},set:function(t){return e._webViewer.SetThumSelectedPageBackground(t)}}),t(e,"allowKeyboardControl",{get:function(){return e._webViewer.GetThumAllowKeyboardControl()},set:function(t){return e._webViewer.SetThumAllowKeyboardControl(t)}}),t(e,"allowPageDragging",{get:function(){return e._webViewer.GetThumAllowDrag()},set:function(t){return e._webViewer.SetThumAllowDrag(t)}}),t(e,"allowResizing",{get:function(){return e._webViewer.GetThumAllowResize()},set:function(t){return e._webViewer.SetThumAllowResize(t)}}),t(e,"autoChangeIndex",{get:function(){return e._webViewer.GetThumAutoChangeIndex()},set:function(t){return e._webViewer.SetThumAutoChangeIndex(t)}})}o.D.UI.ThumbnailViewer=re,t=n(5238);var oe=n.n(t),ae=(t=n(3662),n.n(t)),se="dvsDb",ue="dvsDoc",ce=function(){function e(t,n){(0,s.Z)(this,e),(0,h.Z)(this,"_db",void 0),(0,h.Z)(this,"syncDb",void 0),this._db=t.DataControl._db,n?this.syncDb={}:((t=this._db.DBMng._d)[se]||(t[se]={}),t[se][ue]||(t[se][ue]={}),this.syncDb=t[se][ue])}return(0,u.Z)(e,[{key:"setCustomDataSync",value:function(e,t){return this.syncDb[e].customData=t,!0}},{key:"getCustomDataSync",value:function(e){return this.syncDb[e]||(this.syncDb[e]={}),this.syncDb[e].customData||(this.syncDb[e].customData={}),this.syncDb[e].customData}},{key:"getOriDataSync",value:function(e){return this.syncDb[e]||(this.syncDb[e]={}),this.syncDb[e].oriData}},{key:"getMetaDataSync",value:function(e){return this._db.getMetadata(e)}},{key:"dispose",value:function(){this._db=null,this.syncDb=null}}]),e}(),le=function(){function e(t){(0,s.Z)(this,e),(0,h.Z)(this,"_fileTree",void 0),this._fileTree=t._tree}return(0,u.Z)(e,[{key:"createFile",value:function(e){return this._fileTree.createFile(e)}},{key:"openFile",value:function(e){return(e=this._fileTree.findChild(this._fileTree.dfNode,e))&&"file"===e.type?oe()(e=e.chs).call(e):[]}},{key:"findFile",value:function(e){return this._fileTree.dfNode&&(e=this._fileTree.findChild(this._fileTree.dfNode,e))&&"file"===e.type?e:null}},{key:"replaceFileContent",value:function(e,t){var n;(e=this.findFile(e))&&(ae()(n=e.chs).call(n,0),e.chs=t)}},{key:"getFileCount",value:function(e){return(e=this.findFile(e))?e.chs.length:0}},{key:"getIndexByUidInFile",value:function(e,t){var n=this.findFile(e);if(n)for(var r=n.chs.length,i=0;i<r;i++)if(n.chs[i]==t)return i;return-1}},{key:"removeByIndexInFile",value:function(e,t){if(e=this.findFile(e)){var n=e.chs.length;if(0<=t&&t<n)return ae()(n=e.chs).call(n,t,1),!0}return!1}},{key:"dispose",value:function(){this._fileTree=null}}]),e}(),de=document,he=o.I.DWT,ge=["topPageChanged","click","rightclick","dblclick","mousemove","pageAreaSelected","pageAreaUnselected","dragdone","onDrop","bufferChanged","pageChange"],fe={toolbars:{header:!1,topMenu:!1,asideMenu:!1,bottomMenu:!1},groups:{},buttons:{},thumbnail:{showThumbnailControl:!1,size:"30%",columns:1,rows:3,scrollDirection:"vertical",pageMargin:10,allowKeyboardControl:!0,allowPageDragging:!0,allowResizing:!1,border:"",background:S,pageBackground:w,pageBorder:C,hoverPageBackground:E,hoverPageBorder:M,placeholderBackground:P,selectedPageBorder:A,selectedPageBackground:x,autoChangeIndex:!1,checkbox:R,pageNumber:k},canvasConfig:{canvasMouseShape:"crosshair",canvasBackground:S,canvasBorder:"",selectedPageBorder:A,pageBorder:C,pageMargin:10,pageBackground:w,selectedPageBackground:x,hoverPageBorder:M,hoverPageBackground:E,placeholderBackground:P,autoChangeIndex:!1,allowPageDragging:!0,columns:1,rows:1,scrollDirection:"vertical",checkbox:R,pageNumber:k},showSidebar:!1,showMain:!0,showViewer:!0,sidebarWidth:"180",outerBorder:"1px solid rgb(204, 204, 204)",topMenuBorder:"",selectedAreaBorderColor:"rgb(42, 29, 43)",selectionRectAspectRatio:0,ifAutoScroll:!0,useOuterDrop:!0,allowSlide:!0},me={background:"#434246",topMenuBorder:"",innerBorder:"",promptToSaveChange:!0,buttons:he.CustomizableDisplayInfo.buttons,dialogText:he.CustomizableDisplayInfo.dialogText},pe={scannerViewer:{headerStyle:{background:"#000000",color:"#ffffff",selectedColor:"#fe8e14"},bodyStyle:{background:"#ffffff ",loaderBarSource:""},footerStyle:{background:"#000000",color:"#ffffff",selectedColor:"#fe8e14"},fullScreen:!1,enableBorderDetection:!0,polygonStyle:{stroke:"#fe8e14",strokeWidth:"2px",dash:"solid "},scanButtonStyle:{background:"#fe8e14",color:"#ffffff"},resolution:{visibility:"visible",valueList:[{label:"720P",value:{width:1280,height:720}},{label:"1080P",value:{width:1920,height:1080}},{label:"2K",value:{width:2560,height:1440}},{label:"4K",value:{width:3840,height:2160}}],defaultValue:{width:1280,height:720}},autoScan:{visibility:"visible",enableAutoScan:!1},autoDetect:{visibility:"visible",enableAutoDetect:!1,acceptedPolygonConfidence:80,fpsLimit:3,acceptedBlurryScore:0,autoCaptureDelay:1e3},continuousScan:!0,switchCamera:{visibility:"visible"},loadLocalFile:{visibility:"visible"},funcConfirmExit:o.I.funcConfirmExit},documentEditorSettings:{visibility:"visible",defaultViewerName:"CropViewer",headerStyle:{background:"#000000",color:"#ffffff",selectedColor:"#fe8e14",disabledColor:"#808080"},bodyStyle:{background:"#ffffff ",loaderBarSource:""},footerStyle:{background:"#000000",color:"#ffffff",selectedColor:"#fe8e14"},insert:{visibility:"visible",position:"before"},remove:{visibility:"visible",funcConfirmRemove:o.I.funcConfirmRemove},rotateLeft:{visibility:"visible"},filter:{visibility:"visible",valueList:[{label:"Original",value:"original",option:{level:1}},{label:"B&W",value:"blackAndWhite",option:{level:1}},{label:"Grayscale",value:"grayscale",option:{level:1}},{label:"Clean",value:"clean",option:{level:1}},{label:"Brightening",value:"brightening",option:{level:1}},{label:"Save Toner",value:"saveToner",option:{level:1}}],defaultValue:"original",applyToAll:{visibility:"visible",enableApplyToAll:!1,label:"Apply to all"}},crop:{visibility:"visible"},cropViewer:{visibility:"visible",polygonStyle:{stroke:"#fe8e14",strokeWidth:"2px",dash:"solid "},rotateLeft:{visibility:"visible"},rotateRight:{visibility:"visible"},autoDetectBorder:{visibility:"visible"},funcConfirmExit:o.I.funcConfirmCropViewerExit},funcConfirmExit:o.I.funcConfirmMainViewerExit,funcConfirmExitAfterSave:o.I.funcConfirmExitAfterSave}},_e={isFunction:function(e){return e&&"function"==typeof e},addClass:function(e,t){(e=o.D.one(e))&&0<e.length&&e.addClass(t)},removeClass:function(e,t){(e=o.D.one(e))&&0<e.length&&e.removeClass(t)},output:function(e,t){o.I.DWT.Debug&&o.D.log(t)},getTop:function(e){var t=e.offsetTop;return null!=e.offsetParent&&(t+=_e.getTop(e.offsetParent)),t},getLeft:function(e){var t=e.offsetLeft;return null!=e.offsetParent&&(t+=_e.getLeft(e.offsetParent)),t}},ve=(o.D._safePromptCustomMsg((function(){me.buttons=he.CustomizableDisplayInfo.buttons,me.dialogText=he.CustomizableDisplayInfo.dialogText})),function(){function e(t,n,r){(0,s.Z)(this,e),(0,h.Z)(this,"_dvsWrapper",null),(0,h.Z)(this,"_fileWrapper",null),(0,h.Z)(this,"_bFireSync",!0);var i=this;i._ImgManager=t,i._stwain=t._stwain,i._UIView=r,i._currentTag="",i.bShowImageEdit=!1,i.acceptDrop=!0,i.currentFileName=T,i._documentScanConfiguration="",i.addCSSForShowVideo=!1,i.ifWebviewerInit=!1,i._Init(n),o.I.funcConfirmExit&&o.I.Lib.isFunction(o.I.funcConfirmExit)&&(pe.scannerViewer.funcConfirmExit=o.I.funcConfirmExit),o.I.funcConfirmRemove&&o.I.Lib.isFunction(o.I.funcConfirmRemove)&&(pe.documentEditorSettings.remove.funcConfirmRemove=o.I.funcConfirmRemove),o.I.funcConfirmMainViewerExit&&o.I.Lib.isFunction(o.I.funcConfirmMainViewerExit)&&(pe.documentEditorSettings.funcConfirmExit=o.I.funcConfirmMainViewerExit),o.I.funcConfirmExitAfterSave&&o.I.Lib.isFunction(o.I.funcConfirmExitAfterSave)&&(pe.documentEditorSettings.funcConfirmExitAfterSave=o.I.funcConfirmExitAfterSave),o.I.funcConfirmCropViewerExit&&o.I.Lib.isFunction(o.I.funcConfirmCropViewerExit)&&(pe.documentEditorSettings.cropViewer.funcConfirmExit=o.I.funcConfirmCropViewerExit),i._globalScanConfiguration_ScannViewer=o.I.Lib.clone(pe),i._globalScanConfiguration=o.I.Lib.clone(pe),i._globalScanConfiguration.documentEditorSettings.defaultViewerName="mainViewer",b&&o.I.DWT.UseDefaultViewer&&(i._stwain.Viewer=new b(i,t))}return(0,u.Z)(e,[{key:"dispose",value:function(){var e=this;e.containerElement=null,e.myViewer&&(e.myViewer.off("bufferChanged"),e.mydvs.ViewControl.removeViewer(e.myViewer),e.myViewer=null),e.mydvs&&(e.mydvs.dispose(),e.mydvs=null),e._dvsWrapper&&(e._dvsWrapper.dispose(),e._dvsWrapper=null),e._fileWrapper&&(e._fileWrapper.dispose(),e._fileWrapper=null),e.myccvs&&(e.myccvs.dispose(),e.myccvs=null),e.mydocEditManager&&(e.mydocEditManager.dispose(),e.mydocEditManager=null),e._UIView=null,e._ImgManager=null,e._stwain.Viewer&&(e._stwain.Viewer.dispose(),e._stwain.Viewer=null),e._stwain=null}},{key:"_Init",value:function(e){var t,n,r=this;e.Container&&(o.D.isNodeList(e.Container)||o.D.isArray(e.Container)&&0<e.Container.length)&&(n=e.Container[0])?((t=document.createElement("div")).style.width="100%",t.style.height="100%",n.appendChild(t),r.containerElement=n):r.containerElement="",r.mydvs?""!=r.containerElement&&(r.BindView(r.containerElement),r.show()):(r.initWidth=e.Width,r.initHeight=e.Height,(n=fe).width=r.initWidth,n.height=r.initHeight,r._stwain._isPC()||(n.canvasConfig.canvasMouseShape="pointer"),r.mydvs=new o.I.ViewModel({uiConfig:n,displayMode:"continuous",fitType:"window",scrollerConfig:{}}),r._dvsWrapper=new ce(r.mydvs),r._fileWrapper=new le(r.mydvs.File),r._bindViewUi=!1,r.myViewer=r.mydvs.ViewControl.getViewerByUid(),o.I.DWT.UseDefaultViewer&&r.containerElement&&r.mydvs.ViewControl&&(r.mydvs.ViewControl.bindViewUiConstructor(o.I.ViewUi),r.myViewer.bindView(t),r._bindViewUi=!0),r.myViewer&&(r._stwain._isPC()?r.SetOperationMode(1):r.SetOperationMode(0)),r.containerElement&&r._InitDVS(),r._bindEvent=!1,r._bindViewUi?(r._BindViewerEvents(),r._bindEvent=!0):r.myViewer.on("bufferChanged",(function(e,t){r.bufferChanged(e,t)})),r._bRegistedLoad=!1)}},{key:"BindView",value:function(e){var t,n=this;return n.OnCloseImageEditor(),e=e&&"DIV"==e.nodeName?e:de.getElementById(e),o.D.isUndefined(e)||o.D.isNull(e)?t=e:((t=document.createElement("div")).style.width="100%",t.style.height="100%",e.appendChild(t)),0==n._bindViewUi&&n.mydvs.ViewControl&&(n.mydvs.ViewControl.bindViewUiConstructor(o.I.ViewUi),o.D.html5.ui.initProgress(n._stwain),n._bindViewUi=!0),o.D.isUndefined(n.myViewer.width)&&(n.initWidth=""!=e.style.width?e.style.width:0<e.clientWidth?e.clientWidth:0<e.offsetWidth?e.offsetWidth:0<e.scrollWidth?e.scrollWidth:100),o.D.isUndefined(n.myViewer.height)&&(n.initHeight=""!=e.style.height?e.style.height:0<e.clientHeight?e.clientHeight:0<e.offsetHeight?e.offsetHeight:0<e.scrollHeight?e.scrollHeight:100),(t=n.myViewer.bindView(t))?(n.myViewer.showViewer=!1,n.containerElement=e,n._stwain._containerElement=e,n._stwain._bBindViewer=!0,n._InitDVS(),n.SetAcceptDrop(!0),n.SetAllowSlide(!0),n.myViewer.off("bufferChanged"),n.resetUISettingsInner(!1,n.GetWidth(),n.GetHeight()),n._bindEvent||n._BindViewerEvents(),n.hide(),t):(o.D.Errors.WebviewerError(n._stwain,n.mydvs.Error.errorMessage,n.mydvs.Error.errorCode),!1)}},{key:"CreateTemplate",value:function(e,t){return this._stwain.Template=new B(this,this._ImgManager,t),this._stwain.Template}},{key:"BindTemplate",value:function(e,t){return!(!t||!t._documentTemplate)&&t._documentTemplate.BindView(e)}},{key:"show",value:function(){var e;return!!this._NouiNotSupport("show")&&(this._stwain.Template&&this._stwain.Template._documentTemplate&&(this._stwain.Template._documentTemplate.ifShowDocumentTemplate(!0),(e=document.getElementById("btnCapture"+this.myViewer.postfix))&&(e.style.display="")),this.myViewer.showViewer=!0)}},{key:"hide",value:function(){var e;return!(!this._NouiNotSupport("hide")||(this._stwain.Template&&this._stwain.Template._documentTemplate&&(this._stwain.Template._documentTemplate.ifShowDocumentTemplate(!1),(e=document.getElementById("btnCapture"+this.myViewer.postfix))&&(e.style.display="none")),this.myViewer.showViewer=!1))}},{key:"UnbindView",value:function(){var e,t=this;if(t._stwain&&t._stwain.Addon&&t._stwain.Addon.Camera&&t._stwain.Addon.Camera._viewer&&""!=t._stwain.Addon.Camera.getStatus()&&t._stwain.Addon.Camera.closeSource(),e=t.myViewer.unbindView()){if(t._bindViewUi=!1,t._UnbindViewerEvents(),t._bindEvent=!1,t._imageEditor&&t._imageEditor.dispose(),t._documentEditor&&t._documentEditor.dispose(),t._thumbnailViewer&&t._thumbnailViewer.dispose(),t._customElement&&t._customElement.dispose(),t.closeVideo(),t.containerElement&&t.containerElement.childNodes&&0<t.containerElement.childNodes.length)if(1==t.containerElement.childNodes.length)t.containerElement&&0==t.containerElement.childNodes[0].childNodes.length&&t.containerElement.removeChild(t.containerElement.childNodes[0]);else for(var n=t.containerElement.childNodes.length-1;0<=n;n--)t.containerElement&&t.containerElement.removeChild(t.containerElement.childNodes[n]);t.containerElement=""}else o.D.Errors.WebviewerError(t._stwain,t.mydvs.Error.errorMessage,t.mydvs.Error.errorCode);return t._stwain._bBindViewer=!1,e}},{key:"SetUIView",value:function(e){this._UIView=e}},{key:"_BindViewerEvents",value:function(){var e=this;e.myViewer&&(e.myViewer.off("bufferChanged"),o.D.each(ge,(function(t){e.myViewer.on(t,(function(n,r){e[t](n,r)}))})))}},{key:"_UnbindViewerEvents",value:function(){var e=this;o.D.each(ge,(function(t){"bufferChanged"!=t&&e.myViewer.off(t)}))}},{key:"_InitDVS",value:function(){var e=this;e.ifWebviewerInit=!0,e.myViewer.showHeader=!1,e.myViewer.showTopMenu=!1,e.myViewer.showFooter=!1,e.myViewer.showMain=!0,e.myViewer.bOnlyShowThumbnailsView=!1,e.myViewer.showThumbnailControl=!1,e.myViewer.showLatestPage=!0,e.myViewer.minZoom=e._UIView.MIN_ZOOM,e.myViewer.maxZoom=e._UIView.MAX_ZOOM}},{key:"ShowImageEditor",value:function(e,t,n,r){return e&&n&&r?(me.element=e,me.width=n,me.height=r):(me.element=void 0,me.width=void 0,me.height=void 0),me.border=this.GetBorder(),me.selectionRectAspectRatio=this.GetSelectionRectAspectRatio(),this.createImageEditor(me),0!=this._stwain._errorCode&&(this._imageEditor.dispose(),this.createImageEditor(me)),this._imageEditor.show(),!0}},{key:"OnCloseImageEditor",value:function(){return!!this.bShowImageEdit&&(this._imageEditor&&this._imageEditor.dispose(),this.bShowImageEdit=!1,this._imageEditor=void 0,this._imageEditorInner=void 0,!0)}},{key:"GetUidByIndex",value:function(e){return e<0||e>=this.GetHowManyImagesInBuffer()?(o.D.Errors.IndexOutOfRange(this._stwain),-1):this.myViewer.getUidByIndex(e)}},{key:"GetIndexByUid",value:function(e){return e&&""!=e&&-1!=e?this.myViewer.getIndexByUid(e):(o.D.Errors.IndexOutOfRange(this._stwain),-1)}},{key:"SetMetaDataByIndex",value:function(e,t){if(!(e<0||e>=this.GetHowManyImagesInBuffer()))return this.myViewer.setMetadataByIndex(e,t);o.D.Errors.IndexOutOfRange(this._stwain)}},{key:"GetMetaDataByIndex",value:function(e){if(!(e<0||e>=this.GetHowManyImagesInBuffer()))return this.myViewer.getMetadataByIndex(e);o.D.Errors.IndexOutOfRange(this._stwain)}},{key:"GetCustomDataByIndex",value:function(e){if(!(e<0||e>=this.GetHowManyImagesInBuffer()))return e=o.D.isArray(e)?e[0]:e,this.myViewer.getCustomDataByIndex(e);o.D.Errors.IndexOutOfRange(this._stwain)}},{key:"GetHowManyImagesInBuffer",value:function(){return o.D.isUndefined(this.myViewer.currentPageCount)?0:this.myViewer.currentPageCount}},{key:"UpdateInfo",value:function(e,t,n){t&&o.I.Lib.hideMask(),e&&this.bShowImageEdit&&this._imageEditorInner&&this._imageEditorInner.updateMode(n)}},{key:"AppendImage",value:function(e,t){var n,r,i=e.imageUrl,a=e.minImageUrl,s=e.serverId,u=e.bAppendImage,c=e.index,l={},d=this.currentFileName;if(t&&(o.D.isUndef(t.currentFileName)||(d=t.currentFileName),o.D.isUndef(t.width)||(l.width=t.width),o.D.isUndef(t.height)||(l.height=t.height),o.D.isUndef(t.bitDepth)||(l.bitDepth=t.bitDepth),o.D.isUndef(t.resolutionX)||(l.resolutionX=t.resolutionX),o.D.isUndef(t.resolutionY)||(l.resolutionY=t.resolutionY),o.D.isUndef(t.oriBlobData)||(r=t.oriBlobData)),0==this.ifFileNameExist(d))return!1;if(o.D.log("AppendImage_oriData:"+i),u||0==u&&0==this.GetHowManyImagesInBuffer()){if(r){var h,g={imageId:s};for(h in r)r.hasOwnProperty(h)&&(g[h]=r[h]);n=this.mydvs.DataControl.appendSync(d,[{oriData:i,minData:a,metadata:l,customData:g}])}else n=this.mydvs.DataControl.appendSync(d,[{oriData:i,minData:a,metadata:l,customData:{imageId:s}}]);return e.uuid=n[0],this.UpdateInfo(!0),n[0]}return n=this.mydvs.DataControl.insertSync(d,[{oriData:i,minData:a,metadata:l,customData:{imageId:s}}],c),e.uuid=n[0],this.UpdateInfo(!0),n[0]}},{key:"MobileAppendImage",value:function(e,t){var n=e.bAppendImage,r=e.index,i={},a=this.currentFileName;return t.imageId=e.serverId,t&&t.currentFileName&&(a=t.currentFileName),0!=this.ifFileNameExist(a)&&(t&&t.metadata&&(o.D.isUndef(t.metadata.width)||(i.width=t.metadata.width),o.D.isUndef(t.metadata.imageWidth)||(i.width=t.metadata.imageWidth),o.D.isUndef(t.metadata.height)||(i.height=t.metadata.height),o.D.isUndef(t.metadata.imageHeight)||(i.height=t.metadata.imageHeight),o.D.isUndef(t.metadata.bitDepth)||(i.bitDepth=t.metadata.bitDepth),o.D.isUndef(t.metadata.imageBitDepth)||(i.bitDepth=t.metadata.imageBitDepth),o.D.isUndef(t.metadata.resolutionX)||(i.resolutionX=t.metadata.resolutionX),o.D.isUndef(t.metadata.imageXResolution)||(i.resolutionX=t.metadata.imageXResolution),o.D.isUndef(t.metadata.resolutionY)||(i.resolutionY=t.metadata.resolutionY),o.D.isUndef(t.metadata.imageYResolution)||(i.resolutionY=t.metadata.imageYResolution),o.D.isUndef(t.metadata.oriBlobData)||(i.oriBlobData=t.metadata.oriBlobData),delete t.metadata),"url"!=t.dataType&&"srcId"in t?(n=0==n&&0==this.GetHowManyImagesInBuffer()?this.mydvs.DataControl.appendSync(a,[{oriData:null,minData:null,metadata:i,customData:t}]):this.mydvs.DataControl.insertSync(a,[{oriData:null,minData:null,metadata:i,customData:t}],r),e.uuid=n[0],this.UpdateInfo(!0),n[0]):("src"in t&&(e.imageUrl=t.src,delete t.src),"imageUrl"in t&&(e.imageUrl=t.imageUrl,delete t.imageUrl),i.currentFileName=a,this.AppendImage(e,i)))}},{key:"UpdateImage",value:function(e,t){var n=e.imageUrl,r=e.minImageUrl,i=e.serverId,a=(e=e.uuid,{});return t&&(o.D.isUndef(t.width)||(a.width=t.width),o.D.isUndef(t.height)||(a.height=t.height),o.D.isUndef(t.bitDepth)||(a.bitDepth=t.bitDepth),o.D.isUndef(t.resolutionX)||(a.resolutionX=t.resolutionX),o.D.isUndef(t.resolutionY)||(a.resolutionY=t.resolutionY)),e&&""!=e&&-1!=e?(this._UpdateImageInner(e,{oriData:n,minData:r,customData:{imageId:i},metadata:a}),this.UpdateInfo(!1,!0),e):(o.D.Errors.IndexOutOfRange(this._stwain),!1)}},{key:"MobileUpdateImage",value:function(e,t){var n=e.index,r=e.uuid,i={},a={};return r&&""!=r&&-1!=r?((i=this.GetMetaDataByIndex(n))&&"metadata"in t&&t.metadata&&(o.D.isUndef(t.metadata.width)||(i.width=t.metadata.width),o.D.isUndef(t.metadata.imageWidth)||(i.width=t.metadata.imageWidth),o.D.isUndef(t.metadata.height)||(i.height=t.metadata.height),o.D.isUndef(t.metadata.imageHeight)||(i.height=t.metadata.imageHeight),o.D.isUndef(t.metadata.bitDepth)||(i.bitDepth=t.metadata.bitDepth),o.D.isUndef(t.metadata.imageBitDepth)||(i.bitDepth=t.metadata.imageBitDepth),o.D.isUndef(t.metadata.resolutionX)||(i.resolutionX=t.metadata.resolutionX),o.D.isUndef(t.metadata.imageXResolution)||(i.resolutionX=t.metadata.imageXResolution),o.D.isUndef(t.metadata.resolutionY)||(i.resolutionY=t.metadata.resolutionY),o.D.isUndef(t.metadata.imageYResolution)||(i.resolutionY=t.metadata.imageYResolution)),"url"!=t.dataType&&"srcId"in t?(t&&t.src&&t.srcId&&((a=this.myViewer.getCustomDataByIndex(n))&&(a.src=t.src,a.srcId=t.srcId,o.D.isUndef(t.imgType)||(a.imgType=t.imgType),n={},a&&(n.customData=a,n.metadata=i,this._UpdateImageInner(r,n))),this.UpdateInfo(!1,!0)),r):("src"in t&&(e.imageUrl=t.src),"imageUrl"in t&&(e.imageUrl=t.imageUrl),this.UpdateImage(e,i))):(o.D.Errors.IndexOutOfRange(this._stwain),!1)}},{key:"_UpdateImageInner",value:function(e,t){this.mydvs.DataControl.updateSync(e,t)}},{key:"RemoveByIndex",value:function(e){var t=this;if(e<0||e>=t.GetHowManyImagesInBuffer())return o.D.Errors.IndexOutOfRange(t._stwain),!1;t.bShowImageEdit&&t._imageEditorInner&&1==t._imageEditorInner._IfChangedWithinTheEditor&&(t._imageEditorInner.iChangedIndex!=e?t._imageEditorInner.iChangedIndex>e&&t._imageEditorInner.iChangedIndex--:(t._imageEditorInner._IfChangedWithinTheEditor=!1,t._imageEditorInner.iChangedIndex=-1,t._imageEditorInner.OnCloseInstall())),e==this.GetCurrentIndex()&&t.clearSelectedAreas();var n=[];return n.push(e),(e=t.myViewer.removeSync(n))?t.UpdateInfo(!0):o.D.Errors.WebviewerError(t._stwain,t.mydvs.Error.errorMessage,t.mydvs.Error.errorCode),e}},{key:"RemoveAllImages",value:function(){var e,t=this;return t.bShowImageEdit&&t._imageEditorInner&&1==t._imageEditorInner._IfChangedWithinTheEditor&&(t._imageEditorInner._IfChangedWithinTheEditor=!1,t._imageEditorInner.iChangedIndex=-1,t._imageEditorInner.OnCloseInstall()),t.clearSelectedAreas(),(e=t.myViewer.removeAllSync())?(t.UpdateInfo(),t.bShowImageEdit&&t._imageEditorInner&&t._imageEditorInner.updateMode()):o.D.Errors.WebviewerError(t._stwain,t.mydvs.Error.errorMessage,t.mydvs.Error.errorCode),e}},{key:"SetCurrentIndex",value:function(e){return e<0||e>=this.GetHowManyImagesInBuffer()?(o.D.Errors.IndexOutOfRange(this._stwain),o.I.Lib.hideMask(),!1):!/^(\d+)$/.test(e)||e<0?(o.D.Errors.MobileServer_InvalidIndex(this._stwain),o.I.Lib.hideMask(),!1):((e=this.myViewer.setCurrentIndex(e))||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),this.UpdateInfo(!0,!0),e)}},{key:"OnlySetCurrentIndex",value:function(e){return e<0||e>=this.GetHowManyImagesInBuffer()?(o.D.Errors.IndexOutOfRange(this._stwain),!1):((e=this.myViewer.setCurrentIndex(e))||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),e)}},{key:"GetCurrentIndex",value:function(){var e=-1;return 0<this.GetHowManyImagesInBuffer()&&(e=this.myViewer.getCurrentIndex(),(o.D.isUndef(e)||e<0)&&o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode)),e}},{key:"SetSelectedindexes",value:function(e){return(e=this.myViewer.setSelectedIndexes(e))||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),e}},{key:"GetSelectedindexes",value:function(){return this.myViewer.getSelectedIndexes()}},{key:"GoToPage",value:function(e){return e<0||e>=this.GetHowManyImagesInBuffer()?(o.D.Errors.IndexOutOfRange(this._stwain),o.I.Lib.hideMask(),-1):!/^(\d+)$/.test(e)||e<0?(o.D.Errors.MobileServer_InvalidIndex(this._stwain),o.I.Lib.hideMask(),-1):((e=this.myViewer.gotoPage(e))<0&&o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),this.UpdateInfo(!0,!0),e)}},{key:"SetSelectedImageArea",value:function(e,t,n,r){var i=[];if(!this._NouiNotSupport("setSelectedAreas"))return!1;var a={};return a.left=e,a.top=t,a.width=n-e,a.height=r-t,i.push(a),(n=this.myViewer.setSelectedBoxes(i,!1))||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),n}},{key:"SetSelectionRectAspectRatio",value:function(e){return!!this._NouiNotSupport("selectionRectAspectRatio")&&(this.myViewer.selectionBoxAspectRatio=e,!0)}},{key:"GetSelectionRectAspectRatio",value:function(){return this._NouiNotSupport("selectionRectAspectRatio")?this.myViewer.selectionBoxAspectRatio:""}},{key:"ZoomIn",value:function(){var e;return(e=this.myViewer.zoomIn())||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),e}},{key:"ZoomOut",value:function(){var e;return(e=this.myViewer.zoomOut())||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),e}},{key:"SetZoom",value:function(e,t,n){var r=!1;return!!this._NouiNotSupport("zoom")&&((r=t&n?this.myViewer.zoomTo(e,t,n):this.myViewer.zoom=e)||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),r)}},{key:"GetZoom",value:function(){return this._NouiNotSupport("zoom")?this.myViewer.zoom:""}},{key:"SetFitType",value:function(e){var t="window";if(!this._NouiNotSupport("fitType"))return!1;if(!o.D.isUndefined(e)){if("width"!=e&&"height"!=e&&"window"!=e)return o.D.Errors.InvalidValue(this._stwain),!1;t=e}return this.myViewer.fitType=t,!0}},{key:"GetMouseShape",value:function(){var e;switch(this.GetCursor()){case"default":e=o.I.DWT.EnumDWT_MouseShape.Default;break;case"pointer":e=o.I.DWT.EnumDWT_MouseShape.Hand;break;case"crosshair":e=o.I.DWT.EnumDWT_MouseShape.Crosshair;break;case"zoom-in":e=o.I.DWT.EnumDWT_MouseShape.Zoom;break;default:e=o.I.DWT.EnumDWT_MouseShape.Crosshair}return e}},{key:"SetMouseShape",value:function(e){var t;switch(e){case o.I.DWT.EnumDWT_MouseShape.Default:t="default";break;case o.I.DWT.EnumDWT_MouseShape.Hand:t="pointer";break;case o.I.DWT.EnumDWT_MouseShape.Crosshair:t="crosshair";break;case o.I.DWT.EnumDWT_MouseShape.Zoom:t="zoom-in";break;default:t="crosshair"}return this.SetCursor(t),!0}},{key:"SetImageMargin",value:function(e){return this.SetPageMargin(e)}},{key:"GetImageMargin",value:function(){return this.GetPageMargin()}},{key:"SetSelectionImageBorderColor",value:function(e){return o.I.Lib.isNumber(e)&&(e=o.I.Lib.getColor(e)),-1==r()(e).call(e,"1px solid")&&(e="1px solid "+e),this.SetSelectedPageBorder(e)}},{key:"GetSelectedPageBorder",value:function(){return this._NouiNotSupport("selectedPageBorder")?this.myViewer.selectedPageBorder:""}},{key:"SetSelectedPageBorder",value:function(e){return!!this._NouiNotSupport("selectedPageBorder")&&(this.myViewer.selectedPageBorder=e,this._thumbnailViewer&&this.SetThumSelectedPageBorder(e),!0)}},{key:"GetSelectedPageBackground",value:function(){return this._NouiNotSupport("selectedPageBackground")?this.myViewer.selectedPageBackground:""}},{key:"SetSelectedPageBackgroundInner",value:function(e){return this.myViewer.selectedPageBackground=e,!0}},{key:"SetSelectedPageBackground",value:function(e){return!!this._NouiNotSupport("selectedPageBackground")&&(this.SetSelectedPageBackgroundInner(e),this._thumbnailViewer&&this.SetThumSelectedPageBackground(e),!0)}},{key:"GetShowPageNumber",value:function(){return this._NouiNotSupport("showPageNumber")?"visible"==this.myViewer.pageNumber.visibility:""}},{key:"SetShowPageNumberInner",value:function(e){var t={visibility:"hidden"};return e&&(t.visibility="visible"),this.UpdatePageNumberStyle(t),!0}},{key:"SetShowPageNumber",value:function(e){if(!this._NouiNotSupport("showPageNumber"))return!1;if(!o.D.isBoolean(e))return o.D.Errors.InvalidValue(this._stwain),!1;var t={visibility:"hidden"};return e&&(t.visibility="visible"),this.UpdatePageNumberStyle(t),this._thumbnailViewer&&this.UpdateThumPageNumberStyle(t),!0}},{key:"UpdatePageNumberStyle",value:function(e){return!!this._NouiNotSupport("updatePageNumberStyle")&&(this.myViewer.pageNumber=e,this._thumbnailViewer&&this.UpdateThumPageNumberStyle(e),!0)}},{key:"GetPageNumberStyle",value:function(){return!!this._NouiNotSupport("getPageNumberStyle")&&this.myViewer.pageNumber}},{key:"GetAutoChangeIndex",value:function(){return this._NouiNotSupport("autoChangeIndex")?this.myViewer.autoChangeIndex:""}},{key:"SetAutoChangeIndex",value:function(e){return!!this._NouiNotSupport("autoChangeIndex")&&(o.D.isBoolean(e)?(this.myViewer.autoChangeIndex=e,!0):(o.D.Errors.InvalidValue(this._stwain),!1))}},{key:"GetShowCheckbox",value:function(){return this._NouiNotSupport("checkbox")?"visible"==this.myViewer.checkbox.visibility:0}},{key:"SetShowCheckbox",value:function(e){if(!this._NouiNotSupport("checkbox"))return!1;var t={visibility:"hidden"};return e&&(t.visibility="visible"),"visible"==(this.myViewer.checkbox=t).visibility?this.SetMultiSelectMode(o.I.DWT.EnumDWT_SelectionMode.Multiple):this.SetMultiSelectMode(o.I.DWT.EnumDWT_SelectionMode.Single),this._thumbnailViewer&&(this.UpdateThumCheckboxStyle(t),this.SetThumMultiSelectMode("visible"==t.visibility?o.I.DWT.EnumDWT_SelectionMode.Multiple:o.I.DWT.EnumDWT_SelectionMode.Single)),!0}},{key:"GetCheckboxStyle",value:function(){return!!this._NouiNotSupport("getCheckboxStyle")&&this.myViewer.checkbox}},{key:"UpdateCheckboxStyle",value:function(e){return!!this._NouiNotSupport("updateCheckboxStyle")&&(this.myViewer.checkbox=e,this._thumbnailViewer&&this.UpdateThumCheckboxStyle(e),!0)}},{key:"GetMultiSelectMode",value:function(){return this._NouiNotSupport("multiSelectMode")?this.myViewer.multiSelectMode?o.I.DWT.EnumDWT_SelectionMode.Multiple:o.I.DWT.EnumDWT_SelectionMode.Single:0}},{key:"SetMultiSelectMode",value:function(e){return!!this._NouiNotSupport("multiSelectMode")&&(o.D.isNumber(e)?(this.myViewer.multiSelectMode=e==o.I.DWT.EnumDWT_SelectionMode.Multiple,this._thumbnailViewer&&this.SetThumMultiSelectMode(e),!0):(o.D.Errors.InvalidValue(this._stwain),!1))}},{key:"SetHoverPageBackground",value:function(e){return this.myViewer.hoverPageBackground=e,!0}},{key:"SetBackground",value:function(e){return!!this._NouiNotSupport("background")&&(o.I.Lib.isNumber(e)&&(e=o.I.Lib.getColor(e)),this.myViewer.canvasBackground=e,this._thumbnailViewer&&this.SetThumBackground(e),!0)}},{key:"GetBackground",value:function(){return this._NouiNotSupport("background")?this.myViewer.canvasBackground:""}},{key:"SetViewerBorder",value:function(e){return this.SetBorder("1px solid"+e)}},{key:"SetWidth",value:function(e){return!!this._NouiNotSupport("width")&&(!/^((\d+em)|(\d+px)|(\d+%)|(\d+))$/.test(e)||e<=0?(o.D.Errors.MobileServer_InvalidWidth(this._stwain),!1):(this.myViewer.width=e,!0))}},{key:"GetWidth",value:function(){return this._NouiNotSupport("width")?this.myViewer.width:""}},{key:"SetWidthInner",value:function(e,t){return!t&&o.D.isString(e)&&0<=r()(e).call(e,"%")?(t=o.D.one("#"+this._stwain._containerID),this.myViewer.width=i()(o.D.css(t,"width")*i()(e)/100)):this.myViewer.width=e,!0}},{key:"GetHeight",value:function(){return this._NouiNotSupport("height")?this.myViewer.height:""}},{key:"SetHeight",value:function(e){return!!this._NouiNotSupport("height")&&(!/^((\d+em)|(\d+px)|(\d+%)|(\d+))$/.test(e)||e<=0?(o.D.Errors.MobileServer_InvalidHeight(this._stwain),!1):(this.myViewer.height=e,!0))}},{key:"GetIdPostfix",value:function(){return this._NouiNotSupport("idPostfix")?this.myViewer.postfix:""}},{key:"SetHeightInner",value:function(e,t){return!t&&o.D.isString(e)&&0<=r()(e).call(e,"%")?(t=o.D.one("#"+this._stwain._containerID),this.myViewer.height=i()(o.D.css(t,"height")*i()(e)/100)):this.myViewer.height=e,!0}},{key:"SwitchImage",value:function(e,t){return e<0||e>=this.GetHowManyImagesInBuffer()||t<0||t>=this.GetHowManyImagesInBuffer()?(o.D.Errors.IndexOutOfRange(this._stwain),!1):((e=this.myViewer.switchPage(e,t))||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),e)}},{key:"MoveImage",value:function(e,t){return e<0||e>=this.GetHowManyImagesInBuffer()||t<0||t>=this.GetHowManyImagesInBuffer()?(o.D.Errors.IndexOutOfRange(this._stwain),!1):((e=this.myViewer.movePage(e,t))||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),e)}},{key:"SetIfSinglePageMode",value:function(e){return!!this._NouiNotSupport("singlePageMode")&&(this.myViewer.displayMode=e?"single":"continuous",!0)}},{key:"GetIfSinglePageMode",value:function(){return!!this._NouiNotSupport("singlePageMode")&&"continuous"!=this.myViewer.displayMode}},{key:"SetAcceptDrop",value:function(e){return!!this._NouiNotSupport("acceptDrop")&&(o.D.isBoolean(e)?(this.acceptDrop=e,!0):(o.D.Errors.InvalidValue(this._stwain),!1))}},{key:"GetAcceptDrop",value:function(){return this._NouiNotSupport("acceptDrop")?this.acceptDrop:""}},{key:"SetAllowSlide",value:function(e){return!!this._NouiNotSupport("allowSlide")&&(o.D.isBoolean(e)?(this.myViewer.allowSlide=e,!0):(o.D.Errors.InvalidValue(this._stwain),!1))}},{key:"GetAllowSlide",value:function(){return this._NouiNotSupport("allowSlide")?this.myViewer.allowSlide:""}},{key:"SetViewMode",value:function(e,t){var n=this,r=!1,i="vertical";return!!n._NouiNotSupport("setViewMode")&&(o.D.isNumber(e)&&o.D.isNumber(t)?(n._thumbnailViewer&&n._thumbnailViewer.hide(),n.clearSelectedAreas(),-1==e&&-1==t?(n.SetIfSinglePageMode(!0),t=0-t,e=0-e,r=!0):(t<0&&(i="horizontal",t=0-t),e<0&&(e=0-e),n.myViewer.scrollDirection=i,(r=n.myViewer.setViewMode(e,t))||o.D.Errors.WebviewerError(n._stwain,n.mydvs.Error.errorMessage,n.mydvs.Error.errorCode),n.SetIfSinglePageMode(!1),"zoom-in"==n.GetCursor()&&n.SetCursor("crosshair")),r):(o.D.Errors.InvalidValue(n._stwain),!1))}},{key:"RemoveImageTag",value:function(e){var t=this;return e<0||e>=t.GetHowManyImagesInBuffer()?(o.D.Errors.IndexOutOfRange(t._stwain),!1):(e=t.GetUidByIndex(e))&&""!=e&&-1!=e?((e=t.mydvs.Tag.removePageTag(e))||o.D.Errors.WebviewerError(t._stwain,t.mydvs.Error.errorMessage,t.mydvs.Error.errorCode),e):(o.D.Errors.WebviewerError(t._stwain,t.mydvs.Error.errorMessage,t.mydvs.Error.errorCode),!1)}},{key:"FilterImagesByTag",value:function(e,t,n){var r,i=this;return o.D.isUndefined(e)||null==e||0==e.length?(i._currentTag="",0==(r=i.GetCurrentFileName()).length&&(r=T),i.mydvs.File.openFile(r,i.myViewer.uid)?(i.mydvs.Tag.setDefaultTag(""),o.D.isFunction(t)&&t()):(o.D.Errors.WebviewerError(i._stwain,i.mydvs.Error.errorMessage,i.mydvs.Error.errorCode),o.D.isFunction(n)&&n(i.mydvs.Error.errorCode,i.mydvs.Error.errorMessage))):(i._currentTag=e,i.mydvs.Tag.openTag(e,i.myViewer.uid)?o.D.isFunction(t)&&t():(o.D.Errors.WebviewerError(i._stwain,i.mydvs.Error.errorMessage,i.mydvs.Error.errorCode),o.D.isFunction(n)&&n(i.mydvs.Error.errorCode,i.mydvs.Error.errorMessage))),!0}},{key:"ClearFilter",value:function(){this._currentTag="";var e=this.GetCurrentFileName();return 0==e.length&&(e=T),(e=this.mydvs.File.openFile(e,this.myViewer.uid))||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),e}},{key:"GetServerIdList",value:function(){var e,t,n=[];if(t=this.myViewer.getCurrentPageUids())for(var r=0;r<t.length;r++)(e=t[r])&&(e=this.myViewer.getCustomDataByUid(e))&&n.push(e.imageId);else o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode);return n}},{key:"GetTagContents",value:function(e){var t;return(t=e&&0<e.length?this.mydvs.Tag.getTagContents(e):this.myViewer.getCurrentPageUids())||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),t}},{key:"SetDefaultTag",value:function(e){return this._currentTag=e,this.mydvs.Tag.addTag(e),(e=this.mydvs.Tag.setDefaultTag(e))||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),e}},{key:"AddImageTag",value:function(e,t){var n;this.mydvs.Tag.addTag(t);for(var r=0;r<e.length;r++)0<=(n=e[r])&&(n=this.GetUidByIndex(n))&&""!=n&&-1!=n&&this.mydvs.Tag.addPageTag(n,t);return!0}},{key:"GetCurrentTag",value:function(){return this._currentTag}},{key:"RenameTag",value:function(e,t){return this._currentTag=t,(e=this.mydvs.Tag.renameTag(e,t))?this.mydvs.Tag.setDefaultTag(t):o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),e}},{key:"RemoveTag",value:function(e,t){var n=this,r=!1,i=!1,a=n.mydvs.Tag.getCurrentTag();if(a&&(i=a.name==e),o.D.isUndefined(t))r=n.mydvs.Tag.removeTag(e),i&&n.ClearFilter();else{if(!o.D.isArray(t))return o.D.Errors.IndicesNotArray(n),!1;if(!n._stwain._checkIndices(t))return!1;var s=[];o.D.each(t,(function(e){-1!=(e=n.GetUidByIndex(e))&&s.push(e)})),o.D.each(s,(function(t){if(!(r=n.mydvs.Tag.removePageTag(t,e)))return!1}))}return r||o.D.Errors.WebviewerError(n._stwain,n.mydvs.Error.errorMessage,n.mydvs.Error.errorCode),r}},{key:"GetTagList",value:function(){var e,t,n,r=this,i=[];return(n=r.mydvs.Tag.getTagList())?o.D.each(n,(function(n){if(e=[],t={},n.uids)for(var o=0;o<n.uids.length;o++){var a=n.uids[o];a&&(t=r.myViewer.getCustomDataByUid(a))&&e.push(r._stwain.objImageIndexManager.convertServerIdToGuid(t.imageId))}n.imageIds=e,delete n.uids,i.push(n)})):i=[],i}},{key:"GetTagListByIndex",value:function(e){var t=[],n=this.GetUidByIndex(e);return n&&((e=this.mydvs.Tag.getTagList())?o.D.each(e,(function(e){if(e.uids)for(var r=0;r<e.uids.length;r++){var i=e.uids[r];i&&i==n&&t.push(e.name)}})):t=[]),t}},{key:"CreateFile",value:function(e){var t=!1;return e&&(this.mydvs.File.createFile(e)?80032==this.mydvs.Error.errorCode?o.D.Errors.FileExist(this._stwain):t=!0:o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode)),t}},{key:"OpenFile",value:function(e){var t=this,n=!1;return t.mydvs.File.openFile(e,t.myViewer.uid)?(n=!0,t.currentFileName=e,t._stwain.Template&&t._stwain.Template._documentTemplate&&t._stwain.Template._documentTemplate.setTemplateTitle(t.currentFileName)):80006==t.mydvs.Error.errorCode?o.D.Errors.FileNotExist(t._stwain):o.D.Errors.WebviewerError(t._stwain,t.mydvs.Error.errorMessage,t.mydvs.Error.errorCode),n}},{key:"GetCurrentFileName",value:function(){var e,t=this,n="";return(e=t.mydvs.File.getCurrentFileList())&&o.D.each(e,(function(e){e.name==t.currentFileName&&(n=t.currentFileName)})),n}},{key:"GetDefaultFileName",value:function(){return T}},{key:"RemoveFile",value:function(e){var t,n=this;return(t=n.mydvs.File.removeFile(e))?n.currentFileName==e&&(n.currentFileName=T,n.OpenFile(n.currentFileName)):80006==n.mydvs.Error.errorCode?o.D.Errors.FileNotExist(n._stwain):o.D.Errors.WebviewerError(n._stwain,n.mydvs.Error.errorMessage,n.mydvs.Error.errorCode),t}},{key:"RenameFile",value:function(e,t){var n,r=this;return(n=r.mydvs.File.renameFile(e,t))?r.currentFileName==e&&(r.currentFileName=t,r._stwain.Template&&r._stwain.Template._documentTemplate&&r._stwain.Template._documentTemplate.setTemplateTitle("")):80006==r.mydvs.Error.errorCode?o.D.Errors.FileNotExist(r._stwain):80032==r.mydvs.Error.errorCode?o.D.Errors.FileExist(r._stwain):o.D.Errors.WebviewerError(r._stwain,r.mydvs.Error.errorMessage,r.mydvs.Error.errorCode),n}},{key:"GetFileInfoList",value:function(){var e,t,n,r,i=this,a=[];return(r=i.mydvs.File.getCurrentFileList())?o.D.each(r,(function(r){if(!i.IsInternalFile(r.name)){if(e=[],t={},n={},r.chs)for(var o=0;o<r.chs.length;o++){var s=r.chs[o];s&&(t=i.myViewer.getCustomDataByUid(s))&&e.push(i._stwain.objImageIndexManager.convertServerIdToGuid(t.imageId))}n.imageIds=e,n.name=r.name,a.push(n)}})):a=[],a}},{key:"GetImageIdsByFileName",value:function(e){var t,n,r=this,i=[];return(n=r.mydvs.File.getCurrentFileList())?o.D.each(n,(function(n){if(e==n.name){if(t={},n.chs)for(var o=0;o<n.chs.length;o++){var a=n.chs[o];a&&(t=r.myViewer.getCustomDataByUid(a))&&i.push(t.imageId)}return!1}})):i=[],i}},{key:"ifFileNameExist",value:function(e){var t,n=!1;return(t=this.mydvs.File.getCurrentFileList())&&(0==t.length?e==T&&(n=!0):(o.D.each(t,(function(t){if(t.name==e)return n=!0})),0==n&&e==T&&(n=!0))),n}},{key:"OverlayRectangle",value:function(e,t,n,r,i,a,s){return e<0||e>=this.GetHowManyImagesInBuffer()?(o.D.Errors.IndexOutOfRange(this._stwain),!1):(o.D.isNumber(a)&&(a=o.D.getColor(a)),(e=this.myViewer.overlayRectangle(e,t,n,r-t,i-n,a,s))||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),e)}},{key:"SetOperationMode",value:function(e){this.myViewer.operationMode=e}},{key:"GetIfShowVideoContainer",value:function(){return this.myViewer.showVideoContainer}},{key:"ShowVideoContainer",value:function(e){return this.myViewer.showVideoContainer==e||(this._thumbnailViewer&&(e?(this.OldShowThumbnail=this.myThumbnailViewer.showThumbnail,this.myThumbnailViewer.showThumbnail=!1):this.myThumbnailViewer.showThumbnail=this.OldShowThumbnail),this.myViewer.showVideoContainer=e),!0}},{key:"UpdateVideoContainer",value:function(e){return(e=this.myViewer.updateVideoContainer(e))||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),e}},{key:"GetImageData",value:function(e){return this.mydvs.DataControl.getData(e)}},{key:"UpdateImageData",value:function(e,t){return this.mydvs.DataControl.updateData(e,t)}},{key:"GetMinPageData",value:function(e){return this._imageEditorInner?this._imageEditorInner.myImageEditor.getMinPageData():NaN}},{key:"SetLogLevel",value:function(e){this.mydvs.Log.setLogLevel(e)}},{key:"SetLogFunc",value:function(e){this.mydvs.Log.setLogFunc(e)}},{key:"SetThumLocation",value:function(e){var t=this;if(!t._NouiNotSupport("ThumbnailViewer.location"))return!1;if(t.myThumbnailViewer){switch(e){case"left":t.myThumbnailViewer.location="horizontal",t.myThumbnailViewer.sequence=-1;break;case"right":t.myThumbnailViewer.location="horizontal",t.myThumbnailViewer.sequence=1;break;case"top":t.myThumbnailViewer.location="vertical",t.myThumbnailViewer.sequence=-1;break;case"bottom":t.myThumbnailViewer.location="vertical",t.myThumbnailViewer.sequence=1;break;default:t.myThumbnailViewer.location="horizontal",t.myThumbnailViewer.sequence=-1}return!0}return t.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(t._stwain):o.D.Errors.ThumbnailViewerNotExist(t._stwain),!1}},{key:"GetThumLocation",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.location")&&(this.myThumbnailViewer?"vertical"==this.myThumbnailViewer.location?0<this.myThumbnailViewer.sequence?"bottom":"top":0<this.myThumbnailViewer.sequence?"right":"left":(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),""))}},{key:"SetThumSize",value:function(e){return!(!this._NouiNotSupport("ThumbnailViewer.size")||(!/^((\d+em)|(\d+px)|(\d+%)|(\d+))$/.test(e)||e<0?(o.D.Errors.InvalidValue(this._stwain),1):this.myThumbnailViewer?(this.myThumbnailViewer.size=e,0):(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),1)))}},{key:"GetThumSize",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.size")&&(this.myThumbnailViewer?this.myThumbnailViewer.size:(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),0))}},{key:"SetThumScrollDirection",value:function(e){return!!this._NouiNotSupport("ThumbnailViewer.scrollDirection")&&("horizontal"!=e&&(e="vertical"),this.myThumbnailViewer?(this.myThumbnailViewer.scrollDirection=e,!0):(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),!1))}},{key:"GetThumScrollDirection",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.scrollDirection")&&(this.myThumbnailViewer?this.myThumbnailViewer.scrollDirection:(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),""))}},{key:"SetThumShowPageNumber",value:function(e){if(!this._NouiNotSupport("ThumbnailViewer.showPageNumber"))return!1;if(!o.D.isBoolean(e))return o.D.Errors.InvalidValue(this._stwain),!1;var t={visibility:"hidden"};return e&&(t.visibility="visible"),this.myThumbnailViewer?(this.UpdateThumPageNumberStyle(t),!0):(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),!1)}},{key:"GetThumShowPageNumber",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.showPageNumber")&&(this.myThumbnailViewer?"visible"==this.myThumbnailViewer.pageNumber.visibility:(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),-1))}},{key:"UpdateThumPageNumberStyle",value:function(e){return!!this._NouiNotSupport("ThumbnailViewer.pageNumber")&&(this.myThumbnailViewer?(this.myThumbnailViewer.pageNumber=e,!0):(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),!1))}},{key:"SetThumShowCheckbox",value:function(e){var t;return!(!this._NouiNotSupport("ThumbnailViewer.showCheckbox")||(o.D.isBoolean(e)?this.myThumbnailViewer?(t={visibility:"hidden"},e&&(t.visibility="visible"),this.UpdateThumCheckboxStyle(t),this.SetThumMultiSelectMode("visible"==t.visibility?o.I.DWT.EnumDWT_SelectionMode.Multiple:o.I.DWT.EnumDWT_SelectionMode.Single),0):(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),1):(o.D.Errors.InvalidValue(this._stwain),1)))}},{key:"UpdateThumCheckboxStyle",value:function(e){return!!this._NouiNotSupport("ThumbnailViewer.checkbox")&&(this.myThumbnailViewer?(this.myThumbnailViewer.checkbox=e,!0):(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),!1))}},{key:"GetThumShowCheckbox",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.showCheckbox")&&(this.myThumbnailViewer?"visible"==this.myThumbnailViewer.checkbox.visibility:(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),-1))}},{key:"GetThumMultiSelectMode",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.multiSelectMode")&&(this.myThumbnailViewer?this.myThumbnailViewer.multiSelectMode?o.I.DWT.EnumDWT_SelectionMode.Multiple:o.I.DWT.EnumDWT_SelectionMode.Single:(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),-1))}},{key:"SetThumMultiSelectMode",value:function(e){return!(!this._NouiNotSupport("ThumbnailViewer.multiSelectMode")||(o.D.isNumber(e)?this.myThumbnailViewer?(this.myThumbnailViewer.multiSelectMode=e==o.I.DWT.EnumDWT_SelectionMode.Multiple,0):(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),1):(o.D.Errors.InvalidValue(this._stwain),1)))}},{key:"SetThumMargin",value:function(e){return!(!this._NouiNotSupport("ThumbnailViewer.margin")||(!/^((\d+em)|(\d+px)|(\d+%)|(\d+))$/.test(e)||e<0?(o.D.Errors.InvalidValue(this._stwain),1):this.myThumbnailViewer?(this.myThumbnailViewer.pageMargin=e,0):(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),1)))}},{key:"GetThumMargin",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.margin")&&(this.myThumbnailViewer?this.myThumbnailViewer.columns==this.myThumbnailViewer.rows&&1==this.myThumbnailViewer.rows?0:this.myThumbnailViewer.pageMargin:(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),0))}},{key:"SetThumBorder",value:function(e){return!!this._NouiNotSupport("ThumbnailViewer.border")&&(this.myThumbnailViewer?(this.myThumbnailViewer.border=e,!0):(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),!1))}},{key:"GetThumBorder",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.border")&&(this.myThumbnailViewer?this.myThumbnailViewer.border:(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),""))}},{key:"SetThumBackground",value:function(e){return!!this._NouiNotSupport("ThumbnailViewer.background")&&(this.myThumbnailViewer?(this.myThumbnailViewer.background=e,!0):(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),!1))}},{key:"GetThumBackground",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.background")&&(this.myThumbnailViewer?this.myThumbnailViewer.background:(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),""))}},{key:"SetThumPageBackground",value:function(e){return!!this._NouiNotSupport("ThumbnailViewer.pageBackground")&&(this.myThumbnailViewer?(this.myThumbnailViewer.pageBackground=e,!0):(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),!1))}},{key:"GetThumPageBackground",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.pageBackground")&&(this.myThumbnailViewer?this.myThumbnailViewer.pageBackground:(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),""))}},{key:"SetThumPageBorder",value:function(e){return!!this._NouiNotSupport("ThumbnailViewer.pageBorder")&&(this.myThumbnailViewer?(this.myThumbnailViewer.pageBorder=e,!0):(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),!1))}},{key:"GetThumPageBorder",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.pageBorder")&&(this.myThumbnailViewer?this.myThumbnailViewer.pageBorder:(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),""))}},{key:"SetThumHoverBackground",value:function(e){return!!this._NouiNotSupport("ThumbnailViewer.hoverPageBackground")&&(this.myThumbnailViewer?(this.myThumbnailViewer.hoverPageBackground=e,!0):(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),""))}},{key:"GetThumHoverBackground",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.hoverPageBackground")&&(this.myThumbnailViewer?this.myThumbnailViewer.hoverPageBackground:(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),""))}},{key:"SetThumHoverBorder",value:function(e){return!!this._NouiNotSupport("ThumbnailViewer.hoverPageBorder")&&(this.myThumbnailViewer?(this.myThumbnailViewer.hoverPageBorder=e,!0):(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),!1))}},{key:"GetThumHoverBorder",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.hoverPageBorder")&&(this.myThumbnailViewer?this.myThumbnailViewer.hoverPageBorder:(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),""))}},{key:"SetThumPlaceholderBackground",value:function(e){return!!this._NouiNotSupport("ThumbnailViewer.placeholderBackground")&&(this.myThumbnailViewer?(this.myThumbnailViewer.placeholderBackground=e,!0):(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),!1))}},{key:"GetThumPlaceholderBackground",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.placeholderBackground")&&(this.myThumbnailViewer?this.myThumbnailViewer.placeholderBackground:(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),""))}},{key:"SetThumSelectedPageBorder",value:function(e){return!!this._NouiNotSupport("ThumbnailViewer.selectedPageBorder")&&(this.myThumbnailViewer?(this.myThumbnailViewer.selectedPageBorder=e,!0):(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),!1))}},{key:"GetThumSelectedPageBorder",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.selectedPageBorder")&&(this.myThumbnailViewer?this.myThumbnailViewer.selectedPageBorder:(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),""))}},{key:"SetThumSelectedPageBackground",value:function(e){return!!this._NouiNotSupport("ThumbnailViewer.selectedPageBackground")&&(this.myThumbnailViewer?(this.myThumbnailViewer.selectedPageBackground=e,!0):(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),!1))}},{key:"GetThumSelectedPageBackground",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.selectedPageBackground")&&(this.myThumbnailViewer?this.myThumbnailViewer.selectedPageBackground:(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),""))}},{key:"SetThumAllowKeyboardControl",value:function(e){return!(!this._NouiNotSupport("ThumbnailViewer.allowKeyboardControl")||(o.D.isBoolean(e)?this.myThumbnailViewer?(this.myThumbnailViewer.allowKeyboardControl=e,0):(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),1):(o.D.Errors.InvalidValue(this._stwain),1)))}},{key:"GetThumAllowKeyboardControl",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.allowKeyboardControl")&&(this.myThumbnailViewer?this.myThumbnailViewer.allowKeyboardControl:(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),!1))}},{key:"SetThumAllowDrag",value:function(e){return!(!this._NouiNotSupport("ThumbnailViewer.allowDrag")||(o.D.isBoolean(e)?this.myThumbnailViewer?(this.myThumbnailViewer.allowPageDragging=e,0):(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),1):(o.D.Errors.InvalidValue(this._stwain),1)))}},{key:"GetThumAllowDrag",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.allowPageDragging")&&(this.myThumbnailViewer?this.myThumbnailViewer.allowPageDragging:(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),!1))}},{key:"SetThumAllowResize",value:function(e){return!(!this._NouiNotSupport("ThumbnailViewer.allowResizing")||(o.D.isBoolean(e)?this.myThumbnailViewer?(this.myThumbnailViewer.allowResizing=e,0):(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),1):(o.D.Errors.InvalidValue(this._stwain),1)))}},{key:"GetThumAllowResize",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.allowResizing")&&(this.myThumbnailViewer?this.myThumbnailViewer.allowResizing:(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),!1))}},{key:"SetThumAutoChangeIndex",value:function(e){return!!this._NouiNotSupport("ThumbnailViewer.autoChangeIndex")&&(this.myThumbnailViewer?(this.myThumbnailViewer.autoChangeIndex=e,!0):(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),!1))}},{key:"GetThumAutoChangeIndex",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.autoChangeIndex")&&(this.myThumbnailViewer?this.myThumbnailViewer.autoChangeIndex:(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),""))}},{key:"render",value:function(){return!!this._NouiNotSupport("render")&&this.myViewer.render()}},{key:"getUISettings",value:function(){if(!this._NouiNotSupport("getUISettings"))return!1;var e=o.I.Lib.clone(this.myViewer.uiConfig);return delete e.tag,delete e.tree,delete e.cropStyle,delete e.thumbnail,e}},{key:"resetUISettings",value:function(){return this.resetUISettingsInner(!0)?this.getUISettings():{}}},{key:"resetUISettingsInner",value:function(e,t,n){var r=this;if(!r._NouiNotSupport("resetUISetting"))return!1;var i=fe;return e?(i.width=r.initWidth,i.height=r.initHeight):(i.width=o.D.isUndefined(t)?r.initWidth:t,i.height=o.D.isUndefined(n)?r.initHeight:n),e=r.myViewer.showViewer,(t=r.myViewer.updateUISetting(i))?(e||r.hide(),r.SetFitType("window"),r.SetIfSinglePageMode(!1),r._stwain._isPC()?r.SetOperationMode(1):r.SetOperationMode(0),r.OnlySetCurrentIndex(r.GetCurrentIndex())):o.D.Errors.WebviewerError(r._stwain,r.mydvs.Error.errorMessage,r.mydvs.Error.errorCode),t}},{key:"updateUISettings",value:function(e){var t=this,n={};if(!t._NouiNotSupport("updateUISettings"))return!1;var r=t.myViewer.showViewer;return t.myViewer.updateUISetting(e)?(r||t.hide(),"crosshair"==(n=t.getUISettings()).canvasConfig.canvasMouseShape?t.SetOperationMode(1):t.SetOperationMode(0),t._stwain.Template&&t._stwain.Template._documentTemplate&&(t._stwain.Template._documentTemplate.initView(),0<t.GetFileInfoList().length&&t._stwain.Template._documentTemplate.setTemplateTitle(t.currentFileName))):o.D.Errors.WebviewerError(t._stwain,t.mydvs.Error.errorMessage,t.mydvs.Error.errorCode),n}},{key:"createDocumentCameraManager",value:function(){if(!o.I.CameraModel)return o.D.Errors.CameraRequired(this._stwain),!1;if(!this.myccvs){this.myccvs=new o.I.CameraModel;try{this.myccvs&&this.bindCallback(this,this.myccvs)}catch(t){}}}},{key:"createDocumentEditManager",value:function(){if(!o.I.DocumentEditManager)return o.D.Errors.CameraRequired(this._stwain),!1;if(!this.mydocEditManager){this.mydocEditManager=new o.I.DocumentEditManager;try{this.mydocEditManager&&this.bindCallback(this,this.mydocEditManager)}catch(t){}}}},{key:"notBindCameraForCameraManager",value:function(){return!this.myccvs||this.myccvs.notBindCamera()}},{key:"bindCameraForCameraManager",value:function(){var e=!0;return o.I.CameraModel?(this.myccvs||this.createDocumentCameraManager(),(e=this.myccvs.notBindCamera()?this.myccvs.bindCamera(o.I.ViewUi,this.mydvs):e)?e:void o.D.Errors.WebviewerError(this._stwain,this.myccvs.Error.errorMessage,this.myccvs.Error.errorCode)):(o.D.Errors.CameraRequired(this._stwain),!1)}},{key:"notBindCameraForDocumentEditManager",value:function(){return!this.mydocEditManager||this.mydocEditManager.notBindCamera()}},{key:"bindCameraForDocumentEditManager",value:function(){var e=!0;return o.I.DocumentEditManager?(this.mydocEditManager||this.createDocumentEditManager(),(e=this.mydocEditManager.notBindCamera()?this.mydocEditManager.bindCamera(o.I.ViewUi,this.mydvs):e)?e:void o.D.Errors.WebviewerError(this._stwain,this.mydocEditManager.Error.errorMessage,this.mydocEditManager.Error.errorCode)):(o.D.Errors.CameraRequired(this._stwain),!1)}},{key:"bindCallback",value:function(e,t){var n;t&&(n=o.D.html5.STwain,t.bindLicenseCallback&&t.bindLicenseCallback((function(){return e._stwain._checkWebcamWasmLicense()})),t.bindSavePhotoCallback&&t.bindSavePhotoCallback((function(t){return e._stwain._saveImageCallback(t)})),t.bindInsertPhotoCallback&&t.bindInsertPhotoCallback((function(t,n,r){return e._stwain._insertImageCallback(t,n,r)})),t.bindRemovePhotoCallback&&t.bindRemovePhotoCallback((function(t,n){e._stwain._innerRemoveImage(t,n)})),t.bindAreaDetectFunction&&t.bindAreaDetectFunction(n._areaDetectCallback),t.bindPerspectiveFunction&&t.bindPerspectiveFunction(n._perspectiveCallback),t.bindFilterHandleList&&t.bindFilterHandleList([{label:"grayscale",handler:n._convertToGrayScaleFilterCallback},{label:"blackAndWhite",handler:n._convertToBWScaleFilterCallback},{label:"saveToner",handler:n._saveTonerFilterCallback},{label:"clean",handler:n._cleanFilterCallback},{label:"brightening",handler:n._brightenFilterCallback}]),t.bindFreeHandle&&t.bindFreeHandle(n._freeCallback))}},{key:"showVideo",value:function(e,t,n,r){return!!this._NouiNotSupport("showVideo")&&(e={scannerViewer:{devicedId:e,fullScreen:r,enableBorderDetection:!0,resolution:{visibility:"hidden"},autoScan:{visibility:"hidden"},autoDetect:{visibility:"visible",enableAutoDetect:!1},continuousScan:!1,switchCamera:{visibility:"hidden"},loadLocalFile:{visibility:"hidden"}},documentEditorSettings:{defaultViewerName:"CropViewer",insert:{visibility:"hidden"},remove:{visibility:"hidden"},rotateLeft:{visibility:"hidden"},filter:{visibility:"hidden",valueList:[]},crop:{visibility:"hidden"},cropViewer:{visibility:"visible",rotateLeft:{visibility:"hidden"},rotateRight:{visibility:"hidden"},autoDetectBorder:{visibility:"hidden"}}}},t&&(e.scannerViewer.resolution.valueList=[],e.scannerViewer.resolution.valueList.push({label:"resolution",value:t}),e.scannerViewer.resolution.defaultValue=t),n&&"document"==n?e.scannerViewer.enableBorderDetection=!0:(e.scannerViewer.enableBorderDetection=!1,e.scannerViewer.autoDetect.visibility="hidden",e.documentEditorSettings.cropViewer.visibility="hidden"),this.myccvs||this.createDocumentCameraManager(),this.notBindCameraForCameraManager()&&this.bindCameraForCameraManager(),(r=this.showVideoEx(e))||o.D.Errors.WebviewerError(this._stwain,this.myccvs.Error.errorMessage,this.myccvs.Error.errorCode),r)}},{key:"getDefaultFilterValueList",value:function(e){return m()(defaultDocumentEditorSettings).valueList}},{key:"setElementForDocumentConfiguration",value:function(e){var t,n,r=o.I.Lib.clone(e);return e&&e.scannerViewer&&e.scannerViewer.element&&((n=e.scannerViewer.element&&"DIV"==e.scannerViewer.element.nodeName?e.scannerViewer.element:document.getElementById(e.scannerViewer.element)).childNodes[0]||(t=document.createElement("div"),n.appendChild(t)),t.style.width=(t=n.childNodes[0])&&n&&""==n.style.width?0<n.clientWidth?n.clientWidth+"px":0<n.offsetWidth?n.offsetWidth+"px":0<n.scrollWidth?n.scrollWidth+"px":this.myViewer.width+"px":"100%",t.style.height=t&&n&&""==n.style.height?0<n.clientHeight?n.clientHeight+"px":0<n.offsetHeight?n.offsetHeight+"px":0<n.scrollHeight?n.scrollHeight+"px":this.myViewer.height+"px":"100%",r.scannerViewer.element=t),e&&e.documentEditorSettings&&e.documentEditorSettings.element&&((n=e.documentEditorSettings.element&&"DIV"==e.documentEditorSettings.element.nodeName?e.documentEditorSettings.element:document.getElementById(e.documentEditorSettings.element)).childNodes[0]||(e=document.createElement("div"),n.appendChild(e)),t.style.width=(t=n.childNodes[0])&&n&&""==n.style.width?0<n.clientWidth?n.clientWidth+"px":0<n.offsetWidth?n.offsetWidth+"px":0<n.scrollWidth?n.scrollWidth+"px":this.myViewer.width+"px":"100%",t.style.height=t&&n&&""==n.style.height?0<n.clientHeight?n.clientHeight+"px":0<n.offsetHeight?n.offsetHeight+"px":0<n.scrollHeight?n.scrollHeight+"px":this.myViewer.height+"px":"100%",r.documentEditorSettings.element=t),r}},{key:"showVideoEx",value:function(e){return e=this.setElementForDocumentConfiguration(e),this.showVideoInner(e)}},{key:"showVideoInner",value:function(t){var n=this;if(!n._NouiNotSupport("scanDocument"))return!1;if(!n._stwain._isMobileMode())return n._stwain._serviceNotSupportAsync("scanDocument");if(o.I.Lib.env.bMobile&&0==n.addCSSForShowVideo){var r=document.createElement("style"),i="*{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select: none;-moz-user-select:none;-ms-user-select:none;user-select:none;}";r.type="text/css";try{r.appendChild(document.createTextNode(i))}catch(e){r.styleSheet.cssText=i}document.body.appendChild(r),n.addCSSForShowVideo=!0}return n._stwain.Template&&n._stwain.Template._documentTemplate&&n._stwain.Template._documentTemplate.setTemplateTitle(n.currentFileName),t=n.getDefaultDocumentConfigurationValue(n._globalScanConfiguration_ScannViewer,t,!1),n._globalScanConfiguration_ScannViewer=t,n._documentScanConfiguration=t,n.notBindCameraForCameraManager()&&n.bindCameraForCameraManager(),0==(i=n.GetCurrentFileName()).length&&(n.CreateFile(T),n.OpenFile(T),i=T),(r=n.myccvs.showVideo(t,i))||o.D.Errors.WebviewerError(n._stwain,n.myccvs.Error.errorMessage,n.myccvs.Error.errorCode),r}},{key:"getDefaultDocumentConfigurationValue",value:function(e,t,n){var r,i,a,s=this,u=o.I.Lib.clone(t);return u&&(u.scannerViewer&&t.scannerViewer&&t.scannerViewer.element&&(u.scannerViewer.element=t.scannerViewer.element),u.documentEditorSettings&&t.documentEditorSettings&&t.documentEditorSettings.element&&(u.documentEditorSettings.element=t.documentEditorSettings.element)),o.D.isUndefined(u)?u=e:(u.scannerViewer=s.getDefaultScannerViewerValue(u.scannerViewer,!0),u.documentEditorSettings=s.getDefaultDocumentEditorValue(u.documentEditorSettings,!0,n)),o.D.isFunction(u.documentEditorSettings.funcConfirmExitAfterSave)?(r=u.documentEditorSettings.funcConfirmExitAfterSave,u.documentEditorSettings.funcConfirmExitAfterSave=function(e){var t=s.GetCurrentFileName();0==t.length&&(t=T),s.OpenFile(t),r(e)}):u.documentEditorSettings.funcConfirmExitAfterSave=function(e){var t=s.GetCurrentFileName();0==t.length&&(t=T),s.OpenFile(t)},n&&("cropviewer"==u.documentEditorSettings.defaultViewerName.toLowerCase()?o.D.isFunction(u.documentEditorSettings.cropViewer.funcConfirmExit)?(i=u.documentEditorSettings.cropViewer.funcConfirmExit,u.documentEditorSettings.cropViewer.funcConfirmExit=function(e,t){var n=s.GetCurrentFileName();return 0==n.length&&(n=T),s.OpenFile(n),i(e,t)}):u.documentEditorSettings.cropViewer.funcConfirmExit=function(e,t){var n=s.GetCurrentFileName();return 0==n.length&&(n=T),s.OpenFile(n),"documentScanPage"==t&&e?p().resolve(o.I.DWT.EnumDWT_ConfirmExitType.SaveAndExit):p().resolve(o.I.DWT.EnumDWT_ConfirmExitType.Exit)}:o.D.isFunction(u.documentEditorSettings.funcConfirmExit)?(a=u.documentEditorSettings.funcConfirmExit,u.documentEditorSettings.funcConfirmExit=function(e,t){var n=s.GetCurrentFileName();return 0==n.length&&(n=T),s.OpenFile(n),a(e,t)}):u.documentEditorSettings.funcConfirmExit=function(e,t){var n=s.GetCurrentFileName();return 0==n.length&&(n=T),s.OpenFile(n),"cropViewer"==t&&e?p().resolve(o.I.DWT.EnumDWT_ConfirmExitType.SaveAndExit):p().resolve(o.I.DWT.EnumDWT_ConfirmExitType.Exit)}),o.D.isUndefined(u.scannerViewer.maxDocuments)&&(u.scannerViewer.maxDocuments=s._stwain.MaxImagesInBuffer-s.GetHowManyImagesInBuffer()),1==u.scannerViewer.continuousScan?u.scannerViewer.continuousScan={visibility:"hidden",enableContinuousScan:!0}:0==u.scannerViewer.continuousScan?u.scannerViewer.continuousScan={visibility:"hidden",enableContinuousScan:!1}:o.D.isUndefined(u.scannerViewer.continuousScan)?u.scannerViewer.continuousScan={visibility:"hidden",enableContinuousScan:!0}:(u.scannerViewer.continuousScan.visibility="hidden",o.D.isUndefined(u.scannerViewer.continuousScan.enableContinuousScan)&&(u.scannerViewer.continuousScan.enableContinuousScan=!0)),u}},{key:"getDefaultScannerViewerValue",value:function(e,t){var n,r=pe.scannerViewer;return o.D.isUndefined(e)?(n=r,t&&delete n.funcConfirmExit):(o.D.isUndefined((n=e).headerStyle)?n.headerStyle=r.headerStyle:(o.D.isUndefined(n.headerStyle.background)&&(n.headerStyle.background=r.headerStyle.background),o.D.isUndefined(n.headerStyle.color)&&(n.headerStyle.color=r.headerStyle.color),o.D.isUndefined(n.headerStyle.selectedColor)&&(n.headerStyle.selectedColor=r.headerStyle.selectedColor)),o.D.isUndefined(n.bodyStyle)?n.bodyStyle=r.bodyStyle:(o.D.isUndefined(n.bodyStyle.background)&&(n.bodyStyle.background=r.bodyStyle.background),o.D.isUndefined(n.bodyStyle.loaderBarSource)&&(n.bodyStyle.loaderBarSource=r.bodyStyle.loaderBarSource)),o.D.isUndefined(n.footerStyle)?n.footerStyle=r.footerStyle:(o.D.isUndefined(n.footerStyle.background)&&(n.footerStyle.background=r.footerStyle.background),o.D.isUndefined(n.footerStyle.color)&&(n.footerStyle.color=r.footerStyle.color),o.D.isUndefined(n.footerStyle.selectedColor)&&(n.footerStyle.selectedColor=r.footerStyle.selectedColor)),o.D.isUndefined(n.fullScreen)&&(n.fullScreen=r.fullScreen),o.D.isUndefined(n.enableBorderDetection)&&(n.enableBorderDetection=r.enableBorderDetection),o.D.isUndefined(n.polygonStyle)?n.polygonStyle=r.polygonStyle:(o.D.isUndefined(n.polygonStyle.stroke)&&(n.polygonStyle.stroke=r.polygonStyle.stroke),o.D.isUndefined(n.polygonStyle.strokeWidth)&&(n.polygonStyle.strokeWidth=r.polygonStyle.strokeWidth),o.D.isUndefined(n.polygonStyle.dash)&&(n.polygonStyle.dash=r.polygonStyle.dash)),n.scanButtonStyle?(o.D.isUndefined(n.scanButtonStyle.background)&&(n.scanButtonStyle.background=r.scanButtonStyle.background),o.D.isUndefined(n.scanButtonStyle.color)&&(n.scanButtonStyle.color=r.scanButtonStyle.color)):n.scanButtonStyle=r.scanButtonStyle,o.D.isUndefined(n.resolution)?n.resolution=r.resolution:(o.D.isBoolean((t=n.resolution).visibility)&&!t.visibility?t.visibility="hidden":o.D.isString(t.visibility)||(t.visibility=r.resolution.visibility),o.D.isUndefined(t.valueList)&&(t.valueList=r.resolution.valueList),o.D.isUndefined(t.defaultValue)&&t.valueList&&0<t.valueList.length&&(t.defaultValue=t.valueList[0].value)),o.D.isUndefined(n.autoScan)?n.autoScan=r.autoScan:(o.D.isBoolean((e=n.autoScan).visibility)&&!e.visibility?e.visibility="hidden":o.D.isString(e.visibility)||(e.visibility=r.autoScan.visibility),o.D.isUndefined(e.enableAutoScan)&&(e.enableAutoScan=r.autoScan.enableAutoScan)),o.D.isUndefined(n.autoDetect)?n.autoDetect=r.autoDetect:(o.D.isBoolean((t=n.autoDetect).visibility)&&!t.visibility?t.visibility="hidden":o.D.isString(t.visibility)||(t.visibility=r.autoDetect.visibility),o.D.isUndefined(t.enableAutoDetect)&&(t.enableAutoDetect=r.autoDetect.enableAutoDetect),o.D.isUndefined(t.fpsLimit)&&(t.fpsLimit=r.autoDetect.fpsLimit),o.D.isUndefined(t.acceptedPolygonConfidence)?t.acceptedPolygonConfidence=r.autoDetect.acceptedPolygonConfidence:(e=i()(t.acceptedPolygonConfidence),t.acceptedPolygonConfidence=0<=e?e:r.autoDetect.acceptedPolygonConfidence),o.D.isUndefined(t.acceptedBlurryScore)?t.acceptedBlurryScore=r.autoDetect.acceptedBlurryScore:(e=i()(t.acceptedBlurryScore),t.acceptedBlurryScore=0<=e?e:r.autoDetect.acceptedBlurryScore),o.D.isUndefined(t.autoCaptureDelay)?t.autoCaptureDelay=r.autoDetect.autoCaptureDelay:(e=i()(t.autoCaptureDelay),t.autoCaptureDelay=0<=e?e:r.autoDetect.autoCaptureDelay)),o.D.isUndefined(n.switchCamera)?n.switchCamera=r.switchCamera:o.D.isBoolean((t=n.switchCamera).visibility)&&!t.visibility?t.visibility="hidden":o.D.isString(t.visibility)||(t.visibility=r.switchCamera.visibility),o.D.isUndefined(n.loadLocalFile)?n.loadLocalFile=r.loadLocalFile:o.D.isBoolean((e=n.loadLocalFile).visibility)&&!e.visibility?e.visibility="hidden":o.D.isString(e.visibility)||(e.visibility=r.loadLocalFile.visibility)),n}},{key:"getDefaultDocumentEditorValue",value:function(e,t,n){var r,i=o.I.Lib.clone(pe.documentEditorSettings);if(i&&pe.documentEditorSettings&&pe.documentEditorSettings.element&&(i.element=pe.documentEditorSettings.element),n&&(i.defaultViewerName="mainViewer"),o.D.isUndefined(e))r=i,t&&(delete r.remove.funcConfirmRemove,delete r.funcConfirmExit,delete r.funcConfirmExitAfterSave,delete r.cropViewer.funcConfirmExit);else{if(o.D.isBoolean((r=e).visibility)&&!r.visibility?r.visibility="hidden":o.D.isString(r.visibility)||(r.visibility=i.visibility),(o.D.isUndefined(r.defaultViewerName)||""==r.defaultViewerName||"cropviewer"!=r.defaultViewerName.toLowerCase()&&"mainviewer"!=r.defaultViewerName.toLowerCase())&&(r.defaultViewerName=i.defaultViewerName),o.D.isUndefined(r.headerStyle)?r.headerStyle=i.headerStyle:(o.D.isUndefined(r.headerStyle.background)&&(r.headerStyle.background=i.headerStyle.background),o.D.isUndefined(r.headerStyle.color)&&(r.headerStyle.color=i.headerStyle.color),o.D.isUndefined(r.headerStyle.selectedColor)&&(r.headerStyle.selectedColor=i.headerStyle.selectedColor),o.D.isUndefined(r.headerStyle.disabledColor)&&(r.headerStyle.disabledColor=i.headerStyle.disabledColor)),o.D.isUndefined(r.bodyStyle)?r.bodyStyle=i.bodyStyle:(o.D.isUndefined(r.bodyStyle.background)&&(r.bodyStyle.background=i.bodyStyle.background),o.D.isUndefined(r.bodyStyle.loaderBarSource)&&(r.bodyStyle.loaderBarSource=i.bodyStyle.loaderBarSource)),o.D.isUndefined(r.footerStyle)?r.footerStyle=i.footerStyle:(o.D.isUndefined(r.footerStyle.background)&&(r.footerStyle.background=i.footerStyle.background),o.D.isUndefined(r.footerStyle.color)&&(r.footerStyle.color=i.footerStyle.color),o.D.isUndefined(r.footerStyle.selectedColor)&&(r.footerStyle.selectedColor=i.footerStyle.selectedColor)),o.D.isUndefined(r.insert)?r.insert=i.insert:(o.D.isBoolean(r.insert.visibility)&&!r.insert.visibility?r.insert.visibility="hidden":o.D.isString(r.insert.visibility)||(r.insert.visibility=i.insert.visibility),o.D.isUndefined(r.insert.position)&&(r.insert.position=i.insert.position)),o.D.isUndefined(r.remove)?(r.remove=i.remove,t&&delete r.remove.funcConfirmRemove):o.D.isBoolean(r.remove.visibility)&&!r.remove.visibility?r.remove.visibility="hidden":o.D.isString(r.remove.visibility)||(r.remove.visibility=i.remove.visibility),o.D.isUndefined(r.rotateLeft)?r.rotateLeft=i.rotateLeft:o.D.isBoolean(r.rotateLeft.visibility)&&!r.rotateLeft.visibility?r.rotateLeft.visibility="hidden":o.D.isString(r.rotateLeft.visibility)||(r.rotateLeft.visibility=i.rotateLeft.visibility),o.D.isUndefined(m()(r)))r.filter=m()(i);else{if(o.D.isBoolean(m()(r).visibility)&&!m()(r).visibility?m()(r).visibility="hidden":o.D.isString(m()(r).visibility)||(m()(r).visibility=m()(i).visibility),o.D.isUndefined(m()(r).valueList))m()(r).valueList=m()(i).valueList;else{for(var a=[],s=0;s<m()(r).valueList.length;s++){for(var u=!1,c=m()(r).valueList[s].value,l=0;l<m()(i).valueList.length;l++)if(c==m()(i).valueList[l].value){u=!0;break}u&&(o.D.isUndefined(m()(r).valueList[s].option)&&(m()(r).valueList[s].option=m()(i).valueList[0].option),a.push(m()(r).valueList[s]))}m()(r).valueList=a}if(o.D.isUndefined(m()(r).defaultValue))m()(r).defaultValue=m()(i).defaultValue;else{for(var d=!1,h=m()(r).defaultValue,g=0;g<m()(r).valueList.length;g++)if(h==m()(r).valueList[g].value){d=!0;break}0==d&&(m()(r).defaultValue=m()(i).defaultValue)}o.D.isUndefined(m()(r).applyToAll)?m()(r).applyToAll=m()(i).applyToAll:(n=m()(r).applyToAll,o.D.isBoolean(n.visibility)&&!n.visibility?n.visibility="hidden":o.D.isString(n.visibility)||(n.visibility=m()(i).applyToAll.visibility),o.D.isUndefined(n.enableApplyToAll)&&(n.enableApplyToAll=m()(i).applyToAll.enableApplyToAll),o.D.isUndefined(n.label)&&(n.label=m()(i).applyToAll.label))}o.D.isUndefined(r.crop)?r.crop=i.crop:o.D.isBoolean(r.crop.visibility)&&!r.crop.visibility?r.crop.visibility="hidden":o.D.isString(r.crop.visibility)||(r.crop.visibility=i.crop.visibility),o.D.isUndefined(r.cropViewer)?(r.cropViewer=i.cropViewer,t&&delete r.cropViewer.funcConfirmExit):(o.D.isBoolean(r.cropViewer.visibility)&&!r.cropViewer.visibility?r.cropViewer.visibility="hidden":o.D.isString(r.cropViewer.visibility)||(r.cropViewer.visibility=i.cropViewer.visibility),o.D.isUndefined(r.cropViewer.polygonStyle)?r.cropViewer.polygonStyle=i.cropViewer.polygonStyle:(o.D.isUndefined(r.cropViewer.polygonStyle.stroke)&&(r.cropViewer.polygonStyle.stroke=i.cropViewer.polygonStyle.stroke),o.D.isUndefined(r.cropViewer.polygonStyle.strokeWidth)&&(r.cropViewer.polygonStyle.strokeWidth=i.cropViewer.polygonStyle.strokeWidth),o.D.isUndefined(r.cropViewer.polygonStyle.dash)&&(r.cropViewer.polygonStyle.dash=i.cropViewer.polygonStyle.dash)),o.D.isUndefined(r.cropViewer.rotateLeft)?r.cropViewer.rotateLeft=i.cropViewer.rotateLeft:o.D.isBoolean((e=r.cropViewer.rotateLeft).visibility)&&!e.visibility?e.visibility="hidden":o.D.isString(e.visibility)||(e.visibility=i.cropViewer.rotateLeft.visibility),o.D.isUndefined(r.cropViewer.rotateRight)?r.cropViewer.rotateRight=i.cropViewer.rotateRight:o.D.isBoolean((n=r.cropViewer.rotateRight).visibility)&&!n.visibility?n.visibility="hidden":o.D.isString(n.visibility)||(n.visibility=i.cropViewer.rotateRight.visibility),o.D.isUndefined(r.cropViewer.autoDetectBorder)?r.cropViewer.autoDetectBorder=i.cropViewer.autoDetectBorder:o.D.isBoolean((t=r.cropViewer.autoDetectBorder).visibility)&&!t.visibility?t.visibility="hidden":o.D.isString(t.visibility)||(t.visibility=i.cropViewer.autoDetectBorder.visibility))}return r}},{key:"closeVideo",value:function(){var e;return!!this._NouiNotSupport("closeVideo")&&(!this.myccvs||((e=this.myccvs.closeVideo())||o.D.Errors.WebviewerError(this._stwain,this.myccvs.Error.errorMessage,this.myccvs.Error.errorCode),e))}},{key:"camera_on",value:function(e,t){this.myccvs||this.bindCameraForCameraManager(),this.mydocEditManager||this.bindCameraForDocumentEditManager(),e&&(o.D.isFunction(t)?(this.myccvs.on(e,t),this.mydocEditManager.on(e,t)):o.D.Errors.CallbackNotAFunction(this._stwain))}},{key:"camera_off",value:function(e,t){var n=this;if(n.myccvs&&e)if(o.D.isUndefined(t))n.myccvs.off(e),0<=r()(ge).call(ge,e)&&n.myccvs.on(e,(function(t,r){o.D.isFunction(n[e])&&n[e](t,r)}));else{if(!o.D.isFunction(t))return void o.D.Errors.CallbackNotAFunction(n._stwain);n.myccvs.off(e,t)}n.mydocEditManager&&e&&(o.D.isUndefined(t)?(n.mydocEditManager.off(e),0<=r()(ge).call(ge,e)&&n.mydocEditManager.on(e,(function(t,r){o.D.isFunction(n[e])&&n[e](t,r)}))):o.D.isFunction(t)?n.mydocEditManager.off(e,t):o.D.Errors.CallbackNotAFunction(n._stwain))}},{key:"createEditPage",value:function(e,t){var n=this;if(t=t||{},!n._NouiNotSupport("createEditPage"))return!1;n.mydocEditManager||n.createDocumentEditManager(),n.notBindCameraForDocumentEditManager()&&n.bindCameraForDocumentEditManager();var r=n.GetCurrentFileName();return 0==r.length&&(n.CreateFile(T),n.OpenFile(T),r=T),t.fileName=r,(r=n.mydocEditManager.createEditPage(e,t))||o.D.Errors.WebviewerError(n._stwain,n.mydocEditManager.Error.errorMessage,n.mydocEditManager.Error.errorCode),r}},{key:"removeEditPage",value:function(e){return!!_this.mydocEditManager&&_this.mydocEditManager.removeEditPage(e)}},{key:"GetBorder",value:function(){return this._NouiNotSupport("border")?this.myViewer.outerBorder:""}},{key:"SetBorder",value:function(e){return!!this._NouiNotSupport("border")&&(this.myViewer.outerBorder=e,!0)}},{key:"GetInnerBorder",value:function(){return this._NouiNotSupport("innerBorder")?this.myViewer.canvasBorder:""}},{key:"SetInnerBorder",value:function(e){return!!this._NouiNotSupport("innerBorder")&&(this.myViewer.canvasBorder=e,!0)}},{key:"GetAllowPageDragging",value:function(){return this._NouiNotSupport("allowPageDragging")?this.myViewer.allowPageDragging:""}},{key:"SetAllowPageDragging",value:function(e){return!!this._NouiNotSupport("allowPageDragging")&&(this.myViewer.allowPageDragging=e,!0)}},{key:"GetSelectedAreaBorderColor",value:function(){return this._NouiNotSupport("selectedAreaBorderColor")?this.myViewer.selectedBoxLineColor:""}},{key:"SetSelectedAreaBorderColor",value:function(e){return!!this._NouiNotSupport("selectedAreaBorderColor")&&(this.myViewer.selectedBoxLineColor=e,!0)}},{key:"GetCursor",value:function(){return this._NouiNotSupport("cursor")?this.myViewer.canvasMouseShape:""}},{key:"SetCursor",value:function(e){if(!this._NouiNotSupport("cursor"))return!1;if("zoom-in"==e&&!this.GetIfSinglePageMode())return o.D.Errors.CursorInvalidMode(this._stwain),!1;var t="default";switch(e){case"default":t="default",this.SetOperationMode(0);break;case"pointer":t="pointer",this.SetOperationMode(0);break;case"crosshair":t="crosshair",this.SetOperationMode(1);break;case"zoom-in":t="zoom-in",this.SetOperationMode(2);break;default:t="crosshair",this.SetOperationMode(1)}return this.myViewer.canvasMouseShape=t,!0}},{key:"GetIfAutoScroll",value:function(){return this._NouiNotSupport("ifAutoScroll")?this.myViewer.showLatestPage:""}},{key:"SetIfAutoScroll",value:function(e){return!!this._NouiNotSupport("ifAutoScroll")&&(o.D.isBoolean(e)?(this.myViewer.showLatestPage=e,this._imageEditorInner&&this._imageEditorInner.SetIfAutoScroll(),!0):(o.D.Errors.InvalidValue(this._stwain),!1))}},{key:"GetPageMargin",value:function(){return this._NouiNotSupport("pageMargin")?this.myViewer.pageMargin:0}},{key:"SetPageMargin",value:function(e){return!!this._NouiNotSupport("pageMargin")&&(!/^((\d+em)|(\d+px)|(\d+%)|(\d+))$/.test(e)||e<0?(o.D.Errors.InvalidValue(this._stwain),!1):(this.myViewer.pageMargin=e,!0))}},{key:"setButtonClass",value:function(e,t){return!!this._NouiNotSupport("setButtonClass")&&((e=this.myViewer.setButtonClass(e,t))||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),e)}},{key:"clearSelectedAreas",value:function(){var e;return!!this._NouiNotSupport("clearSelectedAreas")&&(this.GetHowManyImagesInBuffer()<=0||((e=this.myViewer.clearSelectedBoxes())||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),e))}},{key:"setSelectedAreas",value:function(e){var t,n,r=this,i=[];if(r.GetCurrentIndex()<0)return o.D.Errors.NoImage(r._stwain),!1;if(!r._NouiNotSupport("setSelectedAreas"))return!1;if(o.D.isUndefined(e)||0==e.length)return o.D.Errors.MobileServer_InvalidLeftOrTopOrRightOrBottom(r._stwain),!1;if(e.length&&0<e.length)for(var a=0;a<e.length;a++)n={},o.D.isUndefined(e[a])||o.D.isUndefined(e[a].left)||o.D.isUndefined(e[a].top)||o.D.isUndefined(e[a].right)||o.D.isUndefined(e[a].bottom)||e[a].left<0||e[a].top<0||e[a].right<0||e[a].bottom<0||(n.left=e[a].left,n.top=e[a].top,e[a].right-e[a].left<0||e[a].bottom-e[a].top<0||(n.width=e[a].right-e[a].left,n.height=e[a].bottom-e[a].top,i.push(n)));else if(n={},!(o.D.isUndefined(e)||o.D.isUndefined(e.left)||o.D.isUndefined(e.top)||o.D.isUndefined(e.right)||o.D.isUndefined(e.bottom))){if(e.left<0||e.top<0||e.right<0||e.bottom<0)return o.D.Errors.MobileServer_InvalidLeftOrTopOrRightOrBottom(r._stwain),!1;if(n.left=e.left,n.top=e.top,e.right-e.left<0||e.bottom-e.top<0)return o.D.Errors.MobileServer_InvalidLeftOrTopOrRightOrBottom(r._stwain),!1;n.width=e.right-e.left,n.height=e.bottom-e.top,i.push(n)}return 0==i.length?(o.D.Errors.MobileServer_InvalidLeftOrTopOrRightOrBottom(r._stwain),!1):((t=r.myViewer.setSelectedBoxes(i,!0))||o.D.Errors.WebviewerError(r._stwain,r.mydvs.Error.errorMessage,r.mydvs.Error.errorCode),t)}},{key:"_NouiNotSupport",value:function(e){return this._stwain._resetErr(),!(!this._stwain._isValid()||this._stwain._isNoViewer()&&(this._stwain._nouiNotSupport(e),1))}},{key:"pageChange",value:function(e){var t=this.GetHowManyImagesInBuffer();if(o.D.log("OnPagination"),t<=0)return o.D.Errors.NoImage(this._stwain),void _e.output(this,"No image in Buffer");1!=t&&(!/^\d+$/.test(e)||e<=0?alert(he.CustomizableDisplayInfo.errorMessages.invalidIndex):((e=i()(e)-1)<0?e=0:t<=e&&(e=t-1),e!=this.GetCurrentIndex()&&this.go(e)))}},{key:"first",value:function(){var e=this.GetHowManyImagesInBuffer();return this._NouiNotSupport("first")?e<=0?(o.D.Errors.NoImage(this._stwain),_e.output(this,"No image in Buffer"),-1):(1==e||this.go(0),0):-1}},{key:"last",value:function(){var e=this.GetHowManyImagesInBuffer();return this._NouiNotSupport("last")?e<=0?(o.D.Errors.NoImage(this._stwain),_e.output(this,"No image in Buffer"),-1):1==e?0:(this.go(e-=1),e):-1}},{key:"previous",value:function(){var e=this.GetHowManyImagesInBuffer();return this._NouiNotSupport("previous")?e<=0?(o.D.Errors.NoImage(this._stwain),_e.output(this,"No image in Buffer"),-1):1==e?0:(e=this.GetCurrentIndex()-1,this.go(e=e<0?0:e),e):-1}},{key:"next",value:function(){var e,t=this.GetHowManyImagesInBuffer();return this._NouiNotSupport("next")?t<=0?(o.D.Errors.NoImage(this._stwain),_e.output(this,"No image in Buffer"),-1):1==t?0:(e=this.GetCurrentIndex()+1,this.go(e=t<=e?t-1:e),e):-1}},{key:"go",value:function(e){var t=e;return this._NouiNotSupport("go")?this.GetHowManyImagesInBuffer()<=0?(o.D.Errors.NoImage(this._stwain),_e.output(this,"No image in Buffer"),-1):(this._imageEditorInner?this._imageEditorInner.go(e):t=this.__goInner(e),t):-1}},{key:"__goInner",value:function(e){var t;if(void 0!==e){if(-1==e)return o.D.Errors.IndexOutOfRange(this._stwain),-1;o.I.Lib.detect.showMask(this._stwain),t=this.GoToPage(e)}return t}},{key:"topPageChanged",value:function(e,t){this._UIView.__fireEvent("onTopImageInTheViewChanged",{index:e,bByScrollBar:t})}},{key:"bufferChanged",value:function(e,t){for(var n,r=this,i=[],a=-1,s=[],u=0;u<r.GetHowManyImagesInBuffer();u++)(n=r.GetCustomDataByIndex(u))&&n.imageId&&i.push(r._stwain.objImageIndexManager.convertServerIdToGuid(n.imageId));if(0<i.length&&(e.imageIds=i),!e.currentUid||0<=(d=r.GetIndexByUid(e.currentUid))&&(n=r.GetCustomDataByIndex(d))&&n.imageId&&(a=r._stwain.objImageIndexManager.convertServerIdToGuid(n.imageId),(d=r._stwain._ImgManager._UIView.GetDataImageControl(n.imageId))&&-1==d.uuid&&(d.uuid=e.currentUid)),e.currentId=a,e.selectedUids)for(var c,l=0;l<e.selectedUids.length;l++)!e.selectedUids[l]||0<=(c=r.GetIndexByUid(e.selectedUids[l]))&&(n=r.GetCustomDataByIndex(c))&&n.imageId&&(s.push(r._stwain.objImageIndexManager.convertServerIdToGuid(n.imageId)),(c=r._stwain._ImgManager._UIView.GetDataImageControl(n.imageId))&&-1==c.uuid&&(c.uuid=e.currentUid));e.selectedIds=s;var d=o.D.mix(e,{});delete e.uids,delete e.currentUid,delete e.selectedUids,r._UIView.__fireEvent("onBufferChanged",e),r._documentEditor&&r._bFireSync&&(d.file||(d.file=r.GetCurrentFileName()),void 0===d.fromViewerBufferChanged&&(d.fromViewerBufferChanged=!0),r._documentEditor.syncFile(d))}},{key:"click",value:function(e){this.UpdateInfo(!0,!1,!0),this._UIView.__fireEvent("onMouseClick",{e:e,x:e.imageX,y:e.imageY,index:this.GetCurrentIndex()})}},{key:"rightclick",value:function(e){this._UIView.__fireEvent("onMouseRightClick",{e:e,x:e.imageX,y:e.imageY,index:this.GetCurrentIndex()})}},{key:"dblclick",value:function(e){this._UIView.__fireEvent("onMouseDoubleClick",{e:e,x:e.imageX,y:e.imageY,index:this.GetCurrentIndex()})}},{key:"mousemove",value:function(e){this._UIView.__fireEvent("onMouseMove",{e:e,x:e.imageX,y:e.imageY,index:this.GetCurrentIndex()})}},{key:"pageAreaSelected",value:function(e,t){var n=1;t&&0<t.length&&((t=t[t.length-1]).index&&(n=i()(t.index)+1),this._UIView.__fireEvent("onImageAreaSelected",{index:e,left:i()(t.x),top:i()(t.y),right:i()(t.x+t.width),bottom:i()(t.y+t.height),areaIndex:n}))}},{key:"pageAreaUnselected",value:function(e){this._UIView.__fireEvent("onImageAreaDeSelected",e)}},{key:"dragdone",value:function(e){o.D.isFunction(this._stwain.__OnIndexChangeDragDropDone)&&this._stwain.__OnIndexChangeDragDropDone(e)}},{key:"RegistLoadCallback",value:function(e){return this._bRegistedLoad||(this._bRegistedLoad=!0),!0}},{key:"onDrop",value:function(e){this.acceptDrop&&this.dropEvent(e)}},{key:"dropEvent",value:function(e){var t,n,i=this,s=null,u=function(e){e&&K.output(null,e+" was loaded successfully!"),null!=s&&i._stwain.Addon.PDF.SetConvertMode(s)},c=function(e,t,n){n&&K.output(null,n+" failed to load. Error code: "+e+"Error String: "+t),null!=s&&i._stwain.Addon.PDF.SetConvertMode(s)};try{for(var l,d,h=e.dataTransfer.files,g=0;g<h.length;g++){if(0==(t=h[g]).type.length){var f,m=void 0,p=r()(f=t.name).call(f,".");switch(m=0<p?t.name.substring(p+1):m){case"bmp":n=o.I.DWT.EnumDWT_ImageType.IT_BMP;break;case"jpg":case"jpeg":n=o.I.DWT.EnumDWT_ImageType.IT_JPG;break;case"tif":case"tiff":n=o.I.DWT.EnumDWT_ImageType.IT_TIF;break;case"png":n=o.I.DWT.EnumDWT_ImageType.IT_PNG;break;case"pdf":n=o.I.DWT.EnumDWT_ImageType.IT_PDF;break;case"jp2":case"j2k":case"j2c":n=o.I.DWT.EnumDWT_ImageType.IT_J2K;break;default:K.output(null,t.name+" failed to load because the file type is not supported!"),n=-1,o.D.Errors.UnrecognizedExt(i._stwain)}}else switch(t.type){case"image/bmp":n=o.I.DWT.EnumDWT_ImageType.IT_BMP;break;case"image/jpg":case"image/jpeg":n=o.I.DWT.EnumDWT_ImageType.IT_JPG;break;case"image/tif":case"image/tiff":n=o.I.DWT.EnumDWT_ImageType.IT_TIF;break;case"image/png":n=o.I.DWT.EnumDWT_ImageType.IT_PNG;break;case"application/pdf":n=o.I.DWT.EnumDWT_ImageType.IT_PDF;break;case"image/jp2":n=o.I.DWT.EnumDWT_ImageType.IT_J2K;break;default:K.output(null,t.name+" failed to load because the file type is not supported!"),n=-1,o.D.Errors.UnrecognizedExt(i._stwain)}-1!=n&&(o.D.showProgress(i._stwain,"DropLoading",!0),i._stwain._OnPercentDone([0,-1,o.I.MSG.Loading]),i._stwain.Addon&&i._stwain.Addon.PDF&&(l=!1,d=void 0,(i._stwain._isMobileMode()?o.D.License.checkProductKey(i._stwain,{PDFRasterizer:!0,Wasm:!0},!0):o.D.License.checkProductKey(i._stwain,{PDFRasterizer:!0},!0))&&(i._stwain._isMobileMode()?l=!0:(s=i._stwain.Addon.PDF.GetConvertMode(),d=i._stwain._innerFun("GetAddOnVersion",(0,a.dv)("pdf")),(o.D.env.bMac&&d==o.I.DWT.PdfMacVersion||o.D.env.bLinux&&d==o.I.DWT.PdfLinuxVersion||d==o.I.DWT.PdfVersion)&&(l=!0)),l&&i._stwain.Addon.PDF.SetConvertMode(3))),i._stwain._isMobileMode()?i._stwain.LoadImageFromBinary(t,(function(){o.I.Lib.closeProgress(i._stwain)}),(function(){o.I.Lib.closeProgress(i._stwain)})):function(e){var t=new FileReader;t.readAsDataURL(e),t.onload=function(){i._stwain.__LoadImageFromBytes(e,n,"",!0,u,c,0,e.size)},t.onerror=function(e){o.I.Lib.closeProgress(i._stwain),o.I.Lib.Errors.InvalidFile(i._stwain),i._stwain._errorString=this.error,c({code:i._stwain._errorCode,message:i._stwain._errorString})}}(h[g]))}}catch(R){o.D.log(R.stack||R,"error"),_()((function(){throw R}),0)}}},{key:"getImageManager",value:function(){return this._ImgManager}},{key:"on",value:function(e,t){e&&(o.D.isFunction(t)?this.myViewer.on(e,t):o.D.Errors.CallbackNotAFunction(this._stwain))}},{key:"off",value:function(e,t){var n=this;e&&(o.D.isUndefined(t)?(n.myViewer.off(e),0<=r()(ge).call(ge,e)&&n.myViewer.on(e,(function(t,r){o.D.isFunction(n[e])&&n[e](t,r)}))):o.D.isFunction(t)?n.myViewer.off(e,t):o.D.Errors.CallbackNotAFunction(n._stwain))}},{key:"initDialogText",value:function(e,t){return o.D.isUndefined(e)?e=t:(o.D.isUndefined(e.dlgChangeImageSize)?e.dlgChangeImageSize=t.dlgChangeImageSize:(0==e.dlgChangeImageSize[0].length&&(e.dlgChangeImageSize[0]=t.dlgChangeImageSize[0]),0==e.dlgChangeImageSize[1].length&&(e.dlgChangeImageSize[1]=t.dlgChangeImageSize[1]),0==e.dlgChangeImageSize[2].length&&(e.dlgChangeImageSize[2]=t.dlgChangeImageSize[2]),0==e.dlgChangeImageSize[3].length&&(e.dlgChangeImageSize[3]=t.dlgChangeImageSize[3]),0==e.dlgChangeImageSize[4].length&&(e.dlgChangeImageSize[4]=t.dlgChangeImageSize[4])),o.D.isUndefined(e.dlgRotateAnyAngle)?e.dlgRotateAnyAngle=t.dlgRotateAnyAngle:(0==e.dlgRotateAnyAngle[0].length&&(e.dlgRotateAnyAngle[0]=t.dlgRotateAnyAngle[0]),0==e.dlgRotateAnyAngle[1].length&&(e.dlgRotateAnyAngle[1]=t.dlgRotateAnyAngle[1]),0==e.dlgRotateAnyAngle[2].length&&(e.dlgRotateAnyAngle[2]=t.dlgRotateAnyAngle[2]),0==e.dlgRotateAnyAngle[3].length&&(e.dlgRotateAnyAngle[3]=t.dlgRotateAnyAngle[3]),0==e.dlgRotateAnyAngle[4].length&&(e.dlgRotateAnyAngle[4]=t.dlgRotateAnyAngle[4])),o.D.isUndefined(e.saveChangedImage)?e.saveChangedImage=t.saveChangedImage:(0==e.saveChangedImage[0].length&&(e.saveChangedImage[0]=t.saveChangedImage[0]),0==e.saveChangedImage[1].length&&(e.saveChangedImage[1]=t.saveChangedImage[1]),0==e.saveChangedImage[2].length&&(e.saveChangedImage[2]=t.saveChangedImage[2])),o.D.isUndefined(e.selectSource)?e.selectSource=t.selectSource:(0==e.selectSource[0].length&&(e.selectSource[0]=t.selectSource[0]),0==e.selectSource[1].length&&(e.selectSource[1]=t.selectSource[1]),0==e.selectSource[2].length&&(e.selectSource[2]=t.selectSource[2]),0==e.selectSource[3].length&&(e.selectSource[3]=t.selectSource[3]))),e}},{key:"createDocumentEditor",value:function(t){var n=this;if(!n._NouiNotSupport("createImageEditor"))return NaN;if(o.I.Lib.env.bMobile&&0==n.addCSSForShowVideo){var r=document.createElement("style"),i="*{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select: none;-moz-user-select:none;-ms-user-select:none;user-select:none;}";r.type="text/css";try{r.appendChild(document.createTextNode(i))}catch(e){r.styleSheet.cssText=i}document.body.appendChild(r),n.addCSSForShowVideo=!0}return!n._documentEditor||n._documentEditor.myDocumentEditor.isDestroyed?(i=n.setElementForDocumentConfiguration(t),r=n.getDefaultDocumentConfigurationValue(n._globalScanConfiguration,i,!0),n._globalScanConfiguration=r,n._documentEditor=new H(n,n.GetCurrentIndex(),r)):o.D.Errors.DocumentEditorExist(n._stwain),n._documentEditorInner=n._documentEditor._documentEditorInner,n.bShowDocumentEdit=n._documentEditorInner.bShowDocumentEdit,n._documentEditor}},{key:"createImageEditor",value:function(e){var t=this;return t._NouiNotSupport("createImageEditor")?(t._imageEditor?o.D.Errors.ImageEditorExist(t._stwain):(e?(o.D.isUndefined(e.border)&&(e.border=t.GetBorder()),o.D.isUndefined(e.selectionRectAspectRatio)&&(e.selectionRectAspectRatio=t.GetSelectionRectAspectRatio()),o.D.isUndefined(e.background)&&(e.background=me.background),o.D.isUndefined(e.topMenuBorder)&&(e.topMenuBorder=me.topMenuBorder),o.D.isUndefined(e.innerBorder)&&(e.innerBorder=me.innerBorder),o.D.isUndefined(e.promptToSaveChange)&&(e.promptToSaveChange=me.promptToSaveChange),o.D.isUndefined(e.buttons)&&(e.buttons=me.buttons),e.dialogText=t.initDialogText(e.dialogText,me.dialogText)):((e=me).border=t.GetBorder(),e.selectionRectAspectRatio=t.GetSelectionRectAspectRatio()),t._imageEditor=new ee(t,e)),t._imageEditorInner=t._imageEditor._imageEditorInner,t.bShowImageEdit=t._imageEditorInner.bShowImageEdit,t._imageEditor):NaN}},{key:"createThumbnailViewer",value:function(e){var t=this;return t._NouiNotSupport("createThumbnailViewer")?(e&&!o.D.isUndefined(e.showCheckbox)&&(o.D.isUndefined(e.checkbox)&&(e.checkbox={}),e.checkbox.visibility=e.showCheckbox?"visible":"hidden"),t._thumbnailViewer?o.D.Errors.ThumbnailViewerExist(t._stwain):t._thumbnailViewer=new re(t,e),t.myThumbnailViewer=t._thumbnailViewer.myThumbnailViewer,t.myThumbnailViewer.on("click",(function(e,n){t.UpdateInfo(!0,!1,!0)})),t._thumbnailViewer):NaN}},{key:"createCustomElement",value:function(e,t,n){var r=this,i="right",a=!1;return r._NouiNotSupport("createCustomElement")?o.D.isUndefined(e)?(o.D.Errors.ElementRequired(r._stwain),NaN):e?(o.D.isUndefined(t)||(i=t),!o.D.isUndefined(n)&&o.D.isBoolean(n)&&(a=n),r._customElement?o.D.Errors.CustomElementExist(r._stwain):(r._customElement=new v(r,e,i,a),r._customElement.myCustomElemet||(r._customElement=void 0)),r._customElement):(o.D.Errors.ElementNotExist(r._stwain),NaN):NaN}},{key:"ConvertClientIndexToServerIdInFile",value:function(e,t){return e=this._fileWrapper.openFile(e),0<=t&&t<e.length&&(t=e[t])?this._dvsWrapper.getCustomDataSync(t).imageId:null}},{key:"ConvertServerIdToIndexInFile",value:function(e,t){for(var n=-1,r=this._fileWrapper.openFile(e),i=0;i<r.length;i++){var o=r[i];if(o&&(o=this._dvsWrapper.getCustomDataSync(o))&&o.imageId==t){n=i;break}}return n}},{key:"FireBufferChanged",value:function(e,t,n){var r,i=this._fileWrapper.openFile(e),o=null,a=(this.currentFileName==e&&(a=this.GetCurrentIndex(),(r=this.myViewer.getCurrentPageUids())&&0<=a&&a<r.length&&(o=r[a])),{action:t,actionData:n,uids:i,currentUid:o,selectedUids:[],fromViewerBufferChanged:!1,file:e});this.IsInternalFile(e)||"add"==t?this._documentEditor&&this._documentEditor.syncFile(a):this.bufferChanged(a)}},{key:"RemoveByServerId",value:function(e,t){0<=(t=this.ConvertServerIdToIndexInFile(e,t))&&(this._fileWrapper.removeByIndexInFile(e,t),this.FireBufferChanged(e,"remove"))}},{key:"IsInternalFile",value:function(e){return 0==r()(e).call(e,"__dynamsoft_camera_files")||0==r()(e).call(e,"__dynamsoft_crop_files")||0==r()(e).call(e,"__dynamsoft_edit_files")||!1}},{key:"InsertImage",value:function(e,t,n){var r;this._bFireSync=!1,n=0<=n?this.mydvs.DataControl.insertSync(e,[t],n):this.mydvs.DataControl.appendSync(e,[t]),this._bFireSync=!0,n&&1<=n.length&&(r=n[0]),this.FireBufferChanged(e,"add",r)}}]),e}()),Ie=(o.D.UI.WebViewer=ve,K),ye=o.I.DWT,be=function(){function e(t,n){(0,s.Z)(this,e);var r=this;r._ImgManager=t,r._stwain=t._stwain,r.zoomInStep=1.2,r.zoomOutStep=.8,r.MIN_ZOOM=.02,r.MAX_ZOOM=65,r.BaseUrl=!1,r.MAX_ROWS=128,r.MAX_COLUMNS=128,r.AllowMultiSelect=!0,r.__MousewheelValue=0,this._Init(n)}return(0,u.Z)(e,[{key:"_Init",value:function(e){var t=this;t.borderWidth=o.D.isUndefined(e.borderWidth)?1:e.borderWidth,t.BackgroundColorByDefault=e.BackgroundColor?e.BackgroundColor:"#FFFFFF",e.BackgroundColor=t.BackgroundColorByDefault,t.BackgroundFillColor=t.BackgroundColorByDefault,t._webViewer?t._webViewer._Init(e):t._webViewer=new ve(t._ImgManager,e,t),t.mapModelImageControl=e.mapModelImageControl,t.__InitEvents(e)}},{key:"dispose",value:function(){this._webViewer&&(this._webViewer.dispose(),this._webViewer=null)}},{key:"__InitEvents",value:function(e){var t=this;o.D.isFunction(e.onTopImageInTheViewChanged)&&(t.onTopImageInTheViewChanged=e.onTopImageInTheViewChanged),o.D.isFunction(e.onGetImageInfo)&&(t.onGetImageInfo=e.onGetImageInfo),o.D.isFunction(e.onZoomChanged)&&(t.onZoomChanged=e.onZoomChanged),o.D.isFunction(e.onMouseMove)&&(t.onMouseMove=e.onMouseMove),o.D.isFunction(e.onMouseClick)&&(t.onMouseClick=e.onMouseClick),o.D.isFunction(e.onMouseRightClick)&&(t.onMouseRightClick=e.onMouseRightClick),o.D.isFunction(e.onMouseDoubleClick)&&(t.onMouseDoubleClick=e.onMouseDoubleClick),o.D.isFunction(e.onImageAreaDeSelected)&&(t.onImageAreaDeSelected=e.onImageAreaDeSelected),o.D.isFunction(e.onImageAreaSelected)&&(t.onImageAreaSelected=e.onImageAreaSelected),o.D.isFunction(e.onBufferChanged)&&(t.onBufferChanged=e.onBufferChanged),o.D.isFunction(e.onSelected)&&(t.onSelected=e.onSelected),o.D.isFunction(e.onRefreshUI)&&(t.onRefreshUI=e.onRefreshUI),o.D.isFunction(e.onResetCurrentIndex)&&(t.onResetCurrentIndex=e.onResetCurrentIndex)}},{key:"SetMetaDataByIndex",value:function(e,t){return this.GetWebViewer().SetMetaDataByIndex(e,t)}},{key:"GetMetaDataByIndex",value:function(e){return this.GetWebViewer().GetMetaDataByIndex(e)}},{key:"GetDataImageControl",value:function(e){return this.mapModelImageControl[e]}},{key:"SetDataImageControl",value:function(e,t,n){var r;return-1!=t&&((r=this.mapModelImageControl[t])||((r=new g).serverId=t,this.mapModelImageControl[t]=r),null!=r&&(r.bIsDirty=!0),this.__GetImageAndAttach(r,t,!0,!1,!1,e,n),!0)}},{key:"AttachImagesForControl",value:function(e,t){var n=this.GetWebViewer();return e.bAddImage?n.AppendImage(e,t):n.UpdateImage(e,t),n._ImageEditorInner&&n._ImageEditorInner.bCouldBeTimeConsuming&&(n._ImageEditorInner.bCouldBeTimeConsuming=!1,o.I.Lib.hideMask()),!0}},{key:"MobileAttachImagesForControl",value:function(e,t){var n=this.GetWebViewer();return e.bAddImage?n.MobileAppendImage(e,t):n.MobileUpdateImage(e,t),n._ImageEditorInner&&n._ImageEditorInner.bCouldBeTimeConsuming&&(n._ImageEditorInner.bCouldBeTimeConsuming=!1,o.I.Lib.hideMask()),!0}},{key:"GetWebViewer",value:function(){return this._webViewer}},{key:"__GetWebViewerUuid",value:function(e){return this.mapModelImageControl[e].uuid}},{key:"SetSelectedImageArea",value:function(e,t,n,r){var i=this.GetWebViewer();return null!=i&&i.SetSelectedImageArea(e,t,n,r)}},{key:"OverlayRectangle",value:function(e,t,n,r,i,o,a){var s=this.GetWebViewer();return null!=s&&s.OverlayRectangle(e,t,n,r,i,o,a)}},{key:"ChangeImageViewSize",value:function(e,t){var n=this.GetWebViewer();return 0<=e&&(n.GetWidth(),n.SetWidth(e)),0<=t&&(n.GetHeight(),this.GetWebViewer().SetHeight(t)),!0}},{key:"GetWidth",value:function(){return this.GetWebViewer().GetWidth()}},{key:"SetWidth",value:function(e){return this.GetWebViewer().SetWidth(e),!0}},{key:"GetHeight",value:function(){return this.GetWebViewer().GetHeight()}},{key:"SetHeight",value:function(e){return this.GetWebViewer().SetHeight(e),!0}},{key:"RefreshAllImages",value:function(e,t){var n=this.GetWebViewer();if(!this._stwain._isMobileMode()&&this.mapModelImageControl)for(var r=0;r<n.GetHowManyImagesInBuffer();r++){var i=this.getImageManager().convertClientIndexToServerId(r),o=this.mapModelImageControl[i];o&&(i=Ie.getImageUrl(this.BaseUrl,i,e,t,l()()),o.minImageUrl=i,i=n.GetMetaDataByIndex(r),n.UpdateImage(o,i))}}},{key:"SetViewMode",value:function(e,t){return this.GetWebViewer().SetViewMode(e,t)}},{key:"RemoveAllImages",value:function(){for(var e,t=this._ImgManager.count(),n=d()(this.mapModelImageControl).length,r=0;r<t;r++)-1!=(e=this.getImageManager().convertClientIndexToServerId(r))&&this.mapModelImageControl[e]&&(this.mapModelImageControl[e].Clear(),delete this.mapModelImageControl[e]);return t==n&&(this.mapModelImageControl={}),this.GetWebViewer().RemoveAllImages(),!0}},{key:"__GetImageAndAttach",value:function(e,t,n,r,i,o,a){var s=this.GetWebViewer().GetWidth(),u=this.GetWebViewer().GetHeight(),c=!!n||1==e.bIsDirty;(n=this.__GetWebViewerUuid(t))&&e.iImageControlWidth==s&&e.iImageControlHeight==u&&0==e.bIsDirty||this.__SetArrayControlLoadImage(n,t,e,s,u,this.AttachImagesForControl,c,r,i,o,a)}},{key:"__SetArrayControlLoadImage",value:function(e,t,n,r,i,o,a,s,u,c,l){this._stwain._isMobileMode()?this.OnGetImageFromMobileServer(t,n,r,i,s,u,c,l):a?this.OnGetImageFromServer(t,n,r,i,s,u,c,l):this.OnGetImageByURL(t,n,r,i,s,u,c,l)}},{key:"OnGetImageByURL",value:function(e,t,n,r,i,o,a,s){return t.imageUrl&&""!=t.imageUrl?(t.iImageControlWidth=n,t.iImageControlHeight=r,t.bAddImage=i,t.bAppendImage=o,t.index=a,this._stwain._isMobileMode()?this.MobileAttachImagesForControl(t,s):this.AttachImagesForControl(t,s),!0):this.OnGetImageFromServer(e,t,n,r,i,o,a,s)}},{key:"OnGetImageFromMobileServer",value:function(e,t,n,r,i,o,a,s){t.iImageControlWidth=n,t.iImageControlHeight=r,t.bAddImage=i,t.bAppendImage=o,t.index=a,this.MobileAttachImagesForControl(t,s)}},{key:"OnGetImageFromServer",value:function(e,t,n,r,i,a,s,u){var d=this,h=d.BaseUrl;if(h){if(-1==e)return!1;t.bIsDirty&&(t.ticks=l()()),o.D.isUndefined(n)&&(n=-1),o.D.isUndefined(r)&&(r=-1),t.iImageControlWidth=n,t.iImageControlHeight=r,t.bAddImage=i,t.bAppendImage=a,t.index=s,o.I.DWT.ConnectWithSocket&&d._stwain._bBindViewer?d._stwain.__innerConvertToBlob(o.I.DWT.EnumDWT_ImageType.IT_PNG,[e],!1,!0,4,(function(e){t.imageUrl=c().createObjectURL(e),t.minImageUrl=c().createObjectURL(e),d.AttachImagesForControl(t,u)}),(function(e){})):(i=Ie.getImageUrl(h,e,-1,-1,t.ticks),a=Ie.getImageUrl(h,e,n,r,t.ticks),t.imageUrl=i,t.minImageUrl=a,d.AttachImagesForControl(t,u))}return!0}},{key:"SetIfFitWindowAndType",value:function(e){var t,n=this.GetWebViewer();if(null!=n){switch(e){case 1:t="height";break;case 2:t="width";break;default:t="window"}n.SetFitType(t)}return!0}},{key:"GetAllowMultiSelect",value:function(){return this.AllowMultiSelect}},{key:"SetAllowMultiSelect",value:function(e){return this.AllowMultiSelect=e,!0}},{key:"GetFitWindowType",value:function(){return 0}},{key:"SetSelectionRectAspectRatio",value:function(e){return this.GetWebViewer().SetSelectionRectAspectRatio(e),!0}},{key:"GetSelectionRectAspectRatio",value:function(e){return this.GetWebViewer().GetSelectionRectAspectRatio()}},{key:"SetFitWindowType",value:function(e){return this.SetIfFitWindowAndType(e),!0}},{key:"GetIfFitWindow",value:function(){return!0}},{key:"SetIfFitWindow",value:function(e){return e?this.GetWebViewer().SetFitType():this.GetWebViewer().SetZoom(1),!0}},{key:"GetImageMargin",value:function(){return this.GetWebViewer().GetImageMargin()}},{key:"SetImageMargin",value:function(e){return this.GetWebViewer().SetImageMargin(e),!0}},{key:"GetSelectionImageBorderColor",value:function(){return this.GetWebViewer().GetSelectedPageBorder()}},{key:"SetSelectionImageBorderColor",value:function(e){return this.GetWebViewer().SetSelectionImageBorderColor(e),!0}},{key:"GetZoom",value:function(){return this.GetWebViewer().GetZoom()}},{key:"SetZoom",value:function(e){(e=e<this.MIN_ZOOM?this.MIN_ZOOM:e)>this.MAX_ZOOM&&(e=this.MAX_ZOOM);var t=this.GetWebViewer();return null!=t&&t.SetZoom(e),!0}},{key:"ZoomIn",value:function(e,t){var n=this.mapModelImageControl[this.getImageManager().convertClientIndexToServerId(this._webViewer.GetCurrentIndex())],r=this.GetWebViewer().GetZoom(),o=Math.floor(100*r*this.zoomInStep)+1;return!(1<o&&o<2501)||15e3<i()(n.imageWidth*r)||15e3<i()(n.imageHeight*r)?(Ie.output(this,ye.CustomizableDisplayInfo.errorMessages.limitReachedForZoomIn),alert(ye.CustomizableDisplayInfo.errorMessages.limitReachedForZoomIn),!1):(this.SetZoom(o/100,e,t),!0)}},{key:"ZoomOut",value:function(){var e=this.GetWebViewer().GetZoom();return 1<(e=Math.floor(100*e*this.zoomOutStep)-1)&&e<6501?(this.SetZoom(e/100),!0):(Ie.output(this,ye.CustomizableDisplayInfo.errorMessages.limitReachedForZoomOut),alert(ye.CustomizableDisplayInfo.errorMessages.limitReachedForZoomOut),!1)}},{key:"GetMouseShape",value:function(){return this.GetWebViewer().GetMouseShape()}},{key:"SetMouseShape",value:function(e){return this.GetWebViewer().SetMouseShape(e),!0}},{key:"GetShowPageNumber",value:function(){return this.GetWebViewer().GetShowPageNumber()}},{key:"SetShowPageNumber",value:function(e){return this.GetWebViewer().SetShowPageNumber(e),!0}},{key:"SetBackgroundFillColor",value:function(e){return this.BackgroundFillColor=e,!0}},{key:"GetBackgroundColor",value:function(){return this.GetWebViewer().GetBackground()}},{key:"SetBackgroundColor",value:function(e){return this.GetWebViewer().SetBackground(e),!0}},{key:"Go",value:function(e){return this.GetWebViewer().go(e)}},{key:"SetSelectedindexes",value:function(e){return this.GetWebViewer().SetSelectedindexes(e)}},{key:"GetSelectedindexes",value:function(e){return this.GetWebViewer().GetSelectedindexes()}},{key:"__Previous",value:function(){return this.Go(this.GetWebViewer().GetCurrentIndex()-1),!0}},{key:"__Next",value:function(){return this.Go(this.GetWebViewer().GetCurrentIndex()+1),!0}},{key:"__fireEvent",value:function(e,t){return!o.D.isFunction(this[e])||this[e](t)}},{key:"AddImage",value:function(e,t,n,r){var i;return e=+e,-1!=t&&((i=new g).bIsDirty=!0,i.serverId=t,this.mapModelImageControl[t]=i,0<=t&&this.__GetImageAndAttach(i,t,!1,!0,r,e,n),!0)}},{key:"RemoveImage",value:function(e,t){return e=i()(e),isNaN(e)?(o.D.Errors.InvalidIndex(this),!1):e<0||e>=this._ImgManager.count()?(o.D.Errors.IndexOutOfRange(this),!1):(this._ImgManager.count(),-1!=t&&this.mapModelImageControl[t]&&(this.mapModelImageControl[t].Clear(),delete this.mapModelImageControl[t]),this.GetWebViewer().RemoveByIndex(e))}},{key:"MoveImage",value:function(e,t,n){return this.GetWebViewer().MoveImage(e,t)}},{key:"SwitchImage",value:function(e,t){return this.GetWebViewer().SwitchImage(e,t)}},{key:"GetIfAutoScroll",value:function(){return this._webViewer.GetIfAutoScroll()}},{key:"SetIfAutoScroll",value:function(e){return this._webViewer.SetIfAutoScroll(e),!0}},{key:"Print",value:function(){var e=this,t=e.GetWebViewer().GetCurrentIndex();if(!(t<0)){var n=e.getImageManager().convertClientIndexToServerId(t);if(-1==n)return o.D.Errors.IndexOutOfRange(e),!1;if(!e._stwain._isMobileMode())return r=Ie.getImageUrl(e.BaseUrl,n,-1,-1),e.__PrintInner(r,n,t);var r=e.GetWebViewer().GetUidByIndex(t);return e.GetWebViewer().GetImageData(r).then((function(r){return r.oriData instanceof ArrayBuffer?e.__PrintInner(c().createObjectURL(new Blob([r.oriData])),n,t):r.oriData instanceof Blob?e.__PrintInner(c().createObjectURL(r.oriData),n,t):e.__PrintInner(r.oriData,n,t)})),!0}}},{key:"__PrintInner",value:function(e,t,n){var r=[];if(!(t=this.mapModelImageControl[t]))return!1;var i=t.width,a=((o.D.isUndefined(t.width)||t.width<=0)&&(t.width=this.getImageManager().GetImageWidth(n)),t.height);return(o.D.isUndefined(t.height)||t.height<=0)&&(t.height=this.getImageManager().GetImageHeight(n)),n=new f(e,t.width,t.height),r.push(n),t.width=i,t.height=a,Ie.print(r),!0}},{key:"GetHowManyImagesInBuffer",value:function(){return this.GetWebViewer().GetHowManyImagesInBuffer()}},{key:"RemoveImageTag",value:function(e){return this.GetWebViewer().RemoveImageTag(e)}},{key:"FilterImagesByTag",value:function(e,t,n){return this.GetWebViewer().FilterImagesByTag(e,t,n)}},{key:"ClearFilter",value:function(){return this.GetWebViewer().ClearFilter()}},{key:"GetServerIdList",value:function(){return this.GetWebViewer().GetServerIdList()}},{key:"GetServerIdListByTag",value:function(e){var t,n,r,i,o=[];if(e&&0==e.length)for(n=0;n<this.GetHowManyImagesInBuffer();n++)(i=this.GetWebViewer().GetCustomDataByIndex(n))&&o.push(i.imageId);else if(t=this.GetWebViewer().GetTagContents(e))for(n=0;n<t.length;n++)0<=(r=this.GetWebViewer().GetIndexByUid(t[n]))&&(i=this.GetWebViewer().GetCustomDataByIndex(r))&&o.push(i.imageId);return o}},{key:"SetDefaultTag",value:function(e){return this.GetWebViewer().SetDefaultTag(e)}},{key:"AddImageTag",value:function(e,t){return this.GetWebViewer().AddImageTag(e,t)}},{key:"GetCurrentTag",value:function(){var e=this.GetWebViewer().GetCurrentTag();return 0==e?"":e}},{key:"RenameTag",value:function(e,t){return this.GetWebViewer().RenameTag(e,t)}},{key:"RemoveTag",value:function(e,t){return this.GetWebViewer().RemoveTag(e,t)}},{key:"GetTagList",value:function(){return this.GetWebViewer().GetTagList()}},{key:"GetTagListByIndex",value:function(e){return this.GetWebViewer().GetTagListByIndex(e)}},{key:"CreateFile",value:function(e){return this.GetWebViewer().CreateFile(e)}},{key:"OpenFile",value:function(e){return this.GetWebViewer().OpenFile(e)}},{key:"GetCurrentFileName",value:function(){return this.GetWebViewer().GetCurrentFileName()}},{key:"RemoveFile",value:function(e){return this.GetWebViewer().RemoveFile(e)}},{key:"RenameFile",value:function(e,t){return this.GetWebViewer().RenameFile(e,t)}},{key:"GetFileInfoList",value:function(){return this.GetWebViewer().GetFileInfoList()}},{key:"GetImageIdsByFileName",value:function(e){return this.GetWebViewer().GetImageIdsByFileName(e)}},{key:"BindView",value:function(e){var t=this.GetWebViewer();return(e=t.BindView(e))&&t.show(),e}},{key:"UnbindView",value:function(){return this.GetWebViewer().UnbindView()}},{key:"GetIfShowVideoContainer",value:function(){return this.GetWebViewer().GetIfShowVideoContainer()}},{key:"ShowVideoContainer",value:function(e){return this.GetWebViewer().ShowVideoContainer(e)}},{key:"UpdateVideoContainer",value:function(e){return this.GetWebViewer().UpdateVideoContainer(e)}},{key:"__AttachImages",value:function(){for(var e,t=this.GetWebViewer().GetHowManyImagesInBuffer(),n=0;n<t;n++)0<=(e=this._ImgManager.convertClientIndexToServerId(n))&&this.__GetImageAndAttach(this.mapModelImageControl[e],e,!0,!1,!1,0)}},{key:"exists",value:function(e){return!o.D.isUndefined(this.mapModelImageControl[e])}},{key:"getImageManager",value:function(){return this._ImgManager}},{key:"GetImageData",value:function(e){this.GetWebViewer().GetImageData(e)}},{key:"RegistLoadCallback",value:function(e){return this.GetWebViewer().RegistLoadCallback(e)}},{key:"UpdateData",value:function(e,t){var n=this.GetWebViewer();return(e=this.GetDataImageControl(e))&&n.UpdateImage(e,t),!0}},{key:"RemoveByServerId",value:function(e,t){return this.GetWebViewer().RemoveByServerId(e,t)}},{key:"innerInsertModel",value:function(e,t){var n=new g;n.serverId=e,n.uuid=t,this.mapModelImageControl[e]=n}}]),e}();o.D.UI.ImageUIView=be;var De=function(e){o.I.DWT.Debug&&o.D.log(e)},Te=function(){function e(t,n){(0,s.Z)(this,e),this._stwain=t,this.__BackgroundFillColor=16777215,this.bImageJustChangedInEditor=!1,this.bImageChangedInViewer=!1,this._Init(t,n)}return(0,u.Z)(e,[{key:"_Init",value:function(e,t){var n=this;t.mapModelImageControl=e._ifBindViewer?n.getView().mapModelImageControl:{},t.onTopImageInTheViewChanged=function(t){o.I.Lib.isFunction(e.__OnTopImageInTheViewChanged)&&e.__OnTopImageInTheViewChanged(t.index,t.bByScrollBar)},t.onGetImageInfo=function(e){return{width:n.GetImageWidth(e),height:-1}},n._UIView?n._UIView._Init(t):n._UIView=new be(n,t)}},{key:"getUidByIndex",value:function(e){return this.getWebViewer().GetUidByIndex(e)}},{key:"getIndexByUid",value:function(e){return this.getWebViewer().GetIndexByUid(e)}},{key:"getCurrentImageIndex",value:function(){return this.getWebViewer().GetCurrentIndex()}},{key:"convertServerIdToClientIndex",value:function(e){var t,n=-1;return(t=(e=this._UIView.GetDataImageControl(e))?e.uuid:t)&&(n=this.getWebViewer().GetIndexByUid(t)),o.D.isNumber(n)?n:-1}},{key:"convertClientIndexToServerId",value:function(e){return(e=this.getWebViewer().GetCustomDataByIndex(e))?e.imageId:-1}},{key:"convertClientIndexToServerIdInFile",value:function(e,t){return this.getWebViewer().ConvertClientIndexToServerIdInFile(e,t)}},{key:"getWebViewer",value:function(){return this.getView()._webViewer}},{key:"getTwain",value:function(){return this._stwain}},{key:"getView",value:function(){return this._UIView}},{key:"OnReady",value:function(){return this.getView().BaseUrl=function(e){return[e.httpUrl,"dwt/",o.D.product.getDWTPrefix(),o.D.product.getServerVersionInfo(),"/img?id=",e.clientId].join("")}(this._stwain),!0}},{key:"count",value:function(){return this.getView().GetWebViewer().GetHowManyImagesInBuffer()}},{key:"clear",value:function(){return this.getView().RemoveAllImages(),!0}},{key:"dispose",value:function(){return this._UIView&&(this._UIView.dispose(),this._UIView=null),!0}},{key:"unshift",value:function(e,t,n){return this.getView(),this._updateUIAfterAdd(0,t,n)}},{key:"append",value:function(e,t,n){for(var r,i,o=this.getView(),a=o.GetWebViewer().GetHowManyImagesInBuffer(),s=o.GetWebViewer().GetCurrentIndex(),u=a-1;e<=u;u--)i=this.convertClientIndexToServerId(u),o.RemoveImage(u,i);return a<e?this._updateUIAfterAdd(r=a,t,n,!0):(i=this.convertClientIndexToServerId(r=a-1<=s?0:s+1),o.RemoveImage(r,i),this._updateUIAfterAdd(r,t,n,r==e-1))}},{key:"exists",value:function(e){return this.getView().exists(e)}},{key:"insertBefore",value:function(e,t,n,r){return((e=+e)<0||t<e)&&(e=-1),t=this.getView().GetWebViewer().GetHowManyImagesInBuffer(),this._updateUIAfterAdd(e=t<=e?t:e,n,r,!1)}},{key:"insert",value:function(e,t,n,r){return((e=+e)<0||t<e)&&(e=-1),t=this.getView().GetWebViewer().GetHowManyImagesInBuffer(),this._updateUIAfterAdd(e=t<=e?t:e,n,r,!1)}},{key:"_updateUIAfterAdd",value:function(e,t,n,r){var i=this.getView();return!(t<0)&&i.AddImage(e,t,n,r)}},{key:"removeByServerId",value:function(e,t){var n=e,r=this.GetCurrentFileName();return(!n||n==r)&&((r=this.convertServerIdToClientIndex(t))<0&&0<=(r=this.getWebViewer().ConvertServerIdToIndexInFile(n,t))&&(n=this.getUidByIndex(r),this.getView().innerInsertModel(t,n)),0<=r)?this.remove(t):this.getView().RemoveByServerId(e,t)}},{key:"remove",value:function(e){var t=this.getView(),n=this.convertServerIdToClientIndex(e);return t.RemoveImage(n,e)}},{key:"MoveImage",value:function(e,t){return this.getView().MoveImage(e,t)}},{key:"SwitchImage",value:function(e,t){return this.getView().SwitchImage(e,t)}},{key:"GetImageHeight",value:function(e){e=+e;var t=this.getView(),n=this.count();return e<0||n<e?0:this._stwain._isMobileMode()?(n=t._webViewer.GetMetaDataByIndex(e))&&n.height?n.height:0:(n=this.convertClientIndexToServerId(e),(n=t.GetDataImageControl(n))&&n.imageHeight?n.imageHeight:this._stwain.GetImageHeight(e))}},{key:"GetImageWidth",value:function(e){e=+e;var t=this.getView(),n=this.count();return e<0||n<e?0:this._stwain._isMobileMode()?(n=t._webViewer.GetMetaDataByIndex(e))&&n.width?n.width:0:(n=this.convertClientIndexToServerId(e),(n=t.GetDataImageControl(n))&&n.imageWidth?n.imageWidth:this._stwain.GetImageWidth(e))}},{key:"get",value:function(e){e=i()(e);var t=this.getView(),n=this.count();return!(e<0||n<e)&&(n=this.convertClientIndexToServerId(e),t.GetDataImageControl(n))}},{key:"refresh",value:function(e,t,n,r){if(e=+e,n){n=this.getView();var i=this.count();if(e<0||i<e)return!1;i=this.convertClientIndexToServerId(e),n.SetDataImageControl(e,i,r)}return!0}},{key:"Go",value:function(e){return this.getView().Go(e)}},{key:"__Next",value:function(){return this.getView().__Next()}},{key:"__Previous",value:function(){return this.getView().__Previous()}},{key:"SetSelectedClientIndexArray",value:function(e){return this.getView().SetSelectedindexes(e)}},{key:"getSelectedClientIndexArray",value:function(){return this.getView().GetSelectedindexes()}},{key:"GetZoom",value:function(){return this.getView().GetZoom()}},{key:"SetZoom",value:function(e){return this.getView().SetZoom(e)}},{key:"__GetPrintUrl",value:function(e,t,n){var r,i=0,o=0;return(t=this.getView().GetDataImageControl(t))&&(!t.width||t.width<=0?t.width=this.GetImageWidth(n):i=t.width,!t.height||t.height<=0?t.height=this.GetImageHeight(n):o=t.height,r=new f(e,t.width,t.height),t.width=i,t.height=o),r}},{key:"__GetPrintUrlforHttp",value:function(e,t){var n=this,r=n.getView();o.D.each(e,(function(e){var i,o=n.convertClientIndexToServerId(e);-1!=o&&(i=K.getImageUrl(r.BaseUrl,o,-1,-1),i=n.__GetPrintUrl(i,o,e),t.push(i))})),K.print(t)}},{key:"__GetPrintUrlforSocket",value:function(e,t){var n,r=this,i=o.D.Promise.resolve(0),a=0;return o.D.each(e,(function(o){i=i.then((function(){var i,s=r.convertClientIndexToServerId(o);-1!=s&&(i=r.getWebViewer().GetUidByIndex(o),r.getWebViewer().GetImageData(i).then((function(i){a++,n=i.oriData instanceof ArrayBuffer?c().createObjectURL(new Blob([i.oriData])):i.oriData instanceof Blob?c().createObjectURL(i.oriData):i.oriData,i=r.__GetPrintUrl(n,s,o),t.push(i),e.length==a&&K.print(t)})))}))})),!0}},{key:"__GetPrintUrlforMobileEx",value:function(e,t){var n,r=this,i=o.D.Promise.resolve(0),a=0;return o.D.each(e,(function(o){i=i.then((function(){var i,s=r.convertClientIndexToServerId(o);-1!=s&&(i=r.getWebViewer().GetUidByIndex(o),r.getWebViewer().GetImageData(i).then((function(i){a++,n=i.oriData instanceof ArrayBuffer?c().createObjectURL(new Blob([i.oriData])):i.oriData instanceof Blob?c().createObjectURL(i.oriData):i.oriData,i=r.__GetPrintUrl(n,s,o),t.push(i),e.length==a&&K.print(t)})))}))})),!0}},{key:"PrintEx",value:function(e){var t;if(!(this.count()<=0))return t=[],this._stwain._isMobileMode()?this.__GetPrintUrlforMobileEx(e,t):o.I.DWT.ConnectWithSocket?this.__GetPrintUrlforSocket(e,t):this.__GetPrintUrlforHttp(e,t),!0}},{key:"Print",value:function(){if(this.count()<=0)return!1;for(var e=[],t=0;t<this.count();t++)e.push(t);return this.PrintEx(e)}},{key:"_isNoViewer",value:function(){return!this._stwain._bBindViewer}},{key:"ChangeSize",value:function(e,t){return this.getView().ChangeImageViewSize(e,t)}},{key:"GetWidth",value:function(){return this.getView().GetWidth()}},{key:"SetWidth",value:function(e,t){return!!this._isNoViewer()||this.getView().SetWidth(e)}},{key:"GetHeight",value:function(){return this.getView().GetHeight()}},{key:"SetHeight",value:function(e,t){return!!this._isNoViewer()||this.getView().SetHeight(e)}},{key:"SetViewMode",value:function(e,t){return this._isNoViewer()?this._nouiNotSupport("SetViewMode"):this.getView().SetViewMode(e,t)}},{key:"ShowImageEditorEx",value:function(e,t,n,r,i,a,s,u){if(this._isNoViewer())return this._nouiNotSupport("ShowImageEditorEx");switch(i){case 0:case 1:case 2:break;case 3:if(this.getWebViewer().OnCloseImageEditor())return!0}i=document;var c,l=this.getView();this.getTwain()._containerElement==s&&(a=!1,De("warning: cannot use the same DIV for the main viewer and the editor viewer."));for(var d=0;d<o.I.DWT.DynamicContainers.length;d++)if(o.I.DWT.DynamicContainers[d].ContainerId==s){a=!1,De("warning: cannot use an DIV which is already consumed by the method CreateDWTObject.");break}if(a&&s&&(o.D.isDOM(s)?c=s:o.D.isShadowRoot(s)?(c=document.createElement("div"),s.appendChild(c)):(c=i.getElementById(s))&&"DIV"!=c.nodeName&&(De("warning: cannot create the editor viewer in a non-DIV element."),a=!1)),a&&s&&o.D.isDOM(s)){var h,g,f,m=o.D.getShadowRoot(s);if(m)return h=o.I.Lib.timestamp,(f=i.createElement("link")).href=[o.I.DWT.ResourcesPath,"/src/dynamsoft.viewer.css",h].join(""),f.rel="stylesheet",f.async=!0,(g=i.createElement("link")).href=[o.I.DWT.ResourcesPath,"/src/dynamsoft.webtwain.css",h].join(""),g.rel="stylesheet",g.async=!0,o.D.scriptOnload(f,(function(){o.D.scriptOnload(g,(function(){return l.GetWebViewer().ShowImageEditor(c,a,n,r)})),m.appendChild(g)})),m.appendChild(f),!0}return l.GetWebViewer().ShowImageEditor(c,a,n,r)}},{key:"SetSelectionRectAspectRatio",value:function(e){return this.getView().SetSelectionRectAspectRatio(e)}},{key:"GetSelectionRectAspectRatio",value:function(){return this.getView().GetSelectionRectAspectRatio()}},{key:"GetSelectionImageBorderColor",value:function(){return this.getView().GetSelectionImageBorderColor()}},{key:"SetSelectionImageBorderColor",value:function(e){return this.getView().SetSelectionImageBorderColor(e)}},{key:"GetBackgroundColor",value:function(){return this.getView().GetBackgroundColor()}},{key:"SetBackgroundColor",value:function(e,t){var n;return!!this._isNoViewer()||(n=this.getView(),t?n.SetBackgroundColor(e,!0):n.SetBackgroundColor(e))}},{key:"GetAllowMultiSelect",value:function(){var e=this.getView();return!this._isNoViewer()&&e.GetAllowMultiSelect()}},{key:"SetAllowMultiSelect",value:function(e){var t=this.getView();return!!this._isNoViewer()||t.SetAllowMultiSelect(e)}},{key:"GetFitWindowType",value:function(){var e=this.getView();return this._isNoViewer()?0:e.GetFitWindowType()}},{key:"SetFitWindowType",value:function(e){var t=this.getView();return!!this._isNoViewer()||t.SetFitWindowType(e)}},{key:"GetIfFitWindow",value:function(){var e=this.getView();return!!this._isNoViewer()||e.GetIfFitWindow()}},{key:"SetIfFitWindow",value:function(e){var t=this.getView();return!!this._isNoViewer()||t.SetIfFitWindow(e)}},{key:"GetImageMargin",value:function(){var e=this.getView();return this._isNoViewer()?0:e.GetImageMargin()}},{key:"SetImageMargin",value:function(e){var t=this.getView();return!!this._isNoViewer()||t.SetImageMargin(e)}},{key:"GetMouseShape",value:function(){var e=this.getView();return this._isNoViewer()?0:e.GetMouseShape()}},{key:"SetMouseShape",value:function(e){var t=this.getView();return!!this._isNoViewer()||t.SetMouseShape(e)}},{key:"GetShowPageNumber",value:function(){var e=this.getView();return!this._isNoViewer()&&e.GetShowPageNumber()}},{key:"SetShowPageNumber",value:function(e){var t=this.getView();return!!this._isNoViewer()||t.SetShowPageNumber(e)}},{key:"GetIfAutoScroll",value:function(){return this.getView().GetIfAutoScroll()}},{key:"SetIfAutoScroll",value:function(e){return this.getView().SetIfAutoScroll(e)}},{key:"OverlayRectangle",value:function(e,t,n,r,i,o,a){return!!this._isNoViewer()||this.getView().OverlayRectangle(e,t,n,r,i,o,a)}},{key:"SetSelectedImageArea",value:function(e,t,n,r,i){var o=this.getView();return e==o.GetWebViewer().GetCurrentIndex()&&(!!this._isNoViewer()||o.SetSelectedImageArea(t,n,r,i))}},{key:"ShowImagesByFilter",value:function(e,t,n){return this.getView().FilterImagesByTag(e,t,n)}},{key:"ClearFilter",value:function(){return this.getView().ClearFilter()}},{key:"GetServerIdListByTag",value:function(e){return this.getView().GetServerIdListByTag(e)}},{key:"GetAllServerIdList",value:function(){return this.getView().GetServerIdList()}},{key:"RemoveImageTag",value:function(e){return this.getView().RemoveImageTag(e)}},{key:"SetDefaultTag",value:function(e){return this.getView().SetDefaultTag(e)}},{key:"AddImageTag",value:function(e,t){return this.getView().AddImageTag(e,t)}},{key:"GetCurrentTag",value:function(){return this.getView().GetCurrentTag()}},{key:"RenameTag",value:function(e,t){return this.getView().RenameTag(e,t)}},{key:"RemoveTag",value:function(e,t){return this.getView().RemoveTag(e,t)}},{key:"GetTagList",value:function(){return this.getView().GetTagList()}},{key:"GetTagListByIndex",value:function(e){return this.getView().GetTagListByIndex(e)}},{key:"OpenFile",value:function(e){return this.getView().OpenFile(e)}},{key:"CreateFile",value:function(e){return this.getView().CreateFile(e)}},{key:"GetCurrentFileName",value:function(){return this.getView().GetCurrentFileName()}},{key:"RemoveFile",value:function(e){return this.getView().RemoveFile(e)}},{key:"RenameFile",value:function(e,t){return this.getView().RenameFile(e,t)}},{key:"GetFileInfoList",value:function(){return this.getView().GetFileInfoList()}},{key:"GetImageIdsByFileName",value:function(e){return this.getView().GetImageIdsByFileName(e)}},{key:"BindView",value:function(e){var t=this.getView(),n=e;return o.D.isString(e)?n=o.D.get(e):!o.D.isDOM(n)||n.id&&""!=n.id||(n.id=["dwt_",o.D.getRandom()].join("")),t.BindView(n)}},{key:"UnbindView",value:function(){return this.getView().UnbindView()}},{key:"GetIfShowVideoContainer",value:function(){return this.getView().GetIfShowVideoContainer()}},{key:"ShowVideoContainer",value:function(e){return this.getView().ShowVideoContainer(e)}},{key:"UpdateVideoContainer",value:function(e){return this.getView().UpdateVideoContainer(e)}},{key:"GetImageData",value:function(e){var t=this.getView();return 0<=(e=this.convertServerIdToClientIndex(e))?t.GetImageData(this.getUidByIndex(e)):NaN}},{key:"RegistLoadCallback",value:function(e){return this.getView().RegistLoadCallback(e)}},{key:"insertImage",value:function(e,t,n){this.getWebViewer().InsertImage(e,t,n)}}]),e}(),Se=(o.D.UI.ImageManager=Te,o.D.html5.Funs),we=function(e){o.D.dlgProgress||o.D.initProgress();var t=o.D.one(".dynamsoft-btnCancel");t&&t.getEL()&&o.D.addEventListener(t[0],"mousedown",(function(){var t=o.D.cancelFrome;o.D.closeProgress(e,0),1==t||2==t?o.D.bio&&(o.D.bio.abort(),o.D.bio=!1):3==t||4==t?e.SetCancel():5==t&&o.D.isFunction(e.__OnCancel)&&e.__OnCancel()}))};o.D.mix(Se,{changeImageUISize:function(e,t,n){var a,s,u=t,c=n,l=!1,d=o.D.one(e._containerElement);return o.D.isString(t)&&0<=r()(t).call(t,"%")?(0==(a=o.D.css(d,"width"))&&(d[0].style.width="100%"),a=o.D.css(d,"width")*i()(t)/100,l=!0):u=[(a=i()(t))+2,"px"].join(""),o.D.isString(n)&&0<=r()(n).call(n,"%")?(0==(s=o.D.css(d,"height"))&&(d[0].style.height="100%"),s=o.D.css(d,"height")*i()(n)/100,l=!0):c=[(s=i()(n))+2,"px"].join(""),d&&(t=o.D.one(".dynamsoft-dwt-container-box",d))&&t.getEL()&&(t.style("width",u),t.style("height",c)),l?(e.__funResize||(e.__funResize=function(){var t;return!e._ImgManager||!e._containerElement||(t=Se.__innerGetUIViewRealSize(e._containerElement,e._width,e._height),e._ImgManager.ChangeSize(t.width,t.height))}),o.D.removeEventListener(window,"resize",e.__funResize),o.D.addEventListener(window,"resize",e.__funResize)):e.__funResize&&(o.D.removeEventListener(window,"resize",e.__funResize),e.__funResize=!1),n=Se.__innerGetUIViewRealSize(e._containerElement,a,s),!e._ImgManager||e._ImgManager.ChangeSize(n.width,n.height)},__innerGetUIViewRealSize:function(e,t,n){var a=-1,s=-1;return e=o.D.one(e),{width:a=(a=o.D.isString(t)&&0<=r()(t).call(t,"%")?o.D.css(e,"width")*i()(t)/100:a)<0&&t?i()(t):a,height:s=(s=o.D.isString(n)&&0<=r()(n).call(n,"%")?o.D.css(e,"height")*i()(n)/100:s)<0&&n?i()(n):s}},bindUIViewEvents:function(e,t){var n=e;t.onSelected=function(e){var t;n._isNoViewer()||0<(t=e.length)&&(n._ImgManager.SetSelectedImageCount(t),t=e[t-1],o.D.isFunction(n.__OnRefreshUI)&&n.__OnRefreshUI(t))},t.onRefreshUI=function(e){n._isNoViewer()||Se.__innerRefreshFromUIView(n,e)},t.onResetCurrentIndex=function(e){var t;n._isNoViewer()||(t=n._ImgManager.getCurrentImageIndex(),0<=e&&e<n._ImgManager.count()&&t!=e&&o.D.isFunction(n.__OnIndexChangeDuringDragDrop)&&n.__OnIndexChangeDuringDragDrop(t,e))},t.onMouseMove=function(e){var t,r;n._isNoViewer()||(t=e.index,e&&(r=e.x,e=e.y,n.__MouseX=r,n.__MouseY=e),o.D.isFunction(n.__OnMouseMove)&&n.__OnMouseMove(t))},t.onMouseClick=function(e){var t,r;n._isNoViewer()||(t=e.index,e&&(r=e.x,e=e.y,n.__MouseX=r,n.__MouseY=e),o.D.isFunction(n.__OnMouseClick)&&n.__OnMouseClick(t))},t.onMouseDoubleClick=function(e){n._isNoViewer()||(e=e.index,o.D.isFunction(n.__OnMouseDoubleClick)&&n.__OnMouseDoubleClick(e))},t.onMouseRightClick=function(e){var t,r;if(!n._isNoViewer())return t=e.index,e&&(r=e.x,e=e.y,n.__MouseX=r,n.__MouseY=e),!o.D.isFunction(n.__OnMouseRightClick)||n.__OnMouseRightClick(t)},t.onImageAreaSelected=function(e){n._isNoViewer()||o.D.isFunction(n.__OnImageAreaSelected)&&n.__OnImageAreaSelected(e.index,e.left,e.top,e.right,e.bottom,e.areaIndex)},t.onImageAreaDeSelected=function(e){n._isNoViewer()||o.D.isFunction(n.__OnImageAreaDeSelected)&&n.__OnImageAreaDeSelected(e)},t.onBufferChanged=function(e){o.D.isFunction(n.__OnBufferChanged)&&n.__OnBufferChanged(e)}},__innerRefreshFromUIView:function(e,t){o.D.isFunction(e.__OnRefreshUI)&&e.__OnRefreshUI(t)}}),o.D.html5.ui={init:function(e,t){var n,a,s,u,c,l,d;e._isBindViewer()?(t.container?e._containerElement=t.container:t.containerID&&(e._containerElement=o.D.get(t.containerID)),e._width=t.width,e._height=t.height,we(e),a=o.D.one(e._containerElement)):e._containerElement=null,e._ifBindViewer=t.ifBindViewer,a=a,c=!(u={Stwain:n=e}),n._isBindViewer()&&(d=n._width,s=n._height,l=o.D.one(n._containerElement),o.D.isString(d)&&0<=r()(d).call(d,"%")?(d=o.D.css(l,"width")*i()(d)/100,c=!0):d=i()(d),o.D.isString(s)&&0<=r()(s).call(s,"%")?(s=o.D.css(l,"height")*i()(s)/100,c=!0):s=i()(s),u={Stwain:n,Container:a,Width:d,Height:s}),Se.bindUIViewEvents(n,u),n._ImgManager?(n._ImgManager&&n._ImgManager._UIView&&n._ImgManager._UIView.BackgroundColor&&(u.BackgroundColor=n._ImgManager._UIView.BackgroundColor),n._ImgManager._Init(n,u)):n._ImgManager=new Te(n,u),c&&Se.changeImageUISize(n,n._width,n._height),e._ifBindViewer||(d=(d=(l=e).config)||{},l.__OnImageAreaDeSelected=d.onImageAreaDeSelected||"",l.__OnImageAreaSelected=d.onImageAreaSelected||"",l.__OnMouseClick=d.onMouseClick||"",l.__OnMouseDoubleClick=d.onMouseDoubleClick||"",l.__OnMouseMove=d.onMouseMove||"",l.__OnMouseRightClick=d.onMouseRightClick||"",l.__OnTopImageInTheViewChanged=d.onTopImageInTheViewChanged||"",l.__OnBufferChanged=d.onBufferChanged||"",e.__OnMouseClick=t.onMouseClick||"",e.__OnThumbnailMouseClick="",e.__OnKeyDown=t.onKeyDown||"",e.__OnMouseWheel=t.onMouseWheel||"",e.__OnMouseDoubleClick=t.onMouseDoubleClick||"",e.__OnMouseRightClick=t.onMouseRightClick||"",e.__OnMouseMove=t.onMouseMove||"",e.__OnImageAreaSelected=t.onImageAreaSelected||"",e.__OnImageAreaDeSelected=t.onImageAreaDeSelected||"",e.__OnRefreshUI=t.onRefreshUI||"",e.__OnBufferChanged=t.onBufferChanged||"",e.__MouseX=0,e.__MouseY=0,e.__style=new o.D.html5.STwainStyle(e),e.__fSelectionRectAspectRatio=0)},unLoad:function(e){(e=e._containerElement)&&(e.innerHTML="")},initProgress:function(e){we(e)},addMethods:function(e){o.D.mix(e,{OverlayRectangle:function(e,t,n,r,i,a,s){return this._resetErr(),!!this._isValid()&&(this._isNoViewer()?this._nouiNotSupport("OverlayRectangle"):r<t||i<n||t==r&&n==i?(o.D.Errors.Overlay_InvalidLeftOrTopOrRightOrBottom(this),!1):(a=o.D.isNumber(a)?o.D.getColor(a):a,this._ImgManager.OverlayRectangle(e,t,n,r,i,a,s)))},SetViewMode:function(e,t){return this._resetErr(),!!this._isValid()&&(this._isNoViewer()?this._nouiNotSupport("SetViewMode"):o.D.isString(e)||o.D.isString(t)||e<-1&&t<-1?(o.D.Errors.InvalidValue(this),!1):(e=Math.floor(e),t=Math.floor(t),this._ImgManager.SetViewMode(e,t),!0))},Print:function(e){return this._resetErr(),!!this._isValid()&&(this._isNoViewer()?this._nouiNotSupport("Print"):!this._isMobileMode()&&e?this._innerSend("PrintEx",(0,a.dv)(!0),!0,(function(){}),(function(){})):(this._ImgManager.Print(),!0))},PrintEx:function(e){return this._resetErr(),!!this._isValid()&&(o.D.isArray(e)?this._isNoViewer()?this._nouiNotSupport("Print"):!!this._checkIndices(e)&&(this._ImgManager.PrintEx(e),!0):(o.D.Errors.IndicesNotArray(this),!1))},ShowImageEditor:function(e,t,n,r){var i=this;return i._resetErr(),!!i._isValid()&&(i._isNoViewer()?i._nouiNotSupport("ShowImageEditor"):!(!i._isMobileMode()&&Se.isServerInvalid(i))&&(i._ImgManager.getWebViewer().bShowImageEdit?i.ShowImageEditorEx(-1,-1,-1,-1,3):e&&t&&n?i.ShowImageEditorEx(-1,-1,t,n,0,!0,e,r):i.ShowImageEditorEx(-1,-1,-1,-1,0,!1)))},ShowImageEditorEx:function(e,t,n,r,i,o,a,s){return this._resetErr(),!!this._isValid()&&(this._isNoViewer()?this._nouiNotSupport("ShowImageEditorEx"):this._ImgManager.ShowImageEditorEx(e,t,n,r,i,o,a,s))},SetSelectedImageArea:function(e,t,n,r,a){return this._resetErr(),!!this._isValid()&&(this._isNoViewer()?this._nouiNotSupport("SetSelectedImageArea"):(e=i()(e),isNaN(e)||e<0||e>=this._ImgManager.count()?(o.D.Errors.IndexOutOfRange(this),!1):!(!this._isMobileMode()&&Se.isServerInvalid(this))&&this._ImgManager.SetSelectedImageArea(e,t,n,r,a)))},first:function(){var e=this._ImgManager.count();return this._resetErr(),!!this._isValid()&&(this._isNoViewer()?this._nouiNotSupport("first"):(0<e&&(this._ImgManager.Go(0),Se.__innerRefreshFromUIView(this,this._ImgManager.getCurrentImageIndex())),!0))},previous:function(){var e=this._ImgManager.count();return this._resetErr(),!!this._isValid()&&(this._isNoViewer()?this._nouiNotSupport("previous"):(0<e&&(this._ImgManager.__Previous(),Se.__innerRefreshFromUIView(this,this._ImgManager.getCurrentImageIndex())),!0))},next:function(){var e=this._ImgManager.count();return this._resetErr(),!!this._isValid()&&(this._isNoViewer()?this._nouiNotSupport("next"):(0<e&&(this._ImgManager.__Next(),Se.__innerRefreshFromUIView(this,this._ImgManager.getCurrentImageIndex())),!0))},last:function(){var e=this._ImgManager.count();return this._resetErr(),!!this._isValid()&&(this._isNoViewer()?this._nouiNotSupport("last"):(0<e&&(this._ImgManager.Go(e-1),Se.__innerRefreshFromUIView(this,this._ImgManager.getCurrentImageIndex())),!0))}})}}},2766:function(e,t,n){n.r(t),t=n(7711);var r=n.n(t),i=(t=n(5238),n.n(t)),o=(t=n(5005),n.n(t)),a=n(1695),s=n(1188),u=(t=a.D.html5.Funs).DEF;a.D.attachPropertyUI=function(e){u(e,"Width",{get:function(){return e._resetErr(),e._isValid()?e._isNoViewer()?(e._nouiNotSupport("Width"),""):e._ImgManager.GetWidth():""},set:function(t){return e._resetErr(),!!e._isValid()&&(e._isNoViewer()?e._nouiNotSupport("Width"):e._ImgManager.SetWidth(t))}}),u(e,"Height",{get:function(){return e._resetErr(),e._isValid()?e._isNoViewer()?(e._nouiNotSupport("Height"),""):e._ImgManager.GetHeight():""},set:function(t){return e._resetErr(),!!e._isValid()&&(e._isNoViewer()?e._nouiNotSupport("Height"):e._ImgManager.SetHeight(t))}}),u(e,"AllowMultiSelect",{get:function(){return e._resetErr(),e._isValid()?e._isNoViewer()?e._nouiNotSupport("AllowMultiSelect"):e._ImgManager.GetAllowMultiSelect():""},set:function(t){return e._resetErr(),!!e._isValid()&&(e._isNoViewer()?e._nouiNotSupport("AllowMultiSelect"):void e._ImgManager.SetAllowMultiSelect(t))}}),u(e,"BackgroundColor",{get:function(){return e._resetErr(),e._isValid()?e._isNoViewer()?(e._nouiNotSupport("BackgroundColor"),""):e._ImgManager.GetBackgroundColor():""},set:function(t){return e._resetErr(),!!e._isValid()&&(e._isNoViewer()?e._nouiNotSupport("BackgroundColor"):e._ImgManager.SetBackgroundColor(t))}}),u(e,"BackgroundFillColor",{get:function(){if(e._resetErr(),!e._isValid())return"";if(e._isNoViewer())return e._nouiNotSupport("BackgroundFillColor"),"";if(e._isMobileMode())return a.D.isUndefined(t=e.__BackgroundFillColor)&&(t=e._ImgManager._UIView.BackgroundFillColor),a.D.isNumber(t)?a.D.getColor(t):r()(i()(t).call(t,1),16);var t=e._innerFun("BackgroundFillColor");return a.D.BGR2RGB(t)},set:function(t){return e._resetErr(),!!e._isValid()&&(e._isNoViewer()?e._nouiNotSupport("BackgroundFillColor"):!a.D.isNumber(t=+t)||isNaN(t)?(a.D.Errors.InvalidValue(e),!1):e._isMobileMode()?(e._ImgManager._UIView.SetBackgroundFillColor(a.D.getColor(t)),e.__BackgroundFillColor=a.D.getColor(t),!0):(t=a.D.RGB2BGR(t),e._innerFun("BackgroundFillColor",(0,s.dv)(t))))}}),u(e,"FitWindowType",{get:function(){return e._resetErr(),!!e._isValid()&&(e._isNoViewer()?(e._nouiNotSupport("FitWindowType"),0):e._ImgManager.GetFitWindowType())},set:function(t){return e._resetErr(),!!e._isValid()&&(e._isNoViewer()?e._nouiNotSupport("FitWindowType"):e._ImgManager.SetFitWindowType(+t))}}),u(e,"IfFitWindow",{get:function(){return e._resetErr(),!!e._isValid()&&(e._isNoViewer()?e._nouiNotSupport("IfFitWindow"):e._ImgManager.GetIfFitWindow())},set:function(t){return e._resetErr(),!!e._isValid()&&(e._isNoViewer()?e._nouiNotSupport("IfFitWindow"):e._ImgManager.SetIfFitWindow(!!t))}}),u(e,"ImageMargin",{get:function(){return e._resetErr(),e._isValid()?e._isNoViewer()?(e._nouiNotSupport("ImageMargin"),0):e._ImgManager.GetImageMargin():0},set:function(t){return e._resetErr(),!!e._isValid()&&(e._isNoViewer()?e._nouiNotSupport("ImageMargin"):(t=r()(t),!isNaN(t)&&e._ImgManager.SetImageMargin(t)))}}),u(e,"MouseX",{get:function(){return e._resetErr(),e._isValid()?e._isNoViewer()?(e._nouiNotSupport("MouseX"),0):e.__MouseX:0}}),u(e,"MouseY",{get:function(){return e._resetErr(),e._isValid()?e._isNoViewer()?(e._nouiNotSupport("MouseY"),0):e.__MouseY:0}}),u(e,"SelectionImageBorderColor",{get:function(){return e._resetErr(),e._isValid()?e._isNoViewer()?(e._nouiNotSupport("SelectionImageBorderColor"),""):e._ImgManager.GetSelectionImageBorderColor():""},set:function(t){return e._resetErr(),!!e._isValid()&&(e._isNoViewer()?e._nouiNotSupport("SelectionImageBorderColor"):e._ImgManager.SetSelectionImageBorderColor(t))}}),u(e,"Zoom",{get:function(){return e._resetErr(),e._isValid()?e._isNoViewer()?(e._nouiNotSupport("Zoom"),0):e._ImgManager.GetZoom():0},set:function(t){return e._resetErr(),!!e._isValid()&&(e._isNoViewer()?e._nouiNotSupport("Zoom"):e._ImgManager.SetZoom(t))}}),u(e,"MouseShape",{get:function(){return e._resetErr(),!!e._isValid()&&(e._isNoViewer()?e._nouiNotSupport("MouseShape"):e._ImgManager.GetMouseShape()==a.I.DWT.EnumDWT_MouseShape.Hand)},set:function(t){if(e._resetErr(),!e._isValid())return!1;if(e._isNoViewer())return e._nouiNotSupport("MouseShape");var n=a.I.DWT.EnumDWT_MouseShape.Crosshair;return t&&(n=a.I.DWT.EnumDWT_MouseShape.Hand),e._ImgManager.SetMouseShape(n)}}),u(e,"SelectionRectAspectRatio",{get:function(){return e._resetErr(),e._isValid()?e._isNoViewer()?(e._nouiNotSupport("SelectionRectAspectRatio"),0):e._ImgManager.GetSelectionRectAspectRatio():0},set:function(t){return e._resetErr(),!!e._isValid()&&(e._isNoViewer()?e._nouiNotSupport("SelectionRectAspectRatio"):0<=(t=o()(t))&&(e._ImgManager.SetSelectionRectAspectRatio(t),!0))}}),u(e,"ShowPageNumber",{get:function(){return e._resetErr(),!!e._isValid()&&(e._isNoViewer()?e._nouiNotSupport("ShowPageNumber"):e._ImgManager.GetShowPageNumber())},set:function(t){return e._resetErr(),!!e._isValid()&&(e._isNoViewer()?e._nouiNotSupport("ShowPageNumber"):e._ImgManager.SetShowPageNumber(t))}}),u(e,"IfAutoScroll",{get:function(){return e._resetErr(),!!e._isValid()&&(e._isNoViewer()?e._nouiNotSupport("IfAutoScroll"):e._ImgManager.GetIfAutoScroll())},set:function(t){return e._resetErr(),!!e._isValid()&&(e._isNoViewer()?e._nouiNotSupport("IfAutoScroll"):e._ImgManager.SetIfAutoScroll(t))}})},a.D.detect.viewerScriptLoaded=!0},7821:function(e,t,n){n.r(t),t=n(1006);var r,i=n.n(t),o=(t=n(4579),n.n(t)),a=(t=n(5005),n.n(t)),s=(t=n(5683),n.n(t)),u=(t=n(7711),n.n(t)),c=(t=n(5238),n.n(t)),l=n(1695),h=n(1188),f=l.D.html5.Funs,m=function(e,t){return 0!=e._ImgManager.count()||(l.D.Errors.NoImage(e),l.D.isFunction(t)&&t(e.ErrorCode,e.ErrorString),!1)},p=function(e,t,n){return!(!m(e,n)||(isNaN(t)||!l.D.isNumber(t)||t<0||t>=e._ImgManager.count())&&(l.D.Errors.IndexOutOfRange(e),l.D.isFunction(n)&&n(e.ErrorCode,e.ErrorString),1))},_=function(e,t,n,r){if(0==e._ImgManager.count())return l.D.Errors.NoImage(e),l.D.isFunction(r)&&r(t),!1;if(l.D.isNumber(t)){if(isNaN(t)||t<-2||t>=e._ImgManager.count())return l.D.Errors.IndexOutOfRange(e),l.D.isFunction(r)&&r(t),!1}else{if(!l.D.isArray(t))return l.D.Errors.IndexOutOfRange(e),l.D.isFunction(r)&&r(t),!1;for(var i=0;i<t.length;i++){var o=t[i];if(isNaN(o)||!l.D.isNumber(o)||o<0||o>=e._ImgManager.count())return l.D.Errors.IndicesOutOfRange(e),l.D.isFunction(r)&&r(t),!1}}if(n==l.I.DWT.EnumDWT_ImageType.IT_BMP||n==l.I.DWT.EnumDWT_ImageType.IT_JPG||n==l.I.DWT.EnumDWT_ImageType.IT_PNG||n==l.I.DWT.EnumDWT_ImageType.IT_J2K)(-1==t&&1<e._ImgManager.count()||l.D.isArray(t)&&1<t.length)&&(l.D.Errors.UploadIndexMoreThanOne(e),l.D.isFunction(r)&&r(t));else if(n!=l.I.DWT.EnumDWT_ImageType.IT_TIF&&n!=l.I.DWT.EnumDWT_ImageType.IT_PDF)return l.D.Errors.InvalidImageType(e),l.D.isFunction(r)&&r(t),!1;return!0},v=function(e){var t,n,r=[];return e._ImgManager.count()<=0||(0<=(n=e._ImgManager.getCurrentImageIndex())&&(t=e._ImgManager.convertClientIndexToServerId(n)),n=e._ImgManager.getSelectedClientIndexArray(),l.D.isArray(n)&&l.D.each(n,(function(t){-1!=(t=e._ImgManager.convertClientIndexToServerId(t))&&r.push(t)})),-1!=t&&0==r.length&&r.push(t)),r},I=function(e){if(e._ImgManager.count()<=0)return[];var t=e._ImgManager.getSelectedClientIndexArray();return l.D.isArray(t)?(0==t.length&&0<=(e=e._ImgManager.getCurrentImageIndex())&&t.push(e),t):[]},y=function(e,t){for(var n=e._ImgManager.GetAllServerIdList(),r=0;r<n.length;r++)t.push(n[r])},b=function(e,t,n,r,i){try{e(t,n,r,i)}catch(d){}},D=function(e,t,n){try{e(t.ErrorCode,t.ErrorString,n)}catch(g){}},T=function(e,t,n,r,i,o){try{e(t.ErrorCode,t.ErrorString,n,r,i,o)}catch(p){}};(n=(t=l.D.html5.STwain).prototype)._asyncSaveImage=function(e,t,n,r,s){var u,c,d=this,g=!0,m=l.D.isString(n)?n.toLowerCase():"",p=function(n,a,s){var u=l.D.isString(u=e)&&""!=u?(u=i()(l.D).call(l.D,u,"\\\\","_"),i()(l.D).call(l.D,u,":","_")):"img"+l.D.getRandom()+"."+m;!g&&l.D.isString(n)?(a=["png"==a?"data:image/png;base64,":"jpg"==a?"data:image/jpeg;base64,":"tiff"==a||"tif"==a?"data:image/tif;base64,":"pdf"==a?"data:application/pdf;base64,":"bmp"==a?"data:image/bmp;base64,":"jp2"==a?"data:image/jp2;base64,":"data:application/octet-stream;base64,",n].join(""),l.D.MobileFuns.saveLocal(a,u,m)):l.D.MobileFuns.saveLocal(n,u,m),f.refreshImageAfterInvokeFun(d,t),l.D.isFunction(r)&&o()(r,30)},_=function(){l.D.isFunction(s)&&s(d.ErrorCode,d.ErrorString)},v=(n=window,l.I.navInfo);return n=n.requestFileSystem||n.webkitRequestFileSystem||n.mozRequestFileSystem,!v.biPad&&!v.biPhone||n||!(v.bSafari&&a()(v.strBrowserVersion)<13)&&v.bSafari?d._innerSendToMobile("SaveImage",(0,h.An)(e,t,m,1,g),0,p,_):(g=!1,n=-1,n="png"==m?l.I.DWT.EnumDWT_ImageType.IT_PNG:"jpg"==m?l.I.DWT.EnumDWT_ImageType.IT_JPG:"tiff"==m||"tif"==m?l.I.DWT.EnumDWT_ImageType.IT_TIF:"pdf"==m?l.I.DWT.EnumDWT_ImageType.IT_PDF:"bmp"==m?l.I.DWT.EnumDWT_ImageType.IT_BMP:"jp2"==m?l.I.DWT.EnumDWT_ImageType.IT_J2K:l.I.DWT.EnumDWT_ImageType.IT_PNG,u=[],c=function(e){if(l.D.isArray(e=e&&e.result)&&3==e.length)return p(e[0],e[1])},l.D.isArray(t)&&l.D.each(t,(function(e){-1!=(e=d._ImgManager.convertClientIndexToServerId(e))&&u.push(e)})),d.__innerConvertToBase64ByMobile(e,u,n,1,c,_))},n.SaveAllAsMultiPageTIFF=function(e,t,n){var r=this;if(r._resetErr(),!r._isValid())return!1;if(!l.D.License.checkProductKey(r,{Core:!0})&&!l.D.License.checkProductKey(r,{Webcam:!0},!0))return l.D.isFunction(n)&&n(r.ErrorCode,r.ErrorString),!1;if(!m(r,n))return!1;var i=[],o=f.replaceLocalFilename(e);if(r._isMobileMode()){if(!o||""==o)return l.D.Errors.InvalidFile(r),l.D.isFunction(n)&&D(n,r),!1;for(var a=[],s=0;s<r.HowManyImagesInBuffer;s++)a.push(s);return r._asyncSaveImage(e,a,"tiff",t,n)}return y(r,i),r.__innerSaveImage("SaveSelectedImagesAsMultiPageTIFF",(0,h.dv)(o,i.join(",")),t,n)},n.SaveAllAsPDF=function(e,t,n){var r=this;if(r._resetErr(),!r._isValid())return!1;if(!l.D.License.checkProductKey(r,{Core:!0})&&!l.D.License.checkProductKey(r,{Webcam:!0},!0))return l.D.isFunction(n)&&n(r.ErrorCode,r.ErrorString),!1;if(!m(r,n))return!1;var i=[],o=f.replaceLocalFilename(e);if(r._isMobileMode()){if(!o||""==o)return l.D.Errors.InvalidFile(r),l.D.isFunction(n)&&D(n,r),!1;for(var a=[],s=0;s<r.HowManyImagesInBuffer;s++)a.push(s);return r._asyncSaveImage(e,a,"pdf",t,n)}return y(r,i),r.__innerSaveImage("SaveSelectedImagesAsMultiPagePDF",(0,h.dv)(o,i.join(",")),t,n)},n.SaveAsBMP=function(e,t,n,r){var i=this;return i._resetErr(),!!i._isValid()&&(i._isMobileMode()?i._mobileNotSupport("SaveAsBMP",r):l.D.License.checkProductKey(i,{Core:!0})||l.D.License.checkProductKey(i,{Webcam:!0},!0)?(e=f.replaceLocalFilename(e),!!p(i,t,r)&&(-1==(t=i._ImgManager.convertClientIndexToServerId(t))?(l.D.Errors.IndexOutOfRange(i),l.D.isFunction(r)&&D(r,i),!1):i.__innerSaveImage("SaveAsBMP",(0,h.dv)(e,t),n,r))):(l.D.isFunction(r)&&r(i.ErrorCode,i.ErrorString),!1))},n.SaveAsJPEG=function(e,t,n,r){var i=this;if(i._resetErr(),!i._isValid())return!1;if(!l.D.License.checkProductKey(i,{Core:!0})&&!l.D.License.checkProductKey(i,{Webcam:!0},!0))return l.D.isFunction(r)&&r(i.ErrorCode,i.ErrorString),!1;if(!p(i,t,r))return!1;var o=f.replaceLocalFilename(e);return i._isMobileMode()?o&&""!=o?i._asyncSaveImage(e,[t],"jpg",n,r):(l.D.Errors.InvalidFile(i),l.D.isFunction(r)&&D(r,i),!1):-1==(e=i._ImgManager.convertClientIndexToServerId(t))?(l.D.Errors.IndexOutOfRange(i),l.D.isFunction(r)&&D(r,i),!1):i.__innerSaveImage("SaveAsJPEG",(0,h.dv)(o,e),n,r)},n.SaveAsPDF=function(e,t,n,r){var i=this;if(i._resetErr(),!i._isValid())return!1;if(!l.D.License.checkProductKey(i,{Core:!0})&&!l.D.License.checkProductKey(i,{Webcam:!0},!0))return l.D.isFunction(r)&&r(i.ErrorCode,i.ErrorString),!1;if(!p(i,t,r))return!1;var o=f.replaceLocalFilename(e);return i._isMobileMode()?o&&""!=o?i._asyncSaveImage(e,[t],"pdf",n,r):(l.D.Errors.InvalidFile(i),l.D.isFunction(r)&&D(r,i),!1):-1==(e=i._ImgManager.convertClientIndexToServerId(t))?(l.D.Errors.IndexOutOfRange(i),l.D.isFunction(r)&&D(r,i),!1):i.__innerSaveImage("SaveAsPDF",(0,h.dv)(o,e),n,r)},n.SaveAsPNG=function(e,t,n,r){var i=this;if(i._resetErr(),!i._isValid())return!1;if(!l.D.License.checkProductKey(i,{Core:!0})&&!l.D.License.checkProductKey(i,{Webcam:!0},!0))return l.D.isFunction(r)&&r(i.ErrorCode,i.ErrorString),!1;if(!p(i,t,r))return!1;var o=f.replaceLocalFilename(e);return i._isMobileMode()?o&&""!=o?i._asyncSaveImage(e,[t],"png",n,r):(l.D.Errors.InvalidFile(i),l.D.isFunction(r)&&D(r,i),!1):-1==(e=i._ImgManager.convertClientIndexToServerId(t))?(l.D.Errors.IndexOutOfRange(i),l.D.isFunction(r)&&D(r,i),!1):i.__innerSaveImage("SaveAsPNG",(0,h.dv)(o,e),n,r)},n.SaveAsTIFF=function(e,t,n,r){var i=this;if(i._resetErr(),!i._isValid())return!1;if(!l.D.License.checkProductKey(i,{Core:!0})&&!l.D.License.checkProductKey(i,{Webcam:!0},!0))return l.D.isFunction(r)&&r(i.ErrorCode,i.ErrorString),!1;if(!p(i,t,r))return!1;var o=f.replaceLocalFilename(e);return i._isMobileMode()?o&&""!=o?i._asyncSaveImage(e,[t],"tiff",n,r):(l.D.Errors.InvalidFile(i),l.D.isFunction(r)&&D(r,i),!1):-1==(e=i._ImgManager.convertClientIndexToServerId(t))?(l.D.Errors.IndexOutOfRange(i),l.D.isFunction(r)&&D(r,i),!1):i.__innerSaveImage("SaveAsTIFF",(0,h.dv)(o,e),n,r)},n.SaveAsGIF=function(e,t,n,r){var i=this;return i._resetErr(),!!i._isValid()&&(i._isMobileMode()?(l.D.Errors.HTML5NotSupport(i),l.D.isFunction(r)&&D(r,i),!1):l.D.License.checkProductKey(i,{Core:!0})||l.D.License.checkProductKey(i,{Webcam:!0},!0)?(e=f.replaceLocalFilename(e),!!p(i,t,r)&&(-1==(t=i._ImgManager.convertClientIndexToServerId(t))?(l.D.Errors.IndexOutOfRange(i),l.D.isFunction(r)&&D(r,i),!1):i.__innerSaveImage("SaveAsGIF",(0,h.dv)(e,t),n,r))):(l.D.isFunction(r)&&r(i.ErrorCode,i.ErrorString),!1))},n.SaveSelectedImagesAsMultiPagePDF=function(e,t,n){var r=this;if(r._resetErr(),!r._isValid())return!1;if(!l.D.License.checkProductKey(r,{Core:!0})&&!l.D.License.checkProductKey(r,{Webcam:!0},!0))return l.D.isFunction(n)&&n(r.ErrorCode,r.ErrorString),!1;var i=f.replaceLocalFilename(e);if(r._isMobileMode()){if(!i||""==i)return l.D.Errors.InvalidFile(r),l.D.isFunction(n)&&D(n,r),!1;var o=I(r);return r._asyncSaveImage(e,o,"pdf",t,n)}return e=v(r),r.__innerSaveImage("SaveSelectedImagesAsMultiPagePDF",(0,h.dv)(i,e.join(",")),t,n)},n.SaveSelectedImagesAsMultiPageTIFF=function(e,t,n){var r=this;if(r._resetErr(),!r._isValid())return!1;if(!l.D.License.checkProductKey(r,{Core:!0})&&!l.D.License.checkProductKey(r,{Webcam:!0},!0))return l.D.isFunction(n)&&n(r.ErrorCode,r.ErrorString),!1;var i=f.replaceLocalFilename(e);if(r._isMobileMode()){if(!i||""==i)return l.D.Errors.InvalidFile(r),l.D.isFunction(n)&&D(n,r),!1;var o=I(r);return r._asyncSaveImage(e,o,"tiff",t,n)}return e=v(r),r.__innerSaveImage("SaveSelectedImagesAsMultiPageTIFF",(0,h.dv)(i,e.join(",")),t,n)},n.SaveSelectedImagesToBase64Binary=function(e,t){var n=this;if(n._resetErr(),!n._isValid())return!1;if(!l.D.License.checkProductKey(n,{Core:!0})&&!l.D.License.checkProductKey(n,{Webcam:!0},!0))return l.D.isFunction(t)&&t(n.ErrorCode,n.ErrorString),!1;if(n._isMobileMode())return n._mobileNotSupport("SaveSelectedImagesToBase64Binary",t);var r=v(n);return l.D.isFunction(e)?n._innerSend("SaveSelectedImagesToBase64Binary",(0,h.dv)(r.join(",")),!0,e,t):n._innerFun("SaveSelectedImagesToBase64Binary",(0,h.dv)(r.join(",")))},n.ShowFileDialog=function(e,t,n,r,i,o,a,s){if(this._resetErr(),!this._isValid())return!1;if(this._isMobileMode())return this._mobileNotSupport("ShowFileDialog");i=f.replaceLocalFilename(i);var u=this.__GetLoadEventsNum();return this._innerSend("ShowFileDialog",(0,h.dv)(e,t,n,r,i,o,a,s,u),!0)},n.FTPDownload=function(e,t,n,r){if(this._resetErr(),!this._isValid())return!1;if(this._isMobileMode())return this._mobileNotSupport("FTPDownload",r);if(!e)return l.D.Errors.InvalidParameter(this),l.D.isFunction(r)&&r(this.ErrorCode,this.ErrorString),!1;var i=l.D.html5.Funs.getImageType(t);return this.__innerFTPDownload("FTPDownload",(0,h.dv)(e,t),i,n,r)},n.FTPDownloadEx=function(e,t,n,r,i){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("FTPDownloadEx",i):e?this.__innerFTPDownload("FTPDownloadEx",(0,h.dv)(e,t,n),n,r,i):(l.D.Errors.InvalidParameter(this),l.D.isFunction(i)&&i(this.ErrorCode,this.ErrorString),!1))},n.FTPUpload=function(e,t,n,r,i){if(this._resetErr(),!this._isValid())return!1;if(this._isMobileMode())return this._mobileNotSupport("FTPUpload",i);var o=this._ImgManager.convertClientIndexToServerId(t);return!!p(this,t,i)&&(-1==o?(l.D.Errors.IndexOutOfRange(this),l.D.isFunction(i)&&D(i,this),!1):this.__innerFTPUpload("FTPUpload",(0,h.dv)(e,o,n),r,i))},n.FTPUploadEx=function(e,t,n,r,i,o){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("FTPUploadEx",o):!!p(this,t,o)&&(-1==(t=this._ImgManager.convertClientIndexToServerId(t))?(l.D.Errors.IndexOutOfRange(this),l.D.isFunction(o)&&D(o,this),!1):this.__innerFTPUpload("FTPUploadEx",(0,h.dv)(e,t,n,r),i,o)))},n.FTPUploadAllAsMultiPageTIFF=function(e,t,n,r){if(this._resetErr(),!this._isValid())return!1;if(this._isMobileMode())return this._mobileNotSupport("FTPUploadAllAsMultiPageTIFF",r);var i=[];return y(this,i),this.__innerFTPUpload("FTPUploadAsMultiPageTIFF",(0,h.dv)(e,t,i.join(",")),n,r)},n.FTPUploadAllAsPDF=function(e,t,n,r){if(this._resetErr(),!this._isValid())return!1;if(this._isMobileMode())return this._mobileNotSupport("FTPUploadAllAsPDF",r);var i=[];return y(this,i),this.__innerFTPUpload("FTPUploadAsMultiPagePDF",(0,h.dv)(e,t,i.join(",")),n,r)},n.FTPUploadAsMultiPagePDF=function(e,t,n,r){if(this._resetErr(),!this._isValid())return!1;if(this._isMobileMode())return this._mobileNotSupport("FTPUploadAsMultiPagePDF",r);var i=v(this);return this.__innerFTPUpload("FTPUploadAsMultiPagePDF",(0,h.dv)(e,t,i.join(",")),n,r)},n.FTPUploadAsMultiPageTIFF=function(e,t,n,r){if(this._resetErr(),!this._isValid())return!1;if(this._isMobileMode())return this._mobileNotSupport("FTPUploadAsMultiPageTIFF",r);var i=v(this);return this.__innerFTPUpload("FTPUploadAsMultiPageTIFF",(0,h.dv)(e,t,i.join(",")),n,r)},n.HTTPDownload=function(e,t,n,r){if(this._resetErr(),!this._isValid())return l.D.Promise.reject({code:this.ErrorCode,message:this.ErrorString});var i=f.getImageType(t);return this.HTTPDownloadThroughGet(e,t,i,n,r)},t.prototype.HTTPDownloadEx=function(e,t,n,r,i){return this._resetErr(),this._isValid()?this._isMobileMode()?this._mobileNotSupport("HTTPDownloadEx",i):this.HTTPDownloadThroughGet(e,t,n,r,i):l.D.Promise.reject({code:this.ErrorCode,message:this.ErrorString})},n.HTTPDownloadDirectly=function(e,t,n,i,o){var a=this;if(a._resetErr(),!a._isValid())return!1;if(!l.D.License.checkProductKey(a,{Core:!0}))return l.D.isFunction(o)&&o(a.ErrorCode,a.ErrorString),!1;if(a._isMobileMode())return a._mobileNotSupport("HTTPDownloadDirectly",o);var s,u=r.GetHttpHeadersAndClear(a);if(!1===(e=f.combineUrl(a,e,t)))return l.D.Errors.ParameterCannotEmpty(a),!1;if(!n||""==n)return l.D.Errors.InvalidLocalFilename(a,"HTTPDownloadDirectly"),l.D.isFunction(o)&&D(o,a),!1;if(t=l.D.html5.Funs.getImageType(n),f.isServerInvalid(a))return l.D.isFunction(o)&&D(o,a),!1;if(!l.D.License.checkPDFProductKeyWhenNeeds(a,t))return l.D.isFunction(o)&&o(a._errorCode,a._errorString),!1;l.D.cancelFrome=2,s=f.replaceLocalFilename(n),l.D.showProgress(a,"HTTPDownloadDirectly",!0);var c=!0;return a._OnPercentDone([0,-1,l.I.MSG.Downloading,"http"]),l.D.isFunction(i)||(c=!1),f.loadHttpBlob(a,"get",e,c,(function(e){return a._OnPercentDone([0,-1,l.I.MSG.Loading]),a.__LoadImageFromBytes(e,3,s,c,i,o)}),(function(){return l.D.closeProgress(a,"HTTPDownloadDirectly"),l.D.isFunction(o)&&D(o,a),!1}),(function(e){var t=0===e.total?100:Math.round(100*e.loaded/e.total);[e.loaded," / ",e.total].join(""),a._OnPercentDone([0,t,"","http"])}),u)},n.HTTPUploadThroughPostDirectly=function(e,t,n,r,i,o){var a=this;if(a._resetErr(),!a._isValid())return!1;if(a._isMobileMode())return a._mobileNotSupport("HTTPUploadThroughPostDirectly",o);n=f.combineUrl(a,e,n);var s=function(){l.D.isFunction(o)&&D(o,a,a.__HTTPPostResponseString)};return(a.__HTTPPostResponseString="")===e?(l.D.Errors.HttpServerCannotEmpty(a),s(),!1):a._innerUploadDirectly(n,t,r,!0,!1,0,!0,!1,i,s)},n._innerUploadDirectly=function(e,t,n,i,o,a,s,u,c,d){var h=this,g=r.GetHttpHeadersAndClear(h),m="HTTPUploadThroughPostDirectly",p=!0;if(!1===e||""===e)return l.D.Errors.ParameterCannotEmpty(h),l.D.isFunction(d)&&d(h.ErrorCode,h.ErrorString),!1;if(l.D.isFunction(c)||(p=!1),!l.D.License.checkProductKey(h,{Core:!0}))return l.D.isFunction(d)&&d(h.ErrorCode,h.ErrorString),!1;l.D.cancelFrome=1;var _=function(){return l.D.needShowTwiceShowDialog=!1,i&&l.D.closeProgress(h,m),l.D.isFunction(d)&&d(h.ErrorCode,h.ErrorString),!1};return l.D.needShowTwiceShowDialog=!0,i&&l.D.showProgress(h,m,!1),(t=f.replaceLocalFilename(t))&&""!=t?u&&u.bCancel?(u.st=2,_()):h.__SaveLocalFileToBytes(t,p,o,(function(t){return l.D.needShowTwiceShowDialog=!1,u&&u.bCancel?(u.st=2,_()):t&&(0<l.D.dlgRef||0==h.__IfShowCancelDialogWhenImageTransfer||0==p||!1===i)?(t instanceof File?t.fileName=n:t.name=n,f.setBtnCancelVisibleForProgress(h,!0),f.httpPostUpload(h,e,t,p,0,g,!0,a,s,u,(function(e){i&&l.D.closeProgress(h,m),l.D.isFunction(c)&&b(c,e)}),_)):(_(),!1)}),_):(l.D.Errors.InvalidFile(h),_(),!1)},n._innerUploadFilesDirectly=function(e,t,n,i,o,a,s,u,c){var d,h=this,g=r.GetHttpHeadersAndClear(h),m="HTTPUploadThroughPostDirectly",p=!0,_=[];if(!1===e||""===e)return l.D.Errors.ParameterCannotEmpty(h),l.D.isFunction(c)&&c(h.ErrorCode,h.ErrorString,t),!1;if(l.D.isFunction(u)||(p=!1),!l.D.License.checkProductKey(h,{Core:!0}))return l.D.isFunction(c)&&c(h.ErrorCode,h.ErrorString,t),!1;l.D.cancelFrome=1;var v=function(){return l.D.needShowTwiceShowDialog=!1,i&&l.D.closeProgress(h,m),l.D.isFunction(c)&&c(t),!1},I=(l.D.needShowTwiceShowDialog=!0,i&&l.D.showProgress(h,m,!1),l.D.each(t,(function(e){if(!(e=f.replaceLocalFilename(e))||""==e)return l.D.Errors.InvalidFile(h),v(),!1;_.push(e)})),[]),y=_.length,D=0;return l.D.each(_,(function(t,r){d=h.__SaveLocalFileToBytes(t,p,o,(function(t){if(l.D.needShowTwiceShowDialog=!1,!t||!(0<l.D.dlgRef||0==h.__IfShowCancelDialogWhenImageTransfer||0==p||!1===i))return i&&l.D.closeProgress(h,m),l.D.isFunction(v)&&v(),!1;var o=f.cformat(n,r+1);return t instanceof File?t.fileName=o:t.name=o,I[r]=t,++D==y?(f.setBtnCancelVisibleForProgress(h,!0),f.httpPostUploadFiles(h,e,I,p,0,g,i,a,s,(function(e){i&&l.D.closeProgress(h,m),l.D.isFunction(u)&&b(u,e)}),(function(){i&&l.D.closeProgress(h,m),l.D.isFunction(v)&&v()}))):void 0}),(function(){i&&l.D.closeProgress(h,m),l.D.isFunction(v)&&v()}))})),d},n.HTTPUploadThroughPost=function(e,t,n,r,i,o,a){var s=this;if(s._resetErr(),!s._isValid())return!1;if(s._isMobileMode())return s._mobileNotSupport("HTTPUploadThroughPost",o);var u=f.getImageType(r),c=arguments,d=!1,h=function(e){return l.D.isFunction(o)&&T(o,s,s.__HTTPPostResponseString,e,c),!1};return l.D.isString(r)&&""!=r?(i&&l.D.isFunction(i)&&(d=function(e,t){return b(i,s.__HTTPPostResponseString,t,c),!0}),!!_(s,t,u,h)&&s.innerHTTPUploadPost(e,t,n,r,u,d,h,a)):(l.D.Errors.UploadFileCannotEmpty(s),h())},n.HTTPUploadThroughPostEx=function(e,t,n,r,i,o,a,s){var u=this;if(u._resetErr(),!u._isValid())return!1;if(u._isMobileMode())return u._mobileNotSupport("HTTPUploadThroughPostEx",a);var c=arguments,d=!1,h=function(e){return l.D.isFunction(a)&&T(a,u,u.__HTTPPostResponseString,e,c),!1};return l.D.isString(r)&&""!=r?(o&&l.D.isFunction(o)&&(d=function(e,t){return b(o,u.__HTTPPostResponseString,t,c),!0}),!!_(u,t,i,h)&&u.innerHTTPUploadPost(e,t,n,r,i,d,h,s)):(l.D.Errors.UploadFileCannotEmpty(u),h())},n.innerHTTPUploadPost=function(e,t,n,i,o,a,u,c){var d,h=this,g="HTTPUploadThroughPostEx",m=f.combineUrl(h,e,n),p=!0,_=!1,v=[],I=function(e){return l.D.isFunction(u)&&u(e),!1};if(h.__HTTPPostResponseString="",l.D.isNumber(t)){if(t<-2)return l.D.Errors.IndexOutOfRange(h),I(t)}else if(!l.D.isArray(t))return l.D.Errors.IndexOutOfRange(h),I(t);if(!l.D.isString(i)||""==i)return l.D.Errors.UploadFileCannotEmpty(h),I();if(l.D.isUndefined(o))return l.D.Errors.InvalidImageType(h),I(t);if(o==l.I.DWT.EnumDWT_ImageType.IT_BMP||o==l.I.DWT.EnumDWT_ImageType.IT_JPG||o==l.I.DWT.EnumDWT_ImageType.IT_PNG||o==l.I.DWT.EnumDWT_ImageType.IT_J2K){if(-1==t&&1<h._ImgManager.count()||l.D.isArray(t)&&1<t.length)return l.D.Errors.UploadIndexMoreThanOne(h),I(t);l.D.isArray(t)?v.push(t[0]):v.push(-1==t?0:t)}else{if(o!=l.I.DWT.EnumDWT_ImageType.IT_TIF&&o!=l.I.DWT.EnumDWT_ImageType.IT_PDF)return l.D.Errors.InvalidImageType(h),I(t);if(-1==t){if(0==h._ImgManager.count())return l.D.Errors.NoImage(h),I();for(d=0;d<h._ImgManager.count();d++)v.push(d)}else if(-2==t)v=h._ImgManager.getSelectedClientIndexArray();else if(l.D.isArray(t))for(d=0;d<t.length;d++)v.push(t[d]);else v.push(t)}if(h._isMobileMode()?p=!0:l.D.isFunction(a)||(p=!1),""===e)return l.D.Errors.HttpServerCannotEmpty(h),I(v);if(l.D.isUndefined(m)||""===m)return l.D.Errors.ParameterCannotEmpty(h),I(v);if(!l.D.isString(m))return l.D.Errors.InvalidUrl(h),I(v);if(0!=s()(m).call(m,"http://")&&0!=s()(m).call(m,"https://")&&(m=l.D.detect.ssl?"https://"+m:"http://"+m),!h._isMobileMode()&&f.isServerInvalid(h))return I(v);if(!h._checkIndices(v)&&-1!=v)return I(v);var y,b,D=[];return l.D.isArray(v)&&l.D.each(v,(function(e){-1!=(e=h._ImgManager.convertClientIndexToServerId(e))&&D.push(e)})),h._resetErr(),!!h._isValid()&&(p?(l.D._asyncUploadCmd(n={bOnlyUploadForm:!1,method:"HTTPUploadThroughPostEx",_this:h,url:m,serverIds:D,enumImageType:o,saveSetup:!1,fileName:i,retry:0,bOnlyEmptyIsOK:!0,objUploadFileStatus:!1,dataFormat:l.I.DWT.EnumDWT_UploadDataFormat.Binary,asyncSuccessFunc:a,asyncFailureFunc:I}),!0):(l.D.cancelFrome=1,y=function(){return l.D.needShowTwiceShowDialog=!1,l.D.closeProgress(h,g),I(v),!1},l.D.needShowTwiceShowDialog=!0,l.D.showProgress(h,g,!1),b=r.GetHttpHeadersAndClear(h),h._OnPercentDone([0,-1,l.I.MSG.Encoding,"http"]),h.__innerConvertToBlob(o,D,!1,p,4,(function(e,t,n){if(l.D.needShowTwiceShowDialog=!1,e&&(0<l.D.dlgRef||0==h.__IfShowCancelDialogWhenImageTransfer||0==p)){var r=h.MaxUploadImageSize;return r<e.size&&-1!=r?(l.D.Errors.UploadExceededMaxSize(h),y()):(l.I.DWT.IfAddMD5InUploadHeader&&t&&""!=t&&(b["dwt-md5"]=t),e instanceof File?e.fileName=i:e.name=i,f.setBtnCancelVisibleForProgress(h,!0),f.httpPostUpload(h,m,e,p,0,b,!0,0,!0,!1,(function(e){return l.D.closeProgress(h,g),_=!0}),y))}return y()}),y),_))},n._checkIndices=function(e){var t,n;if(!l.D.isArray(e))return l.D.Errors.IndicesNotArray(this),!1;if(0==e.length)return l.D.Errors.IndicesCannotEmpty(this),!1;if(l.I.DWT.ConnectWithSocket)return!0;for(t=this._ImgManager.count(),n=0;n<e.length;n++){var r=e[n];if(l.D.isUndefined(r)||null===r)return l.D.Errors.IndexNullOrUndefined(this),!1;if(r=u()(r),isNaN(r))return l.D.Errors.InvalidIndex(this),!1;if(r<0||t<=r)return l.D.Errors.IndicesOutOfRange(this),!1}return!0},n.SetUploadSegment=function(e,t){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("SetUploadSegment"):!l.D.isNumber(e)||e<0?(l.D.Errors.InvalidSegmentUploadThreshold(this),!1):!l.D.isNumber(t)||t<=0?(l.D.Errors.InvalidModuleSize(this),!1):(this._segementUploadThreshold=1024*e*1024,this._moduleSize=1024*t,!0))},n.HTTPUpload=function(e,t,n,r,i,o,a){var s=this;if(s._resetErr(),!s._isValid())return!1;if(l.D.isUndefined(e))return l.D.Errors.InvalidParameter(s),l.D.isFunction(a)&&a(s.ErrorCode,s.ErrorString),!1;var u,c,d,h=arguments;if(arguments.length<=3)c=!!l.D.isFunction(t)&&function(){t(s.__HTTPPostResponseString,e,h)},u={bOnlyUploadForm:!0,_this:s,url:e,asyncSuccessFunc:c,asyncFailureFunc:d=function(){l.D.isFunction(n)&&T(n,s,s.__HTTPPostResponseString,e,h)}};else{var g,f=[];if(d=l.D.isFunction(i)?(g="RemoteFile",c=function(e,t){i(s.__HTTPPostResponseString,t,h)},function(e){l.D.isFunction(o)&&T(o,s,s.__HTTPPostResponseString,e,h)}):(g=l.D.isString(i)?i:"RemoteFile",c=!!l.D.isFunction(o)&&function(e,t){b(o,s.__HTTPPostResponseString,t,h)},function(e){l.D.isFunction(a)&&T(a,s,s.__HTTPPostResponseString,e,h)}),!s._checkIndices(t))return d(t),!1;if(l.D.isArray(t)&&l.D.each(t,(function(e){-1!=(e=s._ImgManager.convertClientIndexToServerId(e))&&f.push(e)})),0==f.length)return l.D.Errors.InvalidIndex(s),d(t),!1;if(l.D.isUndefined(n))return l.D.Errors.InvalidImageType(s),d(t),!1;if(n==l.I.DWT.EnumDWT_ImageType.IT_BMP||n==l.I.DWT.EnumDWT_ImageType.IT_JPG||n==l.I.DWT.EnumDWT_ImageType.IT_PNG){if(1<f.length)return l.D.Errors.UploadIndexMoreThanOne(s),d(t),!1}else if(n!=l.I.DWT.EnumDWT_ImageType.IT_TIF&&n!=l.I.DWT.EnumDWT_ImageType.IT_PDF)return l.D.Errors.InvalidImageType(s),d(t),!1;if(l.D.isUndefined(r)||r!=l.I.DWT.EnumDWT_UploadDataFormat.Binary&&r!=l.I.DWT.EnumDWT_UploadDataFormat.Base64)return l.D.Errors.InvalidDataFormat(s),d(t),!1;u={bOnlyUploadForm:!1,method:"HTTPUpload",_this:s,url:e,serverIds:f,enumImageType:n,saveSetup:!1,dataFormat:r,fileName:g,retry:0,bOnlyEmptyIsOK:!0,objUploadFileStatus:!1,asyncSuccessFunc:c,asyncFailureFunc:d}}return l.D._asyncUploadCmd(u),!0},n._innerHTTPUpload=function(e,t,n,i,o,a,s,c,d,h,g){var m,p=this,_=u()(n),v=(i=u()(i),o),I="HTTPUpload",y=e,D=!1,T=p._moduleSize,S=p._segementUploadThreshold;if(p.__HTTPPostResponseString="",l.D.isUndefined(n))return l.D.Errors.InvalidImageType(p),l.D.isFunction(g)&&g(),!1;l.D.cancelFrome=1;var w,C,E=function(){return l.D.needShowTwiceShowDialog=!1,l.D.closeProgress(p,I),l.D.isFunction(g)&&g(),!1};if(m=function(e){var t=0===e.total?100:Math.round(100*e.loaded/e.total);[e.loaded," / ",e.total].join(""),p._OnPercentDone([0,t,"","http",v])},v=f.addImageFileExt(v,_),l.D.needShowTwiceShowDialog=!0,l.D.showProgress(p,I,!1),!p._isMobileMode()&&f.isServerInvalid(p))return E();if(i==l.I.DWT.EnumDWT_UploadDataFormat.Binary){if(d&&d.bCancel)return d.st=2,E();p._OnPercentDone([0,-1,l.I.MSG.Encoding,"http"]),D=p.__innerConvertToBlob(_,t,a,!0,4,(function(e,t,n){if(w=function(){return l.D.needShowTwiceShowDialog=!1,l.D.closeProgress(p,I),l.D.isFunction(h)&&b(h,e),!0},d&&d.bCancel)return d.st=2,E();if(!e||e.size<=0)return l.D.Errors.UploadFileCannotEmpty(p),E();var i=p.MaxUploadImageSize;return i<e.size&&-1!=i?(l.D.Errors.UploadExceededMaxSize(p),E()):0!=p._errorCode?E():void(D=0<S&&e.size>S?(i=r.GetHttpHeadersAndClear(p),l.I.DWT.IfAddMD5InUploadHeader&&t&&""!=t&&(i["dwt-md5"]=t),p._OnPercentDone([0,-1,l.I.MSG.Uploading,"http",v]),r.UploadBinary(p,y,_,e,v,i,0,T,m,s,c,d,w,E)):p.__innnerHTTPUploadBinaryFull(y,t,e,_,v,s,c,d,w,E))}),E)}else i==l.I.DWT.EnumDWT_UploadDataFormat.Base64&&(D=p._convertToBase64ByServerIds(t,_,a,4,(function(e){if(!e||e.getLength()<=0)return l.D.Errors.UploadFileCannotEmpty(p),E();if(w=function(){return l.D.needShowTwiceShowDialog=!1,l.D.closeProgress(p,I),l.D.isFunction(h)&&b(h,e),!0},0<S&&e.getLength()>S){var t=r.GetHttpHeadersAndClear(p);C=e.getMD5(),l.I.DWT.IfAddMD5InUploadHeader&&(t["dwt-md5"]=C),p._OnPercentDone([0,-1,l.I.MSG.Uploading,"http"]),r.UploadBase64(p,y,_,e,v,t,0,T,m,w,E)}else{if(C=e.getMD5(),!(t=e.getData(0,e.getLength()))||""==t)return l.D.Errors.UploadFileCannotEmpty(p),E();p.__innnerHTTPUploadBase64Full(y,C,t,_,v,s,c,w,E)}}),E));return D},n._innerFormFieldHTTPUpload=function(e,t,n){var i,o=this,a="HTTPUpload";if(o.__HTTPPostResponseString="",i=function(){return l.D.needShowTwiceShowDialog=!1,l.D.closeProgress(o,a),l.D.isFunction(n)&&D(n,o,o.__HTTPPostResponseString),!1},l.D.isUndefined(e)||""===e)return l.D.Errors.ParameterCannotEmpty(o),i();if(!l.D.isString(e))return l.D.Errors.InvalidUrl(o),i();0!=s()(e).call(e,"http://")&&0!=s()(e).call(e,"https://")&&(e=l.D.detect.ssl?"https://"+e:"http://"+e),o.__HTTPPostResponseString="",l.D.cancelFrome=1,l.D.showProgress(o,a,!1),l.D.needShowTwiceShowDialog=!0;var u=r.GetHttpHeadersAndClear(o);return o._OnPercentDone([0,-1,l.I.MSG.Uploading,"http"]),f.httpUploadByBIO(o,e,!1,0,!0,u,!0,0,!0,!1,(function(e){l.D.needShowTwiceShowDialog=!1,l.D.closeProgress(o,a),l.D.isFunction(t)&&b(t,e)}),i)},r={UploadBinary:function(e,t,n,i,a,s,u,d,h,g,m,p,_,v){var I,y,D=i.size,T=D-u;return 0<T?(d<=T?(T-=d,I=d):(I=T,T=0),(y=0==u&&I==D?i:c()(i).call(i,u,u+I))?0<l.D.dlgRef||0==e.__IfShowCancelDialogWhenImageTransfer?(y.name=a,f.setBtnCancelVisibleForProgress(e,!0),s["Content-Range"]=["bytes ",u,"-",u+y.size-1,"/",D].join(""),h({total:D,loaded:u}),f.httpPostUpload(e,t,y,!0,0,s,!1,g,m,p,(function(c){0==T?(l.D.needShowTwiceShowDialog=!1,h({total:D,loaded:D}),l.D.isFunction(_)&&b(_,c)):(u+=I,o()((function(){l.D.cancelFrome=1,r.UploadBinary(e,t,n,i,a,s,u,d,h,g,m,p,_,v)}),100))}),v),!0):(l.D.Errors.UploadError(e,!0),v()):(l.D.Errors.UploadFileCannotEmpty(e),v())):(l.D.needShowTwiceShowDialog=!1,l.D.closeProgress(e,"HttpUpload"),l.D.isFunction(_)&&_(""),!0)},UploadBase64:function(e,t,n,i,a,s,u,c,d,h,g){var m,p,_=i.getLength(),v=_-u;return 0<v?(c<=v?(v-=c,m=c):(m=v,v=0),(p=i.getData(u,c))&&""!=p?0<l.D.dlgRef||0==e.__IfShowCancelDialogWhenImageTransfer?(f.setBtnCancelVisibleForProgress(e,!0),s["Content-Range"]=["bytes ",u,"-",u+m-1,"/",_].join(""),d({total:_,loaded:u}),f.httpPostUploadString(e,t,p,a,0,s,!1,0,!0,(function(f){0==v?(l.D.needShowTwiceShowDialog=!1,d({total:_,loaded:_}),l.D.isFunction(h)&&b(h,f)):(u+=m,o()((function(){l.D.cancelFrome=1,r.UploadBase64(e,t,n,i,a,s,u,c,d,h,g)}),100))}),g),!0):(l.D.Errors.UploadError(e,!0),g()):(l.D.Errors.UploadFileCannotEmpty(e),g())):(l.D.needShowTwiceShowDialog=!1,l.D.closeProgress(e,"HttpUpload"),l.D.isFunction(h)&&h(""),!0)},GetHttpHeadersAndClear:function(e){var t=e.__httpHeaderMap;return e.__httpHeaderMap={},t||e.__httpHeaderMap}},n.__innnerHTTPUploadBinaryFull=function(e,t,n,i,o,a,s,u,c,d){var h=r.GetHttpHeadersAndClear(this);return l.I.DWT.IfAddMD5InUploadHeader&&t&&""!=t&&(h["dwt-md5"]=t),0<l.D.dlgRef||0==this.__IfShowCancelDialogWhenImageTransfer?(n instanceof File?n.fileName=o:n.name=o,f.setBtnCancelVisibleForProgress(this,!0),f.httpPostUpload(this,e,n,!0,0,h,!0,a,s,u,(function(e){l.D.isFunction(c)&&b(c,e)}),d)):(l.D.Errors.UploadError(this,!0),d())},n.__innnerHTTPUploadBase64Full=function(e,t,n,i,o,a,s,u,c){var d=r.GetHttpHeadersAndClear(this);return 0<l.D.dlgRef||0==this.__IfShowCancelDialogWhenImageTransfer?(l.I.DWT.IfAddMD5InUploadHeader&&d&&t&&""!=t&&(d["dwt-md5"]=t),f.setBtnCancelVisibleForProgress(this,!0),f.httpPostUploadString(this,e,n,o,0,d,!0,a,s,(function(e){l.D.isFunction(u)&&b(u,e)}),c)):(l.D.Errors.UploadError(this,!0),c())},n.ConvertToBase64=function(e,t,n,r){var i=this;if(i._resetErr(),!i._isValid())return!1;var o=[],a=arguments,s=u()(t);if(!l.D.License.checkProductKey(i,{Core:!0}))return l.D.isFunction(r)&&r(i.ErrorCode,i.ErrorString),!1;if(!i._isMobileMode()&&f.isServerInvalid(i))return l.D.isFunction(r)&&T(r,i,e,t,a),!1;if(!i._checkIndices(e))return l.D.isFunction(r)&&T(r,i,e,t,a),!1;if(s==l.I.DWT.EnumDWT_ImageType.IT_BMP||s==l.I.DWT.EnumDWT_ImageType.IT_JPG||s==l.I.DWT.EnumDWT_ImageType.IT_PNG){if(1<e.length)return l.D.Errors.ConvertBase64IndexMoreThanOne(i),l.D.isFunction(r)&&T(r,i,e,t,a),!1}else if(s!=l.I.DWT.EnumDWT_ImageType.IT_TIF&&s!=l.I.DWT.EnumDWT_ImageType.IT_PDF)return l.D.Errors.InvalidImageType(i),l.D.isFunction(r)&&T(r,i,e,t,a),!1;l.D.isArray(e)&&l.D.each(e,(function(e){-1!=(e=i._ImgManager.convertClientIndexToServerId(e))&&o.push(e)}));var c=function(e){var r=[];return l.D.isArray(o)&&l.D.each(o,(function(e){-1<(e=i._ImgManager.convertServerIdToClientIndex(e))&&r.push(e)})),l.D.isFunction(n)&&b(n,e,r,t,a),!1},d=function(){var e=[];return l.D.isArray(o)&&l.D.each(o,(function(t){-1<(t=i._ImgManager.convertServerIdToClientIndex(t))&&e.push(t)})),l.D.isFunction(r)&&T(r,i,e,t,a),!1};return i._convertToBase64ByServerIds(o,s,!1,3,c,d)},n._convertToBase64ByServerIds=function(e,t,n,r,i,o){var a=this,s="ConvertToBase64",u=(l.D.showProgress(a,s,!1),function(){return l.D.closeProgress(a,s),l.D.isFunction(o)&&o(),!1}),c=function(t){t=t&&t.result;var n,r,o=[];l.D.isArray(e)&&l.D.each(e,(function(e){-1<(e=a._ImgManager.convertServerIdToClientIndex(e))&&o.push(e)})),0!=a.ErrorCode?u():t&&l.D.isArray(t)&&3==t.length?(n=t[0],r=new l.D.html5.Base64Result(a,r=t[1],t=t[2],n),l.D.closeProgress(a,s),l.D.isFunction(i)&&b(i,r)):(l.D.Errors.ConvertBase64Failed(a),u())};return a._isMobileMode()?t==l.I.DWT.EnumDWT_ImageType.IT_BMP?(l.D.closeProgress(a,s),a._mobileNotSupport("Convert to bmp",o)):a.__innerConvertToBase64ByMobile("",e,t,r,c,u):(l.D.isString(n)&&""!=n||(n="{}"),r=["[",t,',"',e.join(","),'",',n,",1]"].join(""),a._innerFunRaw(s,r,!0,!1,!0,c,u))},n.ClearAllHTTPFormField=function(){return this._resetErr(),!!this._isValid()&&(this.httpFormFields={},!0)},n.SetHTTPFormField=function(e,t,n){return this._resetErr(),!!this._isValid()&&(l.D.isString(e)||(e=""+e),t instanceof Blob&&(t.name=n),this.httpFormFields[e]=t,!0)},n.HTTPUploadAllThroughPostAsMultiPageTIFF=function(e,t,n,r,i,o){var a=this;if(a._resetErr(),!a._isValid())return!1;if(a._isMobileMode())return a._mobileNotSupport("HTTPUploadAllThroughPostAsMultiPageTIFF",i);var s=arguments,u=!1,c=function(e){return l.D.isFunction(i)&&T(i,a,a.__HTTPPostResponseString,e,s),!1};return l.D.isString(n)&&""!=n?(r&&l.D.isFunction(r)&&(u=function(e,t){return b(r,a.__HTTPPostResponseString,t,s),!0}),a.innerHTTPUploadPost(e,-1,t,n,2,u,c,o)):(l.D.Errors.UploadFileCannotEmpty(a),c())},n.HTTPUploadThroughPostAsMultiPageTIFF=function(e,t,n,r,i,o){var a=this;if(a._resetErr(),!a._isValid())return!1;if(a._isMobileMode())return a._mobileNotSupport("HTTPUploadThroughPostAsMultiPageTIFF",i);var s=arguments,u=!1,c=function(e){return l.D.isFunction(i)&&T(i,a,a.__HTTPPostResponseString,e,s),!1};return l.D.isString(n)&&""!=n?(r&&l.D.isFunction(r)&&(u=function(e,t){return b(r,a.__HTTPPostResponseString,t,s),!0}),a.innerHTTPUploadPost(e,-2,t,n,2,u,c,o)):(l.D.Errors.UploadFileCannotEmpty(a),c())},n.HTTPUploadAllThroughPostAsPDF=function(e,t,n,r,i,o){var a=this;if(a._resetErr(),!a._isValid())return!1;if(a._isMobileMode())return a._mobileNotSupport("HTTPUploadAllThroughPostAsPDF",i);var s=arguments,u=!1,c=function(e){return l.D.isFunction(i)&&T(i,a,a.__HTTPPostResponseString,e,s),!1};return l.D.isString(n)&&""!=n?(r&&l.D.isFunction(r)&&(u=function(e,t){return b(r,a.__HTTPPostResponseString,t,s),!0}),a.innerHTTPUploadPost(e,-1,t,n,4,u,c,o)):(l.D.Errors.UploadFileCannotEmpty(a),c())},n.HTTPUploadThroughPostAsMultiPagePDF=function(e,t,n,r,i,o){var a=this;if(a._resetErr(),!a._isValid())return!1;if(a._isMobileMode())return a._mobileNotSupport("HTTPUploadThroughPostAsMultiPagePDF",i);var s=arguments,u=!1,c=function(e){return l.D.isFunction(i)&&T(i,a,a.__HTTPPostResponseString,e,s),!1};return l.D.isString(n)&&""!=n?(r&&l.D.isFunction(r)&&(u=function(e,t){return b(r,a.__HTTPPostResponseString,t,s),!0}),a.innerHTTPUploadPost(e,-2,t,n,4,u,c,o)):(l.D.Errors.UploadFileCannotEmpty(a),c())},n.HTTPDownloadThroughPost=function(e,t,n,i,o,a){var s=this,u=r.GetHttpHeadersAndClear(s),c=arguments;if(!1===(e=f.combineUrl(s,e,t)))return l.D.Errors.ParameterCannotEmpty(s),!1;if(f.isServerInvalid(s))return l.D.isFunction(o)&&D(o,s,c),!1;if(!l.D.License.checkProductKey(s,{Core:!0}))return l.D.isFunction(o)&&D(o,s,c),!1;if(!l.D.License.checkPDFProductKeyWhenNeeds(s,n))return l.D.isFunction(o)&&D(o,s,c),!1;l.D.cancelFrome=2,l.D.showProgress(s,"HttpDownloadThroughPost",!0);var d=function(e){var t=0===e.total?100:Math.round(100*e.loaded/e.total);[e.loaded," / ",e.total].join(""),s._OnPercentDone([0,t,"","http"])},h=!0;return s._OnPercentDone([0,-1,l.I.MSG.Downloading,"http"]),l.D.isFunction(i)||(h=!1),f.loadHttpBlob(s,"post",e,h,(function(e){s._OnPercentDone([0,-1,l.I.MSG.Loading]);var t=n;t!=l.I.DWT.EnumDWT_ImageType.IT_BMP&&t!=l.I.DWT.EnumDWT_ImageType.IT_JPG&&t!=l.I.DWT.EnumDWT_ImageType.IT_TIF&&t!=l.I.DWT.EnumDWT_ImageType.IT_PNG&&t!=l.I.DWT.EnumDWT_ImageType.IT_PDF&&t!=l.I.DWT.EnumDWT_ImageType.IT_J2K&&(t=-1),s.__LoadImageFromBytes(e,t,"",h,i,o)}),(function(){l.D.closeProgress(s,"HttpDownloadThroughPost"),l.D.isFunction(o)&&D(o,s,c)}),d,u)},n.HTTPDownloadThroughGet=function(e,t,n,i,o){var a=this,s=r.GetHttpHeadersAndClear(a);if(!1===(e=f.combineUrl(a,e,t)))return l.D.Errors.ParameterCannotEmpty(a),l.D.isFunction(o)&&D(o,a),!1;if(a._isMobileMode()){if(!l.D.License.checkProductKey(a,{Core:!0}))return l.D.isFunction(o)&&D(o,a),!1}else{if(f.isServerInvalid(a))return l.D.isFunction(o)&&D(o,a),!1;if(!l.D.License.checkProductKey(a,{Core:!0}))return l.D.isFunction(o)&&D(o,a),!1;if(!l.D.License.checkPDFProductKeyWhenNeeds(a,n))return l.D.isFunction(o)&&D(o,a),!1}l.D.cancelFrome=2,l.D.showProgress(a,"HTTPDownloadThroughGet",!0);var u=function(e){var t=0===e.total?100:Math.round(100*e.loaded/e.total);[e.loaded," / ",e.total].join(""),a._OnPercentDone([0,t,"","http"])},c=!0,d=(a._OnPercentDone([0,-1,l.I.MSG.Downloading,"http"]),l.D.isFunction(i)||(c=!1),a.GetCurrentDocumentName());return""==d&&(d=a._ImgManager.getWebViewer().GetDefaultFileName()),a._isMobileMode()?f.loadHttpBlob(a,"get",e,c,(function(e){a._OnPercentDone([0,-1,l.I.MSG.Loading]),e.currentFileName=d,a.LoadImageFromBinary(e,(function(){l.I.Lib.closeProgress(a,""),l.D.isFunction(i)&&i()}),(function(){l.D.closeProgress(a,"HTTPDownloadThroughGet"),l.D.isFunction(o)&&D(o,a)}))}),(function(){l.D.closeProgress(a,"HTTPDownloadThroughGet"),l.D.isFunction(o)&&D(o,a)}),u,s):f.loadHttpBlob(a,"get",e,c,(function(e){a._OnPercentDone([0,-1,l.I.MSG.Loading]);var t=n;t!=l.I.DWT.EnumDWT_ImageType.IT_BMP&&t!=l.I.DWT.EnumDWT_ImageType.IT_JPG&&t!=l.I.DWT.EnumDWT_ImageType.IT_TIF&&t!=l.I.DWT.EnumDWT_ImageType.IT_PNG&&t!=l.I.DWT.EnumDWT_ImageType.IT_PDF&&t!=l.I.DWT.EnumDWT_ImageType.IT_J2K&&(t=-1),e.currentFileName=d,a.__LoadImageFromBytes(e,t,"",c,(function(){l.I.Lib.closeProgress(a,""),l.D.isFunction(i)&&i()}),(function(){l.D.closeProgress(a,"HTTPDownloadThroughGet"),l.D.isFunction(o)&&D(o,a)}))}),(function(){l.D.closeProgress(a,"HTTPDownloadThroughGet"),l.D.isFunction(o)&&D(o,a)}),u,s)},n.HTTPUploadThroughPut=function(e,t,n,r,i){var o=f.getImageType(n);return this.HTTPUploadThroughPutEx(e,t,n,o,r,i)},n.HTTPUploadThroughPutEx=function(e,t,n,i,o,a){var s=this,u=r.GetHttpHeadersAndClear(s),c="HTTPUploadThroughPutEx",d=f.combineUrl(s,e,n),h=!0,g=[];if(!1===d)return l.D.Errors.ParameterCannotEmpty(s),l.D.isFunction(a)&&T(a,s,"",[t],n,i),!1;l.D.isFunction(o)||(h=!1),l.D.cancelFrome=1;var m,p=function(){return l.D.needShowTwiceShowDialog=!1,l.D.closeProgress(s,c),l.D.isFunction(a)&&T(a,s,s.__HTTPPostResponseString,g,n,i),!1};switch(l.D.needShowTwiceShowDialog=!0,l.D.showProgress(s,c,!1),t){case-1:for(var _=0;_<s._ImgManager.count();_++)g.push(_);break;case-2:g=s._ImgManager.getSelectedClientIndexArray();break;default:if(g.push(t),0<=t)break;return l.D.Errors.IndexOutOfRange(s),p()}if(""===e)return l.D.Errors.HttpServerCannotEmpty(s),p();var v=[];return l.D.isArray(g)&&l.D.each(g,(function(e){-1!=(e=s._ImgManager.convertClientIndexToServerId(e))&&v.push(e)})),s._OnPercentDone([0,-1,l.I.MSG.Encoding,"http"]),s.__innerConvertToBlob(i,v,!1,h,4,(function(e,t,r){return l.I.DWT.IfAddMD5InUploadHeader&&t&&""!=t&&(u["dwt-md5"]=t),l.D.needShowTwiceShowDialog=!1,e&&(0<l.D.dlgRef||0==s.__IfShowCancelDialogWhenImageTransfer||0==h)?(t=s.MaxUploadImageSize)<e.size&&-1!=t?(l.D.Errors.UploadExceededMaxSize(s),p()):(m=function(e){var t=0===e.total?100:Math.round(100*e.loaded/e.total);[e.loaded," / ",e.total].join(""),s._OnPercentDone([0,t,"","http"])},s._OnPercentDone([0,-1,l.I.MSG.Uploading,"http"]),f.setBtnCancelVisibleForProgress(s,!0),f.httpPutImage(s,d,e,h,(function(e){var t;return s.__HTTPPostResponseString=e,l.D.closeProgress(s,c),l.D.isFunction(o)&&(t=[],l.D.isArray(v)&&l.D.each(v,(function(e){-1<(e=s._ImgManager.convertServerIdToClientIndex(e))&&t.push(e)})),b(o,s.__HTTPPostResponseString,t,n,i)),!0}),p,m)):(l.D.closeProgress(s,c),!1)}),p)},n.HTTPUploadAllThroughPutAsMultiPageTIFF=function(e,t,n,r){return this.HTTPUploadThroughPutEx(e,-1,t,2,n,r)},n.HTTPUploadThroughPutAsMultiPageTIFF=function(e,t,n,r){return this.HTTPUploadThroughPutEx(e,-2,t,2,n,r)},n.HTTPUploadAllThroughPutAsPDF=function(e,t,n,r){return this.HTTPUploadThroughPutEx(e,-1,t,4,n,r)},n.HTTPUploadThroughPutAsMultiPagePDF=function(e,t,n,r){return this.HTTPUploadThroughPutEx(e,-2,t,4,n,r)},n.GetSelectedImagesSize=function(e){if(this._resetErr(),!this._isValid())return!1;if(this._isMobileMode())return this._mobileNotSupport("GetSelectedImagesSize");var t=v(this);return this._innerFun("GetSelectedImagesSize",(0,h.dv)(e,t.join(",")))},n.SetHTTPHeader=function(e,t){var n=this;if(n._resetErr(),!n._isValid())return!1;var r,i,o=e;if(n.__httpHeaderMap||(n.__httpHeaderMap={}),!o||!l.D.isString(o))return l.D.isUndefined(o)?l.D.Errors.HttpHeaderIsUndefined(n):""===o?l.D.Errors.HttpHeaderIsEmpty(n):null===o?l.D.Errors.HttpHeaderIsNull(n):l.D.Errors.HttpHeaderIsInvalid(n),!1;for(r=["if-modified-since","if-none-match","if-range","range","accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"],o=o.toLowerCase(),i=0;i<r.length;i++)if(r[i]==o)return l.D.Errors.HttpHeaderNotAllowed(n),!1;return l.D.isUndefined(t)||null===t||""===t?e in n.__httpHeaderMap&&delete n.__httpHeaderMap[e]:(l.D.isNumber(t)&&(t=""+t),n.__httpHeaderMap[e]=t),!0},l.D.html5.Base64Result=function(e,t,n,r){this._stwain=e,this._md5=n,this._length=t,this._content=r},l.D.html5.Base64Result.prototype.getLength=function(){return this._length},l.D.html5.Base64Result.prototype.getMD5=function(){return this._md5},l.D.html5.Base64Result.prototype.getData=function(e,t){var n=t;return!l.D.isNumber(e)||!l.D.isNumber(t)||e<0||t<=0?"":0==e&&n==this._length?this._content:(e+n>this._length&&(n=this._length-e),this._content.substr(e,n))},n._ConvertToBlob=function(e,t,n,r,i){var o=this,a="ConvertToBlob",s=!0,u=arguments,c=(l.D.isFunction(r)||(s=!1),l.D.cancelFrome=0,l.D.showProgress(o,a,!1),function(){var n;return l.D.needShowTwiceShowDialog=!1,l.D.closeProgress(o,a),l.D.isFunction(i)&&(n=[],l.D.isArray(e)&&l.D.each(e,(function(e){-1<(e=o._ImgManager.convertServerIdToClientIndex(e))&&n.push(e)})),T(i,o,n,t,u)),!1});return o._OnPercentDone([0,-1,l.I.MSG.Encoding]),o.__innerConvertToBlob(t,e,n,s,2,(function(t,n,i){if(!t||t.size<=0)return l.D.Errors.ConvertBlobIsEmpty(o),c();var h=o.MaxUploadImageSize;if(h<t.size&&-1!=h)return l.D.Errors.UploadExceededMaxSize(o),c();if(l.D.needShowTwiceShowDialog=!1,l.D.closeProgress(o,a),l.D.isFunction(r)){var g=[];l.D.isArray(e)&&l.D.each(e,(function(e){-1<(e=o._ImgManager.convertServerIdToClientIndex(e))&&g.push(e)}));try{r(t,g,u)}catch(d){}t=null}return!!s||t}),c)},n.ConvertToBlob=function(e,t,n,r,i){var o=this;if(o._resetErr(),!o._isValid())return!1;var a=u()(t),s=arguments,c=function(e,r){return l.D.isFunction(n)&&b(n,e,r,t,s),!(e=r=null)},d=function(e){return l.D.isFunction(r)&&T(r,o,e,t,s),e=null,!1};if(!l.D.License.checkProductKey(o,{Core:!0}))return l.D.isFunction(r)&&r(o.ErrorCode,o.ErrorString),!1;if(!o._isMobileMode()&&f.isServerInvalid(o))return d(e);if(!o._checkIndices(e))return d(e);if(a==l.I.DWT.EnumDWT_ImageType.IT_BMP||a==l.I.DWT.EnumDWT_ImageType.IT_JPG||a==l.I.DWT.EnumDWT_ImageType.IT_PNG||a==l.I.DWT.EnumDWT_ImageType.IT_J2K){if(1<e.length)return l.D.Errors.ConvertBinaryIndexMoreThanOne(o),d(e)}else if(a!=l.I.DWT.EnumDWT_ImageType.IT_TIF&&a!=l.I.DWT.EnumDWT_ImageType.IT_PDF)return l.D.Errors.InvalidImageType(o),d(e);var h=[];return l.D.isArray(e)&&l.D.each(e,(function(e){-1!=(e=o._ImgManager.convertClientIndexToServerId(e))&&h.push(e)})),l.D.isFunction(n)?(o._ConvertToBlob(h,a,!1,c,d),!0):o._ConvertToBlob(h,a,!1)},l.D._asyncUploadCmd=function(e){var t,n,r,i,o,a,s,u=e._this,c=e.bOnlyUploadForm,d=e.url,h=e.asyncSuccessFunc,g=e.asyncFailureFunc;if(!c)return t=e.serverIds,c=e.enumImageType,n=e.dataFormat,r=e.fileName,i=e.saveSetup,o=e.retry,a=e.bOnlyEmptyIsOK,e=e.objUploadFileStatus,s=function(){if(l.D.isFunction(g)){var n=[];l.D.isArray(t)&&l.D.each(t,(function(e){-1<(e=u._ImgManager.convertServerIdToClientIndex(e))&&n.push(e)}));try{g(n)}catch(e){}}return!1},l.D.isNumber(o)&&0<o||(o=0),0!=u._errorCode?s():u._innerHTTPUpload(d,t,c,n,r,i,o,a,e,(function(e){if(l.D.isFunction(h)){var n=[];l.D.isArray(t)&&l.D.each(t,(function(e){-1<(e=u._ImgManager.convertServerIdToClientIndex(e))&&n.push(e)}));try{b(h,e,n)}catch(r){}}return!0}),s);u._innerFormFieldHTTPUpload(d,(function(){if(l.D.isFunction(h))try{h()}catch(e){}}),(function(){if(l.D.isFunction(g))try{g()}catch(e){}}))},n._asyncUploadFilesCmd=function(e,t,n,i,o,a,s,c,d,h){var g=this,m=u()(n),p="HTTPUpload",_=e,v=!1,I=[],y=(g.__HTTPPostResponseString="",l.D.cancelFrome=1,function(){if(g._bServerPercentDone=!0,l.D.needShowTwiceShowDialog=!1,a&&l.D.closeProgress(g,p),I=null,l.D.isFunction(h)){var n=[];l.D.isArray(t)&&l.D.each(t,(function(e){-1<(e=g._ImgManager.convertServerIdToClientIndex(e))&&n.push(e)}));try{h(n)}catch(e){}}return!1});if(l.D.needShowTwiceShowDialog=!0,a&&l.D.showProgress(g,p,!1),f.isServerInvalid(g))return y();var D,T,S=function(e){var n;g._bServerPercentDone=!0,l.D.needShowTwiceShowDialog=!1,a&&l.D.closeProgress(g,p),I=null,l.D.isFunction(d)&&(n=[],l.D.isArray(t)&&l.D.each(t,(function(e){-1<(e=g._ImgManager.convertServerIdToClientIndex(e))&&n.push(e)})),b(d,e,n))},w=t.length,C=0;return g._bServerPercentDone=!1,g._OnPercentDone([0,-1,l.I.MSG.Encoding,"http"]),l.D.each(t,(function(e,t){v=g.__innerConvertToBlob(m,[e],o,!0,4,(function(e,n,o){if(!e||e.size<=0)return l.D.Errors.UploadFileCannotEmpty(g),y();var u=g.MaxUploadImageSize;if(u<e.size&&-1!=u)return l.D.Errors.UploadExceededMaxSize(g),y();u=f.cformat(i,t+1),D=(C+1)/w*100,T=[C+1,"/",w].join(""),g._OnPercentDone([0,D,T,"http",u]),e.name=u,I.push(e),w<=++C&&(o=r.GetHttpHeadersAndClear(g),l.I.DWT.IfAddMD5InUploadHeader&&n&&""!=n&&(o["dwt-md5"]=n),v=f.httpPostUploadFiles(g,_,I,!0,0,o,a,s,c,(function(e){S(e)}),y))}),y,[e,t])})),v}},398:function(e,t,n){n.r(t);var r=n(9623),i=(t=n(7711),n.n(t)),o=(t=n(4579),n.n(t)),a=n(1695),s=n(1188),u=a.D.html5.Funs;(t=a.D.html5.STwain.prototype).AddText=function(e,t,n,r,o,u,c,l){var d=this;return d._resetErr(),!!d._isValid()&&(d._isMobileMode()?d._mobileNotSupport("AddText"):(e=i()(e),isNaN(e)?(a.D.Errors.InvalidIndex(d),!1):e<0||e>=d._ImgManager.count()?(a.D.Errors.IndexOutOfRange(d),!1):(o=a.D.RGB2BGR(o),u=a.D.RGB2BGR(u),-1==(e=d._ImgManager.convertClientIndexToServerId(e))?(a.D.Errors.IndexOutOfRange(d),!1):d._innerFun("AddText",(0,s.dv)(e,t,n,r,o,u,c,l)))))},t.CreateTextFont=function(e,t,n,r,i,o,a,u,c,l,d,h,g,f){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CreateTextFont"):this._innerFun("CreateTextFont",(0,s.dv)(e,t,n,r,i,o,a,u,c,l,d,h,g,f)))},t.CopyToClipboard=function(e){var t=this;return t._resetErr(),!!t._isValid()&&(t._isMobileMode()?t._mobileNotSupport("CopyToClipboard"):(e=i()(e),isNaN(e)?(a.D.Errors.InvalidIndex(t),!1):e<0||e>=t._ImgManager.count()||-1==(e=t._ImgManager.convertClientIndexToServerId(e))?(a.D.Errors.IndexOutOfRange(t),!1):t._innerFun("CopyToClipboard",(0,s.dv)(e))))},t.CopyToClipboardAsync=function(e){var t=this;return t._resetErr(),t._isValid()?t._isMobileMode()?t._mobileNotSupportAsync("CopyToClipboardAsync"):(e=i()(e),isNaN(e)?(a.D.Errors.InvalidIndex(t),a.D.Promise.reject({code:t._errorCode,message:t._errorString})):e<0||e>=t._ImgManager.count()||-1==(e=t._ImgManager.convertClientIndexToServerId(e))?(a.D.Errors.IndexOutOfRange(t),a.D.Promise.reject({code:t._errorCode,message:t._errorString})):t._innerFunV2("CopyToClipboard",(0,s.dv)(e))):a.D.Promise.reject({code:t._errorCode,message:t._errorString})},t._asyncErase=function(e,t,n,r,c,l,d){var h=this,g=i()(e),f=h.__BackgroundFillColor;return a.D.isUndef(f)?f="FFFFFF":a.D.isNumber(f)?f=f.toString(16):a.D.isString(f)&&(f=f.replace("#","")),h._innerSendToMobile("Erase",(0,s.An)(g,t,n,r,c,f),0,(function(){u.refreshImageAfterInvokeFun(h,e),a.D.isFunction(l)&&o()(l,30)}),(function(){a.D.isFunction(d)&&d(h.ErrorCode,h.ErrorString)}))},t.Erase=function(e,t,n,r,o,u,c){var l=this;return l._resetErr(),!!l._isValid()&&(e=i()(e),isNaN(e)?(a.D.Errors.InvalidIndex(l),a.D.isFunction(c)&&c(l.ErrorCode,l.ErrorString),!1):e<0||e>=l._ImgManager.count()?(a.D.Errors.IndexOutOfRange(l),a.D.isFunction(c)&&c(l.ErrorCode,l.ErrorString),!1):l._isMobileMode()?(l._ImgManager.getView().GetWebViewer().clearSelectedAreas(),l._asyncErase(e,t,n,r,o,u,c)):-1==(e=l._ImgManager.convertClientIndexToServerId(e))?(a.D.Errors.IndexOutOfRange(l),a.D.isFunction(c)&&c(l.ErrorCode,l.ErrorString),!1):(l._ImgManager.getView().GetWebViewer().clearSelectedAreas(),(e=1==l._innerFun("Erase",(0,s.dv)(e,t,n,r,o)))?a.D.isFunction(u)&&u():a.D.isFunction(c)&&c(l.ErrorCode,l.ErrorString),e))},t.GetImageBitDepth=function(e){var t=this;if(t._resetErr(),!t._isValid())return!1;if(e=i()(e),isNaN(e))return a.D.Errors.InvalidIndex(t),!1;if(e<0||e>=t._ImgManager.count())return a.D.Errors.IndexOutOfRange(t),!1;if(t._isMobileMode())return n=t._ImgManager._UIView.GetMetaDataByIndex(e),i()(n.bitDepth);var n=t._ImgManager.convertClientIndexToServerId(e);return-1==n?(a.D.Errors.IndexOutOfRange(t),!1):t._innerFun("GetImageBitDepth",(0,s.dv)(n))},t.GetImageWidth=function(e){var t=this;if(t._resetErr(),!t._isValid())return!1;if(e=i()(e),isNaN(e))return a.D.Errors.InvalidIndex(t),-1;if(e<0||e>=t._ImgManager.count())return a.D.Errors.IndexOutOfRange(t),-1;if(t._isMobileMode())return n=t._ImgManager._UIView.GetMetaDataByIndex(e),i()(n.width);var n=t._ImgManager.convertClientIndexToServerId(e);return-1==n?(a.D.Errors.IndexOutOfRange(t),-1):t._innerFun("GetImageWidth",(0,s.dv)(n))},t.GetImageHeight=function(e){var t=this;if(t._resetErr(),!t._isValid())return!1;if(e=i()(e),isNaN(e))return a.D.Errors.InvalidIndex(t),-1;if(e<0||e>=t._ImgManager.count())return a.D.Errors.IndexOutOfRange(t),-1;if(t._isMobileMode())return n=t._ImgManager._UIView.GetMetaDataByIndex(e),i()(n.height);var n=t._ImgManager.convertClientIndexToServerId(e);return-1==n?(a.D.Errors.IndexOutOfRange(t),-1):t._innerFun("GetImageHeight",(0,s.dv)(n))},t.GetImageSize=function(e,t,n){var r=this;return r._resetErr(),!!r._isValid()&&(r._isMobileMode()?r._mobileNotSupport("GetImageSize"):(e=i()(e),isNaN(e)?(a.D.Errors.InvalidIndex(r),-1):e<0||e>=r._ImgManager.count()||-1==(e=r._ImgManager.convertClientIndexToServerId(e))?(a.D.Errors.IndexOutOfRange(r),-1):r._innerFun("GetImageSize",(0,s.dv)(e,t,n))))},t.GetImageSizeWithSpecifiedType=function(e,t){var n=this;return n._resetErr(),!!n._isValid()&&(n._isMobileMode()?n._mobileNotSupport("GetImageSizeWithSpecifiedType"):(e=i()(e),isNaN(e)?(a.D.Errors.InvalidIndex(n),-1):e<0||e>=n._ImgManager.count()||-1==(e=n._ImgManager.convertClientIndexToServerId(e))?(a.D.Errors.IndexOutOfRange(n),-1):n._innerFun("GetImageSizeWithSpecifiedType",(0,s.dv)(e,t))))},t.GetImageXResolution=function(e){var t=this;if(t._resetErr(),!t._isValid())return!1;if(e=i()(e),isNaN(e))return a.D.Errors.InvalidIndex(t),!1;if(e<0||e>=t._ImgManager.count())return a.D.Errors.IndexOutOfRange(t),!1;if(t._isMobileMode())return n=t._ImgManager._UIView.GetMetaDataByIndex(e),i()(n.resolutionX);var n=t._ImgManager.convertClientIndexToServerId(e);return-1==n?(a.D.Errors.IndexOutOfRange(t),!1):t._innerFun("GetImageXResolution",(0,s.dv)(n))},t.GetImageYResolution=function(e){var t=this;if(t._resetErr(),!t._isValid())return!1;if(e=i()(e),isNaN(e))return a.D.Errors.InvalidIndex(t),!1;if(e<0||e>=t._ImgManager.count())return a.D.Errors.IndexOutOfRange(t),!1;if(t._isMobileMode())return n=t._ImgManager._UIView.GetMetaDataByIndex(e),i()(n.resolutionY);var n=t._ImgManager.convertClientIndexToServerId(e);return-1==n?(a.D.Errors.IndexOutOfRange(t),!1):t._innerFun("GetImageYResolution",(0,s.dv)(n))},t.SelectAllImages=function(){var e,t=this.HowManyImagesInBuffer,n=[];if(this._resetErr(),!this._isValid())return!1;for(e=0;e<t;e++)n.push(e);return this._ImgManager.SetSelectedClientIndexArray(n),n},t.SelectImages=function(e){return this._resetErr(),!!this._isValid()&&this._ImgManager.SetSelectedClientIndexArray(e)},t._asyncGetSkewAngleOnly=function(e,t,n){var r=this,c=i()(e);return r._innerSendToMobile("GetSkewAngleOnly",(0,s.An)(c),0,(function(n){u.refreshImageAfterInvokeFun(r,e),a.D.isFunction(t)&&o()((function(){t(n)}),30)}),(function(){a.D.isFunction(n)&&n(r.ErrorCode,r.ErrorString)}))},t._asyncGetSkewAngle=function(e,t,n){var r=this,c=i()(e);return r._innerSendToMobile("GetSkewAngle",(0,s.An)(c),0,(function(n){u.refreshImageAfterInvokeFun(r,e),a.D.isFunction(t)&&o()((function(){t(n)}),30)}),(function(){a.D.isFunction(n)&&n(r.ErrorCode,r.ErrorString)}))},t.GetSkewAngle=function(e,t,n){var r=this;if(r._resetErr(),!r._isValid())return!1;if(e=i()(e),isNaN(e))return a.D.Errors.InvalidIndex(r),a.D.isFunction(n)&&n(r.ErrorCode,r.ErrorString),!1;if(e<0||e>=r._ImgManager.count())return a.D.Errors.IndexOutOfRange(r),a.D.isFunction(n)&&n(r.ErrorCode,r.ErrorString),!1;if(r._isMobileMode())return r._asyncGetSkewAngle(e,t,n);var o=r._ImgManager.convertClientIndexToServerId(e);if(-1==o)return a.D.Errors.IndexOutOfRange(r),a.D.isFunction(n)&&n(r.ErrorCode,r.ErrorString),!1;if(o=r._innerFun("GetSkewAngle",(0,s.dv)(o)),0==r.ErrorCode){if(u.refreshImageAfterInvokeFun(r,e),!a.D.isFunction(t))return o;t(o)}else a.D.isFunction(n)&&n(r.ErrorCode,r.ErrorString);return!0},t.GetSkewAngleAsync=function(e){var t=this;if(t._resetErr(),!t._isValid())return a.D.Promise.reject({code:t._errorCode,message:t._errorString});var n=i()(e);return isNaN(n)?(a.D.Errors.InvalidIndex(t),a.D.Promise.reject({code:t._errorCode,message:t._errorString})):n<0||n>=t._ImgManager.count()?(a.D.Errors.IndexOutOfRange(t),a.D.Promise.reject({code:t._errorCode,message:t._errorString})):t._isMobileMode()?t._innerSendToMobileV2("GetSkewAngle",(0,s.An)(n)).then((function(e){u.refreshImageAfterInvokeFun(t,n)})):-1==(e=t._ImgManager.convertClientIndexToServerId(n))?(a.D.Errors.IndexOutOfRange(t),a.D.Promise.reject({code:t._errorCode,message:t._errorString})):t._innerFunV2("GetSkewAngle",(0,s.dv)(e)).then((function(e){var r=e;return a.D.isArray(e)&&(r=0<e.length?e[0]:0),u.refreshImageAfterInvokeFun(t,n),r}))},t.GetSkewAngleEx=function(e,t,n,r,o){var u=this;return u._resetErr(),!!u._isValid()&&(u._isMobileMode()?u._mobileNotSupport("GetSkewAngleEx"):(e=i()(e),isNaN(e)?(a.D.Errors.InvalidIndex(u),!1):e<0||e>=u._ImgManager.count()||-1==(e=u._ImgManager.convertClientIndexToServerId(e))?(a.D.Errors.IndexOutOfRange(u),!1):u._innerFun("GetSkewAngleEx",(0,s.dv)(e,t,n,r,o))))},t.IsBlankImageEx=function(e,t,n,r,o,u){var c=this;return c._resetErr(),!!c._isValid()&&(c._isMobileMode()?c._mobileNotSupport("IsBlankImageEx"):(e=i()(e),isNaN(e)?(a.D.Errors.InvalidIndex(c),!1):e<0||e>=c._ImgManager.count()||-1==(e=c._ImgManager.convertClientIndexToServerId(e))?(a.D.Errors.IndexOutOfRange(c),!1):c._innerFun("IsBlankImageEx",(0,s.dv)(e,t,n,r,o,u))))},t.MirrorAsync=function(e){var t=this;if(t._resetErr(),!t._isValid())return a.D.Promise.reject({code:t._errorCode,message:t._errorString});var n=i()(e);return isNaN(n)?(a.D.Errors.InvalidIndex(t),a.D.Promise.reject({code:t._errorCode,message:t._errorString})):n<0||n>=t._ImgManager.count()?(a.D.Errors.IndexOutOfRange(t),a.D.Promise.reject({code:t._errorCode,message:t._errorString})):t._isMobileMode()?t._innerSendToMobileV2("Mirror",(0,s.An)(n)).then((function(){u.refreshImageAfterInvokeFun(t,n),t._ImgManager._UIView.GetWebViewer().clearSelectedAreas()})):-1==(e=t._ImgManager.convertClientIndexToServerId(n))?(a.D.Errors.IndexOutOfRange(t),a.D.Promise.reject({code:t._errorCode,message:t._errorString})):t._innerFunV2("Mirror",(0,s.dv)(e)).then((function(e){if(1!=e)throw{code:t._errorCode,message:t._errorString};u.refreshImageAfterInvokeFun(t,n),t._ImgManager._UIView.GetWebViewer().clearSelectedAreas()}))},t.Mirror=function(e,t,n){var r=this;if(r._resetErr(),!r._isValid())return!1;var o=i()(e);return isNaN(o)?(a.D.Errors.InvalidIndex(r),a.D.isFunction(n)&&n(r.ErrorCode,r.ErrorString),!1):o<0||o>=r._ImgManager.count()?(a.D.Errors.IndexOutOfRange(r),a.D.isFunction(n)&&n(r.ErrorCode,r.ErrorString),!1):r._isMobileMode()?(r._innerSendToMobileV2("Mirror",(0,s.An)(o)).then((function(){u.refreshImageAfterInvokeFun(r,o),r._ImgManager._UIView.GetWebViewer().clearSelectedAreas(),t&&t()}),(function(){a.D.isFunction(n)&&n(r.ErrorCode,r.ErrorString)})),!0):-1==(e=r._ImgManager.convertClientIndexToServerId(o))?(a.D.Errors.IndexOutOfRange(r),a.D.isFunction(n)&&n(r.ErrorCode,r.ErrorString),!1):((e=1==r._innerFun("Mirror",(0,s.dv)(e)))?(u.refreshImageAfterInvokeFun(r,o),r._ImgManager._UIView.GetWebViewer().clearSelectedAreas(),a.D.isFunction(t)&&t()):a.D.isFunction(n)&&n(r.ErrorCode,r.ErrorString),e)},t.RemoveAllImages=function(){var e=this,t=!0,n=e._isMobileMode();if(e._resetErr(),!e._isValid())return!1;if(""==(a=e._ImgManager.GetCurrentTag())||"All"==a)n?e._OnBitmapChanged(["10","-1",3,-1,0]):!(t=e._innerFun("RemoveAllImages"))&&-1033!=e._errorCode||e._OnBitmapChanged(["0","-1",3,-1,0]);else{var r=function(){},i=function(){},o=[],a="0";n&&(a="10");for(var u=e.HowManyImagesInBuffer-1;0<=u;u--){var c=e._ImgManager.convertClientIndexToServerId(u);-1<c&&(n||(t=e._innerFunRaw("RemoveImage",(0,s.dv)(c),!0,!1,!0,r,i))||-1033==e._errorCode)&&o.push(c)}e._OnBitmapChanged([a,o.join(","),3,e._ImgManager.getCurrentImageIndex(),e._ImgManager.count()])}return t},t._innerRemoveImage=function(e,t){t=this._ImgManager.convertClientIndexToServerIdInFile(e,t),this._OnBitmapChanged(["10",""+t,3,this._ImgManager.getCurrentImageIndex(),this._ImgManager.count()],null,e)},t.RemoveImage=function(e){var t=this;if(t._resetErr(),!t._isValid())return!1;e=i()(e);var n=!0;return isNaN(e)?(a.D.Errors.InvalidIndex(t),!1):e<0||e>=t._ImgManager.count()||-1==(e=t._ImgManager.convertClientIndexToServerId(e))?(a.D.Errors.IndexOutOfRange(t),!1):(t._isMobileMode()?t._OnBitmapChanged(["10",""+e,3,t._ImgManager.getCurrentImageIndex(),t._ImgManager.count()]):!(n=t._innerFun("RemoveImage",(0,s.dv)(e)))&&-1033!=t._errorCode||t._OnBitmapChanged(["0",""+e,3,t._ImgManager.getCurrentImageIndex(),t._ImgManager.count()]),n)},t.RemoveAllImagesAsync=function(){var e=this;if(e._resetErr(),!e._isValid())return a.D.Promise.reject({code:e._errorCode,message:e._errorString});var t=e._ImgManager.GetCurrentTag();return""==t||"All"==t?e._isMobileMode()?(e._OnBitmapChanged(["10","-1",3,-1,0]),a.D.Promise.resolve(!0)):e._innerFunV2("RemoveAllImages").then((function(t){return!(!t&&-1033!=e._errorCode||(e._OnBitmapChanged(["0","-1",3,-1,0]),0))})):(t=function(){for(var t,n=[],r=e.HowManyImagesInBuffer,i=0;i<r;i++){var o=e._ImgManager.convertClientIndexToServerId(i);-1<o&&n.push(o)}if(e._isMobileMode())t=a.D.Promise.resolve(n.join(","));else{var u=[];for(t=a.D.Promise.resolve(0),i=0;i<n.length;i++)t=t.then((function(t){return e._innerFunRawV2("RemoveImage",(0,s.dv)(n[t])).then((function(r){return!r&&-1033!=e._errorCode||u.push(n[t]),t++}))}));t=t.then((function(){return u.join(",")}))}return{v:t.then((function(t){var n="0";e._isMobileMode()&&(n="10"),""!=t&&e._OnBitmapChanged([n,t,3,e._ImgManager.getCurrentImageIndex(),e._ImgManager.count()])}))}}(),"object"===(0,r.Z)(t)?t.v:void 0)},t.RemoveImageAsync=function(e){var t=this;if(t._resetErr(),!t._isValid())return a.D.Promise.reject({code:t._errorCode,message:t._errorString});if(e=i()(e),isNaN(e))return a.D.Errors.InvalidIndex(t),a.D.Promise.reject({code:t._errorCode,message:t._errorString});if(e<0||e>=t._ImgManager.count())return a.D.Errors.IndexOutOfRange(t),a.D.Promise.reject({code:t._errorCode,message:t._errorString});var n=t._ImgManager.convertClientIndexToServerId(e);return-1==n?(a.D.Errors.IndexOutOfRange(t),a.D.Promise.reject({code:t._errorCode,message:t._errorString})):t._isMobileMode()?(t._OnBitmapChanged(["10",""+n,3,t._ImgManager.getCurrentImageIndex(),t._ImgManager.count()]),a.D.Promise.resolve(!0)):t._innerFunV2("RemoveImage",(0,s.dv)(n)).then((function(e){return!(!e&&-1033!=t._errorCode||(t._OnBitmapChanged(["0",""+n,3,t._ImgManager.getCurrentImageIndex(),t._ImgManager.count()]),0))}))},t._removeImageById=function(e,t,n){var r=this;return r._innerFunRaw("RemoveImage",(0,s.dv)(e),!0,!1,!0,(function(){r._OnBitmapChanged(["0",""+e,3,r._ImgManager.getCurrentImageIndex(),r._ImgManager.count()]),a.D.isFunction(t)&&t()}),n)},t._asyncRotateEx=function(e,t,n,r){var o=this,c=i()(e),l=o.__BackgroundFillColor;return a.D.isUndef(l)?l="FFFFFF":a.D.isNumber(l)?l="0x"+l.toString(16):a.D.isString(l)&&(l=l.replace("#","")),o._innerSendToMobileV2("RotateEx",(0,s.An)(c,t,n,r,l)).then((function(){u.refreshImageAfterInvokeFun(o,e),o._ImgManager._UIView.GetWebViewer().clearSelectedAreas()}))},t.Rotate=function(e,t,n,r,o){var c=this;if(c._resetErr(),!c._isValid())return!1;if(e=i()(e),isNaN(e))return a.D.Errors.InvalidIndex(c),a.D.isFunction(o)&&o(c.ErrorCode,c.ErrorString),!1;if(e<0||e>=c._ImgManager.count())return a.D.Errors.IndexOutOfRange(c),a.D.isFunction(o)&&o(c.ErrorCode,c.ErrorString),!1;if(c._isMobileMode())return c._asyncRotateEx(e,t,n,-1).then(r,(function(){a.D.isFunction(o)&&o(c.ErrorCode,c.ErrorString)})),!0;var l=c._ImgManager.convertClientIndexToServerId(e);return-1==l?(a.D.Errors.IndexOutOfRange(c),a.D.isFunction(o)&&o(c.ErrorCode,c.ErrorString),!1):((l=1==c._innerFun("Rotate",(0,s.dv)(l,t,n)))?(u.refreshImageAfterInvokeFun(c,e),c._ImgManager._UIView.GetWebViewer().clearSelectedAreas(),a.D.isFunction(r)&&r()):a.D.isFunction(o)&&o(c.ErrorCode,c.ErrorString),l)},t.RotateEx=function(e,t,n,r,o,c){var l=this;if(l._resetErr(),!l._isValid())return!1;if(e=i()(e),isNaN(e))return a.D.Errors.InvalidIndex(l),a.D.isFunction(c)&&c(l.ErrorCode,l.ErrorString),!1;if(e<0||e>=l._ImgManager.count())return a.D.Errors.IndexOutOfRange(l),a.D.isFunction(c)&&c(l.ErrorCode,l.ErrorString),!1;if(l._isMobileMode())return l._asyncRotateEx(e,t,n,r).then(o,(function(){a.D.isFunction(c)&&c(l.ErrorCode,l.ErrorString)})),!0;var d=l._ImgManager.convertClientIndexToServerId(e);return-1==d?(a.D.Errors.IndexOutOfRange(l),a.D.isFunction(c)&&c(l.ErrorCode,l.ErrorString),!1):((d=1==l._innerFun("RotateEx",(0,s.dv)(d,t,n,r)))?(u.refreshImageAfterInvokeFun(l,e),l._ImgManager._UIView.GetWebViewer().clearSelectedAreas(),a.D.isFunction(o)&&o()):a.D.isFunction(c)&&c(l.ErrorCode,l.ErrorString),d)},t.RotateLeft=function(e,t,n){var r=this;if(r._resetErr(),!r._isValid())return!1;if(e=i()(e),isNaN(e))return a.D.Errors.InvalidIndex(r),a.D.isFunction(n)&&n(r.ErrorCode,r.ErrorString),!1;if(e<0||e>=r._ImgManager.count())return a.D.Errors.IndexOutOfRange(r),a.D.isFunction(n)&&n(r.ErrorCode,r.ErrorString),!1;if(r._isMobileMode())return r._asyncRotateEx(e,-90,!0,-1).then(t,(function(){a.D.isFunction(n)&&n(r.ErrorCode,r.ErrorString)})),!0;var o=r._ImgManager.convertClientIndexToServerId(e);return-1==o?(a.D.Errors.IndexOutOfRange(r),a.D.isFunction(n)&&n(r.ErrorCode,r.ErrorString),!1):((o=1==r._innerFun("RotateLeft",(0,s.dv)(o)))?(u.refreshImageAfterInvokeFun(r,e),r._ImgManager._UIView.GetWebViewer().clearSelectedAreas(),a.D.isFunction(t)&&t()):a.D.isFunction(n)&&n(r.ErrorCode,r.ErrorString),o)},t.RotateRight=function(e,t,n){var r=this;if(r._resetErr(),!r._isValid())return!1;if(e=i()(e),isNaN(e))return a.D.Errors.InvalidIndex(r),a.D.isFunction(n)&&n(r.ErrorCode,r.ErrorString),!1;if(e<0||e>=r._ImgManager.count())return a.D.Errors.IndexOutOfRange(r),a.D.isFunction(n)&&n(r.ErrorCode,r.ErrorString),!1;if(r._isMobileMode())return r._asyncRotateEx(e,90,!0,-1).then(t,(function(){a.D.isFunction(n)&&n(r.ErrorCode,r.ErrorString)})),!0;var o=r._ImgManager.convertClientIndexToServerId(e);return-1==o?(a.D.Errors.IndexOutOfRange(r),a.D.isFunction(n)&&n(r.ErrorCode,r.ErrorString),!1):((o=1==r._innerFun("RotateRight",(0,s.dv)(o)))?(u.refreshImageAfterInvokeFun(r,e),r._ImgManager._UIView.GetWebViewer().clearSelectedAreas(),a.D.isFunction(t)&&t()):a.D.isFunction(n)&&n(r.ErrorCode,r.ErrorString),o)},t.RotateAsync=function(e,t,n){var r=this;if(r._resetErr(),!r._isValid())return a.D.Promise.reject({code:r._errorCode,message:r._errorString});var o=i()(e);return isNaN(o)?(a.D.Errors.InvalidIndex(r),a.D.Promise.reject({code:r._errorCode,message:r._errorString})):o<0||o>=r._ImgManager.count()?(a.D.Errors.IndexOutOfRange(r),a.D.Promise.reject({code:r._errorCode,message:r._errorString})):r._isMobileMode()?r._asyncRotateEx(o,t,n,-1):-1==(e=r._ImgManager.convertClientIndexToServerId(o))?(a.D.Errors.IndexOutOfRange(r),a.D.Promise.reject({code:r._errorCode,message:r._errorString})):r._innerFunV2("Rotate",(0,s.dv)(e,t,n)).then((function(e){if(1!=e)throw{code:r._errorCode,message:r._errorString};u.refreshImageAfterInvokeFun(r,o),r._ImgManager._UIView.GetWebViewer().clearSelectedAreas()}))},t.RotateExAsync=function(e,t,n,r){var o=this;if(o._resetErr(),!o._isValid())return a.D.Promise.reject({code:o._errorCode,message:o._errorString});var c=i()(e);return isNaN(c)?(a.D.Errors.InvalidIndex(o),a.D.Promise.reject({code:o._errorCode,message:o._errorString})):c<0||c>=o._ImgManager.count()?(a.D.Errors.IndexOutOfRange(o),a.D.Promise.reject({code:o._errorCode,message:o._errorString})):o._isMobileMode()?o._asyncRotateEx(c,t,n,r):-1==(e=o._ImgManager.convertClientIndexToServerId(c))?(a.D.Errors.IndexOutOfRange(o),a.D.Promise.reject({code:o._errorCode,message:o._errorString})):o._innerFunV2("RotateEx",(0,s.dv)(e,t,n,r)).then((function(e){if(1!=e)throw{code:o._errorCode,message:o._errorString};u.refreshImageAfterInvokeFun(o,c),o._ImgManager._UIView.GetWebViewer().clearSelectedAreas()}))},t.RotateLeftAsync=function(e){var t=this;if(t._resetErr(),!t._isValid())return a.D.Promise.reject({code:t._errorCode,message:t._errorString});var n=i()(e);return isNaN(n)?(a.D.Errors.InvalidIndex(t),a.D.Promise.reject({code:t._errorCode,message:t._errorString})):n<0||n>=t._ImgManager.count()?(a.D.Errors.IndexOutOfRange(t),a.D.Promise.reject({code:t._errorCode,message:t._errorString})):t._isMobileMode()?t._asyncRotateEx(n,-90,!0,-1):-1==(e=t._ImgManager.convertClientIndexToServerId(n))?(a.D.Errors.IndexOutOfRange(t),a.D.Promise.reject({code:t._errorCode,message:t._errorString})):t._innerFunV2("RotateLeft",(0,s.dv)(e)).then((function(e){if(1!=e)throw{code:t._errorCode,message:t._errorString};u.refreshImageAfterInvokeFun(t,n),t._ImgManager._UIView.GetWebViewer().clearSelectedAreas()}))},t.RotateRightAsync=function(e){var t=this;if(t._resetErr(),!t._isValid())return a.D.Promise.reject({code:t._errorCode,message:t._errorString});var n=i()(e);return isNaN(n)?(a.D.Errors.InvalidIndex(t),a.D.Promise.reject({code:t._errorCode,message:t._errorString})):n<0||n>=t._ImgManager.count()?(a.D.Errors.IndexOutOfRange(t),a.D.Promise.reject({code:t._errorCode,message:t._errorString})):t._isMobileMode()?t._asyncRotateEx(n,90,!0,-1):-1==(e=t._ImgManager.convertClientIndexToServerId(n))?(a.D.Errors.IndexOutOfRange(t),a.D.Promise.reject({code:t._errorCode,message:t._errorString})):t._innerFunV2("RotateRight",(0,s.dv)(e)).then((function(e){if(1!=e)throw{code:t._errorCode,message:t._errorString};u.refreshImageAfterInvokeFun(t,n),t._ImgManager._UIView.GetWebViewer().clearSelectedAreas()}))},t._asyncChangeImageSize=function(e,t,n,r){var o=this,a=i()(e);return t=i()(t),n=i()(n),o._innerSendToMobileV2("ChangeImageSize",(0,s.An)(a,t,n,r)).then((function(){u.refreshImageAfterInvokeFun(o,e)}))},t.ChangeImageSize=function(e,t,n,r,o,c){var l=this,d=(e=i()(e),+t),h=+n;return l._resetErr(),!!l._isValid()&&(isNaN(e)?(a.D.Errors.InvalidIndex(l),a.D.isFunction(c)&&c(l.ErrorCode,l.ErrorString),!1):e<0||e>=l._ImgManager.count()?(a.D.Errors.IndexOutOfRange(l),a.D.isFunction(c)&&c(l.ErrorCode,l.ErrorString),!1):d<=0||h<=0?(a.D.Errors.InvalidWidthOrHeight(l),a.D.isFunction(c)&&c(l.ErrorCode,l.ErrorString),!1):l._isMobileMode()?(l._asyncChangeImageSize(e,t,n,r).then(o,(function(){a.D.isFunction(c)&&c(l.ErrorCode,l.ErrorString)})),!0):-1==(t=l._ImgManager.convertClientIndexToServerId(e))?(a.D.Errors.IndexOutOfRange(l),a.D.isFunction(c)&&c(l.ErrorCode,l.ErrorString),!1):((n=1==l._innerFun("ChangeImageSize",(0,s.dv)(t,d,h,r)))?(u.refreshImageAfterInvokeFun(l,e),a.D.isFunction(o)&&o()):a.D.isFunction(c)&&c(l.ErrorCode,l.ErrorString),n))},t.ChangeImageSizeAsync=function(e,t,n,r){var o=this,c=i()(e),l=(e=+t,+n);return o._resetErr(),o._isValid()?isNaN(c)?(a.D.Errors.InvalidIndex(o),a.D.Promise.reject({code:o._errorCode,message:o._errorString})):c<0||c>=o._ImgManager.count()?(a.D.Errors.IndexOutOfRange(o),a.D.Promise.reject({code:o._errorCode,message:o._errorString})):e<=0||l<=0?(a.D.Errors.InvalidWidthOrHeight(o),a.D.Promise.reject({code:o._errorCode,message:o._errorString})):o._isMobileMode()?o._asyncChangeImageSize(c,t,n,r):-1==(t=o._ImgManager.convertClientIndexToServerId(c))?(a.D.Errors.IndexOutOfRange(o),a.D.Promise.reject({code:o._errorCode,message:o._errorString})):o._innerFunV2("ChangeImageSize",(0,s.dv)(t,e,l,r)).then((function(e){if(1!=e)throw{code:o._errorCode,message:o._errorString};u.refreshImageAfterInvokeFun(o,c)})):a.D.Promise.reject({code:o._errorCode,message:o._errorString})},t._asyncFlip=function(e){var t=this,n=i()(e);return t._innerSendToMobileV2("Flip",(0,s.An)(n)).then((function(){u.refreshImageAfterInvokeFun(t,e),t._ImgManager._UIView.GetWebViewer().clearSelectedAreas()}))},t.Flip=function(e,t,n){var r=this;if(r._resetErr(),!r._isValid())return!1;if(e=i()(e),isNaN(e))return a.D.Errors.InvalidIndex(r),a.D.isFunction(n)&&n(r.ErrorCode,r.ErrorString),!1;if(e<0||e>=r._ImgManager.count())return a.D.Errors.IndexOutOfRange(r),a.D.isFunction(n)&&n(r.ErrorCode,r.ErrorString),!1;if(r._isMobileMode())return r._asyncFlip(e).then(t,(function(){a.D.isFunction(n)&&n(r.ErrorCode,r.ErrorString)})),!0;var o=r._ImgManager.convertClientIndexToServerId(e);return-1==o?(a.D.Errors.IndexOutOfRange(r),a.D.isFunction(n)&&n(r.ErrorCode,r.ErrorString),!1):((o=1==r._innerFun("Flip",(0,s.dv)(o)))?(u.refreshImageAfterInvokeFun(r,e),r._ImgManager._UIView.GetWebViewer().clearSelectedAreas(),a.D.isFunction(t)&&t()):a.D.isFunction(n)&&n(r.ErrorCode,r.ErrorString),o)},t.FlipAsync=function(e){var t=this;if(t._resetErr(),!t._isValid())return a.D.Promise.reject({code:t._errorCode,message:t._errorString});var n=i()(e);return isNaN(n)?(a.D.Errors.InvalidIndex(t),a.D.Promise.reject({code:t._errorCode,message:t._errorString})):n<0||n>=t._ImgManager.count()?(a.D.Errors.IndexOutOfRange(t),a.D.Promise.reject({code:t._errorCode,message:t._errorString})):t._isMobileMode()?t._asyncFlip(n):-1==(e=t._ImgManager.convertClientIndexToServerId(n))?(a.D.Errors.IndexOutOfRange(t),a.D.Promise.reject({code:t._errorCode,message:t._errorString})):t._innerFunV2("Flip",(0,s.dv)(e)).then((function(e){if(1!=e)throw{code:t._errorCode,message:t._errorString};u.refreshImageAfterInvokeFun(t,n),t._ImgManager._UIView.GetWebViewer().clearSelectedAreas()}))},t._asyncCrop=function(e,t,n,r,o){var a=this,c=i()(e);return a._innerSendToMobileV2("Crop",(0,s.An)(c,t,n,r,o)).then((function(){var t,n;u.refreshImageAfterInvokeFun(a,e),t=a.ErrorCode,n=a.ErrorString,a._ImgManager.getView().GetWebViewer().clearSelectedAreas(),a._errorCode=t,a._errorString=n}))},t.Crop=function(e,t,n,r,o,c,l){var d=this;if(d._resetErr(),!d._isValid())return!1;if(e=i()(e),isNaN(e))return a.D.Errors.InvalidIndex(d),a.D.isFunction(l)&&l(d.ErrorCode,d.ErrorString),!1;if(e<0||e>=d._ImgManager.count())return a.D.Errors.IndexOutOfRange(d),a.D.isFunction(l)&&l(d.ErrorCode,d.ErrorString),!1;if(d._isMobileMode())return d._asyncCrop(e,t,n,r,o).then(c,(function(){a.D.isFunction(l)&&l(d.ErrorCode,d.ErrorString)})),!0;var h=d._ImgManager.convertClientIndexToServerId(e);return-1==h?(a.D.Errors.IndexOutOfRange(d),a.D.isFunction(l)&&l(d.ErrorCode,d.ErrorString),!1):(h=1==d._innerFun("Crop",(0,s.dv)(h,t,n,r,o)),t=d.ErrorCode,n=d.ErrorString,d._ImgManager.getView().GetWebViewer().clearSelectedAreas(),d._errorCode=t,d._errorString=n,h?(u.refreshImageAfterInvokeFun(d,e),a.D.isFunction(c)&&c()):a.D.isFunction(l)&&l(t,n),h)},t.CropAsync=function(e,t,n,r,o){var c=this;if(c._resetErr(),!c._isValid())return a.D.Promise.reject({code:c._errorCode,message:c._errorString});var l=i()(e);return isNaN(l)?(a.D.Errors.InvalidIndex(c),a.D.Promise.reject({code:c._errorCode,message:c._errorString})):l<0||l>=c._ImgManager.count()?(a.D.Errors.IndexOutOfRange(c),a.D.Promise.reject({code:c._errorCode,message:c._errorString})):c._isMobileMode()?c._asyncCrop(l,t,n,r,o):-1==(e=c._ImgManager.convertClientIndexToServerId(l))?(a.D.Errors.IndexOutOfRange(c),a.D.Promise.reject({code:c._errorCode,message:c._errorString})):c._innerFunV2("Crop",(0,s.dv)(e,t,n,r,o)).then((function(e){var t=c.ErrorCode,n=c.ErrorString;if(c._ImgManager.getView().GetWebViewer().clearSelectedAreas(),c._errorCode=t,c._errorString=n,1!=e)throw{code:c._errorCode,message:c._errorString};return u.refreshImageAfterInvokeFun(c,l),!0}))},t.CropToClipboard=function(e,t,n,r,o){var c=this;if(c._resetErr(),!c._isValid())return!1;if(c._isMobileMode())return c._mobileNotSupport("CropToClipboard");if(e=i()(e),isNaN(e))return a.D.Errors.InvalidIndex(c),!1;if(e<0||e>=c._ImgManager.count())return a.D.Errors.IndexOutOfRange(c),!1;var l=c._ImgManager.convertClientIndexToServerId(e);return-1==l?(a.D.Errors.IndexOutOfRange(c),!1):(c._ImgManager.getView().GetWebViewer().clearSelectedAreas(),(l=1==c._innerFun("CropToClipboard",(0,s.dv)(l,t,n,r,o)))&&u.refreshImageAfterInvokeFun(c,e),l)},t.CutFrameToClipboard=function(e,t,n,r,o){var c=this;if(c._resetErr(),!c._isValid())return!1;if(c._isMobileMode())return c._mobileNotSupport("CutFrameToClipboard");if(e=i()(e),isNaN(e))return a.D.Errors.InvalidIndex(c),!1;if(e<0||e>=c._ImgManager.count())return a.D.Errors.IndexOutOfRange(c),!1;var l=c._ImgManager.convertClientIndexToServerId(e);return-1==l?(a.D.Errors.IndexOutOfRange(c),!1):(c._ImgManager.getView().GetWebViewer().clearSelectedAreas(),(l=1==c._innerFun("CutFrameToClipboard",(0,s.dv)(l,t,n,r,o)))&&u.refreshImageAfterInvokeFun(c,e),l)},t.CutToClipboard=function(e){var t,n=this;return n._resetErr(),!!n._isValid()&&(n._isMobileMode()?n._mobileNotSupport("CutToClipboard"):(e=i()(e),isNaN(e)?(a.D.Errors.InvalidIndex(n),!1):e<0||e>=n._ImgManager.count()||-1==(e=n._ImgManager.convertClientIndexToServerId(e))?(a.D.Errors.IndexOutOfRange(n),!1):((t=1==n._innerFun("CutToClipboard",(0,s.dv)(e)))&&n._OnBitmapChanged(["0",""+e,3,n._ImgManager.getCurrentImageIndex(),n._ImgManager.count()]),t)))},t.CutFrameToClipboardAsync=function(e,t,n,r,o){var c=this;if(c._resetErr(),!c._isValid())return a.D.Promise.reject({code:c._errorCode,message:c._errorString});if(c._isMobileMode())return c._mobileNotSupportAsync("CutFrameToClipboardAsync");var l=i()(e);return isNaN(l)?(a.D.Errors.InvalidIndex(c),a.D.Promise.reject({code:c._errorCode,message:c._errorString})):l<0||l>=c._ImgManager.count()||-1==(e=c._ImgManager.convertClientIndexToServerId(l))?(a.D.Errors.IndexOutOfRange(c),a.D.Promise.reject({code:c._errorCode,message:c._errorString})):c._innerFunV2("CutFrameToClipboard",(0,s.dv)(e,t,n,r,o)).then((function(e){if(e=1==e)return u.refreshImageAfterInvokeFun(c,l),e;throw{code:c._errorCode,message:c._errorString}}))},t.CropToClipboardAsync=function(e,t,n,r,o){var c=this;if(c._resetErr(),!c._isValid())return a.D.Promise.reject({code:c._errorCode,message:c._errorString});if(c._isMobileMode())return c._mobileNotSupportAsync("CropToClipboardAsync");var l=i()(e);return isNaN(l)?(a.D.Errors.InvalidIndex(c),a.D.Promise.reject({code:c._errorCode,message:c._errorString})):l<0||l>=c._ImgManager.count()||-1==(e=c._ImgManager.convertClientIndexToServerId(l))?(a.D.Errors.IndexOutOfRange(c),a.D.Promise.reject({code:c._errorCode,message:c._errorString})):c._innerFunV2("CropToClipboard",(0,s.dv)(e,t,n,r,o)).then((function(e){if(e=1==e)return u.refreshImageAfterInvokeFun(c,l),e;throw{code:c._errorCode,message:c._errorString}}))},t.CutToClipboardAsync=function(e){var t=this;if(t._resetErr(),!t._isValid())return a.D.Promise.reject({code:t._errorCode,message:t._errorString});if(t._isMobileMode())return t._mobileNotSupportAsync("CutToClipboardAsync");if(e=i()(e),isNaN(e))return a.D.Errors.InvalidIndex(t),a.D.Promise.reject({code:t._errorCode,message:t._errorString});if(e<0||e>=t._ImgManager.count())return a.D.Errors.IndexOutOfRange(t),a.D.Promise.reject({code:t._errorCode,message:t._errorString});var n=t._ImgManager.convertClientIndexToServerId(e);return-1==n?(a.D.Errors.IndexOutOfRange(t),a.D.Promise.reject({code:t._errorCode,message:t._errorString})):t._innerFunV2("CutToClipboard",(0,s.dv)(n)).then((function(e){if(e=1==e)return t._OnBitmapChanged(["0",""+n,3,t._ImgManager.getCurrentImageIndex(),t._ImgManager.count()]),e;throw{code:t._errorCode,message:t._errorString}}))},t._asyncSetDPI=function(e,t,n,r,c,l,d,h){var g=this,f=i()(e);return n=i()(n),r=i()(r),l=i()(l),isNaN(n)||n<=0||isNaN(r)||r<=0||isNaN(l)||l<0?(a.D.Errors.InvalidParameter(g),a.D.isFunction(h)&&h(g.ErrorCode,g.ErrorString),!1):g._innerSendToMobile("SetDPI",(0,s.An)(f,n,r,c,l),0,(function(){u.refreshImageAfterInvokeFun(g,e),a.D.isFunction(d)&&o()(d,30)}),(function(){a.D.isFunction(h)&&h(g.ErrorCode,g.ErrorString)}))},t.SetDPI=function(e,t,n,r,o,u,c){var l=this;if(l._resetErr(),!l._isValid())return!1;if(e=i()(e),isNaN(e))return a.D.Errors.InvalidIndex(l),a.D.isFunction(c)&&c(l.ErrorCode,l.ErrorString),!1;if(e<0||e>=l._ImgManager.count())return a.D.Errors.IndexOutOfRange(l),a.D.isFunction(c)&&c(l.ErrorCode,l.ErrorString),!1;var d=l._ImgManager.convertClientIndexToServerId(e);return-1==d?(a.D.Errors.IndexOutOfRange(l),a.D.isFunction(c)&&c(l.ErrorCode,l.ErrorString),!1):l._isMobileMode()?l._asyncSetDPI(e,d,t,n,r,o,u,c):((e=1==l._innerFun("SetDPI",(0,s.dv)(d,t,n,r,o)))?a.D.isFunction(u)&&u():a.D.isFunction(c)&&c(l.ErrorCode,l.ErrorString),e)},t.MoveImage=function(e,t){return this._resetErr(),!!this._isValid()&&(e=i()(e),t=i()(t),isNaN(e)||isNaN(t)?(a.D.Errors.InvalidIndex(this),!1):e<0||e>=this._ImgManager.count()||t<0||t>=this._ImgManager.count()?(a.D.Errors.IndexOutOfRange(this),!1):this._ImgManager.MoveImage(e,t))},t.SwitchImage=function(e,t){return this._resetErr(),!!this._isValid()&&(e=i()(e),t=i()(t),isNaN(e)||isNaN(t)?(a.D.Errors.InvalidIndex(this),!1):e<0||e>=this._ImgManager.count()||t<0||t>=this._ImgManager.count()?(a.D.Errors.IndexOutOfRange(this),!1):this._ImgManager.SwitchImage(e,t))},t.CloseWorkingProcess=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CloseWorkerProcess"):this._innerFun("CloseWorkerProcess"))},t.RemoveAllSelectedImages=function(){var e=this,t=e._isMobileMode();if(e._resetErr(),!e._isValid())return!1;var n=!0,r=e._ImgManager.getCurrentImageIndex(),i=e._ImgManager.getSelectedClientIndexArray(),o=[];return a.D.isArray(i)&&a.D.each(i,(function(t){-1!=(t=e._ImgManager.convertClientIndexToServerId(t))&&o.push(t)})),0==o.length&&0<=r&&(i=e._ImgManager.convertClientIndexToServerId(r),o.push(i)),(n=t?n:e._innerFun("RemoveAllSelectedImages",(0,s.dv)(o.join(","))))&&(t||(e._HowManyImagesInBuffer=e._innerFun("HowManyImagesInBuffer")),a.D.each(o,(function(t){var n="0";e._isMobileMode()&&(n="10"),e._OnBitmapChanged([n,""+t,3,e._ImgManager.getCurrentImageIndex(),e._ImgManager.count()])}))),n},t.RemoveAllSelectedImagesAsync=function(){var e=this,t=e._isMobileMode();if(e._resetErr(),!e._isValid())return a.D.Promise.reject({code:e._errorCode,message:e._errorString});var n=e._ImgManager.getCurrentImageIndex(),r=e._ImgManager.getSelectedClientIndexArray(),i=[];return a.D.isArray(r)&&a.D.each(r,(function(t){-1!=(t=e._ImgManager.convertClientIndexToServerId(t))&&i.push(t)})),0==i.length&&0<=n&&(r=e._ImgManager.convertClientIndexToServerId(n),i.push(r)),(t?a.D.Promise.resolve(!0):e._innerFunV2("RemoveAllSelectedImages",(0,s.dv)(i.join(","))).then((function(t){return t&&e._innerFunV2("HowManyImagesInBuffer").then((function(t){return e._HowManyImagesInBuffer=t,!0}))}))).then((function(t){t&&a.D.each(i,(function(t){var n="0";e._isMobileMode()&&(n="10"),e._OnBitmapChanged([n,""+t,3,e._ImgManager.getCurrentImageIndex(),e._ImgManager.count()])}))}))},t.TagImages=function(e,t){var n=this;if(n._resetErr(),!n._isValid())return!1;var r=!0,i=n._ImgManager.getView().GetWebViewer().GetHowManyImagesInBuffer();return a.D.isArray(e)?a.D.isString(t)&&""!=t?(a.D.each(e,(function(e){if(isNaN(e)||e<0||i<=e)return a.D.Errors.IndexOutOfRange(n),r=!1})),r&&n._ImgManager.AddImageTag(e,t)):(a.D.Errors.InvalidTagName(n),!1):(a.D.Errors.IndicesNotArray(n),!1)},t.ClearImageTags=function(e){return this._resetErr(),!!this._isValid()&&(-1==e||e>=this.HowManyImagesInBuffer?(a.D.Errors.IndexOutOfRange(this),!1):this._ImgManager.RemoveImageTag(e))},t.SetDefaultTag=function(e){return this._resetErr(),!!this._isValid()&&this._ImgManager.SetDefaultTag(e)},t.FilterImagesByTag=function(e,t,n){return this._resetErr(),!!this._isValid()&&this._ImgManager.ShowImagesByFilter(e,t,n)},t.ClearFilter=function(){return this._resetErr(),!!this._isValid()&&this._ImgManager.ClearFilter()},t.CreateDocument=function(e){return this._resetErr(),!!this._isValid()&&(e&&""!=e?a.D.isString(e)?this._ImgManager.CreateFile(e):(a.D.Errors.FileNameNotString(this),!1):(a.D.isNumber(e)?a.D.Errors.FileNameNotString(this):a.D.Errors.FileNameCannotEmpty(this),!1))},t.OpenDocument=function(e){return this._resetErr(),!!this._isValid()&&(e&&""!=e?a.D.isString(e)?this._ImgManager.OpenFile(e):(a.D.Errors.FileNameNotString(this),!1):(a.D.isNumber(e)?a.D.Errors.FileNameNotString(this):a.D.Errors.FileNameCannotEmpty(this),!1))},t.GetCurrentDocumentName=function(){return this._resetErr(),!!this._isValid()&&this._ImgManager.GetCurrentFileName()},t.RemoveDocument=function(e){var t=this._isMobileMode();return this._resetErr(),!!this._isValid()&&(t||(t=this._ImgManager.GetImageIdsByFileName(e),this._innerFun("RemoveAllSelectedImages",(0,s.dv)(t.join(",")))),this._ImgManager.RemoveFile(e))},t.RenameDocument=function(e,t){return this._resetErr(),!!this._isValid()&&(a.D.isString(e)&&a.D.isString(t)?e&&""!=e&&t&&""!=t?this._ImgManager.RenameFile(e,t):(a.D.Errors.FileNameCannotEmpty(this),!1):(a.D.Errors.FileNameNotString(this),!1))},t.GetDocumentInfoList=function(){return this._resetErr(),!!this._isValid()&&this._ImgManager.GetFileInfoList()},t._asyncInvert=function(e){var t=this,n=i()(e);return t._innerSendToMobileV2("Invert",(0,s.An)(n)).then((function(){u.refreshImageAfterInvokeFun(t,e)}))},t.Invert=function(e,t,n){var r=this;if(e=i()(e),r._resetErr(),!r._isValid())return!1;if(isNaN(e))return a.D.Errors.InvalidIndex(r),a.D.isFunction(n)&&n(r.ErrorCode,r.ErrorString),!1;if(e<0||e>=r._ImgManager.count())return a.D.Errors.IndexOutOfRange(r),a.D.isFunction(n)&&n(r.ErrorCode,r.ErrorString),!1;if(r._isMobileMode())return r._asyncInvert(e).then(t,(function(){a.D.isFunction(n)&&n(r.ErrorCode,r.ErrorString)})),!0;var o=r._ImgManager.convertClientIndexToServerId(e);return-1==o?(a.D.Errors.IndexOutOfRange(r),a.D.isFunction(n)&&n(r.ErrorCode,r.ErrorString),!1):((o=1==r._innerFun("Invert",(0,s.dv)(o)))?(u.refreshImageAfterInvokeFun(r,e),a.D.isFunction(t)&&t()):a.D.isFunction(n)&&n(r.ErrorCode,r.ErrorString),o)},t.InvertAsync=function(e){var t=this,n=i()(e);return t._resetErr(),t._isValid()?isNaN(n)?(a.D.Errors.InvalidIndex(t),a.D.Promise.reject({code:t._errorCode,message:t._errorString})):n<0||n>=t._ImgManager.count()?(a.D.Errors.IndexOutOfRange(t),a.D.Promise.reject({code:t._errorCode,message:t._errorString})):t._isMobileMode()?t._asyncInvert(n):-1==(e=t._ImgManager.convertClientIndexToServerId(n))?(a.D.Errors.IndexOutOfRange(t),a.D.Promise.reject({code:t._errorCode,message:t._errorString})):t._innerFunV2("Invert",(0,s.dv)(e)).then((function(e){if(e=1==e)return u.refreshImageAfterInvokeFun(t,n),e;throw{code:t._errorCode,message:t._errorString}})):a.D.Promise.reject({code:t._errorCode,message:t._errorString})},t.RenameTag=function(e,t){return this._resetErr(),!!this._isValid()&&(a.D.isUndefined(e)?(a.D.Errors.ParameterCannotEmpty(this),!1):0==e.length?(a.D.Errors.OldTagNameRequired(this),!1):a.D.isUndefined(t)||0==t.length?(a.D.Errors.NewTagNameRequired(this),!1):this._ImgManager.RenameTag(e,t))},t.RemoveTag=function(e,t){return this._resetErr(),!!this._isValid()&&(a.D.isUndefined(e)||0==e.length?(a.D.Errors.ParameterCannotEmpty(this),!1):a.D.isUndefined(t)||a.D.isArray(t)?this._ImgManager.RemoveTag(e,t):(a.D.Errors.IndicesNotArray(this),!1))},t.GetTagList=function(){return this._resetErr(),!!this._isValid()&&this._ImgManager.GetTagList()},t.GetTagListByIndex=function(e){return this._resetErr(),!!this._isValid()&&this._ImgManager.GetTagListByIndex(e)},t._registLoadCallback=function(e){return this._resetErr(),!!this._isValid()&&this._ImgManager.RegistLoadCallback(e)},t.GetImageBitDepthAsync=function(e){var t=this;if(t._resetErr(),!t._isValid())return a.D.Promise.reject({code:t._errorCode,message:t._errorString});if(e=i()(e),isNaN(e))return a.D.Errors.InvalidIndex(t),a.D.Promise.reject({code:t._errorCode,message:t._errorString});if(e<0||e>=t._ImgManager.count())return a.D.Errors.IndexOutOfRange(t),a.D.Promise.reject({code:t._errorCode,message:t._errorString});if(t._isMobileMode())return n=t._ImgManager._UIView.GetMetaDataByIndex(e),a.D.Promise.resolve(i()(n.bitDepth));var n=t._ImgManager.convertClientIndexToServerId(e);return-1==n?(a.D.Errors.IndexOutOfRange(t),a.D.Promise.reject({code:t._errorCode,message:t._errorString})):t._innerFunV2("GetImageBitDepth",(0,s.dv)(n))},t.GetImageWidthAsync=function(e){var t=this;if(t._resetErr(),!t._isValid())return a.D.Promise.reject({code:t._errorCode,message:t._errorString});if(e=i()(e),isNaN(e))return a.D.Errors.InvalidIndex(t),a.D.Promise.reject({code:t._errorCode,message:t._errorString});if(e<0||e>=t._ImgManager.count())return a.D.Errors.IndexOutOfRange(t),a.D.Promise.reject({code:t._errorCode,message:t._errorString});if(t._isMobileMode())return n=t._ImgManager._UIView.GetMetaDataByIndex(e),a.D.Promise.resolve(i()(n.width));var n=t._ImgManager.convertClientIndexToServerId(e);return-1==n?(a.D.Errors.IndexOutOfRange(t),a.D.Promise.reject({code:t._errorCode,message:t._errorString})):t._innerFunV2("GetImageWidth",(0,s.dv)(n))},t.GetImageHeightAsync=function(e){var t=this;if(t._resetErr(),!t._isValid())return a.D.Promise.reject({code:t._errorCode,message:t._errorString});if(e=i()(e),isNaN(e))return a.D.Errors.InvalidIndex(t),a.D.Promise.reject({code:t._errorCode,message:t._errorString});if(e<0||e>=t._ImgManager.count())return a.D.Errors.IndexOutOfRange(t),a.D.Promise.reject({code:t._errorCode,message:t._errorString});if(t._isMobileMode())return n=t._ImgManager._UIView.GetMetaDataByIndex(e),a.D.Promise.resolve(i()(n.height));var n=t._ImgManager.convertClientIndexToServerId(e);return-1==n?(a.D.Errors.IndexOutOfRange(t),a.D.Promise.reject({code:t._errorCode,message:t._errorString})):t._innerFunV2("GetImageHeight",(0,s.dv)(n))},t.GetImageSizeAsync=function(e,t,n){var r=this;return r._resetErr(),r._isValid()?r._isMobileMode()?r._mobileNotSupportAsync("GetImageSizeAsync"):(e=i()(e),isNaN(e)?(a.D.Errors.InvalidIndex(r),a.D.Promise.reject({code:r._errorCode,message:r._errorString})):e<0||e>=r._ImgManager.count()||-1==(e=r._ImgManager.convertClientIndexToServerId(e))?(a.D.Errors.IndexOutOfRange(r),a.D.Promise.reject({code:r._errorCode,message:r._errorString})):r._innerFunV2("GetImageSize",(0,s.dv)(e,t,n))):a.D.Promise.reject({code:r._errorCode,message:r._errorString})},t.GetImageSizeWithSpecifiedTypeAsync=function(e,t){var n=this;return n._resetErr(),n._isValid()?n._isMobileMode()?n._mobileNotSupportAsync("GetImageSizeWithSpecifiedTypeAsync"):(e=i()(e),isNaN(e)?(a.D.Errors.InvalidIndex(n),a.D.Promise.reject({code:n._errorCode,message:n._errorString})):e<0||e>=n._ImgManager.count()||-1==(e=n._ImgManager.convertClientIndexToServerId(e))?(a.D.Errors.IndexOutOfRange(n),a.D.Promise.reject({code:n._errorCode,message:n._errorString})):n._innerFunV2("GetImageSizeWithSpecifiedType",(0,s.dv)(e,t))):a.D.Promise.reject({code:n._errorCode,message:n._errorString})},t.GetImageXResolutionAsync=function(e){var t=this;if(t._resetErr(),!t._isValid())return a.D.Promise.reject({code:t._errorCode,message:t._errorString});if(e=i()(e),isNaN(e))return a.D.Errors.InvalidIndex(t),a.D.Promise.reject({code:t._errorCode,message:t._errorString});if(e<0||e>=t._ImgManager.count())return a.D.Errors.IndexOutOfRange(t),a.D.Promise.reject({code:t._errorCode,message:t._errorString});if(t._isMobileMode())return n=t._ImgManager._UIView.GetMetaDataByIndex(e),a.D.Promise.resolve(i()(n.resolutionX));var n=t._ImgManager.convertClientIndexToServerId(e);return-1==n?(a.D.Errors.IndexOutOfRange(t),a.D.Promise.reject({code:t._errorCode,message:t._errorString})):t._innerFunV2("GetImageXResolution",(0,s.dv)(n))},t.GetImageYResolutionAsync=function(e){var t=this;if(t._resetErr(),!t._isValid())return a.D.Promise.reject({code:t._errorCode,message:t._errorString});if(e=i()(e),isNaN(e))return a.D.Errors.InvalidIndex(t),a.D.Promise.reject({code:t._errorCode,message:t._errorString});if(e<0||e>=t._ImgManager.count())return a.D.Errors.IndexOutOfRange(t),a.D.Promise.reject({code:t._errorCode,message:t._errorString});if(t._isMobileMode())return n=t._ImgManager._UIView.GetMetaDataByIndex(e),a.D.Promise.resolve(i()(n.resolutionY));var n=t._ImgManager.convertClientIndexToServerId(e);return-1==n?(a.D.Errors.IndexOutOfRange(t),a.D.Promise.reject({code:t._errorCode,message:t._errorString})):t._innerFunV2("GetImageYResolution",(0,s.dv)(n))},t.ChangeBrightnessAsync=function(e,t){var n=this,r=i()(e);return n._isValid()?t<-1e3||1e3<t?(a.D.Errors.InvalidValue(n),a.D.Promise.reject({code:n._errorCode,message:n._errorString})):n._isMobileMode()?n._innerSendToMobileV2("ChangeBrightness",(0,s.An)(r,t)).then((function(){u.refreshImageAfterInvokeFun(n,e),n._ImgManager._UIView.GetWebViewer().clearSelectedAreas()})):-1==(r=n._ImgManager.convertClientIndexToServerId(r))?(a.D.Errors.IndexOutOfRange(n),a.D.Promise.reject({code:n._errorCode,message:n._errorString})):n._innerFunV2("ChangeBrightness",(0,s.dv)(r,t)):a.D.Promise.reject({code:n._errorCode,message:n._errorString})},t.ChangeContrastAsnyc=function(e,t){var n=this,r=i()(e);return n._isValid()?t<-1e3||1e3<t?(a.D.Errors.InvalidValue(n),a.D.Promise.reject({code:n._errorCode,message:n._errorString})):n._isMobileMode()?n._innerSendToMobileV2("ChangeContrast",(0,s.An)(r,t)).then((function(){u.refreshImageAfterInvokeFun(n,e),n._ImgManager._UIView.GetWebViewer().clearSelectedAreas()})):-1==(r=n._ImgManager.convertClientIndexToServerId(r))?(a.D.Errors.IndexOutOfRange(n),a.D.Promise.reject({code:n._errorCode,message:n._errorString})):n._innerFunV2("ChangeContrast",(0,s.dv)(r,t)):a.D.Promise.reject({code:n._errorCode,message:n._errorString})}},4571:function(e,t,n){n.r(t);var r,i=n(9623),o=(t=n(4579),n.n(t)),a=(t=n(1006),n.n(t)),s=(t=n(7711),n.n(t)),u=(t=n(3662),n.n(t)),c=(t=n(6019),n.n(t)),l=(t=n(9104),n.n(t)),d=(t=n(9798),n.n(t)),h=n(1695),g=(t=n(5683),n.n(t));function f(){try{if("object"===("undefined"==typeof WebAssembly?"undefined":(0,i.Z)(WebAssembly))&&"function"==typeof WebAssembly.instantiate){var e=new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0]));if(e instanceof WebAssembly.Module)return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}catch(n){}}function m(){h.I.WasmEnv&&(h.I.WasmEnv.useFastcompEdition=h.I.Lib.env.isWasmUseFastcomp(),h.I.DWT.WasmConfig&&(h.I.DWT.WasmConfig.fetchOptions&&(h.I.WasmEnv.fetchOptions=h.I.DWT.WasmConfig.fetchOptions),h.I.DWT.WasmConfig.maxHeapSize&&(h.I.WasmEnv.maxHeapSize=h.I.DWT.WasmConfig.maxHeapSize)))}function p(e,t){var r,i=[h.I.DWT.ResourcesPath,"/src/dynamsoft.imageio.js",h.I.Lib.timestamp].join("");if(h.D.IsNeedLoadWasm()){if(!f())return void e();if(!h.D.detect.wasmScriptLoaded)return h.D.showLoadingMsg(-1,"",h.I.MSG.Init_DownloadingWasm),r=function(r){if(h.D.detect.wasmScriptLoaded=!0,m(),h.D.showLoadingMsg(-1,"",h.I.MSG.Init_CompilingWasm),h.D.License.isLTS())h.I.DWT.lglic(h.I.DWT.EnumInstance.dwt_browser).then((function(t){try{h.I.WasmEnv.load(t.ar,!0,t.cu),h.I.WasmEnv.wasmLoad=!0}catch(n){}e()}),(function(e){e&&(h.I.DWT.lsetException(e.code||e.ltsErrorCode,e.message),h.D.closeLoadingMsg(),h.I.DWT.OnLicenseException()),t(e)}));else{try{h.I.WasmEnv.load(h.I.DWT.ProductKey),h.I.WasmEnv.wasmLoad=!0}catch(n){}e()}},void(h.I.DWT.bNpm?r():h.D.getScript(i,!0,r))}else if(h.D.showLoadingMsg(-1,"",h.I.MSG.Init_InitDynamsoftService),!h.D.detect.wasmScriptLoaded&&!h.I.navInfoSync.bFileSystem&&h.I.DWT.UseCameraAddonWasm){if(!f())return void e();var o=function(r){if(h.D.detect.wasmScriptLoaded=!0,m(),h.D.License.isLTS())h.I.DWT.lglic(h.I.DWT.EnumInstance.dwt_browser).then((function(t){try{h.I.WasmEnv.load(t.ar,!0,t.cu),h.I.WasmEnv.wasmLoad=!0}catch(n){}e()}),(function(e){e&&(h.I.DWT.lsetException(e.code||e.ltsErrorCode,e.message),h.D.closeLoadingMsg(),h.I.DWT.OnLicenseException()),t(e)}));else{try{h.I.WasmEnv.load(h.I.DWT.ProductKey),h.I.WasmEnv.wasmLoad=!0}catch(n){}e()}};return void(h.I.DWT.bNpm?o():h.D.getScript(i,!0,o))}e()}function _(){h.D.detect.scriptLoaded?new h.D.Promise(p).then((function(){r()})):o()(_,60)}function v(){return new h.D.Promise((function(e){r=e,o()(_,60)}))}h.I.DWT.NeedCheckWebTwainBySocket=function(){return"localhost"!=(e=location.hostname)&&"127.0.0.1"!=e&&0!=g()(e).call(e,"192.168.")&&0!=g()(e).call(e,"172.16.")&&0!=g()(e).call(e,"10.")&&!h.I.navInfoSync.bSSL&&!!((h.I.navInfoSync.bChrome||h.I.navInfoSync.bEdge)&&94<=s()(h.I.navInfoSync.strBrowserVersion));var e},h.I.DWT.CheckWebTwainBySocket=function(e,t,n){var r,i,a=h.I.Lib.detect.urls;(r=a&&0<a.length?(a=a[0],h.I.Lib.getWS(a.host,a.port,a.ssl)):(i=(a=h.I.navInfoSync.bSSL)?h.I.DWT.SSLPort:h.I.DWT.Port,h.I.Lib.getWS(h.I.Lib.product.host,i,a))).onopen=function(){var e;1==r.readyState?(r.onopen=null,e=['{"id":"',(new Date).getTime(),'","method":"VersionInfo","version":"',h.I.Lib.product.getDWTPrefix(),h.I.Lib.product.getServerVersionInfo(),'"}'].join(""),r.send(e)):0==r.readyState&&o()(r.onopen,100)},r.onmessage=function(i){try{var o;r.close(),(0<=g()(o=i.data).call(o,"Version not found")?t:e)()}catch(l){n(),r.close()}},r.onerror=function(){n()}},h.I.DWT.IsLocalServiceConnected=function(){return new h.D.Promise((function(e,t){var n,r=h.I.dcp.host;h.D.each(h.D.detect.ports,(function(e){h.I.navInfoSync.bSSL?e.ssl&&(n=e.port):e.ssl||(n=e.port)})),h.I.DWT.CheckConnectToTheService(r,n,(function(t,n,r){e(!0)}),(function(){t(!1)}))}))};var I=n(1255),y=h.I.navInfoSync,b=window,D=b.document,T=h.I.Lib.timestamp;function S(e){var t,n,r,i,a,s,u;h.D.product.loadResourcePath||h.D.product.loadingResourcePath||((0<h.I.DWT.Port||0<h.I.DWT.SSLPort)&&(h.D.detect.ports=[{port:h.I.DWT.Port,ssl:!1},{port:h.I.DWT.SSLPort,ssl:!0}],h.D.LS.removeItem("DWT_port"),h.D.LS.removeItem("DWT_ssl")),h.D.isArray(h.I.DWT.licenseServer)?0<h.I.DWT.licenseServer.length&&(""!=(n=h.I.DWT.licenseServer[0])&&0!=g()(n).call(n,"https://mlts.dynamsoft.com")||(h.I.DWT.licenseServer=void 0)):h.I.DWT.licenseServer=void 0,h.D.isString(h.I.DWT.organizationID)&&""!=h.I.DWT.organizationID&&"undefined"!=h.I.DWT.organizationID||(h.I.DWT.organizationID=h.D.isNumber(h.I.DWT.organizationID)?""+h.I.DWT.organizationID:void 0),h.D.isString(h.I.DWT.handshakeCode)&&""!=h.I.DWT.handshakeCode&&"undefined"!=h.I.DWT.handshakeCode||(h.I.DWT.handshakeCode=h.D.isNumber(h.I.DWT.handshakeCode)?""+h.I.DWT.handshakeCode:void 0),h.D.isString(h.I.DWT.ProductKey)?""!=h.I.DWT.ProductKey&&"f"!=(n=h.I.DWT.ProductKey.charAt(0))&&"t"!=n&&(h.I.DWT.organizationID=h.I.DWT.ProductKey,h.I.DWT.ProductKey=void 0):h.I.DWT.ProductKey=void 0,n=I.LX,h.I.DWT.CertificateConfig?(h.D.isString((t=h.I.DWT.CertificateConfig).URL)||(t.URL=n.URL),(!h.D.isNumber(t.UpdateDaysBeforeExpired)||t.UpdateDaysBeforeExpired<=0)&&(t.UpdateDaysBeforeExpired=n.UpdateDaysBeforeExpired)):h.I.DWT.CertificateConfig=n,t=I.Vn,h.D.isString((n=h.I.DWT.CustomizableDisplayInfo).loaderBarSource)&&""!=n.loaderBarSource?h.D.loaderBarSource=n.loaderBarSource:y.bIE?h.D.loaderBarSourceIE=t.loaderBarSource:h.D.loaderBarSource=t.loaderBarSource,h.D.loaderBarClassName=h.D.isString(n.loaderBarClassName)&&""!=n.loaderBarClassName?n.loaderBarClassName:t.loaderBarClassName,h.D.loaderBarBackgroundColor=h.D.isString(n.loaderBarBackgroundColor)?n.loaderBarBackgroundColor:t.loaderBarBackgroundColor,h.D._safePromptCustomMsg(),h.D.each(h.D._funsAfterConfigLoaded,(function(e){try{h.D.isFunction(e)&&e()}catch(n){}})),h.D.showLoadingMsg(-1,"",h.I.MSG.Init_LookingLicense),(i=h.D.one(".dynamsoft_waiting").getEL())&&i.parentNode&&i.parentNode.removeChild(i),i=y.bFileSystem,a=h.D.env.basePath,r=h.I.DWT.ResourcesPath,h.D.product.loadResourcePath||h.D.product.loadingResourcePath||(h.D.product.loadingResourcePath=!0,i||(0<(r=void 0!==r&&""!=r?r:a).length&&"/"==r.charAt(r.length-1)&&(r=r.substr(0,r.length-1)),h.I.DWT.ResourcesPath=r),i=!0,a=[],u=[[h.I.managerEnv.resourcesPath=r,"/src/dynamsoft.webtwain.css",T].join("")],s=function(){h.D.detect.cssLoaded=!0},h.D.product.bHTML5Edition&&h.I.DWT.UseDefaultViewer&&u.push([r,"/src/dynamsoft.viewer.css",T].join("")),y.bSafari?(h.D.getAllCss(u,s),s()):h.D.getAllCss(u,s),y.bSafari&&(i=!1),a.push([r,"/dynamsoft.webtwain.install.js",T].join("")),h.I.DWT.bNpm&&(a=[]),h.D.product.bHTML5Edition&&h.I.DWT.UseDefaultViewer&&a.push([r,"/src/dynamsoft.viewer.js",T].join("")),u=!1,!(u=h.I.navInfoSync.bIE?h.I.navInfoSync.strBrowserVersion<=7:u)&&h.D.License.isLTS()&&a.push([r,"/src/dynamsoft.lts.js",T].join("")),0<a.length&&h.D.showLoadingMsg(-1,"",h.I.MSG.Init_LoadingViewerJs),h.D.getScripts(a,i,(function(t){if(!t)return h.D.log("error: load js failed."),void(h.D.product.loadingResourcePath=!1);if(h.D.showLoadingMsg(-1,"",h.I.MSG.Init_AllJsLoaded),h.D.detect.scriptLoaded=!0,h.D.isString(h.I.DWT.Host)&&(h.I.dcp.host=h.I.DWT.Host,h.D.product.host=h.I.DWT.Host),h.D.product.bHTML5Edition?h.D.closeAll=h.D.html5.closeAll:h.D.product.bActiveXEdition&&(h.D.closeAll=h.D.ie.closeAll),h.D.isUndefined(h.I.DWT.UseLocalService)&&(h.I.DWT.UseLocalService=!h.D.env.bMobile),h.I.DWT._srcUseLocalService=h.I.DWT.UseLocalService,h.D.isArray(h.I.aryAddonReadyFun)){for(var n=0;n<h.I.aryAddonReadyFun.length;n++){var r=h.I.aryAddonReadyFun[n];if(h.D.isFunction(r))try{r(h.D)}catch(i){h.D.log(i.stack||i,"error"),o()((function(){throw i}),0)}}h.I.aryAddonReadyFun=[]}h.D.product.loadResourcePath=!0,h.D.product.loadingResourcePath=!1,e||(h.I.Lib.detect.bAutoLoadDone=!0)}))))}var w=[];function C(){if(h.D.isArray(h.I.DWT.Containers)){for(var e=w.length,t=0;t<e;t++)w[t]();u()(w).call(w,0)}else o()(C,60)}function E(){return new h.D.Promise((function(e){w.push(e),h.D.domReady((function(){o()(C,60)}))}))}h.D.domReady((function(){E().then((function(){0<h.I.DWT.Containers.length&&h.I.DWT.AutoLoad&&(S(!0),h.D.showLoadingMsg(-1,"",h.I.MSG.Init_FireBeforeInitEvt),h.I.DWT.OnWebTwainWillInit&&h.I.DWT.OnWebTwainWillInit(),o()(h.I.DWT._innerLoad,10))})),y.bIE&&b.addEventListener&&b.addEventListener("unload",h.I.DWT.Unload,!1),b&&(h.D.addEventListener(b,"focus",(function(){var e=h.I.DWT.ContainerMap;e&&h.D.each(e,(function(e,t){e&&e._OnPageFocus&&e._OnPageFocus()}))})),h.D.addEventListener(b,"blur",(function(){var e;h.I.navInfoSync.bWin&&(e=h.I.DWT.ContainerMap)&&h.D.each(e,(function(e,t){e&&e._OnPageBlur&&e._OnPageBlur()}))})),h.D.addEventListener(D,"visibilitychange",(function(){var e;h.I.navInfoSync.bWin&&"hidden"==D.visibilityState&&(e=h.I.DWT.ContainerMap)&&h.D.each(e,(function(e,t){e&&e._OnPageBlur&&e._OnPageBlur()}))})))})),window.onbeforeunload=function(){h.I.DWT.Unload(),h.D.each(h.I.DWT.globalWS,(function(e){try{e.close()}catch(n){}}))};var M=h.I.navInfoSync,P=h.I.dcp,A=h.D.win,x=h.I.Lib.timestamp,R=function(e,t,n,r){h.D.isFunction(e)&&o()((function(){e(t,n,r)}),10)},k={bConnected:!1,_dwtVersionInfoSuccessCallback:function(e,t,n,r){var i,o,a,s;h.D.isFunction(r)&&(i=n[0],s=1<n.length?n[1]:"",o=2<n.length?n[2]:0,a=3<n.length?n[3]:"",n=4<n.length?n[4]:"",""!==s?(h.I.DWT.OnWebTwainInitMessage&&h.I.DWT.OnWebTwainInitMessage(s,h.I.DWT.EnumDWT_InitMsg.Error),R(r,2,h.I.DWT.CustomizableDisplayInfo.errorMessages.ERR_MODULE_NOT_INSTALLED)):(h.I.DWT.OnWebTwainInitMessage&&h.I.DWT.OnWebTwainInitMessage("The WebTwain version is: "+i,h.I.DWT.EnumDWT_InitMsg.Info),"64"==o&&(h.I.dcp.b64bit=!0),""!=a&&h.I.DWT.lsmid(a),k.bConnected=!0,r(0,e,t,i)),h.D.isFunction(h.I.OnSSLCertInfo)&&(s=null,""!=n&&(s=Date.parse(n+"T00:00:00"),s=isNaN(s)?null:new Date(s)),h.I.OnSSLCertInfo(s)))},versionInfo:function(e,t,n){var r,i=['{"id":"',(new Date).getTime(),'","method":"VersionInfo","version":"',h.D.product.getDWTPrefix(),h.D.product.getServerVersionInfo(),'","parameter":[]}'].join(""),a=function(){k.bConnected=!1,h.I.DWT.OnWebTwainInitMessage&&h.I.DWT.OnWebTwainInitMessage(h.I.DWT.CustomizableDisplayInfo.errorMessages.ERR_MODULE_NOT_INSTALLED,h.I.DWT.EnumDWT_InitMsg.NotInstalledError),n&&R(n,2,h.I.DWT.CustomizableDisplayInfo.errorMessages.ERR_MODULE_NOT_INSTALLED)};h.I.DWT.OnWebTwainInitMessage&&h.I.DWT.OnWebTwainInitMessage(h.I.DWT.CustomizableDisplayInfo.generalMessages.checkingDWTVersion,h.I.DWT.EnumDWT_InitMsg.Info),r=function(r){var i=P._getJSON(r);i&&"result"in i&&h.D.isArray(i=i.result)&&0<i.length?o()((function(){k._dwtVersionInfoSuccessCallback(e,t,i,n)}),0):o()(a,1e3)},h.I.DWT.ConnectWithSocket&&h.I.navInfoSync.bHTML5Edition?P.postStringDataByWS(P.getWsUrl(e,t),i,r,a):h.D.ajax({method:"POST",url:[k._getPreUrl(e,t),"fa/VersionInfo?ts=",h.D.now()].join(""),data:i,onSuccess:r,onError:a})},_getPreUrl:function(e,t){return[h.I.navInfoSync.bSSL?"https://":"http://",e,":",t,"/"].join("")}};function L(){try{if("object"===("undefined"==typeof WebAssembly?"undefined":(0,i.Z)(WebAssembly))&&"function"==typeof WebAssembly.instantiate){var e=new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0]));if(e instanceof WebAssembly.Module)return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}catch(n){}}function F(e,t,n,r,i,o){var a,s,u,c,l,d,g=h.D.product,f=h.I.navInfo;f.bMac?(e&&(h.D.one(e).before(h.D.install._strNonInstallDIV),(a=h.D.get(h.D.install._divDWTNonInstallContainerID))&&(a.style.width=t,a.style.height=n),h.D.show(h.D.install._divDWTNonInstallContainerID),h.D.hide(e)),""!=h.D.install._divDWTemessageContainer&&h.D.hide(h.D.install._divDWTemessageContainer),s=g.bHTML5Edition?h.I.dcp.getDSPath():h.D.product.getPKGPath(),i?h.D.isFunction(h.I.OnWebTwainNeedUpgradeCallback)&&h.I.OnWebTwainNeedUpgradeCallback(g.name,{default:s},g.bHTML5Edition,h.I.DWT.EnumDWT_PlatformType.enumMac,f.bIE,f.bSafari,h.D.detect.ssl,h.D.env.strIEVersion):h.D.isFunction(h.I.OnWebTwainNotFoundOnMacCallback)&&h.I.OnWebTwainNotFoundOnMacCallback(g.name,s,g.bHTML5Edition,f.bIE,f.bSafari,h.D.detect.ssl,h.D.env.strIEVersion,o)):f.bLinux||f.bArm64||f.bMips64||f.bChromeOS||f.bHarmonyOS?(e&&(h.D.one(e).before(h.D.install._strNonInstallDIV),(a=h.D.get(h.D.install._divDWTNonInstallContainerID))&&(a.style.width=t,a.style.height=n),h.D.show(h.D.install._divDWTNonInstallContainerID),h.D.hide(e)),""!=h.D.install._divDWTemessageContainer&&h.D.hide(h.D.install._divDWTemessageContainer),l=f.bArm64||f.bMips64||f.bChromeOS||f.bHarmonyOS?(u=h.I.dcp.getDSPath(),f.bChromeOS?h.I.DWT.EnumDWT_PlatformType.enumChromeOS:f.bHarmonyOS?h.I.DWT.EnumDWT_PlatformType.enumHarmonyOS:h.I.DWT.EnumDWT_PlatformType.enumEmbed):(u=h.I.dcp.getLinuxHTML5DebPath(),c=h.I.dcp.getLinuxHTML5RpmPath(),h.I.DWT.EnumDWT_PlatformType.enumLinux),i?h.D.isFunction(h.I.OnWebTwainNeedUpgradeCallback)&&(d={default:u},f.bLinux&&(d.deb=u,d.rpm=c),h.I.OnWebTwainNeedUpgradeCallback(g.name,d,g.bHTML5Edition,l,f.bIE,f.bSafari,h.D.detect.ssl,h.D.env.strIEVersion)):h.D.isFunction(h.I.OnWebTwainNotFoundOnLinuxCallback)&&h.I.OnWebTwainNotFoundOnLinuxCallback(g.name,u,c,g.bHTML5Edition,f.bIE,f.bSafari,h.D.detect.ssl,h.D.env.strIEVersion,l,o)):(f.bChrome||f.bSafari||f.bFirefox||f.bOpera||0==h.I.DWT.IfUseActiveXForIE10Plus||!h.I.DWT.ActiveXInstallWithCAB&&f.bIE)&&(e&&(h.D.one(e).before(h.D.install._strNonInstallDIV),(a=h.D.get(h.D.install._divDWTNonInstallContainerID))&&(a.style.width=t,a.style.height=n),h.D.show(h.D.install._divDWTNonInstallContainerID),h.D.hide(e)),""!=h.D.install._divDWTemessageContainer&&h.D.hide(h.D.install._divDWTemessageContainer),s="",s=f.bIE||g.bHTML5Edition?h.I.dcp.getDSPath():g.getMSIPath(),i?h.D.isFunction(h.I.OnWebTwainNeedUpgradeCallback)&&h.I.OnWebTwainNeedUpgradeCallback(g.name,{default:s},g.bHTML5Edition,h.I.DWT.EnumDWT_PlatformType.enumWindow,f.bIE,f.bSafari,h.D.detect.ssl,h.D.env.strIEVersion):h.D.isFunction(h.I.OnWebTwainNotFoundOnWindowsCallback)&&h.I.OnWebTwainNotFoundOnWindowsCallback(g.name,s,g.bHTML5Edition,f.bIE,f.bSafari,h.D.detect.ssl,h.D.env.strIEVersion,o))}h.D.replaceControl=function(e,t){h.I.DWT.ContainerMap[e]=t},h.D.detect.onNoControl=function(e,t,n,r){r&&r._customIP&&!h.D.isLocalIP(r._host)?h.D.isFunction(h.I.OnRemoteWebTwainNotFoundCallback)&&h.I.OnRemoteWebTwainNotFoundCallback(h.D.product.name,r._host,r._port,r._ssl,h.D.env.bMobile):h.I.DWT.CheckWebTwainBySocket((function(){h.I.DWT.NeedCheckWebTwainBySocket()?h.D.isFunction(h.I.OnHTTPCorsError)&&h.I.OnHTTPCorsError():F(e,t,n,0,!1,!0)}),(function(){F(e,t,n,0,!0,!0)}),(function(){F(e,t,n,0,!1,!1)}))},h.D.detect.getVersionArray=function(e){return e=e.toLowerCase().replace(h.D.product.name.toLowerCase()+" ",""),(e=a()(h.D).call(h.D,e,"[.]",",")).split(",")},h.D.detect.isDWTVersionLatest=function(e){if(h.D.isUndefined(e))return!1;e=e.toString().toLowerCase();for(var t=h.D.detect.getVersionArray(e),n=(e=h.I.navInfoSync.bIE&&h.D.product.bActiveXEdition?h.I.DWT.ActiveXVersion:h.D.product.getServerVersionInfo(!0),(e=a()(h.D).call(h.D,String(e),"[.]",",")).split(",")),r=(t.length>n.length?t:n).length,i=0;i<r;i++){if(null==t[i]&&(t[i]=0),null==n[i]&&(n[i]=0),s()(t[i])<s()(n[i]))return!1;if(s()(t[i])>s()(n[i]))return!0}return!0};var W,O=function(e){var t;h.D.detect.bNeedUpgradeEvent||h.D.detect.isDWTVersionLatest(e.VersionInfo)||(h.D.detect.bNeedUpgradeEvent=!0,h.D.isFunction(h.I.DWT.OnWebTwainNeedUpgrade)&&h.I.DWT.OnWebTwainNeedUpgrade()||(e&&e._customIP&&!h.D.isLocalIP(e._host)?h.D.isFunction(h.I.OnRemoteWebTwainNeedUpgradeCallback)&&h.I.OnRemoteWebTwainNeedUpgradeCallback(h.D.product.name,e._host,e._port,e._ssl):(h.D.product.bHTML5Edition&&e._isBindViewer()||!h.D.product.bHTML5Edition)&&(h.D.product.bHTML5Edition?h.D.isString(t=e._containerElement)&&(t=h.D.get(t)):t=h.D.get(e._containerID),t&&(h.D.one(t).before(h.D.install._strNonInstallDIV),h.D.show(h.D.install._divDWTNonInstallContainerID),h.D.hide(t)),""!=h.D.install._divDWTemessageContainer&&h.D.hide(h.D.install._divDWTemessageContainer),function(e,t){var n,r,i,o,a=h.I.navInfo;h.D.isFunction(h.I.OnWebTwainNeedUpgradeCallback)&&(n={},i=a.bWin?(r=a.bIE||(r=h.D.product).bHTML5Edition?h.I.dcp.getDSPath():r.getMSIPath(),h.I.DWT.EnumDWT_PlatformType.enumWindow):a.bArm64||a.bMips64||a.bChromeOS||a.bHarmonyOS?(r=i=h.I.dcp.getDSPath(),n.deb=i,a.bChromeOS?h.I.DWT.EnumDWT_PlatformType.enumChromeOS:a.bHarmonyOS?h.I.DWT.EnumDWT_PlatformType.enumHarmonyOS:h.I.DWT.EnumDWT_PlatformType.enumEmbed):a.bLinux?(i=h.I.dcp.getLinuxHTML5DebPath(),o=h.I.dcp.getLinuxHTML5RpmPath(),r=i,n.deb=i,n.rpm=o,h.I.DWT.EnumDWT_PlatformType.enumLinux):(r=h.D.product.bHTML5Edition?h.I.dcp.getDSPath():h.D.product.getPKGPath(),h.I.DWT.EnumDWT_PlatformType.enumMac),n.default=r,(o=h.D.one(".dynamsoft-dialog-license"))&&o.getEL()&&(o.getEL().style.display="none"),h.D.detect.needUpgrade=!0,h.I.OnWebTwainNeedUpgradeCallback(h.D.product.name,n,h.D.product.bHTML5Edition,i,a.bIE,a.bSafari,h.D.detect.ssl,h.D.env.strIEVersion,h.D.detect.bPromptJSOrServerOutdated,void 0,void 0))}())))},B=function(e){return!(""==e||!h.D.isString(e)&&!h.D.isNumber(e))},N=function(e){return!(!e||h.D.isString(e))},V=function(e){var t,n,r,i,o,a=h.I.DWT.Containers,s=h.I.navInfo,c=h.D.Promise.resolve(0),l=h.I.DWT.licenseException;if(0<a.length){if(0==l.code?A.DCP_DWT_OnClickCloseInstall(!1,!0):console&&console,h.D.isUndefined(e)){for(n=0;n<a.length;n++)if(h.D.product.bHTML5Edition){if(B(r=a[n].WebTwainId)&&(o=h.I.DWT.ContainerMap[r]))break}else if(a[n].Container?i=a[n].Container:a[n].ContainerId&&(i=h.D.get(a[n].ContainerId)),N(i)&&i.id){if(o=h.I.DWT.ContainerMap[i.id])break;if(o=h.I.DWT.ContainerMap[r=a[n].WebTwainId])break}}else o=e;o&&(h.D.product.bHTML5Edition?o._bLocalService&&(c=o._innerFunRawV2("LogLevel").then((function(){O(o)}),(function(){-2207==o.ErrorCode&&(h.D.isFunction(h.I.DWT.OnWebTwainNeedUpgradeWebJavascript)?h.I.DWT.OnWebTwainNeedUpgradeWebJavascript(o.ErrorString):h.D.detect.bPromptJSOrServerOutdated||(h.D.detect.bPromptJSOrServerOutdated=!0)),O(o)}))):O(o))}var d=[],g=!1;for(h.D.License.isLTS()&&h.D.isNumber(l.code)&&0!==l.code&&!0===l.fromLTS&&(g=!0),n=0;n<a.length;n++)h.D.product.bHTML5Edition?r=a[n].WebTwainId:(t=h.I.DWT.ContainerMap[r=a[n].ContainerId])||(r=a[n].WebTwainId),(t=h.I.DWT.ContainerMap[r])&&(g?h.D.hide(h.D.product.bHTML5Edition?t._containerElement:t._containerID):h.D.product.bHTML5Edition?(t._isBindViewer()&&(t.Width<=0||t.Height<=0)&&(t.Width<=0&&(t.Width=270),t.Height<=0&&(t.Height=350)),t._bLocalService?d.push(W(t)):h.D.License.checkProductKey(t,{Core:!0})):(t.IfAllowLocalCache=!0,t.IfShowFileDialog=!0,t.IfDisableSourceAfterAcquire=!0,t.BrokerProcessType=h.D.product._iBrokerProcessType,0!=n||h.D.License.checkProductKey(t,{Core:!0})||h.D.License.checkProductKey(t,{Webcam:!0},!0)||h.D.License.checkProductKey(t,{Core:!0},!1,!0),s.bWin||(t.ImageCaptureDriverType=h.D.product._iImageCaptureDriverType))),t=null;0<d.length&&(c=c.then((function(){return h.I.Lib.Promise.all(d)}))),a=null,"dwt"==(e=h.I.initOrder)[0]&&u()(e).call(e,0,1),g?(h.I.DWT.ContainerMap={},u()(l=h.D.detect.arySTwains).call(l,0),u()(e=h.D.detect.arySTwainsByIP).call(e,0)):c.then((function(){h.I.Lib.detect.bAutoLoadDone=!0,h.D.isFunction(h.I.DWT.OnWebTwainReady)?h.I.DWT.OnWebTwainReady():h.D.isFunction(A.Dynamsoft_OnReady)&&A.Dynamsoft_OnReady()}),(function(e){console&&console}))},U=function(e){var t;return e.Container?t=e.Container.id:e.ContainerId&&(t=e.ContainerId),!!N(h.D.get(t))&&!(h.D.isString(e.WebTwainId)?h.I.DWT.ContainerMap[e.WebTwainId]:h.I.DWT.ContainerMap[t])},G=function(){h.D.detect.StartWSTimeoutId||0!=h.D.detect.arySTwains.length||(h.D.detect.StartWSTimeoutId=o()((function(){h.D.detect.StartWSTimeoutId=!1,h.D.startWS()}),100))},j=function(){h.D.detect.StartWSByIPTimeoutId||0!=h.D.detect.arySTwainsByIP.length||(h.D.detect.StartWSByIPTimeoutId=o()((function(){h.D.detect.StartWSByIPTimeoutId=!1,h.D.startWSByIP()}),100))};function H(){var e,t,n,r,i,o,a,s=[h.I.DWT.Containers,h.I.DWT.DynamicContainers];for(h.I.DWT.lunload(),h.D.closeAll&&h.D.closeAll(),a=h.I.DWT.ContainerMap,n=0;n<2;n++)if(t=s[n])if(h.D.product.bHTML5Edition)for(r=0;r<t.length;r++)(o=t[r].WebTwainId)&&o in a&&(i=a[o])&&(i.__unload(),delete a[o]);else for(r=t.length-1;0<=r;r--)t[r].Container?o=(i=t[r].Container).id:(o=t[r].ContainerId)&&(i=h.D.get(o)),i&&(o in a&&a[o]&&delete a[o],i.innerHTML="");for(h.D.page.bUnload=!0,h.D.page.OnUnload&&h.D.page.OnUnload(),u()(e=h.I.DWT.initQueue).call(e,0),r=0;r<h.I.unloadQueue.length;r++){var c=h.I.unloadQueue[r];h.D.isFunction(c)&&c()}return u()(e=h.I.unloadQueue).call(e,0),u()(e=h.I.DWT.DynamicContainers).call(e,0),u()(e=h.D.detect.arySTwains).call(e,0),u()(e=h.D.detect.arySTwainsByIP).call(e,0),h.D.MobileFuns?h.D.MobileFuns.unloadWasm():h.D.Promise.resolve()}h.D.detect.__WebTwainMain=function(e,t,n){var r,i,o,a,s,u,l={id:e.WebTwainId,width:e.Width,height:e.Height};if(e.Container?(l.container=e.Container,l.containerID=e.Container.id):e.ContainerId&&(l.container=h.D.get(e.ContainerId),l.containerID=e.ContainerId),B(l.id)||(l.id=N(h.D.get(l.containerID))?l.containerID:l.containerID="dwtcontrolContainer"),function(e){(e=e||{}).basePath&&(h.D.env.basePath=e.basePath),e.pathType&&(h.D.env.pathType=e.pathType),h.D.isUndefined(e.bDiscardBlankImage)||(h.D.config.bDiscardBlankImage=e.bDiscardBlankImage),e.msgPrefix&&(h.D.config.msgPrefix=e.msgPrefix),e.msgSuffix&&(h.D.config.msgSuffix=e.msgSuffix),e.detectType&&(h.D.detect.detectType=e.detectType),e.tryTimes&&(h.D.detect.tryTimes=e.tryTimes),e.onReady&&(h.I.DWT.OnWebTwainReady=e.onReady)}(l),h.D.product.bHTML5Edition){for(h.D.mix(l,e.bLocalService?{port:e.port,HTTPPort:h.D.detect.ssl?443:80,bLocalService:!0}:{bLocalService:!1}),l.onReady=function(e){h.D.replaceControl(l.id,e),h.D.isFunction(t)&&(e={stwain:e},n&&h.D.mix(e,n),t(e))},r=0;r<h.D.detect.arySTwains.length;r++)l.id==(i=h.D.detect.arySTwains[r])._id&&(l.id=l.id+"_"+h.D.getRandom()),!i._containerElement||l.container!=i._containerElement&&l.containerID!=i._containerElement.id||(l.containerID="");return l.bNoViewer=!N(h.D.get(l.containerID)),e=new h.D.html5.STwain(l),h.D.detect.arySTwains.push(e),h.D.detect.bFirst&&h.D._init(l),h.D.detect.bFirst=!1,e}for(l.onPluginReady=function(){h.D.replaceControl(l.id,o.getInstance())},l.onPluginNotReady=function(){h.D.isFunction(A.Dynamsoft_OnNotReady)&&A.Dynamsoft_OnNotReady()},o=new h.D.ie.DynamicWebTwain(l),s=0,a=(u=h.I.DWT.Containers).length-1;0<=a;a--){var d=u[a];d.Container?N(d.Container)&&s++:d.ContainerId&&N(h.D.get(d.ContainerId))&&s++}return h.D.detect.arySTwains.length==s&&(h.D.detect._varSeed=c()(h.D.detect._controlDetect,200)),o},h.I.DWT.Unload=function(){H();try{h.D.closeLoadingMsg(),h.I.DWT.CloseDialog(),h.D._zdgb_xkz_dhk(),h.D.closeProgress(null,""),h.D.hideMask()}catch(t){}};var z,K=function e(){for(var t=h.I.DWT.Containers,n=0;n<t.length;n++){var r=void 0;if(N(h.D.get(t[n].ContainerId))&&(r=t[n].ContainerId,B(t[n].WebTwainId)&&(r=t[n].WebTwainId)),r&&!h.I.DWT.ContainerMap[r])return void o()(e,200)}h.D.closeLoadingMsg(),t=null,V()},J=function(e){if(e&&"readyObj"in e){var t,n,r=e.readyObj;if(r)return t=e.stwain,n=r.totalCount,r.readyCount=r.readyCount+1,void(r.readyCount>=n&&V(t))}V(e)},Y=function(e){var t;u()(t=h.D.detect.urls).call(t,0),h.D.detect.urls.push({port:e,ssl:M.bSSL}),h.D.detect.ports=[{port:e,ssl:M.bSSL}],h.D.detect.cUrlIndex=0,M.bSSL?h.I.DWT.SSLPort=e:h.I.DWT.Port=e},X=function(e,t,n){var r,i=h.I.DWT.Containers;if(h.D.config.usingMainMode)h.D.closeLoadingMsg();else{if(!i||0===i.length)return h.D.closeLoadingMsg(),void h.D.log("Dynamsoft.DWT.Containers was not set.");h.D.isString(e)&&""!=e&&(h.D.product.host=e),P.bEnhancedMode&&Y(t),G();for(var o={totalCount:i.length,readyCount:0},a=0;a<i.length;a++)N(h.D.get((r=i[a]).ContainerId))||(r.bNoViewer=!0),n?(r.bLocalService=!1,r.ip="",r.port=0):(r.bLocalService=!0,P.bEnhancedMode&&(r.port=t)),h.D.detect.__WebTwainMain(r,J,{readyObj:o})}},Q=function(){if(h.D.config.usingMainMode)h.D.closeLoadingMsg();else{var e,t=h.I.DWT.Containers;if(!1===t||0===t.length)return h.D.log("Dynamsoft.DWT.Containers was not set."),void h.D.closeLoadingMsg();for(e=0;e<t.length;e++){var n=t[e];U(n)&&h.D.detect.__WebTwainMain(n)}o()(K,100)}},Z=function(e){var t=e.bNoViewer,n=e.id,r=e.container,i=e.containerID,o=e.port,a=!!((a=e.host)&&o&&0<o)&&{host:a,port:o},s=e.asyncSuccessFunc,u=e.asyncFailureFunc;if(e.bNoViewer||h.D.isString(i)&&""!=i&&(r||h.D.get(i))){if(h.I.DWT.Containers&&!t)for(var c=h.I.DWT.Containers,l=0;l<c.length;l++)if(c[l].ContainerId==i)return h.D.closeLoadingMsg(),h.D.isFunction(u)&&h.D._safePromptCustomMsg((function(){u(h.I.DWT.CustomizableDisplayInfo.errorMessages.ERR_CreateID_MustNotInContainers)})),!1;r=r||h.D.get(i)}else t=!0,i=0;return h.I.DWT.ContainerMap[n]?(h.D.closeLoadingMsg(),h.D.isFunction(u)&&u(h.I.DWT.CustomizableDisplayInfo.errorMessages.ERR_CreateID_WebTwainIdDuplicated),!1):e.bLocalService||h.I.WasmEnv?((a?j:G)(),o={id:n,container:r,customIP:!1,width:t?0:300,height:t?0:300,bNoViewer:t,bLocalService:e.bLocalService},t||(r.style.width&&(o.width=r.style.width),r.style.height&&(o.height=r.style.height)),a&&(o.customIP=!0,o.host=a.host,o.port=a.port),o.onReady=function(e){if(A.DCP_DWT_OnClickCloseInstall(!1,!0),!e)return h.D.closeLoadingMsg(),h.D.isFunction(u)&&u(h.I.DWT.CustomizableDisplayInfo.errorMessages.ERR_CreateID_NotContainer),!1;if(h.I.DWT.ContainerMap[e._id])return h.D.closeLoadingMsg(),e.dispose(),h.D.isFunction(u)&&u(h.I.DWT.CustomizableDisplayInfo.errorMessages.ERR_CreateID_WebTwainIdDuplicated),!1;h.D.showLoadingMsg(-1,"",h.I.MSG.Init_ConfiguringDWT);var t={};return t.WebTwainId=e._id,e._containerElement&&e._containerElement.id&&(t.ContainerId=e._containerElement.id),h.I.DWT.DynamicContainers.push(t),h.I.DWT.ContainerMap[e._id]=e,!h.I.DWT.IfDisableDefaultSettings&&e._bLocalService?W(e).then((function(){h.D.closeLoadingMsg(),h.D.isFunction(s)&&s(e),O(e)}),(function(){h.D.closeLoadingMsg(),-2207!=e.ErrorCode||h.D.detect.bPromptJSOrServerOutdated||(h.D.detect.bPromptJSOrServerOutdated=!0),O(e)})):(h.D.closeLoadingMsg(),h.D.isFunction(s)&&s(e)),!0},new h.D.html5.CreateDWTObject(o)):(h.D.closeLoadingMsg(),h.D._safePromptCustomMsg((function(){u(h.I.DWT.CustomizableDisplayInfo.errorMessages.ERR_CreateID_WasmEnvNotLoaded)})),!1)},q=!(W=function(e){return h.D.showLoadingMsg(-1,"",h.I.MSG.Init_ConfiguringDWT),e._innerFunV2("IfDisableSourceAfterAcquire","[1]").then((function(){var t=h.I.navInfo,n=h.I.DWT.EnumDWT_Driver.TWAIN,r=!1,i=!1;e._bRemoteMode?e.__serverPlatform!=h.I.DWT.EnumDWT_PlatformType.enumWindow&&(e.__serverPlatform==h.I.DWT.EnumDWT_PlatformType.enumLinux?i=!0:e.__serverPlatform==h.I.DWT.EnumDWT_PlatformType.enumMac&&(r=!0)):(r=t.bMac,i=t.bLinux),r?n=h.I.DWT.EnumDWT_Driver.TWAIN_AND_ICA:i&&(n=h.I.DWT.EnumDWT_Driver.SANE),e._driverType=n})).then((function(){(h.D.License.checkProductKey(e,{Core:!0})||h.D.License.checkProductKey(e,{Webcam:!0}))&&(h.I.DWT.lclex(),h.D.Errors.ClearErrorInfo(e))}))}),$=function(e,t){return e=e.split(","),t=t.split(","),3<e.length&&l()(h.D).call(h.D,e[0])==t[0]&&(l()(h.D).call(h.D,e[1])>t[1]||l()(h.D).call(h.D,e[1])==t[1]&&l()(h.D).call(h.D,e[2])>t[2]||l()(h.D).call(h.D,e[1])==t[1]&&l()(h.D).call(h.D,e[2])==t[2]&&s()(l()(h.D).call(h.D,e[3]))>=s()(t[3]))};function ee(){h.I.DWT.ShowMessage(h.I.MSG.Err_BrowserNotSupportWasm,{width:510,headerStyle:2})}function te(e,t,n){if(!h.D.product.bHTML5Edition)return h.D._safePromptCustomMsg((function(){n&&n(h.I.DWT.CustomizableDisplayInfo.errorMessages.ERR_BROWSER_NOT_SUPPORT)})),!1;if(!1===e.UseLocalService&&!L())return h.D.closeLoadingMsg(),ee(),n&&n(h.I.MSG.Err_BrowserNotSupportWasm),!1;z();var r,i,o={},a=e.WebTwainId,s=e.Host,u=e.Port,c=e.PortSSL;if(!h.I.DWT._srcUseLocalService&&e.UseLocalService&&(h.D.detect.dcpStatus=0,h.I.DWT._srcUseLocalService=!0),e.Container?(o.container=e.Container,o.bNoViewer=!1,null!=(r=o.container.id)&&""!==r||(o.container.id=["dwt_",h.D.getRandom()].join("")),o.containerID=o.container.id,null!=a&&""!==a||(o.id=o.container.id)):null==a||""===a?(o.id=["dwt_",h.D.getRandom()].join(""),o.bNoViewer=!0):h.D.get(a)?(o.id=a,o.containerID=a,o.bNoViewer=!1):(o.id=a,o.bNoViewer=!0),o.UseLocalService=e.UseLocalService,0==o.UseLocalService?(h.D.detect.bNeedWasm=!0,o.host="",o.port=0):(h.D.isString(s)&&""!=s||(s=h.I.dcp.host),o.host=s,o.port=M.bSSL?c=c||h.I.DWT.SSLPort:u=u||h.I.DWT.Port),t&&(o.asyncSuccessFunc=t),n&&(o.asyncFailureFunc=n),h.D.detect.wasmScriptLoaded&&h.I.WasmEnv&&!h.I.WasmEnv.wasmLoad)if(m(),h.D.License.isLTS())i=h.I.DWT.lglic(h.I.DWT.EnumInstance.dwt_browser).then((function(e){try{h.I.WasmEnv.load(e.ar,!0,e.cu),h.I.WasmEnv.wasmLoad=!0}catch(t){}}),(function(e){e&&(h.I.DWT.lsetException(e.code||e.ltsErrorCode,e.message),h.D.closeLoadingMsg(),h.I.DWT.OnLicenseException())}));else{try{h.I.WasmEnv.load(h.I.DWT.ProductKey),h.I.WasmEnv.wasmLoad=!0}catch(T){}i=d().resolve()}else i=d().resolve();return i.then(v).then((function(){oe({callback:function(){o.bLocalService=!0,Z(o)},docViewCallback:function(){o.bLocalService=!1,Z(o)},host:o.host,port:o.port,UseLocalService:o.UseLocalService,dcpFailedCallback:function(e){o.asyncFailureFunc&&o.asyncFailureFunc(e),h.D.closeLoadingMsg()}})}),(function(){h.D.closeLoadingMsg()})),!0}h.I.DWT.Load=function(){q||(q=!0,h.D.openLoadingMsg(),h.I.Lib.detect.bAutoLoadDone?(S(),v().then(H).then((function(){if(h.I.DWT.CloseDialog(),h.I.Lib.detect.bNeedWasm=!1,h.I.Lib.detect.wasmScriptLoaded&&h.I.WasmEnv&&!h.I.WasmEnv.wasmLoad){if(h.I.Lib.License.isLTS())return void h.I.DWT.lglic(h.I.DWT.EnumInstance.dwt_browser).then((function(e){try{h.I.WasmEnv.load(e.ar,!0,e.cu),h.I.WasmEnv.wasmLoad=!0}catch(n){}R(h.I.DWT._innerLoad)}),(function(e){e&&(h.I.DWT.lsetException(e.code||e.ltsErrorCode,e.message),h.I.Lib.closeLoadingMsg(),h.I.DWT.OnLicenseException())}));try{h.I.WasmEnv.load(h.I.DWT.ProductKey),h.I.WasmEnv.wasmLoad=!0}catch(t){}}R(h.I.DWT._innerLoad)}),(function(){h.D.closeLoadingMsg()}))):h.I.Lib.product.bActiveXEdition||h.I.navInfoSync.bIE&&10==h.I.navInfoSync.strBrowserVersion?(S(),q=!1,h.I.Lib.detect.bAutoLoadDone=!0,o()(h.I.DWT.Load,100)):E().then((function(){S(),q=!1,h.I.Lib.detect.bAutoLoadDone=!0,o()(h.I.DWT.Load,100)})))},h.I.DWT.CheckConnectToTheService=function(e,t,n,r){if(h.D.detect.scriptLoaded)if(h.D.product.bHTML5Edition){var i=0,a=e,s=t,u=n,c=r;if(h.D.isFunction(a)&&h.D.isFunction(s)&&(u=a,c=s,s=a=null),a=a||h.I.dcp.host,!s)for(i=0;i<h.I.Lib.detect.ports.length;i++)if(h.I.navInfoSync.bSSL&&h.I.Lib.detect.ports[i].ssl||!h.I.navInfoSync.bSSL&&!h.I.Lib.detect.ports[i].ssl){s=h.I.Lib.detect.ports[i].port;break}k.versionInfo(a,s,(function(e,t,n,r){if(0===e&&r&&0<r.length&&$(r,h.D.product.getServerVersionInfo(!0)))return h.I.DWT.CloseDialog(),void(h.D.isFunction(u)&&u(t,n));h.D.isFunction(c)&&c()}),c)}else h.D.isFunction(r)&&r();else o()((function(){h.I.DWT.CheckConnectToTheService(e,t,n,r)}),500)},h.I.DWT.ConnectToTheService=h.I.DWT.Load,h.I.DWT.CreateDWTObject=function(e,t,n,r,i,a){var s,u=i,c=a;if(h.D.openLoadingMsg(),h.I.Lib.detect.bAutoLoadDone){if(S(),s=h.D.isFunction(t)&&h.D.isFunction(n)&&h.D.isUndefined(r)&&h.D.isUndefined(i)&&h.D.isUndefined(a)?(u=t,c=n,{WebTwainId:e}):{WebTwainId:e,Host:t,Port:n,PortSSL:r},!h.D.product.bHTML5Edition)return h.D.isFunction(c)&&h.D._safePromptCustomMsg((function(){c(h.I.DWT.CustomizableDisplayInfo.errorMessages.ERR_BROWSER_NOT_SUPPORT)})),!1;var l=e;if(h.D.isShadowRoot(l)&&(g=document.createElement("div"),l.appendChild(g),l=g),h.D.isDOM(l)){var d,g=h.D.getShadowRoot(l);g&&((d=document.createElement("style")).innerHTML=['@import url("',h.I.DWT.ResourcesPath,"/src/dynamsoft.viewer.css",x,'")'].join(""),g.appendChild(d)),(s.Container=l).id&&""!=l.id||(l.id=["dwt_",h.D.getRandom()].join("")),s.WebTwainId=l.id}else{if(!h.D.isString(e))return h.D.isFunction(c)&&c(h.D.Errors.container_id_not_string()),!1;if(!h.D.get(e))return h.D.isFunction(c)&&c(h.D.Errors.container_id_not_exist(e)),!1}return h.D.isUndefined(s.UseLocalService)&&(s.UseLocalService=h.D.isUndefined(h.I.DWT.UseLocalService)?!h.D.env.bMobile:h.I.DWT.UseLocalService),te(s,u,c)}h.I.Lib.domReady((function(){var s=h.I.DWT.Containers;h.D.isArray(s)&&0<s.length&&h.I.DWT.AutoLoad||S(),o()((function(){h.I.DWT.CreateDWTObject(e,t,n,r,i,a)}),100)}))},h.I.DWT.CreateDWTObjectEx=function(e,t,n){var r=e.Container;if(h.D.openLoadingMsg(),h.I.Lib.detect.bAutoLoadDone){if(S(),h.D.isShadowRoot(r)&&(a=document.createElement("div"),r.appendChild(a),r=a),h.D.isDOM(r)){var i,a=h.D.getShadowRoot(r);a&&((i=document.createElement("style")).innerHTML=['@import url("',h.I.DWT.ResourcesPath,"/src/dynamsoft.viewer.css",x,'")'].join(""),a.appendChild(i)),a==r&&(r=document.createElement("div"),a.appendChild(r),e.Container=r),r.id&&""!=r.id||(r.id=["dwt_",h.D.getRandom()].join("")),h.D.isString(e.WebTwainId)||(e.WebTwainId=r.id)}else if(!h.D.isString(e.WebTwainId))return n&&n(h.D.Errors.webtwain_id_not_string()),!1;return h.D.isUndefined(e.UseLocalService)&&(e.UseLocalService=h.D.isUndefined(h.I.DWT.UseLocalService)?!h.D.env.bMobile:h.I.DWT.UseLocalService),te(e,t,n)}h.I.Lib.domReady((function(){var r=h.I.DWT.Containers;h.D.isArray(r)&&0<r.length&&h.I.DWT.AutoLoad||S(),o()((function(){h.I.DWT.CreateDWTObjectEx(e,t,n)}),100)}))},z=function(){var e=h.I.initOrder,t=!1;if(e){for(var n=0;n<e.length;n++)if("dwt"==e[n]){t=!0;break}t||e.push("dwt")}};var ne=function(e,t){h.D.isLocalIP(e)&&(h.D.LS.item("DWT_port",t),h.D.LS.item("DWT_ssl",M.bSSL?"true":"false"))},re=function(e,t,n){var r,i,a=function(e){var t="",n="",r=h.I.navInfo,i=r.bMac?"mac/MacDWT_":r.bLinux?"linux/LinuxDWT_":"win/WinDWT_";return M.bFileSystem||(t="?t="+h.D.getRandom()),0<e.length&&"/"!=e[e.length-1]&&(e+="/"),r.bWin&&P.b64bit&&(n="_x64"),[e,"dist/",i,h.D.product.getServerVersionInfo(),n,".zip",t].join("")}(h.I.DWT.ResourcesPath);r=function(e){P.loadZip(e,0,(function(){var e=h.I.navInfo;if(h.D.closeLoadingMsg(),h.D.isFunction(h.I.OnWebTWAINDllDownloadSuccessful)&&h.I.OnWebTWAINDllDownloadSuccessful(),h.I.DWT.OnWebTwainInitMessage){if(M.bSSL&&e.bFirefox)return void h.I.DWT.OnWebTwainInitMessage(h.I.DWT.CustomizableDisplayInfo.generalMessages.refreshNeeded,h.I.DWT.EnumDWT_InitMsg.DownloadNotRestartError);h.I.DWT.OnWebTwainInitMessage(h.I.DWT.CustomizableDisplayInfo.generalMessages.DWTmoduleLoaded,h.I.DWT.EnumDWT_InitMsg.Info)}o()(t,3e3)}),i)},i=function(t){var n;h.D.closeLoadingMsg(),h.I.DWT.OnWebTwainInitMessage&&h.I.DWT.OnWebTwainInitMessage(n=h.I.DWT.CustomizableDisplayInfo.errorMessages.ERR_DWT_NOT_DOWNLOADED,h.I.DWT.EnumDWT_InitMsg.DownloadError),h.D.isFunction(h.I.OnWebTWAINDllDownloadFailure)&&(n={},404==t.httpCode?h.D.Errors.WebTwainModuleNotExist(n):h.D.Errors.WebTwainModuleDownloadFailure(n),h.I.OnWebTWAINDllDownloadFailure(h.D.product.name,n._errorCode,n._errorString)),h.D.detect.dcpStatus=3,h.D.isFunction(e.dwtFailedCallback)&&e.dwtFailedCallback()},h.I.DWT.OnWebTwainInitMessage&&h.I.DWT.OnWebTwainInitMessage(h.I.DWT.CustomizableDisplayInfo.generalMessages.downloadingDWTModule,h.I.DWT.EnumDWT_InitMsg.Info),h.D.fetch(a,{mode:"cors",dataType:"arraybuffer"}).then(r,i)},ie=function e(t,n,r){var i,a=t.host,s=t.port;if(!1===t.UseLocalService)return h.D.showLoadingMsg(-1,"",h.I.MSG.Init_CreatingDWT),h.D.detect.dcpStatus=2,ne("",0),void R(t.docViewCallback);h.D.showLoadingMsg(-1,"",h.I.MSG.Init_CheckDWT),i=0<r?r+1:1,s||h.D.each(h.D.detect.ports,(function(e){M.bSSL?e.ssl&&(s=e.port):e.ssl||(s=e.port)})),h.D.showLoadingMsg(-1,"",h.I.MSG.Init_CheckDWTVersion),k.versionInfo(a,s,(function(r,a,s,u){if(0===r&&u&&0<u.length&&$(u,h.D.product.getServerVersionInfo(!0)))return h.D.detect.dcpStatus=2,ne(a,s),h.D.showLoadingMsg(-1,"",h.I.MSG.Init_CreatingDWT),void(h.D.isFunction(t.callback)&&t.callback(a,s));n?3<i?(h.D.closeLoadingMsg(),h.D.detect.dcpStatus=3,h.D.isFunction(t.dwtFailedCallback)&&t.dwtFailedCallback({code:r,message:a})):o()((function(){e(t,!0,i)}),1e3):h.I.DWT.IfInstallDWTModuleWithZIP?re(t,(function(){e(t,!0,i)})):(h.D.closeLoadingMsg(),h.D.detect.dcpStatus=3,h.D.isFunction(t.dwtFailedCallback)&&t.dwtFailedCallback({code:r,message:a}))}))},oe=function(e){var t=h.I.initOrder,n=!1;if(0<t.length&&"dwt"===t[0]){var r=function(t){h.I.DWT.OnWebTwainInitMessage&&h.I.DWT.OnWebTwainInitMessage(h.I.DWT.CustomizableDisplayInfo.generalMessages.downloadNeeded,h.I.DWT.EnumDWT_InitMsg.Info),h.D.isLocalIP(e.host)?h.D.isFunction(h.D.detect.onNoControl)&&h.D.detect.onNoControl():h.D.isFunction(h.I.OnRemoteWebTwainNotFoundCallback)&&h.I.OnRemoteWebTwainNotFoundCallback(h.D.product.name,e.host,e.port,M.bSSL,h.D.env.bMobile),h.D.isFunction(e.dcpFailedCallback)&&(e.dcpFailedCallback(t),h.I.DWT.ConnectToTheService=function(){oe(e)})};if(!h.I.DWT.IfCheckDCP||0==e.UseLocalService)return e.dwtFailedCallback||(e.dwtFailedCallback=r),void ie(e,!1,0);var i=function(t){var r,a,s,u=1,c=h.I.navInfoSync;if(h.I.navInfoSync.bWin&&3<(u=0<t?t+1:1))return i=null,h.D.closeLoadingMsg(),h.D.detect.dcpStatus=3,void(h.D.isFunction(e.dwtFailedCallback)&&e.dwtFailedCallback());if(!n)return e.dwtFailedCallback||(e.dwtFailedCallback=function(){var e,t,n=h.I.navInfoSync;h.D.closeLoadingMsg(),h.D.isFunction(h.I.OnWebTWAINModuleDownloadManually)&&(t=n.bLinux?(e=h.I.DWT.EnumDWT_PlatformType.enumLinux,{default:h.I.dcp.getLinuxHTML5DebPath(),deb:h.I.dcp.getLinuxHTML5DebPath(),rpm:h.I.dcp.getLinuxHTML5RpmPath()}):(e=n.bMac?h.I.DWT.EnumDWT_PlatformType.enumMac:h.I.DWT.EnumDWT_PlatformType.enumWindow,{default:h.I.dcp.getDSPath()}),h.I.OnWebTWAINModuleDownloadManually(t,e,n.bIE,n.bSafari,h.D.detect.ssl,h.D.env.strIEVersion))}),P.bEnhancedMode?(r=0,P.getPorts(P.strSID,s=function(t){var n;return h.D.isArray(t)&&1<t.length&&(h.D.closeLoadingMsg(),(t=t[1])&&(P.currentUserPorts=t).dwt)?(n=t.dwt.port,t=t.dwt.sslPort,0==n||0==t?h.I.dcp.bEnhancedMode?(o()((function(){P.getPorts(P.strSID,s,a)}),800),!0):5<++r?(i(u),!1):(o()((function(){P.getPorts(P.strSID,s,a)}),300),!0):(e.port=c.bSSL?t:n,Y(e.port),ie(e,!1,0),!0)):h.I.DWT.IfInstallDWTModuleWithZIP?(re(e,(function(){i(u)})),!0):(h.D.detect.dcpStatus=3,void(h.D.isFunction(e.dwtFailedCallback)&&e.dwtFailedCallback()))},a=function(){if(h.D.closeLoadingMsg(),h.I.DWT.IfInstallDWTModuleWithZIP)return re(e,(function(){i(u)})),!0;h.D.detect.dcpStatus=3,h.D.isFunction(e.dwtFailedCallback)&&e.dwtFailedCallback()})):(i=null,ie(e,!1,0)),!0;var l=500;(t=h.D.install._dlgInstall)&&t.open||(n=!1,l=0),o()(i,l)};h.I.managerEnv.IfUpdateService=h.I.DWT.IfUpdateService,P.host=e.host,P.checkDcpV3(h.I.DWT.ProductKey,r,i)}else h.D.env.stopCheckingForService||o()((function(){oe(e)}),1e3)};h.I.DWT._innerLoad=function(){var e,t;if(h.D.page.bUnload=!1,h.D.License.isLTS()&&h.D.isString(h.I.DWT.ProductKey))return t=h.I.DWT.licenseException,h.D.Errors.LongKeyShortKeyMixed(e={}),t.code=e._errorCode,t.message=e._errorString,t.fromLTS=!1,h.D.closeLoadingMsg(),void h.I.DWT.ShowMessage(t=e._errorString,{width:510,headerStyle:2});for(var n,r,i=h.I.DWT.Containers,o=[],a=0;a<i.length;a++)if(r=i[a],h.D.product.bHTML5Edition){var s,u,c=r.Container;for(h.D.isShadowRoot(c)&&(s=document.createElement("div"),c.appendChild(s),c=s),h.D.isDOM(c)&&((s=h.D.getShadowRoot(c))&&((u=document.createElement("style")).innerHTML=['@import url("',h.I.DWT.ResourcesPath,"/src/dynamsoft.viewer.css",x,'")'].join(""),s.appendChild(u)),c.id&&""!=c.id||(c.id=["dwt_",h.D.getRandom()].join("")),r.ContainerId=c.id),(h.D.isString(r.WebTwainId)||h.D.isNumber(r.WebTwainId))&&""!=r.WebTwainId||(r.WebTwainId=h.D.isString(r.ContainerId)&&""!=r.ContainerId?r.ContainerId:["dwt_",h.D.getRandom()].join("")),n=0;n<o.length;n++)if(r.WebTwainId==o[n]){r.WebTwainId=r.WebTwainId+"_"+h.D.getRandom();break}o.push(r.WebTwainId)}else!h.D.isString(r.WebTwainId)||h.D.isString(r.ContainerId)&&""!=r.ContainerId||(r.ContainerId=r.WebTwainId);if(h.D.product.bHTML5Edition){if(h.D.IsNeedLoadWasm()){if(!L())return h.D.closeLoadingMsg(),void ee();h.D.detect.bNeedWasm=!0,h.D.showLoadingMsg(-1,"",h.I.MSG.Init_InitWasm)}else h.D.showLoadingMsg(-1,"",h.I.MSG.Init_InitH5);z(),v().then((function(){var e=!0;h.D.isString(h.I.DWT.Host)&&(P.host=h.I.DWT.Host),h.D.IsNeedLoadWasm()&&(e=!1),oe({callback:X,docViewCallback:function(){X("",0,!0)},host:P.host,UseLocalService:e}),q=!1}),(function(){h.D.closeLoadingMsg(),q=!1}))}else h.D.showLoadingMsg(-1,"",h.I.MSG.Init_InitActiveX),Q(),q=!1},h.I.DWT.DeleteDWTObject=function(e){var t,n,r,i=h.I.DWT.ContainerMap;if(!h.D.product.bHTML5Edition)return!1;i&&e in i&&(n=i[e])&&(delete i[e],n.__unload());for(t=0;t<h.I.DWT.DynamicContainers.length;t++)if(h.I.DWT.DynamicContainers[t].WebTwainId==e){u()(r=h.I.DWT.DynamicContainers).call(r,t,1);break}return h.D.closeLoadingMsg(),!0},h.I.DWT.GetWebTwain=function(e){var t,n,r,i=e,o=h.I.DWT.Containers;if(h.D.isString(i))i=h.D.get(i);else if(!h.D.isDOM(i)&&!i&&o&&0<o.length)for(n=0;n<o.length;n++){if(o[n].Container){i=o[n].Container;break}if(o[n].ContainerId&&N(h.D.get(o[n].ContainerId))){i=h.D.get(o[n].ContainerId);break}}var a=h.I.DWT.ContainerMap;if(i&&a&&o&&0<o.length)for(n=0;n<o.length;n++)if(r=!1,(t=o[n]).Container){if(t.Container==i&&(r=B(t.WebTwainId)?t.WebTwainId:t.Container.id)&&r in a)return a[r]}else if(t.ContainerId&&t.ContainerId==i.id&&(r=B(t.WebTwainId)?t.WebTwainId:t.ContainerId)&&r in a)return a[r];return h.I.DWT.GetWebTwainEx(e)},h.I.DWT.GetWebTwainEx=function(e){var t,n=e,r=h.I.DWT.DynamicContainers;if(h.D.isDOM(n))n=n.id;else if(!n&&r&&0<r.length)for(t=0;t<r.length;t++)if(B(r[t].WebTwainId)){n=r[t].WebTwainId;break}return r=null,n&&(e=h.I.DWT.ContainerMap)&&n in e?e[n]:null}},6045:function(e,t,n){n.r(t),t=n(5683);var r=n.n(t),i=(t=n(7711),n.n(t)),o=n(1695),a=o.I.navInfo,s=document;function u(e){var t,n,a,s=this;s._containerID=(e=e||{}).containerID||"dwtcontrolContainer",s._strWidth=e.width||270,s._strHeight=e.height||350,o.D.isString(s._strWidth)&&0<r()(t=s._strWidth).call(t,"%")||(s._strWidth=[i()(s._strWidth),"px"].join("")),o.D.isString(s._strHeight)&&0<r()(t=s._strHeight).call(t,"%")||(s._strHeight=[i()(s._strHeight),"px"].join("")),s._strObjectName=s._containerID+"_Obj",n=s,(a=e)&&o.I.Lib.each(["onAfterOperate","onBeforeOperate","onOperateStatus","onBitmapChanged","onGetFilePath","onImageAreaDeSelected","onImageAreaSelected","onMouseClick","onMouseDoubleClick","onMouseMove","onMouseRightClick","onPreAllTransfers","onPreTransfer","onPostLoad","onPostTransfer","onPostTransferAsync","onPreAllTransfersAsync","onPostAllTransfers","onSourceUIClose","onTopImageInTheViewChanged","onTransferCancelled","onTransferError","onInternetTransferPercentage","onInternetTransferPercentageEx","onRemoteScanStatusAsync","onKeyDown","onMouseWheel"],(function(e){n["__O"+e.substring(1)]=a[e]||""})),s.__OnPluginReady=e.onPluginReady,s.__OnPluginNotReady=e.onPluginNotReady,s.__OnRefreshUI=e.onRefreshUI||"",s._objectWebTwain=null,s._strDWTInnerContainerID=s._containerID+"_CID",s._strDWTNonInstallInnerContainerID=s._containerID+"_NonInstallCID",s.Addon={},s._pdfConvertMode=3,s._pdfRealConvertMode=3,o.D.UI.DWTAxViewer&&(s.Viewer=new o.D.UI.DWTAxViewer(s))}(t=u.prototype).getSWebTwain=function(){return this._objectWebTwain},t._isMobileMode=function(){return!1},t.getInstance=function(){return!!this._objectWebTwain&&this},t._createControl=function(){var e,t=this,n=t._strWidth,s=t._strHeight;o.D.isString(n)&&(n=0<r()(n).call(n,"%")?"100%":i()(n)+2+"px"),o.D.isString(s)&&(s=0<r()(s).call(s,"%")?"100%":i()(s)+2+"px"),s=['<div id="',t._strDWTInnerContainerID,'" style="width:',n,";height:",s,'">'],a.bIE?o.I.DWT.ActiveXInstallWithCAB?s.push('<object id="',t._strObjectName,'" style="width:',t._strWidth,";height:",t._strHeight,';border:1px solid #AAAAAA"',' codebase="',a.bWin64?o.D.product.getActiveXCABx64Path():o.D.product.getActiveXCABx86Path(),"#version=",o.I.DWT.ActiveXVersion,'"',' classid="clsid:',o.D.product.strFullClassID,'" viewastext>','<param name="wmode" value="transparent"/>',"</object>"):s.push('<object id="',t._strObjectName,'" style="width:',t._strWidth,";height:",t._strHeight,';border:1px solid #AAAAAA"',' classid="clsid:',o.D.product.strFullClassID,'" viewastext>','<param name="wmode" value="transparent"/>',"</object>"):(o.D.isString(e=t._strWidth)&&-1==r()(e).call(e,"%")&&(e=i()(e)-2+"px"),s.push('<embed id="',t._strObjectName,'" style="display: inline; width:',e,";height:",t._strHeight,'" type="',o.D.product.strMIMEType,'"',' pluginspage="',a.bWin?o.D.product.getMSIPath():o.D.product.getPKGPath(),'"></embed>')),s.push('</div><div id="',t._strDWTNonInstallInnerContainerID,'" style="width: ',n,';display:none"></div>'),(e=o.D.get(t._containerID))&&(e.innerHTML=s.join("")),t._objectWebTwain=o.D.get(t._strObjectName)},t._createNonAllowedDivPlugin=function(){var e=this,t=o.D.get(e._strDWTNonInstallInnerContainerID);if(""==t.innerHTML){var n=(o.D.isString(n=e._strHeight)&&-1==r()(n).call(n,"%")&&(n=i()(n)-10+"px"),['<div style="display: block; border:1px solid black; width:',e._strWidth,";height:",n,'">','<div style="margin: 200px 0 0 0; padding: 5px; font-size: 16px;line-height: 30px; ">',"<div>The Component is not allowed to run on this site.</div>",'<div>Please click <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAJeSURBVDhPvZRNSxthEMeX0mNpKS09tP04tdBqobT9WCGJ5kU9pIk5xB4KaoJGmoiNMS+IUiqNB08mjUoUN2vU3WyS9d+ZIbvEZREP0j8Mk5ln5sfs7jxRcM/6f8BKpYKZmRlEIhGUSiUYhjE8uV2eQIal0xmobQ3aeQc/CwWUy+Xh6e3yBM7OzuJMbcPs9cUYzNPeRQLc29tDKpVCOBx2LJ3JQDe66Jo9fI3HEY1GnTOurdVqAnBLgFxwcNBAp3N5w0yTJiTTtA5UVXPy9XpDerwkwOnpaZydtWma/p3s8OgYcZraSwIMhULoXFx6NntZvf4XyWRSAG45QO38wrO51x/Asq7F27nbJMBEIoFm8wiLS0uYm0s6j88QfXUF6ucJXNMe2lAWx+qXD3I+KgHu7OwgEAjI/q2vr2N5eUUaebIWwRovFLTG38AaQtlzLPlP4wKyJcB8Pi83IpfLoVqtYmFh0ZnQ0nU0qHn/uSJ+0G7fiPl8VAL0+/20cyZdsTLm57+hdXIqQAdKE+1T869nCnZfK+I5dsNYAgwGg7i8MhwIG8cbG0Wafo1+X6FPk5VfPUDxqSK+r6oCcEuAU1NT0GhhDQLZVtwsIZvNShFPuDX+FqtPFORfPhS/9X5M8m4JkO/pyakKo0uwof3e/SMF3FQg2PfHCgoEMWlS9nbshgqQt755eIwr3RTYOV+vRlMK1j5OIPlIwY93YxgM39mAIBxzns9HJcDt7W3EYjH5OD6fD5OTk7KbrDo99go12TBbDOV8Peuxh5Zl0Z8ATUdFOjWy55jztt1VArw/Af8A9+n0bhYJ0I4AAAAASUVORK5CYII="/>','at the right end of the address bar and click "<b>Always allow plug-ins</b>". Then refresh/restart the browser.</div>',"</div></div>"].join(""));t.innerHTML=n;for(var a=0;a<s.links.length;a++)"DWT_CloseNonAllowedDiv"==s.links[a].className&&(s.links[a].onclick=u)}function u(){o.D.get(e._strDWTNonInstallInnerContainerID).style.display="none",o.D.get(e._strDWTInnerContainerID).style.display="inline"}},o.D.detect._controlDetect=function(){var e,t,n,r,i=o.D.detect.arySTwains,s=i[0],u=s&&s._objectWebTwain;u?(e=o.I.DWT,t=!1,a.bIE?(r=!a.bOSx64||a.bWOW64?"DynamicPdfCore_"+e.PdfVersion+".dll":"DynamicPdfCorex64_"+e.PdfVersion+".dll",0==u.ErrorCode&&""!=u.GetAddOnVersion("pdf",r)&&(t=!0)):0==u.ErrorCode&&(t=!0),t?(clearInterval(o.D.detect._varSeed),n=function(e,t,n){for(var r,s=0;s<i.length;s++)o.D.attachProperty(r=i[s]),o.D.attachMethod(r),r._attachEvents(),o.D.detect.ssl&&(r.IfSSL=!0,r.HTTPPort=443),0==e?(r.GetLicenseInfo(t),r._setConvertMode(r._pdfConvertMode)):(r._blts=!0,""!=t&&""!=n?(r.SetLTSInfo(t,n),r._setConvertMode(r._pdfConvertMode),r.GetLicenseInfo().then((function(e){o.I.DWT.lcheckLic(o.I.DWT.EnumInstance.dwt_desktop,e)}))):r.__licenseInfo={LTS:!0,Detail:[]},o.I.DWT.laddDWTObj(r)),o.D.attachAddon(r),r._objectWebTwain.BrokerProcessType=o.D.product._iBrokerProcessType,a.bWin||(r._objectWebTwain.ImageCaptureDriverType=o.D.product._iImageCaptureDriverType),o.D.isFunction(r.__OnPluginReady)&&r.__OnPluginReady()},o.D.License.isLTS()?(r=o.I.DWT.li({instanceMode:o.I.DWT.EnumInstance.dwt_desktop,axInstance:u}),o.I.DWT.lisValidID(r)?o.I.DWT.lglic(o.I.DWT.EnumInstance.dwt_desktop).then((function(e){n(1,e.ar,e.cu)}),(function(e){e&&(o.I.DWT.lsetException(e.code||e.ltsErrorCode,e.message),o.I.DWT.OnLicenseException()),n(1,"","")})):n(1,"","")):n(0,e.ProductKey,"")):(o.D.detect.bNoControlEvent||(o.D.noControl(s),o.D.detect.bNoControlEvent=!0),o.D.isFunction(s.__OnPluginNotReady)&&s.__OnPluginNotReady())):clearInterval(o.D.detect._varSeed)},o.D.ie={},o.D.ie.DynamicWebTwain=function(e){return(e=new u(e))._createControl(),o.D.detect.arySTwains.push(e),e},o.D.ie.closeAll=function(){for(var e,t=o.D.detect.arySTwains,n=0;n<t.length;n++)(e=t[n])&&e._objectWebTwain&&(e=e._objectWebTwain)&&0==e.ErrorCode&&e.RemoveAllImages();o.D.detect.arySTwains=[]},o.I.DWT.RemoveAllAuthorizations=function(){return!1}},7127:function(e,t,n){n.r(t),t=n(4341);var r=n.n(t),i=(t=n(9104),n.n(t)),o=(t=n(2825),n.n(t)),a=n(1695);function s(e){this._stwain=e,a.D.attachAxViewerPropertyUI(this),a.D.attachAxViewerFunctions(this),this._thumbnailViewer=null}a.D.attachAxViewerPropertyUI=function(e){var t;(t=function(t,n){t in e||r()(e,t,n)})("width",{get:function(){return e._stwain.Width},set:function(t){return e._stwain.Width=t,a.D.checkErrorString(e._stwain)}}),t("height",{get:function(){return e._stwain.Height},set:function(t){return e._stwain.Height=t,a.D.checkErrorString(e._stwain)}}),t("background",{get:function(){return e._stwain.BackgroundColor},set:function(t){return e._stwain.BackgroundColor=t}}),t("cursor",{get:function(){return e._stwain.MouseShape?"pointer":"crosshair"},set:function(t){return e._stwain.MouseShape="pointer"==t,t}}),t("showPageNumber",{get:function(){return!1},set:function(e){return!1}}),t("ifAutoScroll",{get:function(){return e._stwain.IfAutoScroll},set:function(t){return e._stwain.IfAutoScroll=t}}),t("pageMargin",{get:function(){return e._stwain.ImageMargin},set:function(t){return e._stwain.ImageMargin=t}}),t("zoom",{get:function(){return e._stwain.Zoom},set:function(t){return e._stwain.Zoom=t}})},a.D.attachAxViewerFunctions=function(e){e.next=function(){return this._stwain.next()},e.previous=function(){return this._stwain.previous()},e.first=function(){return this._stwain.first()},e.last=function(){return this._stwain.last()},e.gotoPage=function(e){return a.D.isNaN(e=+e)||!a.D.isNumber(e)?(a.D.Errors.InvalidIndex(this._stwain),!1):e<0||e>=this._stwain.HowManyImagesInBuffer?(a.D.Errors.IndexOutOfRange(this._stwain),!1):this._stwain.CurrentImageIndexInBuffer=e},e.setSelectedAreas=function(e){return this._stwain.SetSelectedImageArea(this._stwain.CurrentImageIndexInBuffer,e.left,e.top,e.right,e.bottom)},e.fitWindow=function(e){return"height"==e?(this._stwain.IfFitWindow=!0,this._stwain.FitWindowType=a.I.DWT.EnumDWT_FitWindowType.enumFitWindowHeight):"width"==e?(this._stwain.IfFitWindow=!0,this._stwain.FitWindowType=a.I.DWT.EnumDWT_FitWindowType.enumFitWindowWidth):(this._stwain.IfFitWindow=!0,this._stwain.FitWindowType=a.I.DWT.EnumDWT_FitWindowType.enumFitWindow),!0},e.setViewMode=function(e,t){return this._stwain.SetViewMode(e,t)},e.createImageEditor=function(){return this._stwain},e.on=function(e,t){return""!=(e=this._convertEvtName(e))&&("OnImageAreaSelected"==e?(this.OnImageAreaSelected=function(e,n,r,i,o){t(e,[{x:n,y:r,width:i-n,height:o-r}])},this._stwain.RegisterEvent(e,this.OnImageAreaSelected)):this._stwain.RegisterEvent(e,t))},e.off=function(e,t){return""!=(e=this._convertEvtName(e))&&("OnImageAreaSelected"==e?this.OnImageAreaSelected?this._stwain.UnregisterEvent(e,this.OnImageAreaSelected):this._stwain.UnregisterEvent(e):this._stwain.UnregisterEvent(e,t))},e.createThumbnailViewer=function(e){return this._thumbnailViewer?a.D.Errors.ThumbnailViewerExist(this._stwain):(e=new a.D.UI.ThumbnailViewer(this._stwain,e),this._thumbnailViewer=e.getInstance()),this._thumbnailViewer},e._convertEvtName=function(e){if(!a.D.isString(e))return"";var t=i()(a.D).call(a.D,e).toLowerCase();return"toppagechanged"==t?"OnTopImageInTheViewChanged":"click"==t?"OnMouseClick":"dblclick"==t?"OnMouseDoubleClick":"mousemove"==t?"OnMouseMove":"rightclick"==t?"OnMouseRightClick":"wheel"==t?"OnMouseWheel":"keydown"==t?"OnKeyDown":"pageareaselected"==t?"OnImageAreaSelected":"pageareaunselected"==t?"OnImageAreaDeSelected":i()(a.D).call(a.D,e)}};var u={showThumbnail:!(s.prototype.getInstance=function(){return this}),location:"horizontal",sequence:-1,size:"30%",columns:1,rows:3,scrollDirection:"vertical",pageMargin:10,border:"",allowKeyboardControl:!0,allowPageDragging:!0,allowResizing:!1,pageBackground:"transparent",pageBorder:"1px solid rgb(238, 238, 238)",hoverPageBackground:"rgb(239, 246, 253)",hoverPageBorder:"1px solid rgb(238, 238, 238)",placeholderBackground:"rgb(251, 236, 136)",autoChangeIndex:!1};function c(e,t){var n=t;if(n){if(n.location)switch(n.location){case"left":n.location="horizontal",n.sequence=-1;break;case"right":n.location="horizontal",n.sequence=1;break;case"top":n.location="vertical",n.sequence=-1;break;case"bottom":n.location="vertical",n.sequence=1;break;default:n.location="horizontal",n.sequence=-1}else n.location="horizontal",n.sequence=-1;a.D.isUndefined(n.size)&&(n.size=u.size),a.D.isUndefined(n.columns)&&(n.columns=u.columns),a.D.isUndefined(n.rows)&&(n.rows=u.rows),(a.D.isUndefined(n.scrollDirection)||"horizontal"!=n.scrollDirection)&&(n.scrollDirection=u.scrollDirection),a.D.isUndefined(n.pageMargin)&&(n.pageMargin=u.pageMargin),a.D.isUndefined(n.allowKeyboardControl)&&(n.allowKeyboardControl=u.allowKeyboardControl),a.D.isUndefined(n.allowPageDragging)&&(n.allowPageDragging=u.allowPageDragging),a.D.isUndefined(n.allowResizing)&&(n.allowResizing=u.allowResizing),a.D.isUndefined(n.border)&&(n.border=u.border),a.D.isUndefined(n.pageBackground)&&(n.pageBackground=u.pageBackground),a.D.isUndefined(n.pageBorder)&&(n.pageBorder=u.pageBorder),a.D.isUndefined(n.hoverPageBackground)&&(n.hoverPageBackground=u.hoverPageBackground),a.D.isUndefined(n.hoverPageBorder)&&(n.hoverPageBorder=u.hoverPageBorder),a.D.isUndefined(n.placeholderBackground)&&(n.placeholderBackground=u.placeholderBackground),a.D.isUndefined(n.autoChangeIndex)&&(n.autoChangeIndex=u.autoChangeIndex)}else n=u;this._stwain=e,this._settings=n,a.D.attachViewerPropertyThumbnailUI(this),a.D.attachViewerFunctionsThumbnailUI(this),e.getSWebTwain().SetViewMode(-1,-1),e.getSWebTwain().ShowThumbnail(o()(n))}c.prototype.getInstance=function(){return this},a.D.attachViewerFunctionsThumbnailUI=function(e){e.show=function(){e._stwain?(e._stwain.getSWebTwain().SetViewMode(-1,-1),e._stwain.getSWebTwain().ShowThumbnail('{"mode":"show"}')):a.D.Errors.ThumbnailViewerDispose(e._stwain)},e.hide=function(){e._stwain?e._stwain.getSWebTwain().ShowThumbnail('{"mode":"hide"}'):a.D.Errors.ThumbnailViewerDispose(e._stwain)},e.dispose=function(){e.hide(),e._stwain=null},e.updateViewMode=function(t){if(e._stwain){if(t&&t.columns&&t.rows){if(t.columns<0||t.rows<0)return a.D.Errors.InvalidPropertyValue(e._stwain),!1;e._stwain.getSWebTwain().ShowThumbnail('{"columns":'+t.columns+',"rows":'+t.rows+"}")}}else a.D.Errors.ThumbnailViewerDispose(e._stwain)},e.on=function(t,n){var r=t;t=!1,a.D.isFunction(n)&&("OnMouseClick"==(r="pageareaunselected"==(r="pageareaselected"==(r="toppagechanged"==(r="keydown"==(r="wheel"==(r="mousemove"==(r="dblclick"==(r="rightclick"==(r="click"==r?"OnMouseClick":r)?"OnMouseRightClick":r)?"OnMouseDoubleClick":r)?"OnMouseMove":r)?"OnMouseWheel":r)?"OnKeyDown":r)?"OnTopImageInTheViewChanged":r)?"OnImageAreaSelected":r)?"OnImageAreaDeSelected":r)||"OnMouseDoubleClick"==r||"OnMouseRightClick"==r||"OnMouseMove"==r||"OnMouseWheel"==r||"OnKeyDown"==r||"OnPaintDone"==r||"OnImageAreaDeSelected"==r||"OnTopImageInTheViewChanged"==r?(a.D.isFunction(e._stwain["__"+r])||a.D.isFunction(e._stwain["__"+r+"_Thumbnail"])||(t=!0),e._stwain["__"+r+"_Thumbnail"]=n,t&&e._stwain.getSWebTwain().RegisterEvent(r,(function(t,n){return e._stwain.__OnDispatchThumbnailEvt(r,t,n)}))):"OnImageAreaSelected"==r&&(a.D.isFunction(e._stwain["__"+r])||a.D.isFunction(e._stwain["__"+r+"_Thumbnail"])||(t=!0),e._stwain["__"+r+"_Thumbnail"]=n,t&&e._stwain.getSWebTwain().RegisterEvent(r,e._stwain._OnImageAreaSelected)))},e.off=function(t,n){e._stwain["__"+t+"_Thumbnail"]=""}},a.D.attachViewerPropertyThumbnailUI=function(e){var t;(t=function(t,n){t in e||r()(e,t,n)})("location",{get:function(){return e._settings.location},set:function(t){e._settings.location=t,e._stwain&&e._stwain.getSWebTwain().ShowThumbnail('{"location":"'+t+'"}')}}),t("size",{get:function(){return e._settings.size},set:function(t){e._settings.size=t,e._stwain&&e._stwain.getSWebTwain().ShowThumbnail('{"size":"'+t+'"}')}}),t("pageMargin",{get:function(){return e._settings.pageMargin},set:function(t){e._settings.pageMargin=t,e._stwain&&e._stwain.getSWebTwain().ShowThumbnail('{"pageMargin":"'+t+'"}')}}),t("background",{get:function(){return e._settings.background},set:function(t){e._settings.background=t,e._stwain&&e._stwain.getSWebTwain().ShowThumbnail('{"background":"'+t+'"}')}}),t("pageBackground",{get:function(){return e._settings.pageBackground},set:function(t){e._settings.pageBackground=t,e._stwain&&e._stwain.getSWebTwain().ShowThumbnail('{"pageBackground":"'+t+'"}')}}),t("selectedPageBorder",{get:function(){return e._settings.selectedPageBorder},set:function(t){e._settings.selectedPageBorder=t,e._stwain&&e._stwain.getSWebTwain().ShowThumbnail('{"selectedPageBorder":"'+t+'"}')}}),t("selectedPageBackground",{get:function(){return e._settings.selectedPageBackground},set:function(t){e._settings.selectedPageBackground=t,e._stwain&&e._stwain.getSWebTwain().ShowThumbnail('{"selectedPageBackground":"'+t+'"}')}}),t("scrollDirection",{get:function(){return e._settings.scrollDirection},set:function(t){e._settings.scrollDirection=t,e._stwain&&e._stwain.getSWebTwain().ShowThumbnail('{"scrollDirection":"'+t+'"}')}}),t("showPageNumber",{get:function(){return e._settings.showPageNumber},set:function(t){e._settings.showPageNumber=t,e._stwain&&e._stwain.getSWebTwain().ShowThumbnail('{"showPageNumber":"'+t+'"}')}}),t("border",{get:function(){return e._settings.border},set:function(t){e._settings.border=t,e._stwain&&e._stwain.getSWebTwain().ShowThumbnail('{"border":"'+t+'"}')}}),t("pageBorder",{get:function(){return e._settings.pageBorder},set:function(t){e._settings.pageBorder=t,e._stwain&&e._stwain.getSWebTwain().ShowThumbnail('{"pageBorder":"'+t+'"}')}}),t("hoverPageBackground",{get:function(){return e._settings.hoverPageBackground},set:function(t){e._settings.hoverPageBackground=t,e._stwain&&e._stwain.getSWebTwain().ShowThumbnail('{"hoverPageBackground":"'+t+'"}')}}),t("hoverPageBorder",{get:function(){return e._settings.hoverPageBorder},set:function(t){e._settings.hoverPageBorder=t,e._stwain&&e._stwain.getSWebTwain().ShowThumbnail('{"hoverPageBorder":"'+t+'"}')}}),t("placeholderBackground",{get:function(){return e._settings.placeholderBackground},set:function(t){e._settings.placeholderBackground=t,e._stwain&&e._stwain.getSWebTwain().ShowThumbnail('{"placeholderBackground":"'+t+'"}')}}),t("allowKeyboardControl",{get:function(){return e._settings.allowKeyboardControl},set:function(t){e._settings.allowKeyboardControl=t,e._stwain&&e._stwain.getSWebTwain().ShowThumbnail('{"allowKeyboardControl":"'+t+'"}')}}),t("allowPageDragging",{get:function(){return e._settings.allowPageDragging},set:function(t){e._settings.allowPageDragging=t,e._stwain&&e._stwain.getSWebTwain().ShowThumbnail('{"allowPageDragging":"'+t+'"}')}}),t("allowResizing",{get:function(){return e._settings.allowResizing},set:function(t){e._settings.allowResizing=t,e._stwain&&e._stwain.getSWebTwain().ShowThumbnail('{"allowResizing":"'+t+'"}')}}),t("autoChangeIndex",{get:function(){return e._settings.autoChangeIndex},set:function(t){e._settings.autoChangeIndex=t,e._stwain&&e._stwain.getSWebTwain().ShowThumbnail('{"autoChangeIndex":"'+t+'"}')}})},a.D.UI=a.D.UI||{},a.D.UI.DWTAxViewer=s,a.D.UI.ThumbnailViewer=c},9035:function(e,t,n){n.r(t),t=n(677);var r=n.n(t),i=(t=n(5238),n.n(t)),o=(t=n(4341),n.n(t)),a=(t=n(7711),n.n(t)),s=(t=n(9798),n.n(t)),u=n(1695),c=n(9158),l=u.I.navInfo,d={isFunction:function(e){return e&&"function"==typeof e},isReturnSuccess:function(e){return-2115===e._errorCode||(-2003!==e._errorCode||u.I.DWT.IfHttpPostErrorNoWindow||window.open("","ErrorMessage","height=500,width=750,top=0,left=0,toolbar=no,menubar=no,scrollbars=no, resizable=no,location=no, status=no").document.writeln(e.HTTPPostResponseString),0==e._errorCode)},setErrorString:function(e){e._errorCode=e.getSWebTwain().ErrorCode,e._errorString=e.getSWebTwain().ErrorString},checkErrorString:function(e){return d.setErrorString(e),d.isReturnSuccess(e)},wrapperRet:function(e,t,n,r,i,o){if(d.checkErrorString(e)){if(d.isFunction(n))if(i)n(e.getSWebTwain().HTTPPostResponseString);else{if(o)return n(t),!0;n()}}else d.isFunction(r)&&(i?r(e._errorCode,e._errorString,e.getSWebTwain().HTTPPostResponseString):r(e._errorCode,e._errorString));return t},wrapperPromise:function(e,t){return t?u.D.Promise.resolve(!0):u.D.Promise.reject({errorCode:e._errorCode,errorString:e._errorString})},getImageType:function(e){if(e.length<4)return-1;var t=r()(e).call(e,".");return-1===t?-1:".bmp"===(e=i()(e).call(e,t).toLowerCase())||".dib"===e?0:".jpg"===e||".jpe"===e||".jpeg"===e||".jfif"===e?1:".tif"===e||".tiff"===e?2:".png"===e?3:".pdf"===e?4:".gif"===e?5:-1},replaceLocalFilename:function(e){return u.I.navInfoSync.bFileSystem?decodeURI(e):e},makeParams:function(){var e=arguments;return void 0===e||0===e.length?void 0:e}};u.D.checkErrorString=d.checkErrorString,u.D.wrapperRet=d.wrapperRet,u.D.setErrorString=d.setErrorString,u.D.DynamicLoadAddonFuns=[],u.D.attachAddon=function(e){if(l.bWin){var t=!l.bOSx64||l.bWOW64,n=e.getSWebTwain();t=t?"DynamicPdfCore_"+u.I.DWT.PdfVersion+".dll":"DynamicPdfCorex64_"+u.I.DWT.PdfVersion+".dll";try{n.GetAddOnVersion("pdf",t)}catch(r){}}u.D.each(u.D.DynamicLoadAddonFuns,(function(t){u.D.isFunction(t)&&t(e)}))},u.D.attachProperty=function(e){var t,n=e;(t=function(e,t,r){var i;0!==t&&1!==t?i=t:(i={},t&&(i.set=1==r?function(t){return!u.D.isNumber(t=+t)||isNaN(t)?(u.D.Errors.InvalidValue(n),!1):(n.getSWebTwain()[e]=t,d.checkErrorString(n))}:2==r?function(t){return u.D.isBoolean(t)?(n.getSWebTwain()[e]=t,d.checkErrorString(n)):(u.D.Errors.InvalidValue(n),!1)}:function(t){return u.D.isString(t)?(n.getSWebTwain()[e]=t,d.checkErrorString(n)):(u.D.Errors.InvalidValue(n),!1)})),i.get||(i.get=function(){var t=n.getSWebTwain()[e];return n._errorCode=n.getSWebTwain().ErrorCode,n._errorString=n.getSWebTwain().ErrorString,t}),e in n||o()(n,e,i)})("ErrorCode",{get:function(e){return n._errorCode}}),t("ErrorString",{get:function(e){return n._errorString}}),t("LogLevel",1,1),t("Manufacturer",1),t("ProductFamily",1),t("ProductKey",{get:function(){return u.I.DWT.ProductKey},set:function(e){var t=!0;return u.D.isString(e)&&"******"!=e||(e=""),u.I.DWT.ProductKey=e,n.__licenseInfo=!1,""==e?u.D.License.checkProductKey(n,{Core:!(t=!1)},!1,!0):(n.GetLicenseInfo(e),t=d.checkErrorString(n)),t}}),t("ProductName",1),t("VersionInfo",1),t("BitDepth",1,1),t("Brightness",1,1),t("Contrast",1,1),t("CurrentSourceName",0),t("DataSourceStatus",0),t("DefaultSourceName",0),t("Duplex",0),t("IfAppendImage",1,2),t("IfAutoBright",1,2),t("IfAutoDiscardBlankpages",1,2),t("IfAutoFeed",1,2),t("IfAutomaticBorderDetection",1,2),t("IfAutomaticDeskew",1,2),t("IfAutoScan",1,2),t("IfDisableSourceAfterAcquire",1,2),t("IfDuplexEnabled",1,2),t("IfFeederEnabled",1,2),t("IfModalUI",1,2),t("IfScanInNewThread",1,2),t("IfShowCancelDialogWhenImageTransfer",1,2),t("IfShowUI",1,2),t("IfShowIndicator",1,2),t("IfUseTwainDSM",1,2),t("IfFeederLoaded",0,2),t("IfPaperDetectable",0,2),t("IfUIControllable",0,2),t("ImageBitsPerPixel",0),t("ImageCaptureDriverType",1,1),t("ImageLayoutDocumentNumber",0),t("ImageLayoutFrameBottom",0),t("ImageLayoutFrameLeft",0),t("ImageLayoutFrameNumber",0),t("ImageLayoutFrameRight",0),t("ImageLayoutFrameTop",0),t("ImageLayoutPageNumber",0),t("ImageLength",0),t("ImagePixelType",0),t("ImageWidth",0),t("ImageXResolution",0),t("ImageYResolution",0),t("MagData",0),t("MagType",0),t("PageSize",1,1),t("PendingXfers",0),t("PixelFlavor",1,1),t("PixelType",1,1),t("Resolution",1,1),t("SourceCount",0),t("TransferMode",1,1),t("Unit",1,1),t("XferCount",1,1),t("Capability",1,1),t("CapCurrentIndex",1,1),t("CapCurrentValue",1,1),t("CapDefaultIndex",0),t("CapDefaultValue",0),t("CapDescription",1),t("CapMaxValue",1,1),t("CapMinValue",1,1),t("CapNumItems",1,1),t("CapStepSize",1,1),t("CapType",1,1),t("CapValue",1,1),t("CapValueString",1),t("CapValueType",1,1),t("AllowMultiSelect",1,2),t("BackgroundColor",1,1),t("BackgroundFillColor",1,1),t("BlankImageCurrentStdDev",0),t("BlankImageMaxStdDev",1,1),t("BlankImageThreshold",1,1),t("CurrentImageIndexInBuffer",{set:function(e){return e!=n.getSWebTwain().CurrentImageIndexInBuffer&&(n.getSWebTwain().CurrentImageIndexInBuffer=e),d.checkErrorString(n)}}),t("FitWindowType",1,1),t("HowManyImagesInBuffer",0),t("IfFitWindow",1,2),t("ImageMargin",1,1),t("MaxImagesInBuffer",1,1),t("MouseX",0),t("MouseY",0),t("SelectionImageBorderColor",1),t("Zoom",1,1),t("MouseShape",1,2),t("SelectedImagesIndices",{get:function(){for(var e=[],t=n.getSWebTwain().SelectedImagesCount,r=0;r<t;r++)e.push(n.getSWebTwain().GetSelectedImageIndex(r));return e}}),t("HTTPPostResponseString",0),t("AsyncMode",1,2),t("FTPPassword",1),t("FTPPort",{set:function(e){return""!==e&&(e=+e,n.getSWebTwain().FTPPort=e,d.checkErrorString(n))}}),t("FTPUserName",1),t("HTTPPort",{set:function(e){return e=""!==e?+e:u.D.detect.ssl?443:80,n.getSWebTwain().HTTPPort=e,d.checkErrorString(n)}}),t("HTTPPassword",1),t("HTTPUserName",1),t("IfPASVMode",1,2),t("IfShowProgressBar",1,2),t("ProxyServer",1),t("IfShowFileDialog",1,2),t("IfTiffMultiPage",1,2),t("PDFAuthor",1),t("PDFCompressionType",1,1),t("PDFCreationDate",1),t("PDFCreator",1),t("PDFKeywords",1),t("PDFModifiedDate",1),t("PDFProducer",1),t("PDFSubject",1),t("PDFTitle",1),t("PDFVersion",1),t("TIFFCompressionType",1,1),t("JPEGQuality",{set:function(e){return 100<=(e=+e)?e=100:e<0&&(e=0),n.getSWebTwain().JPEGQuality=e,d.checkErrorString(n)}}),t("HttpContentTypeFieldValue",1),t("SelectionRectAspectRatio",1,1),t("IfAllowLocalCache",1,2),t("_AutoCropMethod",1,2),t("BrokerProcessType",1,1),t("BorderStyle",1,1),t("IfShowPrintUI",1,2),t("VScrollBar",1,2),t("EnableInteractiveZoom",1,2),t("ImageEditorIfEnableEnumerator",1,2),t("ImageEditorIfReadonly",1,2),t("ImageEditorIfModal",1,2),t("ImageEditorWindowTitle",1),t("IfSSL",1,2),t("AllowPluginAuthentication",1,2),t("HttpFieldNameOfUploadedImage",1),t("MaxInternetTransferThreads",1,1),t("MaxUploadImageSize",1,1),t("IfOpenImageWithGDIPlus",1,2),t("BufferMemoryLimit",1,1),t("Width",{get:function(){return n.getSWebTwain().style.width},set:function(e){return n._ChangeWidth(e),d.checkErrorString(n)}}),t("Height",{get:function(){return n.getSWebTwain().style.height},set:function(e){return n._ChangeHeight(e),d.checkErrorString(n)}}),t("IfThrowException",1,2),t("IfAutoScroll",1,2),t("ShowPageNumber",{get:function(){return!1},set:function(e){return!1}}),t("UseLocalService",{get:function(){return!0}})},u.D.attachMethod=function(e){var t=e,n=function(e){return!!u.D.License.checkProductKey(t,{Core:!0})||(u.D.isFunction(e)&&e(t.ErrorCode,t.ErrorString),!1)},r=function(e,n){return!!u.D.License.checkPDFProductKeyWhenNeeds(t,e)||(u.D.isFunction(n)&&n(t.ErrorCode,t.ErrorString),!1)},i=function(e,t){return 0!=e.HowManyImagesInBuffer||(u.D.Errors.NoImage(e),u.D.isFunction(t)&&t(e.ErrorCode,e.ErrorString),!1)},o=function(e,t,n){return!(!i(e,n)||(isNaN(t)||!u.D.isNumber(t)||t<0||t>=e.HowManyImagesInBuffer)&&(u.D.Errors.IndexOutOfRange(e),u.D.isFunction(n)&&n(e.ErrorCode,e.ErrorString),1))},l=(e.RegisterEvent=function(e,n){if(!u.D.isString(e))return u.D.Errors.InvalidEventName(t),!1;if("onwsmessage"===e.toLowerCase())return u.D.Errors.InvalidEventName(t),!1;if("onpostalltransfers"===e.toLowerCase())return u.D.isFunction(n)&&(t.__OnPostAllTransfers=n),!0;var r=["__",e].join("");return t[r]=n,t.getSWebTwain().RegisterEvent(e,n),d.checkErrorString(t)},e.onEvent=function(e,n){return t.RegisterEvent(e,n)},e.on=function(e,n){return t.RegisterEvent(e,n)},e._isMobileMode=function(){return!1},e.CancelAllPendingTransfers=function(){return t.getSWebTwain().CancelAllPendingTransfers(),d.checkErrorString(t)},e.CloseSource=function(){return t.getSWebTwain().CloseSource(),d.checkErrorString(t)},e.CloseSourceManager=function(){return t.getSWebTwain().CloseSourceManager(),d.checkErrorString(t)},e.DisableSource=function(){return t.getSWebTwain().DisableSource(),d.checkErrorString(t)},e.FeedPage=function(){return t.getSWebTwain().FeedPage(),d.checkErrorString(t)},e.GetDeviceType=function(){var e=t.getSWebTwain().GetDeviceType();return d.setErrorString(t),e},e.GetSourceNameItems=function(e){return e=t.getSWebTwain().GetSourceNameItems(e),d.setErrorString(t),e},e.SourceNameItems=function(e){return e=t.getSWebTwain().GetSourceNameItems(e),d.setErrorString(t),e},e.GetSourceNames=function(){return u.D.Errors.ActiveXNotSupport(t),[]},e.GetSourceType=function(e){return e=t.getSWebTwain().GetSourceType(e),d.setErrorString(t),e},e.OpenSource=function(){return t.getSWebTwain().OpenSource(),d.checkErrorString(t)},e.OpenSourceManager=function(){return t.getSWebTwain().OpenSourceManager(),d.checkErrorString(t)},e.ResetImageLayout=function(){return t.getSWebTwain().ResetImageLayout(),d.checkErrorString(t)},e.RewindPage=function(){return t.getSWebTwain().RewindPage(),d.checkErrorString(t)},e.SelectSource=function(e,n){return u.D.isUndefined(e)?(t.getSWebTwain().SelectSource(),d.checkErrorString(t)):(t.getSWebTwain().SelectSource(),d.checkErrorString(t)?(e(),!0):(n(),!1))},e.SelectSourceByIndex=function(e){return t.getSWebTwain().SelectSourceByIndex(e),d.checkErrorString(t)},e.CloseSourceAsync=function(){return d.wrapperPromise(t,t.CloseSource())},e.CloseSourceManagerAsync=function(){return d.wrapperPromise(t,t.CloseSourceManager())},e.GetSourceNamesAsync=function(){return d.wrapperPromise(t,t.GetSourceNames())},e.GetSourceTypeAsync=function(e){return d.wrapperPromise(t,t.GetSourceType(e))},e.OpenSourceAsync=function(){return d.wrapperPromise(t,t.OpenSource())},e.OpenSourceManagerAsync=function(){return d.wrapperPromise(t,t.OpenSourceManager())},e.SelectSourceAsync=function(){return d.wrapperPromise(t,t.SelectSource())},e.SelectSourceByIndexAsync=function(e){return d.wrapperPromise(t,t.SelectSourceByIndex(e))},e.SetFileXferInfo=function(e,n){return e=d.replaceLocalFilename(e),t.getSWebTwain().SetFileXferInfo(e,n),d.checkErrorString(t)},e.SetImageLayout=function(e,n,r,i){return t.getSWebTwain().SetImageLayout(e,n,r,i),d.checkErrorString(t)},e.CapGet=function(){var e=t.getSWebTwain().CapGet();return d.setErrorString(t),e},e.CapGetCurrent=function(){var e=t.getSWebTwain().CapGetCurrent();return d.setErrorString(t),e},e.CapGetDefault=function(){var e=t.getSWebTwain().CapGetDefault();return d.setErrorString(t),e},e.CapGetFrameBottom=function(e){return e=t.getSWebTwain().CapGetFrameBottom(e),d.setErrorString(t),e},e.CapGetFrameLeft=function(e){return e=t.getSWebTwain().CapGetFrameLeft(e),d.setErrorString(t),e},e.CapGetFrameRight=function(e){return e=t.getSWebTwain().CapGetFrameRight(e),d.setErrorString(t),e},e.CapGetFrameTop=function(e){return e=t.getSWebTwain().CapGetFrameTop(e),d.setErrorString(t),e},e.CapGetHelp=function(){var e=t.getSWebTwain().CapGetHelp();return d.setErrorString(t),e},e.CapGetLabel=function(){var e=t.getSWebTwain().CapGetLabel();return d.setErrorString(t),e},e.CapGetLabels=function(){var e=t.getSWebTwain().CapGetLabels();return d.setErrorString(t),e},e.CapIfSupported=function(e){return e=t.getSWebTwain().CapIfSupported(e),d.setErrorString(t),e},e.CapReset=function(){return t.getSWebTwain().CapReset(),d.checkErrorString(t)},e.CapSet=function(){return t.getSWebTwain().CapSet(),d.checkErrorString(t)},e.CapSetFrame=function(e,n,r,i,o){return t.getSWebTwain().CapSetFrame(e,n,r,i,o),d.checkErrorString(t)},e.GetCapItems=function(e){return e=t.getSWebTwain().GetCapItems(e),d.setErrorString(t),e},e.GetCapItemsString=function(e){return e=t.getSWebTwain().GetCapItemsString(e),d.setErrorString(t),e},e.SetCapItems=function(e,n){return t.getSWebTwain().SetCapItems(e,n),d.checkErrorString(t)},e.SetCapItemsString=function(e,n){return t.getSWebTwain().SetCapItemsString(e,n),d.checkErrorString(t)},e.AddText=function(e,n,r,i,o,s,c,l){return e=a()(e),isNaN(e)||e<0||e>=t.HowManyImagesInBuffer?(u.D.Errors.IndexOutOfRange(t),!1):(t.getSWebTwain().AddText(e,n,r,i,o,s,c,l),d.checkErrorString(t))},e.CreateTextFont=function(e,n,r,i,o,a,s,u,c,l,h,g,f,m){return t.getSWebTwain().CreateTextFont(e,n,r,i,o,a,s,u,c,l,h,g,f,m),d.checkErrorString(t)},e.CopyToClipboard=function(e){return e=a()(e),isNaN(e)||e<0||e>=t.HowManyImagesInBuffer?(u.D.Errors.IndexOutOfRange(t),!1):(t.getSWebTwain().CopyToClipboard(e),d.checkErrorString(t))},e.Erase=function(e,n,r,i,o,s,c){return e=a()(e),isNaN(e)||e<0||e>=t.HowManyImagesInBuffer?(u.D.Errors.IndexOutOfRange(t),u.D.isFunction(c)&&c(t.ErrorCode,t.ErrorString),!1):(e=t.getSWebTwain().Erase(e,n,r,i,o),d.wrapperRet(t,e,s,c))},e.GetImageBitDepth=function(e){return e=a()(e),isNaN(e)||e<0||e>=t.HowManyImagesInBuffer?(u.D.Errors.IndexOutOfRange(t),!1):(e=t.getSWebTwain().GetImageBitDepth(e),d.setErrorString(t),e)},e.GetImageWidth=function(e){return e=a()(e),isNaN(e)||e<0||e>=t.HowManyImagesInBuffer?(u.D.Errors.IndexOutOfRange(t),!1):(e=t.getSWebTwain().GetImageWidth(e),d.setErrorString(t),e)},e.GetImageHeight=function(e){return e=a()(e),isNaN(e)||e<0||e>=t.HowManyImagesInBuffer?(u.D.Errors.IndexOutOfRange(t),!1):(e=t.getSWebTwain().GetImageHeight(e),d.setErrorString(t),e)},e.GetImageSize=function(e,n,r){return e=a()(e),isNaN(e)||e<0||e>=t.HowManyImagesInBuffer?(u.D.Errors.IndexOutOfRange(t),!1):(e=t.getSWebTwain().GetImageSize(e,n,r),d.setErrorString(t),e)},e.GetImageSizeWithSpecifiedType=function(e,n){return e=a()(e),isNaN(e)||e<0||e>=t.HowManyImagesInBuffer?(u.D.Errors.IndexOutOfRange(t),!1):(e=t.getSWebTwain().GetImageSizeWithSpecifiedType(e,n),d.setErrorString(t),e)},e.GetImageXResolution=function(e){return e=a()(e),isNaN(e)||e<0||e>=t.HowManyImagesInBuffer?(u.D.Errors.IndexOutOfRange(t),!1):(e=t.getSWebTwain().GetImageXResolution(e),d.setErrorString(t),e)},e.GetImageYResolution=function(e){return e=a()(e),isNaN(e)||e<0||e>=t.HowManyImagesInBuffer?(u.D.Errors.IndexOutOfRange(t),!1):(e=t.getSWebTwain().GetImageYResolution(e),d.setErrorString(t),e)},e.CopyToClipboardAsync=function(e){return d.wrapperPromise(t,t.CopyToClipboard(e))},e.EraseAsync=function(e,n,r,i,o){return d.wrapperPromise(t,t.Erase(e,n,r,i,o))},e.GetImageBitDepthAsync=function(e){return d.wrapperPromise(t,t.GetImageBitDepth(e))},e.GetImageWidthAsync=function(e){return d.wrapperPromise(t,t.GetImageWidth(e))},e.GetImageHeightAsync=function(e){return d.wrapperPromise(t,t.GetImageHeight(e))},e.GetImageSizeAsync=function(e,n,r){return d.wrapperPromise(t,t.GetImageSize(e,n,r))},e.GetImageSizeWithSpecifiedTypeAsync=function(e,n){return d.wrapperPromise(t,t.GetImageSizeWithSpecifiedType(e,n))},e.GetImageXResolutionAsync=function(e){return d.wrapperPromise(t,t.GetImageXResolution(e))},e.GetImageYResolutionAsync=function(e){return d.wrapperPromise(t,t.GetImageYResolution(e))},e.SelectAllImages=function(){var e,n=t.getSWebTwain().HowManyImagesInBuffer,r=[];for(t.getSWebTwain().SelectedImagesCount=n,e=0;e<n;e++)t.getSWebTwain().SetSelectedImageIndex(e,e),r.push(e);return d.checkErrorString(t),r},e.SelectImages=function(e){var n=e.length;t.getSWebTwain().SelectedImagesCount=n;for(var r=0;r<n;r++)t.getSWebTwain().SetSelectedImageIndex(r,e[r]);return d.checkErrorString(t)},e.GetSelectedImagesSize=function(e){return e=t.getSWebTwain().GetSelectedImagesSize(e),d.setErrorString(t),e},e.GetSkewAngle=function(e,n,r){return e=a()(e),isNaN(e)||e<0||e>=t.HowManyImagesInBuffer?(u.D.Errors.IndexOutOfRange(t),u.D.isFunction(r)&&r(t.ErrorCode,t.ErrorString),!1):(e=t.getSWebTwain().GetSkewAngle(e),d.wrapperRet(t,e,n,r,!1,!0))},e.GetSkewAngleEx=function(e,n,r,i,o,s,c){return e=a()(e),isNaN(e)||e<0||e>=t.HowManyImagesInBuffer?(u.D.Errors.IndexOutOfRange(t),u.D.isFunction(c)&&c(t.ErrorCode,t.ErrorString),!1):(e=t.getSWebTwain().GetSkewAngleEx(e,n,r,i,o),d.wrapperRet(t,e,s,c))},e.IsBlankImage=function(e){return e=a()(e),isNaN(e)||e<0||e>=t.HowManyImagesInBuffer?(u.D.Errors.IndexOutOfRange(t),!1):(e=t.getSWebTwain().IsBlankImage(e),d.setErrorString(t),e)},e.IsBlankImageEx=function(e,n,r,i,o,s){return e=a()(e),isNaN(e)||e<0||e>=t.HowManyImagesInBuffer?(u.D.Errors.IndexOutOfRange(t),!1):(e=t.getSWebTwain().IsBlankImageEx(e,n,r,i,o,s),d.setErrorString(t),e)},e.Mirror=function(e,n,r){return e=a()(e),isNaN(e)||e<0||e>=t.HowManyImagesInBuffer?(u.D.Errors.IndexOutOfRange(t),u.D.isFunction(r)&&r(t.ErrorCode,t.ErrorString),!1):(e=t.getSWebTwain().Mirror(e),d.wrapperRet(t,e,n,r))},e.OverlayRectangle=function(e,n,r,i,o,a,s){return t.getSWebTwain().OverlayRectangle(e,n,r,i,o,a,s),d.checkErrorString(t)},e.RemoveAllImages=function(){var e;return t.getSWebTwain().RemoveAllImages(),(e=d.checkErrorString(t))&&t.__innerRefreshImage(),t.Width=a()(t.Width)+2,e},e.RemoveAllSelectedImages=function(){var e;return t.getSWebTwain().RemoveAllSelectedImages(),(e=d.checkErrorString(t))&&t.__innerRefreshImage(),e},e.RemoveImage=function(e){return e=a()(e),isNaN(e)||e<0||e>=t.HowManyImagesInBuffer?(u.D.Errors.IndexOutOfRange(t),!1):(t.getSWebTwain().RemoveImage(e),d.checkErrorString(t))},e.MirrorAsync=function(e){return d.wrapperPromise(t,t.Mirror(e))},e.RemoveAllImagesAsync=function(){return d.wrapperPromise(t,t.RemoveAllImages())},e.RemoveAllSelectedImagesAsync=function(){return d.wrapperPromise(t,t.RemoveAllSelectedImages())},e.RemoveImageAsync=function(e){return d.wrapperPromise(t,t.RemoveImage(e))},e.Rotate=function(e,n,r,i,o){return e=a()(e),isNaN(e)||e<0||e>=t.HowManyImagesInBuffer?(u.D.Errors.IndexOutOfRange(t),u.D.isFunction(o)&&o(t.ErrorCode,t.ErrorString),!1):(e=t.getSWebTwain().Rotate(e,n,r),d.wrapperRet(t,e,i,o))},e.RotateEx=function(e,n,r,i,o,s){return e=a()(e),isNaN(e)||e<0||e>=t.HowManyImagesInBuffer?(u.D.Errors.IndexOutOfRange(t),u.D.isFunction(s)&&s(t.ErrorCode,t.ErrorString),!1):(e=t.getSWebTwain().RotateEx(e,n,r,i),d.wrapperRet(t,e,o,s))},e.RotateLeft=function(e,n,r){return e=a()(e),isNaN(e)||e<0||e>=t.HowManyImagesInBuffer?(u.D.Errors.IndexOutOfRange(t),u.D.isFunction(r)&&r(t.ErrorCode,t.ErrorString),!1):(e=t.getSWebTwain().RotateLeft(e),d.wrapperRet(t,e,n,r))},e.RotateRight=function(e,n,r){return e=a()(e),isNaN(e)||e<0||e>=t.HowManyImagesInBuffer?(u.D.Errors.IndexOutOfRange(t),u.D.isFunction(r)&&r(t.ErrorCode,t.ErrorString),!1):(e=t.getSWebTwain().RotateRight(e),d.wrapperRet(t,e,n,r))},e.ChangeImageSize=function(e,n,r,i,o,s){return e=a()(e),isNaN(e)||e<0||e>=t.HowManyImagesInBuffer?(u.D.Errors.IndexOutOfRange(t),u.D.isFunction(s)&&s(t.ErrorCode,t.ErrorString),!1):n<=0||r<=0?(u.D.Errors.InvalidWidthOrHeight(t),u.D.isFunction(s)&&s(t.ErrorCode,t.ErrorString),!1):(e=t.getSWebTwain().ChangeImageSize(e,n,r,i),d.wrapperRet(t,e,o,s))},e.Flip=function(e,n,r){return e=a()(e),isNaN(e)||e<0||e>=t.HowManyImagesInBuffer?(u.D.Errors.IndexOutOfRange(t),u.D.isFunction(r)&&r(t.ErrorCode,t.ErrorString),!1):(e=t.getSWebTwain().Flip(e),d.wrapperRet(t,e,n,r))},e.Crop=function(e,n,r,i,o,s,c){return e=a()(e),isNaN(e)||e<0||e>=t.HowManyImagesInBuffer?(u.D.Errors.IndexOutOfRange(t),u.D.isFunction(c)&&c(t.ErrorCode,t.ErrorString),!1):(e=t.getSWebTwain().Crop(e,n,r,i,o),d.wrapperRet(t,e,s,c))},e.CropToClipboard=function(e,n,r,i,o){return e=a()(e),isNaN(e)||e<0||e>=t.HowManyImagesInBuffer?(u.D.Errors.IndexOutOfRange(t),!1):(t.getSWebTwain().CropToClipboard(e,n,r,i,o),d.checkErrorString(t))},e.CutFrameToClipboard=function(e,n,r,i,o){return e=a()(e),isNaN(e)||e<0||e>=t.HowManyImagesInBuffer?(u.D.Errors.IndexOutOfRange(t),!1):(t.getSWebTwain().CutFrameToClipboard(e,n,r,i,o),d.checkErrorString(t))},e.CutToClipboard=function(e){return e=a()(e),isNaN(e)||e<0||e>=t.HowManyImagesInBuffer?(u.D.Errors.IndexOutOfRange(t),!1):(t.getSWebTwain().CutToClipboard(e),d.checkErrorString(t))},e.RotateAsync=function(e,n,r){return d.wrapperPromise(t,t.Rotate(e,n,r))},e.RotateExAsync=function(e,n,r,i){return d.wrapperPromise(t,t.RotateEx(e,n,r,i))},e.RotateLeftAsync=function(e){return d.wrapperPromise(t,t.RotateLeft(e))},e.RotateRightAsync=function(e){return d.wrapperPromise(t,t.RotateRight(e))},e.ChangeImageSizeAsync=function(e,n,r,i){return d.wrapperPromise(t,t.ChangeImageSize(e,n,r,i))},e.FlipAsync=function(e){return d.wrapperPromise(t,t.Flip(e))},e.CropAsync=function(e,n,r,i,o){return d.wrapperPromise(t,t.Crop(e,n,r,i,o))},e.CropToClipboardAsync=function(e,n,r,i,o){return d.wrapperPromise(t,t.CropToClipboard(e,n,r,i,o))},e.CutFrameToClipboardAsync=function(e,n,r,i,o){return d.wrapperPromise(t,t.CutFrameToClipboard(e,n,r,i,o))},e.CutToClipboardAsync=function(e){return d.wrapperPromise(t,t.CutToClipboard(e))},e.InvertAsync=function(e){return d.wrapperPromise(t,t.Invert(e))},e.Invert=function(e){return e=a()(e),isNaN(e)||e<0||e>=t.HowManyImagesInBuffer?u.D.Errors.IndexOutOfRange(t):u.D.Errors.ActiveXNotSupport(t),!1},e.SetDPI=function(e,n,r,i,o,s,c){return e=a()(e),isNaN(e)||e<0||e>=t.HowManyImagesInBuffer?(u.D.Errors.IndexOutOfRange(t),u.D.isFunction(c)&&c(t.ErrorCode,t.ErrorString),!1):(e=t.getSWebTwain().SetDPI(e,n,r,i,o),d.wrapperRet(t,e,s,c))},e.SetViewMode=function(e,n){return t.getSWebTwain().SetViewMode(e,n),d.checkErrorString(t)},e.GetViewModeH=function(){var e=t.getSWebTwain().GetViewModeH();return d.setErrorString(t),e},e.GetViewModeV=function(){var e=t.getSWebTwain().GetViewModeV();return d.setErrorString(t),e},e.MoveImage=function(e,n){return e=a()(e),n=a()(n),isNaN(e)||e<0||e>=t.HowManyImagesInBuffer||isNaN(n)||n<0||n>=t.HowManyImagesInBuffer?(u.D.Errors.IndexOutOfRange(t),!1):(t.getSWebTwain().MoveImage(e,n),d.checkErrorString(t))},e.SwitchImage=function(e,n){return e=a()(e),n=a()(n),isNaN(e)||e<0||e>=t.HowManyImagesInBuffer||isNaN(n)||n<0||n>=t.HowManyImagesInBuffer?(u.D.Errors.IndexOutOfRange(t),!1):(t.getSWebTwain().SwitchImage(e,n),d.checkErrorString(t))},e.Print=function(){return t.getSWebTwain().Print(),d.checkErrorString(t)},e.checkErrorString=function(){return d.isReturnSuccess(t)},e.FileExists=function(e){return e=d.replaceLocalFilename(e),e=t.getSWebTwain().FileExists(e),d.setErrorString(t),e},e.SaveAllAsMultiPageTIFF=function(e,n,r){return!!i(t,r)&&(e=d.replaceLocalFilename(e),e=t.getSWebTwain().SaveAllAsMultiPageTIFF(e),d.wrapperRet(t,e,n,r))},e.SaveAllAsPDF=function(e,n,r){return!!i(t,r)&&(e=d.replaceLocalFilename(e),e=t.getSWebTwain().SaveAllAsPDF(e),d.wrapperRet(t,e,n,r))},e.SaveAsBMP=function(e,n,r,i){return!!o(t,n,i)&&(e=d.replaceLocalFilename(e),e=t.getSWebTwain().SaveAsBMP(e,n),d.wrapperRet(t,e,r,i))},e.SaveAsJPEG=function(e,n,r,i){return!!o(t,n,i)&&(e=d.replaceLocalFilename(e),e=t.getSWebTwain().SaveAsJPEG(e,n),d.wrapperRet(t,e,r,i))},e.SaveAsPDF=function(e,n,r,i){return!!o(t,n,i)&&(e=d.replaceLocalFilename(e),e=t.getSWebTwain().SaveAsPDF(e,n),d.wrapperRet(t,e,r,i))},e.SaveAsPNG=function(e,n,r,i){return!!o(t,n,i)&&(e=d.replaceLocalFilename(e),e=t.getSWebTwain().SaveAsPNG(e,n),d.wrapperRet(t,e,r,i))},e.SaveAsTIFF=function(e,n,r,i){return!!o(t,n,i)&&(e=d.replaceLocalFilename(e),e=t.getSWebTwain().SaveAsTIFF(e,n),d.wrapperRet(t,e,r,i))},e.SaveSelectedImagesAsMultiPagePDF=function(e,n,r){return e=d.replaceLocalFilename(e),e=t.getSWebTwain().SaveSelectedImagesAsMultiPagePDF(e),d.wrapperRet(t,e,n,r)},e.SaveSelectedImagesAsMultiPageTIFF=function(e,n,r){return e=d.replaceLocalFilename(e),e=t.getSWebTwain().SaveSelectedImagesAsMultiPageTIFF(e),d.wrapperRet(t,e,n,r)},e.SaveSelectedImagesToBase64Binary=function(e,n){var r=t.getSWebTwain().SaveSelectedImagesToBase64Binary();return d.wrapperRet(t,r,e,n)},e.ShowFileDialog=function(e,n,r,i,o,a,s,u){return t.getSWebTwain().ShowFileDialog(e,n,r,i,o,a,s,u),d.checkErrorString(t)},e.FTPDownload=function(e,r,i,o){return!!n(o)&&((e=t.getSWebTwain().FTPDownload(e,r))&&u.D.License.isLTS()&&u.I.DWT.lcvrf(t),d.wrapperRet(t,e,i,o))},e.FTPDownloadDirectly=function(e,r,i,o,a){return!!n(a)&&(e=t.getSWebTwain().FTPDownloadDirectly(e,r,i),d.wrapperRet(t,e,o,a))},e.FTPDownloadEx=function(e,i,o,a,s){return!!n(s)&&(o!=u.I.DWT.EnumDWT_ImageType.IT_BMP&&o!=u.I.DWT.EnumDWT_ImageType.IT_JPG&&o!=u.I.DWT.EnumDWT_ImageType.IT_TIF&&o!=u.I.DWT.EnumDWT_ImageType.IT_PNG&&o!=u.I.DWT.EnumDWT_ImageType.IT_PDF&&o!=u.I.DWT.EnumDWT_ImageType.IT_J2K&&(o=-1),!!r(o,s)&&(e=t.getSWebTwain().FTPDownloadEx(e,i,o),d.wrapperRet(t,e,a,s)))},e.FTPUpload=function(e,r,i,o,a){return!!n(a)&&(e=t.getSWebTwain().FTPUpload(e,r,i),d.wrapperRet(t,e,o,a))},e.FTPUploadDirectly=function(e,r,i,o,a){return!!n(a)&&(e=t.getSWebTwain().FTPUploadDirectly(e,r,i),d.wrapperRet(t,e,o,a))},e.FTPUploadEx=function(e,r,i,o,a,s){return!!n(s)&&(e=t.getSWebTwain().FTPUploadEx(e,r,i,o),d.wrapperRet(t,e,a,s))},e.FTPUploadAllAsMultiPageTIFF=function(e,r,i,o){return!!n(o)&&(e=t.getSWebTwain().FTPUploadAllAsMultiPageTIFF(e,r),d.wrapperRet(t,e,i,o))},e.FTPUploadAllAsPDF=function(e,r,i,o){return!!n(o)&&(e=t.getSWebTwain().FTPUploadAllAsPDF(e,r),d.wrapperRet(t,e,i,o))},e.FTPUploadAsMultiPagePDF=function(e,n,r,i){return e=t.getSWebTwain().FTPUploadAsMultiPagePDF(e,n),d.wrapperRet(t,e,r,i)},e.FTPUploadAsMultiPageTIFF=function(e,n,r,i){return e=t.getSWebTwain().FTPUploadAsMultiPageTIFF(e,n),d.wrapperRet(t,e,r,i)},e.HTTPDownloadDirectly=function(e,r,i,o,a){return!!n(a)&&(e=t.getSWebTwain().HTTPDownloadDirectly(e,r,i),d.wrapperRet(t,e,o,a))},e.HTTPDownload=function(e,n,r,i){var o=d.getImageType(n);return t.HTTPDownloadEx(e,n,o,r,i)},e.HTTPDownloadEx=function(e,i,o,a,s){return!!n(s)&&(o!=u.I.DWT.EnumDWT_ImageType.IT_BMP&&o!=u.I.DWT.EnumDWT_ImageType.IT_JPG&&o!=u.I.DWT.EnumDWT_ImageType.IT_TIF&&o!=u.I.DWT.EnumDWT_ImageType.IT_PNG&&o!=u.I.DWT.EnumDWT_ImageType.IT_PDF&&o!=u.I.DWT.EnumDWT_ImageType.IT_J2K&&(o=-1),!!r(o,s)&&((e=t.getSWebTwain().HTTPDownloadEx(e,i,o))&&u.D.License.isLTS()&&u.I.DWT.lcvrf(t),d.wrapperRet(t,e,a,s)))},e.HTTPDownloadThroughGet=e.HTTPDownloadEx,e.HTTPUploadThroughPostDirectly=function(e,r,i,o,a,s){return!!n(s)&&(e=t.getSWebTwain().HTTPUploadThroughPostDirectly(e,r,i,o),d.wrapperRet(t,e,a,s,!0))},e.HTTPUploadThroughPost=function(e,n,r,i,o,a){return!u.D.isNumber(n)||isNaN(n)||n<-2?(u.D.Errors.IndexOutOfRange(t),u.D.isFunction(a)&&a(t.ErrorCode,t.ErrorString),!1):(e=t.getSWebTwain().HTTPUploadThroughPost(e,n,r,i),d.wrapperRet(t,e,o,a,!0))},e.HTTPUploadThroughPostEx=function(e,n,r,i,o,a,s){return!u.D.isNumber(n)||isNaN(n)||n<-2?(u.D.Errors.IndexOutOfRange(t),u.D.isFunction(s)&&s(t.ErrorCode,t.ErrorString),!1):(e=t.getSWebTwain().HTTPUploadThroughPostEx(e,n,r,i,o),d.wrapperRet(t,e,a,s,!0))},e.ClearAllHTTPFormField=function(){return t.getSWebTwain().ClearAllHTTPFormField(),d.checkErrorString(t)},e.SetHTTPFormField=function(e,n){return t.getSWebTwain().SetHTTPFormField(e,n),d.checkErrorString(t)},e.HTTPUploadAllThroughPostAsMultiPageTIFF=function(e,n,r,i,o){return e=t.getSWebTwain().HTTPUploadAllThroughPostAsMultiPageTIFF(e,n,r),d.wrapperRet(t,e,i,o,!0)},e.HTTPUploadThroughPostAsMultiPageTIFF=function(e,n,r,i,o){return e=t.getSWebTwain().HTTPUploadThroughPostAsMultiPageTIFF(e,n,r),d.wrapperRet(t,e,i,o,!0)},e.HTTPUploadAllThroughPostAsPDF=function(e,n,r,i,o){return e=t.getSWebTwain().HTTPUploadAllThroughPostAsPDF(e,n,r),d.wrapperRet(t,e,i,o,!0)},e.HTTPUploadThroughPostAsMultiPagePDF=function(e,n,r,i,o){return e=t.getSWebTwain().HTTPUploadThroughPostAsMultiPagePDF(e,n,r),d.wrapperRet(t,e,i,o,!0)},e.HTTPUploadThroughPutDirectly=function(e,n,r,i,o){return e=t.getSWebTwain().HTTPUploadThroughPutDirectly(e,n,r),d.wrapperRet(t,e,i,o)},e.HTTPUploadThroughPut=function(e,n,r,i,o){var a=d.getImageType(r);return t.HTTPUploadThroughPutEx(e,n,r,a,i,o)},e.HTTPUploadThroughPutEx=function(e,n,r,i,o,a){return e=t.getSWebTwain().HTTPUploadThroughPutEx(e,n,r,i),d.wrapperRet(t,e,o,a)},e.HTTPUploadAllThroughPutAsMultiPageTIFF=function(e,n,r,i){return t.HTTPUploadThroughPutEx(e,-1,n,2,r,i)},e.HTTPUploadThroughPutAsMultiPageTIFF=function(e,n,r,i){return t.HTTPUploadThroughPutEx(e,-2,n,2,r,i)},e.HTTPUploadAllThroughPutAsPDF=function(e,n,r,i){return t.HTTPUploadThroughPutEx(e,-1,n,4,r,i)},e.HTTPUploadThroughPutAsMultiPagePDF=function(e,n,r,i){return t.HTTPUploadThroughPutEx(e,-2,n,4,r,i)},e.ShowImageEditor=function(){return t.getSWebTwain().ShowImageEditor(),d.checkErrorString(t)},e.SetCookie=function(e){return t.getSWebTwain().SetCookie(e),d.checkErrorString(t)},e.LoadImageFromBase64Binary=function(e,i){return!!n()&&(i!=u.I.DWT.EnumDWT_ImageType.IT_BMP&&i!=u.I.DWT.EnumDWT_ImageType.IT_JPG&&i!=u.I.DWT.EnumDWT_ImageType.IT_TIF&&i!=u.I.DWT.EnumDWT_ImageType.IT_PNG&&i!=u.I.DWT.EnumDWT_ImageType.IT_PDF&&i!=u.I.DWT.EnumDWT_ImageType.IT_J2K&&(i=-1),!!r(i)&&(e=t.getSWebTwain().LoadImageFromBase64Binary(e,i),d.setErrorString(t),e))},e.SaveSelectedImagesToBytes=function(e,n){return e=t.getSWebTwain().SaveSelectedImagesToBytes(e,n),d.setErrorString(t),e},e.LoadImageFromBytes=function(e,i,o){return!!n()&&(o!=u.I.DWT.EnumDWT_ImageType.IT_BMP&&o!=u.I.DWT.EnumDWT_ImageType.IT_JPG&&o!=u.I.DWT.EnumDWT_ImageType.IT_TIF&&o!=u.I.DWT.EnumDWT_ImageType.IT_PNG&&o!=u.I.DWT.EnumDWT_ImageType.IT_PDF&&o!=u.I.DWT.EnumDWT_ImageType.IT_J2K&&(o=-1),!!r(o)&&(e=t.getSWebTwain().LoadImageFromBytes(e,i,o),d.setErrorString(t),e))},e.UnregisterEvent=function(e,n){return t.getSWebTwain().UnregisterEvent(e,n),d.checkErrorString(t)},e.SetImageWidth=function(e,n,r,i){return e=a()(e),isNaN(e)||e<0||e>=t.HowManyImagesInBuffer?(u.D.Errors.IndexOutOfRange(t),u.D.isFunction(i)&&i(t.ErrorCode,t.ErrorString),!1):(e=t.getSWebTwain().SetImageWidth(e,n),d.wrapperRet(t,e,r,i))},e.HTTPDownloadThroughPost=function(e,i,o,a,s){return!!n(s)&&(o!=u.I.DWT.EnumDWT_ImageType.IT_BMP&&o!=u.I.DWT.EnumDWT_ImageType.IT_JPG&&o!=u.I.DWT.EnumDWT_ImageType.IT_TIF&&o!=u.I.DWT.EnumDWT_ImageType.IT_PNG&&o!=u.I.DWT.EnumDWT_ImageType.IT_PDF&&o!=u.I.DWT.EnumDWT_ImageType.IT_J2K&&(o=-1),!!r(o,s)&&(e=t.getSWebTwain().HTTPDownloadThroughPost(e,i,o),d.wrapperRet(t,e,a,s)))},e.SetCustomDSDataEx=function(e){return t.getSWebTwain().SetCustomDSDataEx(e),d.checkErrorString(t)},e.SetCustomDSData=function(e){return t.getSWebTwain().SetCustomDSData(e),d.checkErrorString(t)},e.GetCustomDSDataEx=function(){var e=t.getSWebTwain().GetCustomDSDataEx();return d.setErrorString(t),e},e.GetCustomDSData=function(e){return e=t.getSWebTwain().GetCustomDSData(e),d.setErrorString(t),e},e.ChangeBitDepth=function(e,n,r){return e=a()(e),isNaN(e)||e<0||e>=t.HowManyImagesInBuffer?(u.D.Errors.IndexOutOfRange(t),!1):(t.getSWebTwain().ChangeBitDepth(e,n,r),d.checkErrorString(t))},e.ConvertToGrayScale=function(e,n,r){var i=a()(e);return isNaN(i)||i<0||i>=t.HowManyImagesInBuffer?(u.D.Errors.IndexOutOfRange(t),u.D.isFunction(r)&&r(t.ErrorCode,t.ErrorString),!1):(i=t.getSWebTwain().ConvertToGrayScale(e),d.wrapperRet(t,i,n,r))},e.ShowImageEditorEx=function(e,n,r,i,o){return t.getSWebTwain().ShowImageEditorEx(e,n,r,i,o),d.checkErrorString(t)},e.ClearTiffCustomTag=function(){return t.getSWebTwain().ClearTiffCustomTag(),d.checkErrorString(t)},e.SetTiffCustomTag=function(e,n,r){var i=+e;return u.I.Lib.isUndef(e)||u.I.Lib.isUndef(n)?(u.I.Lib.Errors.InvalidParameter(t),!1):i<=0||2147483647<i?(u.I.Lib.Errors.InvalidTiffTagError(t),!1):(t.getSWebTwain().SetTiffCustomTag(e,n,r),d.checkErrorString(t))},e.IsBlankImageExpress=function(e){return e=a()(e),isNaN(e)||e<0||e>=t.HowManyImagesInBuffer?(u.D.Errors.IndexOutOfRange(t),!1):(e=t.getSWebTwain().IsBlankImageExpress(e),d.setErrorString(t),e)},e._ChangeWidth=function(e){var n,r=document.getElementById(t._strDWTInnerContainerID);return(n=u.D.isString(e)&&0<e.length&&"%"===e.charAt(e.length-1)?e:n)||(e=a()(e))&&2<e&&(n=e-2+"px"),n&&(t._strWidth=n,t.getSWebTwain().style.width=n,r&&(r.style.width=n)),!0},e._ChangeHeight=function(e){var n,r=document.getElementById(t._strDWTInnerContainerID);return(n=u.D.isString(e)&&0<e.length&&"%"===e.charAt(e.length-1)?e:n)||(e=a()(e))&&(n=e+"px"),n&&(t._strHeight=n,t.getSWebTwain().style.height=n,r&&(r.style.height=n)),!0},e.SetSize=function(e,t){return this._ChangeWidth(e),this._ChangeHeight(t),!0},e.SetSelectedImageArea=function(e,n,r,i,o){return t.getSWebTwain().SetSelectedImageArea(e,n,r,i,o),d.checkErrorString(t)},e.SetVideoRotateMode=function(e){return t.getSWebTwain().SetVideoRotateMode(e),d.checkErrorString(t)},e.SetOpenSourceTimeout=function(e){return t.getSWebTwain().SetOpenSourceTimeout(e),d.checkErrorString(t)},e.SetHTTPHeader=function(e,t){return!1},e.GetImageURL=function(e,t,n){return""},e.GetImagePartURL=function(e){return e=a()(e),isNaN(e)||e<0||e>=t.HowManyImagesInBuffer?(u.D.Errors.IndexOutOfRange(t),""):(e=t.getSWebTwain().GetDIB(e),d.setErrorString(t),e)},e.GetLicenseInfo=function(e){try{var n,i=!1,o=(u.D.License.isLTS()?i=!0:t.getSWebTwain().ProductKey=e,t.getSWebTwain().GetLicenseInfo());d.checkErrorString(t)?((n=u.D.parse(o))&&n.message?(u.D.Errors.LicenseEmptyOrInvalid(t),t._errorString=n.message,n=void 0):i&&(n&&u.D.isArray(n.Detail)&&0<n.Detail.length&&u.I.DWT.lsexp(u.I.DWT.EnumInstance.dwt_desktop,n.Detail[0].ExpireDate),n.LTS=!0),t.__licenseInfo=(0,c.T)(n)):t.__licenseInfo=void 0}catch(r){t.__licenseInfo=void 0}return s().resolve(t.__licenseInfo)},e.LoadDibFromClipboard=function(e,n){var r=t.getSWebTwain().LoadDibFromClipboard();return r&&u.D.License.isLTS()&&u.I.DWT.lcvrf(t),d.wrapperRet(t,r,e,n)},e.LoadImage=function(e,r,i){return!!n(i)&&(e=d.replaceLocalFilename(e),(e=t.getSWebTwain().LoadImage(e))&&u.D.License.isLTS()&&u.I.DWT.lcvrf(t),d.wrapperRet(t,e,r,i))},e.LoadImageEx=function(e,i,o,a){return!!n(a)&&(i!=u.I.DWT.EnumDWT_ImageType.IT_BMP&&i!=u.I.DWT.EnumDWT_ImageType.IT_JPG&&i!=u.I.DWT.EnumDWT_ImageType.IT_TIF&&i!=u.I.DWT.EnumDWT_ImageType.IT_PNG&&i!=u.I.DWT.EnumDWT_ImageType.IT_PDF&&i!=u.I.DWT.EnumDWT_ImageType.IT_J2K&&(i=-1),!!r(i,a)&&(e=d.replaceLocalFilename(e),i==u.I.DWT.EnumDWT_ImageType.IT_ALL&&(i=-1),(e=t.getSWebTwain().LoadImageEx(e,i))&&u.D.License.isLTS()&&u.I.DWT.lcvrf(t),d.wrapperRet(t,e,o,a)))},e.EnableSource=function(e,n,r){return t.AcquireImage(e,n,r),d.checkErrorString(t)},e.AcquireImage=function(e,r,i){var o=t.getSWebTwain(),a=null,s=null,c=null;return u.D.isUndefined(i)&&(u.D.isFunction(e)&&u.D.isFunction(r)||u.D.isFunction(e)&&u.D.isUndefined(r)||u.D.isFunction(e)&&null==r||null==e&&u.D.isFunction(r))?(a=null,u.D.isFunction(e)&&(s=e),u.D.isFunction(r)&&(c=r)):(a=u.D.isUndefined(e)||null==e?{}:u.D.clone(e),u.D.isFunction(r)&&(s=function(){r(a)}),u.D.isFunction(i)&&(c=function(){i(a,t._errorCode,t._errorString)})),!!n(c)&&(null!=a&&(null!=(e=a.SelectSourceByIndex)&&void 0!==e&&(o.SelectSourceByIndex(e),o.CloseSource(),o.OpenSource()),null!=(e=a.IfShowUI)&&void 0!==e&&(o.IfShowUI=e),null!=(e=a.PixelType)&&void 0!==e&&(o.PixelType=e),null!=(e=a.Resolution)&&void 0!==e&&(o.Resolution=e),null!=(e=a.IfFeederEnabled)&&void 0!==e&&(o.IfFeederEnabled=e),null!=(e=a.IfDuplexEnabled)&&void 0!==e&&(o.IfDuplexEnabled=e),null!=(e=a.IfDisableSourceAfterAcquire)&&void 0!==e&&(o.IfDisableSourceAfterAcquire=e)),t.getSWebTwain().RegisterEvent("OnPostTransferAsync",(function(e){var n;e&&u.D.isString(e)&&(n=u.D.parse(e)),u.D.isFunction(t.__OnPostTransferAsync)&&t.__OnPostTransferAsync(n)})),t.getSWebTwain().RegisterEvent("OnPostAllTransfers",(function(){d.checkErrorString(t)?(u.D.License.isLTS()&&u.I.DWT.lcvrf(t),u.D.isFunction(s)&&s()):u.D.isFunction(c)&&c(t._errorCode,t._errorString),u.D.isFunction(t.__OnPostAllTransfers)&&t.__OnPostAllTransfers()})),o.AcquireImage(),d.checkErrorString(t))},e.GenerateURLForUploadData=function(e,n,r){return d.wrapperRet(t,!0,n,r)},e._innerFun=function(e,n,r){var i=t.getSWebTwain();return"function"==typeof(e=i[e])?e.apply(i,n):e},e.ActiveUI=function(e,t){},e.startScan=function(){return new(s())((function(e,t){}))},e.IndexToImageID=function(e){return e},e.ImageIDToIndex=function(e){return e},e.first=function(){return 0<t.HowManyImagesInBuffer&&(t.CurrentImageIndexInBuffer=0,t.__innerRefreshImage()),!0},e.previous=function(){var e;return 0<t.HowManyImagesInBuffer&&0<(e=t.CurrentImageIndexInBuffer)&&(t.CurrentImageIndexInBuffer=e-1,t.__innerRefreshImage()),!0},e.next=function(){var e,n=t.HowManyImagesInBuffer;return 0<n&&0<=(e=t.CurrentImageIndexInBuffer)&&e<n-1&&(t.CurrentImageIndexInBuffer=e+1,t.__innerRefreshImage()),!0},e.last=function(){var e=t.HowManyImagesInBuffer;return 0<e&&(t.CurrentImageIndexInBuffer=e-1,t.__innerRefreshImage()),!0},e.isUsingActiveX=function(){return!0},e.show=function(){return e.ShowImageEditor()},e.SetLTSInfo=function(e,n){return t.getSWebTwain().SetLTSInfo(e,n)},e.EnableBuffer=function(e){return t.getSWebTwain().Encrypt(e,0)},e.GetBuffer=function(e){return t.getSWebTwain().GetBuffer(e)},e.GetUUID=function(){return t.getSWebTwain().GetUUID()},e.__OnDispatchThumbnailEvt=function(t,n,r){1==r?u.D.isFunction(e["__"+t+"_Thumbnail"])&&("OnMouseClick"==t||"OnMouseDoubleClick"==t||"OnMouseMove"==t||"OnMouseWheel"==t||"OnKeyDown"==t?e["__"+t+"_Thumbnail"]():e["__"+t+"_Thumbnail"](n)):u.D.isFunction(e["__"+t])&&e["__"+t](n)},e._OnImageAreaSelected=function(t,n,r,i,o,a){var s="OnImageAreaSelected";1==a?u.D.isFunction(e["__"+s+"_Thumbnail"])&&e["__"+s+"_Thumbnail"](t,n,r,i,o):u.D.isFunction(e["__"+s])&&e["__"+s](t,n,r,i,o)},function(e,t){(u.D.isFunction(e["__"+t])||u.D.isFunction(e["__"+t+"_Thumbnail"]))&&("OnImageAreaSelected"==t?e.getSWebTwain().RegisterEvent(t,e._OnImageAreaSelected):e.getSWebTwain().RegisterEvent(t,(function(n,r){return e.__OnDispatchThumbnailEvt(t,n,r)})))});e.getSourceCount=function(e){return u.D.Errors.ActiveXNotSupport(t),u.D.Promise.resolve(t.getSWebTwain().SourceCount)},e.GetSourceCountAsync=function(e){return u.D.Errors.ActiveXNotSupport(t),u.D.Promise.resolve(t.getSWebTwain().SourceCount)},e._resetErr=function(){this._errorCode=0,this._errorString="";var e=u.I.DWT.licenseException;e.code=0,e.message=""},e._setConvertModeInner=function(e){return!(!u.D.License.checkProductKey(t,{Core:!0})||(e=+e,t._resetErr(),isNaN(e)?(u.D.Errors.ParameterCannotEmpty(t),1):1!=e&&2!=e&&3!=e&&4!=e?(u.D.Errors.InvalidValue(t),1):(t._pdfRealConvertMode=2==(t._pdfConvertMode=e)||u.D.License.hasPDFRProductKey(t)?e:2,0)))},e._setConvertMode=function(e){return!!t._setConvertModeInner(e)&&(t.getSWebTwain().SetPDFConvertMode(t._pdfRealConvertMode),!(2==t._pdfRealConvertMode&&1==t._pdfConvertMode||2==t._pdfRealConvertMode&&4==t._pdfConvertMode)||(u.D.Errors.LicenseNoPDF(t),!1))},e.__innerRefreshImage=function(){var e=t.HowManyImagesInBuffer;0<e&&t.__OnRefreshUI&&t.__OnRefreshUI(t.CurrentImageIndexInBuffer,e)},e.__OnBitmapChangedEx=function(n,r,i,o,a){-1<a&&e._blts&&(1==r||2==r)&&(r=u.I.DWT.lgct(a),u.D.isFunction(t.__OnLtsverify)&&t.__OnLtsverify(r,1))},e._attachEvents=function(){var e=t.getSWebTwain(),n=u.I.Lib.detect.getVersionArray(String(t.VersionInfo));n.length<=2||n[0]<9||9==n[0]&&n[1]<=2||(""!=t.__OnPostTransfer&&e.RegisterEvent("OnPostTransfer",t.__OnPostTransfer),""!=t.__OnPostAllTransfers&&e.RegisterEvent("OnPostAllTransfers",t.__OnPostAllTransfers),""!=t.__OnPostLoad&&e.RegisterEvent("OnPostLoad",t.__OnPostLoad),l(t,"OnMouseClick"),l(t,"OnImageAreaSelected"),l(t,"OnTopImageInTheViewChanged"),l(t,"OnImageAreaDeSelected"),l(t,"OnMouseDoubleClick"),l(t,"OnMouseRightClick"),l(t,"OnMouseMove"),""!=t.__OnGetFilePath&&e.RegisterEvent("OnGetFilePath",t.__OnGetFilePath),""!=t.__OnAfterOperate&&e.RegisterEvent("OnAfterOperate",t.__OnAfterOperate),""!=t.__OnBeforeOperate&&e.RegisterEvent("OnBeforeOperate",t.__OnBeforeOperate),""!=t.__OnOperateStatus&&e.RegisterEvent("OnOperateStatus",t.__OnOperateStatus),""!=t.__OnBitmapChanged&&e.RegisterEvent("OnBitmapChanged",t.__OnBitmapChanged),""!=t.__OnBitmapChangedEx&&e.RegisterEvent("OnBitmapChangedEx",t.__OnBitmapChangedEx),""!=t.__OnPreAllTransfers&&e.RegisterEvent("OnPreAllTransfers",t.__OnPreAllTransfers),""!=t.__OnPreTransfer&&e.RegisterEvent("OnPreTransfer",t.__OnPreTransfer),""!=t.__OnSourceUIClose&&e.RegisterEvent("OnSourceUIClose",t.__OnSourceUIClose),""!=t.__OnTransferCancelled&&e.RegisterEvent("OnTransferCancelled",t.__OnTransferCancelled),""!=t.__OnTransferError&&e.RegisterEvent("OnTransferError",t.__OnTransferError),""!=t.__OnInternetTransferPercentage&&e.RegisterEvent("OnInternetTransferPercentage",t.__OnInternetTransferPercentage),""!=t.__OnInternetTransferPercentageEx&&e.RegisterEvent("OnInternetTransferPercentageEx",t.__OnInternetTransferPercentageEx),l(t,"OnMouseWheel"),l(t,"OnKeyDown"),l(t,"OnPaintDone"))}},u.D.noControl=function(e){if(u.I.DWT.IfUseEmbeddedDownloadNoticeForActiveX)if(u.D.isFunction(u.D.detect.onNoControl))u.D.detect.onNoControl(u.D.get(e._containerID),e._strWidth,e._strHeight);else for(var t=u.D.detect.arySTwains,n=0;n<t.length;n++){var r=t[n];s=a=void 0,(s="")==(a=u.D.get((o=r)._strDWTNonInstallInnerContainerID)).innerHTML&&(o=u.I.DWT.ActiveXInstallWithCAB&&l.bIE?["<div style='display: block; border:solid black 1px; text-align:center; width:",o._strWidth,";height:",o._strHeight,"'>","<ul style='padding-top:100px;list-style:none'>","<li>The Component is not installed</li>","<li>You need to download and install the ActiveX to use this sample.</li>","<li>Please follow the instructions in the information bar.</li>","</ul></div>"].join(""):(location,s=u.D.product.bHTML5Edition||l.bIE?u.I.dcp.getDSPath():l.bWin?u.D.product.getMSIPath():u.D.product.getPKGPath(),["<div style='display: block; border:solid black 1px; text-align:center; width:",o._strWidth,";height:",o._strHeight,"'>","<ul style='padding-top:100px;list-style:none'>","<li>The Component is not installed</li>","<li>You need to download and install to use this sample.</li>","<li>Please click the below link to download it.</li>","<li><a href='",s,"'>Download</a></li>","</ul></div>"].join("")),a.innerHTML=o),u.D.show(r._strDWTNonInstallInnerContainerID),u.D.hide(r._strDWTInnerContainerID)}else{window,e=u.D.product;var i="";u.D.isFunction(u.I.OnWebTwainNotFoundOnWindowsCallback)&&(i=l.bIE||e.bHTML5Edition?u.I.dcp.getDSPath():e.getMSIPath(),u.I.OnWebTwainNotFoundOnWindowsCallback(e.name,i,e.bHTML5Edition,l.bIE,l.bSafari,u.D.detect.ssl,u.D.env.strIEVersion,!1))}var o,a,s}},1695:function(e,t,n){n.d(t,{D:function(){return i},I:function(){return r}});var r=window.Dynamsoft,i=window.Dynamsoft.Lib},1255:function(e,t,n){n.d(t,{$E:function(){return c},$n:function(){return i},Bm:function(){return a},CH:function(){return r},LX:function(){return d},Ne:function(){return o},Sf:function(){return l},UJ:function(){return s},Vn:function(){return h},oU:function(){return u}}),t=n(8066),t=n.n(t);var r="17",i="3",o="0",a="0531",s=1,u=7,c=3,l={JSVersion:n=t()(t=t()(n="".concat(r,",").concat(i,",")).call(n,o,",")).call(t,a),ServerVersionInfo:n,ServerLinuxVersionInfo:n,ServerMacVersionInfo:n,ActiveXVersion:n,PdfVersion:"11.4.0.0531",ProductName:t=0==o?"Dynamic Web TWAIN "+[r,i].join("."):"Dynamic Web TWAIN "+[r,i,o].join("."),Containers:[],DynamicContainers:[],ContainerMap:{},Trial:!1,ResourcesPath:"Resources",Debug:!1,IfUpdateService:!1,AutoLoad:!0,ReConnectToService:!0,OnWebTwainReady:!1,OnWebTwainNotFound:!1,OnWebTwainOldPluginNotAllowed:!1,OnWebTwainNeedUpgrade:!1,OnWebTwainNeedUpgradeWebJavascript:!1,OnWebTwainInitMessage:!1,ViewerJSIntegerited:!0,ActiveXInstallWithCAB:!1,IfUseActiveXForIE10Plus:!1,IfInstallDWTModuleWithZIP:!1,IfUseEmbeddedDownloadNoticeForActiveX:!1,IfCheckDCP:!1,IfDisableDefaultSettings:!1,OnWebTwainWillInit:!1,IfAddMD5InUploadHeader:!1,IfAlwaysFocusOnPopupWindow:!0,IfConfineMaskWithinTheViewer:!0,IfUseWSPool:!1,UseDefaultViewer:!0,fetchOptions:{mode:"cors",credentials:"same-origin"},HideTrialMessage:!1,CheckCertExpired:!0,ConnectWithSocket:!1,SSLPort:18623,Port:18622,handshakeCode:void 0,organizationID:void 0,licenseServer:void 0,sessionPassword:"",ltsDebug:!1,showLoadingMsgDialog:!0},d={URL:"",UpdateDaysBeforeExpired:30},h={loaderBarClassName:"ds-dwt-loaderBar",loaderBarBackgroundColor:"",loaderBarSource:Z.navInfoSync.bIE?Z.Lib.loaderBarSourceIE:Z.Lib.loaderBarSource,errorMessages:{ERR_MODULE_NOT_INSTALLED:"Error: The Dynamic Web TWAIN module is not installed.",ERR_BROWSER_NOT_SUPPORT:"Error: This browser is currently not supported.",ERR_CreateID_MustNotInContainers:"Error: Duplicate ContainerId detected for creating Dynamic Web TWAIN objects, please check and modify.",ERR_CreateID_WebTwainIdDuplicated:"Error: Duplicate id detected for creating Dynamic Web TWAIN objects, please check and modify.",ERR_CreateID_NotContainer:"Error: The ID of the DIV for creating the new DWT object is invalid.",ERR_CreateID_WasmEnvNotLoaded:"Error: The wasm env not loaded.",ERR_DWT_NOT_DOWNLOADED:"Error: Failed to download the Dynamic Web TWAIN module.",limitReachedForZoomIn:"Error: You have reached the limit for zooming in",limitReachedForZoomOut:"Error: You have reached the limit for zooming out",insufficientParas:"Error: Not enough parameters.",invalidAngle:"Error: The angle you entered is invalid.",invalidIndex:"Error: The index you entered is invalid.",invalidHeightOrWidth:"Error: The height or width you entered is invalid.",imageNotChanged:"Error: You have not changed the current image."},generalMessages:{checkingDWTVersion:"Checking WebTwain version ...",updatingDService:"Dynamsoft Service is updating ...",downloadingDWTModule:"Downloading the Dynamic Web TWAIN module.",refreshNeeded:"Please REFRESH your browser.",downloadNeeded:"Please download and install the Dynamic Web TWAIN.",DWTmoduleLoaded:"The Dynamic Web TWAIN module is loaded."},customProgressText:{upload:"Uploading...",download:"Downloading...",load:"Loading...",decode:"Processing...",decodeTIFF:"Processing tiff...",decodePDF:"Processing pdf...",encode:"Processing...",encodeTIFF:"Processing tiff...",encodePDF:"Processing pdf...",canvasLoading:"Loading ..."},buttons:{titles:{previous:"Previous Image",next:"Next Image",print:"Print Image",scan:"Scan Documents",load:"Load Local Images",rotateleft:"Rotate Left",rotate:"Rotate",rotateright:"Rotate Right",deskew:"Deskew",crop:"Crop Selected Area",cut:"Cut Selected Area",changeimagesize:"Change Image Size",flip:"Flip Image",mirror:"Mirror Image",zoomin:"Zoom In",originalsize:"Show Original Size",zoomout:"Zoom Out",stretch:"Stretch Mode",fit:"Fit Window",fitw:"Fit Horizontally",fith:"Fit Vertically",hand:"Hand Mode",rectselect:"Select Mode",zoom:"Click to Zoom In",restore:"Restore Original Image",save:"Save Changes",close:"Close the Editor",removeall:"Remove All Images",removeselected:"Remove All Selected Images"},bShowAllButtons:!0,visibility:{scan:!0,load:!0,print:!0,removeall:!0,removeselected:!0,rotateleft:!0,rotate:!0,rotateright:!0,deskew:!0,crop:!0,cut:!0,changeimagesize:!0,flip:!0,mirror:!0,zoomin:!0,originalsize:!0,zoomout:!0,stretch:!0,fit:!0,fitw:!0,fith:!0,hand:!0,rectselect:!0,zoom:!0,restore:!0,save:!0,close:!0}},dialogText:{dlgRotateAnyAngle:["Angle :","Interpolation:","Keep size","  OK  ","Cancel"],dlgChangeImageSize:["New Height :","New Width :","Interpolation method:","  OK  ","Cancel"],saveChangedImage:["You have changed the image. Do you want to keep the change(s)?","  Yes  ","  No  "],selectSource:["Select Source:","Select","Cancel","There is no source available!"]}}},4130:function(e,t,n){n.d(t,{R:function(){return i}});var r=1;function i(){return++r}},1188:function(e,t,n){n.d(t,{An:function(){return u},dv:function(){return c},yN:function(){return s}}),t=n(5238);var r=n.n(t),i=(t=Z.Lib).isString,o=t.isArray,a=t.each;function s(e,t){var n;i(t)?(e.push('"'),e.push(t),e.push('"')):o(t)?(n=!0,e.push("["),a(t,(function(t){n?n=!1:e.push(","),s(e,t)})),e.push("]")):e.push(void 0===t?'""':t)}function u(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t}function c(){for(var e,t,n=[],i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return 0<o.length&&(1===o.length?(e=o[0],n.push("["),s(n,e),n.push("]")):2===o.length?(e=o[0],t=o[1],n.push("["),s(n,e),n.push(","),s(n,t),n.push("]")):s(n,r()(Array.prototype).call(o))),n.join("")}},5316:function(e,t,n){n=n(7784),e.exports=n},93:function(e,t,n){n=n(8196),e.exports=n},2772:function(e,t,n){n=n(8065),e.exports=n},327:function(e,t,n){n=n(5247),e.exports=n},3688:function(e,t,n){n=n(1955),e.exports=n},5684:function(e,t,n){n=n(9373),e.exports=n},682:function(e,t,n){n=n(1022),e.exports=n},729:function(e,t,n){n=n(7145),e.exports=n},4234:function(e,t,n){n=n(2073),e.exports=n},900:function(e,t,n){n=n(2348),e.exports=n},5598:function(e,t,n){n=n(5178),e.exports=n},6279:function(e,t,n){n=n(6361),e.exports=n},7679:function(e,t,n){n=n(8933),e.exports=n},2271:function(e,t,n){n=n(4471),e.exports=n},3536:function(e,t,n){n=n(1910),e.exports=n},9565:function(e,t,n){n=n(6507),e.exports=n},5012:function(e,t,n){n=n(3059),e.exports=n},8690:function(e,t,n){n=n(6670),e.exports=n},2679:function(e,t,n){n=n(6877),e.exports=n},4116:function(e,t,n){n=n(4888),e.exports=n},5626:function(e,t,n){n=n(7460),e.exports=n},4670:function(e,t,n){n=n(1895),e.exports=n},4942:function(e,t,n){n=n(3474),e.exports=n},5057:function(e,t,n){n=n(7989),e.exports=n},281:function(e,t,n){n=n(2547),e.exports=n},31:function(e,t,n){n=n(6509),e.exports=n},7877:function(e,t,n){n=n(7641),e.exports=n},1718:function(e,t,n){n=n(2010),e.exports=n},9002:function(e,t,n){n=n(3726),e.exports=n},5367:function(e,t,n){n(5906),n=n(5703),e.exports=n("Array").concat},2383:function(e,t,n){n(1501),n=n(5703),e.exports=n("Array").filter},8700:function(e,t,n){n(9076),n=n(5703),e.exports=n("Array").indexOf},9728:function(e,t,n){n(8071),n=n(5703),e.exports=n("Array").lastIndexOf},4900:function(e,t,n){n(186),n=n(5703),e.exports=n("Array").slice},8209:function(e,t,n){n(8611),n=n(5703),e.exports=n("Array").splice},1103:function(e,t,n){n(5160),n=n(4058),e.exports=n.Date.now},7700:function(e,t,n){n(3381),n=n(5703),e.exports=n("Function").bind},6246:function(e,t,n){var r=n(7046),i=n(7700),o=Function.prototype;e.exports=function(e){var t=e.bind;return e===o||r(o,e)&&t===o.bind?i:t}},6043:function(e,t,n){var r=n(7046),i=n(5367),o=Array.prototype;e.exports=function(e){var t=e.concat;return e===o||r(o,e)&&t===o.concat?i:t}},1727:function(e,t,n){var r=n(7046),i=n(7796),o=String.prototype;e.exports=function(e){var t=e.endsWith;return"string"==typeof e||e===o||r(o,e)&&t===o.endsWith?i:t}},2480:function(e,t,n){var r=n(7046),i=n(2383),o=Array.prototype;e.exports=function(e){var t=e.filter;return e===o||r(o,e)&&t===o.filter?i:t}},4570:function(e,t,n){var r=n(7046),i=n(8700),o=Array.prototype;e.exports=function(e){var t=e.indexOf;return e===o||r(o,e)&&t===o.indexOf?i:t}},7564:function(e,t,n){var r=n(7046),i=n(9728),o=Array.prototype;e.exports=function(e){var t=e.lastIndexOf;return e===o||r(o,e)&&t===o.lastIndexOf?i:t}},9279:function(e,t,n){var r=n(7046),i=n(9615),o=String.prototype;e.exports=function(e){var t=e.replaceAll;return"string"==typeof e||e===o||r(o,e)&&t===o.replaceAll?i:t}},9601:function(e,t,n){var r=n(7046),i=n(4900),o=Array.prototype;e.exports=function(e){var t=e.slice;return e===o||r(o,e)&&t===o.slice?i:t}},8339:function(e,t,n){var r=n(7046),i=n(8209),o=Array.prototype;e.exports=function(e){var t=e.splice;return e===o||r(o,e)&&t===o.splice?i:t}},1611:function(e,t,n){var r=n(7046),i=n(3269),o=String.prototype;e.exports=function(e){var t=e.startsWith;return"string"==typeof e||e===o||r(o,e)&&t===o.startsWith?i:t}},2774:function(e,t,n){var r=n(7046),i=n(3348),o=String.prototype;e.exports=function(e){var t=e.trim;return"string"==typeof e||e===o||r(o,e)&&t===o.trim?i:t}},4426:function(e,t,n){n(2619);var r=n(4058),i=n(9730);r.JSON||(r.JSON={stringify:JSON.stringify}),e.exports=function(e,t,n){return i(r.JSON.stringify,null,arguments)}},5254:function(e,t,n){n(6950);var r=n(4058).Object;e.exports=function(e,t){return r.create(e,t)}},8171:function(e,t,n){n(6450);var r=n(4058).Object,i=e.exports=function(e,t,n){return r.defineProperty(e,t,n)};r.defineProperty.sham&&(i.sham=!0)},3966:function(e,t,n){n(7405),n=n(4058),e.exports=n.Object.getPrototypeOf},8494:function(e,t,n){n(1724),n=n(4058),e.exports=n.Object.keys},3065:function(e,t,n){n(108),n=n(4058),e.exports=n.Object.setPrototypeOf},7579:function(e,t,n){n(9718),n=n(4058),e.exports=n.parseFloat},8524:function(e,t,n){n(4038),n=n(4058),e.exports=n.parseInt},2956:function(e,t,n){n(7627),n(6274),n(5967),n(8881),n(4560),n(7206),n(4349),n(7971),n=n(4058),e.exports=n.Promise},4983:function(e,t,n){n(7453),n=n(4058),e.exports=n.Reflect.construct},7796:function(e,t,n){n(1293),n=n(5703),e.exports=n("String").endsWith},9615:function(e,t,n){n(7091),n(3475),n(6226),n=n(5703),e.exports=n("String").replaceAll},3269:function(e,t,n){n(4761),n=n(5703),e.exports=n("String").startsWith},3348:function(e,t,n){n(6371),n=n(5703),e.exports=n("String").trim},7473:function(e,t,n){n(5906),n(5967),n(5824),n(8555),n(2615),n(1732),n(5903),n(1825),n(8394),n(5915),n(1766),n(2737),n(9911),n(4315),n(3131),n(4714),n(659),n(9120),n(5327),n(1502),n=n(4058),e.exports=n.Symbol},4227:function(e,t,n){n(6274),n(5967),n(7971),n(1825),n=n(1477),e.exports=n.f("iterator")},2304:function(e,t,n){n(6274),n(5967),n(4334),n=n(4058),e.exports=n.WeakMap},9567:function(e,t,n){n(6274),n(5967),n(1773),n=n(4058),e.exports=n.WeakSet},2626:function(e,t,n){e.exports=n(6526)},4122:function(e,t,n){e.exports=n(9097)},1086:function(e,t,n){e.exports=n(898)},7895:function(e,t,n){e.exports=n(8675)},4442:function(e,t,n){e.exports=n(1675)},9447:function(e,t,n){e.exports=n(628)},5376:function(e,t,n){e.exports=n(8460)},6769:function(e,t,n){e.exports=n(3893)},1493:function(e,t,n){e.exports=n(7088)},1777:function(e,t,n){e.exports=n(2792)},5319:function(e,t,n){e.exports=n(8744)},5425:function(e,t,n){e.exports=n(6384)},2740:function(e,t,n){e.exports=n(9821)},6094:function(e,t,n){e.exports=n(6467)},3685:function(e,t,n){e.exports=n(621)},4303:function(e,t,n){e.exports=n(8688)},3799:function(e,t,n){e.exports=n(2093)},5122:function(e,t,n){e.exports=n(5383)},1645:function(e,t,n){e.exports=n(5796)},3103:function(e,t,n){e.exports=n(6309)},9531:function(e,t,n){e.exports=n(2050)},856:function(e,t,n){e.exports=n(6733)},1490:function(e,t,n){e.exports=n(6170)},4803:function(e,t,n){e.exports=n(1051)},6600:function(e,t,n){e.exports=n(2201)},9759:function(e,t,n){e.exports=n(7398)},7740:function(e,t,n){e.exports=n(3085)},8714:function(e,t,n){e.exports=n(3463)},2790:function(e,t,n){e.exports=n(5069)},6526:function(e,t,n){n=n(5316),e.exports=n},9097:function(e,t,n){n=n(93),e.exports=n},898:function(e,t,n){n=n(2772),e.exports=n},8675:function(e,t,n){n=n(327),e.exports=n},1675:function(e,t,n){n=n(3688),e.exports=n},628:function(e,t,n){n=n(5684),e.exports=n},8460:function(e,t,n){n=n(682),e.exports=n},3893:function(e,t,n){n=n(729),e.exports=n},7088:function(e,t,n){n=n(4234),e.exports=n},2792:function(e,t,n){n=n(900),e.exports=n},8744:function(e,t,n){n=n(5598),e.exports=n},6384:function(e,t,n){n=n(6279),e.exports=n},9821:function(e,t,n){n=n(7679),e.exports=n},6467:function(e,t,n){n=n(2271),e.exports=n},621:function(e,t,n){n=n(3536),e.exports=n},8688:function(e,t,n){n=n(9565),e.exports=n},2093:function(e,t,n){n=n(5012),e.exports=n},5383:function(e,t,n){n=n(8690),e.exports=n},5796:function(e,t,n){n=n(2679),e.exports=n},6309:function(e,t,n){n=n(4116),e.exports=n},2050:function(e,t,n){var r=n(5626);n(9731),n(5708),n(14),n(8731),e.exports=r},6733:function(e,t,n){n=n(4670),e.exports=n},6170:function(e,t,n){n=n(4942),e.exports=n},1051:function(e,t,n){n=n(5057),e.exports=n},2201:function(e,t,n){var r=n(281);n(8783),n(3975),n(5799),n(1943),n(6774),n(5414),n(620),n(6172),e.exports=r},7398:function(e,t,n){n=n(31),e.exports=n},3085:function(e,t,n){n=n(7877),e.exports=n},3463:function(e,t,n){var r=n(1718);n(7971),n(6442),n(6207),n(3215),n(4629),n(4055),e.exports=r},5069:function(e,t,n){var r=n(9002);n(7971),n(5896),n(5501),n(2511),n(3309),e.exports=r},4883:function(e,t,n){var r=n(7475),i=n(9826),o=TypeError;e.exports=function(e){if(r(e))return e;throw o(i(e)+" is not a function")}},174:function(e,t,n){var r=n(4284),i=n(9826),o=TypeError;e.exports=function(e){if(r(e))return e;throw o(i(e)+" is not a constructor")}},1851:function(e,t,n){var r=n(7475),i=String,o=TypeError;e.exports=function(e){if("object"==typeof e||r(e))return e;throw o("Can't set "+i(e)+" as a prototype")}},8479:function(e){e.exports=function(){}},5743:function(e,t,n){var r=n(7046),i=TypeError;e.exports=function(e,t){if(r(t,e))return e;throw i("Incorrect invocation")}},6059:function(e,t,n){var r=n(941),i=String,o=TypeError;e.exports=function(e){if(r(e))return e;throw o(i(e)+" is not an object")}},7135:function(e,t,n){n=n(5981),e.exports=n((function(){var e;"function"==typeof ArrayBuffer&&(e=new ArrayBuffer(8),Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8}))}))},1354:function(e,t,n){var r=n(6843),i=n(8834),o=n(9678),a=n(5196),s=n(6782),u=n(4284),c=n(623),l=n(5449),d=n(3476),h=n(2902),g=Array;e.exports=function(e){var t,n,f,m,p,_,v,I=o(e),y=(e=u(this),1<(v=arguments.length)?arguments[1]:void 0),b=void 0!==y,D=0;if(b&&(y=r(y,2<v?arguments[2]:void 0)),!(v=h(I))||this===g&&s(v))for(t=c(I),n=e?new this(t):g(t);D<t;D++)_=b?y(I[D],D):I[D],l(n,D,_);else for(p=(m=d(I,v)).next,n=e?new this:[];!(f=i(p,m)).done;D++)_=b?a(m,y,[f.value,D],!0):f.value,l(n,D,_);return n.length=D,n}},1692:function(e,t,n){var r=n(4529),i=n(9413),o=n(623);e.exports={includes:(n=function(e){return function(t,n,a){var s,u=r(t),c=o(u),l=i(a,c);if(e&&n!=n){for(;l<c;)if((s=u[l++])!=s)return!0}else for(;l<c;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}})(!0),indexOf:n(!1)}},3610:function(e,t,n){var r=n(6843),i=n(5329),o=n(7026),a=n(9678),s=n(623),u=n(4692),c=i([].push);e.exports={forEach:(n=function(e){var t=1==e,n=2==e,i=3==e,l=4==e,d=6==e,h=7==e,g=5==e||d;return function(f,m,p,_){for(var v,I,y=a(f),b=o(y),D=r(m,p),T=s(b),S=0,w=(m=_||u,t?m(f,T):n||h?m(f,0):void 0);S<T;S++)if((g||S in b)&&(I=D(v=b[S],S,y),e))if(t)w[S]=I;else if(I)switch(e){case 3:return!0;case 5:return v;case 6:return S;case 2:c(w,v)}else switch(e){case 4:return!1;case 7:c(w,v)}return d?-1:i||l?l:w}})(0),map:n(1),filter:n(2),some:n(3),every:n(4),find:n(5),findIndex:n(6),filterReject:n(7)}},247:function(e,t,n){var r=n(9730),i=n(4529),o=n(2435),a=n(623),s=(n=n(4194),Math.min),u=[].lastIndexOf,c=!!u&&1/[1].lastIndexOf(1,-0)<0;n=n("lastIndexOf"),e.exports=c||!n?function(e){if(c)return r(u,this,arguments)||0;var t=i(this),n=a(t),l=n-1;for((l=1<arguments.length?s(l,o(arguments[1])):l)<0&&(l=n+l);0<=l;l--)if(l in t&&t[l]===e)return l||0;return-1}:u},568:function(e,t,n){var r=n(5981),i=n(9813),o=n(3385),a=i("species");e.exports=function(e){return 51<=o||!r((function(){var t=[];return(t.constructor={})[a]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},4194:function(e,t,n){var r=n(5981);e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){return 1},1)}))}},5790:function(e,t,n){var r=n(9413),i=n(623),o=n(5449),a=Array,s=Math.max;e.exports=function(e,t,n){for(var u=i(e),c=r(t,u),l=r(void 0===n?u:n,u),d=a(s(l-c,0)),h=0;c<l;c++,h++)o(d,h,e[c]);return d.length=h,d}},3765:function(e,t,n){n=n(5329),e.exports=n([].slice)},1388:function(e,t,n){var r=n(5790),i=Math.floor,o=function(e,t){var n=e.length,a=i(n/2);if(n<8){for(var s,u,c=e,l=t,d=c.length,h=1;h<d;){for(s=c[u=h];u&&0<l(c[u-1],s);)c[u]=c[--u];u!==h++&&(c[u]=s)}return c}for(var g=e,f=o(r(e,0,a),t),m=o(r(e,a),t),p=t,_=f.length,v=m.length,I=0,y=0;I<_||y<v;)g[I+y]=I<_&&y<v?p(f[I],m[y])<=0?f[I++]:m[y++]:I<_?f[I++]:m[y++];return g};e.exports=o},5693:function(e,t,n){var r=n(1052),i=n(4284),o=n(941),a=n(9813)("species"),s=Array;e.exports=function(e){var t;return r(e)&&(i(t=e.constructor)&&(t===s||r(t.prototype))||o(t)&&null===(t=t[a]))&&(t=void 0),void 0===t?s:t}},4692:function(e,t,n){var r=n(5693);e.exports=function(e,t){return new(r(e))(0===t?0:t)}},5196:function(e,t,n){var r=n(6059),o=n(7609);e.exports=function(e,t,n,a){try{return a?t(r(n)[0],n[1]):t(n)}catch(i){o(e,"throw",i)}}},1385:function(e,t,n){var r=n(9813)("iterator"),i=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){i=!0}};a[r]=function(){return this},Array.from(a,(function(){throw 2}))}catch(l){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o={};o[r]=function(){return{next:function(){return{done:n=!0}}}},e(o)}catch(l){}return n}},2532:function(e,t,n){var r=(n=n(5329))({}.toString),i=n("".slice);e.exports=function(e){return i(r(e),8,-1)}},9697:function(e,t,n){var r=n(2885),i=n(7475),o=n(2532),a=n(9813)("toStringTag"),s=Object,u="Arguments"==o(function(){return arguments}());e.exports=r?o:function(e){var t;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(t=function(e,t){try{return e[t]}catch(n){}}(e=s(e),a))?t:u?o(e):"Object"==(t=o(e))&&i(e.callee)?"Arguments":t}},8694:function(e,t,n){n=n(5329);var r=Error,i=n("".replace),o=(n=String(r("zxcasd").stack),/\n\s*at [^:]*:[^\n]*/),a=o.test(n);e.exports=function(e,t){if(a&&"string"==typeof e&&!r.prepareStackTrace)for(;t--;)e=i(e,o,"");return e}},7622:function(e,t,n){var r=n(8834),i=n(4883),o=n(6059);e.exports=function(){for(var e=o(this),t=i(e.add),n=0,a=arguments.length;n<a;n++)r(t,e,arguments[n]);return e}},8984:function(e,t,n){var r=n(8834),i=n(4883),o=n(6059);e.exports=function(){for(var e,t=o(this),n=i(t.delete),a=!0,s=0,u=arguments.length;s<u;s++)e=r(n,t,arguments[s]),a=a&&e;return!!a}},3590:function(e,t,n){var r=n(6843),i=n(8834),o=n(4883),a=n(174),s=n(3091),u=[].push;e.exports=function(e){var t,n,c,l,d=arguments.length,h=1<d?arguments[1]:void 0;return a(this),(t=void 0!==h)&&o(h),null==e?new this:(n=[],t?(c=0,l=r(h,2<d?arguments[2]:void 0),s(e,(function(e){i(u,n,l(e,c++))}))):s(e,u,{that:n}),new this(n))}},5226:function(e,t,n){var r=n(3765);e.exports=function(){return new this(r(arguments))}},8850:function(e,t,n){var r=n(5329),i=n(4380),o=n(1647).getWeakData,a=n(6059),s=n(941),u=n(5743),c=n(3091),l=n(3610),d=n(953),h=(n=n(5402)).set,g=n.getterFor,f=l.find,m=l.findIndex,p=r([].splice),_=0,v=function(e){return e.frozen||(e.frozen=new I)},I=function(){this.entries=[]},y=function(e,t){return f(e.entries,(function(e){return e[0]===t}))};I.prototype={get:function(e){if(e=y(this,e))return e[1]},has:function(e){return!!y(this,e)},set:function(e,t){var n=y(this,e);n?n[1]=t:this.entries.push([e,t])},delete:function(e){var t=m(this.entries,(function(t){return t[0]===e}));return~t&&p(this.entries,t,1),!!~t}},e.exports={getConstructor:function(e,t,n,r){var l=(e=e((function(e,i){u(e,l),h(e,{type:t,id:_++,frozen:void 0}),null!=i&&c(i,e[r],{that:e,AS_ENTRIES:n})}))).prototype,f=g(t),m=function(e,t,n){var r=f(e),i=o(a(t),!0);return!0===i?v(r).set(t,n):i[r.id]=n,e};return i(l,{delete:function(e){var t=f(this);if(!s(e))return!1;var n=o(e);return!0===n?v(t).delete(e):n&&d(n,t.id)&&delete n[t.id]},has:function(e){var t=f(this);if(!s(e))return!1;var n=o(e);return!0===n?v(t).has(e):n&&d(n,t.id)}}),i(l,n?{get:function(e){var t,n=f(this);if(s(e))return!0===(t=o(e))?v(n).get(e):t?t[n.id]:void 0},set:function(e,t){return m(this,e,t)}}:{add:function(e){return m(this,e,!0)}}),e}}},4683:function(e,t,n){var r=n(6887),i=n(1899),o=n(1647),a=n(5981),s=n(2029),u=n(3091),c=n(5743),l=n(7475),d=n(941),h=n(904),g=n(5988).f,f=n(3610).forEach,m=n(5746),p=(n=n(5402)).set,_=n.getterFor;e.exports=function(e,t,n){var v,I,y,b=-1!==e.indexOf("Map"),D=-1!==e.indexOf("Weak"),T=b?"set":"add",S=i[e],w=S&&S.prototype,C={};return m&&l(S)&&(D||w.forEach&&!a((function(){(new S).entries().next()})))?(I=(v=t((function(t,n){p(c(t,I),{type:e,collection:new S}),null!=n&&u(n,t[T],{that:t,AS_ENTRIES:b})}))).prototype,y=_(e),f(["add","clear","delete","forEach","get","has","set","keys","values","entries"],(function(e){var t="add"==e||"set"==e;e in w&&(!D||"clear"!=e)&&s(I,e,(function(n,r){var i=y(this).collection;return t||!D||d(n)?(n=i[e](0===n?0:n,r),t?this:n):"get"==e&&void 0}))})),D||g(I,"size",{configurable:!0,get:function(){return y(this).collection.size}})):(v=n.getConstructor(t,e,b,T),o.enable()),h(v,e,!1,!0),C[e]=v,r({global:!0,forced:!0},C),D||n.setStrong(v,e,b),v}},3489:function(e,t,n){var r=n(953),i=n(1136),o=n(9677),a=n(5988);e.exports=function(e,t,n){for(var s=i(t),u=a.f,c=o.f,l=0;l<s.length;l++){var d=s[l];r(e,d)||n&&r(n,d)||u(e,d,c(t,d))}}},7772:function(e,t,n){var r=n(9813)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,"/./"[e](t)}catch(g){}}return!1}},4160:function(e,t,n){n=n(5981),e.exports=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},1046:function(e,t,n){var r=n(5143).IteratorPrototype,i=n(9290),o=n(1887),a=n(904),s=n(2077),u=function(){return this};e.exports=function(e,t,n,c){return t+=" Iterator",e.prototype=i(r,{next:o(+!c,n)}),a(e,t,!1,!0),s[t]=u,e}},2029:function(e,t,n){var r=n(5746),i=n(5988),o=n(1887);e.exports=r?function(e,t,n){return i.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},1887:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},5449:function(e,t,n){var r=n(3894),i=n(5988),o=n(1887);e.exports=function(e,t,n){(t=r(t))in e?i.f(e,t,o(0,n)):e[t]=n}},9202:function(e,t,n){var r=n(5988);e.exports=function(e,t,n){return r.f(e,t,n)}},5929:function(e,t,n){var r=n(2029);e.exports=function(e,t,n,i){return i&&i.enumerable?e[t]=n:r(e,t,n),e}},4380:function(e,t,n){var r=n(5929);e.exports=function(e,t,n){for(var i in t)n&&n.unsafe&&e[i]?e[i]=t[i]:r(e,i,t[i],n);return e}},5609:function(e,t,n){var r=n(1899),i=Object.defineProperty;e.exports=function(e,t){try{i(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},7771:function(e,t,n){var r=n(6887),i=n(8834),o=n(2529),a=n(9417),s=n(7475),u=n(1046),c=n(249),l=n(8929),d=n(904),h=n(2029),g=n(5929),f=n(9813),m=n(2077),p=(n=n(5143),a.PROPER),_=a.CONFIGURABLE,v=n.IteratorPrototype,I=n.BUGGY_SAFARI_ITERATORS,y=f("iterator"),b="values",D=function(){return this};e.exports=function(e,t,n,a,f,T,S){u(n,t,a),a=function(e){if(e===f&&x)return x;if(!I&&e in P)return P[e];switch(e){case"keys":case b:case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}};var w,C,E=t+" Iterator",M=!1,P=e.prototype,A=P[y]||P["@@iterator"]||f&&P[f],x=!I&&A||a(f),R="Array"==t&&P.entries||A;if(R&&(e=c(R.call(new e)))!==Object.prototype&&e.next&&(o||c(e)===v||(l?l(e,v):s(e[y])||g(e,y,D)),d(e,E,!0,!0),o&&(m[E]=D)),p&&f==b&&A&&A.name!==b&&(!o&&_?h(P,"name",b):(M=!0,x=function(){return i(A,this)})),f)if(w={values:a(b),keys:T?x:a("keys"),entries:a("entries")},S)for(C in w)!I&&!M&&C in P||g(P,C,w[C]);else r({target:t,proto:!0,forced:I||M},w);return o&&!S||P[y]===x||g(P,y,x,{name:f}),m[t]=x,w}},6349:function(e,t,n){var r=n(4058),i=n(953),o=n(1477),a=n(5988).f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});i(t,e)||a(t,e,{value:o.f(e)})}},5863:function(e,t,n){var r=n(9826),i=TypeError;e.exports=function(e,t){if(!delete e[t])throw i("Cannot delete property "+r(t)+" of "+r(e))}},5746:function(e,t,n){n=n(5981),e.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},1333:function(e,t,n){var r=n(1899),i=(n=n(941),r.document),o=n(i)&&n(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},6796:function(e){var t=TypeError;e.exports=function(e){if(9007199254740991<e)throw t("Maximum allowed index exceeded");return e}},3281:function(e){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},3321:function(e){e.exports="object"==typeof window&&"object"!=typeof Deno},4470:function(e,t,n){var r=n(2861);n=n(1899),e.exports=/ipad|iphone|ipod/i.test(r)&&void 0!==n.Pebble},2749:function(e,t,n){n=n(2861),e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(n)},6049:function(e,t,n){var r=n(2532);n=n(1899),e.exports="process"==r(n.process)},8045:function(e,t,n){n=n(2861),e.exports=/web0s(?!.*chrome)/i.test(n)},2861:function(e,t,n){n=n(626),e.exports=n("navigator","userAgent")||""},3385:function(e,t,n){var r,i,o=n(1899),a=(n=n(2861),o.process);o=o.Deno,!(i=(o=(a=a&&a.versions||o&&o.version)&&a.v8)?0<(r=o.split("."))[0]&&r[0]<4?1:+(r[0]+r[1]):i)&&n&&(!(r=n.match(/Edge\/(\d+)/))||74<=r[1])&&(r=n.match(/Chrome\/(\d+)/))&&(i=+r[1]),e.exports=i},5703:function(e,t,n){var r=n(4058);e.exports=function(e){return r[e+"Prototype"]}},6759:function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},8780:function(e,t,n){var r=n(5981),i=n(1887);e.exports=!r((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",i(1,7)),7!==e.stack)}))},6887:function(e,t,n){var r=n(1899),i=n(9730),o=n(5329),a=n(7475),s=n(9677).f,u=n(7252),c=n(4058),l=n(6843),d=n(2029),h=n(953);e.exports=function(e,t){var n,g,f,m,p,_=e.target,v=e.global,I=e.stat,y=e.proto,b=v?r:I?r[_]:(r[_]||{}).prototype,D=v?c:c[_]||d(c,_,{})[_],T=D.prototype;for(n in t)m=!u(v?n:_+(I?".":"#")+n,e.forced)&&b&&h(b,n),f=D[n],m&&(p=e.dontCallGetSet?(p=s(b,n))&&p.value:b[n]),g=m&&p?p:t[n],m&&typeof f==typeof g||(m=e.bind&&m?l(g,r):e.wrap&&m?function(e){var t=function(n,r,o){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(n);case 2:return new e(n,r)}return new e(n,r,o)}return i(e,this,arguments)};return t.prototype=e.prototype,t}(g):y&&a(g)?o(g):g,(e.sham||g&&g.sham||f&&f.sham)&&d(m,"sham",!0),d(D,n,m),y&&(h(c,f=_+"Prototype")||d(c,f,{}),d(c[f],n,g),e.real&&T&&!T[n]&&d(T,n,g)))}},5981:function(e){e.exports=function(e){try{return!!e()}catch(t){return!0}}},5602:function(e,t,n){n=n(5981),e.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},9730:function(e,t,n){n=n(8285);var r=Function.prototype,i=r.apply,o=r.call;e.exports="object"==typeof Reflect&&Reflect.apply||(n?o.bind(i):function(){return o.apply(i,arguments)})},6843:function(e,t,n){var r=n(5329),i=n(4883),o=n(8285),a=r(r.bind);e.exports=function(e,t){return i(e),void 0===t?e:o?a(e,t):function(){return e.apply(t,arguments)}}},8285:function(e,t,n){n=n(5981),e.exports=!n((function(){var e=(function(){}).bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},8308:function(e,t,n){var r=n(5329),i=n(4883),o=n(941),a=n(953),s=n(3765),u=(n=n(8285),Function),c=r([].concat),l=r([].join),d={};e.exports=n?u.bind:function(e){var t=i(this),n=t.prototype,r=s(arguments,1),h=function(){var n=c(r,s(arguments));if(this instanceof h){var i=t,o=n.length,g=n;if(!a(d,o)){for(var f=[],m=0;m<o;m++)f[m]="a["+m+"]";d[o]=u("C,a","return new C("+l(f,",")+")")}return d[o](i,g)}return t.apply(e,n)};return o(n)&&(h.prototype=n),h}},8834:function(e,t,n){n=n(8285);var r=Function.prototype.call;e.exports=n?r.bind(r):function(){return r.apply(r,arguments)}},9417:function(e,t,n){var r=n(5746),i=(n=n(953),Function.prototype),o=r&&Object.getOwnPropertyDescriptor,a=(n=n(i,"name"))&&"something"===(function(){}).name;r=n&&(!r||o(i,"name").configurable),e.exports={EXISTS:n,PROPER:a,CONFIGURABLE:r}},5329:function(e,t,n){n=n(8285);var r=Function.prototype,i=r.call,o=n&&r.bind.bind(i,i);e.exports=n?function(e){return e&&o(e)}:function(e){return e&&function(){return i.apply(e,arguments)}}},626:function(e,t,n){var r=n(4058),i=n(1899),o=n(7475),a=function(e){return o(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?a(r[e])||a(i[e]):r[e]&&r[e][t]||i[e]&&i[e][t]}},2902:function(e,t,n){var r=n(9697),i=n(4229),o=n(2077),a=n(9813)("iterator");e.exports=function(e){if(null!=e)return i(e,a)||i(e,"@@iterator")||o[r(e)]}},3476:function(e,t,n){var r=n(8834),i=n(4883),o=n(6059),a=n(9826),s=n(2902),u=TypeError;e.exports=function(e,t){var n=arguments.length<2?s(e):t;if(i(n))return o(r(n,e));throw u(a(e)+" is not iterable")}},4229:function(e,t,n){var r=n(4883);e.exports=function(e,t){return null==(t=e[t])?void 0:r(t)}},4342:function(e,t,n){var r=n(5329),i=n(9678),o=Math.floor,a=r("".charAt),s=r("".replace),u=r("".slice),c=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,l=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,r,d,h){var g=n+e.length,f=r.length,m=l;return void 0!==d&&(d=i(d),m=c),s(h,m,(function(i,s){var c;switch(a(s,0)){case"$":return"$";case"&":return e;case"`":return u(t,0,n);case"'":return u(t,g);case"<":c=d[u(s,1,-1)];break;default:var l,h=+s;if(0==h)return i;if(f<h)return 0!==(l=o(h/10))&&l<=f?void 0===r[l-1]?a(s,1):r[l-1]+a(s,1):i;c=r[h-1]}return void 0===c?"":c}))}},1899:function(e,t,n){var r=function(e){return e&&e.Math==Math&&e};e.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof q&&q)||r("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},953:function(e,t,n){var r=n(5329),i=n(9678),o=r({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return o(i(e),t)}},7748:function(e){e.exports={}},3146:function(e,t,n){var r=n(1899);e.exports=function(e,t){var n=r.console;n&&n.error&&(1==arguments.length?n.error(e):n.error(e,t))}},5463:function(e,t,n){n=n(626),e.exports=n("document","documentElement")},2840:function(e,t,n){var r=n(5746),i=n(5981),o=n(1333);e.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},7026:function(e,t,n){var r=n(5329),i=n(5981),o=n(2532),a=Object,s=r("".split);e.exports=i((function(){return!a("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?s(e,""):a(e)}:a},1302:function(e,t,n){var r=n(5329),i=n(7475),o=(n=n(3030),r(Function.toString));i(n.inspectSource)||(n.inspectSource=function(e){return o(e)}),e.exports=n.inspectSource},3794:function(e,t,n){var r=n(941),i=n(2029);e.exports=function(e,t){r(t)&&"cause"in t&&i(e,"cause",t.cause)}},1647:function(e,t,n){var r=n(6887),i=n(5329),o=n(7748),a=n(941),s=n(953),u=n(5988).f,c=n(946),l=n(684),d=n(1584),h=n(9418),g=n(5602),f=!1,m=h("meta"),p=0,_=function(e){u(e,m,{value:{objectID:"O"+p++,weakData:{}}})},v=e.exports={enable:function(){v.enable=function(){},f=!0;var e=c.f,t=i([].splice),n={};n[m]=1,e(n).length&&(c.f=function(n){for(var r=e(n),i=0,o=r.length;i<o;i++)if(r[i]===m){t(r,i,1);break}return r},r({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:l.f}))},fastKey:function(e,t){if(!a(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!s(e,m)){if(!d(e))return"F";if(!t)return"E";_(e)}return e[m].objectID},getWeakData:function(e,t){if(!s(e,m)){if(!d(e))return!0;if(!t)return!1;_(e)}return e[m].weakData},onFreeze:function(e){return g&&f&&d(e)&&!s(e,m)&&_(e),e}};o[m]=!0},5402:function(e,t,n){var r,i,o,a,s,u,c,l,d=n(8019),h=n(1899),g=n(5329),f=n(941),m=n(2029),p=n(953),_=n(3030),v=n(4262),I=(n=n(7748),"Object already initialized"),y=h.TypeError;h=h.WeakMap,c=d||_.state?(r=_.state||(_.state=new h),i=g(r.get),o=g(r.has),a=g(r.set),s=function(e,t){if(o(r,e))throw new y(I);return t.facade=e,a(r,e,t),t},u=function(e){return i(r,e)||{}},function(e){return o(r,e)}):(n[l=v("state")]=!0,s=function(e,t){if(p(e,l))throw new y(I);return t.facade=e,m(e,l,t),t},u=function(e){return p(e,l)?e[l]:{}},function(e){return p(e,l)}),e.exports={set:s,get:u,has:c,enforce:function(e){return c(e)?u(e):s(e,{})},getterFor:function(e){return function(t){if(f(t)&&(t=u(t)).type===e)return t;throw y("Incompatible receiver, "+e+" required")}}}},6782:function(e,t,n){var r=n(9813),i=n(2077),o=r("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||a[o]===e)}},1052:function(e,t,n){var r=n(2532);e.exports=Array.isArray||function(e){return"Array"==r(e)}},7475:function(e){e.exports=function(e){return"function"==typeof e}},4284:function(e,t,n){var r=n(5329),i=n(5981),o=n(7475),a=n(9697),s=n(626),u=n(1302),c=function(){},l=[],d=s("Reflect","construct"),h=/^\s*(?:class|function)\b/,g=r(h.exec),f=!h.exec(c),m=function(e){if(!o(e))return!1;try{return d(c,l,e),!0}catch(t){return!1}};(n=function(e){if(!o(e))return!1;switch(a(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return f||!!g(h,u(e))}catch(t){return!0}}).sham=!0,e.exports=!d||i((function(){var e;return m(m.call)||!m(Object)||!m((function(){e=!0}))||e}))?n:m},7252:function(e,t,n){var r=n(5981),i=n(7475),o=/#|\.prototype\./,a=(n=function(e,t){return(e=s[a(e)])==c||e!=u&&(i(t)?r(t):!!t)}).normalize=function(e){return String(e).replace(o,".").toLowerCase()},s=n.data={},u=n.NATIVE="N",c=n.POLYFILL="P";e.exports=n},941:function(e,t,n){var r=n(7475);e.exports=function(e){return"object"==typeof e?null!==e:r(e)}},2529:function(e){e.exports=!0},685:function(e,t,n){var r=n(941),i=n(2532),o=n(9813)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},6664:function(e,t,n){var r=n(626),i=n(7475),o=n(7046),a=(n=n(2302),Object);e.exports=n?function(e){return"symbol"==typeof e}:function(e){var t=r("Symbol");return i(t)&&o(t.prototype,a(e))}},3091:function(e,t,n){var r=n(6843),i=n(8834),o=n(6059),a=n(9826),s=n(6782),u=n(623),c=n(7046),l=n(3476),d=n(2902),h=n(7609),g=TypeError,f=function(e,t){this.stopped=e,this.result=t},m=f.prototype;e.exports=function(e,t,n){var p,_,v,y,b,D,T=!(!n||!n.AS_ENTRIES),S=!(!n||!n.IS_ITERATOR),w=!(!n||!n.INTERRUPTED),C=r(t,n&&n.that),E=function(e){return p&&h(p,"normal",e),new f(!0,e)},M=function(e){return T?(o(e),w?C(e[0],e[1],E):C(e[0],e[1])):w?C(e,E):C(e)};if(S)p=e;else{if(!(n=d(e)))throw g(a(e)+" is not iterable");if(s(n)){for(_=0,v=u(e);_<v;_++)if((y=M(e[_]))&&c(m,y))return y;return new f(!1)}p=l(e,n)}for(b=p.next;!(D=i(b,p)).done;){try{y=M(D.value)}catch(I){h(p,"throw",I)}if("object"==typeof y&&y&&c(m,y))return y}return new f(!1)}},7609:function(e,t,n){var r=n(8834),i=n(6059),o=n(4229);e.exports=function(e,t,n){var a,s;i(e);try{if(!(a=o(e,"return"))){if("throw"===t)throw n;return n}a=r(a,e)}catch(d){s=!0,a=d}if("throw"===t)throw n;if(s)throw a;return i(a),n}},5143:function(e,t,n){var r,i,o=n(5981),a=n(7475),s=n(9290),u=n(249),c=n(5929),l=n(9813),d=(n=n(2529),l("iterator"));l=!1,[].keys&&("next"in(i=[].keys())?(i=u(u(i)))!==Object.prototype&&(r=i):l=!0),null==r||o((function(){var e={};return r[d].call(e)!==e}))?r={}:n&&(r=s(r)),a(r[d])||c(r,d,(function(){return this})),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:l}},2077:function(e){e.exports={}},623:function(e,t,n){var r=n(3057);e.exports=function(e){return r(e.length)}},8721:function(e,t,n){var r=n(8834),i=n(4883),o=n(6059);e.exports=function(e,t){var n=o(this),a=i(n.get),s=i(n.has),u=i(n.set);return s=r(s,n,e)&&"update"in t?t.update(r(a,n,e),e,n):t.insert(e,n),r(u,n,e,s),s}},716:function(e,t,n){var r=n(8834),i=n(4883),o=n(7475),a=n(6059),s=TypeError;e.exports=function(e,t){var n,u=a(this),c=i(u.get),l=i(u.has),d=i(u.set),h=2<arguments.length?arguments[2]:void 0;if(o(t)||o(h))return r(l,u,e)?(n=r(c,u,e),o(t)&&(n=t(n),r(d,u,e,n))):o(h)&&(n=h(),r(d,u,e,n)),n;throw s("At least one callback required")}},5331:function(e){var t=Math.ceil,n=Math.floor;e.exports=Math.trunc||function(e){return(0<(e=+e)?n:t)(e)}},6132:function(e,t,n){var r,i,o,a,s,u,c,l=n(1899),d=n(6843),h=n(9677).f,g=n(2941).set,f=n(2749),m=n(4470),p=n(8045),_=n(6049),v=(n=l.MutationObserver||l.WebKitMutationObserver,l.document),I=l.process,y=l.Promise;(h=(h=h(l,"queueMicrotask"))&&h.value)||(r=function(){var e,t;for(_&&(e=I.domain)&&e.exit();i;){t=i.fn,i=i.next;try{t()}catch(n){throw i?a():o=void 0,n}}o=void 0,e&&e.enter()},a=f||_||p||!n||!v?!m&&y&&y.resolve?((f=y.resolve(void 0)).constructor=y,c=d(f.then,f),function(){c(r)}):_?function(){I.nextTick(r)}:(g=d(g,l),function(){g(r)}):(s=!0,u=v.createTextNode(""),new n(r).observe(u,{characterData:!0}),function(){u.data=s=!s})),e.exports=h||function(e){e={fn:e,next:void 0},o&&(o.next=e),i||(i=e,a()),o=e}},5366:function(e,t,n){n=n(2497),e.exports=n&&!!Symbol.for&&!!Symbol.keyFor},2497:function(e,t,n){var r=n(3385);n=n(5981),e.exports=!!Object.getOwnPropertySymbols&&!n((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},8468:function(e,t,n){var r=n(5981),i=n(9813),o=n(2529),a=i("iterator");e.exports=!r((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,r){t.delete("b"),n+=r+e})),o&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},8019:function(e,t,n){var r=n(1899),i=n(7475);n=n(1302),e.exports=i(r=r.WeakMap)&&/native code/.test(n(r))},9520:function(e,t,n){var r=n(4883),i=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)};e.exports.f=function(e){return new i(e)}},4649:function(e,t,n){var r=n(5803);e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:r(e)}},344:function(e,t,n){var r=n(685),i=TypeError;e.exports=function(e){if(r(e))throw i("The method doesn't accept regular expressions");return e}},1942:function(e,t,n){var r=n(1899),i=n(5981),o=n(5329),a=n(5803),s=n(4853).trim,u=(n=n(3483),o("".charAt)),c=r.parseFloat,l=(o=r.Symbol)&&o.iterator;r=1/c(n+"-0")!=-1/0||l&&!i((function(){c(Object(l))})),e.exports=r?function(e){e=s(a(e));var t=c(e);return 0===t&&"-"==u(e,0)?-0:t}:c},9806:function(e,t,n){var r=n(1899),i=n(5981),o=n(5329),a=n(5803),s=n(4853).trim,u=(n=n(3483),r.parseInt),c=(r=r.Symbol)&&r.iterator,l=/^[+-]?0x/i,d=o(l.exec);r=8!==u(n+"08")||22!==u(n+"0x16")||c&&!i((function(){u(Object(c))})),e.exports=r?function(e,t){return e=s(a(e)),u(e,t>>>0||(d(l,e)?16:10))}:u},4420:function(e,t,n){var r=n(5746),i=n(5329),o=n(8834),a=n(5981),s=n(4771),u=n(7857),c=n(6760),l=n(9678),d=n(7026),h=Object.assign,g=Object.defineProperty,f=i([].concat);e.exports=!h||a((function(){if(r&&1!==h({b:1},h(g({},"a",{enumerable:!0,get:function(){g(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach((function(e){t[e]=e})),7!=h({},e)[n]||s(h({},t)).join("")!=i}))?function(e,t){for(var n=l(e),i=arguments.length,a=1,h=u.f,g=c.f;a<i;)for(var m,p=d(arguments[a++]),_=h?f(s(p),h(p)):s(p),v=_.length,I=0;I<v;)m=_[I++],r&&!o(g,p,m)||(n[m]=p[m]);return n}:h},9290:function(e,t,n){var r,i=n(6059),o=n(9938),a=n(6759),s=n(7748),u=n(5463),c=n(1333),l=(n=n(4262),"prototype"),d="script",h=n("IE_PROTO"),g=function(){},f=function(e){return"<"+d+">"+e+"</"+d+">"},m=function(){try{r=new ActiveXObject("htmlfile")}catch(i){}m="undefined"==typeof document||document.domain&&r?function(e){e.write(f("")),e.close();var t=e.parentWindow.Object;return e=null,t}(r):(e=c("iframe"),t="java"+d+":",e.style.display="none",u.appendChild(e),e.src=String(t),(t=e.contentWindow.document).open(),t.write(f("document.F=Object")),t.close(),t.F);for(var e,t,n=a.length;n--;)delete m[l][a[n]];return m()};s[h]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(g[l]=i(e),n=new g,g[l]=null,n[h]=e):n=m(),void 0===t?n:o.f(n,t)}},9938:function(e,t,n){var r=n(5746),i=n(3937),o=n(5988),a=n(6059),s=n(4529),u=n(4771);t.f=r&&!i?Object.defineProperties:function(e,t){a(e);for(var n,r=s(t),i=u(t),c=i.length,l=0;l<c;)o.f(e,n=i[l++],r[n]);return e}},5988:function(e,t,n){var r=n(5746),i=n(2840),o=n(3937),a=n(6059),s=n(3894),u=TypeError,c=Object.defineProperty,l=Object.getOwnPropertyDescriptor,d="enumerable",h="configurable",g="writable";t.f=r?o?function(e,t,n){var r;return a(e),t=s(t),a(n),"function"==typeof e&&"prototype"===t&&"value"in n&&g in n&&!n[g]&&(r=l(e,t))&&r[g]&&(e[t]=n.value,n={configurable:(h in n?n:r)[h],enumerable:(d in n?n:r)[d],writable:!1}),c(e,t,n)}:c:function(e,t,n){if(a(e),t=s(t),a(n),i)try{return c(e,t,n)}catch(r){}if("get"in n||"set"in n)throw u("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},9677:function(e,t,n){var r=n(5746),i=n(8834),o=n(6760),a=n(1887),s=n(4529),u=n(3894),c=n(953),l=n(2840),d=Object.getOwnPropertyDescriptor;t.f=r?d:function(e,t){if(e=s(e),t=u(t),l)try{return d(e,t)}catch(n){}if(c(e,t))return a(!i(o.f,e,t),e[t])}},684:function(e,t,n){var r=n(2532),i=n(4529),o=n(946).f,a=n(5790),s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){if(!s||"Window"!=r(e))return o(i(e));try{return o(e)}catch(t){return a(s)}}},946:function(e,t,n){var r=n(5629),i=n(6759).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},7857:function(e,t){t.f=Object.getOwnPropertySymbols},249:function(e,t,n){var r=n(953),i=n(7475),o=n(9678),a=n(4262),s=(n=n(4160),a("IE_PROTO")),u=Object,c=u.prototype;e.exports=n?u.getPrototypeOf:function(e){if(e=o(e),r(e,s))return e[s];var t=e.constructor;return i(t)&&e instanceof t?t.prototype:e instanceof u?c:null}},1584:function(e,t,n){var r=n(5981),i=n(941),o=n(2532),a=n(7135),s=Object.isExtensible;n=r((function(){s(1)})),e.exports=n||a?function(e){return!!i(e)&&(!a||"ArrayBuffer"!=o(e))&&(!s||s(e))}:s},7046:function(e,t,n){n=n(5329),e.exports=n({}.isPrototypeOf)},5629:function(e,t,n){var r=n(5329),i=n(953),o=n(4529),a=n(1692).indexOf,s=n(7748),u=r([].push);e.exports=function(e,t){var n,r=o(e),c=0,l=[];for(n in r)!i(s,n)&&i(r,n)&&u(l,n);for(;t.length>c;)!i(r,n=t[c++])||~a(l,n)||u(l,n);return l}},4771:function(e,t,n){var r=n(5629),i=n(6759);e.exports=Object.keys||function(e){return r(e,i)}},6760:function(e,t){var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!n.call({1:2},1);t.f=i?function(e){return!!(e=r(this,e))&&e.enumerable}:n},8929:function(e,t,n){var r=n(5329),i=n(6059),o=n(1851);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,n=!1,a={};try{(e=r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(a,[]),n=a instanceof Array}catch(t){}return function(t,r){return i(t),o(r),n?e(t,r):t.__proto__=r,t}}():void 0)},5623:function(e,t,n){var r=n(2885),i=n(9697);e.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},9811:function(e,t,n){var r=n(8834),i=n(7475),o=n(941),a=TypeError;e.exports=function(e,t){var n,s;if("string"===t&&i(n=e.toString)&&!o(s=r(n,e)))return s;if(i(n=e.valueOf)&&!o(s=r(n,e)))return s;if("string"!==t&&i(n=e.toString)&&!o(s=r(n,e)))return s;throw a("Can't convert object to primitive value")}},1136:function(e,t,n){var r=n(626),i=n(5329),o=n(946),a=n(7857),s=n(6059),u=i([].concat);e.exports=r("Reflect","ownKeys")||function(e){var t=o.f(s(e)),n=a.f;return n?u(t,n(e)):t}},4058:function(e){e.exports={}},2:function(e){e.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}},7742:function(e,t,n){var r=n(1899),i=n(6991),o=n(7475),a=n(7252),s=n(1302),u=n(9813),c=n(3321),l=n(2529),d=n(3385),h=i&&i.prototype,g=u("species"),f=!1,m=o(r.PromiseRejectionEvent);n=a("Promise",(function(){var e=(t=s(i))!==String(i);if(!e&&66===d)return!0;if(l&&(!h.catch||!h.finally))return!0;if(51<=d&&/native code/.test(t))return!1;var t,n=function(e){e((function(){}),(function(){}))};return((t=new i((function(e){e(1)}))).constructor={})[g]=n,!(f=t.then((function(){}))instanceof n)||!e&&c&&!m})),e.exports={CONSTRUCTOR:n,REJECTION_EVENT:m,SUBCLASSING:f}},6991:function(e,t,n){n=n(1899),e.exports=n.Promise},6584:function(e,t,n){var r=n(6059),i=n(941),o=n(9520);e.exports=function(e,t){return r(e),i(t)&&t.constructor===e?t:((0,(e=o.f(e)).resolve)(t),e.promise)}},1542:function(e,t,n){var r=n(6991),i=n(1385);n=n(7742).CONSTRUCTOR,e.exports=n||!i((function(e){r.all(e).then(void 0,(function(){}))}))},8397:function(e){var t=function(){this.head=null,this.tail=null};t.prototype={add:function(e){e={item:e,next:null},this.head?this.tail.next=e:this.head=e,this.tail=e},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}},e.exports=t},6777:function(e,t,n){var r=n(6059);e.exports=function(){var e=r(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},3613:function(e,t,n){var r=n(8834),i=n(953),o=n(7046),a=n(6777),s=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in s||i(e,"flags")||!o(s,e)?t:r(a,e)}},8219:function(e){var t=TypeError;e.exports=function(e){if(null==e)throw t("Can't call method on "+e);return e}},7620:function(e,t,n){var r=n(1899),i=n(9730),o=n(7475),a=n(2861),s=n(3765),u=n(8348),c=/MSIE .\./.test(a),l=r.Function;e.exports={setTimeout:(n=function(e){return c?function(t,n){var r=2<u(arguments.length,1),a=o(t)?t:l(t),c=r?s(arguments,2):void 0;return e(r?function(){i(a,this,c)}:a,n)}:e})(r.setTimeout),setInterval:n(r.setInterval)}},4431:function(e,t,n){var r=n(626),i=n(5988),o=n(9813),a=n(5746),s=o("species");e.exports=function(e){e=r(e),a&&e&&!e[s]&&(0,i.f)(e,s,{configurable:!0,get:function(){return this}})}},904:function(e,t,n){var r=n(2885),i=n(5988).f,o=n(2029),a=n(953),s=n(5623),u=n(9813)("toStringTag");e.exports=function(e,t,n,c){e&&(a(n=n?e:e.prototype,u)||i(n,u,{configurable:!0,value:t}),c&&!r&&o(n,"toString",s))}},4262:function(e,t,n){var r=n(8726),i=n(9418),o=r("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},3030:function(e,t,n){var r=n(1899),i=(n=n(5609),"__core-js_shared__");r=r[i]||n(i,{}),e.exports=r},8726:function(e,t,n){var r=n(2529),i=n(3030);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.23.2",mode:r?"pure":"global",copyright:"\xa9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.23.2/LICENSE",source:"https://github.com/zloirock/core-js"})},487:function(e,t,n){var r=n(6059),i=n(174),o=n(9813)("species");e.exports=function(e,t){return void 0===(e=r(e).constructor)||null==(e=r(e)[o])?t:i(e)}},4620:function(e,t,n){var r=n(5329),i=n(2435),o=n(5803),a=n(8219),s=r("".charAt),u=r("".charCodeAt),c=r("".slice);n=function(e){return function(t,n){t=o(a(t)),n=i(n);var r,l=t.length;return n<0||l<=n?e?"":void 0:(r=u(t,n))<55296||56319<r||n+1===l||(l=u(t,n+1))<56320||57343<l?e?s(t,n):r:e?c(t,n,n+2):l-56320+(r-55296<<10)+65536}},e.exports={codeAt:n(!1),charAt:n(!0)}},3291:function(e,t,n){n=n(5329);var r=2147483647,i=/[^\0-\u007E]/,o=/[.\u3002\uFF0E\uFF61]/g,a="Overflow: input needs wider integers to process",s=RangeError,u=n(o.exec),c=Math.floor,l=String.fromCharCode,d=n("".charCodeAt),h=n([].join),g=n([].push),f=n("".replace),m=n("".split),p=n("".toLowerCase),_=function(e){return e+22+75*(e<26)},v=function(e){var t,n=[],i=(e=function(e){for(var t=[],n=0,r=e.length;n<r;){var i,o=d(e,n++);55296<=o&&o<=56319&&n<r?56320==(64512&(i=d(e,n++)))?g(t,((1023&o)<<10)+(1023&i)+65536):(g(t,o),n--):g(t,o)}return t}(e)).length,o=128,u=0,f=72;for(I=0;I<e.length;I++)(t=e[I])<128&&g(n,l(t));var m=n.length,p=m;for(m&&g(n,"-");p<i;){for(var v=r,I=0;I<e.length;I++)o<=(t=e[I])&&t<v&&(v=t);var y=p+1;if(v-o>c((r-u)/y))throw s(a);for(u+=(v-o)*y,o=v,I=0;I<e.length;I++){if((t=e[I])<o&&++u>r)throw s(a);if(t==o){for(var b=u,D=36;;){var T=D<=f?1:f+26<=D?26:D-f;if(b<T)break;var S=b-T,w=36-T;g(n,l(_(T+S%w))),b=c(S/w),D+=36}g(n,l(_(b))),f=function(e,t,n){var r=0;for(e=n?c(e/700):e>>1,e+=c(e/t);455<e;)e=c(e/35),r+=36;return c(r+36*e/(e+38))}(u,y,p==m),u=0,p++}}u++,o++}return h(n,"")};e.exports=function(e){for(var t,n=[],r=m(f(p(e),o,"."),"."),a=0;a<r.length;a++)g(n,u(i,t=r[a])?"xn--"+v(t):t);return h(n,".")}},3093:function(e,t,n){var r=n(9417).PROPER,i=n(5981),o=n(3483);e.exports=function(e){return i((function(){return!!o[e]()||"\u200b\x85\u180e"!=="\u200b\x85\u180e"[e]()||r&&o[e].name!==e}))}},4853:function(e,t,n){var r=n(5329),i=n(8219),o=n(5803),a=(n=n(3483),r("".replace)),s=(r="["+n+"]",RegExp("^"+r+r+"*")),u=RegExp(r+r+"*$");n=function(e){return function(t){return t=o(i(t)),1&e&&(t=a(t,s,"")),2&e?a(t,u,""):t}},e.exports={start:n(1),end:n(2),trim:n(3)}},9630:function(e,t,n){var r=n(8834),i=n(626),o=n(9813),a=n(5929);e.exports=function(){var e,t=(e=(e=i("Symbol"))&&e.prototype)&&e.valueOf,n=o("toPrimitive");e&&!e[n]&&a(e,n,(function(e){return r(t,this)}),{arity:1})}},2941:function(e,t,n){var r,i,o=n(1899),a=n(9730),s=n(6843),u=n(7475),c=n(953),l=n(5981),d=n(5463),h=n(3765),g=n(1333),f=n(8348),m=n(2749),p=(n=n(6049),o.setImmediate),_=o.clearImmediate,v=o.process,I=o.Dispatch,y=o.Function,b=o.MessageChannel,D=o.String,T=0,S={},w="onreadystatechange";try{r=o.location}catch(A){}var C=function(e){var t;c(S,e)&&(t=S[e],delete S[e],t())},E=function(e){return function(){C(e)}},M=function(e){C(e.data)},P=function(e){o.postMessage(D(e),r.protocol+"//"+r.host)};p&&_||(p=function(e){f(arguments.length,1);var t=u(e)?e:y(e),n=h(arguments,1);return S[++T]=function(){a(t,void 0,n)},i(T),T},_=function(e){delete S[e]},n?i=function(e){v.nextTick(E(e))}:I&&I.now?i=function(e){I.now(E(e))}:b&&!m?(m=(n=new b).port2,n.port1.onmessage=M,i=s(m.postMessage,m)):o.addEventListener&&u(o.postMessage)&&!o.importScripts&&r&&"file:"!==r.protocol&&!l(P)?(i=P,o.addEventListener("message",M,!1)):i=w in g("script")?function(e){d.appendChild(g("script"))[w]=function(){d.removeChild(this),C(e)}}:function(e){setTimeout(E(e),0)}),e.exports={set:p,clear:_}},9413:function(e,t,n){var r=n(2435),i=Math.max,o=Math.min;e.exports=function(e,t){return(e=r(e))<0?i(e+t,0):o(e,t)}},4529:function(e,t,n){var r=n(7026),i=n(8219);e.exports=function(e){return r(i(e))}},2435:function(e,t,n){var r=n(5331);e.exports=function(e){return(e=+e)!=e||0==e?0:r(e)}},3057:function(e,t,n){var r=n(2435),i=Math.min;e.exports=function(e){return 0<e?i(r(e),9007199254740991):0}},9678:function(e,t,n){var r=n(8219),i=Object;e.exports=function(e){return i(r(e))}},6935:function(e,t,n){var r=n(8834),i=n(941),o=n(6664),a=n(4229),s=n(9811),u=(n=n(9813),TypeError),c=n("toPrimitive");e.exports=function(e,t){if(!i(e)||o(e))return e;var n=a(e,c);if(n){if(void 0===t&&(t="default"),n=r(n,e,t),!i(n)||o(n))return n;throw u("Can't convert object to primitive value")}return void 0===t&&(t="number"),s(e,t)}},3894:function(e,t,n){var r=n(6935),i=n(6664);e.exports=function(e){return e=r(e,"string"),i(e)?e:e+""}},2885:function(e,t,n){var r={};r[n(9813)("toStringTag")]="z",e.exports="[object z]"===String(r)},5803:function(e,t,n){var r=n(9697),i=String;e.exports=function(e){if("Symbol"===r(e))throw TypeError("Cannot convert a Symbol value to a string");return i(e)}},9826:function(e){var t=String;e.exports=function(e){try{return t(e)}catch(n){return"Object"}}},9418:function(e,t,n){n=n(5329);var r=0,i=Math.random(),o=n(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+o(++r+i,36)}},2302:function(e,t,n){n=n(2497),e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3937:function(e,t,n){var r=n(5746);n=n(5981),e.exports=r&&n((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},8348:function(e){var t=TypeError;e.exports=function(e,n){if(e<n)throw t("Not enough arguments");return e}},1477:function(e,t,n){n=n(9813),t.f=n},9813:function(e,t,n){var r=n(1899),i=n(8726),o=n(953),a=n(9418),s=n(2497),u=n(2302),c=i("wks"),l=r.Symbol,d=l&&l.for,h=u?l:l&&l.withoutSetter||a;e.exports=function(e){var t;return o(c,e)&&(s||"string"==typeof c[e])||(t="Symbol."+e,c[e]=s&&o(l,e)?l[e]:(u&&d?d:h)(t)),c[e]}},3483:function(e){e.exports="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},9812:function(e,t,n){var r=n(6887),i=n(7046),o=n(249),a=n(8929),s=n(3489),u=n(9290),c=n(2029),l=n(1887),d=n(8694),h=n(3794),g=n(3091),f=n(4649),m=n(9813),p=n(8780),_=m("toStringTag"),v=Error,I=[].push,y=(n=function(e,t){var n,r=2<arguments.length?arguments[2]:void 0,s=i(y,this);return a?n=a(new v,s?o(this):y):(n=s?this:u(y),c(n,_,"Error")),void 0!==t&&c(n,"message",f(t)),p&&c(n,"stack",d(n.stack,1)),h(n,r),g(e,I,{that:s=[]}),c(n,"errors",s),n},a?a(n,v):s(n,v,{name:!0}),n.prototype=u(v.prototype,{constructor:l(1,n),message:l(1,""),name:l(1,"AggregateError")}));r({global:!0,constructor:!0,arity:2},{AggregateError:n})},7627:function(e,t,n){n(9812)},5906:function(e,t,n){var r=n(6887),i=n(5981),o=n(1052),a=n(941),s=n(9678),u=n(623),c=n(6796),l=n(5449),d=n(4692),h=n(568),g=n(9813),f=(n=n(3385),g("isConcatSpreadable"));g=51<=n||!i((function(){var e=[];return e[f]=!1,e.concat()[0]!==e})),n=h("concat"),r({target:"Array",proto:!0,arity:1,forced:!g||!n},{concat:function(e){for(var t,n,r,i=s(this),h=d(i,0),g=0,m=-1,p=arguments.length;m<p;m++)if(function(e){if(!a(e))return!1;var t=e[f];return void 0!==t?!!t:o(e)}(r=-1===m?i:arguments[m]))for(n=u(r),c(g+n),t=0;t<n;t++,g++)t in r&&l(h,g,r[t]);else c(g+1),l(h,g++,r);return h.length=g,h}})},1501:function(e,t,n){var r=n(6887),i=n(3610).filter;r({target:"Array",proto:!0,forced:!n(568)("filter")},{filter:function(e){return i(this,e,1<arguments.length?arguments[1]:void 0)}})},9076:function(e,t,n){var r=n(6887),i=n(5329),o=n(1692).indexOf,a=(n=n(4194),i([].indexOf)),s=!!a&&1/a([1],1,-0)<0;i=n("indexOf"),r({target:"Array",proto:!0,forced:s||!i},{indexOf:function(e){var t=1<arguments.length?arguments[1]:void 0;return s?a(this,e,t)||0:o(this,e,t)}})},6274:function(e,t,n){var r=n(4529),i=n(8479),o=n(2077),a=n(5402),s=n(5988).f,u=n(7771),c=n(2529),l=(n=n(5746),"Array Iterator"),d=a.set,h=a.getterFor(l);if(e.exports=u(Array,"Array",(function(e,t){d(this,{type:l,target:r(e),index:0,kind:t})}),(function(){var e=h(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?{value:e.target=void 0,done:!0}:"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),a=o.Arguments=o.Array,i("keys"),i("values"),i("entries"),!c&&n&&"values"!==a.name)try{s(a,"name",{value:"values"})}catch(S){}},8071:function(e,t,n){n(6887)({target:"Array",proto:!0,forced:(n=n(247))!==[].lastIndexOf},{lastIndexOf:n})},186:function(e,t,n){var r=n(6887),i=n(1052),o=n(4284),a=n(941),s=n(9413),u=n(623),c=n(4529),l=n(5449),d=n(9813),h=n(568),g=n(3765),f=(n=h("slice"),d("species")),m=Array,p=Math.max;r({target:"Array",proto:!0,forced:!n},{slice:function(e,t){var n,r,d,h=c(this),_=u(h),v=s(e,_),I=s(void 0===t?_:t,_);if(i(h)&&((n=o(n=h.constructor)&&(n===m||i(n.prototype))||a(n)&&null===(n=n[f])?void 0:n)===m||void 0===n))return g(h,v,I);for(r=new(void 0===n?m:n)(p(I-v,0)),d=0;v<I;v++,d++)v in h&&l(r,d,h[v]);return r.length=d,r}})},8611:function(e,t,n){var r=n(6887),i=n(9678),o=n(9413),a=n(2435),s=n(623),u=n(6796),c=n(4692),l=n(5449),d=n(5863),h=(n=n(568)("splice"),Math.max),g=Math.min;r({target:"Array",proto:!0,forced:!n},{splice:function(e,t){var n,r,f,m,p,_,v=i(this),I=s(v),y=o(e,I);for(0===(e=arguments.length)?n=r=0:r=1===e?(n=0,I-y):(n=e-2,g(h(a(t),0),I-y)),u(I+n-r),f=c(v,r),m=0;m<r;m++)(p=y+m)in v&&l(f,m,v[p]);if(n<(f.length=r)){for(m=y;m<I-r;m++)_=m+n,(p=m+r)in v?v[_]=v[p]:d(v,_);for(m=I;I-r+n<m;m--)d(v,m-1)}else if(r<n)for(m=I-r;y<m;m--)_=m+n-1,(p=m+r-1)in v?v[_]=v[p]:d(v,_);for(m=0;m<n;m++)v[m+y]=arguments[m+2];return v.length=I-r+n,f}})},5160:function(e,t,n){var r=n(6887),i=(n=n(5329),Date),o=n(i.prototype.getTime);r({target:"Date",stat:!0},{now:function(){return o(new i)}})},3381:function(e,t,n){var r=n(6887);n=n(8308),r({target:"Function",proto:!0,forced:Function.bind!==n},{bind:n})},2619:function(e,t,n){var r=n(6887),i=n(626),o=n(9730),a=n(8834),s=n(5329),u=n(5981),c=n(1052),l=n(7475),d=n(941),h=n(6664),g=n(3765),f=(n=n(2497),i("JSON","stringify")),m=s(/./.exec),p=s("".charAt),_=s("".charCodeAt),v=s("".replace),I=s(1..toString),y=/[\uD800-\uDFFF]/g,b=/^[\uD800-\uDBFF]$/,D=/^[\uDC00-\uDFFF]$/,T=!n||u((function(){var e=i("Symbol")();return"[null]"!=f([e])||"{}"!=f({a:e})||"{}"!=f(Object(e))})),S=u((function(){return'"\\udf06\\ud834"'!==f("\udf06\ud834")||'"\\udead"'!==f("\udead")})),w=function(e,t){var n=g(arguments),r=t;if((d(t)||void 0!==e)&&!h(e))return c(t)||(t=function(e,t){if(l(r)&&(t=a(r,this,e,t)),!h(t))return t}),n[1]=t,o(f,null,n)},C=function(e,t,n){var r=p(n,t-1);return n=p(n,t+1),m(b,e)&&!m(D,n)||m(D,e)&&!m(b,r)?"\\u"+I(_(e,0),16):e};f&&r({target:"JSON",stat:!0,arity:3,forced:T||S},{stringify:function(e,t,n){var r=g(arguments);return r=o(T?w:f,null,r),S&&"string"==typeof r?v(r,y,C):r}})},9120:function(e,t,n){var r=n(1899);n(904)(r.JSON,"JSON",!0)},5327:function(){},6950:function(e,t,n){n(6887)({target:"Object",stat:!0,sham:!n(5746)},{create:n(9290)})},6450:function(e,t,n){var r=n(6887),i=n(5746);n=n(5988).f,r({target:"Object",stat:!0,forced:Object.defineProperty!==n,sham:!i},{defineProperty:n})},7144:function(e,t,n){var r=n(6887),i=n(2497),o=n(5981),a=n(7857),s=n(9678);r({target:"Object",stat:!0,forced:!i||o((function(){a.f(1)}))},{getOwnPropertySymbols:function(e){var t=a.f;return t?t(s(e)):[]}})},7405:function(e,t,n){var r=n(6887),i=n(5981),o=n(9678),a=n(249);n=n(4160),r({target:"Object",stat:!0,forced:i((function(){a(1)})),sham:!n},{getPrototypeOf:function(e){return a(o(e))}})},1724:function(e,t,n){var r=n(6887),i=n(9678),o=n(4771);r({target:"Object",stat:!0,forced:n(5981)((function(){o(1)}))},{keys:function(e){return o(i(e))}})},108:function(e,t,n){n(6887)({target:"Object",stat:!0},{setPrototypeOf:n(8929)})},5967:function(){},9718:function(e,t,n){var r=n(6887);n=n(1942),r({global:!0,forced:parseFloat!=n},{parseFloat:n})},4038:function(e,t,n){var r=n(6887);n=n(9806),r({global:!0,forced:parseInt!=n},{parseInt:n})},4560:function(e,t,n){var r=n(6887),i=n(8834),o=n(4883),a=n(9520),s=n(2),u=n(3091);r({target:"Promise",stat:!0},{allSettled:function(e){var t=this,n=a.f(t),r=n.resolve,c=n.reject,l=s((function(){var n=o(t.resolve),a=[],s=0,c=1;u(e,(function(e){var o=s++,u=!1;c++,i(n,t,e).then((function(e){u||(u=!0,a[o]={status:"fulfilled",value:e},--c||r(a))}),(function(e){u||(u=!0,a[o]={status:"rejected",reason:e},--c||r(a))}))})),--c||r(a)}));return l.error&&c(l.value),n.promise}})},6890:function(e,t,n){var r=n(6887),i=n(8834),o=n(4883),a=n(9520),s=n(2),u=n(3091);r({target:"Promise",stat:!0,forced:n(1542)},{all:function(e){var t=this,n=a.f(t),r=n.resolve,c=n.reject,l=s((function(){var n=o(t.resolve),a=[],s=0,l=1;u(e,(function(e){var o=s++,u=!1;l++,i(n,t,e).then((function(e){u||(u=!0,a[o]=e,--l||r(a))}),c)})),--l||r(a)}));return l.error&&c(l.value),n.promise}})},7206:function(e,t,n){var r=n(6887),i=n(8834),o=n(4883),a=n(626),s=n(9520),u=n(2),c=n(3091),l="No one promise resolved";r({target:"Promise",stat:!0},{any:function(e){var t=this,n=a("AggregateError"),r=s.f(t),d=r.resolve,h=r.reject,g=u((function(){var r=o(t.resolve),a=[],s=0,u=1,g=!1;c(e,(function(e){var o=s++,c=!1;u++,i(r,t,e).then((function(e){c||g||(g=!0,d(e))}),(function(e){c||g||(c=!0,a[o]=e,--u||h(new n(a,l)))}))})),--u||h(new n(a,l))}));return g.error&&h(g.value),r.promise}})},3376:function(e,t,n){var r=n(6887),i=n(2529),o=n(7742).CONSTRUCTOR,a=n(6991),s=n(626),u=n(7475),c=(n=n(5929),a&&a.prototype);r({target:"Promise",proto:!0,forced:o,real:!0},{catch:function(e){return this.then(void 0,e)}}),!i&&u(a)&&(o=s("Promise").prototype.catch,c.catch!==o&&n(c,"catch",o,{unsafe:!0}))},6934:function(e,t,n){var r,i,o,a=n(6887),s=n(2529),u=n(6049),c=n(1899),l=n(8834),d=n(5929),h=n(8929),g=n(904),f=n(4431),m=n(4883),p=n(7475),_=n(941),v=n(5743),I=n(487),y=n(2941).set,b=n(6132),D=n(3146),T=n(2),S=n(8397),w=n(5402),C=n(6991),E=n(7742),M=(n=n(9520),"Promise"),P=E.CONSTRUCTOR,A=E.REJECTION_EVENT,x=(E=E.SUBCLASSING,w.getterFor(M)),R=w.set,k=C,L=w=C&&C.prototype,F=c.TypeError,W=c.document,O=c.process,B=n.f,N=B,V=!!(W&&W.createEvent&&c.dispatchEvent),U="unhandledrejection",G=function(e){var t;return!(!_(e)||!p(t=e.then))&&t},j=function(e,t){var n,r,i,o,a=t.value,s=1==t.state,d=s?e.ok:e.fail,h=e.resolve,g=e.reject,f=e.domain;try{d?(s||(2===t.rejection&&(o=t,l(y,c,(function(){var e=o.facade;u?O.emit("rejectionHandled",e):z("rejectionhandled",e,o.value)}))),t.rejection=1),!0===d?n=a:(f&&f.enter(),n=d(a),f&&(f.exit(),i=!0)),n===e.promise?g(F("Promise-chain cycle")):(r=G(n))?l(r,n,h,g):h(n)):g(a)}catch(P){f&&!i&&f.exit(),g(P)}},H=function(e,t){e.notified||(e.notified=!0,b((function(){for(var n,r,i=e.reactions;n=i.get();)j(n,e);e.notified=!1,t&&!e.rejection&&(r=e,l(y,c,(function(){var e=r.facade,t=r.value,n=K(r);if(n&&(n=T((function(){u?O.emit("unhandledRejection",t,e):z(U,e,t)})),r.rejection=u||K(r)?2:1,n.error))throw n.value})))})))},z=function(e,t,n){var r;V?((r=W.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),c.dispatchEvent(r)):r={promise:t,reason:n},!A&&(t=c["on"+e])?t(r):e===U&&D("Unhandled promise rejection",n)},K=function(e){return 1!==e.rejection&&!e.parent},J=function(e,t,n){return function(r){e(t,r,n)}},Y=function(e,t,n){e.done||(e.done=!0,(e=n||e).value=t,e.state=2,H(e,!0))},X=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw F("Promise can't be resolved itself");var r=G(t);r?b((function(){var n={done:!1};try{l(r,t,J(X,n,e),J(Y,n,e))}catch(i){Y(n,i,e)}})):(e.value=t,e.state=1,H(e,!1))}catch(i){Y({done:!1},i,e)}}};if(P&&(L=(k=function(e){v(this,L),m(e),l(r,this);var t=x(this);try{e(J(X,t),J(Y,t))}catch(d){Y(t,d)}}).prototype,(r=function(e){R(this,{type:M,done:!1,notified:!1,parent:!1,reactions:new S,rejection:!1,state:0,value:void 0})}).prototype=d(L,"then",(function(e,t){var n=x(this),r=B(I(this,k));return n.parent=!0,r.ok=!p(e)||e,r.fail=p(t)&&t,r.domain=u?O.domain:void 0,0==n.state?n.reactions.add(r):b((function(){j(r,n)})),r.promise})),i=function(){var e=new r,t=x(e);this.promise=e,this.resolve=J(X,t),this.reject=J(Y,t)},n.f=B=function(e){return e===k||void 0===e?new i:N(e)},!s&&p(C)&&w!==Object.prototype)){o=w.then,E||d(w,"then",(function(e,t){var n=this;return new k((function(e,t){l(o,n,e,t)})).then(e,t)}),{unsafe:!0});try{delete w.constructor}catch(Q){}h&&h(w,L)}a({global:!0,constructor:!0,wrap:!0,forced:P},{Promise:k}),g(k,M,!1,!0),f(M)},4349:function(e,t,n){var r=n(6887),i=n(2529),o=n(6991),a=n(5981),s=n(626),u=n(7475),c=n(487),l=n(6584),d=(n=n(5929),o&&o.prototype);r({target:"Promise",proto:!0,real:!0,forced:!!o&&a((function(){d.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=c(this,s("Promise")),n=u(e);return this.then(n?function(n){return l(t,e()).then((function(){return n}))}:e,n?function(n){return l(t,e()).then((function(){throw n}))}:e)}}),!i&&u(o)&&(a=s("Promise").prototype.finally,d.finally!==a&&n(d,"finally",a,{unsafe:!0}))},8881:function(e,t,n){n(6934),n(6890),n(3376),n(5921),n(4069),n(4482)},5921:function(e,t,n){var r=n(6887),i=n(8834),o=n(4883),a=n(9520),s=n(2),u=n(3091);r({target:"Promise",stat:!0,forced:n(1542)},{race:function(e){var t=this,n=a.f(t),r=n.reject,c=s((function(){var a=o(t.resolve);u(e,(function(e){i(a,t,e).then(n.resolve,r)}))}));return c.error&&r(c.value),n.promise}})},4069:function(e,t,n){var r=n(6887),i=n(8834),o=n(9520);r({target:"Promise",stat:!0,forced:n(7742).CONSTRUCTOR},{reject:function(e){var t=o.f(this);return i(t.reject,void 0,e),t.promise}})},4482:function(e,t,n){var r=n(6887),i=n(626),o=n(2529),a=n(6991),s=n(7742).CONSTRUCTOR,u=n(6584),c=i("Promise"),l=o&&!s;r({target:"Promise",stat:!0,forced:o||s},{resolve:function(e){return u(l&&this===c?a:this,e)}})},7453:function(e,t,n){var r=n(6887),i=n(626),o=n(9730),a=n(8308),s=n(174),u=n(6059),c=n(941),l=n(9290),d=(n=n(5981),i("Reflect","construct")),h=Object.prototype,g=[].push,f=n((function(){function e(){}return!(d((function(){}),[],e)instanceof e)})),m=!n((function(){d((function(){}))}));r({target:"Reflect",stat:!0,forced:i=f||m,sham:i},{construct:function(e,t){s(e),u(t);var n=arguments.length<3?e:s(arguments[2]);if(m&&!f)return d(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return o(g,r,t),new(o(a,e,r))}return n=l(c(r=n.prototype)?r:h),r=o(e,n,t),c(r)?r:n}})},1502:function(){},7091:function(){},1293:function(e,t,n){var r=n(6887),i=n(5329),o=n(9677).f,a=n(3057),s=n(5803),u=n(344),c=n(8219),l=n(7772),d=(n=n(2529),i("".endsWith)),h=i("".slice),g=Math.min;i=l("endsWith"),r({target:"String",proto:!0,forced:!(!n&&!i&&(l=o(String.prototype,"endsWith"))&&!l.writable||i)},{endsWith:function(e){var t=s(c(this)),n=(u(e),1<arguments.length?arguments[1]:void 0),r=t.length;return n=void 0===n?r:g(a(n),r),r=s(e),d?d(t,r,n):h(t,n-r.length,n)===r}})},7971:function(e,t,n){var r=n(4620).charAt,i=n(5803),o=n(5402),a=(n=n(7771),"String Iterator"),s=o.set,u=o.getterFor(a);n(String,"String",(function(e){s(this,{type:a,string:i(e),index:0})}),(function(){var e=u(this),t=e.string,n=e.index;return n>=t.length?{value:void 0,done:!0}:(t=r(t,n),e.index+=t.length,{value:t,done:!1})}))},6226:function(e,t,n){var r=n(6887),i=n(8834),o=n(5329),a=n(8219),s=n(7475),u=n(685),c=n(5803),l=n(4229),d=n(3613),h=n(4342),g=n(9813),f=n(2529),m=g("replace"),p=TypeError,_=o("".indexOf),v=o("".replace),I=o("".slice),y=Math.max,b=function(e,t,n){return n>e.length?-1:""===t?n:_(e,t,n)};r({target:"String",proto:!0},{replaceAll:function(e,t){var n,r,o,g,D,T,S,w,C=a(this),E=0,M=0,P="";if(null!=e){if((n=u(e))&&(r=c(a(d(e))),!~_(r,"g")))throw p("`.replaceAll` does not allow non-global regexes");if(r=l(e,m))return i(r,e,C,t);if(f&&n)return v(c(C),e,t)}for(o=c(C),g=c(e),(D=s(t))||(t=c(t)),S=y(1,T=g.length),E=b(o,g,0);-1!==E;)w=D?c(t(g,E,o)):h(g,o,E,[],void 0,t),P+=I(o,M,E)+w,M=E+T,E=b(o,g,E+S);return M<o.length&&(P+=I(o,M)),P}})},3475:function(){},4761:function(e,t,n){var r=n(6887),i=n(5329),o=n(9677).f,a=n(3057),s=n(5803),u=n(344),c=n(8219),l=n(7772),d=(n=n(2529),i("".startsWith)),h=i("".slice),g=Math.min;i=l("startsWith"),r({target:"String",proto:!0,forced:!(!n&&!i&&(l=o(String.prototype,"startsWith"))&&!l.writable||i)},{startsWith:function(e){var t=s(c(this)),n=(u(e),a(g(1<arguments.length?arguments[1]:void 0,t.length)));return e=s(e),d?d(t,e,n):h(t,n,n+e.length)===e}})},6371:function(e,t,n){var r=n(6887),i=n(4853).trim;r({target:"String",proto:!0,forced:n(3093)("trim")},{trim:function(){return i(this)}})},8555:function(e,t,n){n(6349)("asyncIterator")},8616:function(e,t,n){var r=n(6887),i=n(1899),o=n(8834),a=n(5329),s=n(2529),u=n(5746),c=n(2497),l=n(5981),d=n(953),h=n(7046),g=n(6059),f=n(4529),m=n(3894),p=n(5803),_=n(1887),v=n(9290),I=n(4771),y=n(946),b=n(684),D=n(7857),T=n(9677),S=n(5988),w=n(9938),C=n(6760),E=n(5929),M=n(8726),P=n(4262),A=n(7748),x=n(9418),R=n(9813),k=n(1477),L=n(6349),F=n(9630),W=n(904),O=n(5402),B=n(3610).forEach,N=P("hidden"),V="Symbol",U=(n="prototype",O.set),G=O.getterFor(V),j=Object[n],H=(P=i.Symbol)&&P[n],z=i.TypeError,K=(O=i.QObject,T.f),J=S.f,Y=b.f,X=C.f,Q=a([].push),Z=M("symbols"),q=M("op-symbols"),$=(i=M("wks"),!O||!O[n]||!O[n].findChild),ee=u&&l((function(){return 7!=v(J({},"a",{get:function(){return J(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=K(j,t);r&&delete j[t],J(e,t,n),r&&e!==j&&J(j,t,r)}:J,te=function(e,t){var n=Z[e]=v(H);return U(n,{type:V,tag:e,description:t}),u||(n.description=t),n},ne=function(e,t,n){return e===j&&ne(q,t,n),g(e),t=m(t),g(n),d(Z,t)?(n.enumerable?(d(e,N)&&e[N][t]&&(e[N][t]=!1),n=v(n,{enumerable:_(0,!1)})):(d(e,N)||J(e,N,_(1,{})),e[N][t]=!0),ee(e,t,n)):J(e,t,n)},re=function(e,t){g(e);var n=f(t);return t=I(n).concat(oe(n)),B(t,(function(t){u&&!o(ie,n,t)||ne(e,t,n[t])})),e},ie=function(e){e=m(e);var t=o(X,this,e);return!(this===j&&d(Z,e)&&!d(q,e))&&(!(t||!d(this,e)||!d(Z,e)||d(this,N)&&this[N][e])||t)},oe=(a=function(e,t){var n;if(e=f(e),t=m(t),e!==j||!d(Z,t)||d(q,t))return!(n=K(e,t))||!d(Z,t)||d(e,N)&&e[N][t]||(n.enumerable=!0),n},M=function(e){e=Y(f(e));var t=[];return B(e,(function(e){d(Z,e)||d(A,e)||Q(t,e)})),t},function(e){var t=e===j,n=(e=Y(t?q:f(e)),[]);return B(e,(function(e){!d(Z,e)||t&&!d(j,e)||Q(n,Z[e])})),n});c||(E(H=(P=function(){if(h(H,this))throw z("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?p(arguments[0]):void 0,t=x(e),n=function(e){this===j&&o(n,q,e),d(this,N)&&d(this[N],t)&&(this[N][t]=!1),ee(this,t,_(1,e))};return u&&$&&ee(j,t,{configurable:!0,set:n}),te(t,e)})[n],"toString",(function(){return G(this).tag})),E(P,"withoutSetter",(function(e){return te(x(e),e)})),C.f=ie,S.f=ne,w.f=re,T.f=a,y.f=b.f=M,D.f=oe,k.f=function(e){return te(R(e),e)},u&&(J(H,"description",{configurable:!0,get:function(){return G(this).description}}),s||E(j,"propertyIsEnumerable",ie,{unsafe:!0}))),r({global:!0,constructor:!0,wrap:!0,forced:!c,sham:!c},{Symbol:P}),B(I(i),(function(e){L(e)})),r({target:V,stat:!0,forced:!c},{useSetter:function(){$=!0},useSimple:function(){$=!1}}),r({target:"Object",stat:!0,forced:!c,sham:!u},{create:function(e,t){return void 0===t?v(e):re(v(e),t)},defineProperty:ne,defineProperties:re,getOwnPropertyDescriptor:a}),r({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:M}),F(),W(P,V),A[N]=!0},2615:function(){},4523:function(e,t,n){var r=n(6887),i=n(626),o=n(953),a=n(5803),s=n(8726),u=(n=n(5366),s("string-to-symbol-registry")),c=s("symbol-to-string-registry");r({target:"Symbol",stat:!0,forced:!n},{for:function(e){if(e=a(e),o(u,e))return u[e];var t=i("Symbol")(e);return u[e]=t,c[t]=e,t}})},1732:function(e,t,n){n(6349)("hasInstance")},5903:function(e,t,n){n(6349)("isConcatSpreadable")},1825:function(e,t,n){n(6349)("iterator")},5824:function(e,t,n){n(8616),n(4523),n(8608),n(2619),n(7144)},8608:function(e,t,n){var r=n(6887),i=n(953),o=n(6664),a=n(9826),s=n(8726),u=(n=n(5366),s("symbol-to-string-registry"));r({target:"Symbol",stat:!0,forced:!n},{keyFor:function(e){if(!o(e))throw TypeError(a(e)+" is not a symbol");if(i(u,e))return u[e]}})},5915:function(e,t,n){n(6349)("matchAll")},8394:function(e,t,n){n(6349)("match")},1766:function(e,t,n){n(6349)("replace")},2737:function(e,t,n){n(6349)("search")},9911:function(e,t,n){n(6349)("species")},4315:function(e,t,n){n(6349)("split")},3131:function(e,t,n){var r=n(6349);n=n(9630),r("toPrimitive"),n()},4714:function(e,t,n){var r=n(626),i=n(6349);n=n(904),i("toStringTag"),n(r("Symbol"),"Symbol")},659:function(e,t,n){n(6349)("unscopables")},4776:function(e,t,n){var r,i,o,a,s,u=n(1899),c=n(5329),l=n(4380),d=n(1647),h=n(4683),g=n(8850),f=n(941),m=n(1584),p=n(5402).enforce,_=(n=n(8019),u=!u.ActiveXObject&&"ActiveXObject"in u,function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}});h=h("WeakMap",_,g),n&&u&&(r=g.getConstructor(_,"WeakMap",!0),d.enable(),i=c((n=h.prototype).delete),o=c(n.has),a=c(n.get),s=c(n.set),l(n,{delete:function(e){var t;return f(e)&&!m(e)?((t=p(this)).frozen||(t.frozen=new r),i(this,e)||t.frozen.delete(e)):i(this,e)},has:function(e){var t;return f(e)&&!m(e)?((t=p(this)).frozen||(t.frozen=new r),o(this,e)||t.frozen.has(e)):o(this,e)},get:function(e){var t;return f(e)&&!m(e)?((t=p(this)).frozen||(t.frozen=new r),o(this,e)?a(this,e):t.frozen.get(e)):a(this,e)},set:function(e,t){var n;return f(e)&&!m(e)?((n=p(this)).frozen||(n.frozen=new r),o(this,e)?s(this,e,t):n.frozen.set(e,t)):s(this,e,t),this}}))},4334:function(e,t,n){n(4776)},1115:function(e,t,n){n(4683)("WeakSet",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),n(8850))},1773:function(e,t,n){n(1115)},9731:function(e,t,n){n(7627)},5708:function(e,t,n){n(4560)},8731:function(e,t,n){n(7206)},14:function(e,t,n){var r=n(6887),i=n(9520),o=n(2);r({target:"Promise",stat:!0,forced:!0},{try:function(e){var t=i.f(this);return((e=o(e)).error?t.reject:t.resolve)(e.value),t.promise}})},8783:function(e,t,n){n(6349)("asyncDispose")},3975:function(e,t,n){n(6349)("dispose")},5799:function(e,t,n){n(6349)("matcher")},1943:function(e,t,n){n(6349)("metadataKey")},5414:function(e,t,n){n(6349)("metadata")},6774:function(e,t,n){n(6349)("observable")},620:function(e,t,n){n(6349)("patternMatch")},6172:function(e,t,n){n(6349)("replaceAll")},4629:function(e,t,n){n(6887)({target:"WeakMap",proto:!0,real:!0,forced:!0},{deleteAll:n(8984)})},6442:function(e,t,n){n(6887)({target:"WeakMap",proto:!0,real:!0,forced:!0},{emplace:n(8721)})},6207:function(e,t,n){n(6887)({target:"WeakMap",stat:!0,forced:!0},{from:n(3590)})},3215:function(e,t,n){n(6887)({target:"WeakMap",stat:!0,forced:!0},{of:n(5226)})},4055:function(e,t,n){n(6887)({target:"WeakMap",proto:!0,real:!0,forced:!0},{upsert:n(716)})},5896:function(e,t,n){n(6887)({target:"WeakSet",proto:!0,real:!0,forced:!0},{addAll:n(7622)})},5501:function(e,t,n){n(6887)({target:"WeakSet",proto:!0,real:!0,forced:!0},{deleteAll:n(8984)})},2511:function(e,t,n){n(6887)({target:"WeakSet",stat:!0,forced:!0},{from:n(3590)})},3309:function(e,t,n){n(6887)({target:"WeakSet",stat:!0,forced:!0},{of:n(5226)})},7634:function(e,t,n){n(6274);var r,i=n(3281),o=n(1899),a=n(9697),s=n(2029),u=n(2077),c=n(9813)("toStringTag");for(r in i){var l;(l=(l=o[r])&&l.prototype)&&a(l)!==c&&s(l,c,r),u[r]=u.Array}},9229:function(e,t,n){var r=n(6887),i=n(1899);n=n(7620).setInterval,r({global:!0,bind:!0,forced:i.setInterval!==n},{setInterval:n})},7749:function(e,t,n){var r=n(6887),i=n(1899);n=n(7620).setTimeout,r({global:!0,bind:!0,forced:i.setTimeout!==n},{setTimeout:n})},1249:function(e,t,n){n(9229),n(7749)},2524:function(e,t,n){n(6274);var r,i,o,a=n(6887),s=n(1899),u=n(8834),c=n(5329),l=n(5746),d=n(8468),h=n(5929),g=n(4380),f=n(904),m=n(1046),p=n(5402),_=n(5743),v=n(7475),I=n(953),y=n(6843),b=n(9697),D=n(6059),T=n(941),S=n(5803),w=n(9290),C=n(1887),E=n(3476),M=n(2902),P=n(8348),A=n(9813),x=n(1388),R=(n=A("iterator"),"URLSearchParams"),k=R+"Iterator",L=p.set,F=p.getterFor(R),W=p.getterFor(k),O=Object.getOwnPropertyDescriptor,B=(A=function(e){return l?(e=O(s,e))&&e.value:s[e]})("fetch"),N=A("Request"),V=A("Headers"),U=N&&N.prototype,G=(p=V&&V.prototype,s.RegExp),j=s.TypeError,H=s.decodeURIComponent,z=s.encodeURIComponent,K=c("".charAt),J=c([].join),Y=c([].push),X=c("".replace),Q=c([].shift),Z=c([].splice),q=c("".split),$=c("".slice),ee=/\+/g,te=Array(4),ne=function(e){try{return H(e)}catch(o){return e}},re=function(e){var t,n=X(e,ee," "),r=4;try{return H(n)}catch(i){for(;r;)n=X(n,(t=r--,te[t-1]||(te[t-1]=G("((?:%[\\da-f]{2}){"+t+"})","gi"))),ne);return n}},ie=/[!'()~]|%20/g,oe={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},ae=function(e){return oe[e]},se=function(e){return X(z(e),ie,ae)},ue=m((function(e,t){L(this,{type:k,iterator:E(F(e).entries),kind:t})}),"Iterator",(function(){var e,t=(e=W(this)).kind,n=(e=e.iterator.next()).value;return e.done||(e.value="keys"===t?n.key:"values"===t?n.value:[n.key,n.value]),e}),!0),ce=function(e){this.entries=[],this.url=null,void 0!==e&&(T(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===K(e,0)?$(e,1):e:S(e)))},le=(ce.prototype={type:R,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,n,r,i,o,a,s=M(e);if(s)for(n=(t=E(e,s)).next;!(r=u(n,t)).done;){if(i=(r=E(D(r.value))).next,(o=u(i,r)).done||(a=u(i,r)).done||!u(i,r).done)throw j("Expected sequence with length 2");Y(this.entries,{key:S(o.value),value:S(a.value)})}else for(var c in e)I(e,c)&&Y(this.entries,{key:c,value:S(e[c])})},parseQuery:function(e){if(e)for(var t,n=q(e,"&"),r=0;r<n.length;)(t=n[r++]).length&&(t=q(t,"="),Y(this.entries,{key:re(Q(t)),value:re(J(t,"="))}))},serialize:function(){for(var e,t=this.entries,n=[],r=0;r<t.length;)e=t[r++],Y(n,se(e.key)+"="+se(e.value));return J(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}},A=function(){_(this,le);var e=0<arguments.length?arguments[0]:void 0;L(this,new ce(e))}).prototype;g(le,{append:function(e,t){P(arguments.length,2);var n=F(this);Y(n.entries,{key:S(e),value:S(t)}),n.updateURL()},delete:function(e){P(arguments.length,1);for(var t=F(this),n=t.entries,r=S(e),i=0;i<n.length;)n[i].key===r?Z(n,i,1):i++;t.updateURL()},get:function(e){P(arguments.length,1);for(var t=F(this).entries,n=S(e),r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){P(arguments.length,1);for(var t=F(this).entries,n=S(e),r=[],i=0;i<t.length;i++)t[i].key===n&&Y(r,t[i].value);return r},has:function(e){P(arguments.length,1);for(var t=F(this).entries,n=S(e),r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function(e,t){P(arguments.length,1);for(var n,r=F(this),i=r.entries,o=!1,a=S(e),s=S(t),u=0;u<i.length;u++)(n=i[u]).key===a&&(o?Z(i,u--,1):(o=!0,n.value=s));o||Y(i,{key:a,value:s}),r.updateURL()},sort:function(){var e=F(this);x(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,n=F(this).entries,r=y(e,1<arguments.length?arguments[1]:void 0),i=0;i<n.length;)r((t=n[i++]).value,t.key,this)},keys:function(){return new ue(this,"keys")},values:function(){return new ue(this,"values")},entries:function(){return new ue(this,"entries")}},{enumerable:!0}),h(le,n,le.entries,{name:"entries"}),h(le,"toString",(function(){return F(this).serialize()}),{enumerable:!0}),f(A,R),a({global:!0,constructor:!0,forced:!d},{URLSearchParams:A}),!d&&v(V)&&(r=c(p.has),i=c(p.set),o=function(e){if(T(e)){var t,n=e.body;if(b(n)===R)return t=e.headers?new V(e.headers):new V,r(t,"content-type")||i(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),w(e,{body:C(0,S(n)),headers:C(0,t)})}return e},v(B)&&a({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return B(e,1<arguments.length?o(arguments[1]):{})}}),v(N)&&((U.constructor=m=function(e){return _(this,U),new N(e,1<arguments.length?o(arguments[1]):{})}).prototype=U,a({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:m}))),e.exports={URLSearchParams:A,getState:F}},5304:function(e,t,n){n(2524)},7250:function(e,t,n){n(7971);var r,i=n(6887),o=n(5746),a=n(8468),s=n(1899),u=n(6843),c=n(5329),l=n(5929),d=n(9202),h=n(5743),g=n(953),f=n(4420),m=n(1354),p=n(5790),_=n(4620).codeAt,v=n(3291),I=n(5803),y=n(904),b=n(8348),D=n(2524),T=(n=n(5402)).set,S=n.getterFor("URL"),w=D.URLSearchParams,C=D.getState,E=(n=s.URL,s.TypeError),M=s.parseInt,P=Math.floor,A=Math.pow,x=c("".charAt),R=c(/./.exec),k=c([].join),L=c(1..toString),F=c([].pop),W=c([].push),O=c("".replace),B=c([].shift),N=c("".split),V=c("".slice),U=c("".toLowerCase),G=c([].unshift),j="Invalid scheme",H="Invalid host",z="Invalid port",K=/[a-z]/i,J=/[\d+-.a-z]/i,Y=/\d/,X=/^0x/i,Q=/^[0-7]+$/,Z=/^\d+$/,q=/^[\da-f]+$/i,$=/[\0\t\n\r #%/:<>?@[\\\]^|]/,ee=/[\0\t\n\r #/:<>?@[\\\]^|]/,te=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,ne=/[\t\n\r]/g,re=function(e){var t,n,r,i;if("number"==typeof e){for(t=[],n=0;n<4;n++)G(t,e%256),e=P(e/256);return k(t,".")}if("object"!=typeof e)return e;for(t="",r=function(e){for(var t=null,n=1,r=null,i=0,o=0;o<8;o++)0!==e[o]?(n<i&&(t=r,n=i),r=null,i=0):(null===r&&(r=o),++i);return n<i&&(t=r,n=i),t}(e),n=0;n<8;n++)i&&0===e[n]||(i=i&&!1,r===n?(t+=n?":":"::",i=!0):(t+=L(e[n],16),n<7&&(t+=":")));return"["+t+"]"},ie={},oe=f({},ie,{" ":1,'"':1,"<":1,">":1,"`":1}),ae=f({},oe,{"#":1,"?":1,"{":1,"}":1}),se=f({},ae,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),ue=function(e,t){var n=_(e,0);return 32<n&&n<127&&!g(t,e)?e:encodeURIComponent(e)},ce={ftp:21,file:null,http:80,https:443,ws:80,wss:443},le=function(e,t){return 2==e.length&&R(K,x(e,0))&&(":"==(e=x(e,1))||!t&&"|"==e)},de=function(e){return 1<e.length&&le(V(e,0,2))&&(2==e.length||"/"===(e=x(e,2))||"\\"===e||"?"===e||"#"===e)},he={},ge={},fe={},me={},pe={},_e={},ve={},Ie={},ye={},be={},De={},Te={},Se={},we={},Ce={},Ee={},Me={},Pe={},Ae={},xe={},Re={},ke=function(e,t,n){var r,i;if(e=I(e),t){if(i=this.parse(e))throw E(i);this.searchParams=null}else{if(void 0!==n&&(r=new ke(n,!0)),i=this.parse(e,null,r))throw E(i);(t=C(new w)).bindURL(this),this.searchParams=t}},Le=(ke.prototype={type:"URL",parse:function(e,t,n){var i,o,a,s,u=this,c=t||he,l=0,d="",h=!1,f=!1,_=!1;for(e=I(e),t||(u.scheme="",u.username="",u.password="",u.host=null,u.port=null,u.path=[],u.query=null,u.fragment=null,u.cannotBeABaseURL=!1,e=O(e,te,"")),e=O(e,ne,""),i=m(e);l<=i.length;){switch(o=i[l],c){case he:if(!o||!R(K,o)){if(t)return j;c=fe;continue}d+=U(o),c=ge;break;case ge:if(o&&(R(J,o)||"+"==o||"-"==o||"."==o))d+=U(o);else{if(":"!=o){if(t)return j;d="",c=fe,l=0;continue}if(t&&(u.isSpecial()!=g(ce,d)||"file"==d&&(u.includesCredentials()||null!==u.port)||"file"==u.scheme&&!u.host))return;if(u.scheme=d,t)return void(u.isSpecial()&&ce[u.scheme]==u.port&&(u.port=null));d="","file"==u.scheme?c=we:u.isSpecial()&&n&&n.scheme==u.scheme?c=me:u.isSpecial()?c=Ie:"/"==i[l+1]?(c=pe,l++):(u.cannotBeABaseURL=!0,W(u.path,""),c=Ae)}break;case fe:if(!n||n.cannotBeABaseURL&&"#"!=o)return j;if(n.cannotBeABaseURL&&"#"==o){u.scheme=n.scheme,u.path=p(n.path),u.query=n.query,u.fragment="",u.cannotBeABaseURL=!0,c=Re;break}c="file"==n.scheme?we:_e;continue;case me:if("/"!=o||"/"!=i[l+1]){c=_e;continue}c=ye,l++;break;case pe:if("/"==o){c=be;break}c=Pe;continue;case _e:if(u.scheme=n.scheme,o==r)u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=p(n.path),u.query=n.query;else if("/"==o||"\\"==o&&u.isSpecial())c=ve;else if("?"==o)u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=p(n.path),u.query="",c=xe;else{if("#"!=o){u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=p(n.path),u.path.length--,c=Pe;continue}u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=p(n.path),u.query=n.query,u.fragment="",c=Re}break;case ve:if(!u.isSpecial()||"/"!=o&&"\\"!=o){if("/"!=o){u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,c=Pe;continue}c=be}else c=ye;break;case Ie:if(c=ye,"/"!=o||"/"!=x(d,l+1))continue;l++;break;case ye:if("/"==o||"\\"==o)break;c=be;continue;case be:if("@"==o){h&&(d="%40"+d),h=!0;for(var v=m(d),y=0;y<v.length;y++){var b=v[y];":"!=b||_?(b=ue(b,se),_?u.password+=b:u.username+=b):_=!0}d=""}else if(o==r||"/"==o||"?"==o||"#"==o||"\\"==o&&u.isSpecial()){if(h&&""==d)return"Invalid authority";l-=m(d).length+1,d="",c=De}else d+=o;break;case De:case Te:if(t&&"file"==u.scheme){c=Ee;continue}if(":"!=o||f){if(o==r||"/"==o||"?"==o||"#"==o||"\\"==o&&u.isSpecial()){if(u.isSpecial()&&""==d)return H;if(t&&""==d&&(u.includesCredentials()||null!==u.port))return;if(a=u.parseHost(d))return a;if(d="",c=Me,t)return;continue}"["==o?f=!0:"]"==o&&(f=!1),d+=o}else{if(""==d)return H;if(a=u.parseHost(d))return a;if(d="",c=Se,t==Te)return}break;case Se:if(!R(Y,o)){if(o==r||"/"==o||"?"==o||"#"==o||"\\"==o&&u.isSpecial()||t){if(""!=d){var D=M(d,10);if(65535<D)return z;u.port=u.isSpecial()&&D===ce[u.scheme]?null:D,d=""}if(t)return;c=Me;continue}return z}d+=o;break;case we:if(u.scheme="file","/"==o||"\\"==o)c=Ce;else{if(!n||"file"!=n.scheme){c=Pe;continue}if(o==r)u.host=n.host,u.path=p(n.path),u.query=n.query;else if("?"==o)u.host=n.host,u.path=p(n.path),u.query="",c=xe;else{if("#"!=o){de(k(p(i,l),""))||(u.host=n.host,u.path=p(n.path),u.shortenPath()),c=Pe;continue}u.host=n.host,u.path=p(n.path),u.query=n.query,u.fragment="",c=Re}}break;case Ce:if("/"==o||"\\"==o){c=Ee;break}n&&"file"==n.scheme&&!de(k(p(i,l),""))&&(le(n.path[0],!0)?W(u.path,n.path[0]):u.host=n.host),c=Pe;continue;case Ee:if(o==r||"/"==o||"\\"==o||"?"==o||"#"==o){if(!t&&le(d))c=Pe;else if(""==d){if(u.host="",t)return;c=Me}else{if(a=u.parseHost(d))return a;if("localhost"==u.host&&(u.host=""),t)return;d="",c=Me}continue}d+=o;break;case Me:if(u.isSpecial()){if(c=Pe,"/"!=o&&"\\"!=o)continue}else if(t||"?"!=o)if(t||"#"!=o){if(o!=r&&(c=Pe,"/"!=o))continue}else u.fragment="",c=Re;else u.query="",c=xe;break;case Pe:if(o==r||"/"==o||"\\"==o&&u.isSpecial()||!t&&("?"==o||"#"==o)){if(".."===(D=U(D=d))||"%2e."===D||".%2e"===D||"%2e%2e"===D?(u.shortenPath(),"/"==o||"\\"==o&&u.isSpecial()||W(u.path,"")):"."===(s=d)||"%2e"===U(s)?"/"==o||"\\"==o&&u.isSpecial()||W(u.path,""):("file"==u.scheme&&!u.path.length&&le(d)&&(u.host&&(u.host=""),d=x(d,0)+":"),W(u.path,d)),d="","file"==u.scheme&&(o==r||"?"==o||"#"==o))for(;1<u.path.length&&""===u.path[0];)B(u.path);"?"==o?(u.query="",c=xe):"#"==o&&(u.fragment="",c=Re)}else d+=ue(o,ae);break;case Ae:"?"==o?(u.query="",c=xe):"#"==o?(u.fragment="",c=Re):o!=r&&(u.path[0]+=ue(o,ie));break;case xe:t||"#"!=o?o!=r&&("'"==o&&u.isSpecial()?u.query+="%27":u.query+="#"==o?"%23":ue(o,ie)):(u.fragment="",c=Re);break;case Re:o!=r&&(u.fragment+=ue(o,oe))}l++}},parseHost:function(e){var t,n,r;if("["==x(e,0))return"]"==x(e,e.length-1)&&(t=function(e){var t,n,r,i,o,a,s,u=[0,0,0,0,0,0,0,0],c=0,l=null,d=0,h=function(){return x(e,d)};if(":"==h()){if(":"!=x(e,1))return;d+=2,l=++c}for(;h();){if(8==c)return;if(":"==h()){if(null!==l)return;d++,l=++c}else{for(t=n=0;n<4&&R(q,h());)t=16*t+M(h(),16),d++,n++;if("."==h()){if(0==n)return;if(d-=n,6<c)return;for(r=0;h();){if(i=null,0<r){if(!("."==h()&&r<4))return;d++}if(!R(Y,h()))return;for(;R(Y,h());){if(o=M(h(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(255<i)return;d++}u[c]=256*u[c]+i,2!=++r&&4!=r||c++}if(4!=r)return;break}if(":"==h()){if(d++,!h())return}else if(h())return;u[c++]=t}}if(null!==l)for(a=c-l,c=7;0!=c&&0<a;)s=u[c],u[c--]=u[l+a-1],u[l+--a]=s;else if(8!=c)return;return u}(V(e,1,-1)))?void(this.host=t):H;if(this.isSpecial())return e=v(e),R($,e)||null===(t=function(e){var t,n,r,i,o,a,s,u=N(e,".");if(u.length&&""==u[u.length-1]&&u.length--,4<(t=u.length))return e;for(n=[],r=0;r<t;r++){if(""==(i=u[r]))return e;if(o=10,1<i.length&&"0"==x(i,0)&&(o=R(X,i)?16:8,i=V(i,8==o?1:2)),""===i)a=0;else{if(!R(10==o?Z:8==o?Q:q,i))return e;a=M(i,o)}W(n,a)}for(r=0;r<t;r++)if(a=n[r],r==t-1){if(a>=A(256,5-t))return null}else if(255<a)return null;for(s=F(n),r=0;r<n.length;r++)s+=n[r]*A(256,3-r);return s}(e))?H:void(this.host=t);if(R(ee,e))return H;for(t="",n=m(e),r=0;r<n.length;r++)t+=ue(n[r],ie);this.host=t},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return g(ce,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"==this.scheme&&1==t&&le(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,n=e.username,r=e.password,i=e.host,o=e.port,a=e.path,s=e.query,u=e.fragment,c=t+":";return null!==i?(c+="//",e.includesCredentials()&&(c+=n+(r?":"+r:"")+"@"),c+=re(i),null!==o&&(c+=":"+o)):"file"==t&&(c+="//"),c+=e.cannotBeABaseURL?a[0]:a.length?"/"+k(a,"/"):"",null!==s&&(c+="?"+s),null!==u&&(c+="#"+u),c},setHref:function(e){if(e=this.parse(e))throw E(e);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"==e)try{return new Le(e.path[0]).origin}catch(c){return"null"}return"file"!=e&&this.isSpecial()?e+"://"+re(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(I(e)+":",he)},getUsername:function(){return this.username},setUsername:function(e){var t=m(I(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<t.length;n++)this.username+=ue(t[n],se)}},getPassword:function(){return this.password},setPassword:function(e){var t=m(I(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<t.length;n++)this.password+=ue(t[n],se)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?re(e):re(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,De)},getHostname:function(){var e=this.host;return null===e?"":re(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,Te)},getPort:function(){var e=this.port;return null===e?"":I(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""==(e=I(e))?this.port=null:this.parse(e,Se))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+k(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,Me))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""==(e=I(e))?this.query=null:("?"==x(e,0)&&(e=V(e,1)),this.query="",this.parse(e,xe)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""==(e=I(e))?this.fragment=null:("#"==x(e,0)&&(e=V(e,1)),this.fragment="",this.parse(e,Re))},update:function(){this.query=this.searchParams.serialize()||null}},function(e){var t=h(this,Fe),n=1<b(arguments.length,1)?arguments[1]:void 0;e=T(t,new ke(e,!1,n)),o||(t.href=e.serialize(),t.origin=e.getOrigin(),t.protocol=e.getProtocol(),t.username=e.getUsername(),t.password=e.getPassword(),t.host=e.getHost(),t.hostname=e.getHostname(),t.port=e.getPort(),t.pathname=e.getPathname(),t.search=e.getSearch(),t.searchParams=e.getSearchParams(),t.hash=e.getHash())}),Fe=Le.prototype;D=function(e,t){return{get:function(){return S(this)[e]()},set:t&&function(e){return S(this)[t](e)},configurable:!0,enumerable:!0}},o&&(d(Fe,"href",D("serialize","setHref")),d(Fe,"origin",D("getOrigin")),d(Fe,"protocol",D("getProtocol","setProtocol")),d(Fe,"username",D("getUsername","setUsername")),d(Fe,"password",D("getPassword","setPassword")),d(Fe,"host",D("getHost","setHost")),d(Fe,"hostname",D("getHostname","setHostname")),d(Fe,"port",D("getPort","setPort")),d(Fe,"pathname",D("getPathname","setPathname")),d(Fe,"search",D("getSearch","setSearch")),d(Fe,"searchParams",D("getSearchParams")),d(Fe,"hash",D("getHash","setHash"))),l(Fe,"toJSON",(function(){return S(this).serialize()}),{enumerable:!0}),l(Fe,"toString",(function(){return S(this).serialize()}),{enumerable:!0}),n&&(c=n.revokeObjectURL,(s=n.createObjectURL)&&l(Le,"createObjectURL",u(s,n)),c&&l(Le,"revokeObjectURL",u(c,n))),y(Le,"URL"),i({global:!0,constructor:!0,forced:!a,sham:!o},{URL:Le})},3601:function(e,t,n){n(7250)},8947:function(){},7784:function(e,t,n){n=n(1103),e.exports=n},8196:function(e,t,n){n=n(6246),e.exports=n},8065:function(e,t,n){n=n(6043),e.exports=n},5247:function(e,t,n){n=n(1727),e.exports=n},1955:function(e,t,n){n=n(2480),e.exports=n},9373:function(e,t,n){n=n(4570),e.exports=n},1022:function(e,t,n){n=n(7564),e.exports=n},7145:function(e,t,n){n=n(9279),e.exports=n},2073:function(e,t,n){n=n(9601),e.exports=n},2348:function(e,t,n){n=n(8339),e.exports=n},5178:function(e,t,n){n=n(1611),e.exports=n},6361:function(e,t,n){n=n(2774),e.exports=n},8933:function(e,t,n){n=n(4426),e.exports=n},4471:function(e,t,n){n=n(5254),e.exports=n},1910:function(e,t,n){n=n(8171),e.exports=n},6507:function(e,t,n){n=n(3966),e.exports=n},3059:function(e,t,n){n=n(8494),e.exports=n},6670:function(e,t,n){n=n(3065),e.exports=n},6877:function(e,t,n){n=n(7579),e.exports=n},4888:function(e,t,n){n=n(8524),e.exports=n},7460:function(e,t,n){var r=n(2956);n(7634),e.exports=r},1895:function(e,t,n){n=n(4983),e.exports=n},3474:function(e,t,n){n(1249),n=n(4058),e.exports=n.setInterval},7989:function(e,t,n){n(1249),n=n(4058),e.exports=n.setTimeout},2547:function(e,t,n){var r=n(7473);n(7634),e.exports=r},6509:function(e,t,n){var r=n(4227);n(7634),e.exports=r},7641:function(e,t,n){n=n(1459),e.exports=n},2010:function(e,t,n){var r=n(2304);n(7634),e.exports=r},3726:function(e,t,n){var r=n(9567);n(7634),e.exports=r},1459:function(e,t,n){n(3601),n(8947),n(5304),n=n(4058),e.exports=n.URL},630:function(e,t){var n={553:function(e){e=function(e){var t,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(Le){u=function(e,t,n){return e[t]=n}}function c(e,n,r,i){var o,a,s,u;return n=n&&n.prototype instanceof p?n:p,n=Object.create(n.prototype),i=new w(i||[]),n._invoke=(o=e,a=r,s=i,u=d,function(e,n){if(u===g)throw new Error("Generator is already running");if(u===f){if("throw"===e)throw n;return E()}for(s.method=e,s.arg=n;;){var r=s.delegate;if(r=r&&function e(n,r){var i=n.iterator[r.method];if(i!==t)return"throw"===(i=l(i,n.iterator,r.arg)).type?(r.method="throw",r.arg=i.arg,r.delegate=null,m):(i=i.arg)?i.done?(r[n.resultName]=i.value,r.next=n.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m);if(r.delegate=null,"throw"===r.method){if(n.iterator.return&&(r.method="return",r.arg=t,e(n,r),"throw"===r.method))return m;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}(r,s)){if(r===m)continue;return r}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(u===d)throw u=f,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);if(u=g,"normal"===(r=l(o,a,s)).type){if(u=s.done?f:h,r.arg!==m)return{value:r.arg,done:s.done}}else"throw"===r.type&&(u=f,s.method="throw",s.arg=r.arg)}}),n}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(Le){return{type:"throw",arg:Le}}}e.wrap=c;var d="suspendedStart",h="suspendedYield",g="executing",f="completed",m={};function p(){}function _(){}function v(){}u(i={},o,(function(){return this}));var I=Object.getPrototypeOf,y=((I=I&&I(I(C([]))))&&I!==n&&r.call(I,o)&&(i=I),v.prototype=p.prototype=Object.create(i));function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function D(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,s){var u;return"throw"!==(i=l(e[i],e,o)).type?(o=(u=i.arg).value)&&"object"==typeof o&&r.call(o,"__await")?t.resolve(o.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(o).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,s)})):void s(i.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function C(e){if(e){var n,i,a=e[o];if(a)return a.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return n=-1,(i=function i(){for(;++n<e.length;)if(r.call(e,n))return i.value=e[n],i.done=!1,i;return i.value=t,i.done=!0,i}).next=i}return{next:E}}function E(){return{value:t,done:!0}}return u(y,"constructor",_.prototype=v),u(v,"constructor",_),_.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){return!!(e="function"==typeof e&&e.constructor)&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},b(D.prototype),u(D.prototype,a,(function(){return this})),e.AsyncIterator=D,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new D(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),u(y,s,"Generator"),u(y,o,(function(){return this})),u(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t,n=[];for(t in e)n.push(t);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=C,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;0<=o;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}var a=(o=o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc?null:o)?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n,r,i=this.tryEntries[t];if(i.tryLoc===e)return"throw"===(n=i.completion).type&&(r=n.arg,S(i)),r}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:C(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=e}catch(i){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}},757:function(e,t,n){e.exports=n(553)}},r={};function o(e){var t=r[e];return void 0!==t||(t=r[e]={exports:{}},n[e](t,t.exports,o)),t.exports}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,a(e,t)}function u(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}function c(e){return"[object Object]"===Object.prototype.toString.call(e)}function l(e){return"function"==typeof e}function d(e){return"string"==typeof e}function h(e){return e=String(e),/^\d+(px|em)$|^\d+$|^(100|[1-9]?\d(\.\d\d?\d?)?)%$/.test(e)}function g(e){return"number"==typeof e&&!isNaN(e)}function f(e){return"[object Boolean]"===Object.prototype.toString.call(e)}function m(e){var t=document.createElement("span");return t.style.background=e,t.style.background}function p(e){var t=document.createElement("span");return t.style.border=e,t.style.border||""===e}function _(){return"ontouchstart"in document.documentElement}function v(e){return e instanceof HTMLElement||"[object ShadowRoot]"===Object.prototype.toString.call(e)}function I(e,t){for(var n in e)void 0!==t[n]&&c(e[n])&&c(t[n])?I(e[n],t[n]):t[n]=e[n]}function y(e,t){for(var n in e){var r=e[n],i=t[n];void 0===i?t[n]=e[n]:d(r)&&c(i)?i.visibility=r:c(r)&&c(i)?y(e[n],t[n]):t[n]=e[n]}}function b(e){var t=Math.random().toString(35).substring(2);return t.length<11&&(t+=Math.random().toString(35).substring(2)),e=Math.max(Math.min(Math.round(e),11),8),t.substring(0,e)}function D(e){var t,n;if(u(e))t=[];else{if(!c(e))return e;t={}}for(n in e){var r=e[n];t[n]=u(e)||c(e)?D(r):r}return t}function T(e){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame,n=!!t;if(n=!(t&&!/requestAnimationFrame\(\)\s*\{\s*\[native code\]\s*\}/i.test(t.toString()))&&n)return t(e);var r={},i=null,o=+new Date;r[1]=e,null===i&&(i=setInterval((function(){var e,t=+new Date,n=r;for(e in r={},n)Object.prototype.hasOwnProperty.call(n,e)&&(n[e](t),o=t);2500<t-o&&(clearInterval(i),i=null)}),1e3/60))}function S(){var e=window;if(e){if(e.devicePixelRatio)return e.devicePixelRatio;if(e.screen.deviceXDPI&&e.screen.logicalXDPI)return e.screen.deviceXDPI/e.screen.logicalXDPI}return 1}function w(e,t,n,r,i){var o=e+n/2,a=t+r/2,s=C(e,t,o,a,i),u=C(e+n,t,o,a,i);return n=C(e+n,t+r,o,a,i),e=C(e,t+r,o,a,i),t=[u.x,s.x,e.x,n.x].sort((function(e,t){return e-t})),r=[u.y,s.y,e.y,n.y].sort((function(e,t){return e-t})),{x:t[0],y:r[0],width:t[3]-t[0],height:r[3]-r[0]}}function C(e,t,n,r,i){return i=i/180*Math.PI,{x:(e-n)*Math.cos(i)-(t-r)*Math.sin(i)+n,y:(e-n)*Math.sin(i)+(t-r)*Math.cos(i)+r}}o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,{a:t}),t},o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};var E=function(e){window.Dynamsoft&&window.Dynamsoft.Lib.debug&&window.Dynamsoft.Lib.log(e)},M={windowURL:window.URL||window.webkitURL,createURL:function(e){return d(e)?e:M.createURLWithType(e).data},createURLWithType:function(e){if(d(e)||void 0===e)return{type:"string",data:e};if(e instanceof Blob)return{type:"object",data:M.createObjectURL(e)};if(e.imageData&&e.imageData instanceof Blob)return{type:"object",data:M.createObjectURL(e.imageData)};if(e.imageData){var t=Object.prototype.toString.call(e.imageData);if(/\[object \w+Array\]/.test(t))return{type:"object",data:M.createObjectURL(new Blob([e.imageData]))}}else if(t=Object.prototype.toString.call(e),/\[object \w+Array\]/.test(t))return{type:"object",data:M.createObjectURL(new Blob([e]))};return/data:image\/\w+;base64/.test(e)?{type:"string",data:e}:{type:"object",data:e}},createObjectURL:function(e){return e?(e=M.windowURL.createObjectURL(e),E("createObjectURL:"+e),e):""},revokeObjectURL:function(e){E("revokeObjectURL:"+e),d(e)&&0==e.indexOf("blob:http")&&M.windowURL.revokeObjectURL(e)}},P=((V=R.prototype).getPublishSubscribe=function(){return this._oPub},V._on=function(e,t){t=this._oPub.on(e,t),this.push(e,t)},V._emit=function(e){for(var t,n=arguments.length,r=new Array(1<n?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];null!=(t=this._oPub)&&t.emit.apply(t,[e].concat(r))},V._off=function(e,t){var n;null!=(n=this._oPub)&&n.off(e,t)},V._offById=function(e,t){var n;null!=(n=this._oPub)&&n.offById(e,t)},V.push=function(e,t){this._evtIds.push({name:e,id:t})},V.dispose=function(){if(this._oPub){for(var e=this._evtIds.length,t=0;t<e;t++){var n=this._evtIds[t];this._oPub.offById(n.name,n.id)}this._bDisposePub&&this._oPub&&this._oPub.dispose()}this._oPub=null},R),A=((V=x.prototype).on=function(e,t){this._events[e]||(this._events[e]=[]);var n=b(10);return this._events[e].push({fn:t,evtId:n}),n},V.emit=function(e){var t=this._events[e];if(!t||0===t.length)return!1;for(var n=t.length,r=arguments.length,i=new Array(1<r?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];for(var a,s=0;s<n;s++)null!=(a=t[s])&&(a=a.fn).call.apply(a,[null].concat(i))},V.emitEx=function(e){var t=this._events[e];if(!t||0===t.length)return Promise.resolve(!0);for(var n=t.length,r=Promise.resolve(!0),i=arguments.length,o=new Array(1<i?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];if(1===t.length)return(e=null==(e=t[0])?void 0:(e=e.fn).call.apply(e,[null].concat(o)))instanceof Promise?e:r;for(var s=function(e){var n=null==(e=t[e])?void 0:(e=e.fn).call.apply(e,[null].concat(o));n instanceof Promise&&(r=r.then((function(){return n})))},u=0;u<n;u++)s(u);return r},V.off=function(e,t){var n=this._events[e];if(!n)return!1;if(t)for(var r=n.length-1;0<=r;r--){var i=n[r];i&&i.fn===t&&n.splice(r,1),i=null}else n&&(n.length=0)},V.offById=function(e,t){var n=this._events[e];if(!n)return!1;if(t)for(var r=n.length-1;0<=r;r--){var i=n[r];if(i&&i.evtId===t){n.splice(r,1);break}i=null}else n&&(n.length=0)},V.dispose=function(){for(var e=Object.keys(this._events),t=0,n=e.length;t<n;t++){var r=e[t];(r=this._events[r])&&r.splice(0),r=null}this._events={}},x);function x(){this._events={}}function R(e){this._evtIds=[],this._oPub=null,this._bDisposePub=!1,e?this._oPub=e:(this._oPub=new A,this._bDisposePub=!0)}function k(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(c){return n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function L(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){k(o,r,i,a,s,"next",e)}function s(e){k(o,r,i,a,s,"throw",e)}a(void 0)}))}}var F,W,O,B,N,V=o(757),U=o.n(V),G=(V="undefined"!=typeof window)?window:{},j=(V&&window,"prev"),H="next",z="pageAreaSelected",K="pageAreaUnselected",J="_canvasVisibilityChanged",Y="_updateErrorMessage",X="_updateLogMessage",Q="_DirectoryChanged",Z="_canvasRightClick",q="_afterRender",$="_currentChanged",ee="_updateThbItem",te="_setScrollerSizeUI",ne="_changeCanvasCursorUI",re="_tabChangedUI",ie="_updateForViewer",oe="_loadToViewer",ae="_openToViewer",se="_loadPage",ue="_removeViewerUid",ce="_changePage",le="_reorderPage",de="_removePage",he="_editPage",ge="_loadToTag",fe="_removePageTag",me="_addPageTag",pe="_emptyTag",_e="_renameTag",ve="_tagChanged",Ie="_appendSync",ye="_updateSync",be="_loadToFile",De="_removeFile",Te="_renameFile",Se={code:0,message:"ok."},we={code:80001,message:"The parameter type is wrong."},Ce={code:80002,message:"The parameter is out of range."},Ee={code:80003,message:"The image does not exist."},Me={code:80006,message:"The file does not exist."},Pe={code:80009,message:"Tag does not exist."},Ae={code:80010,message:"The tag already exists."},xe={code:80011,message:"Element does not exist."},Re={code:80012,message:"Page does not exist."},ke={code:80013,message:"The parameter is invalid."},Le={code:80016,message:"The color is invalid."},Fe={code:80017,message:"Failed to save image to database."},We={code:80018,message:"Failed to remove image from database by uid."},Oe={code:80020,message:"Your browser does not support full screen."},Be={code:80021,message:"The size is invalid."},Ne={code:80022,message:"The operation mode is error."},Ve={code:80023,message:"The border is invalid."},Ue={code:80026,message:"The constructor of view ui is required."},Ge={code:80032,message:"The file already exists."},je=((en=Ye.prototype).calc3x3Matrix=function(e,t){for(var n=[],r=0;r<3;r++)for(var i=0;i<3;i++)n.push(e[3*r+0]*t[i]+e[3*r+1]*t[i+3]+e[3*r+2]*t[i+6]);return n},en.rotateMatrix=function(e,t,n){e=e/180*Math.PI;var r=Math.sin(e);return[e=Math.cos(e),-r,(1-e)*t+n*r,r,e,(1-e)*n-t*r,0,0,1]},en.moveMatrix=function(e,t){return[1,0,e,0,1,t,0,0,1]},en.scaleMatrix=function(e){return[e,0,0,0,e,0,0,0,1]},en.flipMatrix=function(e,t){return[1-2*Math.pow(e,2),-2*e*t,0,-2*e*t,1-2*Math.pow(t,2),0,0,0,1]},en.toCanvasMatrix=function(e){for(var t=[0,3,1,4,2,5],n=0;n<t.length;n++)t[n]=e[t[n]];return t},en.getLatestResult=function(){return 0!==this.result.length?this.result[this.result.length-1].slice():null},en.rotatePoint=function(e,t,n,r,i){return i=i/180*Math.PI,{x:(e-n)*Math.cos(i)-(t-r)*Math.sin(i)+n,y:(e-n)*Math.sin(i)+(t-r)*Math.cos(i)+r}},en.rotateRect=function(e,t,n,r,i){var o=e+n/2,a=t+r/2,s=this.rotatePoint(e,t,o,a,i),u=this.rotatePoint(e+n,t,o,a,i);return n=this.rotatePoint(e+n,t+r,o,a,i),e=this.rotatePoint(e,t+r,o,a,i),t=[u.x,s.x,e.x,n.x].sort((function(e,t){return e-t})),r=[u.y,s.y,e.y,n.y].sort((function(e,t){return e-t})),{x:t[0],y:r[0],width:t[3]-t[0],height:r[3]-r[0]}},en.calcLineEquation=function(e,t){var n=t.y-e.y,r=e.x-t.x,i=(e=t.x*e.y-e.x*t.y,[]);return i.push((r*r-n*n)/(t=n*n+r*r),-2*n*r/t,-2*n*e/t,-2*n*r/t,(n*n-r*r)/t,-2*r*e/t,0,0,1/t),i},en.setTransform=function(e){var t=this;this.matrix.forEach((function(n){n=t.toCanvasMatrix(n),e.transform.apply(e,n)}))},en.setPointTransform=function(e,t){for(var n=0;n<this.matrix.length;n++){var r=e*(i=this.matrix[n])[0]+t*i[3],i=e*i[1]+t*i[4];e=r,t=i}return{x:e,y:t}},en.crop=function(e,t,n,r){return this._clear(),this.all.push(e={type:"crop",left:e,top:t,width:n,height:r}),e},en.erase=function(e,t,n,r,i){return this._clear(),this.all.push(e={type:"erase",left:e,top:t,width:n,height:r,color:i}),e},en.changePageSize=function(e,t){return this._clear(),this.all.push(e={type:"changeSize",width:e,height:t}),e},en.flip=function(e){this._flipNum+=1;var t=this._tAngle/180*Math.PI,n=Math.cos(t),r=-Math.sin(t),i=-Math.sin(t);if(t=-Math.cos(t),this._flipNumX%2&&(i=-i,t=-t),this._flipNumY%2&&(n=-n,r=-r),n={x:n,y:r},r={x:i,y:t},i={x:0,y:0},t=null,0===e)this._flipNumX+=1,t=this.calcLineEquation(n,i);else{if(1!==e)return;this._flipNumY+=1,t=this.calcLineEquation(r,i)}return this.all.push(n={type:"flip",matrix:t,direction:e}),this.matrix.push(t),r=(r=this.getLatestResult())?this.calc3x3Matrix(t,r):t,this.result.push(r),n},en.calcFlipMatrix=function(e,t){return[1-2*e*e,-2*e*t,0,-2*e*t,1-2*t*t,0,0,0,1]},en.rotate=function(e,t,n,r){var i=!1,o=(null!==this._curMode&&(i=this._curMode===r||(this._clear(),!1)),this._curMode=r,this._flipNum%2&&(e=-e),this._tAngle+=e,e);return n={type:"rotate",matrix:t=this.rotateMatrix(e,t||0,n||0),mode:r,angle:e,calcAngle:o=i?this._tAngle:o},this.all.push(n),this.matrix.push(t),r=(r=this.getLatestResult())?this.calc3x3Matrix(t,r):t,this.result.push(r),n},en.translate=function(e,t){e=this.moveMatrix(e,t),this.all.push(e),this.matrix.push(e),t=(t=this.getLatestResult())?this.calc3x3Matrix(e,t):e,this.result.push(t)},en.calcTranslateDis=function(e,t){var n=this._tAngle/180*Math.PI,r=e*Math.cos(n),i=(e=-e*Math.sin(n),t*Math.sin(n));return t*=Math.cos(n),this._flipNumX%2&&(i=-i,t=-t),this._flipNumY%2&&(r=-r,e=-e),{x:r+i,y:e+t}},en.reset=function(){this.all=[],this._clear(),this._curMode=null},en.getCurAngle=function(){return this._tAngle},en._clear=function(){this.result=[],this.matrix=[],this._tAngle=0,this._flipNumX=0,this._flipNumY=0,this._flipNum=0},Ye),He=((en=Je.prototype).setTempSize=function(e,t){this.tempWidth=e,this.tempHeight=t},en.addViewer=function(e){-1===this.vws.indexOf(e)&&this.vws.push(e)},en.rmViewer=function(e){-1!==(e=this.vws.indexOf(e))&&this.vws.splice(e,1)},en.setTags=function(e){e.length<1||(this.tags=e.slice())},en.getTags=function(){return this.tags.slice()},Je),ze=(s(Ke,F=P),(en=Ke.prototype).dispose=function(){F.prototype.dispose.call(this),this._db=null},en._initEvent=function(){var e=this;this._on(ye,(function(t,n,r){e.updateSync(t,n,r)})),this._on(de,(function(t,n){n.forEach((function(t){var n,r=e._db.getMid(t);r&&(d(r.oriData)&&M.revokeObjectURL(r.oriData),d(r.minData)&&M.revokeObjectURL(r.minData),(n=r.img)&&(n.src="",n.onload=null,n.onerror=null,r.img=null)),e._db.removeMid(t),e._db.getDataAsync(t).then((function(e){d(e.oriData)&&M.revokeObjectURL(e.oriData),d(e.minData)&&M.revokeObjectURL(e.minData)})).catch((function(e){})),e._db.removeDataAsync(t),e._db.removeMetadata(t)}))})),this._on(_e,(function(t,n,r){r.forEach((function(r){var i,o=e._db.getMid(r);o&&-1!==(i=o.tags.indexOf(t))&&o.tags.splice(i,1,n),e._db.getDataAsync(r).then((function(i){var o;i.tags&&-1!==(o=i.tags.indexOf(t))&&(i.tags.splice(o,1,n),e._db.updateDataAsync(r,i).catch((function(e){})))})).catch((function(e){}))}))})),this._on(pe,(function(t,n,r){n.forEach((function(n){var r,i=e._db.getMid(n);i&&-1!==(r=i.tags.indexOf(t))&&i.tags.splice(r,1),e._db.getDataAsync(n).then((function(r){var i;r.tags&&-1!==(i=r.tags.indexOf(t))&&(r.tags.splice(i,1),e._db.updateDataAsync(n,r).catch((function(e){})))})).catch((function(e){}))}))})),this._on(me,(function(t,n,r){var i=e._db.getMid(t);i&&-1===i.tags.indexOf(n)&&i.tags.push(t),e._db.getDataAsync(t).then((function(r){r.tags&&-1===r.tags.indexOf(n)&&(r.tags.push(t),e._db.updateDataAsync(t,r).catch((function(e){})))})).catch((function(e){}))})),this._on(fe,(function(t,n,r){var i,o=e._db.getMid(t);o&&-1!==(i=o.tags.indexOf(n))&&o.tags.splice(i,1),e._db.getDataAsync(t).then((function(r){var i;r.tags&&-1!==(i=r.tags.indexOf(n))&&(r.tags.splice(i,1),e._db.updateDataAsync(t,r).catch((function(e){})))})).catch((function(e){}))}))},en.appendSync=function(e,t){return this._ckStr(e)&&this._ckArray(t)?(e=this._load(e,t),this._ok(),e):[]},en.insertSync=function(e,t,n){return this._ckStr(e)&&this._ckArray(t)?void 0===n?this.appendSync(e,t):(e=this._load(e,t,n),this._ok(),e):(this._thrEr(we),[])},en.updateSync=function(e,t,n){void 0===n&&(n=!0),this._emit(X,"Invoking DataControl#updateSync.");var r=this._db.getMid(e);if(!r)return!1;this._db.updateMetadata(e,t.metadata),t.customData&&(r.customData=t.customData),t.tags&&r.setTags(t.tags),n&&(M.revokeObjectURL(r.oriData),M.revokeObjectURL(r.minData)),r.minData=null,!r.overlays.length&&t.minData&&d(t.minData)&&(r.minData=t.minData),r.oriData=null,r.img=null,r.active=!1,r.activeMin=!1,r.minTask=null,r.edt.reset(),r.setTempSize(t.metadata.width,t.metadata.height),this._db.updateMid(e,r),t.tags||(t.tags=r.getTags()),t.customData||(t.customData=r.customData),this._db.updateDataAsync(e,t),this._emit(ie,e,t)},en._load=function(e,t,n){for(var r=this,i=[],o=[],a=t.length,s=function(e){var n={uid:b(11),data:t[e]};o.push(n),i.push(n.uid),e=Object.assign({},n.data.metadata),r._db.addMetadata(n.uid,e),r._db.addDataAsync(n.uid,n.data).then((function(e){r._emit("_addDataToDBSuccess",n.uid,e)})).catch((function(e){r._emit("_addDataToDBFailed",n.uid,e)})),e=new He(n.uid,e),n.data.minData&&d(n.data.minData)&&(e.minData=n.data.minData),e.customData=n.data.customData||{},e.setTags(n.data.tags||[]),r._db.addMid(n.uid,e)},u=0;u<a;u++)s(u);return this._emit(be,e,o,n),o.slice().forEach((function(e){r._emit(ge,e)})),i},en._convertData=function(e){return new Promise((function(t,n){var r;c(e)?t(e):((r=new XMLHttpRequest).onload=function(){var e=M.createObjectURL(r.response);t(e)},r.open("GET",e,!0),r.responseType="blob",r.send())}))},en.addData=(N=L(U().mark((function e(t,n){var r=this;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._ckStr(t)&&c(n)){e.next=3;break}return this._thrEr(we),e.abrupt("return",this._err(we.message));case 3:return e.next=5,this._db.addDataAsync(t,n).then((function(e){return r._ok(),e})).catch((function(e){return r._thrEr(Fe),r._err(Fe.message)}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return N.apply(this,arguments)}),en.getData=(B=L(U().mark((function e(t){var n=this;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._ckStr(t)){e.next=3;break}return this._thrEr(we),e.abrupt("return",this._err(we.message));case 3:return e.next=5,this._db.getDataAsync(t).then((function(e){return n._ok(),Promise.resolve(e)})).catch((function(e){return n._thrEr(Ee),n._err(Ee.message)}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return B.apply(this,arguments)}),en.removeData=(O=L(U().mark((function e(t){var n=this;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._ckStr(t)){e.next=3;break}return this._thrEr(we),e.abrupt("return",this._err(we.message));case 3:return e.next=5,this._db.removeDataAsync(t).then((function(e){return n._ok(),e})).catch((function(e){return n._thrEr(We),n._err(We.message)}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return O.apply(this,arguments)}),en.updateData=(W=L(U().mark((function e(t,n){var r=this;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._ckStr(t)){e.next=3;break}return this._thrEr(we),e.abrupt("return",this._err(we.message));case 3:return e.next=5,this._db.updateDataAsync(t,n).then((function(e){return r._ok(),e})).catch((function(e){return r._thrEr(Ee),r._err(Ee.message)}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return W.apply(this,arguments)}),en._err=function(e){return Promise.reject(new Error(e))},en._ckArray=function(e){return!!u(e)||(this._thrEr(we),!1)},en._ckStr=function(e){return!!d(e)||(this._thrEr(we),!1)},en._thrEr=function(e){this._emit(Y,e)},en._ok=function(){this._emit(Y,Se)},Ke);function Ke(e,t,n){var r=F.call(this,t)||this;return r._db=n,r._on(Ie,(function(e,t){r.appendSync(e,t)})),r._initEvent(),r}function Je(e,t){this.uid=null,this.minData=null,this.oriData=null,this.customData={},this.tags=[],this.active=!1,this.activeMin=!1,this.minTask=null,this.load=!1,this.show=[],this.overlays=[],this.img=null,this.edt=null,this.vws=[],this.oriType=null,this.minType=null,this.tempWidth=0,this.tempHeight=0,this.uid=e,this.setTempSize(t.width,t.height),this.edt=new je}function Ye(){this.matrix=[],this.all=[],this.result=[],this._flipNum=0,this._flipNumX=0,this._flipNumY=0,this._tAngle=0,this._curMode=null}function Xe(){return(Xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ze(e,t,n){t&&Qe(e.prototype,t),n&&Qe(e,n),Object.defineProperty(e,"prototype",{writable:!1})}function qe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(en=Ht.prototype).bind=function(e){this.canvas=e,this.ctx=e.getContext("2d"),this.ctx.imageSmoothingEnabled=!1},en.unbind=function(){this.canvas=null,this.ctx=null},en.clear=function(e,t,n,r){var i;null!=(i=this.canvas)&&i.clearRect(e,t,n,r)},en.size=function(e,t){this.cssWidth=e,this.cssHeight=t,this.innerWidth=e*this.dpr,this.innerHeight=t*this.dpr},en.dispose=function(){this.unbind()},s(jt,vt=V=Ht),(en=jt.prototype).setMaskColor=function(e){this.maskColor=e},en.getMaskColor=function(){return this.maskColor};var $e=jt,et=(s(Gt,_t=V),Gt.prototype.setBackGroundColor=function(e){this.canvas.style.background=e},Gt),tt=((en=Ut.prototype).updateDpr=function(e){this.mainCvs.dpr=e,this.cropCvs.dpr=e},en.bind=function(e){var t,n=e.main;e=e.cropper,n&&null!=(t=this.mainCvs)&&t.bind(n),e&&null!=(n=this.cropCvs)&&n.bind(e)},en.unbind=function(e){"main"===e&&this.mainCvs&&(this.mainCvs.innerWidth=1,this.mainCvs.innerHeight=1,this.mainCvs.unbind()),"cropper"===e&&this.cropCvs&&(this.cropCvs.innerWidth=1,this.cropCvs.innerHeight=1,this.cropCvs.unbind())},en.setCanvasSize=function(e,t){var n;null!=(n=this.mainCvs)&&n.size(e,t),null!=(n=this.cropCvs)&&n.size(e,t)},en.dispose=function(){var e;null!=(e=this.cropCvs)&&e.dispose(),(this.cropCvs=null)!=(e=this.mainCvs)&&e.dispose(),this.mainCvs=null},Ut),nt=(s(Vt,pt=P),(en=Vt.prototype)._initEvent=function(){var e=this;pt.prototype._on.call(this,q,(function(t){e.renderPageUid=t})),pt.prototype._on.call(this,$,(function(t){t||(e.renderPageUid=null),e.curPageUid=t}))},en.setSlidePages=function(e){if(this.wrapper){for(var t=0;t<3;t++){var n=e[t];if(n.index!==this.targetIndexes[t]||-1<n.index&&""===n.url)return}this.pages=e,this.isNew=!0,this.allowDrag=!1,this.isVisible||this.showPages()}},en.showPages=function(){var e,t=this;this.loading||this.isNew&&(this.loading=!0,this.isNew=!1,e=[],this.pages.forEach((function(n,r){var i=new Promise((function(e,i){var o,a=null==(o=t.wrapper)||null==(o=o.children[r])?void 0:o.children[0],s=n.index;if(a)if(a.style.width=n.width+"px",a.style.height=n.height+"px",a.src!==n.url){if(""===n.url)return a.src=n.url,a.onload=null,a.onerror=null,e(-1);a.onload=function(){a.onload=null,a.onerror=null,e(s)},a.onerror=function(){a.onload=null,a.onerror=null,e(s)},a.src=n.url}else e(s);else i(s)}));e.push(i)})),Promise.all(e).then((function(e){t.allowDrag=!0;for(var n=0;n<e.length;n++)if(e[n]!==t.targetIndexes[n]){t.allowDrag=!1;break}t.loading=!1,t.showPages()})).catch((function(e){})))},en.startHandler=function(e){!this.isDragging&&this.allowDrag&&(clearTimeout(this.hideTimer),this.startTime=e.timeStamp,e.touches?(this.touchNum=e.touches.length,this.startX=e.touches[0].pageX):this.startX=e.pageX,this.isStart=!0)},en.moveHandler=function(e){var t;!this.isStart||2<this.touchNum||(e=(e.touches?e.touches[0]:e).pageX-this.startX,Math.abs(e)>this.triggerDist&&(this.isDragging=!0,null!=(t=this.stateCb)&&t.call(this,!0),this._visible(!0),(t=this.width)<e?e=t:e<-t&&(e=-t)),this._translateX(e))},en.endHandler=function(e){var t,n,r,i,o=this;this.isStart&&(t=!0,(!e||e.touches&&(1<this.touchNum||1!==e.changedTouches.length))&&(t=!1),this.isStart=!1,n=(e=e||{}).pageX-this.startX,r=this._calcDirection(e=e.timeStamp-this.startTime,n,t),i=this,(d(r)?this._oPub.emitEx("preSlide",r):Promise.resolve(!0)).then((function(){r&&(o.allowDrag=!1);var e=o._calcSlidingDistance(r);i._transition("transform 0.2s linear"),o._translateX(e),setTimeout((function(){var e;o.wrapper&&(o.isDragging=!1,null!=(e=o.stateCb)&&e.call(o,!1))}),200),r&&setTimeout((function(){var e;o.isDisposed||null!=(e=o.slideEndCallback)&&e.call(o,r)}),205),i._hideSlide()})))},en._calcDirection=function(e,t,n){if(n){var r,i=this.minDistanceThreshold,o=this.minTimeThreshold,a=this.triggerDist;if(-1!==(null==(r=(n=this.pages)[0])?void 0:r.index)&&(i<t||e<o&&a<t))return j;if(-1!==(null==(r=n[2])?void 0:r.index)&&(t<-i||e<o&&t<-a))return H}return null},en._calcSlidingDistance=function(e){return e===j?this.width:e===H?-this.width:0},en._hideSlide=function(){var e=this;this.curPageUid!==this.renderPageUid||this.pages[1].uid!==this.curPageUid||this.isDragging?(clearTimeout(this.hideTimer),this.hideTimer=setTimeout((function(){e.isDisposed||e._hideSlide()}),210)):(this._visible(!1),this.showPages(),this._transition(""),this._translateX(0))},en._translateX=function(e){this.wrapper&&(this.wrapper.style.transform="translateX(".concat(e,"px)"))},en._visible=function(e){this.wrapper&&(this.wrapper.style.visibility=e?"visible":"hidden"),this.isVisible=e},en._transition=function(e){this.wrapper&&(this.wrapper.style.transition=e)},en.bindSlideEndCallback=function(e){this.slideEndCallback=e},en.bind=function(e){this.wrapper=e},en.unbind=function(){this.wrapper=null},en.setSlideSize=function(e){if(!this.wrapper)return!1;e<120&&(this.minDistanceThreshold=e/2),this.width=e,this.wrapper.style.width=3*e+"px",this.wrapper.style.left=-e+"px";for(var t=0;t<3;t++)this.wrapper.children[t].style.width=e+"px"},en.dispose=function(){pt.prototype.dispose.call(this),this._hideSlide(),this.unbind(),this.isDisposed=!0},Vt),rt=((en=Nt.prototype).resize=function(e,t,n,r,i,o){return this.useWorker?this.resizeWithWorker(e,t,n,r,i,o):this.resizeWithoutWorker(e,r,i,o)},en.resizeWithoutWorker=function(e,t,n,r){for(var i=e.width,o=e.height,a=(t=Math.round(t),o/(n=Math.round(n))),s=e.getContext("2d"),u=[],c=2*Math.ceil(o/this.cores/2),l=[],d=-1,h=0;h<this.cores;h++){var g,f=d+1;o<=f||(d=f+c-1,d=Math.min(d,o-1),g=Math.min(c,o-f),u[h]={},u[h].source=s.getImageData(0,f,i,c),u[h].target=!0,u[h].start_y=Math.ceil(f/a),u[h].height=g,f={width_source:i,height_source:u[h].height,width:t,height:Math.ceil(u[h].height/a),core:h,source:u[h].source.data.buffer||u[h].source.data},l[h]=f)}for(var m=l.length,p=[],_=0;_<m;_++){for(var v=(M=l[_]).core,I=M.width_source,y=M.height_source,b=M.width,D=M.height,T=I/b,S=y/D,w=Math.ceil(T/2),C=Math.ceil(S/2),E=new Uint8ClampedArray(M.source),M=b*D*4,P=new ArrayBuffer(M),A=new Uint8ClampedArray(P,0,M),x=0;x<D;x++)for(var R=0;R<b;R++){for(var k=4*(R+x*b),L=0,F=0,W=0,O=0,B=0,N=0,V=0,U=x*S,G=Math.floor(R*T),j=Math.ceil((R+1)*T),H=Math.floor(x*S),z=Math.ceil((x+1)*S),K=(j=Math.min(j,I),z=Math.min(z,y),H);K<z;K++)for(var J=Math.abs(U-K)/C,Y=R*T,X=J*J,Q=G;Q<j;Q++){var Z=Math.abs(Y-Q)/w;1<=(Z=Math.sqrt(X+Z*Z))||(V+=(L=2*Z*Z*Z-3*Z*Z+1)*E[3+(Z=4*(Q+K*I))],W+=L,O+=(L=E[3+Z]<255?L*E[3+Z]/250:L)*E[Z],B+=L*E[1+Z],N+=L*E[2+Z],F+=L)}A[k]=O/F,A[1+k]=B/F,A[2+k]=N/F,A[3+k]=V/W}p.push({core:v,target:A})}for(var q=0;q<m;q++){var $=p[q],ee=Math.ceil(u[q].height/a);if(u[q].target=s.createImageData(t,ee),u[q].target.data.set)u[q].target.data.set($.target);else for(var te=u[q].target.data.length,ne=0;ne<te;ne++)u[q].target.data[ne]=$.target[ne]}return Promise.resolve(u)},en.resizeWithWorker=function(e,t,n,r,i,o){for(var a=this,s=Math.floor(t),u=Math.floor(n),c=(r=Math.round(r),u/(i=Math.round(i))),l=e.getContext("2d"),d=[],h=2*Math.ceil(u/this.cores/2),g=-1,f=0;f<this.cores;f++){var m,p,_=g+1;u<=_||(g=_+h-1,g=Math.min(g,u-1),m=Math.min(h,u-_),d[f]={},d[f].source=l.getImageData(0,_,s,h),d[f].target=!0,p=Math.ceil(_/c),d[f].start_y=p,d[f].height=m,d[f].height_part=Math.ceil((_+m)/c)-p)}e=l=null;for(var v=[],I=function(e){if(null==d[e])return"continue";var t=new Worker(a.workerBlobURL),i=new Promise((function(e,n){t.onmessage=function(i){t.terminate(),t.onmessage=null,t.onerror=null,t=null,i.data.taskUid!==a.taskUid&&n(!1);var o=i.data.core,s=d[o].height_part;if(d[o].target=document.createElement("canvas").getContext("2d").createImageData(r,s),d[o].target.data.set)d[o].target.data.set(i.data.target);else for(var u=d[o].target.data.length,c=0;c<u;c++)d[o].target.data[c]=i.data.target[c];e(o)},t.onerror=function(e){t.terminate(),t.onmessage=null,t.onerror=null,t=null,n(e)}}));v.push(i),i={width_source:s,height_source:d[e].height,width:r,height:d[e].height_part,core:e,source:d[e].source.data.buffer||d[e].source.data,taskUid:o};try{t.postMessage(i,[i.source])}catch(n){t.postMessage(i)}},y=0;y<this.cores;y++)I(y);return Promise.all(v).then((function(e){return Promise.resolve(d)})).catch((function(e){return Promise.reject(e)}))},Nt),it=(s(Bt,ft=P),(mt=Bt.prototype).updateDpr=function(){var e=S();this.dpr=e,this.cvsMng.updateDpr(e),this.tabItem&&this.tabItem.chs.forEach((function(t){t.cropMng.updateDpr(e)}))},mt.setAllowSlide=function(e){this.allowSlide=e},mt.setSlidePages=function(e){var t;null!=(t=this.slide)&&t.setSlidePages(e)},mt.checkDisplay=function(e,t){return"single"!==t.disMode||!(!(t=t.getCurPage())||e!==t.uid)},mt.initGraphic=function(e){var t=e.uid;this.curPages=e.chs,t!==this.curTab&&(this.curTab=t,this.tabItem=e,this.virH=e.virH||0,this.virW=e.virW||0,this.fitType=e.fitType,this.clickZoom=e.clickZoom,this.isFreeCrop=e.isFreeCrop,this.scrL=e.scrL,this.scrT=e.scrT,this.zoom=e.zoom,this.iMargin=e.iMargin,this.oMargin=e.oMargin,this.direction=e.direction,this.disMode=e.disMode,this.opMode=e.opMode)},mt.render=function(e){var t,n,r,i,o,a,s,u,c,l,d,h,g=this;this.tabItem&&(t=this.tabItem.getCurPage())&&t.uid===e&&(n=this._db.getMid(e),i=this.cvsMng.mainCvs.ctx,(r=n.img)&&i&&(o=Math.round(t.style.left-this.scrL+t.style.width/2),a=Math.round(t.style.top-this.scrT+t.style.height/2),(s=this.offScreenCanvas).render(u={viewerUid:"",pageUid:e,isMin:!1,img:r,page:t,midData:n}),l=(c=s.mainCanvas).width*(d=t.style.width/s.mainWidth),d*=c.height,i.clearRect(0,0,this.cvsInnerW,this.cvsInnerH),i.save(),i.imageSmoothingEnabled=!1,i.mozImageSmoothingEnabled=!1,i.webkitImageSmoothingEnabled=!1,i.msImageSmoothingEnabled=!1,i.oImageSmoothingEnabled=!1,i.scale(this.dpr,this.dpr),i.translate(o,a),i.drawImage(c,Math.round(-t.style.width/2),Math.round(-t.style.height/2),Math.round(l),Math.round(d)),this._handleOverlay((null==n?void 0:n.overlays)||[],t,i),i.restore(),this.workerTimer&&clearTimeout(this.workerTimer),h=b(11),this.renderTaskUid=h,this.hermite&&(this.hermite.taskUid=this.renderTaskUid),this.useHermite&&this.zoom<1&&this.hermite&&(this.workerTimer=setTimeout((function(){var n,l,d,f;g.isDisposed||!g.offScreenCanvas||s.isDisposed||g.hermite.taskUid===h&&r.naturalWidth&&r.naturalHeight&&(s.render(u),l=(n=document.createElement("canvas")).getContext("2d"),f=s.mainHeight,n.width=d=s.mainWidth,n.height=f,l.imageSmoothingEnabled=!1,l.drawImage(c,0,0),null!=(l=g.hermite)&&l.resize(n,d,f,t.style.width*g.dpr||1,t.style.height*g.dpr||1,g.renderTaskUid).then((function(t){var n,r=g._db.getMid(e);r&&g.tabItem&&(n=g.tabItem.getCurPage())&&n.uid===e&&(i.save(),i.clearRect(0,0,g.cvsInnerW,g.cvsInnerH),t.forEach((function(e){var t=0+Math.round((n.style.left-g.scrL)*g.dpr),r=e.start_y+Math.round((n.style.top-g.scrT)*g.dpr);i.putImageData(e.target,t,r)})),i.scale(g.dpr,g.dpr),i.translate(o,a),g._handleOverlay((null==r?void 0:r.overlays)||[],n,i),i.restore(),ft.prototype._emit.call(g,q,e))})).catch((function(t){ft.prototype._emit.call(g,q,e)})))}),100)),"single"===this.disMode&&(this.useHermite&&this.zoom<1&&this.hermite||ft.prototype._emit.call(this,q,e),ft.prototype._emit.call(this,"pageRendered",this.tabItem.cur))))},mt._handleOverlay=function(e,t,n){var r=this;e.forEach((function(e){0<t.style.width-e.width*r.zoom&&0<t.style.height-e.height*r.zoom&&(n.save(),n.globalAlpha=e.opacity,n.fillStyle=e.color,n.fillRect(-t.style.width/2+e.left*r.zoom,-t.style.height/2+e.top*r.zoom,Math.min(t.style.width-e.left*r.zoom,e.width*r.zoom),Math.min(t.style.height-e.top*r.zoom,e.height*r.zoom)),n.restore())}))},mt.drawSltBox=function(e){var t=this,n=this.cvsMng.cropCvs.ctx;n&&(n.imageSmoothingEnabled=!1,n.clearRect(0,0,this.cvsInnerW,this.cvsInnerH),1===this.opMode&&(n.save(),n.scale(this.dpr,this.dpr),n.lineJoin="round",e.cropMng.cropBoxes.forEach((function(e){for(var r=(m=e.cropBoxStyle).ctrlBorderWidth,i=m.ctrlBackground,o=m.ctrlBorderColor,a=m.ctrlBorderRadius,s=m.ctrlWidth,u=m.ctrlHeight,c=m.borderColor,l=m.borderWidth,d=m.invalidBorderColor,h=m.invalidCtrlBorderColor,g=m.background,f=m.dashLine,m=m.enableConcaveBorderColor,p=e.probePoints.slice(0,8),_=e.midpoints.slice(0,8),v=0;v<4;v++){var I=t.toCanvasCoordinate(p[2*v],p[2*v+1]),y=t.toCanvasCoordinate(_[2*v],_[2*v+1]);p[2*v]=I.x,p[2*v+1]=I.y,_[2*v]=y.x,_[2*v+1]=y.y}n.save();try{n.setLineDash(f)}catch(ce){}n.fillStyle=g,n.lineWidth=l,n.strokeStyle=m&&!e.isConvex?d:c,n.beginPath(),n.moveTo(p[0],p[1]),n.lineTo(p[2],p[3]),n.lineTo(p[4],p[5]),n.lineTo(p[6],p[7]),n.closePath(),n.stroke(),n.restore(),n.lineWidth=r,n.fillStyle=i,n.strokeStyle=m&&!e.isConvex?h:o;for(var b=Math.min(a,s/2),D=Math.min(a,u/2),T=0;T<4;T++)t.drawRoundedRectangle(n,{x:p[2*T],y:p[2*T+1],width:s,height:u,radiusX:b,radiusY:D}),n.stroke(),""!==i&&n.fill(),t.drawRoundedRectangle(n,{x:_[2*T],y:_[2*T+1],width:s,height:u,radiusX:b,radiusY:D}),n.stroke(),""!==i&&n.fill()})),n.restore()))},mt.drawRoundedRectangle=function(e,t){var n=t.width,r=t.height,i=t.radiusX,o=t.radiusY,a=t.x,s=[{x:a-n/2+i,y:(t=t.y)-r/2+o,start:Math.PI,end:3*Math.PI/2},{x:a+n/2-i,y:t-r/2+o,start:3*Math.PI/2,end:2*Math.PI},{x:a+n/2-i,y:t+r/2-o,start:0,end:Math.PI/2},{x:a-n/2+i,y:t+r/2-o,start:Math.PI/2,end:Math.PI}];if(e.beginPath(),e.ellipse)for(var u=0;u<4;u++){var c=s[u];e.ellipse(c.x,c.y,i,o,0,c.start,c.end)}else e.rect(a-n/2,t-r/2,n,r);e.closePath()},mt.clearCanvas=function(){var e=this.cvsMng.mainCvs.ctx;e&&e.clearRect(0,0,this.cvsInnerW,this.cvsInnerH)},mt._layoutSingle=function(e,t,n){var r,i,o,a,s,u,c,l,d,h,g,f=e.getCurPage();f&&(d=this._db.getMetadata(f.uid),c=this._db.getMid(f.uid)),f&&d&&c?(r=d.width,i=d.height,o=d.width,a=d.height,u=s=null,(c=c.edt.all).forEach((function(e){var t,n;"rotate"===e.type?(0===e.mode&&(u=w(0,0,o,a,e.calcAngle)),null!==s&&s!==e.mode&&(o=r,a=i),s=e.mode,u&&(t=(n=u).width,r=t,i=n=n.height)):"crop"!==e.type&&"changeSize"!==e.type||(o=r=t=e.width,a=i=n=e.height)})),null!=f&&f.setNaturalSize(r,i),c=(d=this._calcZoom(e,r||0,i||.1)).zoom,h=d.canvasWidth,g=d.canvasHeight,l=d.virW,d=d.virH,this.setCanvasSize(h,g),f.cropMng.setZoom(c=c||1),this.virW=l,this.virH=d,n||ft.prototype._emit.call(this,te,{width:this.virW,height:this.virH,x:this.scrL,y:this.scrT}),g=(this.cvsCltH-d)/2,(h=(this.cvsCltW-l)/2)<0&&(t&&(this._srL=Math.abs(h)),h=0),g<0&&(t&&(this._srT=Math.abs(g)),g=0),f.setBorder(e.pageBorderWidth),f.setSize(l,d),f.setPosition(h,g),e.virW=l,e.virH=d,this._zoomTo(c,!1,t),this.setVirtualSize(l,d),this._zoomTo(c,!1,t),this.zoom!==c&&(this.zoom=c),n||ft.prototype._emit.call(this,te,{width:l,height:d,x:this.scrL,y:this.scrT})):ft.prototype._emit.call(this,te,{width:1,height:1,x:0,y:0})},mt._calcZoom=function(e,t,n){return"window"===e.fitType?this._calFitWindow(t,n):"width"===e.fitType?this._calcFitWidth(t,n):"height"===e.fitType?this._calcFitHeight(t,n):this.keepZoom&&"none"===e.fitType?this._calcKeepZoom(t,n):this._calFitWindow(t,n)},mt.calcZoomForSlide=function(e,t){return e=this._calFitWindow(e,t).zoom,Math.min(Math.max(this.minZoom,e),this.maxZoom)},mt._calcKeepZoom=function(e,t){var n=this.zoom,r=this.cvsOffW,i=this.cvsOffH;return r<(e*=n)&&(i-=this.scrBarW),i<(t*=n)&&(r-=this.scrBarW),{zoom:n,canvasWidth:r,canvasHeight:i,virW:e,virH:t}},mt._calcFitWidth=function(e,t){var n=1,r=0,i=this.cvsOffW,o=this.cvsOffH;return o<(r=t*(n=e<=this.cvsOffW?1:this.cvsOffW/e))&&(r=t*(n=e<=this.cvsOffW-this.scrBarW?1:(this.cvsOffW-this.scrBarW)/e))>this.cvsOffH&&(i-=this.scrBarW),{zoom:n,canvasWidth:i,canvasHeight:o,virW:e*n,virH:r}},mt._calcFitHeight=function(e,t){var n=1,r=0,i=0,o=this.cvsOffW;return i=this.cvsOffH,o<(r=e*(n=t<=this.cvsOffH?1:this.cvsOffH/t))&&(r=e*(n=t<=this.cvsOffH-this.scrBarW?1:(this.cvsOffH-this.scrBarW)/t))>this.cvsOffW&&(i-=this.scrBarW),{zoom:n,canvasWidth:o,canvasHeight:i,virW:r,virH:t*n}},mt._calFitWindow=function(e,t){return e<=this.cvsCltW&&t<=this.cvsCltH||e>this.cvsCltW&&t<=this.cvsCltH||!(e<=this.cvsCltW&&t>this.cvsCltH)&&e/this.cvsCltW>=t/this.cvsCltH?this._calcFitWidth(e,t):this._calcFitHeight(e,t)},mt._getPage=function(e){for(var t=this.curPages.length,n=0;n<t;n++)if(this.curPages[n].uid===e)return{page:this.curPages[n],index:n}},mt.setFitType=function(e){this.fitType=e,this.tabItem&&(this.tabItem.fitType=e)},mt._setValidArea=function(){this.setValidArea(this.cvsCltW,this.cvsCltH,this.virW,this.virH)},mt._setScrollerPosition=function(){var e=this.cvsMng.mainCvs.canvas;if(e){var t={left:0,top:0,right:0,bottom:0,width:0,height:0};try{t=e.getBoundingClientRect()}catch(h){}this.setPosition(t.left+window.pageXOffset+(null==e?void 0:e.clientLeft)||0,t.top+window.pageYOffset+(null==e?void 0:e.clientTop)||0)}},mt.setCanvasOffsetSize=function(e,t){var n=!1;return this.cvsOffW===e&&this.cvsOffH===t&&(n=!0),this.cvsOffW=e,this.cvsOffH=t,this.cvsCltW=e,this.cvsCltH=t,this.cvsInnerW=e*this.dpr,this.cvsInnerH=t*this.dpr,this.cvsMng.setCanvasSize(e,t),null!=(t=this.slide)&&t.setSlideSize(e),this._setScrollerPosition(),n},mt.setCanvasSize=function(e,t){this.cvsCltW=e,this.cvsCltH=t,this.cvsInnerW=e*this.dpr,this.cvsInnerH=t*this.dpr,this.cvsMng.setCanvasSize(e,t)},mt.setVirtualSize=function(e,t){this.virW=e||0,this.virH=t||0,this._setValidArea()},mt.setZoom=function(e){return e=Math.max(Math.min(this.maxZoom,e),this.minZoom),this.zoom=e,this.tabItem&&this.tabItem.total||(this._zoom=e),this.setFitType("none"),ft.prototype._emit.call(this,"_onRender"),0===this._maxSrL&&0===this._maxSrT&&ft.prototype._emit.call(this,"_getSlidePages"),!0},mt.getZoom=function(){return this.zoom},mt.zoomTo=function(e,t,n,r){return this.zoom=e,this._zoomTo(e,t,!1,n,r),this.setFitType("none"),ft.prototype._emit.call(this,"_onRender"),0===this._maxSrL&&0===this._maxSrT&&ft.prototype._emit.call(this,"_getSlidePages"),this._zoom},mt.scrollTo=function(e,t,n,r){this._scrollTo(e,t,!1),ft.prototype._emit.call(this,"_onRender")},mt.zoomIn=function(){var e=this.zoom;return this._zoomTo(e*=this.zoomInDelta,!1),this.setFitType("none"),ft.prototype._emit.call(this,"_onRender"),0===this._maxSrL&&0===this._maxSrT&&ft.prototype._emit.call(this,"_getSlidePages"),e},mt.zoomOut=function(){var e=this.zoom;return this._zoomTo(e/=this.zoomInDelta,!1),this.setFitType("none"),ft.prototype._emit.call(this,"_onRender"),0===this._maxSrL&&0===this._maxSrT&&ft.prototype._emit.call(this,"_getSlidePages"),e},mt.getMinPageData=function(){var e=document.createElement("canvas"),t=e.getContext("2d"),n=this.offScreenCanvas,r=(e.dvsUid="useToGetMinPageData",n.mainWidth),i=n.mainHeight,o=r/i,a=((800<r||800<i)&&(1<=o?i=(r=800)/o:r=(i=800)*o),e.width=r,e.height=i,o=r/n.mainWidth,o*=n.mainCanvas.width,n.mainCanvas.height*(a=i/n.mainHeight));return t.drawImage(n.mainCanvas,0,0,Math.floor(o),Math.floor(a)),n=t.getImageData(0,0,r,i),e.width=1,e.height=1,t.fillRect(0,0,1,1),e=null,n},mt.setSaveBackgroundColor=function(e){this.saveBg=e,this.offScreenCanvas.saveColor=e},mt.onCanvasTouchstart=function(e){var t,n,r,i,o,a;e.cancelable&&e.preventDefault(),e.touches[0]&&e.touches[0].target&&e.touches[0].target.tagName.match(/input|textarea|select/i)||"single"===this.disMode&&"single"===this.disMode&&this.tabItem&&0!==this.tabItem.total&&(this._mousedown=!0,e.target.tagName.match(/input|textarea|select/i)||(t=e.touches[0].pageX,n=e.touches[0].pageY,0===this.opMode?(this._pageX=t,this._pageY=n,this.allowSlide&&0===this._maxSrL&&0===this._maxSrT&&!this.slide.isDragging&&null!=(r=this.slide)&&r.startHandler(e),this.isSliding||(1<e.targetTouches.length&&(this._startDistance=this._calDistance(e.targetTouches)),this.startHandler(e.targetTouches,e.timeStamp))):1===this.opMode?this.checkMouseOverPage(e)&&(r=this.tabItem.getCurPage())&&(i=this.getMouseCoordinate(e),i=this.toPageCoordinate(i.x,i.y),!(o=!1)===e.ctrlKey&&(o=!0),a=this.tabItem.cur,null!==r.cropMng.checkSelect(i.x,i.y)||o||0<r.cropMng.cropBoxes.length&&ft.prototype._emit.call(this,K,a),r.cropMng.onStartHandler(i.x,i.y,o)):2===this.opMode&&this.checkMouseOverPage(e)&&(this.setFitType("none"),this._setScrollerPosition(),this._zoomTo(this._zoom*this.zoomInDelta,!1,!1,t-this._outerLeft,n-this._outerTop),ft.prototype._emit.call(this,"_onRender"))))},mt.onCanvasTouchmove=function(e){if("single"===this.disMode&&this.tabItem){var t=this.tabItem.getCurPage();if(t&&this._mousedown){if(0===this.opMode)if(this.allowSlide&&0===this._maxSrT&&0===this._maxSrL&&1===e.targetTouches.length)null!=(t=this.slide)&&t.moveHandler(e);else{if(this.isSliding)return;(t=1)<e.targetTouches.length&&(t=this._calDistance(e.targetTouches)/this._startDistance,this.fitType="none",this.tabItem.fitType="none",e.scale&&(t=e.scale)),this.moveHandler(e.targetTouches,e.timeStamp,t),ft.prototype._emit.call(this,"_onRender"),0===this._maxSrL&&0===this._maxSrT&&ft.prototype._emit.call(this,"_getSlidePages")}this._mousedown=!0}}},mt.onCanvasTouchend=function(e){},mt.onDocumentTouchend=function(e){},mt.onCanvasMousedown=function(e){var t,n,r,i;"single"===this.disMode&&this.tabItem&&0!==this.tabItem.total&&(this._mousedown=!0,e.cancelable&&e.preventDefault(),e.target.tagName.match(/input|textarea|select/i)||(0===this.opMode?(this._pageX=e.pageX,this._pageY=e.pageY,this.allowSlide&&0===this._maxSrL&&0===this._maxSrT&&!this.slide.isDragging?null!=(t=this.slide)&&t.startHandler(e):this.startHandler([{pageX:e.pageX,pageY:e.pageY}],e.timeStamp)):1===this.opMode?this.checkMouseOverPage(e)&&(t=this.tabItem.getCurPage())&&(n=this.getMouseCoordinate(e),n=this.toPageCoordinate(n.x,n.y),!(r=!1)===e.ctrlKey&&(r=!0),i=this.tabItem.cur,null!==t.cropMng.checkSelect(n.x,n.y)||r||0<t.cropMng.cropBoxes.length&&ft.prototype._emit.call(this,K,i),t.cropMng.onStartHandler(n.x,n.y,r)):2===this.opMode&&this.checkMouseOverPage(e)&&(this.setFitType("none"),this._setScrollerPosition(),this._zoomTo(this._zoom*this.zoomInDelta,!1,!1,e.pageX-this._outerLeft,e.pageY-this._outerTop),ft.prototype._emit.call(this,"_onRender"),0===this._maxSrL&&0===this._maxSrT&&ft.prototype._emit.call(this,"_getSlidePages"))))},mt.onCanvasMousemove=function(e){this._mousedown&&e.cancelable&&e.preventDefault()},mt.onCanvasMouseup=function(e){},mt.onDocumentMousemove=function(e){var t,n,r;"single"===this.disMode&&this.tabItem&&(t=this.tabItem.getCurPage())&&(n=this.getMouseCoordinate(e),n=this.toPageCoordinate(n.x,n.y),this._mousedown?(1===this.opMode?void 0!==this.checkMouseOverPage(e)&&(!(r=!1)===e.ctrlKey&&(r=!0),t.cropMng.setAspectRatio(this.aspectRatio),t.cropMng.setKeepAspectRatio(!0===e.shiftKey||this.keepAspectRatio),t.cropMng.onMoveHandler(n.x,n.y,r),ft.prototype._emit.call(this,"_onRenderBoxes")):0!==this.opMode||e.touches||(this.allowSlide&&0===this._maxSrT&&0===this._maxSrL?null!=(r=this.slide)&&r.moveHandler(e):0===this._maxSrL&&0===this._maxSrT||(this.moveHandler([{pageX:e.pageX,pageY:e.pageY}],e.timeStamp),ft.prototype._emit.call(this,"_onRender"))),this._mousedown=!0):0<t.cropMng.cropBoxes.length&&(null!==(r=t.cropMng.checkSelectForCursor(n.x,n.y))?(e=null,"move"===r.position?e="move":"nw"!==r.position&&"se"!==r.position&&"ne"!==r.position&&"sw"!==r.position&&"e"!==r.position&&"w"!==r.position&&"n"!==r.position&&"s"!==r.position||(e=r.position+"-resize"),ft.prototype._emit.call(this,ne,e)):ft.prototype._emit.call(this,ne,this.defaultCursor)))},mt._calDistance=function(e){return Math.sqrt(Math.pow(e[0].pageX-e[1].pageX,2)+Math.pow(e[0].pageY-e[1].pageY,2))},mt.onDocumentMouseup=function(e){var t,n;this._mousedown&&(1===this.opMode?this.tabItem&&"single"===this.tabItem.disMode&&(n=this.tabItem.getCurPage())&&(n.cropMng.onEndHandler(),t=this.tabItem.cur,0<(n=n.cropMng.getRectArr()).length&&ft.prototype._emit.call(this,z,t,n),ft.prototype._emit.call(this,"_onRenderBoxes")):0===this.opMode&&(this.clickZoom&&this._pageX===e.pageX&&this._pageY===e.pageY&&(t=this.getPosition(),this._zoomTo(this.zoom*this.zoomInDelta,!1,!1,e.pageX-t.left,e.pageY-t.top),ft.prototype._emit.call(this,"_onRender")),this.allowSlide&&null!=(n=this.slide)&&n.endHandler(e),this.endHandler(e&&e.timeStamp||0)),this._mousedown=!1)},mt.onCanvasWheel=function(e){this.isSliding||this._onWheelHandler(e)},mt.onCanvasScroll=function(e){e&&e.target&&(this._scrollTo(e.target.scrollLeft,e.target.scrollTop,!1),ft.prototype._emit.call(this,"_onRender"),ft.prototype._emit.call(this,"_onRenderBoxes"))},mt._onWheelHandler=function(e){var t=0,n=e.wheelDelta||-e.deltaY;e.ctrlKey?(e.cancelable&&e.preventDefault(),t=0<n?1.05:.95,this.fitType="none",this.tabItem.fitType="none",this.zoomHandler(n,e.timeStamp,e.pageX,e.pageY),ft.prototype._emit.call(this,"_onRender"),ft.prototype._emit.call(this,"_onRenderBoxes"),0===this._maxSrL&&0===this._maxSrT&&ft.prototype._emit.call(this,"_getSlidePages")):e.shiftKey?0!==this._maxSrL&&(e.cancelable&&e.preventDefault(),t=n<0?30:-30,(0!==this._srL&&t<0||this._srL!==this._maxSrL&&0<t)&&(this._scrollTo(this.scrL+t,this.scrT,!1),ft.prototype._emit.call(this,"_onRender"),ft.prototype._emit.call(this,"_onRenderBoxes"))):0!==this._maxSrT&&(e.cancelable&&e.preventDefault(),t=n<0?30:-30,(0!==this._srT&&t<0||this._srT!==this._maxSrT&&0<t)&&(this._scrollTo(this.scrL,this.scrT+t,!1),ft.prototype._emit.call(this,"_onRender"),ft.prototype._emit.call(this,"_onRenderBoxes")))},mt.checkMouseOverPage=function(e){if(!this.tabItem)return!1;var t=this.tabItem.getCurPage();if(!t)return!1;e=this.getMouseCoordinate(e);var n=(e=this.toPageCoordinate(e.x,e.y)).x;return e=e.y,0<=n&&n<=t.naturalWidth&&0<=e&&e<=t.naturalHeight},mt.toCanvasCoordinate=function(e,t){var n=this.tabItem.getCurPage();return{x:e=e*this.zoom+n.style.left-this.scrL,y:t=t*this.zoom+n.style.top-this.scrT}},mt.toPageCoordinate=function(e,t){var n=this.tabItem.getCurPage();return{x:e=(e-n.style.left+this.scrL)/this.zoom,y:t=(t-n.style.top+this.scrT)/this.zoom}},mt.getMouseCoordinate=function(e){var t=this.cvsMng.mainCvs.canvas.getBoundingClientRect();return{x:(void 0!==e.clientX?e:e.changedTouches[0]).clientX-t.left,y:(e=(void 0!==e.clientY?e:e.changedTouches[0]).clientY)-t.top}},mt._initAnimation=function(){this._time=Date.now||function(){return+new Date},this._fps=60,this._running={},this._counter=1},mt._initScroller=function(){this.callback=(function(e,t,n){this.scrL=e,this.scrT=t,this.zoom=n,this.tabItem&&(this.tabItem.scrL=e,this.tabItem.scrT=t,this.tabItem.zoom=n)}).bind(this),this._setValidArea(),this._setScrollerPosition()},mt.setValidArea=function(e,t,n,r){e===+e&&(this._outerWidth=e),t===+t&&(this._outerHeight=t),n===+n&&(this._innerWidth=n),r===+r&&(this._innerHeight=r),this.calcMaxScrollValue()},mt.calcMaxScrollValue=function(e){var t,n,r,i,o,a,s,u,c;void 0===e&&(e=this._zoom),this.tabItem&&((u=this.tabItem.getCurPage())&&(c=this._db.getMetadata(u.uid),t=this._db.getMid(u.uid)),u&&c&&t&&(n=c.width,r=c.height,i=c.width,o=c.height,s=a=null,t.edt.all.forEach((function(e){var t,u;"rotate"===e.type?(0===e.mode&&(s=w(0,0,i,o,e.calcAngle)),null!==a&&a!==e.mode&&(i=n,o=r),a=e.mode,s&&(t=(u=s).width,n=t,r=u=u.height)):"crop"!==e.type&&"changeSize"!==e.type||(i=n=t=e.width,o=r=u=e.height)})),u=n*e,c=r*e,this._maxSrL=Math.round(Math.max(u-this._outerWidth,0)),this._maxSrT=Math.round(Math.max(c-this._outerHeight,0))))},mt.setPosition=function(e,t){this._outerLeft=e||0,this._outerTop=t||0},mt.getPosition=function(){return{left:this._outerLeft||0,top:this._outerTop||0}},mt.setSnapSize=function(e,t){this._snapWidth=e,this._snapHeight=t},mt.activatePull=function(e,t,n,r){this._pullHeight=e,this._pullStart=r,this._pullActivate=t,this._pullDeactivate=n},mt.emitPull=function(){this.publish(this._srL,-this._pullHeight,this._zoom,!0),this._pullStart&&this._pullStart()},mt.endPull=function(){this._pullActive=!1,this._pullDeactivate&&this._pullDeactivate(),this._scrollTo(this._srL,this._srT,!0)},mt.getCurScrollValues=function(){return{scrollLeft:this._srL,scrollTop:this._srT,zoom:this._zoom}},mt.getMaxScrollValues=function(){return{maxScrollLeft:this._maxSrL,maxScrollTop:this._maxSrT}},mt._zoomTo=function(e,t,n,r,i,o){return void 0===n&&(n=!1),!!this.zooming&&"continuous"!==this.disMode&&(o&&(this._zoomComplete=o),this._isDecelerating&&(this._stop(this._isDecelerating),this._isDecelerating=!1),void 0===r&&(r=this._outerWidth/2),void 0===i&&(i=this._outerHeight/2),o=this._zoom,e=Math.max(Math.min(e,this.maxZoom),this.minZoom),"single"===this.disMode?(this.calcMaxScrollValue(e),(r=(r+this._srL)*e/o-r)>this._maxSrL?r=this._maxSrL:r<0&&(r=0),(o=(i+this._srT)*e/o-i)>this._maxSrT?o=this._maxSrT:o<0&&(o=0),(this._innerWidth<this._outerWidth||n)&&(r=this._maxSrL/2),(this._innerHeight<this._outerHeight||n)&&(o=this._maxSrT/2),this.publish(r,o,e,t),!0):void 0)},mt._zoomBy=function(e,t,n,r,i){return this._zoomTo(this._zoom*e,t,!1,n,r,i)},mt._scrollTo=function(e,t,n,r){this._isDecelerating&&(this._stop(this._isDecelerating),this._isDecelerating=!1),void 0!==r&&r!==this._zoom?this.zooming&&(e*=r,t*=r,this.calcMaxScrollValue(r)):r=this._zoom,this.scrollX?this.paging?e=Math.round(e/this._outerWidth)*this._outerWidth:this.snapping&&(e=Math.round(e/this._snapWidth)*this._snapWidth):e=this._srL,this.scrollY?this.paging?t=Math.round(t/this._outerHeight)*this._outerHeight:this.snapping&&(t=Math.round(t/this._snapHeight)*this._snapHeight):t=this._srT,e=Math.max(Math.min(this._maxSrL,e),0),t=Math.max(Math.min(this._maxSrT,t),0),e===this._srL&&t===this._srT&&(n=!1),this._isProcessing||this.publish(e,t,r,n)},mt._scrollBy=function(e,t,n){this._scrollTo((this._isAnimating?this._futureLeft:this._srL)+(e||0),(this._isAnimating?this._futureTop:this._srT)+(t||0),n)},mt.startHandler=function(e,t){var n;void 0!==e.length&&(t instanceof Date&&(t=t.valueOf()),this._interruptedAnimation=!0,this._isDecelerating&&(this._stop(this._isDecelerating),this._isDecelerating=!1),this._isAnimating&&(this._stop(this._animationId),this._isAnimating=!1),this._isSingleTouch=1===e.length,e=this._isSingleTouch?(n=e[0].pageX,e[0].pageY):(n=Math.abs(e[0].pageX+e[1].pageX)/2,Math.abs(e[0].pageY+e[1].pageY)/2),this._startTouchLeft=n,this._startTouchTop=e,this._startZoom=this._zoom,this._lastTouchLeft=n,this._lastTouchTop=e,this._lastScale=1,this._lastTouchMove=t,this._enableScrollX=!this._isSingleTouch&&this.scrollX,this._enableScrollY=!this._isSingleTouch&&this.scrollY,this._isProcessing=!0,this._isDecComp=!1,this._isDragging=!this._isSingleTouch,this._position=[])},mt.moveHandler=function(e,t,n){var r,i,o,a,s,u,c,l,d;void 0!==e.length&&(t instanceof Date&&(t=t.valueOf()),this._isProcessing&&(e=1===e.length?(r=e[0].pageX,e[0].pageY):(r=Math.abs(e[0].pageX+e[1].pageX)/2,Math.abs(e[0].pageY+e[1].pageY)/2),i=this._position,this._isDragging?(d=r-this._lastTouchLeft,o=e-this._lastTouchTop,a=this._srL,s=this._srT,u=this._zoom,void 0!==n&&this.zooming&&(u=(c=u)/this._lastScale*n,c!==(u=Math.max(Math.min(u,this.maxZoom),this.minZoom))&&(this._setScrollerPosition(),a=((l=r-this._outerLeft)+a)*u/c-l,s=((l=e-this._outerTop)+s)*u/c-l,this.calcMaxScrollValue(u))),this._enableScrollX&&((a-=d*this.speedDelta)>this._maxSrL||a<0)&&(this.bouncing?a+=d/2*this.speedDelta:a=Math.max(Math.min(this._maxSrL,a),0)),this._enableScrollY&&((s-=o*this.speedDelta)>this._maxSrT||s<0)&&(this.bouncing?(s+=o/2*this.speedDelta,this._enableScrollX||null==this._pullHeight||(!this._pullActive&&s<=-this._pullHeight?(this._pullActive=!0,this._pullActivate&&this._pullActivate()):this._pullActive&&s>-this._pullHeight&&(this._pullActive=!1,this._pullDeactivate&&this._pullDeactivate()))):s=Math.max(Math.min(this._maxSrT,s),0)),60<i.length&&i.splice(0,30),i.push(a,s,t),this.publish(a,s,u)):(c=this.locking?3:0,l=Math.abs(r-this._startTouchLeft),d=Math.abs(e-this._startTouchTop),this._enableScrollX=this.scrollX&&c<=l,this._enableScrollY=this.scrollY&&c<=d,i.push(this._srL,this._srT,t),this._isDragging=(this._enableScrollX||this._enableScrollY)&&(5<=l||5<=d),this._isDragging&&(this._interruptedAnimation=!1)),this._lastTouchLeft=r,this._lastTouchTop=e,this._lastTouchMove=t,this._lastScale=n))},mt.endHandler=function(e){if(e instanceof Date&&(e=e.valueOf()),this._isProcessing){if(this._isProcessing=!1,this._isDragging)if(this._isDragging=!1,this._isSingleTouch&&this.animating&&e-this._lastTouchMove<=100){for(var t,n=this._position,r=n.length-1,i=r,o=r;0<o&&n[o]>this._lastTouchMove-100;o-=3)i=o;i!==r?(t=this._srT-n[i-1],this._decVX=(this._srL-n[i-2])/(r=n[r]-n[i])*(1e3/60),this._decVY=t/r*(1e3/60),1<Math.abs(this._decVX)||1<Math.abs(this._decVY)?this._startDeceleration(e):this._scrollComp&&this._scrollComp()):this._scrollComp&&this._scrollComp()}else 100<e-this._lastTouchMove&&this._scrollComp&&this._scrollComp();this._isDecelerating||(this._pullActive&&this._pullStart?(this.publish(this._srL,this._srT,this._zoom),this._pullStart()):((this._interruptedAnimation||this._isDragging)&&this._scrollComp&&this._scrollComp(),this._scrollTo(this._srL,this._srT,!0,this._zoom),this._pullActive&&(this._pullActive=!1,this._pullDeactivate&&this._pullDeactivate()))),this._position.length=0}},mt.zoomHandler=function(e,t,n,r){return e=0<e?1.05:.95,this._setScrollerPosition(),this._zoomTo(this._zoom*e,!1,!1,n-this._outerLeft,r-this._outerTop)},mt.publish=function(e,t,n,r){var i,o,a,s,u,c,l=this;this._isAnimating&&(this._stop(this._isAnimating),this._isAnimating=!1),r&&this.animating?(this._futureLeft=e,this._futureTop=t,this._futureZoom=n,s=e-(i=this._srL),u=t-(o=this._srT),c=n-(a=this._zoom),this._isAnimating=this._start((function(r,d,h){h&&(l._srL=i+s*r,l._srT=o+u*r,l._zoom=a+c*r,l.callback&&l.callback(e,t,n))}),(function(e){return l._isAnimating===e}),(function(e,t,n){t===l._isAnimating&&(l._isAnimating=!1),(l._isDecComp||n)&&l._scrollComp&&l._scrollComp(),l.zooming&&(l.calcMaxScrollValue(),l._zoomComplete&&(l._zoomComplete(),l._zoomComplete=null))}),this.animationDuration,this._isAnimating?this._easeOut:this._easeInOut)):(this._futureLeft=this._srL=e,this._futureTop=this._srT=t,this._futureZoom=this._zoom=n,this.callback&&this.callback(e,t,n),this.zooming&&(this.calcMaxScrollValue(),this._zoomComplete&&(this._zoomComplete(),this._zoomComplete=null)))},mt._easeOut=function(e){return Math.pow(e-1,3)+1},mt._easeInOut=function(e){return(e/=.5)<1?.5*Math.pow(e,3):.5*(Math.pow(e-2,3)+2)},mt._startDeceleration=function(e){var t,n,r,i,o=this,a=(this.paging?(t=Math.max(Math.min(this._srL,this._maxSrL),0),n=Math.max(Math.min(this._srT,this._maxSrT),0),r=this._outerWidth,i=this._outerHeight,this._minDecL=Math.floor(t/r)*r,this._minDecT=Math.floor(n/i)*i,this._maxDecL=Math.ceil(t/r)*r,this._maxDecT=Math.ceil(n/i)*i):(this._minDecL=0,this._minDecT=0,this._maxDecL=this._maxSrL,this._maxDecT=this._maxSrT),function(e,t,n){var r,i,a,s=o._srL+o._decVX,u=o._srT+o._decVY;o.bouncing||(r=Math.max(Math.min(o._maxDecL,s),o._minDecL),i=Math.max(Math.min(o._maxDecT,u),o._minDecT),r!==s&&(s=r,o._decVX=0),i!==u&&(u=i,o._decVY=0)),n?o.publish(s,u,o._zoom):(o._srL=s,o._srT=u),o.paging||(o._decVX*=.95,o._decVY*=.95),o.bouncing&&(i=r=0,n=o.penetrationAcceleration,a=o.penetrationDeceleration,s<o._minDecL?r=o._minDecL-s:s>o._maxDecL&&(r=o._maxDecL-s),u<o._minDecT?i=o._minDecT-u:u>o._maxDecT&&(i=o._maxDecT-u),0!=r&&(r*o._decVX<=0?o._decVX+=r*a:o._decVX=r*n),0!=i&&(i*o._decVY<=0?o._decVY+=i*a:o._decVY=i*n))}),s=this.snapping?4:.001;this._isDecelerating=this._start(a,(function(){return Math.abs(o._decVX)>=s||Math.abs(o._decVY)>=s||!(o._isDecComp=!0)}),(function(e,t,n){o._isDecelerating=!1,o._scrollComp&&o._scrollComp(),o._scrollTo(o._srL,o._srT,o.snapping)}))},mt._stop=function(e){var t=null!=this._running[e];return t&&(this._running[e]=null),t},mt._isRunning=function(e){return null!=this._running[e]},mt._start=function(e,t,n,r,i){var o=this,a=this._time(),s=a,u=0,c=0,l=this._counter++;if(l%16==0){var d,h={};for(d in this._running)h[d]=!0;this._running=h}return this._running[l]=!0,T((function d(h){h=!0!==h;var g=o._time();if(!o._running[l]||t&&!t(l))return o._running[l]=null,void(n&&n(o._fps-c/((g-a)/1e3),l,!1));if(h)for(var f=Math.round((g-s)/(1e3/o._fps))-1,m=0;m<Math.min(f,4);m++)d(!0),c++;r&&1<(u=(g-a)/r)&&(u=1);var p=i?i(u):u;!1!==e(p,g,h)&&1!==u||!h?h&&(s=g,T(d)):(o._running[l]=null,n&&n(o._fps-c/((g-a)/1e3),l,1===u||null==r))})),l},mt.dispose=function(){var e;ft.prototype.dispose.call(this),(this._db=null)!=(e=this.cvsMng)&&e.dispose(),(this.cvsMng=null)!=(e=this.slide)&&e.dispose(),this.slide=null,this.hermite=null,this.offScreenCanvas=null,this.isDisposed=!0},Bt),ot=(s(Ot,gt=P),(en=Ot.prototype).updateUiSetting=function(e){this.init(e=void 0===e?{}:e)},en.init=function(e,t){var n=this;void 0===t&&(t=[]),Object.keys(e).forEach((function(r){var i=n[r];i!==e[r]&&(n[r]=e[r],i===n[r]&&t.push(r))}))},en._err=function(e){this._emit(Y,e)},en._ok=function(){this._emit(Y,Se)},en.scrollTo=function(e){this.emit("_scrollToUI",e,!1)},en.setViewMode=function(e,t){return g(e)&&g(t)?e<0||t<0?(this._err(Ce),!1):(this._rows=t,this._columns=e,this.emit("_setViewModeUI",e,t),!0):(this._err(we),!1)},en.getConfig=function(){return{pubsub:this._tbPub.getPublishSubscribe(),uid:this.uid,size:this.size,mouseShape:this.mouseShape,scrollDirection:this.scrollDirection,sequence:this.sequence,location:this.location,showThumbnail:this.showThumbnail,showPageNumber:this.showPageNumber,showRemoveBtn:this.showRemoveBtn,fullThumbnail:this.fullThumbnail,allowPageDragging:this.allowPageDragging,allowResizing:this.allowResizing,allowKeyboardControl:this.allowKeyboardControl,autoChangeIndex:this.autoChangeIndex,rows:this.rows,columns:this.columns,background:this.background,border:this.border,pageBackground:this.pageBackground,pageBorder:this.pageBorder,selectedPageBackground:this.selectedPageBackground,selectedPageBorder:this.selectedPageBorder,hoverPageBackground:this.hoverPageBackground,hoverPageBorder:this.hoverPageBorder,placeholderBackground:this.placeholderBackground,pageMargin:this.pageMargin,checkbox:this.checkbox,pageNumber:this.pageNumber}},en.on=function(e,t){return d(e)&&l(t)?(this._tbPub._on(e,t),!0):(this._err(we),!1)},en.emit=function(e){var t;if(!d(e))return this._err(we),!1;for(var n=arguments.length,r=new Array(1<n?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(t=this._tbPub)._emit.apply(t,[e].concat(r)),!0},en.off=function(e,t){return d(e)?(this._tbPub._off(e,t),!0):(this._err(we),!1)},en._notifyUi=function(e){this.emit("_updateThumbnailPropUI",e)},en.dispose=function(){var e;gt.prototype.dispose.call(this),null!=(e=this._tbPub)&&e.dispose(),this._tbPub=null},Ze(Ot,[{key:"optimizeImage",get:function(){return this._optimizeImage},set:function(e){this._optimizeImage=e,this._notifyUi({optimizeImage:e}),this._ok()}},{key:"multiSelectMode",get:function(){return this._multiSelectMode},set:function(e){f(e)?(this._multiSelectMode=e,this._notifyUi({multiSelectMode:e}),this._ok()):this._err(we)}},{key:"checkbox",get:function(){return this._checkboxConfig},set:function(e){c(e)?(Object.assign(this._checkboxConfig,e),this._notifyUi({checkbox:e}),this._ok()):this._err(we)}},{key:"pageNumber",get:function(){return this._pageNumberConfig},set:function(e){c(e)?(void 0!==e.visibility&&(this._showPNum="visible"===e.visibility),Object.assign(this._pageNumberConfig,e),this._notifyUi({pageNumber:e}),this._ok()):this._err(we)}},{key:"size",get:function(){return this._size},set:function(e){h(e)?(this._size=e,this._notifyUi({size:e}),this._ok()):this._err(Be)}},{key:"mouseShape",get:function(){return this._mouseShape},set:function(e){d(e)?(this._mouseShape=e,this._notifyUi({mouseShape:e}),this._ok()):this._err(we)}},{key:"pubsub",get:function(){return this._tbPub.getPublishSubscribe()}},{key:"scrollDirection",get:function(){return this._direction},set:function(e){d(e)?(this._direction=e,this._notifyUi({scrollDirection:e}),this._ok()):this._err(we)}},{key:"sequence",get:function(){return this._sequence},set:function(e){g(e)?(this._sequence=e,this._notifyUi({sequence:e}),this._ok()):this._err(we)}},{key:"location",get:function(){return this._location},set:function(e){d(e)?(this._location=e,this._notifyUi({location:e}),this._ok()):this._err(we)}},{key:"showThumbnail",get:function(){return this._showThb},set:function(e){f(e)?(this._showThb=e,this._notifyUi({showThumbnail:e}),this._ok()):this._err(we)}},{key:"showPageNumber",get:function(){return this._showPNum},set:function(e){f(e)?(this._showPNum=e,this._pageNumberConfig||(this._pageNumberConfig={}),this._pageNumberConfig.visibility=e?"visible":"hidden",this._notifyUi({showPageNumber:e}),this._ok()):this._err(we)}},{key:"showRemoveBtn",get:function(){return this._showRmBtn},set:function(e){f(e)?(this._showRmBtn=e,this._notifyUi({showRemoveBtn:e}),this._ok()):this._err(we)}},{key:"fullThumbnail",get:function(){return this._fullThb},set:function(e){f(e)?(this._fullThb=e,this._notifyUi({fullThumbnail:e}),this._ok()):this._err(we)}},{key:"rows",get:function(){return this._rows},set:function(e){g(e)?e<=0?this._err(Ce):(this._rows=e,this._notifyUi({rows:e}),this._ok()):this._err(we)}},{key:"columns",get:function(){return this._columns},set:function(e){g(e)?e<=0?this._err(Ce):(this._columns=e,this._notifyUi({columns:e}),this._ok()):this._err(we)}},{key:"background",get:function(){return this._bg},set:function(e){m(e)?(this._bg=e,this._notifyUi({background:e}),this._ok()):this._err(Le)}},{key:"border",get:function(){return this._border},set:function(e){p(e)?(this._border=e,this._notifyUi({border:e}),this._ok()):this._err(Ve)}},{key:"pageBackground",get:function(){return this._pageBg},set:function(e){m(e)?(this._pageBg=e,this._notifyUi({pageBackground:e}),this._ok()):this._err(Le)}},{key:"pageBorder",get:function(){return this._pageBorder},set:function(e){p(e)?(this._pageBorder=e,this._notifyUi({pageBorder:e}),this._ok()):this._err(Ve)}},{key:"selectedPageBackground",get:function(){return this._sltPBg},set:function(e){m(e)?(this._sltPBg=e,this._notifyUi({selectedPageBackground:e}),this._ok()):this._err(Le)}},{key:"selectedPageBorder",get:function(){return this._sltPBorder},set:function(e){p(e)?(this._sltPBorder=e,this._notifyUi({selectedPageBorder:e}),this._ok()):this._err(Ve)}},{key:"hoverPageBackground",get:function(){return this._hvPBg},set:function(e){m(e)?(this._hvPBg=e,this._notifyUi({hoverPageBackground:e}),this._ok()):this._err(Le)}},{key:"hoverPageBorder",get:function(){return this._hvPBorder},set:function(e){p(e)?(this._hvPBorder=e,this._notifyUi({hoverPageBorder:e}),this._ok()):this._err(Ve)}},{key:"placeholderBackground",get:function(){return this._placeholderBg},set:function(e){m(e)?(this._placeholderBg=e,this._notifyUi({placeholderBackground:e}),this._ok()):this._err(Le)}},{key:"pageMargin",get:function(){return this._pageMargin},set:function(e){h(e)?(this._pageMargin=e,this._notifyUi({pageMargin:e}),this._ok()):this._err(Be)}},{key:"allowPageDragging",get:function(){return this._dragging},set:function(e){f(e)?(this._dragging=e,this._notifyUi({allowPageDragging:e}),this._ok()):this._err(we)}},{key:"allowResizing",get:function(){return this._resizing},set:function(e){f(e)?(this._resizing=e,this._notifyUi({allowResizing:e}),this._ok()):this._err(we)}},{key:"allowKeyboardControl",get:function(){return this._keyboard},set:function(e){f(e)?(this._keyboard=e,this._notifyUi({allowKeyboardControl:e}),this._ok()):this._err(we)}},{key:"autoChangeIndex",get:function(){return this._autoChangeIdx},set:function(e){f(e)?(this._autoChangeIdx=e,this._notifyUi({autoChangeIndex:e}),this._ok()):this._err(we)}}]),Ot),at=((en=Wt.prototype).getRect=function(){if("free"===this.mode)return null;var e=(r=this._getMaxPoint()).minX,t=r.maxX,n=r.minY,r=r.maxY;return{x:Math.floor(e),y:Math.floor(n),width:Math.floor(t-e),height:Math.floor(r-n)}},en._initBox=function(){this.midpoints=this._calcMidpoint(this.vertexes),this.probePoints=this.vertexes.slice().concat(this.midpoints.slice()),this.slopeRatio=this._calcSlopeRatio(this.vertexes)},en._getMaxPoint=function(){return{minX:Math.min(this.probePoints[0],this.probePoints[2],this.probePoints[4],this.probePoints[6]),maxX:Math.max(this.probePoints[0],this.probePoints[2],this.probePoints[4],this.probePoints[6]),minY:Math.min(this.probePoints[1],this.probePoints[3],this.probePoints[5],this.probePoints[7]),maxY:Math.max(this.probePoints[1],this.probePoints[3],this.probePoints[5],this.probePoints[7])}},en.checkPointPosition=function(e){var t=(i=this._getMaxPoint()).minX,n=i.maxX,r=i.minY,i=i.maxY,o=this.probePoints[2*e],a=this.probePoints[2*e+1];return e<4?o===n&&a===i?"se":o===n&&a===r?"ne":o===t&&a===r?"nw":o===t&&a===i?"sw":null:o===n?"e":a===i?"s":o===t?"w":a===r?"n":null},en.onStartHandler=function(e,t,n){var r=this.isBoxSelected(e,t);null!==(r=void 0!==n?n:r)&&(this._startX=e,this._startY=t,this._lastX=e,this._lastY=t,-1===r?(this.isPointSelected=!1,this.activeProbePoint=null,"normal"===this.mode&&(this.isMoveBox=!0)):(this.isPointSelected=!0,this.activeProbePoint=r,this.isMoveBox=!1),"free"===this.mode&&3<r&&(this.k1=this.slopeRatio[(1+(n=r-4))%4],this.b1=this.probePoints[(2*n+3)%8]-this.k1*this.probePoints[(2*n+2)%8],this.k2=this.slopeRatio[(3+n)%4],this.b2=this.probePoints[(2*n+1)%8]-this.k2*this.probePoints[(2*n+0)%8]))},en.onMoveHandler=function(e,t,n){if(this.isPointSelected||this.isMoveBox){var r=this.probePoints.slice();if(this.isPointSelected){var i=this.activeProbePoint;void 0!==n&&(i=n),"normal"===this.mode?r=this._movePointNormal(r,i,e,t):(r=this._movePointFree(r,i,e,t),this.slopeRatio=this._calcSlopeRatio(this.probePoints).slice(0,4)),this.probePoints=r.slice(),n=this._checkRectConvexity(this.probePoints),this.isConvex=!!n}else if(this.isMoveBox){if(n=t-this._lastY,0==(i=e-this._lastX)&&0==n)return;r=this._moveBox(r,i,n),this.probePoints=r.slice()}i=this._calcMidpoint(this.probePoints),this.probePoints=this.probePoints.slice(0,8).concat(i),this.midpoints=i,this._lastX=e,this._lastY=t}},en.onEndHandler=function(){this.isConvex=!0;var e,t=this._startX,n=this._startY,r=(this._startX=0,this._startY=0,this._lastX),i=this._lastY;(this.isPointSelected||this.isMoveBox)&&(this.isPointSelected=!1,this.isMoveBox=!1,this.activeProbePoint=null,e=this._checkRectConvexity(this.probePoints),(t!==r||n!==i)&&e||(this.probePoints=this.vertexes.slice().concat(this.midpoints)),this.vertexes=this.probePoints.slice(0,8),this.midpoints=this._calcMidpoint(this.probePoints),this.probePoints=this.probePoints.slice(0,8).concat(this.midpoints),this.slopeRatio=this._calcSlopeRatio(this.probePoints).slice(0,4))},en._checkEdge=function(e,t){return 0<=e&&e<=this.width&&0<=t&&t<this.height},en._movePointNormal=function(e,t,n,r){n=Math.max(0,Math.min(this.width,n)),r=Math.max(0,Math.min(this.height,r));var i=0,o=0;if(this.keepAspectRatio){var a=(c=this._getMaxPoint()).minX,s=c.maxX,u=c.minY,c=c.maxY,l=this.checkPointPosition(t);if(0==(s=(s-a)/(c-u))||s===1/0||s===-1/0||isNaN(s)?s=this._lastWhr:this._lastWhr=s,o=i=0,a="width",t<4){if(o=r-e[2*t+1],0==(i=n-e[2*t])||0===o)return e;a="width"}else if(c=t-4,"e"===l?(t=(1+c)%4,a="width"):"s"===l?(t=c,a="height"):"w"===l?(t=c,a="width"):"n"===l&&(t=(1+c)%4,a="height"),o=r-e[2*c+1],0==(i=n-e[2*c])||0===o)return e;"height"===a?(i=o*s,"ne"!==l&&"sw"!==l&&"n"!==l&&"w"!==l||(i=-i)):(o=i/s,"ne"!==l&&"sw"!==l&&"n"!==l&&"w"!==l||(o=-o)),c=e[2*t+1]+o,(u=e[2*t]+i)<0?(i=0-e[2*t],o=0):u>this.width?(i=this.width-e[2*t],o=0):c<0?(o=0-e[2*t+1],i=0):c>this.height&&(o=this.height-e[2*t+1],i=0),e[2*t]+=i,e[2*t+1]+=o,a=(t+1)%4,s=(t+3)%4,t%2?(e[2*a]+=i,e[2*s+1]+=o):(e[2*a+1]+=o,e[2*s]+=i)}else if(t<4){if(o=r-e[2*t+1],0==(i=n-e[2*t])&&0===o)return e;e[2*t]=n,e[2*t+1]=r,l=(t+1)%4,u=(t+3)%4,t%2?(e[2*l]=n,e[2*u+1]=r):(e[2*l+1]=r,e[2*u]=n)}else 0===(a=this.slopeRatio[(c=t-4)%4])?(e[(2*c+3)%8]=r,e[(2*c+1)%8]=r):a!==1/0&&a!==-1/0||(e[(2*c+2)%8]=n,e[(2*c+0)%8]=n);return e},en._movePointFree=function(e,t,n,r){n=Math.max(0,Math.min(this.width,n)),r=Math.max(0,Math.min(this.height,r));var i=e.slice();if(t<4){var o=r-e[2*t+1];if(0==(a=n-e[2*t])&&0==o)return e;e[2*t]=n,e[2*t+1]=r}else{var a,s=-(t=r-(o=this.slopeRatio[(a=t-4)%4])*n)/o,u=t,c=e[(2*a+9)%8]-o*e[(2*a+8)%8],l=-c/o,d=this.k1,h=this.b1,g=this.k2,f=this.b2;0===o?(e[(2*a+3)%8]=r,d!==1/0&&d!==-1/0&&(e[(2*a+2)%8]=(r-h)/d),e[(2*a+1)%8]=r,g!==1/0&&g!==-1/0&&(e[(2*a+0)%8]=(r-f)/g)):o===1/0||o===-1/0?(e[(2*a+2)%8]=n,e[(2*a+3)%8]=d*n+h,e[(2*a+0)%8]=n,e[(2*a+1)%8]=g*n+f):(0===d?e[(2*a+2)%8]+=s-l:d===1/0||d===-1/0?e[(2*a+3)%8]+=u-c:(e[(2*a+2)%8]=(h-t)/(o-d),e[(2*a+3)%8]=(o*h-d*t)/(o-d)),0===g?e[(2*a+0)%8]+=s-l:g===1/0||g===-1/0?e[(2*a+1)%8]+=u-c:(e[(2*a+0)%8]=(f-t)/(o-g),e[(2*a+1)%8]=(o*f-g*t)/(o-g)));for(var m=0;m<4;m++){var p=e[2*m],_=e[2*m+1];if(p<0||p>this.width||_<0||_>this.height)return i}}return e},en._moveBox=function(e,t,n){if("normal"===this.mode){var r=Math.min(e[0],e[2],e[4],e[6]),i=Math.max(e[0],e[2],e[4],e[6]),o=Math.min(e[1],e[3],e[5],e[7]),a=Math.max(e[1],e[3],e[5],e[7]);i+(t=r+t<0?-r:t)>this.width&&(t=this.width-i),a+(n=o+n<0?-o:n)>this.height&&(n=this.height-a);for(var s=0;s<4;s++)e[2*s]+=t,e[2*s+1]+=n}return e},en._isPointOnBox=function(e,t){var n,r,i,o;return"normal"===this.mode&&(n=(o=this._getMaxPoint()).minX,r=o.maxX,i=o.minY,o=o.maxY,n<=e&&e<=r&&i<=t&&t<=o)},en.isBoxSelected=function(e,t){var n=this._isPointOnBox(e,t);return null!==(e=this.isCtrlPointSelected(e,t))?e:n?-1:null},en.isCtrlPointSelected=function(e,t){for(var n=this.cropBoxStyle.ctrlWidth/this.zoom/2,r=this.cropBoxStyle.ctrlHeight/this.zoom/2,i=(s=this._getMaxPoint()).minX,o=s.maxX,a=s.minY,s=s.maxY,u=(n=Math.min(Math.max(n,.1*(o-i)),3*n),r=Math.min(Math.max(r,.1*(s-a)),3*r),0);u<8;u++){var c=this.probePoints[2*u],l=this.probePoints[2*u+1];if(e<=c+n&&c-n<=e&&t<=l+r&&l-r<=t&&0<=e&&e<=this.width&&0<=t&&t<=this.height)return u}return null},en._checkRectConvexity=function(e){var t=(e[6]-e[0])*(e[3]-e[1])-(e[7]-e[1])*(e[2]-e[0]),n=(e[0]-e[2])*(e[5]-e[3])-(e[1]-e[3])*(e[4]-e[2]),r=(e[2]-e[4])*(e[7]-e[5])-(e[3]-e[5])*(e[6]-e[4]),i=(e[4]-e[6])*(e[1]-e[7])-(e[5]-e[7])*(e[0]-e[6]);if(t*n*r*i<0)return!1;var o=e.slice().concat(e.slice(0,2));if(this.slopeRatio.length)for(var a=0;a<2;a++)if(this.slopeRatio[a]!==this.slopeRatio[a+2]&&this._calcIntersection(o.slice(2*a,2*a+2),o.slice(2*a+2,2*a+4),o.slice(2*a+4,2*a+6),o.slice(2*a+6,2*a+8)))return!1;return 0<t*n*r*i},en._calcMidpoint=function(e){for(var t=e.slice(0,8).concat(e[0],e[1]),n=[],r=0;r<4;r++)n.push((t[2*r]+t[2*r+2])/2,(t[2*r+1]+t[2*r+3])/2);return n},en._calcSlopeRatio=function(e){for(var t=[],n=e.slice(0,8).concat(e[0],e[1]),r=0;r<4;r++)t.push(n[2*r+3]-n[2*r+1]==0&&n[2*r+2]-n[2*r]==0?0:(n[2*r+3]-n[2*r+1])/(n[2*r+2]-n[2*r]));return t},en._calcIntersection=function(e,t,n,r){if(this._isRectCross(e,t,n,r)&&this._isLineSegmentCross(e,t,n,r)){var i=(r[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-r[1]),o=(e[1]-n[1])*(t[0]-e[0])*(r[0]-n[0])+n[0]*(r[1]-n[1])*(t[0]-e[0])-e[0]*(t[1]-e[1])*(r[0]-n[0]);if(0==i||0===o){var a=this._getLine(e,t),s=this._getLine(n,r),u=a[0],c=a[1],l=s[0],d=s[1];if(c[0]===l[0]&&c[1]===l[1])return c;if(u[0]===d[0]&&u[1]===d[1])return u;if(this._isOnLine(c,s)&&this._isOnLine(l,a))return[l,c];if(this._isOnLine(u,s)&&this._isOnLine(d,a))return[u,d];if(this._isOnLine(u,s)&&this._isOnLine(c,s))return[u,c];if(this._isOnLine(l,s)&&this._isOnLine(d,s))return[l,d]}return[a=o/i,(o=t[1]*(e[0]-t[0])*(r[1]-n[1])+(r[0]-t[0])*(r[1]-n[1])*(e[1]-t[1])-r[1]*(n[0]-r[0])*(t[1]-e[1]))/(i=(e[0]-t[0])*(r[1]-n[1])-(t[1]-e[1])*(n[0]-r[0]))]}return!1},en._getLine=function(e,t){return e[0]===t[0]?e[1]<t[1]?[e,t]:[t,e]:e[0]<t[0]?[e,t]:[t,e]},en._isOnLine=function(e,t){return t[0][0]===t[1][0]?e[1]>=t[0][1]&&e[1]<=t[1][1]:e[0]>=t[0][0]&&e[0]<=t[1][0]},en._isRectCross=function(e,t,n,r){var i=Math.min,o=Math.max;return i(e[0],t[0])<=o(n[0],r[0])&&i(n[0],r[0])<=o(e[0],t[0])&&i(e[1],t[1])<=o(n[1],r[1])&&i(n[1],r[1])<=o(e[1],t[1])},en._isLineSegmentCross=function(e,t,n,r){var i=e[0]*(n[1]-t[1])+t[0]*(e[1]-n[1])+n[0]*(t[1]-e[1]),o=e[0]*(r[1]-t[1])+t[0]*(e[1]-r[1])+r[0]*(t[1]-e[1]);return!(0<=(i^o)&&0!==i&&0!==o||0<=((i=n[0]*(e[1]-r[1])+r[0]*(n[1]-e[1])+e[0]*(r[1]-n[1]))^(o=n[0]*(t[1]-r[1])+r[0]*(n[1]-t[1])+t[0]*(r[1]-n[1])))&&0!==i&&0!==o)},Wt),st=((en=Ft.prototype).setCropBoxStyle=function(e){Object.assign(this.cropBoxStyle,e),this.cropBoxes.forEach((function(t){Object.assign(t.cropBoxStyle,e)}))},en.updateDpr=function(e){this.cropBoxes.forEach((function(t){t.dpr=e}))},en.setKeepAspectRatio=function(e){this.keepAspectRatio=e,this._drawingFlag||this.cropBoxes.forEach((function(t){t.keepAspectRatio=e}))},en.setAspectRatio=function(e){this.aspectRatio=e},en.setZoom=function(e){this.zoom=e,this.cropBoxes.forEach((function(t){t.zoom=e}))},en.setPageSize=function(e,t){this.width=e,this.height=t},en.getRectArr=function(){var e=[];return this.cropBoxes.forEach((function(t,n){n=Object.assign({index:n},t.getRect()),e.push(n)})),e},en.clear=function(){var e;0<this.cropBoxes.length&&null!=(e=this.unselectedCallback)&&e.call(this),this.cropBoxes=[]},en.addFreeBox=function(e){var t=S();return e=new at({cropBoxStyle:this.cropBoxStyle,vertexes:e.slice(),width:this.width,height:this.height,mode:"free",dpr:t}),this.cropBoxes.push(e),e},en.addBox=function(e,t){var n=S();return e=new at({cropBoxStyle:this.cropBoxStyle,vertexes:e.slice(),width:this.width,height:this.height,type:t,mode:"normal",aspectRatio:this.aspectRatio,keepAspectRatio:this.keepAspectRatio,zoom:this.zoom,dpr:n}),this.cropBoxes.push(e),e},en.removeBox=function(e){return void 0===e&&this.clear(),!(e<0||e>=this.cropBoxes.length||(this.cropBoxes.splice(e,1),0))},en.getBoxByUid=function(e){for(var t=this.cropBoxes.length,n=0;n<t;n++)if(this.cropBoxes[n].uid===e)return this.cropBoxes[n];return null},en.onStartHandler=function(e,t,n){this._startX=e,this._startY=t,this.mouseDown=!0;var r=this.checkSelect(e,t);if(null===r)return n||this.clear(),void(this._activeBoxId=null);this._activeBoxId=this.cropBoxes[r].uid,this.getBoxByUid(this._activeBoxId).onStartHandler(e,t)},en.onMoveHandler=function(e,t,n){if(this.mouseDown){var r=null,i=e-this._startX,o=t-this._startY,a=null,s=2/this.zoom,u=(!this._activeBoxId&&e-this._startX<-s&&t-this._startY<-s?(a=0)<this.aspectRatio&&(o=i/this.aspectRatio):!this._activeBoxId&&e-this._startX>s&&t-this._startY<-s?(a=1,0<this.aspectRatio&&(o=-i/this.aspectRatio)):!this._activeBoxId&&e-this._startX>s&&t-this._startY>s?(a=2,0<this.aspectRatio&&(o=i/this.aspectRatio)):!this._activeBoxId&&e-this._startX<-s&&t-this._startY>s&&(a=3,0<this.aspectRatio&&(o=-i/this.aspectRatio)),[e,this._startY+o,this._startX,this._startY+o,this._startX,this._startY,e,this._startY]),c=[this._startX,this._startY,this._startX,this._startY+o,e,this._startY+o,e,this._startY];if(null!==a){for(var l=[],d=0;d<4;d++)a%2?(l.push(c[2*(a+d)%8]),l.push(c[(2*(a+d)+1)%8])):(l.push(u[2*(a+d)%8]),l.push(u[(2*(a+d)+1)%8]));return(r=this.addBox(l,["topLeft","topRight","bottomRight","bottomLeft"][a])).keepAspectRatio=0<this.aspectRatio,this._drawingFlag=!0,this._addNewFlag=this.keepAspectRatio,this._activeBoxId=r.uid,r.onStartHandler(this._startX,this._startY,a),void r.onMoveHandler(e,t,a)}(r=this._activeBoxId?this.getBoxByUid(this._activeBoxId):r)&&r.onMoveHandler(e,t)}},en.onEndHandler=function(){var e;this.mouseDown&&(this.mouseDown=!1,this._drawingFlag=!1,this._activeBoxId&&(e=this.getBoxByUid(this._activeBoxId),null!==this._addNewFlag&&(e.keepAspectRatio=this._addNewFlag,this._addNewFlag=null),e.onEndHandler(),0<this.cropBoxes.length&&null!=(e=this.selectedCallback)&&e.call(this,this.getRectArr()),this._activeBoxId=null))},en.checkSelect=function(e,t){var n=this.cropBoxes.length;if(0===n)return null;for(var r=n-1;0<=r;r--)if(null!==this.cropBoxes[r].isBoxSelected(e,t))return r;return null},en.checkSelectForCursor=function(e,t){var n=this.cropBoxes.length;if(0===n)return null;for(var r=n-1;0<=r;r--){var i,o=this.cropBoxes[r],a=o.isBoxSelected(e,t);if(null!==a)return i="move",-1!==a&&(i=o.checkPointPosition(a)),{part:a,type:o.type,position:i}}return null},en.dispose=function(){this.unselectedCallback=null,this.selectedCallback=null},Ft),ut=((en=Lt.prototype).setBorder=function(e,t,n){this.style.borderWidth=e,t&&(this.style.borderType=t),n&&(this.style.borderColor=n)},en.setSize=function(e,t){this.style.width=e||1,this.style.height=t||1},en.setPosition=function(e,t){this.style.left=e,this.style.top=t},en.clearSelectionBoxes=function(){this.selectionBoxes=[]},en.pushSelectionBox=function(e){this.selectionBoxes.push(e)},en.setNaturalSize=function(e,t){var n=this._db.getMid(this.uid);n&&(n.tempWidth=e,n.tempHeight=t),this.naturalWidth=e,this.naturalHeight=t,this.cropMng.setPageSize(e,t)},en.boxCount=function(){return this.cropMng.cropBoxes.length},Lt);(en=kt.prototype).append=function(e){return-1===this._idxOf(e)&&(this.chs.push(e),!0)},en.insert=function(e,t){return!(t<0||t>=this.chs.length||(this.chs.splice(t,0,e),0))},en.remove=function(e){return-1!==(e=this._idxOf(e))&&(this.chs.splice(e,1),!0)},en.clear=function(){return this.chs=[],!0},en.move=function(e,t){return e===t||(e=this.chs.splice(e,1)[0],this.chs.splice(t,0,e)),!0},en.switch=function(e,t){if(e===t)return!0;var n=this.chs[e];return this.chs[e]=this.chs[t],this.chs[t]=n,!0},en.reorder=function(e){var t=e.length,n=[],r=0;if(this.chs.length!==t||0===t)return!1;for(var i=0;i<t;i++)e[i]===i&&r++;if(r===t)return!0;for(var o=0;o<t;o++)n[o]=this.chs[e[o]];for(var a=0;a<t;a++)this.chs[a]=n[a];return!0},en._idxOf=function(e){for(var t=d(e),n=0,r=this.chs.length;n<r;n++){if(t&&this.chs[n]===e)return n;if(!t&&this.chs[n].uid===e.uid)return n}return-1},s(Rt,ht=G=kt),(en=Rt.prototype).getCurUid=function(){return-1===this.cur?null:this.chs[this.cur].uid},en.getCurPage=function(){return-1===this.cur?null:this.chs[this.cur]},en.idxPage=function(e){return this.chs[e]},en.uidPage=function(e){if(!e)return null;for(var t=0;t<this.total;t++)if(this.chs[t].uid===e)return this.chs[t];return null},en.uid2Idx=function(e){for(var t=0;t<this.total;t++)if(this.chs[t].uid===e)return t;return-1},en.setCur=function(e){return!(e<0||e>=this.total||(this.cur=e,0))},en.append=function(e){return this.chs.push(e),!0},en.remove=function(e){var t=this.chs.length;return 0!==t&&(1===t?this.chs[0].uid===e&&(this.cur=-1,this.total=0,this.slt=[],this.chs=[],!0):-1!==(t=this.uid2Idx(e))&&((t===this.cur&&t===this.total-1||t<this.cur)&&this.cur--,this.chs.splice(t,1),this.slt=this.chs[this.cur]?[this.chs[this.cur].uid]:[],this.total--,!0))},en.clear=function(){return this.chs=[],this.slt=[],this.cur=-1,!(this.total=0)},en.getSlt=function(){return this.slt.slice()},en.setSlt=function(e){var t=e.length;return 0===t?(this.slt=e,this.cur=-1,!0):-1!==(t=this.uid2Idx(e[t-1]))&&(this.slt=e,this.cur=t,!0)},en.move=function(e,t){return ht.prototype.move.call(this,e,t),this.setSlt([this.chs[t].uid])},en.switch=function(e,t){return ht.prototype.switch.call(this,e,t),this.cur===e?this.setSlt([this.chs[t].uid]):this.cur===t&&this.setSlt([this.chs[e].uid]),!0},en.next=function(){return 0===this.total?-1:(1<this.total-this.cur&&this.cur<this.total&&this.cur++,this.slt=[this.chs[this.cur].uid],this.cur)},en.prev=function(){return 0===this.total?-1:(0<this.cur&&this.cur--,this.cur<0?-1:(this.slt=[this.chs[this.cur].uid],this.cur))},en.first=function(){return 0===this.total?-1:(this.cur=0,this.slt=[this.chs[0].uid],0)},en.last=function(){return 0===this.total?-1:(this.cur!==this.total-1&&(this.cur=this.total-1),this.slt=[this.chs[this.cur].uid],this.cur)},en.goto=function(e){return 0===this.total?-1:(e!==this.cur&&(this.cur=e=e<this.total?0<=e?e:0:this.total-1),this.slt=[this.chs[this.cur].uid],this.cur)};var ct,lt,dt,ht,gt,ft,mt,pt,_t,vt,It=Rt,yt=((en=xt.prototype).addTab=function(e){var t=this.checkTab(e.uid),n=null;return-1!==t?n=this.tabs[t]:(t=Object.assign(this.dfConfig,e),n=new It(t),"single"===this.mode?this.tabs=[n]:this.tabs.push(n)),n},en.getTab=function(e){return-1===(e=this.checkTab(e))?null:this.tabs[e]},en.checkTab=function(e){for(var t=this.tabs.length,n=0;n<t;n++)if(this.tabs[n].uid===e)return n;return-1},en.getCurTab=function(){return this.getTab(this.curTab)},en.setCurTab=function(e){if(~this.checkTab(e))return this.curTab=e,!0},en._moveToTop=function(e,t){0<=t&&t<e.length&&(t=e.splice(t,1)[0],e.push(t))},en.closeTab=function(e){return-1!==(e=this.checkTab(e))&&(this._opStack.pop(),this.tabs.splice(e,1),this.curTab=0===this.tabs.length?null:this._opStack[this._opStack.length-1],!0)},en.setMode=function(e){return("single"===e||"multiple"===e)&&(this.mode=e,!0)},en.removePage=function(e,t){return-1!=(e=this.checkTab(e))&&this.tabs[e].remove(t)},en.dispose=function(){},xt),bt=(s(At,dt=P),(en=At.prototype).setUseHermite=function(e){this.useHermite=e,this._gpc.useHermite=e},en.drawSltBox=function(){var e;"single"===this._gpc.disMode&&(e=this._tabMng.getCurTab())&&(e=e.getCurPage())&&this._gpc.drawSltBox(e)},en.render=function(e,t){e=e||!1,t=t||!1;var n=this._tabMng.getCurTab();return!!n&&(this._gpc._layoutSingle(n,e,t),(e=n.getCurPage())?(this._checkDisplay(n),this._showPage(e.uid,n.uid),this._ok(),!0):(this._gpc.clearCanvas(),this._err(Re),!1))},en.tabHandler=function(e,t,n){var r,i=this,o=(void 0===t&&(t=null),[]),a=this.getTab(e.uid);if((t=this.getCurTab())&&!a&&"single"===this.tabMode&&n&&this._emitM(ue,t.uid,this.uid),!t||!a&&n)r=a=this._tabMng.addTab({uid:e.uid,name:e.name,type:e.type,chs:[]});else{if(!a)return void this._emitM(ue,e.uid,this.uid);t.uid!==a.uid&&!n||(r=a)}e.chs.forEach((function(e){a.uidPage(e)||o.push(e)}));var s=o.map((function(e){var t=i._db.getMetadata(e);return new ut({uid:e,naturalW:t.width,naturalH:t.height},i._db,i.cropBoxStyle)})),u=[];return e.chs.forEach((function(e){var t=o.indexOf(e);-1<t?u.push(s[t]):(t=a.uidPage(e))&&u.push(t)})),a.chs=u,a.total=e.chs.length,this.showLatest?(this.clearBox(),t=e.chs.indexOf(o[o.length-1]),(n=a.idxPage(t))&&(a.cur=t,a.setSlt([n.uid]))):0<a.total&&-1===a.cur&&(a.cur=0),r},en.showTab=function(e,t){var n=this,r=(void 0===t&&(t="add"),null!==this.showTabTimer&&clearTimeout(this.showTabTimer),e.uid);this._tabMng.setCurTab(r),dt.prototype._emit.call(this,re,{tabId:this._tabMng.curTab,tabs:this._tabMng.tabs}),this._showAllThb(e),(!e.total||e.cur<0)&&this._gpc.clearCanvas(),this._gpc.initGraphic(e),this._gpc._layoutSingle(e,!0),"remove"==t&&!e.total||(this.showTabTimer=setTimeout((function(){n.isDisposed||(n._checkDisplay(e),e.chs.length||n._gpc.offScreenCanvas.reset(),e.chs.forEach((function(e){n._showPage(e.uid,r)})))}),20),this.getSlidePages()),this.__slt([e.cur]),this.__buffer(e,t),this.__pager()},en.onTabChanged=function(){dt.prototype._emit.call(this,re,{selectedTabId:this._tabMng.curTab,tabs:this._tabMng.tabs})},en.updateSync=function(e,t,n){var r=this,i=null;if(!(i=t?this.getTab(t):this.getCurTab()))return this._err(Ee),!1;for(var o=i.chs,a=new ut({uid:e,naturalW:n.metadata.width||0,naturalH:n.metadata.height||0},this._db,this.cropBoxStyle),s=null,u=0;u<o.length;u++)if(o[u].uid===e){s=o[u],o[u]=a;break}if(this._tabMng.curTab===i.uid){if(i.getCurUid()===e&&this._gpc.offScreenCanvas.reset(),!s)return!1;t=!0,s&&s.naturalHeight===a.naturalHeight&&s.naturalWidth===a.naturalWidth&&(t=!1),this._gpc._layoutSingle(i,t),this._gpc.initGraphic(i),this._checkDisplay(i),o.forEach((function(e){r._showPage(e.uid,i.uid,!0)})),this.getSlidePages(),this.__buffer(i,"modify",e)}},en.setTabMode=function(e){-1!==["single","multiple"].indexOf(e)&&(this.tabMode=e)},en.getSlidePages=function(){var e,t,n,r=this,i=this._tabMng.getCurTab();i&&"continuous"!==i.disMode&&(null!==this.slideTimer&&clearTimeout(this.slideTimer),e=i.cur,t=[],n=[-1,-1,-1],0!==(i=i.total)&&(0<=e-1?(t.push(e-1),n[0]=e-1):n[0]=-1,t.push(e),(n[1]=e)+1<i?(t.push(e+1),n[2]=e+1):n[2]=-1),this._gpc&&this._gpc.slide&&(this._gpc.slide.targetIndexes=n),this.slideTimer=setTimeout((function(){r.isDisposed||t.forEach((function(e){e=r.idxUid(e),r._emitM(se,e)}))}),200))},en._setSlidePages=function(e){var t,n,r,i=this,o=this.getCurTab();!this.isDisposed&&o&&"single"===o.disMode&&(t=o.cur,n=[-1,-1,-1],0!==(r=o.total)&&(0<=t-1&&(n[0]=t-1),(n[1]=t)+1<r&&(n[2]=t+1)),n.indexOf(e)<0||(r=n.map((function(e){return i._calcSlidePage(e,t,o)})),this._gpc.setSlidePages(r)))},en._calcSlidePage=function(e,t,n){var r={width:0,height:0,index:-1,uid:null,url:""};if(-1===e)return r;var i=this.idxUid(e),o=this._db.getMid(i);if(n=n.idxPage(e),!o||!n)return r;r=n.style.width;var a=n.style.height;return e!==t&&(t=this._gpc.calcZoomForSlide(n.naturalWidth||1,n.naturalHeight||1),r=(n.naturalWidth||0)*t,a=(n.naturalHeight||0)*t),{width:r,height:a,index:e,uid:i,url:o.minData||""}},en._showAllThb=function(e,t){var n=this,r=e.chs||[],i=(t=e.uidPage(t),[]);(r=t?[t]:r).forEach((function(e){var t;e&&(t=n._db.getMid(e.uid))&&(e={uid:e.uid,data:t.minData,tags:t.getTags()},i.push(e))})),dt.prototype._emit.call(this,"_thumbnailChangedUI",i)},en.showThbItem=function(e){var t,n,r=this.getCurTab();r&&(t=r.uidPage(e),n=this._db.getMid(e),t&&n&&(t={uid:e,data:n.minData,tags:n.getTags()},dt.prototype._emit.call(this,ee,t),n=r.uid2Idx(e),this._setSlidePages(n)))},en.needRender=function(e){return!!this._db&&!(!(e=this._db.getMid(e))||e.show.indexOf(this.uid)<0)},en.renderMainPage=function(e){this.needRender(e)&&this._db.getMid(e).img&&this._gpc.render(e)},en._showPage=function(e,t,n){var r,i=this;t===this._tabMng.curTab&&this.needRender(e)&&(r=this._db.getMid(e),!n&&r.img?null!=this&&this._gpc.render(e):!n&&r.active||(r.active=!0,this._db.getDataAsync(e).then((function(t){var o;i.needRender(e)?(t=M.createURLWithType(t.oriData),r.oriData=t.data,r.oriType=t.type,o=new Image,i.cors&&(o.crossOrigin="anonymous"),o.onload=function(){if(o.onload=null,o.onerror=null,i.isDisposed||!i.needRender(e))r.active=!1;else{if(n){if(!i._gpc)return;i._gpc.offScreenCanvas.reset()}r.img=o,i._emitM("dvsRenderMainPage",r.show.slice(),e)}},o.onerror=function(){o.onload=null,o.onerror=null},o.src=r.oriData):r.active=!1})).catch((function(e){r.active=!1}))))},en._checkDisplay=function(e){var t,n=this;"single"===e.disMode&&(t=e.chs,e.getCurPage()&&t.forEach((function(t,r){var i,o,a=n._db.getMid(t.uid);a&&(t=n._gpc.checkDisplay(t.uid,e),o=(i=a.show).indexOf(n.uid),t?o<0&&i.push(n.uid):(-1<o&&i.splice(o,1),0===i.length&&(d(a.oriData)&&""!=a.oriData&&M.revokeObjectURL(a.oriData),a.active=!1,a.load=!1,a.img=null,a.oriData=null)))})))},en.getTabManager=function(){return this._tabMng},en.closeTab=function(e){var t;return!!this._tabMng.closeTab(e)&&(this._tabMng.curTab?this.showTab(this._tabMng.getCurTab(),"add"):(t=new It({uid:"",name:"empty",type:"",chs:[]}),this.showTab(t,"remove")),dt.prototype._emit.call(this,"_onCloseTab",e),!0)},en.closeCurTab=function(){},en.emptyTab=function(e){},en.getCurrentTabId=function(){return this._tabMng.curTab},en.getTab=function(e){return this._tabMng.getTab(e)},en.getCurTab=function(){return this._tabMng?this._tabMng.getCurTab():null},en.setCurTab=function(e){return!!this._tabMng&&this._tabMng.setCurTab(e)},en.getCurPageUids=function(){var e=this.getCurTab();return e?e.chs.map((function(e){return e.uid})):[]},en.getCurPageCount=function(){var e=this.getCurTab();return e?e.total:0},en.createThumbnailView=function(e){return e=new ot(e=void 0===e?{}:e,this._mPub.getPublishSubscribe()),this.thbViews.push(e),e},en.removeThumbnailView=function(e){if(!e)return this.thbViews=[],!0;for(var t=0;t<this.thbViews.length;t++)if(this.thbViews[t].uid===e)return this.thbViews.splice(t,1),!0;return!1},en.getThumbnailViewById=function(e){if(!this._chStr(e))return null;for(var t=0;t<this.thbViews.length;t++)if(this.thbViews[t].uid===e)return this._ok(),this.thbViews[t];return null},en.remove=function(e,t,n){if(void 0===t&&(t=!0),!u(e))return this._err(we),!1;var r=this._tabMng.tabs,i=(e.forEach((function(e){r.forEach((function(t){t.remove(e)}))})),this.getCurTab());return i?(t&&this._emitM(de,this.uid,i,e),n&&n!==i.uid||(this.showTab(i,"remove"),0===i.chs.length&&(this._gpc.slide.targetIndexes=[-1,-1,-1],this._setSlidePages(-1),this._gpc.clearCanvas(),dt.prototype._emit.call(this,te,{width:1,height:1,x:1,y:1}))),this._ok(),!0):void 0},en.rmAll=function(e){void 0===e&&(e=!0);var t=[],n=this.getCurTab();return n?(n.chs.forEach((function(e){t.push(e.uid)})),this.remove(t,e,n.uid)):(this._ok(),!0)},en.setBox=function(e,t){var n=this.getCurTab();if(!n)return!1;var r=n.getCurPage();if(void 0===r)return!1;for(var i=null,o=(u(e)?i=e:c(e)&&(i=[e]),t||0<r.boxCount()&&(r.cropMng.clear(),this.drawSltBox(),dt.prototype._emit.call(this,K,n.cur)),i.length),a=0;a<o;a++){var s=i[a];if(!this._chBox(s,r.naturalWidth,r.naturalHeight))return!1;r.cropMng.addBox([s.left,s.top,s.left+s.width,s.top,s.left+s.width,s.top+s.height,s.left,s.top+s.height],"bottomRight")}return this.drawSltBox(),0<(e=r.cropMng.getRectArr()).length&&dt.prototype._emit.call(this,z,n.cur,e),this._ok(),!0},en._chBox=function(e,t,n){return g(e.left)&&g(e.top)&&g(e.width)&&g(e.height)?!(e.left<0||e.top<0||e.width<0||e.height<0)&&!(e.left>t||e.top>n||e.left+e.width>t||e.top+e.height>n)||(this._err(Ce),!1):(this._err(ke),!1)},en.clearBox=function(e){var t=this.getCurTab();if(!t)return this._err(Ee),!1;var n=t.getCurPage();return n?(0<n.boxCount()&&dt.prototype._emit.call(this,K,t.cur),n.cropMng.removeBox(e),this.drawSltBox(),this._ok(),!0):(this._err(Re),!1)},en._clearBox=function(){var e=this.getCurTab();if(!e)return!1;var t=e.getCurPage();return t?(0<t.boxCount()&&dt.prototype._emit.call(this,K,e.cur),t.cropMng.removeBox(),dt.prototype._emit.call(this,"_clearSltBox",e.cur),!0):(this._err(Re),!1)},en.setFreeBox=function(e){var t=this.getCurTab();if(!t)return!1;var n=t.getCurPage();return void 0!==n&&(n.cropMng.addFreeBox(e),this.drawSltBox(),0<(e=n.cropMng.getRectArr()).length&&dt.prototype._emit.call(this,z,t.cur,e),this._ok(),!0)},en.nextPage=function(e){void 0===e&&(e=!0);var t=this.getCurTab();if(!t)return this._err(Ee),-1;var n=t.cur,r=t.slt.length,i=t.next();return-1===i?(this._err(Ee),-1):((n!==t.total-1||1<r)&&((r=t.idxPage(n))&&0<r.boxCount()&&(r.cropMng.clear(),this.drawSltBox(),dt.prototype._emit.call(this,K,t.cur)),this.__pager(),this.render(!0),this.getSlidePages(),e&&this._emitM(ce,this.uid,H),this.__buffer(t,"shift")),this.__slt(),this._ok(),i)},en.prevPage=function(e){void 0===e&&(e=!0);var t=this.getCurTab();if(!t)return this._err(Ee),-1;var n=t.cur,r=t.slt.length,i=t.prev();return-1===i?(this._err(Ee),-1):((0!==n||1<r)&&((r=t.idxPage(n))&&0<r.boxCount()&&(r.cropMng.clear(),this.drawSltBox(),dt.prototype._emit.call(this,K,t.cur)),this.__pager(),this.render(!0),this.getSlidePages(),e&&this._emitM(ce,this.uid,j),this.__buffer(t,"shift")),this.__slt(),this._ok(),i)},en.firstPage=function(e){void 0===e&&(e=!0);var t=this.getCurTab();if(!t)return this._err(Ee),-1;var n=t.cur,r=t.slt.length,i=t.first();return-1===i?(this._err(Ee),-1):((0!==n||1<r)&&((r=t.idxPage(n))&&0<r.boxCount()&&(r.cropMng.clear(),this.drawSltBox(),dt.prototype._emit.call(this,K,t.cur)),this.__pager(),this.render(!0),this.getSlidePages(),e&&this._emitM(ce,this.uid,"first"),this.__buffer(t,"shift")),this.__slt(),this._ok(),i)},en.lastPage=function(e){void 0===e&&(e=!0);var t=this.getCurTab();if(!t)return this._err(Ee),-1;var n=t.cur,r=t.slt.length,i=t.last();return-1===i?(this._err(Ee),-1):((n!==t.total-1||1<r)&&((r=t.idxPage(n))&&0<r.boxCount()&&(r.cropMng.clear(),this.drawSltBox(),dt.prototype._emit.call(this,K,t.cur)),this.__pager(),this.render(!0),this.getSlidePages(),e&&this._emitM(ce,this.uid,"last"),this.__buffer(t,"shift")),this.__slt(),this._ok(),i)},en.gotoPage=function(e,t){if(void 0===t&&(t=!0),!this._checkIndex(e))return-1;var n=this.getCurTab();if(!n)return this._err(Ee),-1;var r=n.cur,i=n.slt.length,o=n.goto(e);return-1===o?(this._err(Ee),-1):((r!==e||1<i)&&((i=n.idxPage(r))&&0<i.boxCount()&&(i.cropMng.clear(),this.drawSltBox(),dt.prototype._emit.call(this,K,n.cur)),this.render(!0),this.getSlidePages(),t&&this._emitM(ce,this.uid,"goto",e),this.__buffer(n,"shift")),this.__pager(),this.__slt(),this._ok(),o)},en.__slt=function(e){e=e||this.getSltIndexes(),dt.prototype._emit.call(this,"_imageSelectedUI",e),dt.prototype._emit.call(this,"imageSelected",e)},en.updateSltIndex=function(){this.__slt(),this.__pager(),this.render()},en.__pager=function(){var e=this.getCurTab(),t={cur:-1,total:0};e&&(t={cur:e.cur,total:e.total}),dt.prototype._emit.call(this,"_pagerChangedUI",t)},en.changeTag=function(e){dt.prototype._emit.call(this,ve,e)},en.changeDir=function(e){dt.prototype._emit.call(this,ve,e)},en.rmPageTag=function(e,t){return!!(t=this._tabMng.getTab(t))&&(t.remove(e),t.uid===this._tabMng.curTab?(this.showTab(t,"remove"),0===t.chs.length&&this._gpc.clearCanvas(),!0):void 0)},en.addPageTag=function(e,t){return!!(t=this._tabMng.getTab(t))&&!!(n=this._db.getMetadata(e))&&(e=new ut({uid:e,naturalW:n.width,naturalH:n.height},this._db,this.cropBoxStyle),t.append(e),t.total=t.chs.length,this.showLatest&&(t.cur=t.total-1),void(t.uid===this._tabMng.curTab&&this.showTab(t,"add")));var n},en.emptyTag=function(e){if(!this._tabMng.getTab(e))return!1},en.renameTag=function(e,t,n){if(!(n=this._tabMng.getTab(n)))return!1;n.name=t,dt.prototype._emit.call(this,re,{selectedTabId:this._tabMng.curTab,tabs:this._tabMng.tabs})},en.renameFile=function(e,t,n){if(!(n=this._tabMng.getTab(n)))return!1;n.name=t,dt.prototype._emit.call(this,re,{selectedTabId:this._tabMng.curTab,tabs:this._tabMng.tabs})},en.switchPage=function(e,t,n,r){void 0===n&&(n=!0);var i=null;return(i=r?this.getTab(r):this.getCurTab())?!(!this._checkIndex(e)||!this._checkIndex(t)||(i.switch(e,t),this._tabMng.curTab===i.uid&&(this._showAllThb(i),this.__slt(),this.__pager(),this.getSlidePages(),this.__buffer(i,"shift")),n&&this._emitM(le,this.uid,i,"switch",e,t),this._ok(),0)):(this._err(Ee),!1)},en.movePage=function(e,t,n,r){void 0===n&&(n=!0);var i=null;return(i=r?this.getTab(r):this.getCurTab())?!(!this._checkIndex(e)||!this._checkIndex(t)||(i.move(e,t),this._tabMng.curTab===i.uid&&(this._showAllThb(i),this.__slt(),this.__pager(),this.getSlidePages(),this.__buffer(i,"shift")),n&&this._emitM(le,this.uid,i,"move",e,t),this._ok(),0)):(this._err(Ee),!1)},en.reorderPage=function(e,t,n,r){void 0===n&&(n=!0);var i,o=null;if(!(o=r?this.getTab(r):this.getCurTab()))return this._err(Ee),!1;r=o.getCurPage(),o.reorder(e),this._tabMng.curTab===o.uid&&(this._showAllThb(o),this.setSltPages(t,!1),i=o.getCurPage(),r&&i&&r.uid!==i.uid&&0<r.boxCount()&&(r.cropMng.clear(),this.drawSltBox(),dt.prototype._emit.call(this,K,o.cur))),n&&this._emitM(le,this.uid,o,"reorder",e,t)},en.uidIdx=function(e){var t=this.getCurTab();if(!t)return this._err(Ee),null;if(!this._chStr(e))return null;for(var n=t.chs.length,r=0;r<n;r++)if(t.chs[r].uid===e)return this._ok(),r;return this._err(ke),null},en.idxUid=function(e){if(!this._checkIndex(e))return null;var t=this.getCurTab();return t?(this._ok(),t.chs[e].uid):(this._err(Ee),null)},en.getRealTimeMetadataByIndex=function(e){if(void 0!==e&&!this._checkIndex(e))return null;var t=this.getCurTab();if(!t)return this._err(Ee),null;var n=t.getCurPage();return(n=void 0!==e?t.idxPage(e):n)?(e=this._db.getMetadata(n.uid))?(t=this._db.getMid(n.uid),(e=Object.assign({},e)).width=t.tempWidth,e.height=t.tempHeight,this._ok(),e):null:(this._err(Ee),null)},en.getMetadata=function(e){return this._checkIndex(e)&&(e=this.idxUid(e))?(this._ok(),(e=this._db.getMetadata(e))?Object.assign({},e):null):null},en.setMetadata=function(e,t){return!!this._checkIndex(e)&&(c(t)?!!(e=this.idxUid(e))&&(this._ok(),this._db.updateMetadata(e,t)):(this._err(we),!1))},en.getCurIndex=function(){var e=this._tabMng.getCurTab();return e?(this._ok(),e.cur):(this._err(Ee),-1)},en.getNextPageIndex=function(){var e=this._tabMng.getCurTab();if(!e)return this._err(Ee),-1;if(this._ok(),0===e.total)return-1;var t=e.cur+1;return t>=e.total?-1:t},en.getPrePageIndex=function(){var e=this._tabMng.getCurTab();return e?(this._ok(),0===e.total||(e=e.cur-1)<0?-1:e):(this._err(Ee),-1)},en.setCurIndex=function(e,t){if(void 0===t&&(t=!0),!this._checkIndex(e))return!1;var n=this._tabMng.getCurTab();if(!n)return this._err(Ee),!1;var r=n.getCurUid(),i=this.idxUid(e);if(i!==r){if((r=n.getCurPage())&&0<r.boxCount()&&(r.cropMng.clear(),this.drawSltBox(),dt.prototype._emit.call(this,K,n.cur)),n.setSlt([i]),!n.setCur(e))return!1;this.__pager(),this.render(!0),this.getSlidePages(),t&&this._emitM(ce,this.uid,"cur",e),this.__buffer(n,"shift")}return this.__slt(),this._ok(),!0},en.setSltPages=function(e,t){var n=this;if(void 0===t&&(t=!0),!u(e))return this._err(we),!1;var r=e.length;0===r&&this._err(ke);for(var i=0;i<r;i++)if(!this._checkIndex(e[i]))return!1;var o=this.getCurTab();if(!o)return this._err(Ee),!1;var a=!1,s=o.getCurUid(),c=o.slt.slice(),l=(c.length!==r&&(a=!0),[]),d=(e.forEach((function(e,t){e=n.idxUid(e),l.push(e),c[t]!==e&&(a=!0)})),!1);return s&&s!==l[r-1]&&(a=!0,(s=o.getCurPage())&&0<s.boxCount()&&(s.cropMng.clear(),this.drawSltBox(),dt.prototype._emit.call(this,K,o.cur)),d=!0),o.setSlt(l),this.__slt(e),this.__pager(),this.render(d),this.getSlidePages(),t&&this._emitM(ce,this.uid,"slt",e),!a&&c.length===l.length||this.__buffer(o,"shift"),this._ok(),!0},en.getCustomDataByIndex=function(e){return this._checkIndex(e)?(e=this.idxUid(e))?this.getCustomDataByUid(e):(this._err(Ee),null):null},en.getCustomDataByUid=function(e){return(e=this._db.getMid(e))?(this._ok(),e.customData):(this._err(Ee),null)},en.getSltIndexes=function(){var e=this;if(!(t=this.getCurTab()))return this._err(Ee),null;var t=t.getSlt(),n=[];return t.forEach((function(t){t=e.uidIdx(t),n.push(t)})),this._ok(),n},en.selectAll=function(){var e=this.getCurTab();if(!e)return this._err(Ee),!1;for(var t=[],n=e.chs.length,r=0;r<n;r++)t.push(r);return this.setSltPages(t)},en.zoomIn=function(){return"single"===this.tabMode&&(this._tabMng.dfConfig.fitType="none"),this._gpc.zoomIn()},en.zoomOut=function(){return"single"===this.tabMode&&(this._tabMng.dfConfig.fitType="none"),this._gpc.zoomOut()},en.zoomTo=function(e,t,n){return!g(e)||void 0!==t&&!g(t)||void 0!==n&&!g(n)?(this._err(we),-1):("single"===this.tabMode&&(this._tabMng.dfConfig.zoom=e,this._tabMng.dfConfig.fitType="none"),this._ok(),this._gpc.zoomTo(e,!1,t,n))},en.flip=function(e){var t=this.getCurTab();if(!t)return this._err(Ee),!1;if(!(t=t.getCurPage()))return this._err(Ee),!1;this._clearBox();var n=this._db.getMid(t.uid);return n&&(this._releaseMin(n),e=n.edt.flip(e),this._emitM(he,"flip",{uid:t.uid,flipObj:e,page:t,interlayerData:n})),this.getSlidePages(),!0},en.reset=function(){var e=this,t=this.getCurTab();return t&&t.getCurPage()?(this._clearBox(),t.chs.forEach((function(t){e._resetByPage(t,!0)})),this.getSlidePages(),this._ok(),!0):(this._err(Ee),!1)},en._resetByPage=function(e,t){var n,r=this._db.getMid(e.uid);r&&0<r.edt.all.length&&(n=this._db.getMetadata(e.uid),t&&this._releaseMin(r),n&&e.setNaturalSize(n.width,n.height),r.edt.reset(),this._emitM(he,"reset",{uid:e.uid}))},en.resetByIndex=function(e,t){var n=this.getCurTab();n?!g(e)||e<0||e>=n.chs.length?this._err(we):this._resetByPage(e=n.chs[e],t):this._err(Ee)},en.getRotateAngle=function(e){var t=this.getCurTab();return t?!g(e)||e<0||e>=t.chs.length?(this._err(we),0):(t=this._db.getMid((e=t.chs[e]).uid))?(this._releaseMin(t),t.edt.getCurAngle()):0:(this._err(Ee),0)},en.rotate=function(e,t){var n=this,r=this.getCurTab();if(!r)return this._err(Ee),!1;if(!g(e))return this._err(we),!1;if(void 0!==t){if(!g(t)&&!u(t))return this._err(we),!1;if(u(t))for(var i=t.length,o=0;o<i;o++)if(!this._checkIndex(t[o]))return!1}var a,s,c=[],l=(r.getCurPage(),void 0===t?-1<(s=r.cur)&&(c=[s]):c=g(t)?[t]:t.slice(),this._clearBox(),this._gpc.rotateMode);return c.forEach((function(t){var i;(t=n._db.getMid((a=r.chs[t]).uid))&&(n._releaseMin(t),i=t.edt.rotate(e,0,0,l),n._emitM(he,"rotate",{uid:a.uid,rotateObj:i,page:a,interlayerData:t}))})),this.getSlidePages(),this._ok(),!0},en.crop=function(e,t,n,r){var i=this.getCurTab();if(!i)return this._err(Ee),!1;if(!(i=i.getCurPage()))return this._err(Ee),!1;if(!(g(e)&&g(t)&&g(n)&&g(r)))return this._err(we),!1;var o=i.naturalWidth,a=i.naturalHeight;return e<0||o<e||t<0||a<t||n<0||r<0||o<e+n||a<t+r?(this._err(Ce),!1):(this._clearBox(),(o=this._db.getMid(i.uid))&&(this._releaseMin(o),a=o.edt.crop(e,t,n,r),this._emitM(he,"crop",{uid:i.uid,cropObj:a,page:i})),this.getSlidePages(),this._ok(),!0)},en.erase=function(e,t,n,r,i){var o=this.getCurTab();if(!o)return this._err(Ee),!1;if(!(o=o.getCurPage()))return this._err(Ee),!1;if(!(g(e)&&g(t)&&g(n)&&g(r)))return this._err(we),!1;var a=o.naturalWidth,s=o.naturalHeight;return e<0||a<e||t<0||s<t||n<0||r<0||a<e+n||s<t+r?(this._err(Ce),!1):(this._clearBox(),(a=this._db.getMid(o.uid))&&(this._releaseMin(a),s=a.edt.erase(e,t,n,r,i),this._emitM(he,"erase",{uid:o.uid,eraseObj:s,page:o})),this.getSlidePages(),this._ok(),!0)},en.overlay=function(e,t,n,r,i,o,a){if(!this._checkIndex(e))return!1;if(!(s=this.getCurTab()))return this._err(Ee),!1;if(!(e=s.idxPage(e)))return this._err(Ee),!1;if(!(g(t)&&g(n)&&g(r)&&g(i)))return this._err(we),!1;var s=e.naturalWidth,u=e.naturalHeight;return t<0||s<t||n<0||u<n||r<0||i<0||s<t+r||u<n+i?(this._err(Ce),!1):((s=this._db.getMid(e.uid)).overlays.push({type:"overlay",left:t,top:n,width:r,height:i,color:o,opacity:a}),s&&(this._releaseMin(s),this._emitM(he,"overlay",{uid:e.uid})),this.getSlidePages(),this._clearBox(),this._ok(),!0)},en.changePageSize=function(e,t){if(e<=0||t<=0)return this._err(ke),!1;var n=this.getCurTab();if(!n)return this._err(Ee),!1;if(!(n=n.getCurPage()))return this._err(Ee),!1;if(!g(e)||!g(t))return this._err(we),!1;this._clearBox();var r=this._db.getMid(n.uid);return r&&(this._releaseMin(r),e=r.edt.changePageSize(e,t),this._emitM(he,"changePageSize",{uid:n.uid,changeSizeObj:e,page:n})),this.getSlidePages(),this._ok(),!0},en._releaseMin=function(e){d(e.minData)&&""!=e.minData&&M.revokeObjectURL(e.minData),e.minData=null,e.minType=null,e.activeMin=!1},en.setSaveType=function(e){return["image/png","image/jpeg"].indexOf(e)<0?(this._err(ke),!1):(this.saveType=e,this._gpc.offScreenCanvas.saveType=e,this._ok(),!0)},en.getSaveType=function(){return this.saveType},en.setSaveQuality=function(e){return e<0||1<e?(this._err(Ce),!1):(this.saveQuality=e,this._ok(),!0)},en.getSaveQuality=function(){return this.saveQuality},en.setRotateMode=function(e){return g(e)||this._err(we),-1===[0,1,2].indexOf(e)?(this._err(ke),!1):(this._gpc.rotateMode=e,this._ok(),!0)},en.getRotateMode=function(){return this._gpc.rotateMode},en.setSaveBackgroundColor=function(e){return this._ok(),this._gpc.setSaveBackgroundColor(e)},en.getSaveBackgroundColor=function(){return this._gpc.saveBg},en.saveTransformation=function(){var e=this,t=this.getCurTab();if(!t)return Promise.reject(Ee);for(var n=t.getCurUid(),r=t.chs,i=[],o=function(t){var o=r[t];(t=e._db.getMid(o.uid))&&0<t.edt.all.length&&(t=new Promise((function(t,r){var i=!0,a=(n===o.uid&&(i=!1),e._db.getMid(o.uid));a.img?e._saveToBlob(o.uid,a.img,o,i).then((function(e){t(e)})):a.oriData?e._getImage(o.uid,a.oriData,o,i).then((function(e){t(e)})):e._db.getDataAsync(o.uid).then((function(n){n=M.createURL(n.oriData),e._getImage(o.uid,n,o,i).then((function(e){t(e)}))})).catch((function(e){}))})),i.push(t))},a=0;a<r.length;a++)o(a);return Promise.all(i)},en.__buffer=function(e,t,n){t={action:t,uids:(null==(t=e.data)||null==(t=t.chs)?void 0:t.slice())||[],currentUid:e.getCurUid(),selectedUids:e.getSlt(),pageUid:n},dt.prototype._emit.call(this,$,e.getCurUid()),dt.prototype._emit.call(this,"bufferChanged",t)},en._getImage=function(e,t,n,r){var i=this;return new Promise((function(o,a){var s=new Image;i.cors&&(s.crossOrigin="anonymous"),s.src=t,s.onload=function(){s.onload=null,s.onerror=null,i._saveToBlob(e,s,n,r).then((function(e){o(e)})),"object"===t.type&&M.revokeObjectURL(t),s.src=""}}))},en._saveToBlob=function(e,t,n,r){var i=this,o=this._gpc.offScreenCanvas,a=this._db.getMid(e),s=(o.render({viewerUid:"",pageUid:e,isMin:!1,img:t,page:n,midData:a}),this._db.getMetadata(e)),u=a.customData,c=a.tags,l=(s.width=n.naturalWidth,s.height=n.naturalHeight,a.setTempSize(n.naturalWidth,n.naturalHeight),t=null,n=o.mainCanvas,t=o.mainWidth,o=o.mainHeight,this.saveCanvas),d=l.getContext("2d");return l.width!==t&&(l.width=t),l.height!==o&&(l.height=o),d.drawImage(n,0,0),new Promise((function(t,n){l.toBlob((function(n){a.edt.reset(),i._emitM(ye,e,{oriData:n,minData:null,metadata:s,customData:u,tags:c},!0),i._db&&i._db.getDataAsync(e).then((function(e){t(n)}))}),i.saveType,i.saveQuality)}))},en.getMinPageData=function(){var e=this.getCurTab();return(e=e&&e.getCurPage())&&this._db.getMid(e.uid)?this._gpc.getMinPageData():(this._err(Ee),null)},en.setCropBoxStyle=function(e){Object.assign(this.cropBoxStyle,e),this._tabMng.tabs.forEach((function(t){t.chs.forEach((function(t){t.cropMng.setCropBoxStyle(e)}))})),this.drawSltBox()},en.setKeepZoom=function(e){this._gpc.keepZoom=e},en.getFitType=function(){return this._gpc.fitType},en.setFitType=function(e){if(!this._chStr(e))return!1;if(-1===["window","width","height"].indexOf(e))return this._err(ke),!1;this._gpc.fitType=e;var t=this.getCurTab();return t&&(t.fitType=e),"single"===this.tabMode&&(this._tabMng.dfConfig.fitType=e),this.render(!0),this.getSlidePages(),this._ok(),!0},en.setZoom=function(e){"single"===this.tabMode&&(this._tabMng.dfConfig.zoom=e,this._tabMng.dfConfig.fitType="none");var t=this.getCurTab();return t&&(t.zoom=e),this._gpc.setZoom(e)},en.getZoom=function(){return this._gpc.getZoom()},en.setMinZoom=function(e){return this._gpc.minZoom=e,!0},en.getMinZoom=function(){return this._gpc.minZoom},en.setMaxZoom=function(e){return this._gpc.maxZoom=e,!0},en.getMaxZoom=function(){return this._gpc.maxZoom},en.setOperationMode=function(e){var t,n=this.getCurTab();n&&(n.opMode=e,(t=n.getCurPage())&&0<t.boxCount()&&(t.cropMng.clear(),this.drawSltBox(),dt.prototype._emit.call(this,K,n.cur))),this._gpc.opMode=e,"single"===this.tabMode&&(this._tabMng.dfConfig.opMode=e)},en.getOperationMode=function(){return this._gpc.opMode},en.setDisplayMode=function(e){var t,n=this.getCurTab();n&&(n.disMode=e,(t=n.getCurPage())&&0<t.boxCount()&&(t.cropMng.clear(),this.drawSltBox(),dt.prototype._emit.call(this,K,n.cur))),this._tabMng.dfConfig.disMode=e,this._gpc.disMode=e,this.render(!0),this.getSlidePages()},en.setAspectRatio=function(e){this._gpc.aspectRatio=e;var t=this.getCurTab();t&&t.chs.forEach((function(t){t.cropMng.setAspectRatio(e)}))},en.getAspectRatio=function(){return this._gpc.aspectRatio},en.setKeepAspectRatio=function(e){this._gpc.keepAspectRatio=e;var t=this.getCurTab();t&&t.chs.forEach((function(t){t.cropMng.setKeepAspectRatio(e)}))},en.getKeepAspectRatio=function(){return this._gpc.keepAspectRatio},en.setPageMargin=function(e){return this._gpc.iMargin=e,!0},en.getPageMargin=function(){return this._gpc.iMargin},en.setZoomDelta=function(){},en.getZoomDelta=function(){},en.setAllowSlide=function(e){this._gpc.setAllowSlide(e)},en.getAllowSlide=function(){return this._gpc.allowSlide},en._getOutEvent=function(e){var t=null,n=-1,r=-1,i=-1,o=null==e?void 0:e.clientX,a=null==e?void 0:e.clientY,s=this.getCurTab();return(t=s?s.getCurPage():t)&&(n=this.uidIdx(t.uid)),this._gpc.checkMouseOverPage(e)&&(s=this._gpc.getMouseCoordinate(e),t=this._gpc.toPageCoordinate(s.x,s.y),r=Math.floor(t.x),i=Math.floor(t.y)),{index:n,imageX:r,imageY:i,pageX:o,pageY:a}},en._initEvent=function(){var e=this;dt.prototype._on.call(this,Ie,(function(t,n){e._emitM(Ie,t,n)})),dt.prototype._on.call(this,J,this._onSetCanvasVisibility.bind(this)),dt.prototype._on.call(this,"_bindSlideComponent",(function(t){var n;null!=(n=e._gpc.slide)&&n.bind(t)})),dt.prototype._on.call(this,"_unbindSlideComponent",(function(){var t;null!=(t=e._gpc.slide)&&t.unbind()})),dt.prototype._on.call(this,"_bindCanvas",(function(t){e._gpc.cvsMng.bind(t)})),dt.prototype._on.call(this,"_unbindCanvas",(function(t){e._gpc.cvsMng.unbind(t)})),dt.prototype._on.call(this,"_setCanvasSize",(function(t){var n=t.width,r=t.height;e._gpc.updateDpr(),t=e._gpc.setCanvasOffsetSize(n,r),(n=e.getCurTab())&&0!==n.total||dt.prototype._emit.call(e,te,{width:0,height:0,x:0,y:0}),"single"!==e._gpc.disMode||t||(e.render(!1,!1),e.drawSltBox(),e.getSlidePages())})),dt.prototype._on.call(this,"_displayedImageChanged",(function(t){t.forEach((function(t){var n=e._db.getMid(t);n&&(n.minData?(n={uid:t,data:n.minData,tags:n.getTags()},dt.prototype._emit.call(e,ee,n)):e._emitM(se,t))}))})),dt.prototype._on.call(this,"_canvasMousedown",(function(t,n){var r=e.getCurTab();r&&r.getCurPage()&&e._gpc.onCanvasMousedown(t),n=n||e._getOutEvent(t),dt.prototype._emit.call(e,"mousedown",n,t)})),dt.prototype._on.call(this,"_canvasMousemove",(function(t,n){n=n||e._getOutEvent(t),dt.prototype._emit.call(e,"mousemove",n,t)})),dt.prototype._on.call(this,"_canvasMouseup",(function(t,n){n=n||e._getOutEvent(t),dt.prototype._emit.call(e,"mouseup",n,t)})),dt.prototype._on.call(this,"_canvasMouseOver",(function(t,n){n=n||e._getOutEvent(t),dt.prototype._emit.call(e,"mouseover",n,t)})),dt.prototype._on.call(this,"_canvasMouseOut",(function(t,n){n=n||e._getOutEvent(t),dt.prototype._emit.call(e,"mouseout",n,t)})),dt.prototype._on.call(this,"_canvasTouchstart",(function(t,n){var r=e.getCurTab();r&&r.getCurPage()&&e._gpc.onCanvasTouchstart(t),n=n||e._getOutEvent(t),dt.prototype._emit.call(e,"mousedown",n,t)})),dt.prototype._on.call(this,"_canvasTouchmove",(function(t,n){var r=e.getCurTab();r&&r.getCurPage()&&e._gpc.onCanvasTouchmove(t),n=n||e._getOutEvent(t),dt.prototype._emit.call(e,"mousemove",n,t)})),dt.prototype._on.call(this,"_canvasTouchend",(function(t,n){n=n||e._getOutEvent(t),dt.prototype._emit.call(e,"mouseup",n,t)})),dt.prototype._on.call(this,"_canvasScroll",(function(t,n){var r=e.getCurTab();r&&r.getCurPage()&&e._gpc.onCanvasScroll(t)})),dt.prototype._on.call(this,"_canvasWheel",(function(t,n){var r=e.getCurTab();r&&r.getCurPage()&&(e._gpc.onCanvasWheel(t),dt.prototype._emit.call(e,"wheel",t))})),dt.prototype._on.call(this,"_canvasClick",(function(t,n){n=n||e._getOutEvent(t),dt.prototype._emit.call(e,"click",n,t)})),dt.prototype._on.call(this,"_canvasDoubleClick",(function(t,n){n=n||e._getOutEvent(t),dt.prototype._emit.call(e,"dblclick",n,t)})),dt.prototype._on.call(this,Z,(function(t,n){n=n||e._getOutEvent(t),dt.prototype._emit.call(e,"rightclick",n,t)})),dt.prototype._on.call(this,Z,(function(t,n){n=n||e._getOutEvent(t),dt.prototype._emit.call(e,"contextmenu",n,t)})),dt.prototype._on.call(this,"_canvasKeyDown",(function(t){dt.prototype._emit.call(e,"keydown",t)})),dt.prototype._on.call(this,"_canvasKeyUp",(function(t){dt.prototype._emit.call(e,"keyup",t)})),dt.prototype._on.call(this,"_canvasResize",(function(t,n){dt.prototype._emit.call(e,"resize",t,n)})),dt.prototype._on.call(this,"_canvasDragStart",(function(t,n){n=n||e._getOutEvent(t),dt.prototype._emit.call(e,"dragstart",n,t)})),dt.prototype._on.call(this,"_canvasDragMove",(function(t,n){n=n||e._getOutEvent(t),dt.prototype._emit.call(e,"dragmove",n,t)})),dt.prototype._on.call(this,"_canvasDragDone",(function(t){dt.prototype._emit.call(e,"dragdone",t)})),dt.prototype._on.call(this,"_documentMove",(function(t){var n=e.getCurTab();n&&n.getCurPage()&&e._gpc.onDocumentMousemove(t)})),dt.prototype._on.call(this,"_documentUp",(function(t){var n=e.getCurTab();n&&n.getCurPage()&&e._gpc.onDocumentMouseup(t)})),dt.prototype._on.call(this,"_SetSelectedIndexes",(function(t){e.setSltPages(t,!1),e._emitM(ce,e.uid,"slt",t)})),dt.prototype._on.call(this,"_onReOrderThumbnail",(function(t,n){e.getCurTab()&&e.reorderPage(t,n,!0)})),dt.prototype._on.call(this,"_canvasDefaultCursor",(function(t){e._gpc.defaultCursor=t=void 0===t?"default":t})),dt.prototype._on.call(this,"_onRender",(function(){e.render()})),dt.prototype._on.call(this,"_onRenderBoxes",(function(){e.drawSltBox()})),dt.prototype._on.call(this,"_getSlidePages",(function(){e.getSlidePages()}))},en._onSetCanvasVisibility=function(e){},en.setScrBarW=function(e){this._gpc.scrBarW=e},en._onM=function(e,t){this._mPub._on(e,t)},en._emitM=function(e){for(var t,n=arguments.length,r=new Array(1<n?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];this._mPub&&(t=this._mPub)._emit.apply(t,[e].concat(r))},en._offM=function(e,t){this._mPub._off(e,t)},en._err=function(e){this._emitM(Y,e)},en._ok=function(){this._emitM(Y,Se)},en._chStr=function(e){return!!d(e)||(this._err(we),!1)},en._checkIndex=function(e){return g(e)?!(e<0||e>=this.getCurPageCount())||(this._err(Ce),!1):(this._err(we),!1)},en.dispose=function(){var e;this.isDisposed||(dt.prototype.dispose.call(this),null!=(e=this._mPub)&&e.dispose(),this._mPub=null,(this._db=null)!=(e=this._tabMng)&&e.dispose(),(this._tabMng=null)!=(e=this._gpc)&&e.dispose(),this._gpc=null,this.saveCanvas=null,this.isDisposed=!0)},At),Dt=(s(Pt,lt=P),(en=Pt.prototype)._bindEvents=function(){var e=this;this.on("_updateFocus",(function(t){var n=t.viewerId;t=t.thumbnailId,e._focus.viewerId=n,e._focus.thumbnailId=t})),this.on("_documentKeyDownUI",(function(t){var n=(r=e._focus).thumbnailId,r=r.viewerId;e.uid===r&&null!=(r=e.ui)&&r.documentKeyDown(t,n)})),this.on("_documentKeyUpUI",(function(t){var n=(r=e._focus).thumbnailId,r=r.viewerId;e.uid===r&&null!=(r=e.ui)&&r.documentKeyUp(t,n)})),this.on("_gotoPage",(function(t){e.gotoPage(t)}))},en.initConfig=function(e){var t,n=[],r=Xe({},e,e.uiConfig.canvasConfig,e.uiConfig);for(t in r)"uiConfig"===t||c(r[t])||this._checkInitProp(r,t)||n.push(t);return this._config=e,this._uiConfig=e.uiConfig,n},en._e=function(e){lt.prototype._emit.call(this,Y,e)},en._checkInitProp=function(e,t){var n=this[t],r=e[t];return this[t]=e[t],n===r||n!==this[t]},en.closeTab=function(e){if(!d(e))return this._e(we),!1;this.vm.closeTab(e)},en.closeCurrentTab=function(){return this.vm.closeCurTab()},en.emptyTab=function(e){},en.getCurrentTabId=function(){return this.vm.getCurrentTabId()},en.getTab=function(e){return d(e)?this.vm.getTab(e):(this._e(we),null)},en.setCurrentTab=function(e){return this.vm.setCurTab(e)},en.getCurrentTab=function(){return this.vm.getCurTab()},en.getCurrentPageUids=function(){return this.vm.getCurPageUids()},en.getCurrentIndex=function(){return this.vm.getCurIndex()},en.getNextPageIndex=function(){return this.vm.getNextPageIndex()},en.getPrePageIndex=function(){return this.vm.getPrePageIndex()},en.setCurrentIndex=function(e){return this.vm.setCurIndex(e)},en.setSelectedIndexes=function(e){return this.vm.setSltPages(e)},en.getSelectedIndexes=function(){return this.vm.getSltIndexes()},en.selectAll=function(){return this.vm.selectAll()},en.removeSync=function(e){if(!u(e=g(e)?[e]:e))return this._e(we),!1;if(0===e.length)return this._e(ke),!1;for(var t=[],n=0;n<e.length;n++){var r=this.getUidByIndex(e[n]);if(!r)return!1;t.push(r)}return this.vm.remove(t)},en.removeAllSync=function(){return this.vm.rmAll()},en.switchPage=function(e,t){return this.vm.switchPage(e,t,!0)},en.movePage=function(e,t){return this.vm.movePage(e,t,!0)},en.getViewerElement=function(){var e;return this._e(Se),(null==(e=this.ui)?void 0:e.getViewerElement())||null},en.bindView=function(e,t,n){var r=this;return void 0===t&&(t={}),void 0===n&&(n=!0),this.ViewUi?e&&v(e=d(e)?document.getElementById(e):e)?(this.unbindView(),n?y(t,this._uiConfig):this._uiConfig=t,this.ui=new this.ViewUi(e,this._uiConfig,this.postfix,this._iPub.getPublishSubscribe(),this._db,this.workerBlobURL),null!=(n=this.ui)&&n.createInnerThumbnail(),null!=(t=this.ui)&&t.setDisplayMode(this.displayMode),null!=(e=this.ui)&&e.setOperationMode(this.operationMode),this.vm.thbViews.forEach((function(e){var t;null!=(t=r.ui)&&t.createThumbnail(e.getConfig())})),(n=this.vm.getCurTab())&&(this.vm._showAllThb(n),this.vm.getSlidePages(),this.vm.updateSltIndex(),this.vm.onTabChanged(),this._e(Se)),!0):(this._e(ke),!1):(this._e(Ue),!1)},en.unbindView=function(){var e;return null!=(e=this.ui)&&e.unbindView(),this.ui=null,this._e(Se),!0},en.dispose=function(){var e;lt.prototype.dispose.call(this),null!=(e=this._iPub)&&e.dispose(),this._iPub=null,this._db=null,this.ViewUi=null,(this.ui=null)!=(e=this.vm)&&e.dispose(),this.vm=null},en.updateUISetting=function(e){var t;return c(e)?(y(e,e=D(this._dfConfig.uiConfig)),(t=null==(t=this.ui)?void 0:t.containerBox)&&this.bindView(t,e,!1),this._e(Se),!0):(this._e(we),!1)},en.bindContent=function(e){var t;return v(e=d(e)?document.getElementById(e):e)?null!=(t=this.ui)&&t.bindContent(e)?(this._e(Se),!0):(this._e(xe),!1):(this._e(ke),!1)},en.unbindContent=function(){var e;return null!=(e=this.ui)&&e.unbindContent()?(this._e(Se),!0):(this._e(xe),!1)},en.fullScreen=function(){var e;return null!=(e=this.ui)&&e.fullScreen()?(this._e(Se),!0):(this._e(this.ui?Oe:xe),!1)},en.cancelFullScreen=function(){var e;return this._e(Se),null==(e=this.ui)?void 0:e.cancelFullScreen()},en.fullWebPage=function(){var e;return null!=(e=this.ui)&&e.fullPage()?(this._e(Se),!0):(this._e(xe),!1)},en.cancelFullWebPage=function(){var e;return null!=(e=this.ui)&&e.cancelFullPage()?(this._e(Se),!0):(this._e(xe),!1)},en.setButtonClass=function(e,t){if(!d(e)||!d(t))return this._e(we),!1;var n=this._uiConfig.buttons[e];return n?(n.setClass=t,null!=(n=this.ui)&&n.setButtonClass(e)?(this._e(Se),!0):(this._e(xe),!1)):(this._e(xe),!1)},en.setViewMode=function(e,t){return g(e)&&g(t)?0<e&&0<t?(this._uiConfig.canvasConfig.rows=t,this._uiConfig.canvasConfig.columns=e,this.ui?(this._e(Se),this.vm.rows=t,this.vm.columns=e,null==(n=this.ui)?void 0:n.setViewMode(e,t)):(this._e(xe),!1)):(this._e(Ce),!1):(this._e(we),!1);var n},en.createCustomElement=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=!1);var r=e;return v(r=d(e)?document.getElementById(e):r)?(this._e(Se),null==(e=this.ui)?void 0:e.createCustomElement(r,t,n)):(this._e(we),!1)},en.updateVideoContainer=function(e){return this.ui?(d(e)||this._e(we),this.ui.updateVideoContainer(e),this._e(Se),!0):(this._e(xe),!1)},en.setLoadingImage=function(e){var t;this.uiConfig.canvasConfig.loadingImageUrl=e,null!=(t=this.ui)&&t.setLoadingImage(e)},en.nextPage=function(){return this.vm.nextPage()},en.prevPage=function(){return this.vm.prevPage()},en.firstPage=function(){return this.vm.firstPage()},en.lastPage=function(){return this.vm.lastPage()},en.gotoPage=function(e){return this.vm.gotoPage(e)},en.createThumbnailView=function(e){if(void 0===e&&(e={}),lt.prototype._emit.call(this,X,"Invoking viewer#createThumbnailView."),!c(e))return this._e(we),null;var t,n=[],r=this.vm.createThumbnailView(this._uiConfig.thumbnail);return null!=(t=this.ui)&&t.createThumbnail(r.getConfig()),r.init(e,n),n.length?(t="Failed to create the thumbnail viewer because the parameter ".concat(n[0]," is incorrect."),this._e({code:80024,message:t})):this._e(Se),r},en.removeThumbnailView=function(e){lt.prototype._emit.call(this,X,"Invoking viewer#removeThumbnailView.");var t=e;return d(e)||(t=e.uid),this.vm.removeThumbnailView(t)?(null!=(e=this.ui)&&e.removeThumbnail(t),this._e(Se),!0):(this._e(ke),!1)},en.getThumbnailViewById=function(e){return this.vm.getThumbnailViewById(e)},en.getThumbnailViewsList=function(){return this.vm.thbViews},en.getIndexByUid=function(e){return this.vm.uidIdx(e)},en.getUidByIndex=function(e){return this.vm.idxUid(e)},en.getRealTimeMetadataByIndex=function(e){return this.vm.getRealTimeMetadataByIndex(e)},en.getMetadataByIndex=function(e){return this.vm.getMetadata(e)},en.setMetadataByIndex=function(e,t){return this.vm.setMetadata(e,t)},en.getCustomDataByIndex=function(e){return this.vm.getCustomDataByIndex(e)},en.getCustomDataByUid=function(e){return this.vm.getCustomDataByUid(e)},en.zoomIn=function(){return this.vm.zoomIn()},en.zoomOut=function(){return this.vm.zoomOut()},en.zoomTo=function(e,t,n){return this.vm.zoomTo(e,t,n)},en.reset=function(){return this.vm.reset()},en.resetByIndex=function(e,t){return this.vm.resetByIndex(e,t)},en.mirror=function(){return this.vm.flip(1)},en.flip=function(){return this.vm.flip(0)},en.rotate=function(e,t){return this.vm.rotate(e,t)},en.getRotateAngle=function(e){return this.vm.getRotateAngle(e)},en.crop=function(e,t,n,r){return this.vm.crop(e,t,n,r)},en.erase=function(e,t,n,r,i){return this.vm.erase(e,t,n,r,i)},en.overlayRectangle=function(e,t,n,r,i,o,a){return this.vm.overlay(e,t,n,r,i,o,a)},en.changePageSize=function(e,t){return this.vm.changePageSize(e,t)},en.saveTransformation=function(){return this.vm.saveTransformation()},en.getMinPageData=function(){return"single"===this.displayMode?this.vm.getMinPageData():"continuous"===this.displayMode?null:void 0},en.setFreeSelectedBox=function(e){return this.vm.setFreeBox(e)},en.setSelectedBoxes=function(e,t){if(1!==this.operationMode)return this._e(Ne),!1;if(void 0===e)return this._e(we),!1;if(void 0!==t&&!f(t))return this._e(we),!1;var n=this.getCurrentTab();if(!n)return this._e(Ee),!1;if(void 0===(n=n.getCurPage()))return this._e(Ee),!1;var r=null;if(u(e)){if(0===(r=e).length)return this._e(ke),!1}else{if(!c(e))return this._e(we),!1;r=[e]}for(var i=r.length,o=n.naturalWidth,a=n.naturalHeight,s=0;s<i;s++){var l=r[s];if(!(g(l.left)&&g(l.top)&&g(l.width)&&g(l.height)))return this._e(we),!1;l.left<0&&(l.left=0),l.top<0&&(l.top=0),l.width<=0&&(l.width=1),l.height<=0&&(l.height=1),l.width+l.left>o&&(l.width=o-l.left),l.height+l.top>a&&(l.height=a-l.top)}return"single"===this.displayMode?this.vm.setBox(e,t):null!=(n=this.ui)&&n.setSelectedBoxes(e,t),this._e(Se),!0},en.clearSelectedBoxes=function(e){var t;return this.vm.clearBox(e),null!=(t=this.ui)&&t.clearSelectedBoxes(e),this._e(Se),!0},en.render=function(){return this.vm.render()},en.on=function(e,t){d(e)&&l(t)?(this._iPub._on(e,t),this._e(Se)):this._e(we)},en.emit=function(e){var t;if(d(e)){for(var n=arguments.length,r=new Array(1<n?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=this._iPub)._emit.apply(t,[e].concat(r)),this._e(Se)}else this._e(we)},en.off=function(e,t){!d(e)||void 0!==t&&!l(t)?this._e(we):(this._iPub._off(e,t),this._e(Se))},en.offById=function(e,t){d(e)&&d(t)?(this._iPub._offById(e,t),this._e(Se)):this._e(we)},Ze(Pt,[{key:"zoom",get:function(){return this.vm.getZoom()},set:function(e){g(e)?e<=0?this._e(Ce):(this.vm.setZoom(e),this._e(Se)):this._e(we)}},{key:"minZoom",get:function(){return this._config.minZoom},set:function(e){g(e)?e<=0?this._e(Ce):(this._config.minZoom=e,this.vm.setMinZoom(e),this._e(Se)):this._e(we)}},{key:"maxZoom",get:function(){return this._config.maxZoom},set:function(e){g(e)?e<=0?this._e(Ce):(this._config.maxZoom=e,this.vm.setMaxZoom(e),this._e(Se)):this._e(we)}},{key:"showViewer",get:function(){return this._uiConfig.showViewer},set:function(e){var t;f(e)?(this._uiConfig.showViewer=e,null!=(t=this.ui)&&t.setShowViewer(e),e&&this.render(),this._e(Se)):this._e(we)}},{key:"showHeader",get:function(){return this._uiConfig.toolbars.header},set:function(e){var t;f(e)?(this._uiConfig.toolbars.header=e,null!=(t=this.ui)&&t.setShowHeader(e),this._e(Se)):this._e(we)}},{key:"headerColor",get:function(){return this._uiConfig.headerColor},set:function(e){var t;m(e)?(this._uiConfig.headerColor=e,null!=(t=this.ui)&&t.setHeaderColor(e),this._e(Se)):this._e(Le)}},{key:"showTopMenu",get:function(){return this._uiConfig.toolbars.topMenu},set:function(e){var t;f(e)?(this._uiConfig.toolbars.topMenu=e,null!=(t=this.ui)&&t.setShowTopMenu(e),this._e(Se)):this._e(we)}},{key:"topMenuColor",get:function(){return this._uiConfig.topMenuColor},set:function(e){var t;m(e)?(this._uiConfig.topMenuColor=e,null!=(t=this.ui)&&t.setTopMenuColor(e),this._e(Se)):this._e(Le)}},{key:"topMenuBorder",get:function(){return this._uiConfig.topMenuBorder},set:function(e){var t;p(e)?(this._uiConfig.topMenuBorder=e,null!=(t=this.ui)&&t.setTopMenuBorder(e),this._e(Se)):this._e(Ve)}},{key:"showSidebar",get:function(){return this._uiConfig.showSidebar},set:function(e){var t;f(e)?(this._uiConfig.showSidebar=e,null!=(t=this.ui)&&t.setShowSidebar(e),this._e(Se)):this._e(we)}},{key:"showAside",get:function(){return this._uiConfig.toolbars.asideMenu},set:function(e){var t;f(e)?(this._uiConfig.toolbars.asideMenu=e,null!=(t=this.ui)&&t.setShowAside(e),this._e(Se)):this._e(we)}},{key:"showMain",get:function(){return this._uiConfig.showMain},set:function(e){var t;f(e)?(this._uiConfig.showMain=e,null!=(t=this.ui)&&t.setShowMain(e),this.emit(J,e),this._e(Se)):this._e(we)}},{key:"showFooter",get:function(){return this._uiConfig.toolbars.bottomMenu},set:function(e){var t;f(e)?(this._uiConfig.toolbars.bottomMenu=e,null!=(t=this.ui)&&t.setShowFooter(e),this._e(Se)):this._e(we)}},{key:"showTab",get:function(){return this._uiConfig.showTab},set:function(e){var t;f(e)?(this._uiConfig.showTab=e,null!=(t=this.ui)&&t.setShowTab(e),this._e(Se)):this._e(we)}},{key:"footerColor",get:function(){return this._uiConfig.footerColor},set:function(e){var t;m(e)?(this._uiConfig.footerColor=e,null!=(t=this.ui)&&t.setFooterColor(e),this._e(Se)):this._e(Le)}},{key:"showVideoContainer",get:function(){return this._uiConfig.showVideoContainer},set:function(e){var t;f(e)||this._e(we),this._uiConfig.showVideoContainer=e,null!=(t=this.ui)&&t.setShowVideoContainer(e),this._e(Se)}},{key:"fitType",get:function(){return this.vm.getFitType()},set:function(e){this.vm.setFitType(e)&&(this._config.fitType=e)}},{key:"canvasMouseShape",get:function(){return this._uiConfig.canvasConfig.canvasMouseShape},set:function(e){var t;d(e)?(this._uiConfig.canvasConfig.canvasMouseShape=e,null!=(t=this.ui)&&t.setCanvasMouseShape(e),this._e(Se)):this._e(we)}},{key:"canvasBackground",get:function(){return this._uiConfig.canvasConfig.canvasBackground},set:function(e){var t;m(e)?(this._uiConfig.canvasConfig.canvasBackground=e,null!=(t=this.ui)&&t.setInnerTbProp("canvasBackground",e),this._e(Se)):this._e(Le)}},{key:"cropBoxStyle",get:function(){return this.vm.cropBoxStyle},set:function(e){c(e)?(void 0!==e.borderColor&&(this._uiConfig.canvasConfig.selectedBoxLineColor=e.borderColor),this._uiConfig.canvasConfig.cropBoxStyle||(this._uiConfig.canvasConfig.cropBoxStyle={}),Object.assign(this._uiConfig.canvasConfig.cropBoxStyle,e),this.vm.setCropBoxStyle(this._uiConfig.canvasConfig.cropBoxStyle),null!=(e=this.ui)&&e.setCropBoxStyle(this._uiConfig.canvasConfig.cropBoxStyle),this._e(Se)):this._e(we)}},{key:"selectedBoxLineColor",get:function(){return this.vm.cropBoxStyle.borderColor},set:function(e){m(e)?(this._uiConfig.canvasConfig.selectedBoxLineColor=e,this._uiConfig.canvasConfig.cropBoxStyle||(this._uiConfig.canvasConfig.cropBoxStyle={}),this._uiConfig.canvasConfig.cropBoxStyle.borderColor=e,this._uiConfig.canvasConfig.cropBoxStyle.ctrlBorderColor=e,this.vm.setCropBoxStyle(this._uiConfig.canvasConfig.cropBoxStyle),null!=(e=this.ui)&&e.setCropBoxStyle(this._uiConfig.canvasConfig.cropBoxStyle),this._e(Se)):this._e(Le)}},{key:"saveBackgroundColor",get:function(){return this.vm.getSaveBackgroundColor()},set:function(e){this.vm.setSaveBackgroundColor(e)}},{key:"saveQuality",get:function(){return this.vm.getSaveQuality()},set:function(e){this.vm.setSaveQuality(e)}},{key:"saveType",get:function(){return this.vm.getSaveType()},set:function(e){this.vm.setSaveType(e)}},{key:"rotateMode",get:function(){return this.vm.getRotateMode()},set:function(e){this.vm.setRotateMode(e)}},{key:"canvasBorder",get:function(){return this._uiConfig.canvasConfig.canvasBorder},set:function(e){var t;p(e)?(this._uiConfig.canvasConfig.canvasBorder=e,null!=(t=this.ui)&&t.setCanvasBorder(e),this._e(Se)):this._e(Ve)}},{key:"pageBackground",get:function(){return this._uiConfig.canvasConfig.pageBackground},set:function(e){var t;m(e)?(this._uiConfig.canvasConfig.pageBackground=e,null!=(t=this.ui)&&t.setInnerTbProp("pageBackground",e),this._e(Se)):this._e(Le)}},{key:"pageBorder",get:function(){return this._uiConfig.canvasConfig.pageBorder},set:function(e){var t;p(e)?(this._uiConfig.canvasConfig.pageBorder=e,null!=(t=this.ui)&&t.setInnerTbProp("pageBorder",e),this._e(Se)):this._e(Ve)}},{key:"selectedPageBackground",get:function(){return this._uiConfig.canvasConfig.selectedPageBackground},set:function(e){var t;m(e)?(this._uiConfig.canvasConfig.selectedPageBackground=e,null!=(t=this.ui)&&t.setInnerTbProp("selectedPageBackground",e),this._e(Se)):this._e(Le)}},{key:"selectedPageBorder",get:function(){return this._uiConfig.canvasConfig.selectedPageBorder},set:function(e){var t;p(e)?(this._uiConfig.canvasConfig.selectedPageBorder=e,null!=(t=this.ui)&&t.setInnerTbProp("selectedPageBorder",e),this._e(Se)):this._e(Ve)}},{key:"hoverPageBorder",get:function(){return this._uiConfig.canvasConfig.hoverPageBorder},set:function(e){var t;p(e)?(this._uiConfig.canvasConfig.hoverPageBorder=e,null!=(t=this.ui)&&t.setInnerTbProp("hoverPageBorder",e),this._e(Se)):this._e(Ve)}},{key:"hoverPageBackground",get:function(){return this._uiConfig.canvasConfig.hoverPageBackground},set:function(e){var t;m(e)?(this._uiConfig.canvasConfig.hoverPageBackground=e,null!=(t=this.ui)&&t.setInnerTbProp("hoverPageBackground",e),this._e(Se)):this._e(Le)}},{key:"placeholderBackground",get:function(){return this._uiConfig.canvasConfig.placeholderBackground},set:function(e){var t;m(e)?(this._uiConfig.canvasConfig.placeholderBackground=e,null!=(t=this.ui)&&t.setInnerTbProp("placeholderBackground",e),this._e(Se)):this._e(Le)}},{key:"showPageNumber",get:function(){return this._uiConfig.canvasConfig.showPageNumber},set:function(e){var t;f(e)?(this._uiConfig.canvasConfig.showPageNumber=e,this._uiConfig.canvasConfig.pageNumber||(this._uiConfig.canvasConfig.pageNumber={}),this._uiConfig.canvasConfig.pageNumber.visibility=e?"visible":"hidden",null!=(t=this.ui)&&t.setInnerTbProp("showPageNumber",e),this._e(Se)):this._e(we)}},{key:"pageNumber",get:function(){var e;return null==(e=this._uiConfig.canvasConfig)?void 0:e.pageNumber},set:function(e){var t;c(e)?(void 0!==e.visibility&&(this._uiConfig.canvasConfig.showPageNumber="visible"===e.visibility),this._uiConfig.canvasConfig.pageNumber||(this._uiConfig.canvasConfig.pageNumber={}),Object.assign(this._uiConfig.canvasConfig.pageNumber,e),null!=(t=this.ui)&&t.setInnerTbProp("pageNumber",e),this._e(Se)):this._e(we)}},{key:"checkbox",get:function(){return this._uiConfig.canvasConfig.checkbox||{}},set:function(e){var t;c(e)?(this._uiConfig.canvasConfig.checkbox||(this._uiConfig.canvasConfig.checkbox={}),Object.assign(this._uiConfig.canvasConfig.checkbox,e),null!=(t=this.ui)&&t.setInnerTbProp("checkbox",e),this._e(Se)):this._e(we)}},{key:"multiSelectMode",get:function(){return this._multiSelectMode},set:function(e){var t;f(e)?(this._multiSelectMode=e,null!=(t=this.ui)&&t.setInnerTbProp("multiSelectMode",e),this._e(Se)):this._e(we)}},{key:"allowPageDragging",get:function(){return this._uiConfig.canvasConfig.allowPageDragging},set:function(e){var t;f(e)?(this._uiConfig.canvasConfig.allowPageDragging=e,null!=(t=this.ui)&&t.setInnerTbProp("allowPageDragging",e),this._e(Se)):this._e(we)}},{key:"allowKeyboardControl",get:function(){return this._uiConfig.canvasConfig.allowKeyboardControl},set:function(e){var t;f(e)?(this._uiConfig.canvasConfig.allowKeyboardControl=e,null!=(t=this.ui)&&t.setInnerTbProp("allowKeyboardControl",e),this._e(Se)):this._e(we)}},{key:"pageMargin",get:function(){return this._uiConfig.canvasConfig.pageMargin},set:function(e){var t;h(e)?(this._uiConfig.canvasConfig.pageMargin=e,this.vm.setPageMargin(e),null!=(t=this.ui)&&t.setInnerTbProp("pageMargin",e),this._e(Se)):this._e(Be)}},{key:"scrollDirection",get:function(){return this._uiConfig.canvasConfig.scrollDirection},set:function(e){var t;d(e)?(this._uiConfig.canvasConfig.scrollDirection=e,null!=(t=this.ui)&&t.setInnerTbProp("scrollDirection",e),this._e(Se)):this._e(we)}},{key:"autoChangeIndex",get:function(){return this._uiConfig.canvasConfig.autoChangeIndex},set:function(e){var t;f(e)?(this.uiConfig.canvasConfig.autoChangeIndex=e,null!=(t=this.ui)&&t.setInnerTbProp("autoChangeIndex",e)):this._e(we)}},{key:"outerBorder",get:function(){return this._uiConfig.outerBorder},set:function(e){var t;p(e)?(this._uiConfig.outerBorder=e,null!=(t=this.ui)&&t.setOuterBorder(e),this._e(Se)):this._e(Ve)}},{key:"sidebarWidth",get:function(){return this._uiConfig.sidebarWidth},set:function(e){var t;h(e)?(this._uiConfig.sidebarWidth=e,null!=(t=this.ui)&&t.setSidebarWidth(e),this._e(Se)):this._e(Be)}},{key:"width",get:function(){var e;return(null==(e=this.ui)?void 0:e.getViewerWidth())||this._uiConfig.width},set:function(e){var t;h(e)?(this._uiConfig.width=e,null!=(t=this.ui)&&t.setViewerWidth(e),this._e(Se)):this._e(Be)}},{key:"height",get:function(){var e;return(null==(e=this.ui)?void 0:e.getViewerHeight())||this._uiConfig.height},set:function(e){var t;h(e)?(this._uiConfig.height=e,null!=(t=this.ui)&&t.setViewerHeight(e),this._e(Se)):this._e(Be)}},{key:"uiConfig",get:function(){return this._uiConfig}},{key:"operationMode",get:function(){return this._config.operationMode},set:function(e){var t;g(e)?-1===[0,1,2].indexOf(e)?this._e(ke):(this._config.operationMode=e,this.vm.setOperationMode(e),null!=(t=this.ui)&&t.setOperationMode(e),this._e(Se)):this._e(we)}},{key:"allowSlide",get:function(){return this.vm.getAllowSlide()},set:function(e){f(e)?(this.vm.setAllowSlide(e),this._e(Se)):this._e(we)}},{key:"tabMode",get:function(){return this._config.tabMode},set:function(e){"single"===e||"multiple"===e?(this._config.tabMode=e,this.vm.setTabMode(e),this._e(Se)):this._e(ke)}},{key:"selectionBoxAspectRatio",get:function(){return this.vm.getAspectRatio()},set:function(e){var t;g(e)?(this.vm.setAspectRatio(e),null!=(t=this.ui)&&t.setAspectRatio(e),this._e(Se)):this._e(we)}},{key:"keepAspectRatio",get:function(){return this.vm.getKeepAspectRatio()},set:function(e){f(e)?this.vm.setKeepAspectRatio(e):this._e(we)}},{key:"displayMode",get:function(){return this._config.displayMode},set:function(e){var t;d(e)?-1!==["single","continuous"].indexOf(String(e))?(this._config.displayMode=e,null!=(t=this.ui)&&t.setDisplayMode(e),this.vm.setDisplayMode(e),this._e(Se)):this._e(Ce):this._e(we)}},{key:"zooming",get:function(){return this._config.zooming},set:function(e){this._config.zooming=e,this._e(Se)}},{key:"scrollX",get:function(){return this._config.scrollX},set:function(e){this._config.scrollX=e,this._e(Se)}},{key:"scrollY",get:function(){return this._config.scrollY},set:function(e){this._config.scrollY=e,this._e(Se)}},{key:"keepZoom",get:function(){return this._config.keepZoom},set:function(e){f(e)?(this._config.keepZoom=e,this.vm.setKeepZoom(e),this._e(Se)):this._e(we)}},{key:"ifAllowSlide",get:function(){return this._config.ifAllowSlide},set:function(e){f(e)?(this._config.ifAllowSlide=e,this._e(Se)):this._e(we)}},{key:"zoomInDelta",get:function(){return this._config.zoomInDelta},set:function(e){g(e)?e<=0?this._e(Ce):(this._config.zoomInDelta=e,this._e(Se)):this._e(we)}},{key:"zoomOutDelta",get:function(){return this._config.zoomOutDelta},set:function(e){g(e)?e<=0?this._e(Ce):(this._config.zoomOutDelta=e,this._e(Se)):this._e(we)}},{key:"zoomDelta",get:function(){return this._config.zoomDelta},set:function(e){g(e)?e<=0?this._e(Ce):(this._config.zoomDelta=e,this._e(Se)):this._e(we)}},{key:"currentPageCount",get:function(){return this.vm.getCurPageCount()}},{key:"showLatestPage",get:function(){return this._config.showLatestPage},set:function(e){f(e)?(this._config.showLatestPage=e,this.vm.showLatest=e,this._e(Se)):this._e(we)}},{key:"container",get:function(){return this._config.container},set:function(e){""===e||v(e)||v(e)?this._config.container=e:this._e(we)}},{key:"optimizeImage",get:function(){return this.vm.useHermite},set:function(e){this.vm.setUseHermite(e)}}]),Pt),Tt=(s(Mt,ct=G),(en=Mt.prototype).getCounts=function(){return this.chs.length},en.addViewer=function(e){return-1==this.vws.indexOf(e)&&(this.vws.push(e),!0)},en.removeViewer=function(e){return-1!=(e=this.vws.indexOf(e))&&(this.vws.splice(e,1),!0)},Mt),St=((en=Et.prototype).addTab=function(e,t){var n=this.checkTab(e.uid),r=null;return-1!==n?r=this.tabs[n]:(r=new Tt(e),this.tabs.push(r)),t&&r.addViewer(t),r},en.getTab=function(e){return-1===(e=this.checkTab(e))?null:this.tabs[e]},en.removeTab=function(e){-1<(e=this.checkTab(e))&&this.tabs.splice(e,1)},en.checkTab=function(e){for(var t=this.tabs.length,n=0;n<t;n++)if(this.tabs[n].uid===e)return n;return-1},en.setMode=function(e){return("single"===e||"multiple"===e)&&(this.mode=e,!0)},en.removePage=function(e,t){return-1!=(e=this.checkTab(e))&&this.tabs[e].remove(t)},en.dispose=function(){},Et),wt=((en=Ct.prototype).dispose=function(){this.isDisposed||(this._setCanvasSize(1,1),this._clearRect(this.mainCtx),this._clearRect(this.minorCtx),this.mainCanvas=null,this.minorCanvas=null,this.mainCtx=null,this.minorCtx=null,this.isDisposed=!0)},en.reset=function(){this.scale=1,this.pageUid=null,this._curOpType=null},en.render=function(e){var t=this,n=e.viewerUid,r=e.pageUid,i=e.isMin,o=e.img,a=e.page,s=e.midData;r!==this.pageUid&&(this.ownerViewer=n,this.isMin=i,this.pageUid=r,e=1,n=o.naturalWidth,i=o.naturalHeight,Math.pow(Math.pow(n,2)+Math.pow(i,2),.5),r=Math.max(n,i),this.isKeepCanvasSize?this.mainCanvas.width<r&&(this.scale=e=this.baseSize/r):this.mainCanvas.width===n&&this.mainCanvas.height===i||this._setCanvasSize(n,i),n*=e,i*=e,n=Math.floor(n),i=Math.floor(i),this._setMainSize(n,i),this._setMinorSize(n,i),this._clearRect(this.mainCtx),this._clearRect(this.minorCtx),this.mainCtx.drawImage(o,0,0,n,i),this.minorCtx.drawImage(o,0,0,n,i),r=s.edt.all.slice(),s.edt.reset(),r.forEach((function(e){"rotate"===e.type?(s.edt.rotate(e.angle,0,0,e.mode),t.rotate(e,a,s)):"flip"===e.type?(s.edt.flip(e.direction),t.flip(e,a,s)):"crop"===e.type?(s.edt.crop(e.left,e.top,e.width,e.height),t.crop(e,a)):"erase"===e.type?(s.edt.erase(e.left,e.top,e.width,e.height,e.color),t.erase(e,a)):"changeSize"===e.type&&(s.edt.changePageSize(e.width,e.height),t.changePageSize(e,a))})))},en.rotate=function(e,t,n){var r=this.mainCanvas,i=this.minorCanvas,o=this.mainCtx,a=this.minorCtx,s=null,u=this.mainWidth,c=this.mainHeight,l=1,d=0,h=!1,g=(0===e.mode&&(u=(s=w(0,0,this.minorWidth,this.minorHeight,e.calcAngle)).width,c=s.height,d=Math.pow(Math.pow(u,2)+Math.pow(c,2),.5),h=!this.isKeepCanvasSize&&(this.mainCanvas.width!==u||this.mainCanvas.height!==c),this.isKeepCanvasSize&&(g=Math.max(u,c),this.mainCanvas.width<g&&(l=this.baseSize/g)),u*=l,c*=l),null!==this._curOpType&&this._curOpType!==e.mode&&(s&&h&&this._setMinorCanvasSize(d,d),this._setMinorSize(this.mainWidth,this.mainHeight),this._clearRect(a),a.save(),a.beginPath(),a.rect(0,0,this.minorWidth,this.minorHeight),a.clip(),a.closePath(),a.drawImage(r,0,0),a.restore()),this._curOpType=e.mode,s&&(h&&this._setMainCanvasSize(d,d),this._setMainSize(u,c)),this._clearRect(o),o.save(),o.beginPath(),o.rect(0,0,this.mainWidth,this.mainHeight),o.clip(),o.closePath(),this._fillRect(o,this.mainWidth,this.mainHeight),o.translate(this.mainWidth/2,this.mainHeight/2),n.edt.setTransform(o),this.minorWidth*l/this.minorWidth);r=i.width*g,a=i.height*g,o.drawImage(i,Math.floor(-this.minorWidth*l/2),Math.floor(-this.minorHeight*l/2),Math.floor(r),Math.floor(a)),o.restore()},en.flip=function(e,t,n){var r=this.minorCanvas,i=this.mainCtx;this._clearRect(i),i.save(),i.beginPath(),i.rect(0,0,this.mainWidth,this.mainHeight),i.clip(),i.closePath(),this._fillRect(i,this.mainWidth,this.mainHeight),i.translate(this.mainWidth/2,this.mainHeight/2),n.edt.setTransform(i),i.drawImage(r,Math.floor(-this.minorWidth/2),Math.floor(-this.minorHeight/2)),i.restore()},en.crop=function(e,t){var n=this.mainCanvas,r=this.minorCanvas,i=this.mainCtx,o=this.minorCtx,a=this.scale,s=e.left,u=e.top,c=e.width;e=e.height,s*=a,u*=a,this._setMinorSize(c*=a,e*=a),this._clearRect(o),o.save(),o.beginPath(),o.rect(0,0,c,e),o.clip(),o.closePath(),o.translate(-s,-u),o.drawImage(n,0,0),o.restore(),this._setMainSize(c,e),this._clearRect(i),i.save(),i.beginPath(),i.rect(0,0,this.mainWidth,this.mainHeight),i.clip(),i.closePath(),i.drawImage(r,0,0),i.restore()},en.erase=function(e,t){var n=this.mainCanvas,r=this.mainCtx,i=this.minorCtx,o=this.scale,a=e.left,s=e.top,u=e.width,c=e.height;a*=o,s*=o,u*=o,c*=o,o=e.color||"#ffffff",this._clearRect(i),i.save(),i.beginPath(),i.rect(0,0,this.minorWidth,this.minorHeight),i.clip(),i.closePath(),i.drawImage(n,0,0),i.fillStyle=o,i.fillRect(a,s,u,c),i.restore(),r.save(),r.fillStyle=o,r.fillRect(a,s,u,c),r.restore()},en.changePageSize=function(e,t){var n=this.mainCanvas,r=this.minorCanvas,i=this.mainCtx,o=this.minorCtx,a=e.width,s=(e=e.height,this.scale),u=Math.pow(Math.pow(a,2)+Math.pow(e,2),.5),c=(this.isKeepCanvasSize?(c=Math.max(a,e),this.mainCanvas.width<c&&(this.scale=s=this.baseSize/c)):this.mainCanvas.width<u&&this._setMinorCanvasSize(u,u),this._setMinorSize(a*=s,e*=s),this._clearRect(o),o.save(),o.beginPath(),o.rect(0,0,this.minorWidth,this.minorHeight),o.clip(),o.closePath(),a/this.mainWidth);c*=n.width,s=n.height*(s=e/this.mainHeight),o.drawImage(n,0,0,Math.floor(c),Math.floor(s)),o.restore(),this.isKeepCanvasSize||this.mainCanvas.width<u&&this._setMainCanvasSize(u,u),this._setMainSize(a,e),this._clearRect(i),i.save(),i.beginPath(),i.rect(0,0,this.mainWidth,this.mainHeight),i.clip(),i.closePath(),i.drawImage(r,0,0),i.restore()},en._clearRect=function(e){e.clearRect(0,0,e.canvas.width,e.canvas.height)},en._fillRect=function(e,t,n){return e.save(),e.fillStyle=this.saveColor,e.fillRect(0,0,t,n),e.restore(),!0},en._setMainSize=function(e,t){this.mainWidth=e,this.mainHeight=t},en._setMinorSize=function(e,t){this.minorWidth=e,this.minorHeight=t},en._setCanvasSize=function(e,t){this.mainCanvas.width=e,this.mainCanvas.height=t,this.minorCanvas.width=e,this.minorCanvas.height=t},en._setMainCanvasSize=function(e,t){this.mainCanvas.width=e,this.mainCanvas.height=t},en._setMinorCanvasSize=function(e,t){this.minorCanvas.width=e,this.minorCanvas.height=t},Ct);function Ct(e,t,n){this.baseSize=0,this.mainWidth=0,this.mainHeight=0,this.minorWidth=0,this.minorHeight=0,this._curOpType=null,this.saveColor=null,this.saveType="image/jpg",this.scale=1,this.isKeepCanvasSize=!1,this.isDisposed=!1,this.uid=e,this.baseSize=t=t||3840,e=document.createElement("canvas");var r=document.createElement("canvas");e.id="dvs_used_as_offscreenCanvas_main_".concat(this.uid),r.id="dvs_used_as_offscreenCanvas_minor_".concat(this.uid),this.mainCanvas=e,this.minorCanvas=r,this.mainCtx=e.getContext("2d"),this.minorCtx=r.getContext("2d"),this.mainCtx.imageSmoothingEnabled=!1,this.minorCtx.imageSmoothingEnabled=!1,this._setCanvasSize(t,t),void 0!==n?this.isKeepCanvasSize=n:_()&&(this.isKeepCanvasSize=!0)}function Et(e){this.tabs=[],this.mode="single",this.tabs=[]}function Mt(e){var t=ct.call(this,e)||this;return t.vws=[],t.name=e.name,t.type=e.type,t.chs=e.chs||[],t}function Pt(e){var t=e.config,n=e.viewUi,r=e.workerBlobURL,i=e.scrollbarWidth,o=e.groupUid,a=e.defaultConfig,s=e.mPub,u=e.focus,c=e.db,l=e.offScreenCanvas;return e=e.saveCanvas,(s=lt.call(this,s)||this).ViewUi=null,s.group=null,s._uiConfig={canvasConfig:{}},s._config={},s._dfConfig=null,s._focus={viewerId:void 0,thumbnailId:void 0},s._multiSelectMode=!1,s.workerBlobURL=null,s.uid=b(6),s.postfix="-"+s.uid,s._iPub=new P,s._db=c,s.ViewUi=n,s.group=o,s._dfConfig=a,s._focus=u,s.workerBlobURL=r,s.vm=new bt(t,s._iPub.getPublishSubscribe(),s._oPub,s.uid,r,i,c,l,e),n=s.initConfig(t),s.bindView(s.container),s._bindEvents(),n.length?(a="Failed to create the viewer because the parameter ".concat(o=n[0]," is incorrect."),s._e({code:80024,message:a})):s._e(Se),s}function At(e,t,n,r,i,o,a,s,u){var c=dt.call(this,t)||this;return c.showLatest=!0,c.isMainViewVisible=!0,c.isThumbnailVisible=!0,c.thbViews=[],c.tabMode="single",c.autoOpen=!0,c.keepZoom=!0,c.cors=!0,c.minPicWidth=800,c.minPicHeight=800,c.saveType="image/jpeg",c.saveQuality=1,c.useHermite=!0,c.rows=1,c.columns=1,c.slideTimer=null,c.showTabTimer=null,c.isDisposed=!1,c.cropBoxStyle={borderWidth:1,borderColor:"#000",invalidBorderColor:"#f00",dashLine:[4,2],background:"",ctrlBorderWidth:1,ctrlBorderRadius:0,ctrlBorderColor:"#000",invalidCtrlBorderColor:"#f00",ctrlBackground:"",ctrlWidth:8,ctrlHeight:8,enableConcaveBorderColor:!1},Object.assign(c.cropBoxStyle,e.uiConfig.canvasConfig.cropBoxStyle||{}),c.saveCanvas=u,c.uid=r,c._mPub=new P(n),c._db=a,c._tabMng=new yt(e),void 0===document.documentMode&&!_()||(c.useHermite=!1),c._gpc=new it(e,c._db,c._oPub,r,c.useHermite,i,o,s),c._initEvent(),c._gpc.slide.bindSlideEndCallback((function(e){e===j?c.prevPage():e===H&&c.nextPage(),dt.prototype._emit.call(qe(c),"slideFinished",e),c.setFitType("window")})),c}function xt(e){this.tabs=[],this.mode="single",this.curTab=null,this.dfConfig=null,this._opStack=[],this.tabs=[],this.dfConfig={zoom:1,fitType:"window",disMode:"single",opMode:0}}function Rt(e){var t=ht.call(this,e)||this;return t.cur=-1,t.total=0,t.slt=[],t.chs=[],t.thbs=[],t.scrL=0,t.scrT=0,t.virW=0,t.virH=0,t.iMargin=0,t.oMargin=0,t.zoom=1,t.fitType="window",t.clickZoom=!1,t.isFreeCrop=!1,t.disMode="single",t.opMode=0,t.name=e.name,t.type=e.type,t.chs=e.chs,t.zoom=e.zoom,t.fitType=e.fitType,t.disMode=e.disMode,t.opMode=e.opMode,t}function kt(e){this.uid=e.uid,this.chs=e.chs||[]}function Lt(e,t,n){this._db=null,this.visible=!1,this.children=[],this.redoStack=[],this.undoStack=[],this.matrixStack=[],this.style={left:0,top:0,width:0,height:0,borderColor:"#ffffff",borderType:"solid",borderWidth:0},this.naturalWidth=0,this.naturalHeight=0,this.wrapLeft=0,this.wrapTop=0,this.wrapWidth=0,this.wrapHeight=0,this.rotateAngle=0,this.flipCount=0,this.flipCountX=0,this.flipCountY=0,this.selectionBoxes=[],this.cropMng=null,this.editor2d=null,this._db=t,this.uid=e.uid,this.naturalWidth=e.naturalW,this.naturalHeight=e.naturalH,this.cropMng=new st(this.naturalWidth,this.naturalHeight,n),this.editor2d=new je}function Ft(e,t,n){this._activeBoxId=null,this._startX=null,this._startY=null,this._addNewFlag=null,this._drawingFlag=!1,this.cropBoxes=[],this.width=0,this.height=0,this.zoom=1,this.aspectRatio=0,this.keepAspectRatio=!1,this.mouseDown=!1,this.unselectedCallback=null,this.selectedCallback=null,this.cropBoxStyle={},this.width=e,this.height=t,Object.assign(this.cropBoxStyle,n)}function Wt(e){var t=this;this.uid=null,this.mode="normal",this.vertexes=[],this.midpoints=[],this.probePoints=[],this.slopeRatio=[],this.isCrop=!1,this.isConvex=!0,this.isPointSelected=!1,this.activeProbePoint=null,this.moveLeft=0,this.moveTop=0,this.isMoveBox=!1,this.width=0,this.height=0,this.type="bottomRight",this.keepAspectRatio=!1,this.aspectRatio=0,this._startX=null,this._startY=null,this._lastX=null,this._lastY=null,this._lastWhr=1,this.zoom=1,this.dpr=1,this.cropBoxStyle={ctrlWidth:8,ctrlHeight:8},this.uid=b(11),Object.keys(e).forEach((function(n){t[n]=e[n]})),this._initBox()}function Ot(e,t){var n=gt.call(this,t)||this;return n.uid=null,n._tbPub=null,n._size=null,n._mouseShape="pointer",n._direction="vertical",n._sequence=-1,n._location="horizontal",n._showThb=!0,n._showPNum=!1,n._showRmBtn=!1,n._fullThb=!1,n._dragging=!0,n._resizing=!0,n._keyboard=!1,n._rows=4,n._columns=1,n._bg="rgba(67,66,70,1)",n._border="1px solid rgba(27,27,29,1)",n._pageBg="rgba(0,0,0,0)",n._pageBorder="1px solid rgba(128,128,128,1)",n._sltPBg="rgba(127,133,251,1)",n._sltPBorder="1px solid rgba(255,0,0,1)",n._hvPBg="rgba(196,250,248,1)",n._hvPBorder="1px solid rgba(255,255,0,1)",n._placeholderBg="rgba(255,192,203,1)",n._pageMargin=10,n._autoChangeIdx=!1,n._checkboxConfig={},n._pageNumberConfig={},n._multiSelectMode=!1,n._optimizeImage=!0,n.uid=b(11),n._tbPub=new P,n.init(e),n._tbPub._on("_changeThumbnailViewProp",(function(e){for(var t in e)n[t]=e[t]})),n}function Bt(e,t,n,r,i,o,a,s){var u=ft.call(this,n)||this;return u.uid=null,u.cvsOffW=0,u.cvsOffH=0,u.cvsCltW=0,u.cvsCltH=0,u.cvsInnerW=0,u.cvsInnerH=0,u.maxW=0,u.maxH=0,u.virW=0,u.virH=0,u.dpr=1,u.fitType="window",u.keepZoom=!0,u.clickZoom=!1,u.isFreeCrop=!1,u.zoom=1,u.zoomInDelta=1.2,u.zoomOutDelta=1.2,u.zoomDelta=1.2,u.scrL=0,u.scrT=0,u.disMode="single",u.opMode=0,u.curTab=null,u.curPages=[],u.iMargin=10,u.oMargin=10,u.rows=0,u.columns=0,u._mousedown=!1,u._pageX=0,u._pageY=0,u.rotateMode=1,u.saveBg="#ffffff",u.aspectRatio=0,u.keepAspectRatio=!1,u._startDistance=0,u.useWebWorker=!1,u.renderTaskUid=null,u.workerTimer=null,u.useHermite=!0,u.hermite=null,u.workerBlobURL=null,u.scrBarW=0,u.loadingTimer=null,u.allowSlide=!0,u.slide=null,u.isSliding=!1,u.zooming=!0,u.scrollX=!0,u.scrollY=!0,u.animating=!1,u.bouncing=!1,u.paging=!1,u.snapping=!1,u.animationDuration=300,u.locking=!1,u.minZoom=.01,u.maxZoom=8,u.speedDelta=1,u._outerWidth=0,u._outerHeight=0,u._innerWidth=0,u._innerHeight=0,u._outerLeft=0,u._outerTop=0,u._snapWidth=0,u._snapHeight=0,u._pullHeight=0,u._pullActive=!1,u._maxSrL=0,u._maxSrT=0,u._srL=0,u._srT=0,u._zoom=1,u._futureLeft=0,u._futureTop=0,u._futureZoom=0,u._zoomComplete=null,u._isSingleTouch=!0,u._isDecelerating=!1,u._isProcessing=!1,u._isDragging=!1,u._isAnimating=!1,u._interruptedAnimation=!1,u._position=[],u._startTouchLeft=0,u._startTouchTop=0,u._startZoom=1,u._lastTouchLeft=0,u._lastTouchTop=0,u._lastScale=1,u._enableScrollX=!0,u._enableScrollY=!0,u._fps=60,u._running={},u._counter=1,u.cropLineColor="rgba(0,0,0,1)",u.defaultCursor=null,u.isDisposed=!1,u.offScreenCanvas=s,u.uid=r,u.dpr=S(),u._db=t,u.fitType=e.fitType,u.maxZoom=e.maxZoom,u.minZoom=e.minZoom,u.opMode=e.opMode,u.iMargin=e.iMargin,u.scrollX=e.scrollX,u.scrollY=e.scrollY,u.zoomInDelta=e.zoomInDelta,u.zoomOutDelta=e.zoomOutDelta,u.zoomDelta=e.zoomDelta,u.zooming=e.zooming,u.useWebWorker=e.useWebWorker,u.useHermite=i,u.scrBarW=a,u.cvsMng=new tt,u.offScreenCanvas.saveColor=u.saveBg,u._initAnimation(),u._initScroller(),u.slide=new nt(n,t),u.slide.stateCb=function(e){u.isSliding=e},u.useHermite&&(u.workerBlobURL||(u.workerBlobURL=o),u.hermite=new rt(u.useWebWorker,u.workerBlobURL)),u}function Nt(e,t){this.useWorker=!0,this.workers_archive=[],this.taskUid=null,this.useWorker=e,this.cores=2,this.workerBlobURL=t}function Vt(e,t){return(e=pt.call(this,e)||this).wrapper=null,e.isVisible=!1,e.isDragging=!1,e.isStart=!1,e.startX=0,e.startTime=0,e.hideTimer=null,e.width=0,e.triggerDist=10,e.minDistanceThreshold=60,e.minTimeThreshold=300,e.pages=null,e.slideEndCallback=null,e.slidingStateChangedCallback=null,e.stateCb=null,e.touchNum=0,e.curPageUid=null,e.renderPageUid=null,e.loading=!1,e.isNew=!1,e.targetIndexes=[-1,-1,-1],e.allowDrag=!0,e.isDisposed=!1,e._db=t,e.isDisposed=!1,e.pages=[{width:0,height:0,url:"",uid:"",index:-1},{width:0,height:0,url:"",uid:"",index:-1},{width:0,height:0,url:"",uid:"",index:-1}],e._initEvent(),e}function Ut(){this.saveColor="#ffffff";var e=S();this.mainCvs=new et({dpr:e}),this.cropCvs=new $e({dpr:e})}function Gt(e){return _t.call(this,e)||this}function jt(e){return(e=vt.call(this,e)||this).maskColor="rgba(200,200,200,0.5)",e.isMask=!0,e}function Ht(e){this.cssWidth=0,this.cssHeight=0,this.dpr=1,this.canvas=null,this.ctx=null,this.dpr=e.dpr}s(Mn,$t=P),(en=Mn.prototype)._initTopEvent=function(){var e=this;this.on(oe,(function(t,n,r,i){e._load(t,n,r,i)})),this.on(ae,(function(t,n,r){e._open(t,n,r)})),this.on(_e,(function(t,n,r,i){var o=e._tabMng.getTab(i);o&&o.vws.forEach((function(r){(r=e.uidViewer(r))&&r.vm.renameTag(t,n,i)}))})),this.on(pe,(function(t,n,r){var i=e._tabMng.getTab(r);i&&i.vws.forEach((function(t){(t=e.uidViewer(t))&&t.vm.emptyTag(r)}))})),this.on(me,(function(t,n,r){var i=e._tabMng.getTab(r);i&&i.vws.forEach((function(n){(n=e.uidViewer(n))&&n.vm.addPageTag(t,r)}))})),this.on(fe,(function(t,n,r){var i=e._tabMng.getTab(r);i&&i.vws.forEach((function(n){(n=e.uidViewer(n))&&n.vm.rmPageTag(t,r)}))})),this.on(Te,(function(t,n,r,i){var o=e._tabMng.getTab(i);o&&o.vws.forEach((function(r){(r=e.uidViewer(r))&&r.vm.renameFile(t,n,i)}))})),this.on(De,(function(t){e.emit(de,{},t.chs.slice());var n=e._tabMng.getTab(t.uid);n&&(n.vws.forEach((function(n){(n=e.uidViewer(n))&&n.closeTab(t.uid)})),e._tabMng.removeTab(t.uid))})),this.on(ve,(function(t){e.vws.forEach((function(e){e.vm.changeTag(t)}))})),this.on(Q,(function(t){e.vws.forEach((function(e){e.vm.changeDir(t)}))})),this.on(ie,(function(t,n){var r=e._db.getMid(t);r&&(t===e.offScreenCanvas.pageUid&&e.offScreenCanvas.reset(),e._tabMng.tabs.forEach((function(r){-1!==r.chs.indexOf(t)&&r.vws.forEach((function(i){(i=e.uidViewer(i))&&(i.vm.updateSync(t,r.uid,n),i.vm.showThbItem(t))}))})),r.minData||e._loadMinPic(t))}))},en._initViewerEvent=function(){var e=this;this.onM("dvsRenderMainPage",(function(t,n){t.forEach((function(t){(t=e.uidViewer(t))&&t.vm.renderMainPage(n)}))})),this.onM(Ie,(function(t,n){e.emit(Ie,t,n)})),this.onM(ye,(function(t,n,r){e.emit(ye,t,n,r)})),this.onM(Y,(function(t){e._err(t)})),this.onM(se,(function(t){e._loadMinPic(t)})),this.onM(ce,(function(t,n,r){e._getGroup(t).forEach((function(e){if(e.uid!==t)switch(n){case"first":e.vm.firstPage(!1);break;case"last":e.vm.lastPage(!1);break;case"next":e.vm.nextPage(!1);break;case"prev":e.vm.prevPage(!1);break;case"goto":e.vm.gotoPage(r,!1);break;case"cur":e.vm.setCurIndex(r,!1);break;case"slt":e.vm.setSltPages(r,!1)}}))})),this.onM(le,(function(t,n,r,i,o){var a,s=e._tabMng.getTab(n.uid);s&&(a=s.uid,s.vws.forEach((function(n){if(t!==n){var s=e.uidViewer(n);if(s)switch(r){case"switch":s.vm.switchPage(i,o,!1,a);break;case"move":s.vm.movePage(i,o,!1,a);break;case"reorder":s.vm.reorderPage(i,o,!1,a)}}})),s[r](i,o),e.emit(le,n,r,i,o))})),this.onM(de,(function(t,n,r){e.emit(de,n,r),r.forEach((function(t){e._tabMng.tabs.forEach((function(e){e.remove(t)}))})),e.vws.forEach((function(e){e.uid!==t&&e.vm.remove(r,!1,n.uid)}))})),this.onM(he,(function(t,n){var r=n.uid,i=e._db.getMid(r);if(i){if(e._loadMinPic(r),i.vws.length){var o=e.offScreenCanvas;if(o.pageUid===r)switch(t){case"rotate":o.rotate(n.rotateObj,n.page,n.interlayerData);break;case"flip":o.flip(n.flipObj,n.page,n.interlayerData);break;case"crop":o.crop(n.cropObj,n.page);break;case"erase":o.erase(n.eraseObj,n.page);break;case"changePageSize":o.changePageSize(n.changeSizeObj,n.page);break;case"reset":o.reset()}}i.vws.forEach((function(t){(t=e.uidViewer(t))&&t.vm.uidIdx(r)===t.vm.getCurIndex()&&t.vm.render()}))}})),this.onM(ue,(function(t,n){(t=e._tabMng.getTab(t))&&t.removeViewer(n)}))},en._getGroup=function(e){var t=this,n=[];return(e=this.uidViewer(e))&&this._group[e.group].forEach((function(e){(e=t.uidViewer(e))&&n.push(e)})),n},en._loadMinPic=function(e){for(var t=this._q,n=-1,r=0;r<this.loader.length;r++)if(!this.loader[r]){n=r;break}-1===n?-1===t.indexOf(e)&&t.push(e):(this.loader[n]=!0,this.runLoader(e,n))},en._convertData=function(e){return new Promise((function(t,n){var r;c(e)?t(e):((r=new XMLHttpRequest).onload=function(){var e=M.createURL(r.response);t(e)},r.open("GET",e,!0),r.responseType="blob",r.send())}))},en.runLoader=function(e,t){var n,r,i,o,a,s=this,u=this._db.getMid(e);u&&u.minData&&u.vws.forEach((function(t){var n=-1;s.vws.some((function(e,r){if(e.uid===t)return n=r,!0})),-1!==n&&s.vws[n].vm.showThbItem(e)})),!u||u.activeMin||u.minData?(n=this._q.shift())?this.runLoader(n,t):this.loader[t]=!1:(r=!1,i=b(11),u.activeMin=!0,u.minTask=i,o=new Promise((function(t,n){u.oriData?(r=!0,t(u.oriData)):s._db.getDataAsync(e).then((function(e){d(e.oriData)&&(r=!0),10===document.documentMode?s._convertData(e.oriData).then((function(e){t(e)})):(e=M.createURL(e.oriData),t(e))})).catch((function(e){n(e)}))})),a=new Promise((function(t,n){o.then((function(r){var o=new Image;s._cors&&(o.crossOrigin="anonymous"),o.src=r,o.onload=function(){var a=s._db.getMid(e);if(!a||a.minTask!==i)return(null==a?void 0:a.oriData)!==r&&M.revokeObjectURL(r),n("task cancel or page does not exist");o.onload=null,o.onerror=null,t(o)},o.onerror=function(e){return o.onload=null,o.onerror=null,n(e)}})).catch((function(e){n(e)}))})),new Promise((function(t,n){a.then((function(o){var a=s._db.getMid(e);if(!a||a.minTask!==i)return(null==a?void 0:a.oriData)!==o.src&&M.revokeObjectURL(o.src),n("task cancel or page does not exist");s.offScreenCanvas||n("OffScreenCanvas is disposed");var u=s.offScreenCanvas;if(u.isDisposed)return n("The offScreenCanvas is disposed.");u.render({viewerUid:"",pageUid:e,isMin:!0,img:o,page:null,midData:a});var c=1,l=(1<=(l=o.naturalWidth/o.naturalHeight)&&u.mainWidth>s._minW?c=s._minW/u.mainWidth:l<1&&u.mainHeight>s._minH&&(c=s._minH/u.mainHeight),u.mainWidth*c),d=u.mainHeight*c,h=s.canvas,g=h.getContext("2d");h.width!==l&&(h.width=l),h.height!==d&&(h.height=d),l=u.mainCanvas.width*(d=l/u.mainWidth),d*=u.mainCanvas.height,g.drawImage(u.mainCanvas,0,0,Math.floor(l),Math.floor(d)),(a.overlays||[]).forEach((function(e){g.save(),g.globalAlpha=e.opacity,g.fillStyle=e.color,g.fillRect(e.left*c,e.top*c,e.width*c,e.height*c),g.restore()})),!r&&o.src&&(M.revokeObjectURL(o.src),o.src=""),h.toBlob((function(r){var o=s._db.getMid(e);o&&o.minTask===i||n("task cancel or page does not exist"),t(r)}),"image/png")})).catch((function(e){n(e)}))})).then((function(n){n=M.createURLWithType(n);var r=s._db.getMid(e);r&&r.minTask===i&&(r.activeMin=!1,d(null==r?void 0:r.minData)&&""!=(null==r?void 0:r.minData)&&M.revokeObjectURL(r.minData),r.minData=n.data,r.vws.forEach((function(t){var n=-1;s.vws.some((function(e,r){if(e.uid===t)return n=r,!0})),-1!==n&&s.vws[n].vm.showThbItem(e)}))),(n=s._q.shift())?s.runLoader(n,t):s.loader[t]=!1})).catch((function(n){var r=s._db.getMid(e);r&&r.minTask===i&&(r.activeMin=!1),(r=s._q.shift())?s.runLoader(r,t):s.loader[t]=!1})))},en._open=function(e,t,n){var r=this,i=e.uid,o=e.chs.slice(),a=this._tabMng.getTab(i);if((a=a||this._tabMng.addTab({uid:i,name:e.name,type:t,chs:[]},n)).chs=o,i=null,n){if(0===(i=this._getGroup(n).map((function(e){return e.uid}))).length)return void this._err(ke)}else i=a.vws;i.map((function(e){return r.uidViewer(e)})).forEach((function(e){var t;e&&(a.addViewer(e.uid),a.chs.forEach((function(t){(t=r._db.getMid(t))&&t.addViewer(e.uid)})),(t=null==(t=e.vm)?void 0:t.tabHandler(a,null,!0))&&e.vm.showTab(t,"filter"))}))},en._load=function(e,t,n,r){var i=this,o=e.uid,a=e.chs.slice(),s=(s=this._tabMng.getTab(o))||this._tabMng.addTab({uid:o,name:e.name,type:t,chs:[]});this.vws.forEach((function(e){s.addViewer(e.uid)})),s.chs=a,s.vws.forEach((function(e){var t,r=i.uidViewer(e);r&&(s.chs.forEach((function(e){(e=i._db.getMid(e))&&e.addViewer(r.uid)})),e=null,"all"!==s.type.toLowerCase()&&(e=n),(e=null==(t=r.vm)?void 0:t.tabHandler(s,e,!1))&&r.vm.showTab(e))}))},en.bindViewUi=function(e){if(!l(e))return this.emit(Y,we),!1;this._ViewUi=e,this.vws.forEach((function(t){t.ViewUi=e}))},en.createViewer=function(e,t){var n=this,r=(void 0===e&&(e={}),null),i=[],o=null;if(t){if(!(o=this.uidViewer(t)))return this._err(ke),null;i=this._group[r=o.group]}else r=b(11),this._group[r]=i;I(e,t=D(this._defaultConfig)),e={config:t,viewUi:this._ViewUi,workerBlobURL:this._hermiteWorkerUrl,scrollbarWidth:this._scrBarW,groupUid:r,defaultConfig:this._defaultConfig,mPub:this._mPub.getPublishSubscribe(),focus:this._focus,db:this._db,offScreenCanvas:this.offScreenCanvas,saveCanvas:this.saveCanvas};var a=(t=new Dt(e)).uid;return this.vws.push(t),i.push(a),o&&(r=o.vm.getCurTab())&&(r.chs.forEach((function(e){(e=n._db.getMid(e.uid))&&e.addViewer(a)})),(e=this._tabMng.getTab(r.uid)).vws.push(a),(i=t.vm.tabHandler(e,null,!0))&&(i.setCur(r.cur),i.setSlt(r.slt.slice()),t.vm.showTab(i,"filter"))),this.emit(X,"Invoking ViewControl#createViewer."),t},en.removeViewer=function(e){var t=this;if(!e)return!1;var n=e,r=null,i=null;c(e)&&(n=e.uid,r=e);for(var o,a,s=0;s<this.vws.length;s++)if(this.vws[s].uid===n){r=this.vws[s],i=s;break}if(null===i)return!1;for(a in(e=this._group[r.group])&&(o=e.indexOf(n),e.splice(o,1),0===e.length&&delete this._group[r.group]),null!=(o=this._tabMng)&&null!=(e=o.tabs)&&e.forEach((function(e){e.removeViewer(r.uid)&&e.chs.forEach((function(e){(e=t._db.getMid(e))&&e.rmViewer(r.uid)}))})),r.unbindView(),r.dispose(),r)r[a]=null,delete r[a];return this.vws.splice(i,1),this.emit(X,"Invoking ViewControl#removeViewer."),!0},en.uidViewer=function(e){if(!e)return this.vws[0]||null;for(var t=0,n=this.vws.length;t<n;t++){var r=this.vws[t];if(r.uid===e)return r}return null},en.idxViewer=function(e){return e>=this.vws.length||e<0?null:this.vws[e]},en.dispose=function(){var e,t=this;this.isDisposed||($t.prototype.dispose.call(this),null!=(e=this.vws)&&e.forEach((function(e){t.removeViewer(e)})),this.vws=null,this.offScreenCanvas.dispose(),this.offScreenCanvas=null,this.canvas.width=1,this.canvas.height=1,this.canvas.getContext("2d").clearRect(0,0,1,1),this.canvas=null,this.saveCanvas.width=1,this.saveCanvas.height=1,this.saveCanvas.getContext("2d").clearRect(0,0,1,1),(this.saveCanvas=null)!=(e=this._mPub)&&e.dispose(),(this._mPub=null)!=(e=this._tabMng)&&e.dispose(),this._tabMng=null,this._hermiteWorkerUrl&&(M.revokeObjectURL(this._hermiteWorkerUrl),this._hermiteWorkerUrl=null),this.isDisposed=!0)},en._getScrBarW=function(){var e=document.createElement("div"),t=document.createElement("div"),n=(e.appendChild(t),e.setAttribute("style","width:180px;height:180px;position:absolute;overflow:auto;"),t.setAttribute("style","width:200px;height:200px;"),document.body.appendChild(e),e.offsetWidth-e.clientWidth);document.body.removeChild(e),this._scrBarW=n,this.vws.forEach((function(e){e.vm.setScrBarW(n)}))},en.initWorkerUlr=function(){this._hermiteWorkerUrl=M.createURL(new Blob(["("+(function(){onmessage=function(e){var t=e.data.core,n=e.data.width_source,r=e.data.height_source,i=e.data.width,o=e.data.height,a=null;try{a=new Uint8ClampedArray(e.data.source)}catch(Ve){a=new Uint8Array(e.data.source)}var s=i*o*4,u=new ArrayBuffer(s),c=null;try{c=new Uint8ClampedArray(u,0,s)}catch(Ve){c=new Uint8Array(u,0,s)}for(var l=0;l<o;l++)for(var d=l*r/o,h=Math.floor(d),g=1-(d-h),f=h,m=(l+1)*r/o,p=m-(h=Math.floor(m-1e-5)),_=h,v=l*i*4,I=0;I<i;I++){var y=1-((O=I*n/i)-(W=Math.floor(O))),b=W,D=(W=(I+1)*n/i)-(F=Math.floor(W-1e-5)),T=F,S=0,w=0,C=0,E=0,M=(f+1)*n*4+4*b,P=void 0,A=void 0;for(P=f+1;P<_;++P)S+=a[M+2]*y*255,w+=a[M+1]*y*255,C+=a[M]*y*255,E+=255*y,M+=4*n;var x=(f+1)*n*4+4*T;for(P=f+1;P<_;++P)S+=a[x+2]*D*255,w+=a[x+1]*D*255,C+=a[x]*D*255,E+=255*D,x+=4*n;var R=f*n*4+4*(b+1);for(A=b+1;A<T;++A)S+=a[R+2]*g*255,w+=a[R+1]*g*255,C+=a[R]*g*255,E+=255*g,R+=4;var k=_*n*4+4*(b+1);for(A=b+1;A<T;++A)S+=a[k+2]*p*255,w+=a[k+1]*p*255,C+=a[k]*p*255,E+=255*p,k+=4;for(P=f+1;P<_;++P){var L=P*n*4+4*(b+1);for(A=b+1;A<T;++A)S+=255*a[L+2],w+=255*a[L+1],C+=255*a[L],E+=255,L+=4}S+=a[2+(F=f*n*4+4*b)]*(g*y)*255,w+=a[1+F]*(g*y)*255,C+=a[F]*(g*y)*255,E+=g*y*255,S+=a[2+(F=f*n*4+4*T)]*(g*D)*255,w+=a[1+F]*(g*D)*255,C+=a[F]*(g*D)*255,E+=g*D*255,S+=a[2+(F=_*n*4+4*b)]*(p*y)*255,w+=a[1+F]*(p*y)*255,C+=a[F]*(p*y)*255,E+=p*y*255,S+=a[2+(F=_*n*4+4*T)]*(p*D)*255,w+=a[1+F]*(p*D)*255,C+=a[F]*(p*D)*255;var F=(E+=p*D*255)/((W-O)*(m-d)),W=0,O=0,B=0;0!=F&&(W=S/E,O=w/E,B=C/E),W+=.5,O+=.5,B+=.5,c[v]=Math.floor(B),c[++v]=Math.floor(O),c[++v]=Math.floor(W),c[++v]=255,v++}u={core:t,target:c,taskUid:e.data.taskUid};try{postMessage(u,[c.buffer])}catch(Ve){postMessage(u,null)}}}).toString()+")()"],{type:"application/javascript"}))},en.on=function(e,t){$t.prototype._on.call(this,e,t)},en.emit=function(e){for(var t,n=arguments.length,r=new Array(1<n?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=$t.prototype._emit).call.apply(t,[this,e].concat(r))},en.onM=function(e,t){this._mPub._on(e,t)},en.emitM=function(e){for(var t,n=arguments.length,r=new Array(1<n?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=this._mPub)._emit.apply(t,[e].concat(r))},en._err=function(e){this.emit(Y,e)},en._ok=function(){this.emit(Y,Se)};var zt,Kt,Jt,Yt,Xt,Qt,Zt,qt,$t,en,tn=Mn,nn=(s(En,qt=P),(en=En.prototype).createViewer=function(e,t){return this._vwMng.createViewer(e=void 0===e?{}:e,t)},en.getViewerByUid=function(e){return this._vwMng.uidViewer(e)},en.getViewerByIndex=function(e){return this._vwMng.idxViewer(e)},en.removeViewer=function(e){return this._vwMng.removeViewer(e)},en.getViewerList=function(){return this._vwMng.vws.slice()},en.bindViewUiConstructor=function(e){return this._vwMng.bindViewUi(e)},en.dispose=function(){var e;qt.prototype.dispose.call(this),null!=(e=this._vwMng)&&e.dispose(),this._vwMng=null},En),rn=(s(Cn,Zt=G),(en=Cn.prototype).removeChildren=function(e,t){var n=this.chs.length;if(n){for(var r=0;r<n;r++){var i=this.chs[r];if(i.name===e&&i.type===t)return this.chs.splice(r,1)[0]}return!1}return!1},en.setName=function(e){this.name=e},en.reorder=function(e){return("file"===this.type||"all"===this.type)&&Zt.prototype.reorder.call(this,e)},Cn),on=(s(wn,Qt=P),(en=wn.prototype).dispose=function(){Qt.prototype.dispose.call(this)},en._initEvent=function(){var e=this;Qt.prototype._on.call(this,be,(function(t,n,r){var i=r,o=e.findChild(e.dfNode,t);o||(o=e.createFile(t),Qt.prototype._emit.call(e,Q,e.dfNode)),n.forEach((function(t){void 0!==r?o.insert(t.uid,i++):o.append(t.uid),e.all.append(t.uid)})),Qt.prototype._emit.call(e,oe,o,"file",r,e.open),Qt.prototype._emit.call(e,oe,e.all,"all",r,!1)})),Qt.prototype._on.call(this,le,(function(t,n,r,i){var o=null;if("file"===t.type){if(!(o=e._find(t.uid,e.root)))return}else{if("all"!==t.type)return;o=e.all}o[{switch:"switch",move:"move",reorder:"reorder"}[n]](r,i)})),Qt.prototype._on.call(this,de,(function(t,n){n.forEach((function(t){e.all.remove(t),e._rmPage(t,e.root)}))}))},en._rmPage=function(e,t){var n=this;if(!(t.chs.length<1))return t.chs[0].uid?void t.chs.forEach((function(t){n._rmPage(e,t)})):t.remove(e)},en.createFile=function(e){var t=this.dfNode||this.root,n=this.findChild(t,e);return n&&"file"===n.type?Qt.prototype._emit.call(this,Y,Ge):(n=new rn({uid:b(11),name:e,type:"file",parent:t,chs:[]}),this.curNode.chs.push(n),Qt.prototype._emit.call(this,Y,Se)),n},en.openAll=function(e){return Qt.prototype._emit.call(this,ae,this.all,"all",e),this.all.chs.slice()},en.openFile=function(e,t){return(e=this.findChild(this.dfNode,e))&&"file"===e.type?(Qt.prototype._emit.call(this,ae,e,"file",t),Qt.prototype._emit.call(this,Y,Se),e.chs.slice()):(Qt.prototype._emit.call(this,Y,Me),!1)},en.removeFile=function(e){for(var t=this.dfNode.chs,n=t.length-1;0<=n;n--)if(t[n].name===e)return Qt.prototype._emit.call(this,De,t[n]),t.splice(n,1),Qt.prototype._emit.call(this,Y,Se),!0;return Qt.prototype._emit.call(this,Y,Me),!1},en.renameFile=function(e,t){var n=this.findChild(this.dfNode,e),r=this.findChild(this.dfNode,t);return n?r?(this._err(Ge),!1):(n.name=t,r=n.chs.slice(),Qt.prototype._emit.call(this,Te,e,t,r,n.uid),this._ok(),!0):(this._err(Me),!1)},en.getCurrentFileList=function(){return this.dfNode.chs.slice()},en._getSpiltIndex=function(e){for(var t=e.length,n=0;n<t;n++)if("folder"!==e[n].type)return n;return t},en.findChild=function(e,t){return 0<=e.chs.length&&(e=e.chs.filter((function(e){return e.name===t}))).length?e[0]:null},en._find=function(e,t){for(var n=t.chs,r=n.length,i=0;i<r;i++){if(n[i].uid===e)return n[i];if(n[i].children){var o=this._find(e,n[i]);if(o)return o}}},en._err=function(e){Qt.prototype._emit.call(this,Y,e)},en._ok=function(){Qt.prototype._emit.call(this,Y,Se)},wn),an=((en=Sn.prototype).dispose=function(){var e;null!=(e=this._tree)&&e.dispose(),this._tree=null},en.setDefaultFolder=function(e){this._tree.dfNode=e},en.openAll=function(){return this._tree.openAll()},en.getAllContents=function(){return this._tree.all.chs.slice()},en.openFile=function(e,t){return this._tree.openFile(e,t)},en.createFile=function(e){return this._tree.createFile(e)},en.removeFile=function(e){return this._tree.removeFile(e)},en.getCurrentFileList=function(){return this._tree.getCurrentFileList()},en.renameFile=function(e,t){return this._tree.renameFile(e,t)},Sn),sn=(s(Tn,Xt=G),Tn),un=(s(Dn,Yt=P),(en=Dn.prototype).dispose=function(){Yt.prototype.dispose.call(this),this.tags=[]},en._initEvent=function(){var e=this;Yt.prototype._on.call(this,ge,(function(t){var n=!1,r=t.data;r.tags||(r.tags=[]),e.dfName&&-1===r.tags.indexOf(e.dfName)&&r.tags.push(e.dfName),r.tags.forEach((function(r){e.addTag(r)&&(n=!0),(r=e.getTag(r)).append(t.uid),Yt.prototype._emit.call(e,oe,r,"tag",null,null,!1)})),n&&Yt.prototype._emit.call(e,ve,e.getTagList())})),Yt.prototype._on.call(this,le,(function(t,n,r,i){"tag"===t.type&&(t=e.uidTag(t.uid))&&t[{switch:"switch",move:"move",reorder:"reorder"}[n]](r,i)})),Yt.prototype._on.call(this,de,(function(t,n){e.getTagList().forEach((function(e){n.forEach((function(t){e.remove(t)}))}))}))},en.openTag=function(e,t){var n=this.getTag(e);return n||(this._err(Pe),n=this.emptyItem),this.setDefaultTag(e),this.sltUid=n.uid,Yt.prototype._emit.call(this,ae,n,"tag",t),this._ok(),n.chs.slice()},en.getCurTag=function(){return this.uidTag(this.sltUid)},en.addTag=function(e,t){return-1===this.checkTag(e)&&(e=new sn({name:e,chs:t||[]}),this.tags.push(e),!0)},en.removeTag=function(e){var t=this.checkTag(e);return-1!==t&&(e===this.dfName&&(this.dfName=null,this.sltUid=null),this.tags.splice(t,1),!0)},en.emptyTag=function(e){return!!(e=this.getTag(e))&&(e.clear(),!0)},en.clear=function(){return this.tags=[],!0},en.getTagContents=function(e){return(e=this.getTag(e))?e.chs.slice():null},en.getDefaultTag=function(){return this.dfName},en.setDefaultTag=function(e){if(!e)return this.dfName=null,!(this.dfUid=null);var t=this.checkTag(e);return-1!==t&&(t=this.tags[t],this.dfName=e,this.dfUid=t.uid,!0)},en.renameTag=function(e,t){if(!d(e)||!d(t))return this._err(we),!1;var n=this.getTag(t),r=this.getTag(e);return r?n?(this._err(Ae),!1):(r.name=t,n=r.chs.slice(),Yt.prototype._emit.call(this,_e,e,t,n,r.uid),this._ok(),!0):(this._err(Pe),!1)},en.checkTag=function(e){for(var t=this.tags.length,n=0;n<t;n++)if(this.tags[n].name===e)return n;return-1},en.getTagList=function(){return this.tags},en.getTag=function(e){return-1===(e=this.checkTag(e))?null:this.tags[e]},en.uidTag=function(e){for(var t=this.tags.length,n=0;n<t;n++)if(this.tags[n].uid===e)return this.tags[n];return null},en._err=function(e){Yt.prototype._emit.call(this,Y,e)},en._ok=function(){Yt.prototype._emit.call(this,Y,Se)},Dn),cn=((G=bn.prototype).dispose=function(){var e;null!=(e=this._mng)&&e.dispose(),this._mng=null},G.getTagList=function(){var e=[];return this._mng.tags.forEach((function(t){t={name:t.name,uids:t.chs.slice()},e.push(t)})),e},G.addTag=function(e){return d(e)?!!this._mng.addTag(e)||(this._err(Ae),!1):(this._err(we),!1)},G.removeTag=function(e){var t=this,n=this._mng.getTag(e);return n?(n.chs.slice().forEach((function(n){t.removePageTag(n,e)})),this._ok(),this._mng.removeTag(e)):(this._err(Pe),!1)},G.emptyTag=function(e){if(!d(e))return this._err(we),!1;var t=this._mng.uidTag(e);if(!e)return this._err(Pe),!1;var n=t.chs.slice();return this._emit(pe,e,n,t.uid),this._ok(),this._mng.emptyTag(e)},G.openTag=function(e,t){return this._mng.openTag(e,t)},G.getCurrentTag=function(){return this._mng.getCurTag()},G.getTagContents=function(e){return this._mng.getTagContents(e)},G.getDefaultTag=function(){return this._mng.getDefaultTag()},G.setDefaultTag=function(e){return this._mng.setDefaultTag(e)},G.addPageTag=function(e,t){d(e)&&d(t)||this._err(we);var n=this._mng.getTag(t);return n?n.append(e)?(this._emit(me,e,t,n.uid),this._emit(ve,this._mng.tags),this._ok(),!0):(this._err(Ae),!1):(this._err(Pe),!1)},G.removePageTag=function(e,t){var n=this;if(d(e)||this._err(we),void 0===t)this._mng.getTagList().forEach((function(t){t.remove(e),n._emit(fe,e,t.name,t.uid)}));else{d(t)||this._err(we);var r=this._mng.getTag(t);if(!r)return this._err(Pe),!1;if(!r.remove(e))return this._err(Re),!1;this._emit(fe,e,t,r.uid)}return t=this._mng.getTagList(),this._emit(ve,t),!0},G.renameTag=function(e,t){return this._mng.renameTag(e,t)},G._emit=function(e){for(var t,n=arguments.length,r=new Array(1<n?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=this._mng)._emit.apply(t,[e].concat(r))},G._err=function(e){this._emit(Y,e)},G._ok=function(){this._emit(Y,Se)},bn),ln=((en=yn.prototype).addDataSync=function(e,t){return!this._check(e)&&(this._d[e]=t,!0)},en.getDataSync=function(e){return this._d[e]},en.removeDataSync=function(e){return!!this._check(e)&&(delete this._d[e],!0)},en.updateDataSync=function(e,t){return!!this._check(e)&&(this._d[e]=t,!0)},en._check=function(e){return void 0!==this._d[e]},yn),dn=((G=In.prototype).createDatabase=function(e,t){this._d[e]={},this._d[e][t]={}},G.addDataAsync=function(e,t,n,r){var i=this;return new Promise((function(o,a){return i._checkDB(n)?i._checkTable(n,r)?i._checkId(n,r,e)?a("The ".concat(e," already exists.")):(i._d[n][r][e]=t,void o("Save ".concat(e," to database successful."))):a(i._erMsg(1,r)):a(i._erMsg(0,n))}))},G.getDataAsync=function(e,t,n){var r=this;return new Promise((function(i,o){return r._checkDB(t)?r._checkTable(t,n)?r._checkId(t,n,e)?void i(r._d[t][n][e]):o(r._erMsg(2,e)):o(r._erMsg(1,n)):o(r._erMsg(0,t))}))},G.removeDataAsync=function(e,t,n){var r=this;return new Promise((function(i,o){return r._checkDB(t)?r._checkTable(t,n)?(delete r._d[t][n][e],void i("Remove ".concat(e," successful."))):o(r._erMsg(1,n)):o(r._erMsg(0,t))}))},G.updateDataAsync=function(e,t,n,r){var i=this;return new Promise((function(o,a){return i._checkDB(n)?i._checkTable(n,r)?i._checkId(n,r,e)?(i._d[n][r][e]=t,void o("Update ".concat(e," successful."))):a(i._erMsg(2,e)):a(i._erMsg(1,r)):a(i._erMsg(0,n))}))},G._checkDB=function(e){return void 0!==this._d[e]},G._checkTable=function(e,t){return void 0!==this._d[e][t]},G._checkId=function(e,t,n){return void 0!==this._d[e][t][n]},G._erMsg=function(e,t){return"The ".concat(["database","table","item"][e]," ").concat(t," does not exist.")},In),hn=((en=vn.prototype).addDataAsync=function(e,t,n,r){return this.DBMng.addDataAsync(e,t,n||this.databaseName,r||this.documentTableName)},en.getDataAsync=function(e,t,n){return this.DBMng.getDataAsync(e,t||this.databaseName,n||this.documentTableName)},en.removeDataAsync=function(e,t,n){return this.DBMng.removeDataAsync(e,t||this.databaseName,n||this.documentTableName)},en.updateDataAsync=function(e,t,n,r){return this.DBMng.updateDataAsync(e,t,n||this.databaseName,r||this.documentTableName)},en.addMid=function(e,t){return this.middle.addDataSync(e,t)},en.getMid=function(e){return this.middle.getDataSync(e)},en.removeMid=function(e){return this.middle.removeDataSync(e)},en.updateMid=function(e,t){return this.middle.updateDataSync(e,t)},en.addMetadata=function(e,t){return this.metadataMng.addDataSync(e,t)},en.getMetadata=function(e){return this.metadataMng.getDataSync(e)},en.removeMetadata=function(e){return this.metadataMng.removeDataSync(e)},en.updateMetadata=function(e,t){return this.metadataMng.updateDataSync(e,t)},vn),gn=(s(_n,Jt=P),_n.prototype.updateErrorMessage=function(e){80003!==e.code&&(this.errorMessage=e.message,this.errorCode=e.code)},_n),fn=(s(pn,Kt=P),(G=pn.prototype).updateLogMessage=function(e){var t;this.allowLog&&null!=this&&null!=(t=this.logs)&&t.push(null==this?void 0:this._formatLog(e))},G._formatLog=function(e){return function(e){var t,n=new Date,r={"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds(),"q+":Math.floor((n.getMonth()+3)/3),S:n.getMilliseconds()};for(t in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(n.getFullYear()+"").substr(4-RegExp.$1.length))),r)new RegExp("("+t+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?r[t]:("00"+r[t]).substr((""+r[t]).length)));return e}("yyyy-MM-dd hh:mm:ss")+" DVS: "+e},G.clear=function(){this.logs=[]},G.dispose=function(){Kt.prototype.dispose.call(this),this.logs=null},pn);function mn(e){var t,n,r,i,o,a=zt.call(this,new A)||this;return a.DataControl=null,a.ViewControl=null,a.File=null,a.Tag=null,a.Annotation=null,a.Error=null,a.Log=null,a.uid=b(11),Array.from||(Array.from=(t=Object.prototype.toString,n=function(e){return"function"==typeof e||"[object Function]"===t.call(e)},r=function(e){return e=Number(e),isNaN(e)?0:0!==e&&isFinite(e)?(0<e?1:-1)*Math.floor(Math.abs(e)):e},i=Math.pow(2,53)-1,o=function(e){return e=r(e),Math.min(Math.max(e,0),i)},function(e){var t=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var r,i=1<arguments.length?arguments[1]:void 0;if(void 0!==i){if(!n(i))throw new TypeError("Array.from: when provided, the second argument must be a function");2<arguments.length&&(r=arguments[2])}for(var a,s=o(t.length),u=n(this)?Object(new this(s)):new Array(s),c=0;c<s;)a=t[c],u[c]=i?void 0===r?i(a,c):i.call(r,a,c):a,c+=1;return u.length=s,u})),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),r=1;r<arguments.length;r++){var i=arguments[r];if(null!=i)for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])}return n},writable:!0,configurable:!0}),HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){for(var r=atob(this.toDataURL(t,n).split(",")[1]),i=r.length,o=new Uint8Array(i),a=0;a<i;a++)o[a]=r.charCodeAt(a);e(new Blob([o],{type:t||"image/png"}))}}),a.Log=new fn(a._oPub),a._log("DVS"),a._log("db"),a._db=new hn,a._log("db",!1),a._log("Error"),a.Error=new gn(a._oPub),a._log("Error",!1),a._log("Tag"),a.Tag=new cn({pubsub:a._oPub}),a._log("Tag",!1),a._log("File"),a.File=new an({pubsub:a._oPub}),a._log("File",!1),a._log("ViewControl"),a.ViewControl=new nn(e,a._oPub,a._db,a.uid),a._log("ViewControl",!1),a._log("DataControl"),a.DataControl=new ze(e,a._oPub,a._db),a._log("DataControl",!1),a._log("DVS",!1),a}function pn(e){return(e=Kt.call(this,e)||this).logs=[],e.allowLog=!0,e.logs.push(e._formatLog("Initialize DVS object.")),e.logs.push(e._formatLog("Initialize DVS object.")),e._on(X,e.updateLogMessage.bind(qe(e))),e.logs.push(e._formatLog("Complete Log object initialization.")),e}function _n(e){return(e=Jt.call(this,e)||this).errorMessage="ok",e.errorCode=0,e._on(Y,e.updateErrorMessage.bind(qe(e))),e}function vn(){this.databaseName="dvsDb",this.documentTableName="dvsDoc",this.imageTableName="dvsImage",this.annotationTableName="dvsAnno",this.middle=new ln,this.metadataMng=new ln,this.DBMng=new dn(this.databaseName,this.documentTableName)}function In(e,t){this._d={},this.createDatabase(e,t)}function yn(){this._d={}}function bn(e){this._mng=new un(e.pubsub)}function Dn(e){return(e=Yt.call(this,e)||this).tags=[],e.dfName=null,e.dfUid=null,e.sltUid=null,e.emptyItem=new sn({name:"defaultTag",chs:[]}),e._initEvent(),e}function Tn(e){var t=Xt.call(this,e)||this;return t.name=e.name,t.chs=e.chs||[],t.uid=e.uid||b(11),t}function Sn(e){this.autoOpen=!0,this._tree=new on(e.pubsub)}function wn(e){return(e=Qt.call(this,e)||this).all=null,e.open=!0,e.dfNode=null,e.root=new rn({uid:b(11),name:"root",type:"root",parent:null,chs:[]}),e.dfNode=e.root,e.all=new rn({uid:b(11),name:"All",type:"file"}),e.curNode=e.root,e.selectedNodeId=null,e._initEvent(),e}function Cn(e){var t=Zt.call(this,e)||this;return t.name=e.name,t.type=e.type,t.parent=e.parent||null,t}function En(e,t,n,r){var i=qt.call(this,t)||this;return i._vwMng=null,i._vwMng=new tn(e,t,n,r),i}function Mn(e,t,n,r){return(t=$t.call(this,t)||this)._defaultConfig={container:"",ifAllowSlide:!0,useWebWorker:!0,zoomInDelta:1.2,zoomOutDelta:1.2,zoomDelta:.05,fitType:"window",tabMode:"single",displayMode:"single",operationMode:"0",zooming:!0,scrollX:!0,scrollY:!0,minZoom:.01,maxZoom:8,keepZoom:!0,showLatestPage:!0,pageMargin:10,uiConfig:{toolbars:{header:!0,topMenu:!0,asideMenu:!1,bottomMenu:!0},groups:{topMenuRight:{visibility:!0,location:"topMenu",sequence:1}},buttons:{},buttonResize:{ifResize:!1,minSize:24,maxSize:26},tipsConfig:{},thumbnail:{size:180,mouseShape:"pointer",scrollDirection:"vertical",sequence:-1,location:"horizontal",showThumbnail:!0,showPageNumber:!1,showRemoveBtn:!1,fullThumbnail:!1,allowDragDrop:!0,allowResizing:!1,allowKeyboardControl:!1,rows:4,columns:1,background:"rgba(67,66,70,1)",border:"1px solid rgba(27,27,29,1)",pageBackground:"rgba(0,0,0,0)",pageBorder:"1px solid rgba(128,128,128,1)",selectedPageBackground:"rgba(127,133,251,1)",selectedPageBorder:"1px solid rgba(255,0,0,1)",hoverPageBackground:"rgba(196,250,248,1)",hoverPageBorder:"1px solid rgba(255,255,0,1)",placeholderBackground:"rgba(255,192,203,1)",pageMargin:10,checkbox:{visibility:"hidden",width:24,height:24,background:"#fff",borderWidth:2,borderRadius:0,borderColor:"#000",opacity:.5,left:"",top:"",right:"",bottom:"",checkMarkLineWidth:2,checkMarkColor:"#000"},pageNumber:{visibility:"hidden",width:24,height:24,background:"#fff",borderWidth:2,borderRadius:0,borderColor:"#000",opacity:.5,color:"#000",fontSize:12,fontFamily:"sans-serif",left:"",top:"",right:0,bottom:0}},canvasConfig:{canvasMouseShape:"default",canvasBackground:"#434246",canvasBorder:"1px solid #1b1b1d",pageBorder:"1px solid rgba(128,128,128,1)",pageMargin:"10",pageBackground:"rgba(0,0,0,0)",selectedPageBorder:"1px solid rgba(255,0,0,1)",selectedPageBackground:"rgba(127,133,251,1)",hoverPageBorder:"1px solid rgba(255,0,0,1)",hoverPageBackground:"rgb(196,250,248)",placeholderBackground:"pink",allowPageDragging:!0,allowKeyboardControl:!1,showPageNumber:!1,selectedBoxLineColor:"rgba(0,0,0,1)",autoChangeIndex:!1,scrollDirection:"vertical",checkbox:{visibility:"hidden",width:24,height:24,background:"#fff",borderWidth:2,borderRadius:0,borderColor:"#000",opacity:.5,left:0,top:0},pageNumber:{visibility:"hidden",width:24,height:24,background:"#fff",borderWidth:1,borderRadius:0,borderColor:"#000",opacity:.5,color:"#000",fontSize:12,fontFamily:"sans-serif",textAlign:"center",textBaseline:"middle",left:"",top:"",right:0,bottom:0},cropBoxStyle:{borderWidth:1,borderColor:"rgba(0,0,0,1)",invalidBorderColor:"#f00",dashLine:[4,2],background:"",ctrlBorderWidth:1,ctrlBorderRadius:0,ctrlBorderColor:"rgba(0,0,0,1)",invalidCtrlBorderColor:"#f00",ctrlBackground:"",ctrlWidth:8,ctrlHeight:8,enableConcaveBorderColor:!1}},tree:{visibility:!0,iconClass:"ds-dvs-ui-tree",selectedColor:"#0000ff"},tag:{visibility:!0,iconClass:"ds-dvs-ui-tags",selectedColor:"#0000ff",displayMode:""},headerColor:"#2a292b",topMenuColor:"#3a393b",topMenuBorder:"1px solid #1b1b1d",showSidebar:!1,showMain:!0,footerColor:"#434246",showViewer:!0,showVideoContainer:!1,outerBorder:"1px solid #1b1b1d",sidebarWidth:"180",width:"100%",height:"100%"}},t._ViewUi=null,t._scrBarW=0,t._q=[],t.loader=[!1,!1,!1,!1],t._cors=!0,t._outW=4096,t._outH=4096,t._minW=800,t._minH=800,t._group={},t._resizeCb=null,t._focus={viewerId:void 0,thumbnailId:void 0},t.isCanvasInit=!1,t.width=0,t.height=0,t.tempWidth=0,t.tempHeight=0,t.offScreenCanvas=null,t.isDisposed=!1,t.vws=[],t._db=n,t._tabMng=new St,t._mPub=new P,t.offScreenCanvas=new wt(r,e.baseCanvasSize,e.isKeepCanvasSize),(n=document.createElement("canvas")).id="dvs_generate_min_cvs_".concat(r),t.canvas=n,(n=document.createElement("canvas")).id="dvs_saveTransformation_cvs_".concat(r),t.saveCanvas=n,t._initTopEvent(),t._initViewerEvent(),I(e,t._defaultConfig),t.initWorkerUlr(),t._getScrBarW(),t.createViewer(),t}s(mn,zt=P),(en=mn.prototype).on=function(e,t){zt.prototype._on.call(this,e,t)},en.off=function(e,t){zt.prototype._off.call(this,e,t)},en.emit=function(e){for(var t,n=arguments.length,r=new Array(1<n?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=zt.prototype._emit).call.apply(t,[this,e].concat(r))},en._log=function(e,t){(t=void 0===t||t)?this._oPub.emit(X,"Initialize ".concat(e," object.")):this._oPub.emit(X,"Complete ".concat(e," object initialization."))},en.dispose=function(){var e;zt.prototype.dispose.call(this),null!=(e=this.Tag)&&e.dispose(),null!=(e=this.File)&&e.dispose(),null!=(e=this.ViewControl)&&null!=(e=e.getViewerByIndex(0))&&e.removeAllSync(),null!=(e=this.ViewControl)&&e.dispose(),null!=(e=this.Error)&&e.dispose(),null!=(e=this.Log)&&e.dispose(),this._db=null,this.Log=null,this.Error=null,this.Tag=null,this.File=null,this.DataControl=null},V=mn,window.Dynamsoft=window.Dynamsoft||{},window.Dynamsoft.ViewModel=V},8420:function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{Z:function(){return r}})},7344:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(4341);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r(e,i.key,i)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),r(e,"prototype",{writable:!1}),e}},4845:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(4341);function i(e,t,n){return t in e?r(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},9623:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(1446),i=n(3882);function o(e){return(o="function"==typeof r&&"symbol"==typeof i?function(e){return typeof e}:function(e){return e&&"function"==typeof r&&e.constructor===r&&e!==r.prototype?"symbol":typeof e})(e)}}},ee={};function te(e){var t=ee[e];return void 0!==t||(t=ee[e]={exports:{}},$[e].call(t.exports,t,t.exports,te)),t.exports}te.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return te.d(t,{a:t}),t},te.d=function(e,t){for(var n in t)te.o(t,n)&&!te.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},te.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(s){if("object"==typeof window)return window}}(),te.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},te.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e=Z.Lib;e.timestamp="?t=20220624191623",Z.Ready=function(t){var n=Z.Lib;if(!Z.navInfo)return n.asyncGetNavInfo().then((function(){try{t(n)}catch(e){throw n.log(e.stack||e,"error"),e}}));try{t(n)}catch(e){throw n.log(e.stack||e,"error"),e}},te(1383),te(5930),te(9435),te(2053),te(5775),te(7378),Z.Ready((function(){te(7843),e.product.bHTML5Edition?(te(630),te(1505),te(7367),te(2246),te(9475),te(8743),te(2696),te(1097),te(8975),te(398),te(7821),te(3839),te(5719),te(5505),te(6831),e.UI=e.UI||{},te(4666),te(2766)):e.product.bActiveXEdition&&(te(9035),te(7127),te(6045))})),te(4571)}(),Z.DWT.bNpm=!0,Z.DWT.dbrCanvasMaxWH=4096,Z.aryAddonReadyFun=[],Z.AddonReady=function(e){Z.aryAddonReadyFun.push(e)},Z.Lib.mix(Z,{license:"",workerPathPdfR:"",workerPathPdfW:"",workerPathImgcore:""}),Z.AddonReady((function(t,n){var r=window.Dynamsoft;!function(t,n){"object"==typeof exports&&void 0!==e?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(((t="undefined"!=typeof globalThis?globalThis:t||q).Dynamsoft=t.Dynamsoft||{},t.Dynamsoft.ImageIO={}))}(this,(function(e){function t(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function n(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function i(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n}var o,a,s,u,c,l,d,h,g,f,m,p,_,v,I,y,b,D,T,S,w,C,E,M,P,A,x,R,k,L,F,W,O,B,N,V,U,G,j,H,z,K,J,Y,X,Q,Z,$,ee,te,ne,re,ie,oe,ae,se,ue,ce,le,de,he,ge,fe,me,pe,_e,ve,Ie,ye,be,De,Te,Se,we,Ce,Ee,Me,Pe,Ae,xe,Re,ke,Le,Fe,We,Oe,Be,Ne,Ve,Ue,Ge,je,He,ze,Ke,Je,Ye,Xe,Qe,Ze,qe,$e,et,tt,nt,rt,it,ot,at,st,ut,ct,lt,dt,ht,gt,ft,mt,pt,_t,vt,It,yt,bt,Dt,Tt,St,wt,Ct,Et,Mt,Pt,At,xt,Rt,kt,Lt,Ft,Wt,Ot,Bt,Nt;!function(e){e.logInfo="logInfo",e.logDebug="logDebug",e.logAll="logAll",e.imgIO="imgIO",e.core="imgCore",e.imgProc="imgProc",e.pdfR="pdfReader",e.pdfW="pdfWriter",e.crypto="crypto",e.binaryBlobType="application/octet-stream",e.wasmExtension=".wasm"}(o||(o={})),function(e){e.pending="pending",e.ready="ready",e.failed="failed",e.destroyed="destroyed",e.init="init"}(a||(a={})),function(e){e.PARAMETER_TYPE_ERROR="Parameter Type not Supported = ",e.TIMEOUT="Timeout no Response = ",e.FILE_STREAM_ERROR="File Stream Error = ",e.WASM_EXCEPTION_ERROR="An WASM exception occurred."}(s||(s={})),function(e){e[e.LONG_KEY=0]="LONG_KEY",e[e.DLS_KEY=1]="DLS_KEY"}(u||(u={})),function(e){e[e.wasmBase=-4e3]="wasmBase",e[e.wasmException=-4001]="wasmException",e[e.wasmNoModule=-4002]="wasmNoModule",e[e.wasmJsBase=-4100]="wasmJsBase",e[e.wasmJsObjectNotInit=-4101]="wasmJsObjectNotInit",e[e.wasmJsObjectTerminated=-4102]="wasmJsObjectTerminated",e[e.wasmJsObjectInitFailed=-4103]="wasmJsObjectInitFailed",e[e.wasmJsNotLoaded=-4104]="wasmJsNotLoaded",e[e.wasmJsInvalidJson=-4105]="wasmJsInvalidJson",e[e.wasmJsWorkerRunException=-4106]="wasmJsWorkerRunException",e[e.wasmJsWorkerRunFailed=-4107]="wasmJsWorkerRunFailed",e[e.wasmJsReadFileFailed=-4108]="wasmJsReadFileFailed",e[e.wasmJsCoreTaskException=-4109]="wasmJsCoreTaskException",e[e.wasmJsProcTaskException=-4110]="wasmJsProcTaskException",e[e.wasmJsSavePdfFailed=-4111]="wasmJsSavePdfFailed",e[e.wasmJsSaveTiffFailed=-4112]="wasmJsSaveTiffFailed"}(c||(c={})),e.ImageType=void 0,(l=e.ImageType||(e.ImageType={}))[l.IT_DIB=-1]="IT_DIB",l[l.IT_RGBA=-2]="IT_RGBA",l[l.IT_BGRA=-3]="IT_BGRA",l[l.IT_BMP=0]="IT_BMP",l[l.IT_JPG=1]="IT_JPG",l[l.IT_PNG=3]="IT_PNG",l[l.IT_ALL=5]="IT_ALL",e.ReturnedDataType=void 0,(d=e.ReturnedDataType||(e.ReturnedDataType={}))[d.RT_AUTO=-1]="RT_AUTO",d[d.RT_BINARY=1]="RT_BINARY",d[d.RT_BASE64=2]="RT_BASE64",function(e){e[e.SF_DEF=0]="SF_DEF",e[e.SF_ENABLE=1]="SF_ENABLE",e[e.SF_DISABLE=2]="SF_DISABLE"}(h||(h={})),function(e){e.imgIOVer="1.7.3",e.coreVer="1.7.3",e.imgProcVer="1.7.3",e.pdfRVer="1.7.3",e.pdfWVer="1.7.3",e.cryptoVer="1.7.3"}(O||(O={}));class Vt{static get UseSimd(){return n(this,g,"f",I)}static set UseSimd(e){i(this,g,e,"f",I)}static get License(){return n(this,g,"f",f)}static set License(e){i(this,g,e,"f",f)}static get LicMode(){return n(this,g,"f",m)}static set LicMode(e){i(this,g,e,"f",m),n(this,g,"m",b).call(this)}static get UUID(){return n(this,g,"f",p)}static set UUID(e){i(this,g,e,"f",p)}static get NavInfo(){return n(this,g,"f",_)}static set NavInfo(e){i(this,g,e,"f",_)}static get Mobile(){return n(this,g,"f",v)}static set Mobile(e){i(this,g,e,"f",v)}static get DefHeapSize(){return n(this,g,"f",D)}static set DefHeapSize(e){i(this,g,e,"f",D)}static get MaxHeapSize(){return n(this,g,"f",T)}static get ImageIOWorkerJS(){return"dynamsoft.imageio_wasm-"+O.imgIOVer+".js"}static get PdfReaderWorkerJS(){return"dynamsoft.pdfReader_wasm-"+O.pdfRVer+".js"}static get ImageIOPrefixName(){return"dynamsoft.imageio-"}static get ImagecorePrefixName(){return"dynamsoft.imagecore-"}static get ImageProcPrefixName(){return"dynamsoft.imageProc-"}static get PdfReaderPrefixName(){return"dynamsoft.pdfReader-"}static get PdfWriterPrefixName(){return"dynamsoft.pdfWriter-"}static get CryptoPrefixName(){return"dynamsoft.crypto-"}static get ImageIOResource(){return n(this,g,"f",C)}static set ImageIOResource(e){i(this,g,n(this,g,"m",S).call(this,e),"f",C),n(this,g,"m",M).call(this,n(this,g,"f",C),this.imageIOModule),n(this,g,"m",M).call(this,n(this,g,"f",C),n(this,g,"f",P)),n(this,g,"m",M).call(this,n(this,g,"f",C),n(this,g,"f",x)),n(this,g,"m",M).call(this,n(this,g,"f",C),n(this,g,"f",R))}static get PdfReaderResource(){return n(this,g,"f",E)}static set PdfReaderResource(e){e.useFastCompEdition=!1,i(this,g,n(this,g,"m",S).call(this,e),"f",E),n(this,g,"m",M).call(this,n(this,g,"f",E),n(this,g,"f",A)),this.PdfReaderModule.singleInstance=!0}static get ImageIOModule(){return this.imageIOModule}static get CryptoModule(){return n(this,g,"f",P)}static get PdfReaderModule(){return n(this,g,"f",A)}static get ImagecoreModule(){return n(this,g,"f",x)}static get ImageProcModule(){return n(this,g,"f",R)}static get PdfWriterModule(){return n(this,g,"f",k)}static get LogLevel(){return n(this,g,"f",L)}static setLogFunc(e,t,n){i(this,g,e,"f",L),i(this,g,t,"f",F),i(this,g,n,"f",W)}static get LogFunc(){return n(this,g,"f",F)}static get LogContext(){return n(this,g,"f",W)}}y=function(e){this.LicMode==u.DLS_KEY&&e.dependencyModules&&-1!=e.dependencyModules.indexOf(o.imgIO)&&-1==e.dependencyModules.indexOf(o.crypto)&&e.dependencyModules.push(o.crypto)},b=function(){n(this,g,"m",y).call(this,n(this,g,"f",x)),n(this,g,"m",y).call(this,n(this,g,"f",R)),n(this,g,"m",y).call(this,n(this,g,"f",k))},S=function(e){var t,r,i,o,a;let s={crossScript:!1,resourceDir:e.resourceDir,workerScript:e.workerScript,useFastCompEdition:null!==(t=e.useFastCompEdition)&&void 0!==t&&t,useSimd:null!==(r=e.useSimd)&&void 0!==r?r:n(this,g,"f",I),fetchOptions:null!==(i=e.fetchOptions)&&void 0!==i?i:n(this,g,"f",w),defHeapSize:null!==(o=e.defHeapSize)&&void 0!==o?o:this.DefHeapSize,maxHeapSize:null!==(a=e.maxHeapSize)&&void 0!==a?a:this.MaxHeapSize};return s.workerScript=e.resourceDir+e.workerScript,s.workerScript.startsWith("http://")||s.workerScript.startsWith("https://")?(s.resourceDir=e.resourceDir,s.workerScript.startsWith(location.origin)||(s.crossScript=!0)):e.resourceDir.startsWith("/")?null!=location.origin&&(s.resourceDir=location.origin+e.resourceDir):null!=location.href&&(s.resourceDir=location.href.substring(0,location.href.lastIndexOf("/")+1)+e.resourceDir),s.resourceDir.endsWith("/")||(s.resourceDir+="/"),e.useFastCompEdition&&(s.resourceDir+="fastcomp/",s.workerScript=s.resourceDir+e.workerScript),s},M=function(e,t){t.resourceDir=e.resourceDir,t.crossScript=e.crossScript,t.useSimd=t.name===o.imgProc&&e.useSimd,t.script=e.workerScript,t.fetchOptions=e.fetchOptions,t.defHeapSize=e.defHeapSize,t.maxHeapSize=e.maxHeapSize},f={value:""},m={value:u.LONG_KEY},p={value:""},_={value:null},v={value:!1},I={value:!1},D={value:32},T={value:200},C={value:{resourceDir:"",workerScript:Vt.ImageIOWorkerJS,useFastCompEdition:!1,useSimd:!1,crossScript:!1,fetchOptions:n(Vt,g=Vt,"f",w={value:{mode:"cors",credentials:"same-origin",retries:3,retryDelay:500}}),defHeapSize:Vt.DefHeapSize,maxHeapSize:Vt.MaxHeapSize}},E={value:{resourceDir:"",workerScript:Vt.PdfReaderWorkerJS,useFastCompEdition:!1,useSimd:!1,crossScript:!1,fetchOptions:n(Vt,g,"f",w),defHeapSize:Vt.DefHeapSize,maxHeapSize:Vt.MaxHeapSize}},Vt.imageIOModule={name:o.imgIO,autoLoad:!1,ver:O.imgIOVer,prefixName:Vt.ImageIOPrefixName,dependencyModules:[],useSimd:!1,fetchOptions:n(Vt,g,"f",w)},P={value:{name:o.crypto,autoLoad:!1,ver:O.cryptoVer,prefixName:Vt.CryptoPrefixName,dependencyModules:[o.imgIO],fetchOptions:n(Vt,g,"f",w)}},A={value:{name:o.pdfR,autoLoad:!1,ver:O.pdfRVer,prefixName:Vt.PdfReaderPrefixName,dependencyModules:[],fetchOptions:n(Vt,g,"f",w)}},x={value:{name:o.core,autoLoad:!1,ver:O.coreVer,prefixName:Vt.ImagecorePrefixName,dependencyModules:[o.imgIO],fetchOptions:n(Vt,g,"f",w)}},R={value:{name:o.imgProc,autoLoad:!1,ver:O.imgProcVer,prefixName:Vt.ImageProcPrefixName,dependencyModules:[o.imgIO,o.core],useSimd:Vt.UseSimd}},k={value:{name:o.pdfW,autoLoad:!1,ver:O.pdfWVer,prefixName:Vt.PdfWriterPrefixName,dependencyModules:[o.imgIO,o.core],useSimd:Vt.UseSimd}},L={value:""},F={value:void 0},W={value:null};class Ut{constructor(e,t,r,o,a){B.add(this),N.set(this,void 0),V.set(this,void 0),U.set(this,void 0),G.set(this,void 0),j.set(this,void 0),H.set(this,void 0),z.set(this,void 0),K.set(this,void 0),J.set(this,void 0),Y.set(this,void 0),X.set(this,void 0),Q.set(this,void 0),Z.set(this,0),$.set(this,{}),ee.set(this,null),i(this,N,e,"f"),i(this,J,r,"f"),i(this,U,[],"f"),i(this,G,!1,"f"),i(this,j,!1,"f"),i(this,Z,t,"f"),i(this,ee,Object.create(null),"f"),n(this,$,"f").modulesInfo=[],i(this,X,Object.create(null),"f"),i(this,H,o,"f"),i(this,z,a,"f"),i(this,K,null,"f"),i(this,Y,0,"f"),i(this,Q,0,"f"),i(this,V,n(this,B,"m",ne).call(this,n(this,N,"f")),"f"),n(this,V,"f").on("message",n(this,B,"m",oe),this),n(this,V,"f").on("error",n(this,B,"m",ie),this),n(this,V,"f").on("exit",(function(t,r,i){let o="Worker #terminated Unexpectedly\n";o+=" exitCode: `"+t+"`\n",o+=" signalCode: `"+r+"`\n",o+=" #script: `"+e+"`\n",n(i,B,"m",ie).call(i,new Error(o),i)}),this)}get WorkerScript(){return n(this,J,"f")}setLogFunc(e,t){i(this,H,e,"f"),i(this,z,t,"f")}get id(){return n(this,Z,"f")}get Module(){return n(this,$,"f")}set Module(e){i(this,$,e,"f")}get Instances(){return n(this,ee,"f")}execTask(e,t,r){r||((r={}).promise=new Promise((function(e,t){r.resolve=e,r.reject=t})));let o=i(this,Q,+n(this,Q,"f")+1,"f");n(this,X,"f")[o]={id:o,resolver:r};let a={id:o,func:e,params:t};return n(this,B,"m",re).call(this,e+" send"),n(this,j,"f")?r.reject(new Error("Worker is #terminated")):n(this,G,"f")?r.reject(new Error("Worker is #terminating")):n(this,V,"f").wasmReady||n(this,V,"f").ready&&"loadWasm"===e?n(this,V,"f").send(a):n(this,U,"f").push(a),r.promise}get memSize(){return n(this,Y,"f")}get busy(){return this.howManyTasks>0}get howManyTasks(){return Object.keys(n(this,X,"f")).length}get alive(){return!n(this,G,"f")&&!n(this,j,"f")}terminate(e,t){if(n(this,B,"m",re).call(this,"worker terminate "+e),e&&n(this,B,"m",se).call(this,"Worker has been #terminated"),"function"==typeof t&&i(this,K,t,"f"),this.busy)i(this,G,!0,"f");else{if(n(this,V,"f")){if("function"!=typeof n(this,V,"f").terminate)throw new Error("Failed to terminate worker");n(this,V,"f").terminate(),i(this,V,null,"f")}i(this,G,!1,"f"),i(this,j,!0,"f"),n(this,K,"f")&&n(this,K,"f").call(this,this)}}}N=new WeakMap,V=new WeakMap,U=new WeakMap,G=new WeakMap,j=new WeakMap,H=new WeakMap,z=new WeakMap,K=new WeakMap,J=new WeakMap,Y=new WeakMap,X=new WeakMap,Q=new WeakMap,Z=new WeakMap,$=new WeakMap,ee=new WeakMap,B=new WeakSet,te=function(e){let t=new Error(""),n=Object.keys(e);for(let r=0;r<n.length;r++)t[n[r]]=e[n[r]];return t},ne=function(e){if("function"!=typeof Worker&&"object"!=typeof Worker)throw new Error("Web Workers not supported");let t=new Worker(e);return t.on=function(e,t,n){this.addEventListener(e,(function(r){"exit"===e?t(r.data,"",n):t(r.data,n)}))},t.send=function(e){if(null!=e&&null!=e.params&&null!=e.params.input){let t=Object.prototype.toString.call(e.params.input);if("[object Array]"===Object.prototype.toString.call(e.params.input)){if(t=Object.prototype.toString.call(e.params.input[0]),"[object ArrayBuffer]"===t||"[object Uint8ClampedArray]"===t||"[object Uint8Array]"===t)return void this.postMessage(e,[null!=e.params.input[0].buffer?e.params.input[0].buffer:e.params.input[0]])}else if("[object ArrayBuffer]"===t||"[object Uint8ClampedArray]"===t||"[object Uint8Array]"===t)return void this.postMessage(e,[null!=e.params.input.buffer?e.params.input.buffer:e.params.input])}this.postMessage(e)},t},re=function(e){n(this,H,"f")&&n(this,H,"f").call(this,e,n(this,z,"f"))},ie=function(e,t){i(t,j,!0,"f"),n(t,B,"m",re).call(t,"[js]["+Date.now()/1e3+"] worker error "+JSON.stringify(e)),n(t,G,"f")&&n(t,K,"f")&&n(t,K,"f").call(t,t),i(t,G,!1,"f"),n(t,B,"m",se).call(t)},oe=function(e,t){if(n(t,B,"m",re).call(t,e.log?e.log:e),"string"==typeof e&&"ready"===e)n(t,V,"f").ready=!0,n(t,B,"m",ae).call(t);else if(!e.log){if("object"==typeof e){let n=e.result;"object"==typeof n?(null!=n.errorCode&&(n.code=n.errorCode,delete n.errorCode),null!=n.errorMessage&&(n.message=n.errorMessage,delete n.errorMessage)):"string"==typeof n&&(n=n.replace('"errorCode"','"code"'),n=n.replace("'errorCode'","'code'"),n=n.replace('"errorMessage"','"message"'),n=n.replace("'errorMessage'","'message'"),e.result=n),null!=e.memSize&&i(t,Y,e.memSize,"f")}let r=e.id,o=n(t,X,"f")[r];void 0!==o&&(delete n(t,X,"f")[r],n(t,B,"m",re).call(t,e.func+" received"),!0===n(t,G,"f")&&t.terminate(),"loadWasm"===e.func&&null!=e.result&&(n(t,V,"f").wasmReady=!0,n(t,B,"m",ae).call(t)),e.error?o.resolver.reject(n(t,B,"m",te).call(t,e.error)):e.result&&o.resolver.resolve(e.result))}},ae=function(){n(this,U,"f").forEach(n(this,V,"f").send.bind(n(this,V,"f"))),i(this,U,[],"f")},se=function(e){for(let t in n(this,X,"f"))void 0!==n(this,X,"f")[t]&&n(this,X,"f")[t].resolver.reject(new Error(e));i(this,X,Object.create(null),"f")};class Gt{constructor(){ue.add(this),de.set(this,[]),he.set(this,2),ge.set(this,60),fe.set(this,!1),me.set(this,void 0),pe.set(this,null),_e.set(this,o.logDebug),Ie.set(this,!1)}static get Instance(){return n(this,ce,"f",le)||i(this,ce,new Gt,"f",le),n(this,ce,"f",le)}get Terminated(){return n(this,fe,"f")}getModuleLoadedError(e){for(let t of n(Gt,ce,"f",ve))if(t.name==e)return t.error}getModuleStatus(e){for(let t of n(Gt,ce,"f",ve))if(t.name==e)return t.status;return""}addModules(e){let t=!1;if(n(Gt,ce,"f",ve).forEach((function(n,r,i){n.name==e.name&&(n.ver==e.ver?t=!0:i.splice(r,1))})),!t){let t=e;t.status="",t.wasmModule=null,n(Gt,ce,"f",ve).push(t)}}loadModule(e,r){return t(this,void 0,void 0,(function*(){let t=null;null==r&&(r=0!=n(this,ue,"m",Ae).call(this,e).length);for(let n of e.dependencyModules)n===o.imgIO?(this.addModules(Vt.ImageIOModule),Vt.LicMode===u.DLS_KEY&&this.addModules(Vt.CryptoModule)):n===o.core&&this.addModules(Vt.ImagecoreModule);for(let i of n(Gt,ce,"f",ve))if(i.name===e.name){if(i.wasmModule){if(r)return!0;t=i;break}if(i.status===a.pending)return!1;t=i;break}if(t)if(""===t.status)t.status=a.pending,t.wasmModule=null;else{if(t.status===a.pending)return null;r||(t.error={code:0,message:""},t.status=a.pending)}else t=e,t.status=a.pending,t.wasmModule=null,n(Gt,ce,"f",ve).push(t);return n(this,ue,"m",ye).call(this,t)}))}setLogFunc(e,t,n){i(this,me,t,"f"),i(this,pe,n,"f"),i(this,_e,e,"f")}get busy(){n(this,ue,"m",Le).call(this);let e=n(this,de,"f");for(let t of e)if(t.busy)return!0;return!1}getWorker(e,r){return t(this,void 0,void 0,(function*(){if(n(this,ue,"m",xe).call(this,e.name))return n(this,ue,"m",ke).call(this),null;let t=n(this,ue,"m",Ae).call(this,e);return 0!=t.length?n(this,ue,"m",Fe).call(this,t,r,!e.singleInstance):(yield this.loadModule(e,!1),null)}))}removeInstanceInWorker(e,t,r,i){var o;if(n(this,ue,"m",We).call(this,t,r),i&&t&&null!=t.memSize){let r=1024*(null!==(o=e.maxHeapSize)&&void 0!==o?o:Vt.MaxHeapSize)*1024;if(n(this,ue,"m",Ee).call(this,"current memSize="+t.memSize+", max="+r),t.memSize>r&&0!=r&&!n(this,ue,"m",Oe).call(this,t)){n(this,ue,"m",Ee).call(this,"try to terminate the worker"),t.terminate();let e=n(this,de,"f").indexOf(t);-1!==e&&n(this,de,"f").splice(e,1)}}}terminate(e){i(Gt,ce,null,"f",le),n(this,ue,"m",Ee).call(this,"worker pool terminate "+e),i(this,fe,!0,"f");let t=[],r=n(this,de,"f").slice();return i(this,de,[],"f"),r.forEach((function(n){let r={};r.promise=new Promise((function(e,t){r.resolve=e,r.reject=t})),t.push(r.promise),n.terminate(e,(function(e){r.resolve(e)}))})),Promise.all(t)}terminateWorker(e){const t=n(this,de,"f").filter(t=>!t.Module.modulesInfo[e.name]||(t.terminate(!0),!1));i(this,de,t,"f")}getMemoryUsed(){let e=n(this,de,"f"),t=[],r=0;for(let n of e)n&&null!=n.memSize&&(t[r++]=n.memSize);return t}}ce=Gt,de=new WeakMap,he=new WeakMap,ge=new WeakMap,fe=new WeakMap,me=new WeakMap,pe=new WeakMap,_e=new WeakMap,Ie=new WeakMap,ue=new WeakSet,ye=function(e){return t(this,void 0,void 0,(function*(){let t=this,r=yield n(this,ue,"m",Me).call(this,e);if(r){let o={id:0,func:"loadWasm",params:{insId:0,priority:0,module:{modulesInfo:[]},fetchOptions:e.fetchOptions}};if(o.params.resourceDir=e.resourceDir,o.params.initMemory=e.defHeapSize,o.params.module){for(let t of n(Gt,ce,"f",ve))for(let n of e.dependencyModules)n==t.name&&o.params.module.modulesInfo.push(t);o.params.module.modulesInfo.push(e)}return n(this,ue,"m",De).call(this,r,o,(function(r){i(t,he,n(t,ue,"m",Se).call(t),"f"),e.status===a.pending&&(e.status="")}))}e.status=""}))},be=function(e,t,r,i){for(let o of n(Gt,ce,"f",ve))if(o.name===e){o.status=t,o.wasmModule=r,o.error=i;break}},De=function(e,r,i){return t(this,void 0,void 0,(function*(){let t=this;try{const o=yield e.execTask(r.func,r.params);let a=!1;return void 0===o.code||o.modules?a=n(t,ue,"m",Te).call(t,o,e):n(t,ue,"m",Ee).call(t,o),a}catch(e){return n(t,ue,"m",Ee).call(t,e),!1}finally{i&&i()}}))},Te=function(e,t){if(n(this,ue,"m",Ee).call(this,"handleWasmLoad:"),n(this,ue,"m",Ee).call(this,e),("object"!=typeof e||null==e.modules)&&"object"==typeof e)return!1;let r=!1;for(const i of e.modules)e.code?(n(this,ue,"m",be).call(this,i.name,a.failed,null,{code:e.code,message:e.message}),t.Module.modulesInfo[i.name]=!1):(n(this,ue,"m",be).call(this,i.name,a.ready,i.wasmModule,void 0),t.Module.modulesInfo[i.name]=!0,r=!0);return r},Se=function(){let e=2;return"hardwareConcurrency"in q.navigator&&(e=q.navigator.hardwareConcurrency),Math.max(Math.min(n(this,he,"f"),Math.max(n(this,he,"f"),e/2)),1)},we=function(){Vt.LogLevel==n(this,_e,"f")&&Vt.LogFunc==n(this,me,"f")||this.setLogFunc(Vt.LogLevel,Vt.LogFunc,Vt.LogContext)},Ce=function(e){n(this,ue,"m",we).call(this),n(this,me,"f")&&n(this,_e,"f")===o.logAll&&n(this,me,"f").call(this,e,n(this,pe,"f"))},Ee=function(e){n(this,ue,"m",we).call(this),n(this,me,"f")&&n(this,_e,"f")===o.logDebug&&n(this,me,"f").call(this,e,n(this,pe,"f"))},Me=function(e){return t(this,void 0,void 0,(function*(){n(this,ue,"m",Le).call(this);let t=n(this,de,"f");for(let n of t)if(n.WorkerScript===e.script)return n.busy?null:n;return n(this,ue,"m",Pe).call(this,e)}))},Pe=function(e){return t(this,void 0,void 0,(function*(){let t=this,r=n(t,de,"f");if(r.length<n(t,he,"f")&&!n(t,Ie,"f")){i(t,Ie,!0,"f");let o=e.script;e.crossScript&&(o=yield class{static fetchRetry(e,t,n,r){let i=t.retries,o=t.retryDelay;return new Promise((function(a,s){const u=function(c){fetch(e,t).then((function(e){a(e)})).catch((function(e){c<i?function(e,t,i){n&&n(t,r),setTimeout((function(){u(++e)}),o)}(c,e):s(e)}))};u(0)}))}}.fetchRetry(e.script,e.fetchOptions,n(t,me,"f"),t).then(e=>e.blob()).then(e=>URL.createObjectURL(e)).catch(e=>(n(t,ue,"m",Ee).call(t,"get new worker fetch failed: "),n(t,ue,"m",Ee).call(t,e),i(t,Ie,!1,"f"),null)));let a=new Ut(o,r.length+1,e.script,n(t,me,"f"),n(t,pe,"f"));return r.push(a),i(t,Ie,!1,"f"),n(t,ue,"m",Ce).call(t,r),n(t,ue,"m",Ee).call(t,"get new worker "+a.id+" succeed!"),a}return null}))},Ae=function(e){n(this,ue,"m",Le).call(this);let t=n(this,de,"f");n(this,ue,"m",Ce).call(this,t);let r=[];for(let i of t)if(i.Module.modulesInfo[e.name]){if(i.busy&&t.length<n(this,he,"f"))continue;r.push(i)}return n(this,ue,"m",Ce).call(this,"get workers for module "+e.name),n(this,ue,"m",Ce).call(this,r),r},xe=function(e){for(let t of n(Gt,ce,"f",ve))if(t.name===e&&t.status===a.pending)return!0;return!1},Re=function(){return t(this,void 0,void 0,(function*(){this.terminate(!0);for(let e of n(Gt,ce,"f",ve))yield n(this,ue,"m",ye).call(this,e)}))},ke=function(){n(this,ue,"m",Le).call(this),0==n(this,de,"f").length&&0!=n(Gt,ce,"f",ve).length&&(n(this,ue,"m",Ee).call(this,"no worker ready, reinit"),n(this,ue,"m",Re).call(this))},Le=function(){i(this,de,n(this,de,"f").filter((function(e){return e.alive})),"f")},Fe=function(e,t,r){n(this,ue,"m",Ce).call(this,"getWorkerByIntanceId"),n(this,ue,"m",Ce).call(this,e);let i,o=9007199254740991;for(let n of e){if(!r&&0!=Object.keys(n.Instances).length)return null;if(null!=n.Instances[t]){i=n;break}{let e=n.howManyTasks;e<o&&(i=n,o=e)}}return i?(i.Instances[t]="",n(this,ue,"m",Ce).call(this,e),n(this,ue,"m",Ee).call(this,"get worker "+t+" in "+i.id+" succeed!"),""!=n(this,_e,"f")&&i.setLogFunc(n(this,me,"f"),n(this,pe,"f")),i):(n(this,ue,"m",Ce).call(this,"#getWorkerByIntanceId: no suitable worker"),null)},We=function(e,t){let r=n(this,de,"f");n(this,ue,"m",Ce).call(this,"removeInstanceInWorkerInner"),n(this,ue,"m",Ce).call(this,r);for(let i of r)if(i===e){null!=i.Instances[t]?(delete i.Instances[t],n(this,ue,"m",Ce).call(this,r),n(this,ue,"m",Ee).call(this,"removeInstanceInWorkerInner "+t+" in "+e.id+" succeed!")):n(this,ue,"m",Ee).call(this,"not found instance "+t);break}},Oe=function(e){return 0!=Object.keys(e.Instances).length},le={value:null},ve={value:new Array},function(e){e.Text="Text",e.Link="Link",e.FreeText="FreeText",e.Line="Line",e.Square="Square",e.Circle="Circle",e.Polygon="Polygon",e.PolyLine="PolyLine",e.Hignlight="Hignlight",e.Underline="Underline",e.Squiggly="Squiggly",e.StrikeOut="StrikeOut",e.Stamp="Stamp",e.Caret="Caret",e.Ink="Ink",e.Popup="Popup"}(Be||(Be={})),function(e){e.None="none",e.Invisible="invisible",e.Hidden="hidden",e.Print="print",e.NoZoom="noZoom",e.NoRotate="noRotate",e.NoView="noView",e.ReadOnly="readOnly",e.Locked="locked",e.ToggleNoView="toggleNoView",e.LockedContents="lockedContents"}(Ne||(Ne={})),function(e){e.Solid="S",e.Dashed="D",e.Beveled="B",e.Insert="I",e.Underline="U"}(Ve||(Ve={})),function(e){e.NoEffect="S",e.Cloudy="C"}(Ue||(Ue={})),function(e){e.Comment="Comment",e.Key="Key",e.Note="Note",e.Help="Help",e.NewParagraph="NewParagraph",e.Paragraph="Paragraph",e.Insert="Insert"}(Ge||(Ge={})),function(e){e.Marked="Marked",e.Review="Review"}(je||(je={})),function(e){e.Accepted="Accepted",e.Rejected="Rejected",e.Cancelled="Cancelled",e.Completed="Completed",e.None="None"}(He||(He={})),function(e){e.None="None",e.Square="Square",e.Circle="Circle",e.Diamond="Diamond",e.OpenArrow="OpenArrow",e.ClosedArrow="ClosedArrow",e.Butt="Butt",e.ROpenArrow="ROpenArrow",e.RClosedArrow="RClosedArrow",e.Slash="Slash"}(ze||(ze={})),function(e){e[e.LeftJustified=0]="LeftJustified",e[e.Centered=1]="Centered",e[e.RightJustified=2]="RightJustified"}(Ke||(Ke={})),function(e){e.FreeText="FreeText",e.FreeTextCallout="FreeTextCallout",e.FreeTextTypeWriter="FreeTextTypeWriter"}(Je||(Je={})),function(e){e.LineArrow="LineArrow",e.LineDimension="LineDimension"}(Ye||(Ye={})),function(e){e.Approved="Approved",e.Experimental="Experimental",e.NotApproved="NotApproved",e.Asls="Asls",e.Expired="Expired",e.NotForPublicRelease="NotForPublicRelease",e.Confidential="Confidential",e.Final="Final",e.Sold="Sold",e.Departmental="Departmental",e.ForComment="ForComment",e.TopSecret="TopSecret",e.Draft="Draft",e.ForPublicRelease="ForPublicRelease"}(Xe||(Xe={}));class jt extends class{constructor(e){this.type=void 0,this.rectangle=void 0,this.contents=void 0,this.name=void 0,this.modifiedDate=void 0,this.flags=void 0,this.border=void 0,this.color=void 0,this.normalAppearance=void 0,this.type=e}toJsonString(){return JSON.stringify(this)}}{constructor(e){super(e),this.title=void 0,this.opacity=void 0,this.richText=void 0,this.creationDate=void 0,this.subject=void 0}}class Ht{}Ht.PdfAnnotType=Be,Ht.PdfAnnotFlag=Ne,Ht.PdfAnnotBorderStyleStyle=Ve,Ht.PdfAnnotBorderEffectStyle=Ue,Ht.PdfAnnotTextName=Ge,Ht.PdfAnnotTextStateModel=je,Ht.PdfAnnotTextState=He,Ht.PdfAnnotLineEnding=ze,Ht.PdfAnnotFreeTextQuadding=Ke,Ht.PdfAnnotFreeTextIntent=Je,Ht.PdfAnnotLineIntent=Ye,Ht.PdfAnnotStampName=Xe,Ht.PdfAnnotAppearance=class{constructor(){this.annot=void 0}},Ht.PdfAnnotBorderStyle=class{constructor(){this.width=void 0,this.style=void 0,this.dash=void 0}},Ht.PdfAnnotBorderEffect=class{constructor(){this.style=void 0,this.intensity=void 0}},Ht.PdfTextAnnot=class extends jt{constructor(){super(Be.Text),this.open=void 0,this.iconName=void 0,this.state=void 0,this.stateModel=void 0}},Ht.PdfFreeTextAnnot=class extends jt{constructor(){super(Be.FreeText),this.defaultAppearance=void 0,this.q=void 0,this.defaultStyle=void 0,this.callout=void 0,this.intent=void 0,this.borderEffect=void 0,this.rectDifference=void 0,this.borderStyle=void 0,this.lineEnding=void 0}},Ht.PdfLineAnnot=class extends jt{constructor(e,t,n,r){super(Be.Line),this.line=void 0,this.borderStyle=void 0,this.lineEnding=void 0,this.interiorColor=void 0,this.leadLineLength=void 0,this.leadLineExtensionLength=void 0,this.caption=void 0,this.intent=void 0,this.leadLineOffsetLength=void 0,this.captionPosition=void 0,this.captionOffset=void 0,this.line=[e,t,n,r]}},Ht.PdfSquareAnnot=class extends jt{constructor(){super(Be.Square),this.borderStyle=void 0,this.interiorColor=void 0,this.borderEffect=void 0,this.rectDifference=void 0}},Ht.PdfCircleAnnot=class extends jt{constructor(){super(Be.Circle),this.borderStyle=void 0,this.interiorColor=void 0,this.borderEffect=void 0,this.rectDifference=void 0}},Ht.PdfPolygonAnnot=class extends jt{constructor(){super(Be.Polygon),this.vertices=void 0,this.borderStyle=void 0,this.borderEffect=void 0}},Ht.PdfPolyLineAnnot=class extends jt{constructor(){super(Be.PolyLine),this.vertices=void 0,this.borderStyle=void 0,this.lineEnding=void 0,this.borderEffect=void 0}},Ht.PdfHighlightAnnot=class extends jt{constructor(){super(Be.Hignlight),this.quadPoints=void 0}},Ht.PdfUnderlineAnnot=class extends jt{constructor(){super(Be.Underline),this.quadPoints=void 0}},Ht.PdfStrikeOutAnnot=class extends jt{constructor(){super(Be.StrikeOut),this.quadPoints=void 0}},Ht.PdfSquigglyAnnot=class extends jt{constructor(){super(Be.Squiggly),this.quadPoints=void 0}},Ht.PdfRubberStampAnnot=class extends jt{constructor(){super(Be.Stamp),this.name=void 0}},Ht.PdfInkAnnot=class extends jt{constructor(){super(Be.Ink),this.inkList=void 0,this.borderStyle=void 0}};class zt{constructor(t,r){var o,s,c,l;Qe.add(this),$e.set(this,void 0),this._outputType=e.ImageType.IT_JPG,this._inputType=e.ImageType.IT_ALL,this._jpegQuality=80,et.set(this,null!==(o=Vt.License)&&void 0!==o?o:""),tt.set(this,[]),nt.set(this,null),rt.set(this,0),it.set(this,""),ot.set(this,null),at.set(this,null),st.set(this,i(l=zt,Ze,+n(l,Ze,"f",qe)+1,"f",qe)),ut.set(this,null),ct.set(this,JSON.parse(JSON.stringify(Vt.NavInfo))),lt.set(this,Vt.Mobile),dt.set(this,location.origin),ht.set(this,""),gt.set(this,a.init),ft.set(this,!1),mt.set(this,null!==(s=Vt.LicMode)&&void 0!==s?s:u.LONG_KEY),pt.set(this,null!==(c=Vt.UUID)&&void 0!==c?c:""),this._handleBooleanResult=function(e,t){return!0},i(this,$e,t,"f"),i(this,et,null!=r?r:Vt.License,"f"),this.setLog(Vt.LogLevel,Vt.LogFunc,Vt.LogContext)}_prepareModule(e){}setLog(e,t,n){i(this,ot,null!=t?t:null,"f"),i(this,at,n,"f"),i(this,it,null!=e?e:"","f")}_log(e){"function"==typeof n(this,ot,"f")&&n(this,ot,"f").call(this,e,n(this,at,"f"))}_logAll(e){n(this,it,"f")===o.logAll&&this._log(e)}_handleBasicResult(e,t){return delete e.code,delete e.message,e}_handleImageData(e,t){var r,i,o;if("object"==typeof e.imageData)if(null!=e.imageCount&&e.imageCount>1)for(let a=0;a<e.imageCount;a++)e.imageData[a]=n(r=t.context,Qe,"m",yt).call(r,e.imageData[a],e.blobType,t.params.returnBlob);else e.imageData=n(i=t.context,Qe,"m",yt).call(i,e.imageData,e.blobType,t.params.returnBlob);return"object"==typeof e.pdfData&&(e.pdfData=n(o=t.context,Qe,"m",yt).call(o,e.pdfData,e.blobType,t.params.returnBlob)),e}_handleResult(e,t){var r,i,o;let a=n(i=t.context,Qe,"m",bt).call(i,e);if(void 0===a.code||!a.code&&"Successful."===a.message)a=t.handleResult(a,t),n(o=t.context,Qe,"m",vt).call(o),(0,t.resolve)(a);else{let e={code:a.code,message:a.code===c.wasmException?s.WASM_EXCEPTION_ERROR+"("+(null===(r=t.params)||void 0===r?void 0:r.moduleName)+":"+t.func+":"+a.message+")":a.message};t.context.terminated?t.resolve(e):t.reject(e)}}_execTask(e){let t=this,r=n(t,nt,"f");if(t._logAll(e),r)try{r.execTask(e.func,e.params).then((function(r){t._log(r),t._handleResult(n(t,Qe,"m",bt).call(t,r),e)})).catch((function(r){t._log(r),n(t,Qe,"m",vt).call(t);let i=r;"object"==typeof r&&null!=r.message&&(i=r.message);let o={code:c.wasmJsWorkerRunFailed,message:i};n(t,ft,"f")?e.resolve(o):e.reject(o)}))}catch(r){n(t,Qe,"m",vt).call(t),t._log(r);let i={code:c.wasmJsWorkerRunException,message:r.message,stack:r.stack};n(t,ft,"f")?e.resolve(i):e.reject(i)}}_cancelAllTasks(e,t){for(let r of n(this,tt,"f"))if(void 0!==r){let i={code:e,message:t};n(this,ft,"f")?r.resolve(i):r.reject(i)}i(this,tt,[],"f")}_createTask(t,r,a){let s={moduleName:n(this,$e,"f").name,insId:n(this,st,"f")},u={id:i(this,rt,+n(this,rt,"f")+1,"f"),func:t,params:s};return u.promise=new Promise((function(e,t){u.resolve=e,u.reject=t})),u.func=t,u.context=this,u.handleResult=void 0!==a&&a?a:this._handleBasicResult,u.params.input=void 0!==r&&r?r:"",u.params.returnType=e.ReturnedDataType.RT_AUTO,u.params.returnBlob=!0,Vt.LogLevel===o.logDebug&&(u.params.logLevel=o.logDebug),u}_addTask(e,t){return n(this,gt,"f")===a.destroyed?e.reject({code:c.wasmJsObjectNotInit,message:n(this,ft,"f")?"object has been disposed":"object not init"}):n(this,gt,"f")===a.failed?e.reject({code:c.wasmJsObjectInitFailed,message:n(this,ht,"f")}):(t?n(this,tt,"f").unshift(e):n(this,tt,"f").push(e),n(this,Qe,"m",vt).call(this)),e.promise}terminate(e){let t=this;e=null==e||e;let r=n(t,Qe,"m",Tt).call(t);i(t,ft,!0,"f");let o=Gt.Instance;o&&o.removeInstanceInWorker(n(t,$e,"f"),n(t,nt,"f"),n(t,st,"f"),e),r.then((function(e){i(t,nt,null,"f"),t._log(n(t,$e,"f").name+" destroy return: "),t._log(e)})).catch((function(e){i(t,nt,null,"f"),t._log(n(t,$e,"f").name+" destroy failed"),t._log(e)})),i(t,gt,"","f")}_readFile(e,t){return new Promise((function(r,i){(class{static read(e){return new Promise((function(t,n){let r=Object.prototype.toString.call(e);if("[object String]"===r)0===e.indexOf("blob:")||e.indexOf(".jpg")>0||e.indexOf(".jpeg")>0||e.indexOf(".png")>0||e.indexOf(".bmp")>0||e.indexOf(".dib")>0||e.indexOf(".pdf")>0||e.indexOf(".tiff")>0||e.indexOf(".tif")>0?fetch(e,{mode:"cors"}).then((function(e){return e.arrayBuffer()})).then((function(e){return t(e)})).catch((function(e){return Promise.reject(e)})):n("Error url: Can not read the file URL");else if("[object Blob]"===r||"[object FileList]"===r||"[object File]"===r){let n=e;"[object FileList]"!==r&&"[object File]"!==r||(n=e[0]?e[0]:e);let i=new FileReader;i.readAsArrayBuffer(n),i.onload=function(){t(i.result)}}else"[object ArrayBuffer]"===r||"[object Uint8ClampedArray]"===r?t(e):n("Not support source type: "+r)}))}}).read(e).then((function(e){r(e)}),(function(e){var r;n(r=t.context,Qe,"m",It).call(r,t,e,c.wasmJsReadFileFailed)})).catch((function(e){var r;n(r=t.context,Qe,"m",It).call(r,t,e,c.wasmJsReadFileFailed)}))}))}}Ze=zt,$e=new WeakMap,et=new WeakMap,tt=new WeakMap,nt=new WeakMap,rt=new WeakMap,it=new WeakMap,ot=new WeakMap,at=new WeakMap,st=new WeakMap,ut=new WeakMap,ct=new WeakMap,lt=new WeakMap,dt=new WeakMap,ht=new WeakMap,gt=new WeakMap,ft=new WeakMap,mt=new WeakMap,pt=new WeakMap,Qe=new WeakSet,_t=function e(t){let r=null!=t?t:this;if(n(r,ut,"f")&&clearTimeout(n(r,ut,"f")),n(r,nt,"f")&&n(r,nt,"f").alive)return n(r,nt,"f");let o=Gt.Instance;o?o.getWorker(n(r,$e,"f"),n(r,st,"f")).then(t=>{if(i(r,nt,t,"f"),n(r,nt,"f")&&n(r,nt,"f").alive)n(r,tt,"f").length>0&&n(r,Qe,"m",vt).call(r);else{let t=o.getModuleLoadedError(n(r,$e,"f").name);if(null==t?void 0:t.code)return r._cancelAllTasks(c.wasmJsNotLoaded,t.message),n(r,nt,"f");n(r,tt,"f").length>0&&i(r,ut,setTimeout(n(r,Qe,"m",e),50,r),"f")}return n(r,nt,"f")}).catch(e=>n(r,nt,"f")):r._cancelAllTasks(c.wasmJsNotLoaded,"wasm env not loaded or unloaded")},vt=function(){if(this._logAll(n(this,tt,"f")),n(this,gt,"f")!=a.init)if(n(this,nt,"f")&&n(this,nt,"f").alive){if(n(this,tt,"f").length>0){let e=n(this,tt,"f")[0];n(this,gt,"f")!==a.ready&&"init"!==e.func||(delete n(this,tt,"f")[0],n(this,tt,"f").splice(0,1),this._execTask(e))}}else{if(n(this,nt,"f")&&!n(this,nt,"f").alive&&n(this,tt,"f").length>0&&"init"!=n(this,tt,"f")[0].func)return i(this,nt,null,"f"),void n(this,Qe,"m",Dt).call(this);n(this,tt,"f").length>0&&n(this,Qe,"m",_t).call(this,this)}else n(this,Qe,"m",Dt).call(this)},It=function(e,t,n){let r=t;return"object"!=typeof r&&(r={},r.code=n,r.message=t),e.context.terminated?e.resolve(r):e.reject(r)},yt=function(e,t,n){if(n){let n;return n=null!=t?new Blob([e],{type:t}):new Blob([e]),n}return e},bt=function(e){try{return"string"==typeof e?JSON.parse(e):e}catch(t){return e}},Dt=function(){let e=this;e._prepareModule(n(this,$e,"f"));let t=this._createTask("init");t.params.key=n(this,et,"f"),t.params.uuid=n(this,pt,"f"),t.params.licMode=n(this,mt,"f"),t.params.val={nv:n(this,ct,"f"),mb:n(this,lt,"f"),dm:n(this,dt,"f")},t.handleResult=function(e,t){return i(t.context,gt,a.ready,"f"),e},i(this,gt,a.pending,"f"),this._addTask(t,!0),t.promise.then((function(t){e._log(n(e,$e,"f").name+" init return: "),e._log(t)})).catch((function(t){i(e,gt,a.failed,"f"),i(e,ht,t.message,"f"),e._log(n(e,$e,"f").name+" init failed"),e._log(t),e._cancelAllTasks(c.wasmJsObjectInitFailed,t.message)}))},Tt=function(){if(n(this,gt,"f")==a.pending||n(this,gt,"f")==a.ready){let e=this._createTask("destroy");return this._addTask(e),e.promise}return Promise.resolve(!0)},qe={value:0};class Kt extends zt{constructor(e,t){super(e,t)}_prepareModule(e){let t=Gt.Instance;t.addModules(Vt.ImageIOModule),Vt.LicMode===u.DLS_KEY&&t.addModules(Vt.CryptoModule),n(Kt,St,"m",wt).call(Kt,Vt.ImageIOModule,e),t.addModules(e)}}St=Kt,wt=function(e,t){t.resourceDir=e.resourceDir,t.crossScript=e.crossScript,t.script=e.script,t.useSimd=e.useSimd,t.useSimd=t.name===o.imgProc&&Vt.UseSimd,t.fetchOptions=e.fetchOptions,t.defHeapSize=e.defHeapSize,t.maxHeapSize=t.maxHeapSize};class Jt extends Kt{constructor(e){super(Vt.ImagecoreModule,e),Ct.add(this),Et.set(this,0)}getImageFormat(e){return t(this,void 0,void 0,(function*(){let t=this,n=t._createTask("GetImageFormat");const r=yield t._readFile(e,n);return n.params.input=r,t._addTask(n),n.promise}))}readImageInfo(e){return t(this,void 0,void 0,(function*(){let t=this,n=t._createTask("ReadImageInfo");const r=yield t._readFile(e,n);return n.params.input=r,t._addTask(n),n.promise}))}getMD5(e){return t(this,void 0,void 0,(function*(){let t=this,n=t._createTask("GetMD5");const r=yield t._readFile(e,n);return n.params.input=r,n.handleResult=function(e,t){return e.MD5},t._addTask(n),n.promise}))}getLicenseInfo(){return t(this,void 0,void 0,(function*(){return this._addTask(this._createTask("GetLicenseInfo"))}))}getAesResult(e){return t(this,void 0,void 0,(function*(){return this._addTask(this._createTask("GetAesResult",[e=null!=e?e:""]))}))}saveImage(e,r,i,o,a){return t(this,void 0,void 0,(function*(){return(a=null!=a&&a)?n(this,Ct,"m",Mt).call(this,e,void 0,void 0,void 0,1,void 0,void 0,r,i,o):n(this,Ct,"m",Mt).call(this,e,void 0,void 0,void 0,void 0,void 0,void 0,r,i,o)}))}readImage(n,r,i,o,a){return t(this,void 0,void 0,(function*(){r=null!=r?r:this._outputType,i=null!=i?i:this._jpegQuality,o=null!=o&&o,a=null!=a&&a;let t=this,s=t._createTask("ReadImage");const u=yield t._readFile(n,s);return s.params.input=[u,r,i,a],s.params.returnType=o?e.ReturnedDataType.RT_BASE64:e.ReturnedDataType.RT_AUTO,s.params.returnBlob=!o,s.handleResult=t._handleImageData,t._addTask(s),s.promise}))}openTiff(e){return t(this,void 0,void 0,(function*(){let t=this,n=t._createTask("LoadTiff");const r=yield t._readFile(e,n);n.params.input=r,t._addTask(n);const i=yield n.promise;if(i.srcBuffer){let t=Object.prototype.toString.call(e);"[object ArrayBuffer]"!=t&&"[object Uint8ClampedArray]"!=t&&delete i.srcBuffer}return i}))}readTiff(t,n,r,i){t=null!=t?t:0,n=null!=n?n:this._outputType,r=null!=r&&r,i=null!=i&&i;let o=this._createTask("ReadTiffPage");return o.params.input=[t,n,i],o.params.returnType=r?e.ReturnedDataType.RT_BASE64:e.ReturnedDataType.RT_AUTO,o.params.returnBlob=!r,o.handleResult=this._handleImageData,this._addTask(o)}readTiffInfo(e){e=null!=e?e:0;let t=this._createTask("GetTiffPageInfo");return t.params.input=[e],this._addTask(t)}closeTiff(){return this._addTask(this._createTask("EndReadTiff",null,this._handleBooleanResult))}createTiff(){return this._addTask(this._createTask("NewTiff",null,this._handleBooleanResult))}appendImage(e,r,i,o,a){return t(this,void 0,void 0,(function*(){r=null!=r?r:this._inputType,i=null!=i?i:n(this,Et,"f"),o=null!=o?o:this._jpegQuality,a=null!=a&&a;let t=this,s=t._createTask("AppendImageToTiff");const u=yield t._readFile(e,s);return s.params.input=[u,r,i,o,a],s.handleResult=t._handleBooleanResult,t._addTask(s),s.promise}))}addTag(e,t,n){return this._addTask(this._createTask("AddTagToNextPage",[e,t,n=null!=n&&n],this._handleBooleanResult))}getTiff(t){let n=this._createTask("GetTiffStream");return n.handleResult=this._handleImageData,n.params.returnType=null!=t?t:e.ReturnedDataType.RT_AUTO,n.params.returnBlob=t!=e.ReturnedDataType.RT_AUTO,this._addTask(n)}getMemoryUsed(){return this._addTask(this._createTask("getMemoryUsed",null,(function(e,t){return e.memoryUsed})))}getMultiPartFile(e,t){return this._addTask(this._createTask("ds_get_file",[e,t],(function(e,t){return e})))}}Et=new WeakMap,Ct=new WeakSet,Mt=function(n,r,i,o,a,s,u,c,l,d){return t(this,void 0,void 0,(function*(){let t=this;r=null!=r?r:this._inputType,i=null!=i?i:0,o=null!=o?o:0,a=null!=a?a:24,s=null!=s?s:96,u=null!=u?u:96,c=null!=c?c:this._outputType,l=null!=l?l:this._jpegQuality,d=null!=d?d:e.ReturnedDataType.RT_AUTO;let h=t._createTask("SaveImage");const g=yield t._readFile(n,h);return h.params.input=[g,r,i,o,a,s,u,c,l],h.params.returnType=d,h.params.returnBlob=d!=e.ReturnedDataType.RT_BASE64,h.handleResult=t._handleImageData,t._addTask(h),h.promise}))},function(e){e[e.NearestNeighbour=1]="NearestNeighbour",e[e.Bilinear=2]="Bilinear",e[e.Bicublic=3]="Bicublic",e[e.BestQuality=5]="BestQuality"}(Pt||(Pt={}));class Yt extends Kt{constructor(e){super(Vt.ImageProcModule,e)}initImage(n,r,i,o,a){return t(this,void 0,void 0,(function*(){r=null!=r&&r,i=null!=i?i:0,o=null!=o?o:0,a=null!=a&&a;let t=this,s=t._createTask("InitImageObject");if(s.params.input=[n,i,o],r||a)s.params.input.push(r?e.ImageType.IT_RGBA:e.ImageType.IT_BGRA),t._addTask(s);else{const r=yield t._readFile(n,s);s.params.input[0]=r,s.params.input.push(e.ImageType.IT_ALL),t._addTask(s)}return s.promise}))}rotate(e,t,n,r){return((e=null!=e?e:0)<0||e>360)&&(e%=360)<0&&(e+=360),this._addTask(this._createTask("RotateEx",[e,n=null!=n&&n,r=null!=r?r:Pt.Bicublic,t=null!=t?t:"FFFFFF"],this._handleBooleanResult))}flip(e){e=null!=e?e:1;let t=this._createTask("");return t.handleResult=this._handleBooleanResult,1===e?t.func="Flip":-1===e&&(t.func="Mirror"),this._addTask(t),t.promise}erase(e,t,n,r,i){i=null!=i?i:"FFFFFF";let o=this._createTask("Erase");return o.handleResult=this._handleBooleanResult,o.params.input=[e,t,n,r,i],this._addTask(o),o.promise}crop(e,t,n,r){return this._addTask(this._createTask("Crop",[e,t,n,r],this._handleBooleanResult))}resize(e,t,n){return this._addTask(this._createTask("ChangeImageSize",[e,t,n=null!=n?n:Pt.BestQuality],this._handleBooleanResult))}toGrayscale(e){(e=null!=e?e:1)<1&&(e=1),e>3&&(e=3);let t="";return 1===e?t="0":2===e?t="3;3;720;1.05":3===e&&(t="3;5;1080;1.05"),this._addTask(this._createTask("ConvertToGrayScale",t,this._handleBooleanResult))}toBinary(e,t){(t=null!=t?t:1)<1&&(t=1),t>3&&(t=3);let n="";return null!=e&&(e?n="1":1===t?n="0":2===t?n="2;3;720;1.05":3===t&&(n="2;5;1080;1.05")),this._addTask(this._createTask("ConvertToBWScale",n,this._handleBooleanResult))}invert(){return this._addTask(this._createTask("Invert",null,this._handleBooleanResult))}setImageWidth(e,t){return this._addTask(this._createTask("SetImageWidth",[e,t=null!=t?t:"FFFFFF"],this._handleBooleanResult))}setImageHeight(e,t){return this._addTask(this._createTask("SetImageHeight",[e,t=null!=t?t:"FFFFFF"],this._handleBooleanResult))}setDPI(e,t,n,r,i,o){return this._addTask(this._createTask("SetDPI",[e,t,n,r,i=null!=i&&i,o=null!=o?o:Pt.Bilinear],this._handleBooleanResult))}getImage(t,n,r,i,o,a,s,u,c){t=null!=t?t:this._jpegQuality,n=null==n||n,i=null!=i?i:0,o=null!=o?o:0,a=null!=a?a:0,s=null==s||s,u=(r=null!=r&&r)&&null==u?e.ImageType.IT_JPG:null!=u?u:e.ImageType.IT_ALL,c=null!=c&&c;let l=this._createTask("GetCurrentImage");return l.params.input=[u,i,o,a,!1,t,n,c],l.params.returnBlob=s,l.handleResult=this._handleImageData,this._addTask(l)}getSkewAngle(e){return this._addTask(this._createTask("GetSkewAngle",[e=null!=e?e:""],(function(e,t){return e.skewAngle})))}freeReservedData(){return this._addTask(this._createTask("FreeReservedData",null,this._handleBooleanResult))}detectDocument(e,t,n,r,i){return this._addTask(this._createTask("DocumentDetect",[e=null!=e?e:Pt.Bilinear,(t=null!=t?t:75)/100,n=null!=n?n:100,(r=null!=r?r:0)/255,i=null!=i?i:"","1"]))}perspective(e,t,n,r,i,o,a,s){return this._addTask(this._createTask("Perspective",[e,t,n,r,i,o,a,s],this._handleBooleanResult))}changeBrightness(e,t){return e=null!=e?e:0,0!=(t=null!=t?t:1)&&1!=t&&(t=0),this._addTask(1===t?this._createTask("ChangeBrightnessAndContrast",[e,0],this._handleBooleanResult):this._createTask("ChangeBrightness",[Math.floor(e/1e3*255)],this._handleBooleanResult))}changeContrast(e,t){return e=null!=e?e:0,0!=(t=null!=t?t:1)&&1!=t&&(t=0),this._addTask(1===t?this._createTask("ChangeBrightnessAndContrast",[0,e],this._handleBooleanResult):this._createTask("ChangeContrast",[1+e/1e3],this._handleBooleanResult))}changeBrightnessAndContrast(e,t){return this._addTask(this._createTask("ChangeBrightnessAndContrast",[e=null!=e?e:0,t=null!=t?t:0],this._handleBooleanResult))}removeShadow(e,t){t=null!=t?t:1.05,(e=null!=e?e:1)<1&&(e=1),e>3&&(e=3);let n="5";return 1===e?n+=";3;720;"+t:2===e?n+=";5;1080;"+t:3===e&&(n+=";10;0;"+t),this._addTask(this._createTask("ShadowRemovel",[n],this._handleBooleanResult))}enhanceAndSharpenImage(){return this._addTask(this._createTask("EnhanceAndSharpen",[""],this._handleBooleanResult))}brighten(){return this._addTask(this._createTask("Brighten",[""],this._handleBooleanResult))}getBlurryScore(){return this._addTask(this._createTask("GetBlurScore",[""],(function(e,t){return e.blurryScore})))}drawQuadrangle(e,t,n,r,i,o,a,s,u,c){let l=(u=null!=u?u:"FFFFFF")+";"+(c=null!=c?c:5);return this._addTask(this._createTask("DrawQuadrangle",[e,t,n,r,i,o,a,s,l],this._handleBooleanResult))}}class Xt{static resize(e,n,r,i,o,a){return t(this,void 0,void 0,(function*(){if(i<=0||i>=n&&i>=r)return{imageData:e};a=null!=a&&a;let t=new Yt;try{yield t.initImage(e);let s,u,c,l=null!=o?o:Pt.BestQuality;return c=n>r?n/i:r/i,s=Math.floor(n/c+.5),u=Math.floor(r/c+.5),a?(yield t.resize(s,u,l),yield t.toBinary(!1)):yield t.resize(s,u,l),yield t.getImage()}finally{t.terminate()}}))}static createImage(r){var i,o,a,s,u,c,l,d,h;return t(this,void 0,void 0,(function*(){let t=new Yt;try{let g={src:null,result:null,preview:null},f=r.source,m=r.output,p=null!==(o=null!==(i=f.imageWidth)&&void 0!==i?i:f.width)&&void 0!==o?o:0,_=null!==(s=null!==(a=f.imageHeight)&&void 0!==a?a:f.height)&&void 0!==s?s:0,v=f.imageData||f.data;if(null==m||null==m.orgImage&&null==m.previewImage)return g;let I=null!==(u=f.rgba)&&void 0!==u&&u,y=null!==(c=f.bgra)&&void 0!==c&&c,b=null!==(l=r.doPerspective)&&void 0!==l&&l,D=f.angle||0,T=yield t.initImage(v,I,p,_,y);g.src=T.srcBuffer,b&&r.polygon&&(yield t.perspective(r.polygon.points[0],r.polygon.points[1],r.polygon.points[2],r.polygon.points[3],r.polygon.points[4],r.polygon.points[5],r.polygon.points[6],r.polygon.points[7])),0!=D&&((D<0||D>360)&&(D%=360,D<0&&(D+=360)),yield t.rotate(D));let S=!1;if(m.orgImage){let n=null==m.orgImage.returnBlob||m.orgImage.returnBlob,r=null!=f.imageBitDepth?f.imageBitDepth:void 0,i=null!=f.imageXResolution?f.imageXResolution:void 0,o=null!=f.imageYResolution?f.imageYResolution:void 0,a=Vt.NavInfo.bMac||Vt.NavInfo.biPhone||Vt.NavInfo.biPad,s=yield t.getImage(m.orgImage.quality,S,I||y,r,i,o,n,m.orgImage.returnType,a);m.orgImage.returnType==e.ImageType.IT_BGRA?s.bgra=!0:m.orgImage.returnType==e.ImageType.IT_RGBA&&(s.rgba=!0),g.result=s}if(m.previewImage){let i=p,o=_;90!=D&&270!=D||(i=_,o=p);let a,s,u=Math.min((null!==(d=m.previewImage.width)&&void 0!==d?d:p)/i,(null!==(h=m.previewImage.height)&&void 0!==h?h:_)/o);if(90==D||270==D?(a=Math.floor(_*u+.5),s=Math.floor(p*u+.5)):(a=Math.floor(p*u+.5),s=Math.floor(_*u+.5)),yield t.resize(a,s,m.previewImage.nInterplationMethod),r.polygon&&!b){let e=r.polygon.points;0!=D&&(e=n(this,At,"m",xt).call(this,e,D,i,o)),yield t.drawQuadrangle(Math.floor(e[0]*u+.5),Math.floor(e[1]*u+.5),Math.floor(e[2]*u+.5),Math.floor(e[3]*u+.5),Math.floor(e[4]*u+.5),Math.floor(e[5]*u+.5),Math.floor(e[6]*u+.5),Math.floor(e[7]*u+.5),r.polygon.strokeColor,r.polygon.lineWidth)}let c=null==m.previewImage.returnBlob||m.previewImage.returnBlob,l=yield t.getImage(m.previewImage.quality,!0,I||y,void 0,void 0,void 0,c,m.previewImage.returnType);m.previewImage.returnType==e.ImageType.IT_BGRA?l.bgra=!0:m.previewImage.returnType==e.ImageType.IT_RGBA&&(l.rgba=!0),g.preview=l}return g}finally{t.terminate()}}))}static resizeImageWithMeta(n,r,i,o,a){return t(this,void 0,void 0,(function*(){let t=null!=o?o:85,s=new Yt,u=null!=a?a:0;try{yield s.initImage(n);let o,a,c=null!=i?i:Pt.BestQuality;r.imageWidth>r.imageHeight?(o=u,a=Math.floor(r.imageHeight*u/r.imageWidth+.5)):(o=Math.floor(r.imageWidth*u/r.imageHeight+.5),a=u),1==r.imageBitDepth?(yield s.resize(o,a,c),yield s.toBinary(!1)):yield s.resize(o,a,c);let l=!1,d=!0,h=r.imageBitDepth,g=r.imageXResolution,f=r.imageYResolution,m=1==h?e.ImageType.IT_PNG:e.ImageType.IT_JPG;return yield s.getImage(t,l,!1,h,g,f,d,m)}finally{s.terminate()}}))}static getMax4kImage(n,r,i,o){return t(this,void 0,void 0,(function*(){let t,a=null!=i?i:85,s=new Jt;try{let e=yield s.readImageInfo(n);t={imageWidth:e.imageWidth,imageHeight:e.imageHeight,imageBitDepth:e.imageBitDepth,imageXResolution:e.imageXResolution,imageYResolution:e.imageYResolution}}finally{s.terminate()}if((Vt.NavInfo.biPhone||Vt.NavInfo.biPad)&&o&&(t.imageWidth>o||t.imageHeight>o))return yield Xt.resizeImageWithMeta(n,t,r,i,o);s=new Jt;try{let r=1==t.imageBitDepth?e.ImageType.IT_PNG:e.ImageType.IT_JPG;return yield s.readImage(n,r,a,!1)}finally{s.terminate()}}))}}At=Xt,xt=function(e,t,n,r){let i=[];for(let o=0;o<e.length;o+=2){let a,s;const u=e[o],c=e[o+1];90==t?(a=n-c,s=u):180==t?(a=n-u,s=r-c):270==t?(a=c,s=r-u):(a=u,s=c),i.push(a,s)}return i};class Qt{static decode(e){const t={encodeChars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",decodeChars:[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1]};function n(e){let t,n,r,i,o,a,s,u=[],c=e.length;for(t=0;t<c;t++)i=e.charCodeAt(t),0==(i>>7&255)?u.push(e.charAt(t)):6==(i>>5&255)?(o=e.charCodeAt(++t),n=(31&i)<<6,r=63&o,s=n|r,u.push(String.fromCharCode(s))):14==(i>>4&255)&&(o=e.charCodeAt(++t),a=e.charCodeAt(++t),n=i<<4|o>>2&15,r=(3&o)<<6|63&a,s=(255&n)<<8|r,u.push(String.fromCharCode(s)));return u.join("")}return function(e){let r,i,o,a,s=[],u=0,c=e.length;for(;u<c;){do{r=t.decodeChars[255&e.charCodeAt(u++)]}while(u<c&&-1==r);if(-1==r)break;do{i=t.decodeChars[255&e.charCodeAt(u++)]}while(u<c&&-1==i);if(-1==i)break;s.push(String.fromCharCode(r<<2|(48&i)>>4));do{if(o=255&e.charCodeAt(u++),61==o)return n(s.join(""));o=t.decodeChars[o]}while(u<c&&-1==o);if(-1==o)break;s.push(String.fromCharCode((15&i)<<4|(60&o)>>2));do{if(a=255&e.charCodeAt(u++),61==a)return n(s.join(""));a=t.decodeChars[a]}while(u<c&&-1==a);if(-1==a)break;s.push(String.fromCharCode((3&o)<<6|a))}return n(s.join(""))}(e)}}!function(e){e[e.render=1]="render",e[e.extractImageOnly=2]="extractImageOnly",e[e.auto=3]="auto",e[e.renderWithAnnot=4]="renderWithAnnot"}(Lt||(Lt={}));class Zt extends zt{constructor(t){super(Vt.PdfReaderModule,t),Rt.set(this,200),kt.set(this,3),this._outputType=e.ImageType.IT_ALL}open(e,n){return t(this,void 0,void 0,(function*(){n=null!=n?n:"";let t=this,r=t._createTask("LoadPdf");const i=yield t._readFile(e,r);return r.params.input=[i,n],r.handleResult=function(t,n){if(t.srcBuffer){let n=Object.prototype.toString.call(e);"[object ArrayBuffer]"!=n&&"[object Uint8ClampedArray]"!=n&&delete t.srcBuffer}let r=Qt.decode(t.infoBase64);try{let e;try{r.replace(new RegExp("\\\\","gi"),"\\\\"),e=JSON.parse(r)}catch(t){e=r}let n={PdfCount:t.pageCount,PdfInfo:e,isTextBased:t.isTextBased};return t.srcBuffer&&(n.srcBuffer=t.srcBuffer,delete t.srcBuffer),n}catch(e){n.reject({code:c.wasmJsInvalidJson,message:e.message,stack:e.stack})}},t._addTask(r),r.promise}))}readPage(r,i,o,a,s,u,c){return t(this,void 0,void 0,(function*(){r=null!=r?r:0,i=null!=i?i:n(this,Rt,"f"),o=null!=o?o:n(this,kt,"f"),a=null!=a?a:this._outputType,u=null!=u&&u,s=null!=s&&s,c=null!=c&&c;let t=this._createTask("ReadPdfPage");return t.params.input=[r,i,o,a,s,c],t.params.returnType=u?e.ReturnedDataType.RT_BASE64:e.ReturnedDataType.RT_AUTO,t.params.returnBlob=!u,t.handleResult=this._handleImageData,this._addTask(t)}))}close(){return t(this,void 0,void 0,(function*(){return this._addTask(this._createTask("UnloadPdf",null,this._handleBooleanResult))}))}readPageAnnot(e){return t(this,void 0,void 0,(function*(){let t=this._createTask("ReadPdfAnnot",[e=null!=e?e:0]);return t.handleResult=function(e,t){let n=Qt.decode(e.annotBase64);try{let t;try{n.replace(new RegExp("\\\\","gi"),"\\\\"),t=JSON.parse(n)}catch(e){t=n}return{code:e.code,message:e.message,pageIndex:e.pageIndex,annots:t}}catch(e){t.reject({code:c.wasmJsInvalidJson,message:e.message,stack:e.stack})}},this._addTask(t)}))}setRenderLimitImageSize(e,n){return t(this,void 0,void 0,(function*(){return this._addTask(this._createTask("SetRenderLimitImageSize",[e=null!=e?e:0,n=null!=n?n:0],this._handleBooleanResult))}))}findText(e,n,r){return t(this,void 0,void 0,(function*(){return this._addTask(this._createTask("FindText",[e,n,r=null!=r?r:0]))}))}addSystemFont(e,n){return t(this,void 0,void 0,(function*(){return this._addTask(this._createTask("AddSystemFont",[e,n]))}))}getModifiedPdf(n){return t(this,void 0,void 0,(function*(){let t=this._createTask("GetModifiedPdf");return t.params.returnType=null!=n?n:e.ReturnedDataType.RT_AUTO,t.params.returnBlob=n!=e.ReturnedDataType.RT_AUTO,t.handleResult=this._handleImageData,this._addTask(t)}))}addAnnot(e,n){return t(this,void 0,void 0,(function*(){e=null!=e?e:0;let t=n.toJsonString();return this._addTask(this._createTask("PageAddAnnot",[e,t],this._handleBooleanResult))}))}addImage(e,n,r){return t(this,void 0,void 0,(function*(){e=null!=e?e:0;let t=JSON.stringify(r),i=this,o=i._createTask("PageAddImage");const a=yield i._readFile(n,o);return o.params.input=[e,t,a,0,0],o.handleResult=i._handleBooleanResult,i._addTask(o),o.promise}))}addText(e,n){return t(this,void 0,void 0,(function*(){e=null!=e?e:0;let t=JSON.stringify(n);return this._addTask(this._createTask("PageAddText",[e,t],this._handleBooleanResult))}))}addPath(e,n){return t(this,void 0,void 0,(function*(){let t=JSON.stringify(n);return this._addTask(this._createTask("PageAddPath",[e,t],this._handleBooleanResult))}))}deleteAnnot(e,n){return t(this,void 0,void 0,(function*(){return this._addTask(this._createTask("PageDeleteAnnot",[e=null!=e?e:0,n=null!=n?n:0],this._handleBooleanResult))}))}deletePage(e){return t(this,void 0,void 0,(function*(){return this._addTask(this._createTask("DeletePdfPage",[e=null!=e?e:0],this._handleBooleanResult))}))}changePagesOrder(e){return t(this,void 0,void 0,(function*(){e=null!=e?e:[];let t="";for(let n=0;n<e.length;n++)0!=n&&(t+=","),t+=e[n]+1;return this._addTask(this._createTask("ChangePagesOrder",[t],this._handleBooleanResult))}))}rotatePageLeft(e){return t(this,void 0,void 0,(function*(){return this._addTask(this._createTask("PageRotateLeft",[e=null!=e?e:0],this._handleBooleanResult))}))}rotatePageRight(e){return t(this,void 0,void 0,(function*(){return this._addTask(this._createTask("PageRotateRight",[e=null!=e?e:0],this._handleBooleanResult))}))}insertBlankPage(e,n,r){return t(this,void 0,void 0,(function*(){return this._addTask(this._createTask("InsertBlankPdfPage",[e=null!=e?e:0,n=null!=n?n:595,r=null!=r?r:842],this._handleBooleanResult))}))}mergePdf(e,n,r,i){return t(this,void 0,void 0,(function*(){i=null!=i?i:-1,r=null!=r?r:[],n=null!=n?n:"";let t=this,o=t._createTask("MergePdfPage"),a="";for(let e=0;e<r.length;e++)0!=e&&(a+=","),a+=r[e]+1;const s=yield t._readFile(e,o);return o.params.input=[s,i,n,a],o.handleResult=t._handleBooleanResult,t._addTask(o),o.promise}))}getPageInfo(e){return t(this,void 0,void 0,(function*(){return this._addTask(this._createTask("GetPdfPageInfo",[e=null!=e?e:0]))}))}}Rt=new WeakMap,kt=new WeakMap;class qt{static buildWasmFileName(e,t,n,r){return e+(r?"sn-":"")+t+n}static base64DecToArr(e,t){let r=e.replace(/[^A-Za-z0-9\+\/]/g,""),i=r.length,o=t?Math.ceil((3*i+1>>>2)/t)*t:3*i+1>>>2,a=new Uint8Array(o);for(let s,u,c=0,l=0,d=0;d<i;d++)if(u=3&d,c|=n(this,Ft,"m",Wt).call(this,r.charCodeAt(d))<<18-6*u,3===u||i-d==1){for(s=0;s<3&&l<o;s++,l++)a[l]=c>>>(16>>>s&24)&255;c=0}return a}static isWasmSupport(){try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){let e=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(e instanceof WebAssembly.Module)return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}catch(e){}return!1}static random(){return(Date.now()%10086).toString(36).slice(2)+Math.random().toString(36).slice(2)}}Ft=qt,Wt=function(e){return e>64&&e<91?e-65:e>96&&e<123?e-71:e>47&&e<58?e+4:43===e?62:47===e?63:0},function(e){e[e.auto=0]="auto",e[e.store=1]="store"}(Nt||(Nt={})),Ot=new WeakSet,Bt=function(e){let t={};if(null!=e&&"object"==typeof e)for(let n in e)t[n]=e[n];return t};class $t{static log(e,t){this.logLevel===t&&("function"==typeof this.logFunc?this.logFunc(e):console.log(e))}static setLoglevel(e,t){this.logLevel=1===e?o.logDebug:"",this.logFunc=t,Vt.setLogFunc(this.logLevel,t)}static getMemoryUsed(){return Gt.Instance.getMemoryUsed()}static getLicenseInfo(e,n,r){return t(this,void 0,void 0,(function*(){this.Init(e,n,r),yield Gt.Instance.loadModule(Vt.ImageIOModule);const t=new Jt(this.productKey);try{return yield t.getLicenseInfo()}finally{t.terminate()}}))}static Init(e,t,n){this.productKey=null!=e?e:this.productKey,void 0!==t&&(this.licMode=t?1:0),this.uuid=null!=n?n:this.uuid,Vt.License=this.productKey,Vt.UUID=this.uuid,Vt.LicMode=this.licMode,Vt.NavInfo=JSON.parse(JSON.stringify(r.navInfo)),Vt.Mobile=r.Lib.env.bMobile,Vt.UseSimd=this.simdFlag===h.SF_ENABLE||this.simdFlag!==h.SF_DISABLE&&this.getUseSimd();const i={resourceDir:this.resourceDir,workerScript:"",useFastCompEdition:this.useFastcompEdition,useSimd:Vt.UseSimd,fetchOptions:this.fetchOptions,defHeapSize:Vt.DefHeapSize,maxHeapSize:Vt.MaxHeapSize};i.workerScript=Vt.ImageIOWorkerJS,i.defHeapSize=this.wasmHeap[this.ImageIOWasm].initHeapSize,i.maxHeapSize=this.wasmHeap[this.ImageIOWasm].maxHeapSize,Vt.ImageIOResource=i;const o=Object.assign({},i);o.defHeapSize=this.wasmHeap[this.PdfReaderWasm].initHeapSize,o.maxHeapSize=this.wasmHeap[this.PdfReaderWasm].maxHeapSize,o.workerScript=Vt.PdfReaderWorkerJS,Vt.PdfReaderResource=o,""===this.logLevel||this.logFunc||this.setLoglevel(1,console.log)}static loadPdfReader(e,n,r){return t(this,void 0,void 0,(function*(){return this.Init(e,n,r),yield Gt.Instance.loadModule(Vt.ImageProcModule),yield Gt.Instance.loadModule(Vt.PdfReaderModule)}))}static loadMain(e,n,r){return t(this,void 0,void 0,(function*(){this.Init(e,n,r);const t=yield Gt.Instance.loadModule(Vt.ImagecoreModule);return Gt.Instance.loadModule(Vt.ImageProcModule),t}))}static load(e,n,r){return t(this,void 0,void 0,(function*(){Gt.Instance.terminate(!0),this.Init(e,n,r),yield this.loadMain(e,n,r),yield this.loadPdfReader(e,n,r)}))}static unloadMain(){Gt.Instance.terminateWorker(Vt.ImageIOModule)}static unloadPdfReader(){Gt.Instance.terminateWorker(Vt.PdfReaderModule)}static unload(){return t(this,void 0,void 0,(function*(){yield Gt.Instance.terminate(!0)}))}static getUseSimd(){if(this.useFastcompEdition)return!1;if(this.simdFlag===h.SF_DEF){if(void 0!==navigator.userAgentData&&void 0!==navigator.userAgentData.brands){const{brands:e}=navigator.userAgentData;for(const t of e)if(t.brand&&("Chromium"===t.brand||"Google Chrome"===t.brand)&&t.version&&parseInt(t.version,10)>=94)return!0}}else if(this.simdFlag===h.SF_ENABLE)return!0;return!1}}$t.resourceDir=r.DWT.ResourcesPath+"/src/",$t.logLevel=r.DWT.Debug?o.logDebug:"",$t.logFunc=null,$t.productKey="",$t.licMode=u.LONG_KEY,$t.uuid="",$t.fetchOptions={mode:"cors",credentials:"same-origin",retries:3,retryDelay:500},$t.simdFlag=h.SF_DEF,$t.useFastcompEdition=!1,$t.ImageIOWasm=0,$t.PdfReaderWasm=1,$t.wasmHeap=[{maxHeapSize:300,initHeapSize:Vt.DefHeapSize},{maxHeapSize:200,initHeapSize:Vt.DefHeapSize}],e.ImageProc=Yt,e.ImageProcWrapper=Xt,e.ImagecoreEx=class extends Jt{constructor(e){super(e)}readTiff(e,n,r,i,o,a,s){const u=Object.create(null,{readTiff:{get:()=>super.readTiff}});return t(this,void 0,void 0,(function*(){const t=yield u.readTiff.call(this,e,n,r,i);let c={imageWidth:t.imageWidth,imageHeight:t.imageHeight,imageBitDepth:t.imageBitDepth,imageXResolution:t.imageXResolution,imageYResolution:t.imageYResolution};return s&&(c.imageWidth>s||c.imageHeight>s)?Xt.resizeImageWithMeta(t.imageData,c,o,a,s):t}))}},e.PdfAnnot=Ht,e.PdfReaderEx=class extends Zt{constructor(e){super(e)}readPage(e,n,r,i,o,a,s,u,c,l){const d=Object.create(null,{readPage:{get:()=>super.readPage}});return t(this,void 0,void 0,(function*(){const t=yield d.readPage.call(this,e,n,r,i,o,a,s);let h={imageWidth:t.imageWidth,imageHeight:t.imageHeight,imageBitDepth:t.imageBitDepth,imageXResolution:t.imageXResolution,imageYResolution:t.imageYResolution};return l&&(h.imageWidth>l||h.imageHeight>l)?yield Xt.resizeImageWithMeta(t.imageData,h,u,c,l):t}))}},e.PdfSettings=class{constructor(){this.version=void 0,this.compression=void 0,this.author=void 0,this.creationDate=void 0,this.creator=void 0,this.keywords=void 0,this.modifiedDate=void 0,this.producer=void 0,this.subject=void 0,this.title=void 0,this.quality=void 0,this.jpegMode=void 0}},e.PdfWriter=class extends Kt{constructor(e){super(Vt.PdfWriterModule,e),Ot.add(this)}initPdfSetting(e){return t(this,void 0,void 0,(function*(){let t=this,r=t._createTask("InitPdfWriter");return r.params.input=JSON.stringify(n(t,Ot,"m",Bt).call(t,e)),r.handleResult=this._handleBooleanResult,t._addTask(r)}))}appendPage(e,n){return t(this,void 0,void 0,(function*(){let t=this,r=t._createTask("AddPageFromImageFileStream");n=null!=n&&n;const i=yield t._readFile(e,r);return r.params.input=[i,n],r.handleResult=t._handleBooleanResult,t._addTask(r),r.promise}))}writePdf(n){return t(this,void 0,void 0,(function*(){let t=this._createTask("GetPdfContent");return t.params.returnType=null!=n?n:e.ReturnedDataType.RT_AUTO,t.params.returnBlob=n!=e.ReturnedDataType.RT_AUTO,t.handleResult=this._handleImageData,this._addTask(t)}))}newPage(e,n){return t(this,void 0,void 0,(function*(){e=null!=e?e:595,n=null!=n?n:842;let t=this._createTask("NewPdfPage");return t.params.input=[e,n],t.handleResult=this._handleBooleanResult,this._addTask(t)}))}writePage(){return t(this,void 0,void 0,(function*(){let e=this._createTask("WritePdfPage");return e.handleResult=this._handleBooleanResult,this._addTask(e)}))}pageSetRotate(e){return t(this,void 0,void 0,(function*(){0!==(e=null!=e?e:0)&&90!==e&&180!==e&&270!==e&&(e=0);let t=this._createTask("PdfPageSetRotate");return t.params.input=[e],t.handleResult=this._handleBooleanResult,this._addTask(t)}))}pageAddImage(e,r,i,o){return t(this,void 0,void 0,(function*(){let t=this,a=t._createTask("PdfPageAddImage");o=null!=o&&o,r=null!=r?r:0;let s=JSON.stringify(n(t,Ot,"m",Bt).call(t,i));const u=yield t._readFile(e,a);return a.params.input=[u,r,s,o],a.handleResult=t._handleBooleanResult,t._addTask(a),a.promise}))}},e.WasmEnv=$t,e.pdf=class{static IsModuleInstalled(){if(qt.isWasmSupport()){const e=Gt.Instance.getModuleStatus(o.pdfR),t=Gt.Instance.getModuleStatus(o.pdfW);return e===a.ready&&t===a.ready}return!1}},Object.defineProperty(e,"__esModule",{value:!0})})),r.WasmEnv=r.ImageIO.WasmEnv,r.Imagecore=r.ImageIO.ImagecoreEx,r.ImageProc=r.ImageIO.ImageProc,r.PdfReader=r.ImageIO.PdfReaderEx,r.PdfWriter=r.ImageIO.PdfWriter,r.ImageProcWrapper=r.ImageIO.ImageProcWrapper,r.pdf=r.ImageIO.pdf,r.ImageProcWrapper=r.ImageIO.ImageProcWrapper,r.Enum_ImageType=r.ImageIO.ImageType,r.Enum_ReturnType=r.ImageIO.ReturnedDataType})),(Z=q.Dynamsoft||{}).DWT=Z.DWT||{},Z.DBR=Z.DBR||{},Z.aryAddonReadyFun=Z.aryAddonReadyFun||[],Z.AddonReady=Z.AddonReady||function(e){Z.aryAddonReadyFun.push(e)},function(){Z.BarcodeReaderAddon=Z.BarcodeReaderAddon||{};var e=Z.BarcodeReaderAddon;e.Version="8.6.0.1026",e._decoding=!1,e._decodeQueue=[],e._decodeNext=function(){var t,n;0==e._decodeQueue.length?e._decoding=!1:(t=(n=e._decodeQueue[0]).method,n=n.args,e._decodeQueue.splice(0,1),t.apply(null,n))},e._defaultRuntimeSettingsStr="",e._defaultTemplateStr="",e._wasmInstance=!1,e._activeXInstance=!1,e.BarcodeReaderException=function(){var e,t=Z.DBR.EnumErrorCode.DBR_UNKNOWN;return(e="number"==typeof(e=arguments[0])?(t=e,new Error(arguments[1])):new Error(e)).code=t,e},e.RemoveNonPrintableChar=function(e){return Z.Lib.isString(e)?e.replace(/[^\x20-\x7E]|(\\")/g,""):e},e.errors={webcamNotInstalled:"The Webcam add-on not installed.",nonServiceNotSupportWebcamDecode:"The BarcodeReader add-on does not support reading barcodes from video streams.",decodeResultEmpty:"decode result is empty."},e._activeXMaxIEVersion=9,e.logLevel=3,Z.DBR.EnumAccompanyingTextRecognitionMode={ATRM_GENERAL:1,ATRM_SKIP:0},Z.DBR.EnumBarcodeColourMode={BICM_DARK_ON_LIGHT:1,BICM_LIGHT_ON_DARK:2,BICM_DARK_ON_DARK:4,BICM_LIGHT_ON_LIGHT:8,BICM_DARK_LIGHT_MIXED:16,BICM_DARK_ON_LIGHT_DARK_SURROUNDING:32,BICM_SKIP:0},Z.DBR.EnumBarcodeComplementMode={BCM_AUTO:1,BCM_GENERAL:2,BCM_SKIP:0},Z.DBR.EnumBarcodeFormat={BF_ALL:-32505857,BF_ONED:2047,BF_GS1_DATABAR:260096,BF_CODE_39:1,BF_CODE_128:2,BF_CODE_93:4,BF_CODABAR:8,BF_ITF:16,BF_EAN_13:32,BF_EAN_8:64,BF_UPC_A:128,BF_UPC_E:256,BF_INDUSTRIAL_25:512,BF_CODE_39_EXTENDED:1024,BF_GS1_DATABAR_OMNIDIRECTIONAL:2048,BF_GS1_DATABAR_TRUNCATED:4096,BF_GS1_DATABAR_STACKED:8192,BF_GS1_DATABAR_STACKED_OMNIDIRECTIONAL:16384,BF_GS1_DATABAR_EXPANDED:32768,BF_GS1_DATABAR_EXPANDED_STACKED:65536,BF_GS1_DATABAR_LIMITED:131072,BF_PATCHCODE:262144,BF_PDF417:33554432,BF_QR_CODE:67108864,BF_DATAMATRIX:134217728,BF_AZTEC:268435456,BF_MAXICODE:536870912,BF_MICRO_QR:1073741824,BF_MICRO_PDF417:524288,BF_GS1_COMPOSITE:-2147483648,BF_NULL:0},Z.DBR.EnumBarcodeFormat_2={BF2_NULL:0,BF2_POSTALCODE:32505856,BF2_NONSTANDARD_BARCODE:1,BF2_USPSINTELLIGENTMAIL:1048576,BF2_POSTNET:2097152,BF2_PLANET:4194304,BF2_AUSTRALIANPOST:8388608,BF2_RM4SCC:16777216,BF2_DOTCODE:2},Z.DBR.EnumBinarizationMode={BM_AUTO:1,BM_LOCAL_BLOCK:2,BM_SKIP:0},Z.DBR.EnumClarityCalculationMethod={ECCM_CONTRAST:1},Z.DBR.EnumClarityFilterMode={CFM_GENERAL:1},Z.DBR.EnumColourClusteringMode={CCM_AUTO:1,CCM_GENERAL_HSV:2,CCM_SKIP:0},Z.DBR.EnumColourConversionMode={CICM_GENERAL:1,CICM_SKIP:0},Z.DBR.EnumConflictMode={CM_IGNORE:1,CM_OVERWRITE:2},Z.DBR.EnumDeformationResistingMode={DRM_AUTO:1,DRM_GENERAL:2,DRM_SKIP:0},Z.DBR.EnumDPMCodeReadingMode={DPMCRM_AUTO:1,DPMCRM_GENERAL:2,DPMCRM_SKIP:0},Z.DBR.EnumErrorCode={DBR_SYSTEM_EXCEPTION:1,DBR_SUCCESS:0,DBR_UNKNOWN:-1e4,DBR_NO_MEMORY:-10001,DBR_NULL_REFERENCE:-10002,DBR_LICENSE_INVALID:-10003,DBR_LICENSE_EXPIRED:-10004,DBR_FILE_NOT_FOUND:-10005,DBR_FILETYPE_NOT_SUPPORTED:-10006,DBR_BPP_NOT_SUPPORTED:-10007,DBR_INDEX_INVALID:-10008,DBR_BARCODE_FORMAT_INVALID:-10009,DBR_CUSTOM_REGION_INVALID:-10010,DBR_MAX_BARCODE_NUMBER_INVALID:-10011,DBR_IMAGE_READ_FAILED:-10012,DBR_TIFF_READ_FAILED:-10013,DBR_QR_LICENSE_INVALID:-10016,DBR_1D_LICENSE_INVALID:-10017,DBR_DIB_BUFFER_INVALID:-10018,DBR_PDF417_LICENSE_INVALID:-10019,DBR_DATAMATRIX_LICENSE_INVALID:-10020,DBR_PDF_READ_FAILED:-10021,DBR_PDF_DLL_MISSING:-10022,DBR_PAGE_NUMBER_INVALID:-10023,DBR_CUSTOM_SIZE_INVALID:-10024,DBR_CUSTOM_MODULESIZE_INVALID:-10025,DBR_RECOGNITION_TIMEOUT:-10026,DBR_JSON_PARSE_FAILED:-10030,DBR_JSON_TYPE_INVALID:-10031,DBR_JSON_KEY_INVALID:-10032,DBR_JSON_VALUE_INVALID:-10033,DBR_JSON_NAME_KEY_MISSING:-10034,DBR_JSON_NAME_VALUE_DUPLICATED:-10035,DBR_TEMPLATE_NAME_INVALID:-10036,DBR_JSON_NAME_REFERENCE_INVALID:-10037,DBR_PARAMETER_VALUE_INVALID:-10038,DBR_DOMAIN_NOT_MATCHED:-10039,DBR_RESERVEDINFO_NOT_MATCHED:-10040,DBR_AZTEC_LICENSE_INVALID:-10041,DBR_LICENSE_DLL_MISSING:-10042,DBR_LICENSEKEY_NOT_MATCHED:-10043,DBR_REQUESTED_FAILED:-10044,DBR_LICENSE_INIT_FAILED:-10045,DBR_PATCHCODE_LICENSE_INVALID:-10046,DBR_POSTALCODE_LICENSE_INVALID:-10047,DBR_DPM_LICENSE_INVALID:-10048,DBR_FRAME_DECODING_THREAD_EXISTS:-10049,DBR_STOP_DECODING_THREAD_FAILED:-10050,DBR_SET_MODE_ARGUMENT_ERROR:-10051,DBR_LICENSE_CONTENT_INVALID:-10052,DBR_LICENSE_KEY_INVALID:-10053,DBR_LICENSE_DEVICE_RUNS_OUT:-10054,DBR_GET_MODE_ARGUMENT_ERROR:-10055,DBR_IRT_LICENSE_INVALID:-10056,DBR_MAXICODE_LICENSE_INVALID:-10057,DBR_GS1_DATABAR_LICENSE_INVALID:-10058,DBR_GS1_COMPOSITE_LICENSE_INVALID:-10059,DBR_DOTCODE_LICENSE_INVALID:-10061,DMERR_FAILED_TO_REACH_LTS:-20200},Z.DBR.EnumGrayscaleTransformationMode={GTM_INVERTED:1,GTM_ORIGINAL:2,GTM_SKIP:0},Z.DBR.EnumImagePixelFormat={IPF_Binary:0,IPF_BinaryInverted:1,IPF_GrayScaled:2,IPF_NV21:3,IPF_RGB_565:4,IPF_RGB_555:5,IPF_RGB_888:6,IPF_ARGB_8888:7,IPF_RGB_161616:8,IPF_ARGB_16161616:9,IPF_ABGR_8888:10,IPF_ABGR_16161616:11,IPF_BGR_888:12},Z.DBR.EnumImagePreprocessingMode={IPM_AUTO:1,IPM_GENERAL:2,IPM_GRAY_EQUALIZE:4,IPM_GRAY_SMOOTH:8,IPM_SHARPEN_SMOOTH:16,IPM_MORPHOLOGY:32,IPM_SKIP:0},Z.DBR.EnumIMResultDataType={IMRDT_IMAGE:1,IMRDT_CONTOUR:2,IMRDT_LINESEGMENT:4,IMRDT_LOCALIZATIONRESULT:8,IMRDT_REGIONOFINTEREST:16,IMRDT_QUADRILATERAL:32},Z.DBR.EnumIntermediateResultSavingMode={IRSM_MEMORY:1,IRSM_FILESYSTEM:2,IRSM_BOTH:4},Z.DBR.EnumIntermediateResultType={IRT_NO_RESULT:0,IRT_ORIGINAL_IMAGE:1,IRT_COLOUR_CLUSTERED_IMAGE:2,IRT_COLOUR_CONVERTED_GRAYSCALE_IMAGE:4,IRT_TRANSFORMED_GRAYSCALE_IMAGE:8,IRT_PREDETECTED_REGION:16,IRT_PREPROCESSED_IMAGE:32,IRT_BINARIZED_IMAGE:64,IRT_TEXT_ZONE:128,IRT_CONTOUR:256,IRT_LINE_SEGMENT:512,IRT_FORM:1024,IRT_SEGMENTATION_BLOCK:2048,IRT_TYPED_BARCODE_ZONE:4096,IRT_PREDETECTED_QUADRILATERAL:8192},Z.DBR.EnumLocalizationMode={LM_SKIP:0,LM_AUTO:1,LM_CONNECTED_BLOCKS:2,LM_LINES:8,LM_STATISTICS:4,LM_SCAN_DIRECTLY:16,LM_STATISTICS_MARKS:32,LM_STATISTICS_POSTAL_CODE:64},Z.DBR.EnumPDFReadingMode={PDFRM_RASTER:1,PDFRM_AUTO:2,PDFRM_VECTOR:4},Z.DBR.EnumQRCodeErrorCorrectionLevel={QRECL_ERROR_CORRECTION_H:0,QRECL_ERROR_CORRECTION_L:1,QRECL_ERROR_CORRECTION_M:2,QRECL_ERROR_CORRECTION_Q:3},Z.DBR.EnumRegionPredetectionMode={RPM_AUTO:1,RPM_GENERAL:2,RPM_GENERAL_RGB_CONTRAST:4,RPM_GENERAL_GRAY_CONTRAST:8,RPM_GENERAL_HSV_CONTRAST:16,RPM_SKIP:0},Z.DBR.EnumResultCoordinateType={RCT_PIXEL:1,RCT_PERCENTAGE:2},Z.DBR.EnumResultType={RT_STANDARD_TEXT:0,RT_RAW_TEXT:1,RT_CANDIDATE_TEXT:2,RT_PARTIAL_TEXT:3},Z.DBR.EnumScaleUpMode={SUM_AUTO:1,SUM_LINEAR_INTERPOLATION:2,SUM_NEAREST_NEIGHBOUR_INTERPOLATION:4,SUM_SKIP:0},Z.DBR.EnumTerminatePhase={TP_REGION_PREDETECTED:1,TP_IMAGE_PREPROCESSED:2,TP_IMAGE_BINARIZED:4,TP_BARCODE_LOCALIZED:8,TP_BARCODE_TYPE_DETERMINED:16,TP_BARCODE_RECOGNIZED:32},Z.DBR.EnumTextAssistedCorrectionMode={TACM_AUTO:1,TACM_VERIFYING:2,TACM_VERIFYING_PATCHING:4,TACM_SKIP:0},Z.DBR.EnumTextFilterMode={TFM_AUTO:1,TFM_GENERAL_CONTOUR:2,TFM_SKIP:0},Z.DBR.EnumTextResultOrderMode={TROM_CONFIDENCE:1,TROM_POSITION:2,TROM_FORMAT:4,TROM_SKIP:0},Z.DBR.EnumTextureDetectionMode={TDM_AUTO:1,TDM_GENERAL_WIDTH_CONCENTRATION:2,TDM_SKIP:0}}(),Z.AddonReady((function(e,t){var n,r=Z.BarcodeReaderAddon;function i(e){return e&&e instanceof ArrayBuffer}r.Class=function(){function e(){this._runtimeSettings=null,this._initSettingsContent=null,this._tplContentArr=[],this.bWasm=!1}var t,n=Z.Lib;return e.prototype._decodeBlob=function(e,t){var n=this;return new Promise((function(t){if(!(e instanceof Blob))throw TypeError("'_decodeBlob(blob, templateName)': Type of 'blob' should be 'Blob'.");t()})).then((function(){return n._innerDecode(0,e,t)}))},e.prototype._decodeArrayBuffer=function(e,t){var n=this;return new Promise((function(t){if(!(e instanceof ArrayBuffer))throw TypeError("'_decodeBlob(arrayBuffer, templateName)': Type of 'arrayBuffer' should be 'ArrayBuffer'.");t()})).then((function(){return n._innerDecode(0,e,t)}))},e.prototype._decodeUint8Array=function(e,t){var n=this;return new Promise((function(t){if(!(e instanceof Uint8Array||q.Uint8ClampedArray&&e instanceof Uint8ClampedArray))throw TypeError("'_decodeBlob(uint8Array, templateName)': Type of 'uint8Array' should be 'Uint8Array'.");t()})).then((function(){return n._innerDecode(0,e,t)}))},e.prototype._decodeImage=function(e,t){var n=this;return new Promise((function(n){if(!(e instanceof HTMLImageElement))throw TypeError("'_decodeImage(image, templateName)': Type of 'image' should be 'HTMLImageElement'.");if(e.crossOrigin&&"anonymous"!=e.crossOrigin)throw"cors";t=t||"",n()})).then((function(){return"data:image/"==e.src.substring(0,11)?n._decodeBase64(e.src,t):n._decodeUrl(e.src,t).catch((function(i){return 3<=r.logLevel&&console&&console.warn&&(console.warn("'_decodeImage(image, templateName)': Image src not available. Use '_decodeCanvas' instead."),console.warn(i)),q.HTMLCanvasElement?((i=document.createElement("canvas")).width=e.naturalWidth,i.height=e.naturalHeight,i.getContext("2d").drawImage(e,0,0),n._decodeCanvas(i,t)):Promise.reject(Error("'_decodeImage(image, templateName)': Browser not support HTMLCanvasElement."))}))}))},e.prototype._decodeCanvas=function(e,t){var n=this;return new Promise((function(n){if(!(e instanceof HTMLCanvasElement))throw TypeError("'_decodeCanvas(canvas, templateName)': Type of 'canvas' should be 'HTMLCanvasElement'.");if(e.crossOrigin&&"anonymous"!=e.crossOrigin)throw"cors";t=t||"",e.toBlob?e.toBlob((function(e){n(e)})):e.msToBlob?e.msToBlob((function(e){n(e)})):n(e.toDataURL())})).then((function(r){return e.toBlob||e.msToBlob?n._decodeBlob(r,t):n._decodeBase64(r,t)}))},e.prototype._decodeVideo=function(e){var t,n=this,r=arguments;return new Promise((function(n){if(!(e instanceof HTMLVideoElement))throw TypeError("'_decodeVideo(video [ [, sx, sy, sWidth, sHeight], dWidth, dHeight] [, templateName] )': Type of 'video' should be 'HTMLVideoElement'.");if(e.crossOrigin&&"anonymous"!=e.crossOrigin)throw"cors";r.length<=2?(i=o=0,a=u=e.videoWidth,s=c=e.videoHeight):c=r.length<=4?(i=o=0,a=e.videoWidth,s=e.videoHeight,u=r[1],r[2]):(i=r[1],o=r[2],a=r[3],s=r[4],u=r[5],r[6]),t="string"==typeof r[r.length-1]?r[r.length-1]:"";var i,o,a,s,u,c,l=document.createElement("canvas");l.width=u,l.height=c,l.getContext("2d").drawImage(e,i,o,a,s,0,0,u,c),n(l)})).then((function(e){return n._decodeCanvas(e,t)}))},e.prototype._decodeBase64=e.prototype.decodeBase64String=function(e,t){var n=this;return new Promise((function(t){if(!("string"==typeof e||"object"==typeof e&&e instanceof String))throw TypeError("'decodeBase64(base64Str, templateName)': Type of 'base64Str' should be 'String'.");"data:image/"==e.substring(0,11)&&(e=e.substring(e.indexOf(",")+1)),t()})).then((function(){return n._innerDecode(1,e,t)}))},e.prototype._decodeUrl=function(e,t){var n=this;return e&&e.indexOf&&(0==e.indexOf("dwt://")||0==e.indexOf("dcs://"))?n._decodeDynamsoftServiceInnerUrl(e,t):r._wasmInstance?r._wasmInstance.decode(e):new Promise((function(n,i){var o;if(!("string"==typeof e||"object"==typeof e&&e instanceof String))throw TypeError("'_decodeUrl(url, templateName)': Type of 'url' should be 'String'.");t=t||"",r._activeXInstance?((o=new ActiveXObject("MSXML2.XMLHTTP")).open("GET",e,!0),o.overrideMimeType?o.overrideMimeType("text/plain; charset=x-user-defined"):o.setRequestHeader("Accept-Charset","x-user-defined"),o.onreadystatechange=function(){4==o.readyState&&n(new VBArray(o.responseBody).toArray())},o.send("")):((o=new XMLHttpRequest).open("GET",e,!0),o.responseType="arraybuffer",o.send(),o.onloadend=function(){n(this.response)},o.onerror=function(){i(Error(o.error))})})).then((function(e){return r._activeXInstance?n._activeXDecodeArray(e,t):n._decodeArrayBuffer(e,t)}))},e.prototype._decodeDynamsoftServiceInnerUrl=function(e,t){var n=this;return new Promise((function(t){if(!("string"==typeof e||"object"==typeof e&&e instanceof String))throw TypeError("'_decodeUrl(url, templateName)': Type of 'innerUrl' should be 'String'.");if(0!=e.indexOf("dwt://")&&0!=e.indexOf("dcs://"))throw TypeError("'_decodeDynamsoftServiceInnerUrl(innerUrl, templateName)': 'innerUrl' should start with 'dwt://' or 'dcs://'.");t()})).then((function(){return n._innerDecode(4e3,e,t)}))},e.prototype._activeXDecodeArray=function(e,t){var n=this;return new Promise((function(n,r){if(!(e instanceof Array))throw TypeError("'_activeXDecodeArray(array, templateName)': Type of 'array' should be 'Array'.");t=t||"";try{n(Z.Lib.btoa(String.fromCharCode.apply(String,e)))}catch(n){r(n)}})).then((function(e){return n._decodeBase64(e,t)}))},e.prototype._activeXDecodeHandle=function(e,t){var n=this;return new Promise((function(e){t=t||"",e()})).then((function(){return n._innerDecode(4001,e,t)}))},e.prototype._decode=e.prototype.decode=function(e,t){return r._activeXInstance?"string"==typeof e||e instanceof String?this._activeXDecodeHandle(e,t):Promise.reject(TypeError("'_decode(source, templateName)' in activeX: Type of 'source' should be 'String(partUrl)'.")):r._wasmInstance?r._wasmInstance.decode(e):q.Blob&&e instanceof Blob?this._decodeBlob(e,t):q.ArrayBuffer&&e instanceof ArrayBuffer?this._decodeArrayBuffer(e,t):q.Uint8Array&&e instanceof Uint8Array||q.Uint8ClampedArray&&e instanceof Uint8ClampedArray?this._decodeUint8Array(e,t):e instanceof Array?this._activeXDecodeArray(e,t):q.HTMLImageElement&&e instanceof HTMLImageElement?this._decodeImage(e,t):q.HTMLCanvasElement&&e instanceof HTMLCanvasElement?this._decodeCanvas(e,t):q.HTMLVideoElement&&e instanceof HTMLVideoElement?this._decodeVideo(e,t):isNaN(e)?"string"==typeof e||e instanceof String?"data:image/"==e.substring(0,11)?this._decodeBase64(e,t):this._decodeUrl(e,t):Promise.reject(TypeError("'_decode(source, templateName)' in H5: Type of 'source' should be 'Blob', 'ArrayBuffer', 'Uint8Array', 'HTMLImageElement', 'HTMLCanvasElement', 'HTMLVideoElement', 'String(base64 with image mime)' or 'String(url)'.")):this._activeXDecodeHandle(e,t)},e.prototype._innerServiceCmd=function(e,t){return new Promise((function(o,a){var s={method:"ReadBarcode",parameter:[Z.DWT.ProductKey,4002,"",""],updateSettings:e,initSettingsContent:t};r._activeXInstance?o(r._activeXInstance.Process(n.stringify(s),location.protocol+"//"+location.host)):(n.License.isLTS()?Z.DWT.lglic(Z.DWT.EnumInstance.dwt_desktop).then((function(e){return s.parameter.push(e.ar),s.parameter.push(e.cu),s.parameter.push(0),s.parameter.push(""),n.stringify(s)})):Promise.resolve(n.stringify(s))).then((function(e){return n.fetch(r._urlRoot+"ReadBarcode",{mode:"cors",method:"post",body:e,dataType:"arrayBuffer"})})).then((function(e){i(e)?o(String.fromCharCode.apply(null,new Uint8Array(e))):o(e)}),(function(e){var t="Init template & runtimeSettings failed.";e&&(t=[t," Http info: ",e.errorString," (",e.httpCode,")"].join("")),a(t)}))}))},e.prototype._innerDecode=function(e,o,a,s){var u=this;return u._runtimeSettings&&0==u._runtimeSettings.expectedBarcodesCount&&(u._runtimeSettings.expectedBarcodesCount=512),new Promise((function(c,l){function d(e,i,o){try{var a,s,u,d,h=t&&t(e);for(h&&h.textResults||l(new r.BarcodeReaderException(h.exception,h.description)),n.product.bHTML5Edition&&o&&o.config.data&&(a=n.parse(o.config.data),n.isArray(a.parameter)&&2<a.parameter.length&&4e3==a.parameter[1]&&(4<a.parameter.length&&a.parameter[4]?h.textResults.imageid=a.parameter[4]:0<=(d=(u=a.parameter[2]).indexOf("&index="))&&(h.textResults.imageid=u.substring(d+7,u.indexOf("&t="))))),s=0;s<h.textResults.length;s++){var g=h.textResults[s];g.BarcodeText=g.barcodeText,h.exception!=Z.DBR.EnumErrorCode.DBR_SUCCESS&&(g.exception=h.exception)}h.exception!=Z.DBR.EnumErrorCode.DBR_SUCCESS&&(h.textResults.exception=h.exception,h.textResults.description=h.description),r._activeXInstance&&h.records&&(Z.Lib.each(h.records,(function(e,t){Z.DWT.lavrf(t,e,Z.DWT.EnumInstance.dwt_desktop)})),Z.DWT.lavrf_(1,Z.DWT.EnumInstance.dwt_desktop)),c(h.textResults)}catch(e){l(e)}}var h,g={method:"ReadBarcode",parameter:[Z.DWT.ProductKey,e,0!=e?o:null,a||""],updateSettings:u._runtimeSettings,conflictMode:1==u.conflictMode?"ignore":"overwrite",initSettingsContent:u._initSettingsContent,tplContent:function(){if(a)for(var e=0;e<u._tplContentArr.length;++e)if(a==u._tplContentArr[e].ImageParameter.Name)return n.stringify(u._tplContentArr[e]);return null}()};r._activeXInstance?n.License.isLTS()?Z.DWT.lglic(Z.DWT.EnumInstance.dwt_desktop).then((function(e){g.parameter.push(e.ar),g.parameter.push(e.cu),g.parameter.push(0),g.parameter.push(""),d(r._activeXInstance.Process(n.stringify(g),location.protocol+"//"+location.host))})):d(r._activeXInstance.Process(n.stringify(g),location.protocol+"//"+location.host)):(h=r._urlRoot+"ReadBarcode",0==e&&(h+="/LoadZipFromBytes?cmd="+encodeURIComponent(n.stringify(g))),(0==e?Promise.resolve(o):n.License.isLTS()?Z.DWT.lglic(Z.DWT.EnumInstance.dwt_desktop).then((function(e){return g.parameter.push(e.ar),g.parameter.push(e.cu),g.parameter.push(0),g.parameter.push([n.product.getDWTPrefix(),n.product.getServerVersionInfo(),"/verify?id=",s,"&t=",n.getRandom()].join("")),n.stringify(g)})):Promise.resolve(n.stringify(g))).then((function(e){return n.fetch(h,{mode:"cors",method:"post",body:e,dataType:"arrayBuffer"})})).then((function(e,t,n){i(e)?d(String.fromCharCode.apply(null,new Uint8Array(e)),0,n):d(e,0,n)}),(function(e){var t="ReadBarcode request fail.";e&&(t=[t," Http info: ",e.errorString," (",e.httpCode,")"].join("")),l(Error(t))})))}))},t=r._handleRetJsonString=function(t){var i;if("string"==typeof t||"object"==typeof t&&t instanceof String)try{i=n.parse(t)}catch(e){i=n.parse(r.RemoveNonPrintableChar(t))}else i=t;if(!i)throw r.BarcodeReaderException(Z.DBR.EnumErrorCode.DBR_UNKNOWN,r.errors.decodeResultEmpty);if("textResults"in i&&n.isArray(i.textResults)||i.exception==Z.DBR.EnumErrorCode.DBR_SUCCESS)return i;throw r.BarcodeReaderException(i.exception,i.description)},e.prototype.getAllParameterTemplateNames=function(){for(var e=[],t=0;t<this._tplContentArr.length;++t)e.push(this._tplContentArr[t].ImageParameter.Name);return e},e.prototype.getRuntimeSettings=function(){return this.bWasm?r._wasmInstance.getRuntimeSettings():(this._runtimeSettings||(this._runtimeSettings=n.parse(r._defaultRuntimeSettingsStr)),Promise.resolve(this._runtimeSettings))},e.prototype.updateRuntimeSettings=function(e){var t,i=this;if("string"==typeof e||"object"==typeof e&&e instanceof String){if("speed"==e||"balance"==e||"coverage"==e||"default"==e)return i.initRuntimeSettingsWithString("speed"==e?'{"ImageParameter":{"AccompanyingTextRecognitionModes":[{"Mode":"ATRM_SKIP"}],"BarcodeColourModes":[{"LightReflection":1,"Mode":"BICM_DARK_ON_LIGHT"}],"BarcodeComplementModes":[{"Mode":"BCM_SKIP"}],"BarcodeFormatIds":["BF_ALL"],"BarcodeFormatIds_2":["BF2_POSTALCODE","BF2_DOTCODE"],"BinarizationModes":[{"BlockSizeX":0,"BlockSizeY":0,"EnableFillBinaryVacancy":1,"ImagePreprocessingModesIndex":-1,"Mode":"BM_LOCAL_BLOCK","ThreshValueCoefficient":10}],"ColourClusteringModes":[{"Mode":"CCM_SKIP"}],"ColourConversionModes":[{"BlueChannelWeight":-1,"GreenChannelWeight":-1,"Mode":"CICM_GENERAL","RedChannelWeight":-1}],"DPMCodeReadingModes":[{"Mode":"DPMCRM_SKIP"}],"DeblurLevel":3,"DeformationResistingModes":[{"Mode":"DRM_SKIP"}],"Description":"","ExpectedBarcodesCount":512,"FormatSpecificationNameArray":null,"GrayscaleTransformationModes":[{"Mode":"GTM_ORIGINAL"}],"ImagePreprocessingModes":[{"Mode":"IPM_GENERAL"}],"IntermediateResultSavingMode":{"Mode":"IRSM_MEMORY"},"IntermediateResultTypes":["IRT_NO_RESULT"],"LocalizationModes":[{"Mode":"LM_CONNECTED_BLOCKS"},{"Mode":"LM_STATISTICS_MARKS"},{"Mode":"LM_STATISTICS_POSTAL_CODE"}],"MaxAlgorithmThreadCount":4,"Name":"bestSpeed","PDFRasterDPI":300,"PDFReadingMode":{"Mode":"PDFRM_AUTO"},"Pages":"","RegionDefinitionNameArray":null,"RegionPredetectionModes":[{"Mode":"RPM_GENERAL"}],"ResultCoordinateType":"RCT_PIXEL","ReturnBarcodeZoneClarity":0,"ScaleDownThreshold":2300,"ScaleUpModes":[{"Mode":"SUM_AUTO"}],"TerminatePhase":"TP_BARCODE_RECOGNIZED","TextAssistedCorrectionMode":{"BottomTextPercentageSize":0,"LeftTextPercentageSize":0,"Mode":"TACM_VERIFYING","RightTextPercentageSize":0,"TopTextPercentageSize":0},"TextFilterModes":[{"Mode":"TFM_SKIP"}],"TextResultOrderModes":[{"Mode":"TROM_CONFIDENCE"},{"Mode":"TROM_POSITION"},{"Mode":"TROM_FORMAT"}],"TextureDetectionModes":[{"Mode":"TDM_GENERAL_WIDTH_CONCENTRATION","Sensitivity":5}],"Timeout":10000},"Version":"3.0"}':"balance"==e?'{"ImageParameter":{"AccompanyingTextRecognitionModes":[{"Mode":"ATRM_SKIP"}],"BarcodeColourModes":[{"LightReflection":1,"Mode":"BICM_DARK_ON_LIGHT"}],"BarcodeComplementModes":[{"Mode":"BCM_SKIP"}],"BarcodeFormatIds":["BF_ALL"],"BarcodeFormatIds_2":["BF2_POSTALCODE","BF2_DOTCODE"],"BinarizationModes":[{"BlockSizeX":0,"BlockSizeY":0,"EnableFillBinaryVacancy":1,"ImagePreprocessingModesIndex":-1,"Mode":"BM_LOCAL_BLOCK","ThreshValueCoefficient":10}],"ColourClusteringModes":[{"Mode":"CCM_SKIP"}],"ColourConversionModes":[{"BlueChannelWeight":-1,"GreenChannelWeight":-1,"Mode":"CICM_GENERAL","RedChannelWeight":-1}],"DPMCodeReadingModes":[{"Mode":"DPMCRM_SKIP"}],"DeblurLevel":5,"DeformationResistingModes":[{"Mode":"DRM_SKIP"}],"Description":"","ExpectedBarcodesCount":512,"FormatSpecificationNameArray":null,"GrayscaleTransformationModes":[{"Mode":"GTM_ORIGINAL"}],"ImagePreprocessingModes":[{"Mode":"IPM_GENERAL"}],"IntermediateResultSavingMode":{"Mode":"IRSM_MEMORY"},"IntermediateResultTypes":["IRT_NO_RESULT"],"LocalizationModes":[{"Mode":"LM_CONNECTED_BLOCKS"},{"Mode":"LM_STATISTICS"},{"Mode":"LM_STATISTICS_MARKS"},{"Mode":"LM_STATISTICS_POSTAL_CODE"}],"MaxAlgorithmThreadCount":4,"Name":"balance","PDFRasterDPI":300,"PDFReadingMode":{"Mode":"PDFRM_AUTO"},"Pages":"","RegionDefinitionNameArray":null,"RegionPredetectionModes":[{"Mode":"RPM_GENERAL"}],"ResultCoordinateType":"RCT_PIXEL","ReturnBarcodeZoneClarity":0,"ScaleDownThreshold":2300,"ScaleUpModes":[{"Mode":"SUM_AUTO"}],"TerminatePhase":"TP_BARCODE_RECOGNIZED","TextAssistedCorrectionMode":{"BottomTextPercentageSize":0,"LeftTextPercentageSize":0,"Mode":"TACM_VERIFYING","RightTextPercentageSize":0,"TopTextPercentageSize":0},"TextFilterModes":[{"MinImageDimension":65536,"Mode":"TFM_GENERAL_CONTOUR","Sensitivity":0}],"TextResultOrderModes":[{"Mode":"TROM_CONFIDENCE"},{"Mode":"TROM_POSITION"},{"Mode":"TROM_FORMAT"}],"TextureDetectionModes":[{"Mode":"TDM_GENERAL_WIDTH_CONCENTRATION","Sensitivity":5}],"Timeout":10000},"Version":"3.0"}':"coverage"==e?'{"ImageParameter":{"AccompanyingTextRecognitionModes":[{"Mode":"ATRM_SKIP"}],"BarcodeColourModes":[{"LightReflection":1,"Mode":"BICM_DARK_ON_LIGHT"}],"BarcodeComplementModes":[{"Mode":"BCM_SKIP"}],"BarcodeFormatIds":["BF_ALL"],"BarcodeFormatIds_2":["BF2_POSTALCODE","BF2_DOTCODE"],"BinarizationModes":[{"BlockSizeX":0,"BlockSizeY":0,"EnableFillBinaryVacancy":1,"ImagePreprocessingModesIndex":-1,"Mode":"BM_LOCAL_BLOCK","ThreshValueCoefficient":10}],"ColourClusteringModes":[{"Mode":"CCM_SKIP"}],"ColourConversionModes":[{"BlueChannelWeight":-1,"GreenChannelWeight":-1,"Mode":"CICM_GENERAL","RedChannelWeight":-1}],"DPMCodeReadingModes":[{"Mode":"DPMCRM_SKIP"}],"DeblurLevel":9,"DeformationResistingModes":[{"Mode":"DRM_SKIP"}],"Description":"","ExpectedBarcodesCount":512,"FormatSpecificationNameArray":null,"GrayscaleTransformationModes":[{"Mode":"GTM_ORIGINAL"},{"Mode":"GTM_INVERTED"}],"ImagePreprocessingModes":[{"Mode":"IPM_GENERAL"}],"IntermediateResultSavingMode":{"Mode":"IRSM_MEMORY"},"IntermediateResultTypes":["IRT_NO_RESULT"],"LocalizationModes":[{"Mode":"LM_CONNECTED_BLOCKS"},{"Mode":"LM_SCAN_DIRECTLY","ScanDirection":0,"ScanStride":0},{"Mode":"LM_STATISTICS"},{"Mode":"LM_LINES"},{"Mode":"LM_STATISTICS_MARKS"},{"Mode":"LM_STATISTICS_POSTAL_CODE"}],"MaxAlgorithmThreadCount":4,"Name":"coverage","PDFRasterDPI":300,"PDFReadingMode":{"Mode":"PDFRM_AUTO"},"Pages":"","RegionDefinitionNameArray":null,"RegionPredetectionModes":[{"Mode":"RPM_GENERAL"}],"ResultCoordinateType":"RCT_PIXEL","ReturnBarcodeZoneClarity":0,"ScaleDownThreshold":214748347,"ScaleUpModes":[{"Mode":"SUM_AUTO"}],"TerminatePhase":"TP_BARCODE_RECOGNIZED","TextAssistedCorrectionMode":{"BottomTextPercentageSize":0,"LeftTextPercentageSize":0,"Mode":"TACM_VERIFYING","RightTextPercentageSize":0,"TopTextPercentageSize":0},"TextFilterModes":[{"MinImageDimension":65536,"Mode":"TFM_GENERAL_CONTOUR","Sensitivity":0}],"TextResultOrderModes":[{"Mode":"TROM_CONFIDENCE"},{"Mode":"TROM_POSITION"},{"Mode":"TROM_FORMAT"}],"TextureDetectionModes":[{"Mode":"TDM_GENERAL_WIDTH_CONCENTRATION","Sensitivity":5}],"Timeout":10000},"Version":"3.0"}':'{"ImageParameter":{"AccompanyingTextRecognitionModes":[{"Mode":"ATRM_SKIP"}],"BarcodeColourModes":[{"LightReflection":1,"Mode":"BICM_DARK_ON_LIGHT"}],"BarcodeComplementModes":[{"Mode":"BCM_SKIP"}],"BarcodeFormatIds":["BF_ALL"],"BarcodeFormatIds_2":null,"BinarizationModes":[{"BlockSizeX":0,"BlockSizeY":0,"EnableFillBinaryVacancy":1,"ImagePreprocessingModesIndex":-1,"Mode":"BM_LOCAL_BLOCK","ThreshValueCoefficient":10}],"ColourClusteringModes":[{"Mode":"CCM_SKIP"}],"ColourConversionModes":[{"BlueChannelWeight":-1,"GreenChannelWeight":-1,"Mode":"CICM_GENERAL","RedChannelWeight":-1}],"DPMCodeReadingModes":[{"Mode":"DPMCRM_SKIP"}],"DeblurLevel":9,"DeformationResistingModes":[{"Mode":"DRM_SKIP"}],"Description":"","ExpectedBarcodesCount":512,"FormatSpecificationNameArray":null,"GrayscaleTransformationModes":[{"Mode":"GTM_ORIGINAL"}],"ImagePreprocessingModes":[{"Mode":"IPM_GENERAL"}],"IntermediateResultSavingMode":{"Mode":"IRSM_MEMORY"},"IntermediateResultTypes":["IRT_NO_RESULT"],"LocalizationModes":[{"Mode":"LM_CONNECTED_BLOCKS"},{"Mode":"LM_SCAN_DIRECTLY","ScanDirection":0,"ScanStride":0},{"Mode":"LM_STATISTICS"},{"Mode":"LM_LINES"}],"MaxAlgorithmThreadCount":4,"Name":"default","PDFRasterDPI":300,"PDFReadingMode":{"Mode":"PDFRM_AUTO"},"Pages":"","RegionDefinitionNameArray":null,"RegionPredetectionModes":[{"Mode":"RPM_GENERAL"}],"ResultCoordinateType":"RCT_PIXEL","ReturnBarcodeZoneClarity":0,"ScaleDownThreshold":2300,"ScaleUpModes":[{"Mode":"SUM_AUTO"}],"TerminatePhase":"TP_BARCODE_RECOGNIZED","TextAssistedCorrectionMode":{"BottomTextPercentageSize":0,"LeftTextPercentageSize":0,"Mode":"TACM_VERIFYING","RightTextPercentageSize":0,"TopTextPercentageSize":0},"TextFilterModes":[{"MinImageDimension":65536,"Mode":"TFM_GENERAL_CONTOUR","Sensitivity":0}],"TextResultOrderModes":[{"Mode":"TROM_CONFIDENCE"},{"Mode":"TROM_POSITION"},{"Mode":"TROM_FORMAT"}],"TextureDetectionModes":[{"Mode":"TDM_GENERAL_WIDTH_CONCENTRATION","Sensitivity":5}],"Timeout":10000},"Version":"3.0"}');t=e}else{if("object"!=typeof e)throw TypeError("'setTemplateSettings(settings)': Type of 'settings' should be 'String' or 'PlainObject'.");t=n.stringify(e)}return e=n.parse(t),i.bWasm?r._wasmInstance.updateRuntimeSettings(e).then((function(){return r._wasmInstance.getRuntimeSettings()})):(i._runtimeSettings=e,i._initSettingsContent=null,i._innerServiceCmd(i._runtimeSettings,null).then((function(e){return e=r._handleRetJsonString(e),i._runtimeSettings=e.settings,i._runtimeSettings||(i._runtimeSettings=n.parse(r._defaultRuntimeSettingsStr)),e.settings})))},e.prototype.resetRuntimeSettings=function(){var e=this;return e.bWasm?r._wasmInstance.resetRuntimeSettings().then((function(){return r._wasmInstance.getRuntimeSettings()})):(e._runtimeSettings=n.parse(r._defaultRuntimeSettingsStr),e._initSettingsContent=null,e._innerServiceCmd(e._runtimeSettings,null).then((function(t){return t=r._handleRetJsonString(t),e._runtimeSettings=t.settings,e._runtimeSettings||(e._runtimeSettings=n.parse(r._defaultRuntimeSettingsStr)),t.settings})))},e.prototype.outputSettingsToString=function(e){if(!e)return r._defaultTemplateStr;for(var t=0;t<this._tplContentArr.length;++t)if(e==this._tplContentArr[t].ImageParameter.Name)return n.stringify(this._tplContentArr[t])},e.prototype.initRuntimeSettingsWithString=function(e){var t=this;if(n.isString(e))return t.bWasm?r._wasmInstance.initRuntimeSettingsWithString(e).then((function(){return r._wasmInstance.getRuntimeSettings()})):(t._runtimeSettings=null,t._initSettingsContent=n.parse(e),t._innerServiceCmd(null,t._initSettingsContent).then((function(e){return e=r._handleRetJsonString(e),t._runtimeSettings=e.settings,t._runtimeSettings||(t._runtimeSettings=n.parse(r._defaultRuntimeSettingsStr)),e.settings})));throw TypeError("'initRuntimeSettingsWithString(settings)': Type of 'settings' should be 'String'.")},e}(),r._dbr=!1,r._initH5=function(t,n){return new Promise((function(t,n){r._urlRoot=Z.dcp._getPreUrl(Z.dcp.detect.curPortIndex)+"dcp/dbr_"+r.Version.replace(/\./g,"")+"/";var i=5,o={method:"POST",url:r._urlRoot+"VersionInfo?t="+e.getRandom(),data:'{"method":"VersionInfo"}',onSuccess:function(){t()},onError:function(){if(--i<=0)return n("Failed to connect to the Barcode Reader Add-on, the library may be missing in the Dynamsoft Service directory.");setTimeout((function(){e.ajax(o)}),300)},dataType:"json",async:!0,timeout:800};e.ajax(o)})).then((function(){return r._dbr=new r.Class,r._dbr._innerServiceCmd(null,null)})).then((function(i){try{var o=r._handleRetJsonString(i);r._dbr._runtimeSettings=o.settings,r._defaultRuntimeSettingsStr=e.stringify(o.settings),r._defaultTemplateStr=e.stringify(o.outputSettings),t(r._dbr)}catch(i){n(Error("Init template & runtimeSettings failed: "+i.message)||i)}}),(function(e){n(e)}))},r.dbrInitPromiseFun=function(t,n){function r(){Z.DBR&&Z.DBR.BarcodeReader&&Z.DBR.BarcodeReader.createInstance&&Z.DBR.BarcodeReader.createInstance().then((function(e){return Z.DBR.EnumErrorCode.DMERR_FAILED_TO_REACH_LTS==Z.DBR.BarcodeReader.lastErrorCode&&(Z.DWT.licenseException.code=Z.DBR.BarcodeReader.lastErrorCode,Z.DWT.licenseException.message=Z.DBR.BarcodeReader.lastErrorString),Z.DBR.BarcodeReader._bNeverShowDialog=!0,Z.DWT.dbrCanvasMaxWH&&(e._canvasMaxWH=Z.DWT.dbrCanvasMaxWH),(u._wasmInstance=e).getRuntimeSettings()})).then((function(n){u._dbr._runtimeSettings=n,u._defaultRuntimeSettingsStr=e.stringify(n),t(u._dbr)}),n)}var i,o,a,s,u=Z.BarcodeReaderAddon;u._dbr?u._dbr.bWasm&&!u._wasmInstance?r():t(u._dbr):(i=Z.Lib.timestamp,s=Z.DWT.ResourcesPath,a=function(){var i;if(o)return Z.DBR&&Z.DBR.BarcodeReader||Z.BarcodeReader||window.DSBarcodeReader&&window.DSBarcodeReader.BarcodeReader?(Z.DBR||(Z.BarcodeReader?Z.DBR={BarcodeReader:Z.BarcodeReader}:window.DSBarcodeReader&&window.DSBarcodeReader.BarcodeReader&&(Z.DBR={BarcodeReader:window.DSBarcodeReader.BarcodeReader})),Z.DBR.BarcodeReader.engineResourcePath=Z.DWT.ResourcesPath+"/addon/dbrjs/",e.isString(Z.DWT.sessionPassword)&&(Z.DBR.BarcodeReader.sessionPassword=Z.DWT.sessionPassword),e.isArray(Z.DWT.licenseServer)&&(Z.DBR.BarcodeReader.licenseServer=Z.DWT.licenseServer),e.isString(Z.DWT.handshakeCode)?Z.DBR.BarcodeReader.handshakeCode=Z.DWT.handshakeCode:e.isString(Z.DWT.organizationID)?Z.DBR.BarcodeReader.organizationID=Z.DWT.organizationID:e.isString(Z.DWT.ProductKey)&&(i=Z.DWT.ProductKey,""!=Z.DWT.ProductKey&&"f"!=(a=Z.DWT.ProductKey.charAt(0))&&"t"!=a&&(s=i,i=void 0),Z.DBR.BarcodeReader.organizationID=s,Z.DBR.BarcodeReader.productKeys=i),e.showLoadingMsg(-1,"",Z.MSG.Init_CompilingWasm),Z.DBR.BarcodeReader._bUseFullFeature=!0,Z.DBR.BarcodeReader._bNeverShowDialog=!0,u._dbr=new u.Class,u._dbr.bWasm=!0,void r()):void 0;if(e.product.bHTML5Edition)u._initH5(t,n);else{var a=Z.navInfoSync,s={method:"ReadBarcode",parameter:[Z.DWT.ProductKey,4002,"",""]};if(!a.bIE)return n(Error("The DBR init error."));try{u._activeXInstance=new ActiveXObject("DBRModule.AtlDBR");var c=u._activeXInstance.Process(e.stringify(s),location.protocol+"//"+location.host),l=e.parse(c);if(!l)return n(Error("The DBR init error."));if(!("settings"in l))return n(Error(l.description||"The DBR init error."));u._dbr=new u.Class,u._dbr._runtimeSettings=l.settings,u._defaultRuntimeSettingsStr=e.stringify(l.settings),"outputSettings"in l&&(u._defaultTemplateStr=e.stringify(l.outputSettings)),t(u._dbr)}catch(i){return n(Error("The DBR .dll is missing or not accessible: "+(i.message||i)))}}},!(o=!Z.navInfo.bWin||e.product.bHTML5Edition&&(!Z.DWT.UseLocalService||e.env.bMobile||Z.DWT.UseBarcodeAddonWasm))||e.detect.dbrwasmScriptLoaded?a():function(){try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){var e=new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0]));if(e instanceof WebAssembly.Module)return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}catch(e){}}()?(s=e.getScript([s,"/addon/dbrjs/dbr.js",i].join(""),!0,(function(t){e.detect.dbrwasmScriptLoaded=!0,a()})),e.isString(Z.DWT.handshakeCode)?s.setAttribute("data-productKeys",Z.DWT.handshakeCode):e.isString(Z.DWT.organizationID)?s.setAttribute("data-organizationID",Z.DWT.organizationID):e.isString(Z.DWT.ProductKey)&&s.setAttribute("data-productKeys",Z.DWT.ProductKey)):n(Error(Z.MSG.Err_BrowserNotSupportWasm)))},e.DynamicLoadAddonFuns&&e.DynamicLoadAddonFuns.push((function(t){var i;n=Z.dcp.b64bit?"dbrx64_"+Z.BarcodeReaderAddon.Version+".dll":"dbr_"+Z.BarcodeReaderAddon.Version+".dll",e.product.bHTML5Edition&&!t._isMobileMode()&&t._innerSend("GetAddOnVersion",e.html5.Funs.makeParams("barcodereader",n),!0,!1,!1),i={BarcodeReader:{decode:function(n){return e.License.checkProductKey(t,{Core:!0})?!e.isNumber(n)||n<0||n>=t.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(t),Promise.reject(r.BarcodeReaderException(t._errorCode,t._errorString))):new Promise((function(e){r._decoding?r._decodeQueue.push({method:e,args:[n]}):(r._decoding=!0,e(n))})).then((function(n){var i;if(e.product.bHTML5Edition){if(-1==(i=t._ImgManager.convertClientIndexToServerId(n)))throw e.Errors.IndexOutOfRange(t),setTimeout(r._decodeNext,0),r.BarcodeReaderException(t._errorCode,t._errorString)}else i=n;return new Promise((function(n,o){r.dbrInitPromiseFun((function(a){var s,u;if(!a.bWasm)return e.product.bHTML5Edition?a.bWasm?void 0:(s=t._ImgManager.convertServerIdToClientIndex(i),u=t.GetImagePartURL(s,-1,-1),a._innerDecode(4e3,u,"",t.clientId).then((function(i){i.imageid=t.IndexToImageID(s),setTimeout(r._decodeNext,0),n(i),e.License.isLTS()&&Z.DWT.lcvrf(t)}),(function(e){setTimeout(r._decodeNext,0),o(e)}))):(u=t.GetImagePartURL(s=i,-1,-1),a._innerDecode(4001,u,"").then((function(e){e.imageid=t.IndexToImageID(s),setTimeout(r._decodeNext,0),n(e)}),(function(e){setTimeout(r._decodeNext,0),o(e)})));u=(u=a.getRuntimeSettings()).then((function(e){if(0==e.expectedBarcodesCount)return e.expectedBarcodesCount=512,a.updateRuntimeSettings(e)})),(u=(u=t._isMobileMode()?(u=u.then((function(){var e=t._ImgManager.convertServerIdToClientIndex(i);return t._ImgManager.getWebViewer().GetImageData(t._ImgManager.getUidByIndex(e))}))).then((function(e){return e.oriData||e.originalData})):u.then((function(){var e=t._ImgManager.convertServerIdToClientIndex(i);return t.GetImageURL(e,-1,-1)}))).then((function(t){return t instanceof Blob||t instanceof ArrayBuffer?r._wasmInstance.decode(t):e.fetch(t,{mode:"cors",dataType:"blob"}).then((function(e){return r._wasmInstance.decode(e)}))}))).then((function(e){e.imageid=t.objImageIndexManager.convertServerIdToGuid(i),setTimeout(r._decodeNext,0),n(e)}),(function(e){var t="decode failed.";e&&(t=[t," ",e.errorString," (",e.httpCode,")"].join("")),setTimeout(r._decodeNext,0),o(Error(t))}))}),(function(e){setTimeout(r._decodeNext,0),o(e)}))}))})):Promise.reject(r.BarcodeReaderException(t._errorCode,t._errorString))},resetRuntimeSettings:function(){return e.License.checkProductKey(t,{Core:!0})?new Promise(r.dbrInitPromiseFun).then((function(e){return e.resetRuntimeSettings()})):Promise.reject(r.BarcodeReaderException(t._errorCode,t._errorString))},getRuntimeSettings:function(n){return e.License.checkProductKey(t,{Core:!0})?!e.isString(n)||"speed"!=n&&"balance"!=n&&"coverage"!=n&&"default"!=n?new Promise(r.dbrInitPromiseFun).then((function(e){return e.getRuntimeSettings()})):this.updateRuntimeSettings(n):Promise.reject(r.BarcodeReaderException(t._errorCode,t._errorString))},updateRuntimeSettings:function(n){return e.License.checkProductKey(t,{Core:!0})?new Promise(r.dbrInitPromiseFun).then((function(e){return e.updateRuntimeSettings(n)})):Promise.reject(r.BarcodeReaderException(t._errorCode,t._errorString))},initRuntimeSettingsWithString:function(n){return e.License.checkProductKey(t,{Core:!0})?new Promise(r.dbrInitPromiseFun).then((function(e){return e.initRuntimeSettingsWithString(n)})):Promise.reject(r.BarcodeReaderException(t._errorCode,t._errorString))}}},e.product.bHTML5Edition?(t.__addon=t.__addon||{},e.mix(t.__addon,i)):(t.Addon=t.Addon||{},e.mix(t.Addon,i))})),Z.unloadQueue.push((function(){r._wasmInstance&&(r._wasmInstance.destroy(),r._wasmInstance=!1)}))})),(Z=q.Dynamsoft||{}).DWT=Z.DWT||{},Z.aryAddonReadyFun=Z.aryAddonReadyFun||[],Z.AddonReady=Z.AddonReady||function(e){Z.aryAddonReadyFun.push(e)},function(){for(var e=[Z.DWT],t=0;t<1;t++){var n=e[t];n.EnumDWT_ConvertMode={CM_RENDERALL:1,CM_IMAGEONLY:2,CM_AUTO:3,CM_RENDERALLWITHANNOTATION:4},n.EnumDWT_PDFCompressionType={PDF_AUTO:0,PDF_FAX3:1,PDF_FAX4:2,PDF_LZW:3,PDF_RLE:4,PDF_JPEG:5,PDF_JP2000:6,PDF_JBIG2:7}}}(),Z.AddonReady((function(e,t){var n;!e.product.bHTML5Edition||e.DynamicLoadAddonFuns&&e.DynamicLoadAddonFuns.push((function(t){var r,i=e.html5.Funs;n=e.env.bMac?Z.dcp.b64bit?"libDynamicPdfCorex64_"+Z.DWT.PdfVersion+".dylib":"libDynamicPdfCore_"+Z.DWT.PdfVersion+".dylib":e.env.bLinux?"libDynamicPdfCore_"+Z.DWT.PdfVersion+".so":Z.dcp.b64bit?"DynamicPdfCorex64_"+Z.DWT.PdfVersion+".dll":"DynamicPdfCore_"+Z.DWT.PdfVersion+".dll",t._isMobileMode()||t._innerSend("GetAddOnVersion",i.makeParams("pdf",n),!0,!1,!1),r={PDF:{IsModuleInstalled:function(){var e=t;return e._resetErr(),e._isMobileMode()?!!Z.pdf&&Z.pdf.IsModuleInstalled():""!=e._innerFun("GetAddOnVersion",i.makeParams("pdf",n))},IsModuleInstalledAsync:function(){var r=t;return r._resetErr(),r._isMobileMode()?e.Promise.resolve(!!Z.pdf&&Z.pdf.IsModuleInstalled()):r._innerFunV2("GetAddOnVersion",i.makeParams("pdf",n)).then((function(e){return""!=e}))},ConvertToImage:function(e,n,r,o){e=i.replaceLocalFilename(e);var a="ConvertPDFToImage",s=t;return s._resetErr(),s._isMobileMode()||(i.showMask(a),s._innerSend(a,i.makeParams(e,n),!0,(function(e){return i.hideMask(a),r&&r(),!0}),(function(e){return i.hideMask(a),o&&o(),!1}))),!0},SetPassword:function(e){var n=t;return n._resetErr(),n._isMobileMode()?(n._pdfPassword=e,!0):n._innerFun("SetPDFPassword",i.makeParams(e))},SetConvertMode:function(e){return t._setConvertMode(e)},SetConvertModeAsync:function(e){return t._setConvertModeAsync(e)},GetConvertMode:function(){var e=t;return e._resetErr(),e._pdfConvertMode},SetResolution:function(e){var n=t;return n._resetErr(),n._isMobileMode()?(n._pdfResolution=+e,!0):t._innerFun("SetPDFResolution",i.makeParams(e))},SetResolutionAsync:function(n){var r=t;return r._resetErr(),r._isMobileMode()?(r._pdfResolution=+n,e.Promise.resolve(!0)):t._innerFunV2("SetPDFResolution",i.makeParams(n))},IsTextBasedPDF:function(n,r,o){var a=t;return a._resetErr(),a._isMobileMode()?a._mobileNotSupport("IsTextBasedPDF",o):(n=i.replaceLocalFilename(n),n=t._innerFun("IsTextBasedPDF",i.makeParams(n)),0==a.ErrorCode?e.isFunction(r)&&r(n):e.isFunction(o)&&o(a.ErrorCode,a.ErrorString),n)},Write:{Setup:function(n){n=(n=n)||{version:15};var r=(2<e.stringify(n).length&&(e.isNumber(n.version)?1<=n.version&&n.version<2&&(n.version=parseInt(10*n.version)):n.version=15),e.isNumber(n.compression)&&n.compression==Z.DWT.EnumDWT_PDFCompressionType.PDF_FAX3&&(n.compression=Z.DWT.EnumDWT_PDFCompressionType.PDF_FAX4),t);return r._resetErr(),r._isMobileMode()?(r._pdfWriteSetting=n,!0):(n=e.stringify(n),n=e.replaceAll(n,'"','\\"'),r._innerFun("SetPDFSettings",['["',n,'"]'].join("")))}}}},t.__addon=t.__addon||{},e.mix(t.__addon,r)}))})),Z.AddonReady((function(e,t){!e.product.bActiveXEdition||e.DynamicLoadAddonFuns&&e.DynamicLoadAddonFuns.push((function(t){var n,r,i;if(!t.getSWebTwain()||!t.getSWebTwain().Addon)return!1;Z.navInfo.bWin&&(i=!Z.navInfo.bOSx64||Z.navInfo.bWOW64?"DynamicPdfCore_"+Z.DWT.PdfVersion+".dll":"DynamicPdfCorex64_"+Z.DWT.PdfVersion+".dll"),r=t.getSWebTwain(),n={PDF:{IsModuleInstalled:function(){var n=r.GetAddOnVersion("pdf",i);return e.setErrorString(t),""!=n},IsModuleInstalledAsync:function(){var n=r.GetAddOnVersion("pdf",i);return e.setErrorString(t),e.Promise.resolve(""!=n)},ConvertToImage:function(n,i,o,a){return n=r.ConvertPDFToImage(n,i),e.wrapperRet(t,n,o,a)},SetPassword:function(n){return n=r.SetPDFPassword(n),e.wrapperRet(t,n)},SetConvertMode:function(e){return t._setConvertMode(e)},SetConvertModeAsync:function(e){return Promise.resolve(t._setConvertMode(e))},GetConvertMode:function(){return t._resetErr(),t._pdfConvertMode},SetResolution:function(n){return n=r.SetPDFResolution(n),e.wrapperRet(t,n)},SetResolutionAsync:function(n){return n=r.SetPDFResolution(n),e.Promise.resolve(e.wrapperRet(t,n))},IsTextBasedPDF:function(n){return n=r.IsTextBasedPDF(n),e.wrapperRet(t,n)}}},t.Addon=t.Addon||{},e.mix(t.Addon,n)}))})),(Z=q.Dynamsoft||{}).DWT=Z.DWT||{},Z.aryAddonReadyFun=Z.aryAddonReadyFun||[],Z.AddonReady=Z.AddonReady||function(e){Z.aryAddonReadyFun.push(e)},Z.DWT.OCRVerInName="10.0.0.0618",function(e){for(var t=[Z.DWT],n=0;n<1;n++){var r=t[n];r.EnumDWT_OCRLanguage={OCRL_ENG:"eng",OCRL_ARA:"ara",OCRL_CHI_SIM:"chi_sim",OCRL_CHI_TRA:"chi_tra",OCRL_HIN:"hin",OCRL_URD:"urd",OCRL_SPA:"spa",OCRL_FRA:"fra",OCRL_MSA:"msa",OCRL_IND:"ind",OCRL_RUS:"rus",OCRL_BEN:"ben",OCRL_POR:"por",OCRL_PAN:"pan",OCRL_DEU:"deu",OCRL_JPN:"jpn",OCRL_FAS:"fas",OCRL_SWA:"swa",OCRL_JAV:"jav",OCRL_TEL:"tel",OCRL_TUR:"tur",OCRL_KOR:"kor",OCRL_MAR:"mar",OCRL_TAM:"tam",OCRL_VIE:"vie",OCRL_ITA:"ita",OCRL_THA:"tha"},r.EnumDWT_OCRPageSetMode={OCRPSM_OSD_ONLY:0,PSM_AUTO_OSD:1,PSM_AUTO_ONLY:2,PSM_AUTO:3,PSM_SINGLE_COLUMN:4,PSM_SINGLE_BLOCK_VERT_TEXT:5,PSM_SINGLE_BLOCK:6,PSM_SINGLE_LINE:7,PSM_SINGLE_WORD:8,PSM_CIRCLE_WORD:9,PSM_SINGLE_CHAR:10},r.EnumDWT_OCROutputFormat={OCROF_TEXT:0,OCROF_PDFPLAINTEXT:1,OCROF_PDFIMAGEOVERTEXT:2,OCROF_PDFPLAINTEXT_PDFX:3,OCROF_PDFIMAGEOVERTEXT_PDFX:4},r.EnumDWT_OCRDownloadType={OCRDT_Dll:0,OCRDT_LANGUAGE:1}}}("undefined"!=typeof window&&window),Z.DWT.OCRLanguageData_eng="4113088",Z.DWT.OCRLanguageData_ara="1432056",Z.DWT.OCRLanguageData_chi_sim="2469156",Z.DWT.OCRLanguageData_chi_tra="2366642",Z.DWT.OCRLanguageData_hin="1122751",Z.DWT.OCRLanguageData_urd="1398718",Z.DWT.OCRLanguageData_spa="2294433",Z.DWT.OCRLanguageData_fra="1130365",Z.DWT.OCRLanguageData_msa="1747801",Z.DWT.OCRLanguageData_ind="1122661",Z.DWT.OCRLanguageData_rus="3861738",Z.DWT.OCRLanguageData_ben="855841",Z.DWT.OCRLanguageData_por="1982756",Z.DWT.OCRLanguageData_pan="497721",Z.DWT.OCRLanguageData_deu="1525436",Z.DWT.OCRLanguageData_jpn="2471260",Z.DWT.OCRLanguageData_fas="431500",Z.DWT.OCRLanguageData_swa="2167651",Z.DWT.OCRLanguageData_jav="2982741",Z.DWT.OCRLanguageData_tel="2769654",Z.DWT.OCRLanguageData_tur="4550554",Z.DWT.OCRLanguageData_kor="1677415",Z.DWT.OCRLanguageData_mar="2118233",Z.DWT.OCRLanguageData_tam="3237963",Z.DWT.OCRLanguageData_vie="531275",Z.DWT.OCRLanguageData_ita="2701314",Z.DWT.OCRLanguageData_tha="1072600",Z.DWT.OCRLanguageData={},Z.DWT.OCRLanguageData[Z.DWT.EnumDWT_OCRLanguage.OCRL_ENG]=Z.DWT.OCRLanguageData_eng,Z.DWT.OCRLanguageData[Z.DWT.EnumDWT_OCRLanguage.OCRL_ARA]=Z.DWT.OCRLanguageData_ara,Z.DWT.OCRLanguageData[Z.DWT.EnumDWT_OCRLanguage.OCRL_CHI_TRA]=Z.DWT.OCRLanguageData_chi_tra,Z.DWT.OCRLanguageData[Z.DWT.EnumDWT_OCRLanguage.OCRL_CHI_SIM]=Z.DWT.OCRLanguageData_chi_sim,Z.DWT.OCRLanguageData[Z.DWT.EnumDWT_OCRLanguage.OCRL_HIN]=Z.DWT.OCRLanguageData_hin,Z.DWT.OCRLanguageData[Z.DWT.EnumDWT_OCRLanguage.OCRL_URD]=Z.DWT.OCRLanguageData_urd,Z.DWT.OCRLanguageData[Z.DWT.EnumDWT_OCRLanguage.OCRL_SPA]=Z.DWT.OCRLanguageData_spa,Z.DWT.OCRLanguageData[Z.DWT.EnumDWT_OCRLanguage.OCRL_FRA]=Z.DWT.OCRLanguageData_fra,Z.DWT.OCRLanguageData[Z.DWT.EnumDWT_OCRLanguage.OCRL_MSA]=Z.DWT.OCRLanguageData_msa,Z.DWT.OCRLanguageData[Z.DWT.EnumDWT_OCRLanguage.OCRL_IND]=Z.DWT.OCRLanguageData_ind,Z.DWT.OCRLanguageData[Z.DWT.EnumDWT_OCRLanguage.OCRL_RUS]=Z.DWT.OCRLanguageData_rus,Z.DWT.OCRLanguageData[Z.DWT.EnumDWT_OCRLanguage.OCRL_BEN]=Z.DWT.OCRLanguageData_ben,Z.DWT.OCRLanguageData[Z.DWT.EnumDWT_OCRLanguage.OCRL_POR]=Z.DWT.OCRLanguageData_por,Z.DWT.OCRLanguageData[Z.DWT.EnumDWT_OCRLanguage.OCRL_PAN]=Z.DWT.OCRLanguageData_pan,Z.DWT.OCRLanguageData[Z.DWT.EnumDWT_OCRLanguage.OCRL_DEU]=Z.DWT.OCRLanguageData_deu,Z.DWT.OCRLanguageData[Z.DWT.EnumDWT_OCRLanguage.OCRL_JPN]=Z.DWT.OCRLanguageData_jpn,Z.DWT.OCRLanguageData[Z.DWT.EnumDWT_OCRLanguage.OCRL_FAS]=Z.DWT.OCRLanguageData_fas,Z.DWT.OCRLanguageData[Z.DWT.EnumDWT_OCRLanguage.OCRL_SWA]=Z.DWT.OCRLanguageData_swa,Z.DWT.OCRLanguageData[Z.DWT.EnumDWT_OCRLanguage.OCRL_JAV]=Z.DWT.OCRLanguageData_jav,Z.DWT.OCRLanguageData[Z.DWT.EnumDWT_OCRLanguage.OCRL_TEL]=Z.DWT.OCRLanguageData_tel,Z.DWT.OCRLanguageData[Z.DWT.EnumDWT_OCRLanguage.OCRL_TUR]=Z.DWT.OCRLanguageData_tur,Z.DWT.OCRLanguageData[Z.DWT.EnumDWT_OCRLanguage.OCRL_KOR]=Z.DWT.OCRLanguageData_kor,Z.DWT.OCRLanguageData[Z.DWT.EnumDWT_OCRLanguage.OCRL_MAR]=Z.DWT.OCRLanguageData_mar,Z.DWT.OCRLanguageData[Z.DWT.EnumDWT_OCRLanguage.OCRL_TAM]=Z.DWT.OCRLanguageData_tam,Z.DWT.OCRLanguageData[Z.DWT.EnumDWT_OCRLanguage.OCRL_VIE]=Z.DWT.OCRLanguageData_vie,Z.DWT.OCRLanguageData[Z.DWT.EnumDWT_OCRLanguage.OCRL_ITA]=Z.DWT.OCRLanguageData_ita,Z.DWT.OCRLanguageData[Z.DWT.EnumDWT_OCRLanguage.OCRL_THA]=Z.DWT.OCRLanguageData_tha,function(e){function t(){var e=this;e._text="",e._fontName="",e._fontSize="",e._left=0,e._top=0,e._right=0,e._bottom=0}t.prototype.GetText=function(){return this._text},t.prototype.GetFontName=function(){return this._fontName},t.prototype.GetFontSize=function(){return this._fontSize},t.prototype.GetWordRect=function(){var e=this;return e._left+","+e._top+","+e._right+","+e._bottom},e.NewWordBasicResult=function(){return new t}}(Z.Lib),function(e){function t(){var e=this;e._count=0,e._left=0,e._top=0,e._right=0,e._bottom=0,e._wordlist=[]}t.prototype.GetWordCount=function(){return this._count},t.prototype.GetLineRect=function(){var e=this;return e._left+","+e._top+","+e._right+","+e._bottom},t.prototype.GetWordContent=function(e){var t=this;if(t._errorCode<0)return"";if(null==e||e>=t._wordlist.length||e<0)return Z.Lib.Errors.OCR_InvalidIndex(t,"GetWordContent"),"";var n=Z.Lib.NewWordBasicResult();return n._text=t._wordlist[e].text,n._fontName=t._wordlist[e].fontname,n._fontSize=t._wordlist[e].fontsize,n._left=t._wordlist[e].rect[0],n._top=t._wordlist[e].rect[1],n._right=t._wordlist[e].rect[2],n._bottom=t._wordlist[e].rect[3],n},e.NewLineBasicResult=function(){return new t}}(Z.Lib),function(e){function t(){this._count=0,this._linelist=[]}t.prototype.GetLineCount=function(){return this._count},t.prototype.GetLineContent=function(e){var t=this;if(t._errorCode<0)return"";if(null==e||e>=t._linelist.length||e<0)return Z.Lib.Errors.OCR_InvalidIndex(t,"GetLineContent"),"";var n=Z.Lib.NewLineBasicResult();return n._count=t._linelist[e].words.length,n._left=t._linelist[e].rect[0],n._top=t._linelist[e].rect[1],n._right=t._linelist[e].rect[2],n._bottom=t._linelist[e].rect[3],n._wordlist=t._linelist[e].words,n},e.NewPageBasicResult=function(){return new t}}(Z.Lib),function(e){function t(){this._count=0,this._pagelist=[]}t.prototype.GetPageCount=function(){return this._count},t.prototype.GetPageContent=function(e){var t=this;if(t._errorCode<0)return"";if(null==e||e>=t._pagelist.length||e<0)return Z.Lib.Errors.OCR_InvalidIndex(t,"GetPageContent"),"";var n=Z.Lib.NewPageBasicResult();return n._count=t._pagelist[e].lines.length,n._linelist=t._pagelist[e].lines,n},e.NewPageSetBasicResult=function(){return new t}}(Z.Lib),function(e){function t(e){var t=this;t._errorCode=0,t._errorString="",t._resultlist=[],t._stwain=e}t.prototype.GetErrorCode=function(){return this._errorCode},t.prototype.GetErrorString=function(){return this._errorString},t.prototype.GetFormat=function(){return this._resultlist[0].format},t.prototype.GetInput=function(){var e=this._resultlist[0].input;if(e){var t=Number(e);if(!isNaN(t))return this._stwain._ImgManager.convertServerIdToClientIndex(t)}return e},t.prototype.GetPageSetCount=function(){return this._resultlist[0].pagesets.length},t.prototype.GetPageSetContent=function(e){var t=this;if(t._errorCode<0)return"";if(null==e||e>=t._resultlist[0].pagesets.length||e<0)return Z.Lib.Errors.OCR_InvalidIndex(t,"GetPageSetContent"),"";var n=Z.Lib.NewPageSetBasicResult();return n._count=t._resultlist[0].pagesets[e].pages.length,n._pagelist=t._resultlist[0].pagesets[e].pages,n},t.prototype.Get=function(){return this._stwain._innerFun("GetOCRRestult")},t.prototype.Save=function(t){var n=e.html5.Funs.replaceLocalFilename(t);return this._stwain._innerFun("SaveOCRRestult",e.html5.Funs.makeParams(n))},e.NewOCRBasicResult=function(e){return new t(e)}}(Z.Lib),function(e){function t(){var e=this;e.UnicodeFontName="",e.UseDetectedFont=!0,e.MinFontSizeforMoreAccurateResult=0,e.OCRLanguage=Z.DWT.EnumDWT_OCRLanguage.OCRL_ENG,e.PageSetMode=Z.DWT.EnumDWT_OCRPageSetMode.PSM_AUTO,e.OutputFormat=Z.DWT.EnumDWT_OCROutputFormat.OCROF_PDFIMAGEOVERTEXT}t.prototype.GetUnicodeFontName=function(){return this.UnicodeFontName},t.prototype.SetUnicodeFontName=function(t){var n=t;return e.isString(n)||(n=""),this.UnicodeFontName=n,!0},t.prototype.GetUseDetectedFont=function(){return!!this.UseDetectedFont},t.prototype.SetUseDetectedFont=function(e){return this.UseDetectedFont=!!e,!0},t.prototype.GetMinFontSizeforMoreAccurateResult=function(){return this.MinFontSizeforMoreAccurateResult},t.prototype.SetMinFontSizeforMoreAccurateResult=function(e){var t=1*e;return t<0&&(t=0),this.MinFontSizeforMoreAccurateResult=t,!0},t.prototype.GetOCRLanguage=function(){return this.OCRLanguage},t.prototype.SetOCRLanguage=function(t){var n=t;return e.isString(n)||(n=""),this.OCRLanguage=n,!0},t.prototype.GetPageSetMode=function(){return this.PageSetMode},t.prototype.SetPageSetMode=function(e){var t=1*e;return(t<0||t>Z.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_CHAR)&&(t=Z.DWT.EnumDWT_OCRPageSetMode.PSM_AUTO),this.PageSetMode=t,!0},t.prototype.GetOutputFormat=function(){return this.OutputFormat},t.prototype.SetOutputFormat=function(e){var t=1*e;return(t<0||t>Z.DWT.EnumDWT_OCROutputFormat.OCROF_PDFIMAGEOVERTEXT_PDFX)&&(t=Z.DWT.EnumDWT_OCROutputFormat.OCROF_PDFIMAGEOVERTEXT),this.OutputFormat=t,!0},e.NewOptions=function(){return new t}}(Z.Lib),Z.AddonReady((function(e,t){var n;e.product.bHTML5Edition&&e.DynamicLoadAddonFuns&&e.DynamicLoadAddonFuns.push((function(t){var r,i=e.html5.Funs,o=e.NewOptions();!function(t){var r=e.html5.Funs;n=e.env.bMac?"DynamicOCR_"+Z.DWT.OCRVerInName+".dylib":e.env.bLinux?"DynamicOCR_"+Z.DWT.OCRVerInName+".so":Z.dcp.b64bit?"DynamicOCRx64_"+Z.DWT.OCRVerInName+".dll":"DynamicOCR_"+Z.DWT.OCRVerInName+".dll",t._isMobileMode()||t._innerSend("GetAddOnVersion",r.makeParams("ocr",n),!0,!1,!1),t.__innerOCRBasicReadFunction=function(t,n,r,i,o,a,s,u,c,l,d){return e.isFunction(l)?this.__innerOCRBasicAsyncReadFunction(t,n,r,i,o,a,s,u,c,l,d):this.__innerOCRSyncReadFunction(t,c)},t.__innerGetOCRBasicResultAsyncFunction=function(e){var t=Z.Lib.NewOCRBasicResult(this);return e&&(t._errorCode=e.exception,t._errorString=e.description,t._resultlist=e.result),t},t.__innerOCRBasicAsyncReadFunction=function(n,i,o,a,s,u,c,l,d,h,g){var f=this;return r.showMask(n),f._innerSend(n,d,!0,(function(d){if(0==d.exception){if(e.isFunction(h))if(-1!=i){var m=f.objImageIndexManager.convertServerIdToGuid(i);1==a?h(m,s,u,c,l,f.__innerGetOCRBasicResultAsyncFunction(d)):h(m,f.__innerGetOCRBasicResultAsyncFunction(d))}else""!=o?h(o,f.__innerGetOCRBasicResultAsyncFunction(d)):h(f.__innerGetOCRBasicResultAsyncFunction(d));e.License.isLTS()&&Z.DWT.lcvrf(t)}else e.isFunction(g)&&g(d.exception,d.description);r.hideMask(n)}),(function(e){r.hideMask(n)})),!0},t.__innerOCRSyncReadFunction=function(n,r){var i,o,a=this;return i=a._innerFunRaw(n,r,!1,!1),(o=e.NewOCRBasicResult())._errorCode=a._errorCode,o._errorString=a._errorString,i&&e.isArray(i)&&(o._resultlist=i,o._Count=i.length,e.License.isLTS()&&Z.DWT.lcvrf(t)),o},t.__IsOCRBasicModuleInstalled=function(){return""!=t._innerFun("GetAddOnVersion",r.makeParams("ocr",n)).split("|")[0]},t.__innerBasicDownload=function(i,o,a,s,u){var c=t;e.cancelFrome=2,i=i.toString();var l=function(){return e.isFunction(s)&&s(),!0},d=function(){return e.isFunction(u)&&u(c.ErrorCode,c.ErrorString),!1};if(!e.License.checkProductKey(c,{Core:!0}))return d();if(!e.License.checkProductKey(c,{OCR:!0},!0))return d();o!=Z.DWT.EnumDWT_OCRDownloadType.OCRDT_Dll&&c._innerFun("SetOCRLanguage",r.makeParams(a));var h=c._innerFun("GetAddOnVersion",r.makeParams("ocr",n)).split("|");if(o==Z.DWT.EnumDWT_OCRDownloadType.OCRDT_Dll){if(""!=h[0])return l(),!0}else{var g=Z.DWT.OCRLanguageData[a];if(g&&h[1]==g)return l(),!0}if(!i||""==i)return e.Errors.OCR_InvalidRemoteFilename(c),d(),!1;if(r.isServerInvalid(c))return d(),!1;e.showProgress(c,"Download",!0);var f=!0;c._OnPercentDone(o==Z.DWT.EnumDWT_OCRDownloadType.OCRDT_Dll?[0,-1,"Downloading OCR Module...","http"]:[0,-1,"Downloading OCR Language Data...","http"]),e.isFunction(s)||(f=!1),r.loadHttpBlob(c,"get",i,f,(function(e){c._OnPercentDone([0,-1,"Loading..."]);var t=100;o==Z.DWT.EnumDWT_OCRDownloadType.OCRDT_LANGUAGE&&(t=101),c.__LoadImageFromBytes(e,t,"",f,l,d)}),(function(){e.closeProgress("Download"),d()}),(function(e){var t=0===e.total?100:Math.round(100*e.loaded/e.total);[e.loaded," / ",e.total].join(""),c._OnPercentDone([0,t,"","http"])}))}}(t),r={OCR:{SetUnicodeFontName:function(e){var n=t;return n._resetErr(),n._isMobileMode()?n._mobileNotSupport("Addon.OCR.SetUnicodeFontName"):o.SetUnicodeFontName(e)},GetUnicodeFontName:function(){var e=t;return e._resetErr(),e._isMobileMode()?e._mobileNotSupport("Addon.OCR.GetUnicodeFontName"):o.GetUnicodeFontName()},SetIfUseDetectedFont:function(e){var n=t;return n._resetErr(),n._isMobileMode()?n._mobileNotSupport("Addon.OCR.SetIfUseDetectedFont"):o.SetUseDetectedFont(e)},GetIfUseDetectedFont:function(){var e=t;return e._resetErr(),e._isMobileMode()?e._mobileNotSupport("Addon.OCR.GetIfUseDetectedFont"):o.GetUseDetectedFont()},SetMinFontSizeforMoreAccurateResult:function(e){var n=t;return n._resetErr(),n._isMobileMode()?n._mobileNotSupport("Addon.OCR.SetMinFontSizeforMoreAccurateResult"):o.SetMinFontSizeforMoreAccurateResult(e)},GetMinFontSizeforMoreAccurateResult:function(){var e=t;return e._resetErr(),e._isMobileMode()?e._mobileNotSupport("Addon.OCR.GetMinFontSizeforMoreAccurateResult"):o.GetMinFontSizeforMoreAccurateResult()},SetLanguage:function(e){var n=t;return n._resetErr(),n._isMobileMode()?n._mobileNotSupport("Addon.OCR.SetLanguage"):o.SetOCRLanguage(e)},IsModuleInstalled:function(){var e=t;return e._resetErr(),e._isMobileMode()?e._mobileNotSupport("Addon.OCR.IsModuleInstalled"):e.__IsOCRBasicModuleInstalled()},SetPageSetMode:function(e){var n=t;if(n._resetErr(),n._isMobileMode())return n._mobileNotSupport("Addon.OCR.SetPageSetMode");var r=1*e;return r==Z.DWT.EnumDWT_OCRPageSetMode.OCRPSM_OSD_ONLY||r==Z.DWT.EnumDWT_OCRPageSetMode.PSM_AUTO_OSD||r==Z.DWT.EnumDWT_OCRPageSetMode.PSM_AUTO_ONLY||r==Z.DWT.EnumDWT_OCRPageSetMode.PSM_AUTO||r==Z.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_COLUMN||r==Z.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_BLOCK_VERT_TEXT||r==Z.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_BLOCK||r==Z.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_LINE||r==Z.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_WORD||r==Z.DWT.EnumDWT_OCRPageSetMode.PSM_CIRCLE_WORD||r==Z.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_CHAR?o.SetPageSetMode(r):(Z.Lib.Errors.OCR_InvalidPageSetMode(n),!1)},SetOutputFormat:function(e){var n=t;if(n._resetErr(),n._isMobileMode())return n._mobileNotSupport("Addon.OCR.SetOutputFormat");var r=1*e;return r==Z.DWT.EnumDWT_OCROutputFormat.OCROF_TEXT||r==Z.DWT.EnumDWT_OCROutputFormat.OCROF_PDFPLAINTEXT||r==Z.DWT.EnumDWT_OCROutputFormat.OCROF_PDFIMAGEOVERTEXT||r==Z.DWT.EnumDWT_OCROutputFormat.OCROF_PDFPLAINTEXT_PDFX||r==Z.DWT.EnumDWT_OCROutputFormat.OCROF_PDFIMAGEOVERTEXT_PDFX?o.SetOutputFormat(r):(Z.Lib.Errors.OCR_InvalidOutputFormat(n),!1)},Recognize:function(n,r,a){var s=t;if(s._resetErr(),s._isMobileMode())return s._mobileNotSupport("Addon.OCR.Recognize");if(!e.License.checkProductKey(s,{OCR:!0},!0))return e.isFunction(a)&&a(s._errorCode,s._errorString),!1;var u=s._ImgManager.convertClientIndexToServerId(n);return s.__innerOCRBasicReadFunction("OCRRecognize",u,"",0,0,0,0,0,i.makeParams(0,u,"",0,0,0,0,o.GetUnicodeFontName(),o.GetUseDetectedFont(),o.GetMinFontSizeforMoreAccurateResult(),o.GetOCRLanguage(),o.GetPageSetMode(),o.GetOutputFormat(),""),r,a)},RecognizeRect:function(n,r,a,s,u,c,l){var d=t;if(d._resetErr(),d._isMobileMode())return d._mobileNotSupport("Addon.OCR.RecognizeRect");if(!r&&0!=r||!a&&0!=a||!s&&0!=s||!u&&0!=u){var h=Z.Lib.NewOCRBasicResult(d);return Z.Lib.Errors.OCR_InvalidLeftOrTopOrRightOrBottom(h,"RecognizeRect"),void l(h.GetErrorCode(),h.GetErrorString())}if(!e.License.checkProductKey(d,{OCR:!0},!0))return e.isFunction(l)&&l(d._errorCode,d._errorString),!1;var g=d._ImgManager.convertClientIndexToServerId(n);return d.__innerOCRBasicReadFunction("OCRRecognize",g,"",1,r,a,s,u,i.makeParams(0,g,"",r,a,s,u,o.GetUnicodeFontName(),o.GetUseDetectedFont(),o.GetMinFontSizeforMoreAccurateResult(),o.GetOCRLanguage(),o.GetPageSetMode(),o.GetOutputFormat(),""),c,l)},RecognizeFile:function(n,r,a){var s=t;if(s._resetErr(),s._isMobileMode())return s._mobileNotSupport("Addon.OCR.RecognizeFile");var u=i.replaceLocalFilename(n);return e.License.checkProductKey(s,{OCR:!0},!0)?s.__innerOCRBasicReadFunction("OCRRecognize",-1,u,0,0,0,0,0,i.makeParams(1,-1,u,0,0,0,0,o.GetUnicodeFontName(),o.GetUseDetectedFont(),o.GetMinFontSizeforMoreAccurateResult(),o.GetOCRLanguage(),o.GetPageSetMode(),o.GetOutputFormat(),""),r,a):(e.isFunction(a)&&a(s._errorCode,s._errorString),!1)},RecognizeSelectedImages:function(n,r){var a=t;if(a._resetErr(),a._isMobileMode())return a._mobileNotSupport("Addon.OCR.RecognizeSelectedImages");if(!e.License.checkProductKey(a,{OCR:!0},!0))return e.isFunction(r)&&r(a._errorCode,a._errorString),!1;var s=function(t){var n,r,i=[];return t._ImgManager.count()<=0||(n=t._ImgManager.getCurrentImageIndex(),t._ImgManager.convertClientIndexToServerId(n),r=t._ImgManager.getSelectedClientIndexArray(),e.isArray(r)&&e.each(r,(function(e){var n=t._ImgManager.convertClientIndexToServerId(e);i.push(n)}))),i}(a);return a.__innerOCRBasicReadFunction("OCRRecognize",-1,"",0,0,0,0,0,i.makeParams(2,-1,"",0,0,0,0,o.GetUnicodeFontName(),o.GetUseDetectedFont(),o.GetMinFontSizeforMoreAccurateResult(),o.GetOCRLanguage(),o.GetPageSetMode(),o.GetOutputFormat(),s.join(",")),n,r)},Download:function(e,n,r){var i=t;return i._resetErr(),i._isMobileMode()?i._mobileNotSupport("Addon.OCR.Download"):i.__innerBasicDownload(e,Z.DWT.EnumDWT_OCRDownloadType.OCRDT_Dll,o.GetOCRLanguage(),n,r)},DownloadLangData:function(e,n,r){var i=t;return i._resetErr(),i._isMobileMode()?i._mobileNotSupport("Addon.OCR.DownloadLangData"):i.__innerBasicDownload(e,Z.DWT.EnumDWT_OCRDownloadType.OCRDT_LANGUAGE,o.GetOCRLanguage(),n,r)}}},t.__addon=t.__addon||{},e.mix(t.__addon,r)}))})),(Z=q.Dynamsoft||{}).DWT=Z.DWT||{},Z.aryAddonReadyFun=Z.aryAddonReadyFun||[],Z.AddonReady=Z.AddonReady||function(e){Z.aryAddonReadyFun.push(e)},Z.ProOCRVerInName="1.2.0.0806",function(e){function t(){var e=this;e._text="",e._left=0,e._top=0,e._right=0,e._bottom=0}t.prototype.GetText=function(){return this._text},t.prototype.GetLetterRect=function(){var e=this;return e._left+","+e._top+","+e._right+","+e._bottom},e.NewLetterResult=function(){return new t}}(Z.Lib),function(e){function t(){var e=this;e._count=0,e._letterlist=[],e._zoneCount=0,e._zoneWords=[]}t.prototype.GetLettersCount=function(){return this._count},t.prototype.GetZoneCount=function(){return this._zoneCount},t.prototype.GetLetterContent=function(e){var t=this;if(t._errorCode<0)return"";if(null==e||e>=t._count||e<0)return Z.Lib.Errors.OCR_InvalidIndex(t,"GetLetterContent"),"";var n=Z.Lib.NewLetterResult();return n._text=t._letterlist[e].letter,n._left=t._letterlist[e].boundary[0],n._top=t._letterlist[e].boundary[1],n._right=t._letterlist[e].boundary[2],n._bottom=t._letterlist[e].boundary[3],n},t.prototype.GetZoneContent=function(e){var t=this;return t._errorCode<0?"":null==e||e>=t._zoneCount||e<0?(Z.Lib.Errors.OCR_InvalidIndex(t,"GetZoneContent"),""):t._zoneWords[e]},e.NewPageResult=function(){return new t}}(Z.Lib),function(e){function t(){var e=this;e._input=0,e._message="",e._page=-1}t.prototype.GetInput=function(){return this._input},t.prototype.GetMessage=function(){return this._message},t.prototype.GetPage=function(){return this._page},e.NewErrorInfo=function(){return new t}}(Z.Lib),function(e){function t(e){var t=this;t._errorCode=0,t._errorString="",t._errorlist=[],t._request="",t._ocrTotalCount=0,t._alreadyOCRCount=0,t._resultlist=[],t._resultZoneDetail=[],t._stwain=e}t.prototype.GetErrorCode=function(){return this._errorCode},t.prototype.GetErrorString=function(){return this._errorString},t.prototype.GetInput=function(){var e=this;if(e._request&&e._request.input){var t=e._request.input;if(t){var n=Number(t);if(!isNaN(n))return e._stwain._ImgManager.convertServerIdToClientIndex(n)}return t}return""},t.prototype.GetErrorDetailList=function(){var e=this,t=0;e._errorlist&&(t=e._errorlist.length);for(var n=[],r=0;r<t;r++){var i=Z.Lib.NewErrorInfo();i._input=e._errorlist[r].input,i._message=e._errorlist[r].message,i._page=e._errorlist[r].page,n.push(i)}return n},t.prototype.GetOCRTotalCount=function(){return this._ocrTotalCount?this._ocrTotalCount:0},t.prototype.GetAlreadyOCRCount=function(){return this._alreadyOCRCount?this._alreadyOCRCount:0},t.prototype.GetPageCount=function(){var e=this;return e._resultlist&&e._resultlist.length?e._resultlist.length:0},t.prototype.GetPageContent=function(e){var t=this,n=0;if(t._resultlist&&(n=t._resultlist.length),null==e||e>=n||e<0)return Z.Lib.Errors.OCR_InvalidIndex(t,"GetPageContent"),"";var r=Z.Lib.NewPageResult();return t._resultlist?(r._count=t._resultlist[e].length,r._letterlist=t._resultlist[e]):r._count=0,t._resultZoneDetail?(r._zoneCount=t._resultZoneDetail[e].length,r._zoneWords=t._resultZoneDetail[e]):r._zoneCount=0,r},t.prototype.Get=function(){return this._stwain._innerFun("GetOCRRestult")},t.prototype.Save=function(t){var n=e.html5.Funs.replaceLocalFilename(t);return this._stwain._innerFun("SaveOCRRestult",e.html5.Funs.makeParams(n))},e.NewOCRProResult=function(e){return new t(e)}}(Z.Lib),function(e){for(var t=[Z.DWT],n=0;n<1;n++){var r=t[n];r.EnumDWT_OCRProRecognitionModule={OCRPM_AUTO:"AUTO",OCRPM_MOSTACCURATE:"MOSTACCURATE",OCRPM_BALANCED:"BALANCED",OCRPM_FASTEST:"FASTEST"},r.EnumDWT_OCRProOutputFormat={OCRPFT_TXTS:"TXTS",OCRPFT_TXTCSV:"TXTCSV",OCRPFT_TXTF:"TXTF",OCRPFT_XML:"XML",OCRPFT_IOTPDF:"IOTPDF",OCRPFT_IOTPDF_MRC:"IOTPDF_MRC"},r.EnumDWT_OCRProPDFVersion={OCRPPDFV_0:"1.0",OCRPPDFV_1:"1.1",OCRPPDFV_2:"1.2",OCRPPDFV_3:"1.3",OCRPPDFV_4:"1.4",OCRPPDFV_5:"1.5",OCRPPDFV_6:"1.6",OCRPPDFV_7:"1.7"},r.EnumDWT_OCRProPDFAVersion={OCRPPDFAV_1A:"pdf/a-1a",OCRPPDFAV_1B:"pdf/a-1b",OCRPPDFAV_2A:"pdf/a-2a",OCRPPDFAV_2B:"pdf/a-2b",OCRPPDFAV_2U:"pdf/a-2u",OCRPPDFAV_3A:"pdf/a-3a",OCRPPDFAV_3B:"pdf/a-3b",OCRPPDFAV_3U:"pdf/a-3u"},r.EnumDWT_OCRProType={OCRDT_File:0,OCRDT_Index:1},r.EnumDWT_OCRFindTextFlags={OCRFT_WHOLEWORD:1,OCRFT_MATCHCASE:2,OCRFT_FUZZYMATCH:4},r.EnumDWT_OCRFindTextAction={OCRFT_HIGHLIGHT:0,OCRFT_STRIKEOUT:1,OCRFT_MARKFORREDACT:2}}}("undefined"!=typeof window&&window),function(e){function t(){var e=this;e.FindText="",e.FindTextFlags=Z.DWT.EnumDWT_OCRFindTextFlags.OCRFT_WHOLEWORD,e.FindTextAction=Z.DWT.EnumDWT_OCRFindTextAction.OCRFT_MARKFORREDACT}e.NewRedaction=function(){return new t}}(Z.Lib),Z.WebTwain={Addon:{OCRPro:{}}},function(e){function t(){var e=this;e.RecognitionModule="",e.Languages="eng",e.OutputFormat="",e.PDFVersion="",e.PDFAVersion="",e.LicenseChecker="",e.Redaction=Z.Lib.NewRedaction()}e.NewSettings=function(){return new t}}(Z.WebTwain.Addon.OCRPro),function(){function e(e,t,n,r){var i=this;i.left=e,i.top=t,i.right=n,i.bottom=r}Z.WebTwain.Addon.OCRPro.NewOCRZone=function(t,n,r,i){return new e(t,n,r,i)}}(),Z.AddonReady((function(e,t){if(e.product.bHTML5Edition){var n=function(t,n,r,i){var o=e.NewOCRProResult(t);o._errorCode=n,o._errorString=r;var a=e.NewErrorInfo();return a.input=i,a.message=o._errorString,a.page=0,o._errorlist=[a],o};e.DynamicLoadAddonFuns&&e.DynamicLoadAddonFuns.push((function(t){var r,i,o=e.html5.Funs;i=e.env.bMac?"DynamicOCRPro_"+Z.ProOCRVerInName+".dylib":e.env.bLinux?"DynamicOCRPro_"+Z.ProOCRVerInName+".so":Z.dcp.b64bit?"DynamicOCRProx64_"+Z.ProOCRVerInName+".dll":"DynamicOCRPro_"+Z.ProOCRVerInName+".dll",function(t){var n=e.html5.Funs;t.__innerGetOCRProResultAsyncFunction=function(e){var t=Z.Lib.NewOCRProResult(this);return e&&(t._errorCode=e.code,t._errorString=e.message,t._request=e.request,t._errorlist=e.errorList,t._ocrTotalCount=e.ocrTotalCount,t._alreadyOCRCount=e.alreadyOCRCount,t._resultlist=e.resultDetail,t._resultZoneDetail=e.resultZoneDetail),t},t.__innerIsOCRTrial=function(e,t){var n=this,r=function(){var t=!1;if(n.__licenseInfo.Detail)for(var r=0;r<n.__licenseInfo.Detail.length;r++)"10"==n.__licenseInfo.Detail[r].EnumLicenseType&&"TRUE"==n.__licenseInfo.Detail[r].Trial&&(t=!0);return e(t)};return n.__licenseInfo&&n.__licenseInfo.Detail?r():n.GetLicenseInfo(r,t)},t.__innerOCRReadFunction=function(e,t,n,r,i,o,a,s){return this.__innerOCRAsyncReadFunction(e,t,n,r,i,o,a,s)},t.__innerOCRAsyncReadFunction=function(r,i,o,a,s,u,c,l){var d=this;return n.showMask(r),d._innerSend(r,u,!0,(function(u){0==u.code?(e.isFunction(c)&&(-1!=i?1==a?c(i,s,d.__innerGetOCRProResultAsyncFunction(u)):c(i,d.__innerGetOCRProResultAsyncFunction(u)):""!=o?c(o,d.__innerGetOCRProResultAsyncFunction(u)):c(d.__innerGetOCRProResultAsyncFunction(u))),e.License.isLTS()&&Z.DWT.lcvrf(t)):e.isFunction(l)&&l(u.code,u.message,d.__innerGetOCRProResultAsyncFunction(u)),n.hideMask(r)}),(function(e){n.hideMask(r)})),!0},t.__innerGetRequestJson=function(e,n,r,i,o){var a,s="[{";for(s+='"id":"'+t.clientId+'",',s+='"method":"OCRProRecognize",',s+='"dllName":"'+o+'",',s+='"productkey":"'+Z.DWT.ProductKey+'",',s+=e==Z.DWT.EnumDWT_OCRProType.OCRDT_File?'"inputType":"file",':'"inputType":"index",',s+='"input":[',a=0;a<n.length;a++)s+=e==Z.DWT.EnumDWT_OCRProType.OCRDT_File?'"'+n[a]+'"':n[a],a+1<n.length&&(s+="|");if(s+="],",s+='"settings":{',s+='"recognitionMethod": "Page"',r&&(r.RecognitionModule&&r.RecognitionModule.length>0&&(s+=',"recognitionModule":"'+r.RecognitionModule+'"'),r.Languages&&r.Languages.length>0&&(s+=',"languages":"'+r.Languages+'"'),r.OutputFormat&&r.OutputFormat.length>0&&(s+=',"outputFormat":"'+r.OutputFormat+'"'),r.PDFVersion&&r.PDFVersion.length>0&&(s+=',"pdfVersion":"'+r.PDFVersion+'"'),r.PDFAVersion&&r.PDFAVersion.length>0&&(s+=',"pdfAVersion":"'+r.PDFAVersion+'"'),r.Redaction&&r.Redaction.FindText&&r.Redaction.FindText.length>0)){var u=parseInt(r.Redaction.FindTextFlags),c=parseInt(r.Redaction.FindTextAction);if(!isNaN(u)&&!isNaN(c)){s+=',"redaction":{';var l=r.Redaction.FindText;s+='"findText":"'+(l=l.replace(/\"/g,'\\"'))+'"',s+=',"findTextFlags":'+u,s+=',"findTextAction":'+c,s+="}"}}for(s+="},",s+='"zones":[',a=0;a<i.length;a++)s+="["+i[a].left+","+i[a].top+","+i[a].right+","+i[a].bottom+"]",a+1<i.length&&(s+=",");return s+="],",(s+='"outputFile":""')+"}]"},t.__LoadImageFromBytesForDownloadInner=function(e,n,r,i,o,a,s,u,c){var l,d,h=t;d=e>=i?n.slice(l=a*i,o):n.slice(l=e*a,(e+1)*a),h.__LoadImageFromBytes(d,r,"",s,(function(){e>=i?Z.Lib.isFunction(u)&&u():h.__LoadImageFromBytesForDownloadInner(e+=1,n,r,i,o,a,s,u,c)}),(function(){Z.Lib.isFunction(c)&&c()}),l,o)},t.__LoadImageFromBytesForDownload=function(e,n,r,i,o,a){var s=t,u=2e6,c=e.size||e.length,l=parseInt(c/u);0==c%u&&(l-=1),s.__LoadImageFromBytesForDownloadInner(0,e,n,l,c,u,i,o,a)}}(t),r={OCRPro:{Settings:!1,Recognize:function(r,o,a){var u,c,l=[],d=t;if(d._resetErr(),d._isMobileMode())return d._mobileNotSupport("Addon.OCRPro.Recognize");if(u=parseInt(r),e.isNaN(u)||!e.isNumber(u))return c=n(t,-2201,"Invalid parameter type.",r),e.isFunction(a)?a(c._errorCode,c._errorString,c):e.Errors.WebviewerError(t,c._errorString,c._errorCode),!1;var h=t._ImgManager.convertClientIndexToServerId(u);if(-1==h)return e.isFunction(a)&&(e.Errors.IndexOutOfRange(t),c=n(t,t._errorCode,t._errorString,r),a(c._errorCode,c._errorString,c)),!1;if(!e.License.checkProductKey(t,{OCRPro:!0},!0))return e.isFunction(a)&&(c=n(t,t._errorCode,t._errorString,r),a(c._errorCode,c._errorString,c)),!1;l.push(h);var g=[],f=this.Settings,m=t.__innerGetRequestJson(Z.DWT.EnumDWT_OCRProType.OCRDT_Index,l,f,g,i);return t.__innerIsOCRTrial((function(n){return n||e.License.isLTS()?t.__innerOCRReadFunction("OCRProRecognize",r,"",0,g,m,o,a):s(f.LicenseChecker,t,"OCRProRecognize",r,"",0,g,m,o,a)}),a)},RecognizeRect:function(r,o,a,u){var c,l,d=[],h=t;if(h._resetErr(),h._isMobileMode())return h._mobileNotSupport("Addon.OCRPro.RecognizeRect");if(c=parseInt(r),e.isNaN(c)||!e.isNumber(c))return l=n(t,-2201,"Invalid parameter type.",r),e.isFunction(u)?u(l._errorCode,l._errorString,l):e.Errors.WebviewerError(t,l._errorString,l._errorCode),!1;var g=t._ImgManager.convertClientIndexToServerId(c),f=t._ImgManager.GetImageWidth(c),m=t.GetImageHeight(c);if(-1==g)return e.isFunction(u)&&(e.Errors.IndexOutOfRange(t),l=n(t,t._errorCode,t._errorString,r),u(l._errorCode,l._errorString,l)),!1;if(!e.License.checkProductKey(t,{OCRPro:!0},!0))return e.isFunction(u)&&(l=n(t,t._errorCode,t._errorString,r),u(l._errorCode,l._errorString,l)),!1;if(f>0&&m>0)for(var p,_,v,I,y,b,D=0;D<o.length;D++)(_=(p=o[D]).left)<0&&(_=0),(v=p.top)<0&&(v=0),(I=p.right)<0&&(I=0),(y=p.bottom)<0&&(y=0),_>I&&(b=_,_=I,I=b),v>y&&(b=v,v=y,y=b),I>f&&(I=f),y>m&&(y=m),p.left=_,p.top=v,p.right=I,p.bottom=y;d.push(g);var T=this.Settings,S=t.__innerGetRequestJson(Z.DWT.EnumDWT_OCRProType.OCRDT_Index,d,T,o,i);return t.__innerIsOCRTrial((function(n){return n||e.License.isLTS()?t.__innerOCRReadFunction("OCRProRecognize",r,"",1,o,S,a,u):s(T.LicenseChecker,t,"OCRProRecognize",r,"",1,o,S,a,u)}),u)},RecognizeFile:function(n,r,a){var u,c,l,d=t;if(d._resetErr(),d._isMobileMode())return d._mobileNotSupport("Addon.OCRPro.RecognizeFile");if(0==n.length)return e.isFunction(a)&&((u=Z.Lib.NewOCRProResult(t))._errorCode=-2201,u._errorString="File name cannot be empty.",l=[],(c=Z.Lib.NewErrorInfo()).input=n,c.message=u._errorString,c.page=0,l.push(c),u._errorlist=l,a(u._errorCode,u._errorString,u)),!1;if(!e.License.checkProductKey(t,{OCRPro:!0},!0))return e.isFunction(a)&&((u=Z.Lib.NewOCRProResult(t))._errorCode=t._errorCode,u._errorString=t._errorString,l=[],(c=Z.Lib.NewErrorInfo()).input=n,c.message=u._errorString,c.page=0,l.push(c),u._errorlist=l,a(u._errorCode,u._errorString,u)),!1;var h=o.replaceLocalFilename(n),g=[];h.indexOf("|")>0?g=h.split("|"):h.indexOf(";")>0?g=h.split(";"):h.indexOf(",")>0&&(g=h.split(","));var f=[];if(g.length>0)for(var m=0;m<g.length;m++)f.push(g[m]);else f.push(h);var p=[],_=this.Settings,v=t.__innerGetRequestJson(Z.DWT.EnumDWT_OCRProType.OCRDT_File,f,_,p,i);t.__innerIsOCRTrial((function(i){return i||e.License.isLTS()?t.__innerOCRReadFunction("OCRProRecognize",-1,n,0,p,v,r,a):s(_.LicenseChecker,t,"OCRProRecognize",-1,n,0,p,v,r,a)}),a)},RecognizeSelectedImages:function(n,r){var o,a,u,c=t;if(c._resetErr(),c._isMobileMode())return c._mobileNotSupport("Addon.OCRPro.RecognizeSelectedImages");if(!e.License.checkProductKey(t,{OCRPro:!0},!0)){if(e.isFunction(r)){var l=Z.Lib.NewOCRProResult(t);l._errorCode=t._errorCode,l._errorString=t._errorString,a=[],(u=Z.Lib.NewErrorInfo()).input="",u.message=l._errorString,u.page=0,a.push(u),l._errorlist=a,r(l._errorCode,l._errorString,l)}return!1}var d=[],h=this.Settings,g=function(t){var n,r,i=[];return t._ImgManager.count()<=0||(n=t._ImgManager.getCurrentImageIndex(),t._ImgManager.convertClientIndexToServerId(n),r=t._ImgManager.getSelectedClientIndexArray(),e.isArray(r)&&e.each(r,(function(e){var n=t._ImgManager.convertClientIndexToServerId(e);i.push(n)}))),i}(t),f=t.__innerGetRequestJson(Z.DWT.EnumDWT_OCRProType.OCRDT_Index,g,h,d,i);return t.__innerIsOCRTrial((function(i){o=i||e.License.isLTS()?t.__innerOCRReadFunction("OCRProRecognize",-1,"",0,d,f,n,r):s(h.LicenseChecker,t,"OCRProRecognize",-1,"",0,d,f,n,r)}),r),o},IsModuleInstalled:function(){var e=t;return e._resetErr(),e._isMobileMode()?e._mobileNotSupport("Addon.OCRPro.IsModuleInstalled"):""!=e._innerFun("GetAddOnVersion",o.makeParams("proocr",i))},Download:function(n,r,i){var a=t;if(a._resetErr(),a._isMobileMode())return a._mobileNotSupport("Addon.OCRPro.Download");var s=function(){return e.isFunction(r)&&r(),!0},u=function(){return e.isFunction(i)&&i(a.ErrorCode,a.ErrorString),!1};if(!e.License.checkProductKey(a,{Core:!0}))return u();if(!e.License.checkProductKey(a,{OCRPro:!0},!0))return u();if(this.IsModuleInstalled())return s(),!0;if(!n||""==n||!e.isString(n))return e.Errors.OCR_InvalidRemoteFilename(a),u(),!1;if(o.isServerInvalid(a))return u(),!1;e.cancelFrome=2,e.showProgress(a,"Download",!0);var c=!0;return a._OnPercentDone([0,-1,"Downloading OCR Resources...","http"]),e.isFunction(r)||(c=!1),o.loadHttpBlob(a,"get",n,c,(function(e){a._OnPercentDone([0,-1,"Loading..."]),a.__LoadImageFromBytesForDownload(e,102,"",c,s,u)}),(function(){e.closeProgress("Download"),u()}),(function(e){var t=0===e.total?100:Math.round(100*e.loaded/e.total);[e.loaded," / ",e.total].join(""),a._OnPercentDone([0,t,"","http"])}))}}},t.__addon=t.__addon||{},e.mix(t.__addon,r)})),Z.WebTwain.Addon.OCRPro.NewOCRReadPara=function(e,t,n,r,i,a,s,u,c,l){return new o(e,t,n,r,i,a,s,u,c,l)},Z.WebTwain.Addon.OCRPro.NewOCRError=function(){return new l},Z.Lib.mix(Z.Lib.Errors,{OCR_LicenseCheckerEmpty:function(e){var t="LicenseChecker cannot be empty.";e.errorString=t,e.responseText=h("false;-2601;"+t+";")},OCR_LicenseCheckerNotConnect:function(e){var t="Cannot connect to the LicenseChecker, please check and make sure it's set correctly.";e.errorString=t,e.responseText=h("false;-2602;"+t+";")},OCR_AccessDenied:function(e){var t="Access denied.";e.errorString=t,e.responseText=h("false;-2603;"+t+";")},OCR_LicenseCheckerError:function(e,t){var n="Error occured in '"+t+"'.";e.errorString=n,e.responseText=h("false;-2604;"+n+";")},OCR_HTTPError:function(e,t){var n="HTTP Error "+t+".";e.errorString=n,e.responseText=h("false;-2605;"+n+";")},OCR_LicenseCheckerUnauthorized:function(e,t){var n="You do not have permission to view this directory or page using the credentials you supplied (access denied due to Access Control Lists). Ask the Web server's administrator to give you access to '"+t+"'.";e.errorString=n,e.responseText=h("false;-2606;"+n+";")},__last:!1});var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1)}function o(e,t,n,r,i,o,a,s,u,c){var l=this;l.STWAIN=t,l.AjaxFunctionUrl=e,l.FunctionName=n,l.ImageIndex=r,l.FileNames=i,l.Type=o,l.AryZone=a,l.JsonString=s,l.OnSuccess=u,l.OnFailure=c}function a(e,t){var n=e.responseText;if(0==n.length){var r=Z.WebTwain.Addon.OCRPro.NewOCRError();Z.Lib.Errors.OCR_LicenseCheckerError(r,t.AjaxFunctionUrl),n=r.responseText}var o=function(e){return function(e){var t,n,r,i,o,a;for(t="",r=e.length,n=0;n<r;)switch((i=e.charCodeAt(n++))>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=e.charAt(n-1);break;case 12:case 13:o=e.charCodeAt(n++),t+=String.fromCharCode((31&i)<<6|63&o);break;case 14:o=e.charCodeAt(n++),a=e.charCodeAt(n++),t+=String.fromCharCode((15&i)<<12|(63&o)<<6|(63&a)<<0)}return t}(function(e){var t,n,r,o,a,s,u;for(s=e.length,a=0,u="";a<s;){do{t=i[255&e.charCodeAt(a++)]}while(a<s&&-1==t);if(-1==t)break;do{n=i[255&e.charCodeAt(a++)]}while(a<s&&-1==n);if(-1==n)break;u+=String.fromCharCode(t<<2|(48&n)>>4);do{if(61==(r=255&e.charCodeAt(a++)))return u;r=i[r]}while(a<s&&-1==r);if(-1==r)break;u+=String.fromCharCode((15&n)<<4|(60&r)>>2);do{if(61==(o=255&e.charCodeAt(a++)))return u;o=i[o]}while(a<s&&-1==o);if(-1==o)break;u+=String.fromCharCode((3&r)<<6|o)}return u}(e))}(n).split(";");1==o.length?t.OnFailure(-1,n,Z.Lib.NewOCRProResult()):"true"==o[0]?t.STWAIN.__innerOCRReadFunction(t.FunctionName,t.ImageIndex,t.FileNames,t.Type,t.AryZone,t.JsonString,(function(e,n,r){Z.Lib.isUndefined(r)?Z.Lib.isUndefined(n)?(t.OnSuccess(e),u(t.AjaxFunctionUrl,e.GetPageCount())):(t.OnSuccess(e,n),u(t.AjaxFunctionUrl,n.GetPageCount())):(t.OnSuccess(e,n,r),u(t.AjaxFunctionUrl,r.GetPageCount()))}),t.OnFailure):t.OnFailure(o[1],o[2],Z.Lib.NewOCRProResult())}function s(e,t,n,r,i,o,s,u,c,l){return d(e,"DTW_AjaxMethod=CheckLicense&Productkey="+h(Z.DWT.ProductKey),a,Z.WebTwain.Addon.OCRPro.NewOCRReadPara(e,t,n,r,i,o,s,u,c,l))}function u(e,t){d(e,"DTW_AjaxMethod=WriteOCRCount&OCRCount="+h(t+""),c,null)}function c(e,t){}function l(){this.responseText="",this.errorString=""}function d(e,t,n,r){var i=Z.WebTwain.Addon.OCRPro.NewOCRError();if(""==e)return Z.Lib.Errors.OCR_LicenseCheckerEmpty(i),alert(i.errorString),n(i,r),!1;var o=function(){var t=null,n=window;try{t=new n.ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{t=new n.ActiveXObject("Microsoft.XMLHTTP")}catch(e){t=new XMLHttpRequest}}return t}();return o.open("POST",e,!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.onreadystatechange=function(){if(4==o.readyState){if(200!=o.status)return 401==o.status?(Z.Lib.Errors.OCR_LicenseCheckerUnauthorized(i,r.AjaxFunctionUrl),n(i,r),!1):404==o.status?(Z.Lib.Errors.OCR_LicenseCheckerNotConnect(i),alert(i.errorString),n(i,r),!1):403==o.status?(Z.Lib.Errors.OCR_AccessDenied(i),n(i,r),!1):(Z.Lib.Errors.OCR_HTTPError(i,o.status),n(i,r),!1);null!=n&&"function"==typeof n&&n(o,r)}},o&&t&&o.send(t),!0}function h(e){return function(e){var t,n,i,o,a,s;for(i=e.length,n=0,t="";n<i;){if(o=255&e.charCodeAt(n++),n==i){t+=r.charAt(o>>2),t+=r.charAt((3&o)<<4),t+="==";break}if(a=e.charCodeAt(n++),n==i){t+=r.charAt(o>>2),t+=r.charAt((3&o)<<4|(240&a)>>4),t+=r.charAt((15&a)<<2),t+="=";break}s=e.charCodeAt(n++),t+=r.charAt(o>>2),t+=r.charAt((3&o)<<4|(240&a)>>4),t+=r.charAt((15&a)<<2|(192&s)>>6),t+=r.charAt(63&s)}return t}(function(e){var t,n,r,i;for(t="",r=e.length,n=0;n<r;n++)(i=e.charCodeAt(n))>=1&&i<=127?t+=e.charAt(n):i>2047?(t+=String.fromCharCode(224|i>>12&15),t+=String.fromCharCode(128|i>>6&63),t+=String.fromCharCode(128|i>>0&63)):(t+=String.fromCharCode(192|i>>6&31),t+=String.fromCharCode(128|i>>0&63));return t}(e))}})),(Z=q.Dynamsoft||{}).DWT=Z.DWT||{},Z.aryAddonReadyFun=Z.aryAddonReadyFun||[],Z.AddonReady=Z.AddonReady||function(e){Z.aryAddonReadyFun.push(e)},Z.WebcamVerForActiveX="15.0.0.0625",Z.WebcamVerInName="15.0.0.0625",function(){for(var e=[Z.DWT],t=0;t<1;t++){var n=e[t];n.EnumDWT_VideoRotateMode={VRM_NONE:0,VRM_90_DEGREES_CLOCKWISE:1,VRM_180_DEGREES_CLOCKWISE:2,VRM_270_DEGREES_CLOCKWISE:3,VRM_FLIP_VERTICAL:4,VRM_FLIP_HORIZONTAL:5},n.EnumDWT_VideoProperty={VP_BRIGHTNESS:0,VP_CONTRAST:1,VP_HUE:2,VP_SATURATION:3,VP_SHARPNESS:4,VP_GAMMA:5,VP_COLORENABLE:6,VP_WHITEBALANCE:7,VP_BACKLIGHTCOMPENSATION:8,VP_GAIN:9},n.EnumDWT_CameraControlProperty={CCP_PAN:0,CCP_TILT:1,CCP_ROLL:2,CCP_ZOOM:3,CCP_EXPOSURE:4,CCP_IRIS:5,CCP_FOCUS:6}}}(),Z.Lib.WebcamErrors={InvalidParameter:function(e){e._errorCode=-10001,e._errorString="The parameter is invalid."},VideoNotPlayingWhenCapture:function(e){e._errorCode=-10002,e._errorString="To capture an image, the video must be playing."},VideoNotPlayingWhenGetURL:function(e){e._errorCode=-10003,e._errorString="To get the url for the current frame, the video must be playing."},Success:function(e){e._errorCode=0,e._errorString="Successful."}},function(e){function t(e){var t=this;t._Count=0,t._resultlist=[],t._stwain=e}t.prototype.GetCount=function(){return e.WebcamErrors.Success(this._stwain),this._Count-1},t.prototype.Get=function(t){var n=this;return n._resultlist.length-1<=t||t<0?(Z.Lib.Errors.Webcam_InvalidIndex(n._stwain,"Get"),""):(e.WebcamErrors.Success(n._stwain),n._resultlist[t])},t.prototype.GetCurrent=function(){var t=this,n=t._resultlist.length;return 0==n?(Z.Lib.Errors.Webcam_InvalidIndex(t._stwain,"GetCurrent"),""):(e.WebcamErrors.Success(t._stwain),t._resultlist[n-1])},e.NewWebcamValue=function(e){return new t(e)}}(Z.Lib),function(e){function t(e){var t=this;t._Count=0,t._resultlist=[],t._stwain=e}t.prototype.GetValue=function(){var t=this;return 0==t._resultlist.length?(Z.Lib.Errors.Webcam_InvalidIndex(t._stwain,""),""):(e.WebcamErrors.Success(t._stwain),t._resultlist[0].current)},t.prototype.GetIfAuto=function(){var t=this;return 0==t._resultlist.length?(Z.Lib.Errors.Webcam_InvalidIndex(t._stwain,""),!1):(e.WebcamErrors.Success(t._stwain),"true"==t._resultlist[0].auto)},e.NewWebcamSetting=function(e){return new t(e)}}(Z.Lib),function(e){function t(e){var t=this;t._Count=0,t._resultlist=[],t._stwain=e}t.prototype.GetMinValue=function(){var e=this;return 0==e._resultlist.length?(Z.Lib.Errors.Webcam_InvalidIndex(e._stwain,""),""):e._resultlist[0].min},t.prototype.GetMaxValue=function(){var e=this;return 0==e._resultlist.length?(Z.Lib.Errors.Webcam_InvalidIndex(e._stwain,""),""):e._resultlist[0].max},t.prototype.GetSteppingDelta=function(){var e=this;return 0==e._resultlist.length?(Z.Lib.Errors.Webcam_InvalidIndex(e._stwain,""),0):e._resultlist[0].step},t.prototype.GetDefaultValue=function(){var e=this;return 0==e._resultlist.length?(Z.Lib.Errors.Webcam_InvalidIndex(e._stwain,""),0):e._resultlist[0].defaultValue},t.prototype.GetIfAuto=function(){var e=this;return 0==e._resultlist.length?(Z.Lib.Errors.Webcam_InvalidIndex(e._stwain,""),!1):"true"==e._resultlist[0].auto},e.NewWebcamMoreSetting=function(e){return new t(e)}}(Z.Lib),Z.AddonReady((function(e,t){e.DynamicLoadAddonFuns&&e.DynamicLoadAddonFuns.push((function(t){t._innerSetWebcamValue=function(n){var r=e.NewWebcamValue(t);return n&&e.isArray(n)&&(r._resultlist=n,r._Count=n.length),r},t._innerSetWebcamSetting=function(n){var r=e.NewWebcamSetting(t);return n&&e.isArray(n)&&(r._resultlist=n,r._Count=n.length),r},t._innerSetWebcamMoreSetting=function(n){var r=e.NewWebcamMoreSetting(t);return n&&e.isArray(n)&&(r._resultlist=n,r._Count=n.length),r}})),e.Addon_Events.push("OnFrameCaptured"),e.Addon_Events.push("OnCaptureSuccess"),e.Addon_Events.push("OnCaptureError")})),Z.AddonReady((function(e,t){e.product.bHTML5Edition&&e.DynamicLoadAddonFuns&&e.DynamicLoadAddonFuns.push((function(t){var n,r=e.html5.Funs,i=e.env.bMac?"DynamicWebcam_"+Z.WebcamVerInName+".dylib":e.env.bLinux?"DynamicWebcam_"+Z.WebcamVerInName+".so":Z.dcp.b64bit?"DynamicWebcamx64_"+Z.WebcamVerInName+".dll":"DynamicWebcam_"+Z.WebcamVerInName+".dll";t._isMobileMode()||t._innerSend("GetAddOnVersion",r.makeParams("webcam",i),!0,!1,!1),(n=t)._innerWebcamValueFunction=function(e,t){return e=this._innerFunRaw(e,t,!1,!1),this._innerSetWebcamValue(e)},n._innerWebcamSettingFunction=function(e,t){return e=this._innerFunRaw(e,t,!1,!1),this._innerSetWebcamSetting(e)},n._innerWebcamMoreSettingFunction=function(e,t){return e=this._innerFunRaw(e,t,!1,!1),this._innerSetWebcamMoreSetting(e)},n._OnCaptureSuccess=function(e){Z.Lib.isFunction(this.__OnCaptureSuccess)&&this.__OnCaptureSuccess()},n._OnCaptureError=function(e){var t=e[1];e=e[2],Z.Lib.isFunction(this.__OnCaptureError)&&this.__OnCaptureError(t,e)},n._OnFrameCaptured=function(e){var t,n=this,r=Z.Lib;n.__videoPause||(t=(t=n.__videoQuality)||60,n.__videoDest&&n.__videoDest.UpdateVideoContainer(n.GetImageURL(-1,-1,-1,0,t))),r.isFunction(n.__OnFrameCaptured)&&n.__OnFrameCaptured(e)},n={Webcam:{IsModuleInstalled:function(){var e=t;return e._resetErr(),e._isMobileMode()?e._mobileNotSupport("Addon.Webcam.IsModuleInstalled"):""!=e._innerFun("GetAddOnVersion",r.makeParams("webcam",i))},Download:function(n,i,o){var a=t;if(a._resetErr(),a._isMobileMode())return a._mobileNotSupport("Addon.Webcam.Download");function s(){return Z.Lib.isFunction(i)&&i(),!0}function u(){return Z.Lib.isFunction(o)&&o(t.ErrorCode,t.ErrorString),!1}if(Z.Lib.cancelFrome=2,!e.License.checkProductKey(t,{Webcam:!0},!0))return u();if(this.IsModuleInstalled())return s();if(!n||""==n)return Z.Lib.Errors.Webcam_InvalidRemoteFilename(a),u();if(r.isServerInvalid(a))return u(),!1;Z.Lib.showProgress(a,"Download",!0);var c=!0;return a._OnPercentDone([0,-1,"Downloading Webcam Module...","http"]),Z.Lib.isFunction(i)||(c=!1),r.loadHttpBlob(a,"get",n,c,(function(e){a._OnPercentDone([0,-1,"Loading..."]),a.__LoadImageFromBytes(e,100,"",c,s,u)}),(function(){Z.Lib.closeProgress(a,"Download"),u()}),(function(e){var t=0===e.total?100:Math.round(100*e.loaded/e.total);[e.loaded," / ",e.total].join(""),a._OnPercentDone([0,t,"","http"])}))},GetSourceList:function(){var n=t;if(n._resetErr(),n._isMobileMode())return n._mobileNotSupport("Addon.Webcam.GetSourceList");if(!e.License.checkProductKey(n,{Webcam:!0},!0))return[];var r=n._innerFunRaw("GetWebcamSourceList");return 0==n.ErrorCode&&r.splice(r.length-1,1),r},SelectSource:function(n){var i=t;return i._resetErr(),i._isMobileMode()?i._mobileNotSupport("Addon.Webcam.SelectSource"):!!e.License.checkProductKey(i,{Webcam:!0},!0)&&i._innerFun("SelectWebcam",r.makeParams(n))},CloseSource:function(){var e=t;return e._resetErr(),e._isMobileMode()?e._mobileNotSupport("Addon.Webcam.CloseSource"):(this._clear(),e._innerFun("StopCapture"))},GetFramePartURL:function(){var n=t;return n._resetErr(),n._isMobileMode()?n._mobileNotSupport("Addon.Webcam.GetFramePartURL"):this._isPlaying()?n.GetImageURL(-1,-1,-1,!0,n.__videoQuality):(e.WebcamErrors.VideoNotPlayingWhenGetURL(n),"")},GetFrameURL:function(){var n=t;return n._resetErr(),n._isMobileMode()?n._mobileNotSupport("Addon.Webcam.GetFrameURL"):this._isPlaying()?n.GetImageURL(-1,-1,-1,0,n.__videoQuality):(e.WebcamErrors.VideoNotPlayingWhenGetURL(n),"")},PlayVideo:function(n,i,o,a,s){var u=t;if(u._resetErr(),u._isMobileMode())return u._mobileNotSupport("Addon.Webcam.PlayVideo");function c(){return h._clear(),Z.Lib.isFunction(s)&&s(t.ErrorCode,t.ErrorString),!1}var l=Z.Lib,d=60,h=this;return n?e.License.checkProductKey(t,{Webcam:!0},!0)?(u.__videoDest=n,u.__videoDest.ShowVideoContainer(!0),l.isFunction(o)&&(t.__OnFrameCaptured=o),t.__videoPause?(t.__videoPause=!1,e.isFunction(a)&&a(),!0):(t.__videoPause=!1,t.__videoQuality=i?d=(d=+i)<1?60:d:d,t._innerSend("PlayVideo",r.makeParams(!0),!0,a,c))):c():(Z.Lib.Errors.ParameterCannotEmpty(t),c())},PauseVideo:function(){var e=t;return e._resetErr(),e._isMobileMode()?e._mobileNotSupport("Addon.Webcam.PauseVideo"):(this._isPlaying()&&(e.__videoPause=!0),!0)},_clear:function(){var e=t;e.__videoPause=!1,e.__OnFrameCaptured=!1,e.__videoQuality=60,e.__videoDest&&e.__videoDest.ShowVideoContainer(!1),e.__videoDest=!1},_isPlaying:function(){return t.GetIfShowVideoContainer()},StopVideo:function(){var e=t;if(e._resetErr(),e._isMobileMode())return e._mobileNotSupport("Addon.Webcam.StopVideo");this._clear();var n=e._innerFun("PlayVideo",r.makeParams(!1,0));return e._innerFun("StopCapture"),n},CaptureImage:function(n,i){var o=t;if(o._resetErr(),o._isMobileMode())return o._mobileNotSupport("Addon.Webcam.CaptureImage"),e.isFunction(i)&&i(o._errorCode,o._errorString),!1;if(!e.License.checkProductKey(o,{Webcam:!0},!0))return e.isFunction(i)&&i(o._errorCode,o._errorString),!1;function a(){r.hideMask(s),e.isFunction(i)&&i(o._errorCode,o._errorString)}var s="CaptureImage";return r.showMask(s),o.__OnCaptureError=a,o._innerSend(s,r.makeParams(!1),!0,(function(){r.hideMask(),0==o.ErrorCode?(r.hideMask(s),e.isFunction(n)&&setTimeout(n,0),e.License.isLTS()&&Z.DWT.lcvrf(t)):a()}),a)},GetMediaType:function(){var e=t;return e._resetErr(),e._isMobileMode()?e._mobileNotSupport("Addon.Webcam.GetMediaType"):e._innerWebcamValueFunction("GetMediaType")},SetMediaType:function(n){var i=t;return i._resetErr(),i._isMobileMode()?i._mobileNotSupport("Addon.Webcam.SetMediaType"):e.isString(n)?i._innerFun("SetMediaType",r.makeParams(n)):(e.Errors.InvalidValue(i),!1)},GetResolution:function(){var e=t;if(e._resetErr(),e._isMobileMode())return e._mobileNotSupport("Addon.Webcam.GetResolution");if((e=e._innerWebcamValueFunction("GetResolution"))&&e._resultlist){var n,r,i=e._resultlist,o=[],a=[];for(""==(r=0<i.length?i[i.length-1]:r)&&0<i.length&&(r=i[0]),n=0;n<i.length-1;n++){for(var s,u=(s=i[n]).toLowerCase().split("x"),c=(d=l=c=void 0,{value:s,p1:parseInt(u[0]),p2:parseInt(u[1])}),l=o,d=l.length-1;0<=d&&l[d].p1>=c.p1&&!(l[d].p1==c.p1&&l[d].p2<c.p2);)l[d+1]=l[d],d--;l[d+1]=c}for(n=0;n<o.length;n++)a.push(s=o[n].value);r&&a.push(r),e._resultlist=a,a=o=null}return e},SetResolution:function(n){var i=t;return i._resetErr(),i._isMobileMode()?i._mobileNotSupport("Addon.Webcam.SetResolution"):e.isNumber(n)||e.isString(n)?i._innerFun("SetResolution",r.makeParams(n)):(e.Errors.InvalidValue(i),!1)},GetFrameRate:function(){var e=t;return e._resetErr(),e._isMobileMode()?e._mobileNotSupport("Addon.Webcam.GetFrameRate"):e._innerWebcamValueFunction("GetFrameRate")},SetFrameRate:function(n){var i=t;return i._resetErr(),i._isMobileMode()?i._mobileNotSupport("Addon.Webcam.SetFrameRate"):e.isNumber(n)?t._innerFun("SetFrameRate",r.makeParams(n)):(e.Errors.InvalidValue(i),!1)},GetVideoPropertySetting:function(e){var n=t;return n._resetErr(),n._isMobileMode()?n._mobileNotSupport("Addon.Webcam.GetVideoPropertySetting"):n._innerWebcamSettingFunction("GetWebcamVideoPropertySetting",r.makeParams(e))},GetVideoPropertyMoreSetting:function(e){var n=t;return n._resetErr(),n._isMobileMode()?n._mobileNotSupport("Addon.Webcam.GetVideoPropertyMoreSetting"):n._innerWebcamMoreSettingFunction("GetWebcamVideoPropertyMoreSetting",r.makeParams(e))},SetVideoPropertySetting:function(e,n,i){var o=t;return o._resetErr(),o._isMobileMode()?o._mobileNotSupport("Addon.Webcam.SetVideoPropertySetting"):o._innerFun("SetWebcamVideoPropertySetting",r.makeParams(e,n,i))},SetVideoRotateMode:function(e){var n=t;return n._resetErr(),n._isMobileMode()?n._mobileNotSupport("Addon.Webcam.SetVideoRotateMode"):n._innerFun("SetVideoRotateMode",r.makeParams(e))},GetCameraControlPropertySetting:function(e){var n=t;return n._resetErr(),n._isMobileMode()?n._mobileNotSupport("Addon.Webcam.GetCameraControlPropertySetting"):n._innerWebcamSettingFunction("GetWebcamCameraControlSetting",r.makeParams(e))},GetCameraControlPropertyMoreSetting:function(e){var n=t;return n._resetErr(),n._isMobileMode()?n._mobileNotSupport("Addon.Webcam.GetCameraControlPropertyMoreSetting"):n._innerWebcamMoreSettingFunction("GetWebcamCameraControlMoreSetting",r.makeParams(e))},SetCameraControlPropertySetting:function(e,n,i){var o=t;return o._resetErr(),o._isMobileMode()?o._mobileNotSupport("Addon.Webcam.SetCameraControlPropertySetting"):o._innerFun("SetWebcamCameraControlPropertySetting",r.makeParams(e,n,i))}}},t.__addon=t.__addon||{},e.mix(t.__addon,n)}))})),Z.AddonReady((function(e,t){var n;e.product.bActiveXEdition&&e.DynamicLoadAddonFuns&&e.DynamicLoadAddonFuns.push((function(t){var r,i,o;if(!t.getSWebTwain()||!t.getSWebTwain().Addon)return!1;Z.navInfo.bWin&&(n=(o=!Z.navInfo.bOSx64||Z.navInfo.bWOW64)?"DynamicWebcam_"+Z.WebcamVerForActiveX+".dll":"DynamicWebcamx64_"+Z.WebcamVerForActiveX+".dll"),r=t.getSWebTwain();try{r.GetAddOnVersion("webcam",n)}catch(i){}(o=t)._innerRead=function(e){var t;try{t=Z.Lib.parse(e)}catch(e){}return t.result},o._innerWebcamValueFunctionPlugin=function(e){return e=this._innerRead(e),this._innerSetWebcamValue(e)},o._innerWebcamSettingFunctionPlugin=function(e){return e=this._innerRead(e),this._innerSetWebcamSetting(e)},o._innerWebcamMoreSettingFunctionPlugin=function(e){return e=this._innerRead(e),this._innerSetWebcamMoreSetting(e)},i={Webcam:{IsModuleInstalled:function(){var i=r.GetAddOnVersion("webcam",n);return e.setErrorString(t),""!=i},Download:function(n,i,o){function a(){return Z.Lib.isFunction(i)&&i(),!0}function s(){return Z.Lib.isFunction(o)&&o(t.ErrorCode,t.ErrorString),!1}return e.License.checkProductKey(t,{Webcam:!0},!0)?this.IsModuleInstalled()?a():n&&""!=n?(n=r.DownloadAddon(n),e.wrapperRet(t,n,a,s)):(Z.Lib.Errors.Webcam_InvalidRemoteFilename(t),s()):s()},GetSourceList:function(){if(!e.License.checkProductKey(t,{Webcam:!0},!0))return[];var n=r.GetWebcamSourceList(),i=[];return e.setErrorString(t),0==t.ErrorCode&&(i=t._innerRead(n))&&1<i.length&&i.splice(i.length-1,1),i},SelectSource:function(n){return!!e.License.checkProductKey(t,{Webcam:!0},!0)&&(n=r.SelectWebcam(n),e.setErrorString(t),n)},CloseSource:function(){t._playVideoDWT=null;var n=r.StopCapture();return e.setErrorString(t),n},GetFramePartURL:function(){if(!this._isPlaying())return e.WebcamErrors.VideoNotPlayingWhenGetURL(t),"";var n=r.GetDIB(-1);return e.setErrorString(t),n},GetFrameURL:function(){return""},PlayVideo:function(n,i,o,a,s){function u(){return t._playVideoDWT=null,Z.Lib.isFunction(s)&&s(t.ErrorCode,t.ErrorString),!1}if(!n||!n.getSWebTwain())return Z.Lib.WebcamErrors.InvalidParameter(t),u();if(!e.License.checkProductKey(t,{Webcam:!0},!0))return u();var c=n.getSWebTwain().CurrentHWND;return c?(t._playVideoDWT=n,setTimeout((function(){var n=r.RunWebcamCmd("PlayVideo",c,null,null,o);e.wrapperRet(t,n,a,u)}),0),!0):(e.WebcamErrors.InvalidParameter(t),u())},PauseVideo:function(){return!0},StopVideo:function(){t._playVideoDWT=null;var n=r.RunWebcamCmd("StopVideo",0,null,null,null);return e.setErrorString(t),r.StopCapture(),n},CaptureImage:function(n,i){function o(){return Z.Lib.isFunction(i)&&i(t.ErrorCode,t.ErrorString),!1}if(!e.License.checkProductKey(t,{Webcam:!0},!0))return o();var a=r.RunWebcamCmd("Capture",0,(function(){e.isFunction(n)&&setTimeout(n,0),e.License.isLTS()&&Z.DWT.lcvrf(t)}),o,null);return e.setErrorString(t),a},GetMediaType:function(){var n=t._innerWebcamValueFunctionPlugin(r.GetMediaType());return e.setErrorString(t),n},SetMediaType:function(n){return e.isString(n)?(n=r.SetMediaType(n),e.setErrorString(t),n):(e.Errors.InvalidValue(t),!1)},GetResolution:function(){var n=t._innerWebcamValueFunctionPlugin(r.GetResolution());if(e.setErrorString(t),n&&n._resultlist){var i,o,a=n._resultlist,s=[],u=[];for(0<a.length&&(o=a[a.length-1]),i=0;i<a.length-1;i++){for(var c,l=(c=a[i]).toLowerCase().split("x"),d=(g=h=d=void 0,{value:c,p1:parseInt(l[0]),p2:parseInt(l[1])}),h=s,g=h.length-1;0<=g&&h[g].p1>=d.p1&&!(h[g].p1==d.p1&&h[g].p2<d.p2);)h[g+1]=h[g],g--;h[g+1]=d}for(i=0;i<s.length;i++)u.push(c=s[i].value);o&&u.push(o),n._resultlist=u,u=s=null}return n},SetResolution:function(n){return e.isNumber(n)||e.isString(n)?(n=r.SetResolution(n),e.setErrorString(t),n):(e.Errors.InvalidValue(t),!1)},GetFrameRate:function(){var n=t._innerWebcamValueFunctionPlugin(r.GetFrameRate());return e.setErrorString(t),n},SetFrameRate:function(n){return e.isNumber(n)?(n=r.SetFrameRate(n),e.setErrorString(t),n):(e.Errors.InvalidValue(t),!1)},GetVideoPropertySetting:function(n){return n=r.GetWebcamVideoPropertySetting(n),e.setErrorString(t),t._innerWebcamSettingFunctionPlugin(n)},GetVideoPropertyMoreSetting:function(n){return n=r.GetWebcamVideoPropertyMoreSetting(n),e.setErrorString(t),t._innerWebcamMoreSettingFunctionPlugin(n)},SetVideoPropertySetting:function(n,i,o){return n=r.SetWebcamVideoPropertySetting(n,i,o),e.setErrorString(t),n},SetVideoRotateMode:function(n){return n=r.SetVideoRotateMode(n),e.setErrorString(t),n},GetCameraControlPropertySetting:function(n){return n=r.GetWebcamCameraControlSetting(n),e.setErrorString(t),t._innerWebcamSettingFunctionPlugin(n)},GetCameraControlPropertyMoreSetting:function(n){return n=r.GetWebcamCameraControlMoreSetting(n),e.setErrorString(t),t._innerWebcamMoreSettingFunctionPlugin(n)},SetCameraControlPropertySetting:function(n,i,o){return n=r.SetWebcamCameraControlPropertySetting(n,i,o),e.setErrorString(t),n},_isPlaying:function(){return!!t._playVideoDWT}}},t.Addon=t.Addon||{},e.mix(t.Addon,i)}))})),(Z=q.Dynamsoft||{}).DWT=Z.DWT||{},Z.aryAddonReadyFun=Z.aryAddonReadyFun||[],Z.AddonReady=Z.AddonReady||function(e){Z.aryAddonReadyFun.push(e)},Z.CameraVerInName="17.3.0.0531",Z.AddonReady((function(e,t){if(e.product.bHTML5Edition&&!Z.navInfoSync.bIE){var n={757:function(e,t,n){e.exports=n(666)},666:function(e){e=function(e){var t,n=Object.prototype,r=n.hasOwnProperty,i=(v="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=v.asyncIterator||"@@asyncIterator",a=v.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(n){s=function(e,t,n){return e[t]=n}}function u(e,n,r,i){var o,a,s,u;return n=n&&n.prototype instanceof m?n:m,n=Object.create(n.prototype),i=new w(i||[]),n._invoke=(o=e,a=r,s=i,u=l,function(e,n){if(u===h)throw new Error("Generator is already running");if(u===g){if("throw"===e)throw n;return E()}for(s.method=e,s.arg=n;;){var r=s.delegate;if(r&&(r=function e(n,r){var i=n.iterator[r.method];if(i===t){if(r.delegate=null,"throw"===r.method){if(n.iterator.return&&(r.method="return",r.arg=t,e(n,r),"throw"===r.method))return f;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}return"throw"===(i=c(i,n.iterator,r.arg)).type?(r.method="throw",r.arg=i.arg,r.delegate=null,f):(i=i.arg)?i.done?(r[n.resultName]=i.value,r.next=n.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,f):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}(r,s))){if(r===f)continue;return r}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(u===l)throw u=g,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);if(u=h,"normal"===(r=c(o,a,s)).type){if(u=s.done?g:d,r.arg!==f)return{value:r.arg,done:s.done}}else"throw"===r.type&&(u=g,s.method="throw",s.arg=r.arg)}}),n}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var l="suspendedStart",d="suspendedYield",h="executing",g="completed",f={};function m(){}function p(){}function _(){}var v,I,y=(s(v={},i,(function(){return this})),(I=(I=Object.getPrototypeOf)&&I(I(C([]))))&&I!==n&&r.call(I,i)&&(v=I),_.prototype=m.prototype=Object.create(v));function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function D(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,s){var u;if("throw"!==(i=c(e[i],e,o)).type)return(o=(u=i.arg).value)&&"object"==typeof o&&r.call(o,"__await")?t.resolve(o.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(o).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,s)}));s(i.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function C(e){if(e){var n,o=e[i];if(o)return o.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return n=-1,(o=function i(){for(;++n<e.length;)if(r.call(e,n))return i.value=e[n],i.done=!1,i;return i.value=t,i.done=!0,i}).next=o}return{next:E}}function E(){return{value:t,done:!0}}return s(y,"constructor",p.prototype=_),s(_,"constructor",p),p.displayName=s(_,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){return!!(e="function"==typeof e&&e.constructor)&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,s(e,a,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},b(D.prototype),s(D.prototype,o,(function(){return this})),e.AsyncIterator=D,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new D(u(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),s(y,a,"Generator"),s(y,i,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t,n=[];for(t in e)n.push(t);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=C,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;0<=o;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}var a=(o=o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc?null:o)?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n,r,i=this.tryEntries[t];if(i.tryLoc===e)return"throw"===(n=i.completion).type&&(r=n.arg,S(i)),r}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:C(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),f}},e}(e.exports);try{regeneratorRuntime=e}catch(s){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}},r={};i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,{a:t}),t},i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){function e(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function t(t){return function(){var n=this,r=arguments;return new Promise((function(i,o){var a=t.apply(n,r);function s(t){e(a,i,o,s,u,"next",t)}function u(t){e(a,i,o,s,u,"throw",t)}s(void 0)}))}}var n=i(757),r=i.n(n),o=window.Dynamsoft;function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t){e.prototype=Object.create(t.prototype),u(e.prototype.constructor=e,t)}function l(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e;throw new TypeError("attempted to use private field on non-instance")}var d=0;function h(e){return"__private_"+d+++"_"+e}var g,f={code:0,message:"ok."},m={code:80001,message:"The parameter type is wrong."},p={code:80025,message:"The camera class is required."},_={code:80027,message:"The license of webcam is invalid."},v={code:80028,message:"The video is shown."},I={code:80033,message:"The options is invalid."},y={code:80034,message:"The file name is invalid."},b="_updateErrorMessage",D="_canvasClick",T="_afterRender",S="_documentClickUI",w="_pagerChangedUI",C="__dynamsoft_camera_files",E="dynamsoft-dvs-file",M="documentScanPage",P="original",A={scannerViewer:{maxDocuments:20,maxImagesInBuffer:20,fullScreen:!0,enableBorderDetection:!0,polygonStyle:{stroke:"#fe8e14",strokeWidth:"2px",dash:"solid"},headerStyle:{background:"#000000",color:"#ffffff",selectedColor:"#fe8e14"},bodyStyle:{background:"#ffffff"},footerStyle:{background:"#000000",color:"#ffffff",selectedColor:"#fe8e14"},scanButtonStyle:{background:"#fe8e14",color:"#ffffff"},resolution:{visibility:"visible",valueList:[{label:"720P",value:{width:1280,height:720}},{label:"1080P",value:{width:1920,height:1080}},{label:"2K",value:{width:2560,height:1440}},{label:"4K",value:{width:3840,height:2160}}],defaultValue:{width:1280,height:720}},autoDetect:{visibility:"visible",enableAutoDetect:!1,acceptedPolygonConfidence:0,acceptedBlurryScore:0},autoScan:{visibility:"visible",enableAutoScan:!1},continuousScan:{visibility:"visible",enableContinuousScan:!0},switchCamera:{visibility:"visible"},loadLocalFile:{visibility:"visible"}},documentEditorSettings:{visibility:"visible",headerStyle:{background:"#000000",color:"#ffffff",selectedColor:"#fe8e14",disabledColor:"#808080"},bodyStyle:{background:"#ffffff"},footerStyle:{background:"#000000",color:"#ffffff",selectedColor:"#fe8e14"},insert:{visibility:"visible",position:"before"},delete:{visibility:"visible"},rotateLeft:{visibility:"visible"},filter:{visibility:"visible",valueList:[{label:"Original",value:P,option:{level:1}},{label:"B&W",value:"blackAndWhite",option:{level:1}},{label:"Grayscale",value:"grayscale",option:{level:1}},{label:"Clean",value:"clean",option:{level:1}},{label:"Brightening",value:"brightening",option:{level:1}},{label:"Save Toner",value:"saveToner",option:{level:1}}],applyToAll:{visibility:"visible",enableApplyToAll:!0,label:"Apply to All"},defaultValue:P},cropViewer:{visibility:"visible",polygonStyle:{stroke:"#fe8e14",strokeWidth:"2px",dash:"solid"},rotateLeft:{visibility:"visible"},rotateRight:{visibility:"visible"},autoDetectBorder:{visibility:"visible"},apply:{visibility:"visible"}}}},x="error",R="cropViewer",k="mainViewer",L=function(){function e(e){this._updateData(e)}return e.prototype._updateData=function(e){var t=this;Object.keys(e).forEach((function(n){t[n]=e[n]}))},e}(),F={code:-4201,message:"HTTPS is required for accessing cameras."},W={code:-4202,message:"The current browser has not implemented the MediaDevices interface."},O={code:-4203,message:"The current browser has not implemented the getUserMedia interface."},B={code:-4205,message:"No camera is selected."},N={code:-4206,message:"A Video element is required for this operation."},V={code:-4207,message:"The camera is not plugged in."},U={code:-4208,message:"The camera is not open."},G={code:-4210,message:"Failed to get camera input."},j={code:-4211,message:"The camera source can not be found."},H={code:-4214,message:"The video must be playing for the capture operation to work."},z={code:-4215,message:"The video is already playing. Please stop the video before attempting to play it again to a different container."},K={code:-4216,message:"No camera is found."},J={code:-4217,message:"The license is invalid."},Y={code:-4219,message:"The number of images processed exceeded memory limit."},X={code:-4220,message:"No image is found for the capture operation."},Q={code:-4221,message:"The image format is not support."},Z={code:-4222,message:"The resolution is not support."},q=((n=g=g||{}).iconResolution="dynamsoft-camera-icon-resolution",n.iconAutoDetect="dynamsoft-camera-icon-autoDetect",n.iconClose="dynamsoft-camera-icon-close",n.iconLoad="dynamsoft-camera-icon-loadLocalFile",n.iconSwitch="dynamsoft-camera-icon-switchCamera",n.iconCapture="dynamsoft-camera-icon-scan",n.iconAutoCapture="dynamsoft-camera-icon-autoScan",n.iconContinuous="dynamsoft-camera-icon-continuous",n.iconBack="dynamsoft-camera-icon-back",n.iconArrow="dynamsoft-camera-icon-arrow",n.iconDelete="dynamsoft-camera-icon-remove",n.iconInsert="dynamsoft-camera-icon-insert",n.iconRotateLeft="dynamsoft-camera-icon-rotateLeft",n.iconFilter="dynamsoft-camera-icon-filter",n.iconCrop="dynamsoft-camera-icon-crop",n.iconSave="dynamsoft-camera-icon-save",n.iconRotateRight="dynamsoft-camera-icon-rotateRight",n.iconFullCrop="dynamsoft-camera-icon-autoDetectBorder",n.iconNext="dynamsoft-camera-icon-next",n.uiIcon="dynamsoft-camera-ui-icon",n.uiExitMutiple="dynamsoft-camera-ui-exitMutiple",n.uiCapture="dynamsoft-camera-ui-capture",n.uiDetect="dynamsoft-camera-ui-detect",n.uiPrevious="dynamsoft-camera-ui-previous",n.uiNext="dynamsoft-camera-ui-next",n.uiDelete="dynamsoft-camera-ui-delete",n.uiSave="dynamsoft-camera-ui-save",n.displayNone="dynamsoft-camera-display-none",n.fixedFull="dynamsoft-camera-fixed-full",n.font="dynamsoft-camera-font",n.disable="dynamsoft-camera-disable",n.filterDropDown="dynamsoft-camera-filterDropDown",n.buttonMultipleImg="dynamsoft-camera-button-multipleImg",n.filterApplyAll="dynamsoft-camera-filterApplyAll",n.hidden="dynamsoft-camera-display-none",n.previewImg="dynamsoft-camera-previewImg",n.cameraVideo="dynamsoft-camera-cameraVideo",n.cameraCvs="dynamsoft-camera-cameraCvs",n.cameraContainer="dynamsoft-camera-cameraContainer",n.overflowHidden="dynamsoft-camera-overflowHidden",n.relative="dynamsoft-camera-relative",n.cvsContainer="dynamsoft-camera-cvsContainer",n.detectCvs="dynamsoft-camera-detectCvs",n.documentScanPage="dynamsoft-camera-scanPage",n.documentEditPage="dynamsoft-camera-documentEditPage",n.cropPage="dynamsoft-camera-cropPage",n.block="dynamsoft-camera-block",n.capturing="dynamsoft-camera-capturing",n.headerfont="dynamsoft-camera-header-icon-font",n.footerfont="dynamsoft-camera-footer-icon-font",n.headerSelected="dynamsoft-camera-header-selected",n.footerSelected="dynamsoft-camera-footer-selected",n.filterSelectedItem="dynamsoft-camera-filter-selected",n.filterCheckBox="dynamsoft-camera-filter-checkBox",n.filterCheckedBox="dynamsoft-camera-filter-checkedBox",n.ddlSelectedItem="dynamsoft-camera-ddl-selected",n.BUTTON_PREFIX="dynamsoft-camera-button-",["blobList"]);function $(e){e&&!e.isDestroyed&&e.destroy()}function ee(){return(ee=t(r().mark((function e(t,n){var i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n=!0),t){e.next=4;break}return document.body.classList.remove(g.overflowHidden),e.abrupt("return");case 4:if(!t.element){e.next=25;break}if(i=t.container){e.next=15;break}if(t.container=document.body,n)return e.next=11,t.show();e.next=11;break;case 11:return t.element.classList.add(g.fixedFull),document.body.appendChild(t.element),document.body.classList.add(g.overflowHidden),e.abrupt("return");case 15:if(!(i=Xe(i)?document.getElementById(i):i)){e.next=25;break}if(document.body.classList.contains(g.overflowHidden)&&document.body.classList.remove(g.overflowHidden),document.body===i&&document.body.classList.add(g.overflowHidden),"static"===window.getComputedStyle(i).position&&document.body!==i&&i.classList.add(g.relative),i.appendChild(t.element),t.container=i,n)return e.next=25,t.show();e.next=25;break;case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(){return ne.apply(this,arguments)}function ne(){return(ne=t(r().mark((function e(t,n,i){var a,s,u,c,l;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=!1,i&&(a=Te(i),s=st(a,t.imageWidth,t.imageHeight)),c=!1,l={quality:85,returnType:o.Enum_ImageType.IT_BGRA,returnBlob:!1},!s&&i&&(Ke(a)&&8==a.length&&(u={points:a}),c=!0),e.abrupt("return",we(t,n,u,c,l,!1).then((function(e){return t.imageData=e.src,ze(e.result),e.result})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(e,t){var n,r=void 0===(r=(o=et(void 0===(o=e.config)?{}:o,"documentEditorSettings.filter")).defaultValue)?P:r,i=o.applyToAll,o=o.valueList;return(n=(n=i&&i.enableApplyToAll&&Xe(e.filterApplyToAllValue)&&""!=e.filterApplyToAllValue?e.filterApplyToAllValue:n)||(n=Xe(t)&&""!=t?t:n)||r)!==P&&o.some((function(e){return e.value===n}))?n:P}function ie(){return(ie=t(r().mark((function e(t,n,i,o){var a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=re(t,o))===P)return e.abrupt("return",{filterValue:a,filterBlob:i});e.next=3;break;case 3:return e.next=5,t.filterHandlerByIImageData(n,i,a);case 5:return e.abrupt("return",{filterValue:a,filterBlob:e.sent});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(){return ae.apply(this,arguments)}function ae(){return(ae=t(r().mark((function e(t,n,i,a,s,u,c){var l,d,h,g,f,m,p,_,v,I;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===i&&(i=!1),void 0===a&&(a=!1),void 0===s&&(s=!1),!u){e.next=14;break}if(!s){e.next=11;break}e.next=7;var r=t;return o.ImageProcWrapper.createImage({source:r,output:{orgImage:!1,previewImage:{quality:85,width:200,height:200,returnType:o.Enum_ImageType.IT_JPG,returnBlob:!0,nInterplationMethod:5}}}).then((function(e){return r.imageData=e.src,ze(e.preview),e.preview}));case 7:l=new L({oriBlob:u,preview:l=e.sent}),e.next=12;break;case 11:l=new L({oriBlob:u});case 12:e.next=21;break;case 14:return s||(d=!1),e.next=17,we(t,void 0,void 0,void 0,void 0,d);case 17:t.imageData=(h=e.sent).src,ze(h.result),l=s?(ze(h.preview),new L({oriBlob:h.result,preview:h.preview})):new L({oriBlob:h.result});case 21:if(h=et(n,"config.scannerViewer"),g=t.imageWidth,f=t.imageHeight,m=void 0===(m=h.enableBorderDetection)||m)return e.next=26,de(t,n);e.next=40;break;case 26:if(v=function(e,t,n){return e.map((function(e,r){return r%2==0?(r=e,r=Math.max(0,e),Math.min(r,t)):(r=Math.max(0,e),Math.min(r,n))}))}(Te((m=e.sent).cornerPoints),g,f),l.detectArea=v,a||i)return e.next=33,te(t,void 0,l.detectArea);e.next=38;break;case 33:return p=e.sent,e.next=36,ue(p);case 36:_=e.sent,i&&(l.resImage=p,l.resBlob=He(_));case 38:e.next=43;break;case 40:l.detectArea=[0,0,g,0,g,f,0,f],a&&(p=t,_=l.oriBlob),i&&(l.resImage=t,l.resBlob=He(l.oriBlob));case 43:if(a)return e.next=46,function(){return ie.apply(this,arguments)}(n,p,_,c);e.next=51;break;case 46:I=(v=e.sent).filterBlob,l.filterValue=v.filterValue,l.filterBlob=I;case 51:return _=p=null,e.abrupt("return",l);case 54:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(e,t,n,r){return Ee.log("blobToImageData"),we(e,t,n,r,{quality:85,returnType:o.Enum_ImageType.IT_BGRA,returnBlob:!1},!1).then((function(e){return ze(e.result),e.result}))}function ue(e){return Ee.log("ImageDataToBlob"),we(e,void 0,void 0,void 0,{quality:85,returnType:o.Enum_ImageType.IT_JPG,returnBlob:!0},!1).then((function(t){return e.imageData=t.src,ze(t.result),t.result}))}function ce(){return le.apply(this,arguments)}function le(){return(le=t(r().mark((function e(t,n,i){var o,a,s,u,c,l,d,h;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.getCurrentPage()){e.next=3;break}return e.abrupt("return");case 3:if(a=o.getHtmlElement()){e.next=6;break}return e.abrupt("return");case 6:if(s=null==a?void 0:a.querySelector("."+g.buttonMultipleImg)){e.next=9;break}return e.abrupt("return");case 9:if(u=o.queryPreviewImageElement()){e.next=12;break}return e.abrupt("return");case 12:if(!(c=n).preview){e.next=16;break}e.next=26;break;case 16:return e.next=18,se(c.oriBlob);case 18:return d=e.sent,c.detectArea&&(l={cornerPoints:c.detectArea}),e.next=22,ye(t,l,d,!1,!1);case 22:c.preview=(d=e.sent).preview,delete d.preview,d=null;case 26:return e.next=28,new Promise((function(e,t){var n=u.src;u.src=rt.createURL(c.preview),c.detectArea&&u.setAttribute("data",JSON.stringify(c.detectArea)),je(c),c=null,u.onload=function(){u.onload=null,n&&rt.revokeObjectURL(n),e(!0)},u.onerror=function(e){t(e)}}));case 28:h=null==s?void 0:s.querySelector(".dynamsoft-camera-imgCount"),0<i?(h.innerText=String(i),h.classList.remove(g.displayNone)):(h.innerText="",h.classList.add(g.displayNone)),h=null==a?void 0:a.querySelector("."+g.BUTTON_PREFIX+"continuousMode"),s.classList.remove(g.displayNone),null!=h&&h.classList.add(g.footerSelected);case 33:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(){return he.apply(this,arguments)}function he(){return(he=t(r().mark((function e(t,n){var i,o,a,s,u,c,l,d,h;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.imageWidth,o=t.imageHeight,a=void 0===(a=(s=void 0===(s=(s=n.config.scannerViewer||{}).autoDetect)?{}:s).acceptedPolygonConfidence)?80:a,s=void 0===(s=s.acceptedBlurryScore)?80:s,u=n.getAreaDetectCallback()){e.next=7;break}return n.emit(x,{message:"The detect function is not bind.",code:-4290}),e.abrupt("return",{cornerPoints:[],detectedArea:!1});case 7:return e.next=9,u(t,a,s,void 0,void 0);case 9:return t.imageData=(c=e.sent).src,l=void 0===(l=c.confidence)?[0]:l,d=void 0===(d=c.blurryScore)?0:d,h=c.cornerPoints,n.emit("documentDetected",c),l[0]<a/100||d<s||h.every((function(e){return 0===e}))?(c.detectedArea=!1,c.cornerPoints=[0,0,i,0,i,o,0,o]):c.detectedArea=!0,e.abrupt("return",c);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ge(){return(ge=t(r().mark((function e(t,n,i,o,a){var s,u,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a===P)return e.abrupt("return",n);e.next=2;break;case 2:if(s=i.find((function(e){return e.label===a})),u=o.find((function(e){return e.value===a})),s&&s.handler&&u){e.next=6;break}return e.abrupt("return",n);case 6:return e.next=8,se(n);case 8:return c=e.sent,e.next=11,s.handler(c,u.option);case 11:return e.abrupt("return",(c=e.sent).result);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fe(){return(fe=t(r().mark((function e(t,n,i,o,a){var s,u,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a===P)return e.abrupt("return",n);e.next=2;break;case 2:if(s=i.find((function(e){return e.label===a})),u=o.find((function(e){return e.value===a})),s&&s.handler&&u){e.next=6;break}return e.abrupt("return",n);case 6:return e.next=8,s.handler(t,u.option);case 8:return t.imageData=(c=e.sent).src,ze(c.result),e.abrupt("return",c.result);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(e,t){var n=(e=e||{}).iconCss;return e=void 0===(e=e.visibility)||e,n&&(t.icon=n),(Xe(e)&&"hidden"==e.toLowerCase()||!1===e)&&(t.visibility="hidden"),t}function pe(){return(pe=t(r().mark((function e(t,n,i,o){var s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i)return s=function(e,t){if(null==e)return{};for(var n,r={},i=Object.keys(e),o=0;o<i.length;o++)0<=t.indexOf(n=i[o])||(r[n]=e[n]);return r}(o,q),e.next=4,Promise.resolve(i([{iImageData:n,file:a({},s)}]));e.next=8;break;case 4:!1!==e.sent&&t.redirectToHome(),e.next=9;break;case 8:t.redirectToHome();case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _e(){return(_e=t(r().mark((function e(t,n,i,o){var a,s,u,c,l,d,h,g,f,m,p,_,v,I,y,b,D,T,S,w,C;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.getCurrentPage(),s=void 0===(s=(void 0===(s=t.config.scannerViewer)?{}:s).continuousScan)?{}:s,0==n.length)return e.abrupt("return");e.next=5;break;case 5:if(s.enableContinuousScan||1!=n.length){e.next=20;break}return u=n[0],e.next=9,se(u);case 9:return c=e.sent,e.next=12,oe(c,t,!1,!1,!1,u);case 12:return d={cornerPoints:d=(d=e.sent).detectArea,detectedArea:!0},e.next=17,ve(t,c,!1,d,i,u);case 17:a instanceof kt&&a.enableMultiImages(),e.next=56;break;case 20:if(l=a.getImageCount(),f=g=void 0===(g=(d=t.config.scannerViewer||{}).maxDocuments)?20:g,h=n.length,(l+n.length>f||l+n.length>g)&&(t.emit("video-error",Y),h=f-l),g=a.getDvs(),!(0<h)){e.next=56;break}f=re(t,null),_=p=0;case 30:if(_<h)return v=n[_],e.next=34,se(v);e.next=46;break;case 34:return I=e.sent,e.next=37,oe(I,t,!0,!0,!1,v,f);case 37:y=(I=e.sent).filterBlob,b=I.resBlob,D=I.detectArea,T=I.oriBlob,w=Ae(S=o?T:y||b),m=D,g.DataControl.appendSync(i,[{oriData:S.imageData,metadata:w,customData:{oriBlob:T,angle:p,detectArea:D,filterValue:f,resBlob:y||b}}]);case 43:_++,e.next=30;break;case 46:return C={oriBlob:n[h-1],detectArea:m},e.next=49,ce(t,C,l+h);case 49:if(je(C),C=null,s.enableContinuousScan){e.next=56;break}if(a instanceof kt)return a.enableMultiImages(),e.next=56,Ne(null,{dcs:t});e.next=56;break;case 56:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ve(){return Ie.apply(this,arguments)}function Ie(){return(Ie=t(r().mark((function e(t,n,i,o,a,s){var u,c,l,d,h,g,f,m,p,_,v,I,y,b,D,T,S,w;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=t.getCurrentPage(),l=c.options,d=void 0===(d=(void 0===(d=t.config.scannerViewer)?{}:d).continuousScan)?{}:d,h=void 0===(h=(h=et(t,"config.documentEditorSettings.cropViewer")).visibility)||h,g=n,f=void 0===(f=(void 0===(f=t.config)?{}:f).documentEditorSettings)?{}:f,_=p=void 0===(p=(p=t.config.scannerViewer||{}).maxDocuments)?20:p,m=c.getImageCount()+1,Ee.log("continuous mode."),_<m||p<m)return Ee.log("maxImagesInBuffer."),t.emit("video-error",Y),(t.config.scannerViewer.autoScan.enableAutoScan||t.config.scannerViewer.autoDetect.enableAutoDetect)&&(_=t.captureLoop.getLoopType(),t.captureLoop.stopCaptureLoop(),t.captureLoop.changeStyle(),t.captureLoop._setLoopType(_),t.captureLoop.setDisable()),e.abrupt("return");e.next=17;break;case 17:if(d.enableContinuousScan){e.next=61;break}if(t.showLoading("handle sigle image"),Ee.log("not continuous mode."),t.stop(),h)return Ee.log("get BlobItem no filter+noPerspective+no preview"),e.next=25,oe(g,t,!1,!1,!1,s);e.next=30;break;case 25:u=e.sent,i&&t.setImageDataBack(g.imageData),u.filterValue=re(t,null),e.next=48;break;case 30:return Ee.log("get BlobItem filter+Perspective+no preview"),e.next=33,oe(g,t,!0,!0,!1,s);case 33:if(u=e.sent,i&&(t.setImageDataBack(g.imageData),delete g.imageData),_=(p=u).filterBlob,I=p.resBlob,y=u.resImage,(r=u)&&(Ue(r),Ge(r),je(r)),y&&delete u.resImage,_&&delete u.filterBlob,"hidden"==f.visibility.toString().toLowerCase())return y={blobList:[]},e.next=44,function(){return pe.apply(this,arguments)}(t,_||I,l.onSaveCapture,y);e.next=48;break;case 44:return t.captureLoop&&t.captureLoop.setIsLooping(!1),t.emit("focusPage"),t.hideLoading("handle sigle image"),e.abrupt("return");case 48:if(t.emit("blurPage"),v=t.getCurrentPage())return v.hide(),(I=v.getDvs()).DataControl.appendSync(a,[{oriData:(y=u.resBlob||u.oriBlob).imageData,metadata:Ae(y),customData:{oriBlob:u.oriBlob,detectArea:u.detectArea,filterValue:u.filterValue}}]),e.next=57,v.clickMultipleImage();e.next=57;break;case 57:v instanceof kt&&(v.enableMultiImages(),v.setPreviewImageFlag()),t.hideLoading("handle sigle image"),e.next=74;break;case 61:return e.next=63,ye(t,o,g,i,!0);case 63:return D=(T=b=e.sent).oriBlob,T=T.detectArea,S=re(t,null),w=Ae(D),c.getDvs().DataControl.appendSync(a,[{oriData:D.imageData,metadata:w,customData:{oriBlob:D,detectArea:T,angle:0,filterValue:S}}]),e.next=72,ce(t,b,m);case 72:je(b),b=null;case 74:case"end":return e.stop()}var r}),e)})))).apply(this,arguments)}function ye(){return be.apply(this,arguments)}function be(){return(be=t(r().mark((function e(t,n,i,o,a){var s,u,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ee.log("package to BlobItem"),t.config.scannerViewer.enableBorderDetection){e.next=5;break}s={},e.next=12;break;case 5:if(!n){e.next=9;break}s=n,e.next=12;break;case 9:return e.next=11,de(i,t);case 11:s=e.sent;case 12:u=s.cornerPoints,c=void 0===(c=(c=et(t,"config.scannerViewer")).polygonStyle)?{stroke:"#fe8e14",strokeWidth:"2px",dashed:"solid"}:c,Ee.log("get detected preview"),e.next=18;var r,l=i,d=u,h=c,g=a,f="fe8e14";return h&&Xe(h.stroke)&&0==h.stroke.indexOf("#")&&(f=h.stroke.substr(1)),d&&(r={points:h=Te(d),lineWidth:5,strokeColor:f}),we(l,void 0,r,!1,g,!0).then((function(e){return l.imageData=e.src,e&&(ze(e.result),ze(e.preview)),e}));case 18:return c=e.sent,Ee.log("get detected preview ok"),o&&(t.setImageDataBack(i.imageData),delete i.imageData),e.abrupt("return",new L({oriBlob:c.result,preview:c.preview,detectArea:u}));case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function De(e){if(!e)return[];for(var t=0;t<e.length;t++)e[t]=Math.fround(e[t]);return e}function Te(e){var t;return e=function(e){var t=e.slice().sort((function(e,t){return e.y-t.y}))[0],n=e.indexOf(t),r=e[n-1],i=e[n+1];return 0===n&&(r=e[3]),r={x:t.x-r.x,y:t.y-r.y},i={x:i.x-t.x,y:i.y-t.y},r=Se(t={x:10,y:0},r),t=Se(t,i),i=n,r<t&&(i=0===n?3:n-1),e.slice(i).concat(e.slice(0,i))}(function(e){var t;if(e&&8===e.length)return e=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push({x:e[n],y:e[n+1]});return t}(e),t=function(e){var t={x:0,y:0};return e.forEach((function(e){t.x+=e.x,t.y+=e.y})),t.x/=e.length,t.y/=e.length,t}(e),e.sort((function(e,n){return Math.atan2(e.y-t.y,e.x-t.x)-Math.atan2(n.y-t.y,n.x-t.x)})),e}(e)),t=[],e.forEach((function(e){t.push(e.x,e.y)})),t}function Se(e,t){var n=Math.pow(Math.pow(e.x,2)+Math.pow(e.y,2),.5),r=Math.pow(Math.pow(t.x,2)+Math.pow(t.y,2),.5);return e=e.x*t.x+e.y*t.y,Math.acos(e/(n*r))}function we(e,t,n,r,i,a){var s;return Ze(e,(s={polygon:s=void 0,doPerspective:s,source:{angle:s},output:{orgImage:s,previewImage:s}}).source),s.source.angle=t,n&&Ke(n.points)&&8==n.points.length&&(s.polygon=n,r&&(s.doPerspective=!0)),!1!==i&&(s.output.orgImage=i instanceof Object?i:{quality:85,returnType:o.Enum_ImageType.IT_JPG,returnBlob:!0}),!1!==a&&(s.output.previewImage=a instanceof Object?a:{quality:85,width:200,height:200,returnType:o.Enum_ImageType.IT_JPG,returnBlob:!0,nInterplationMethod:5}),o.ImageProcWrapper.createImage(s)}function Ce(e){return(e%=360)<0&&(e+=360),e}var Ee={log:function(e,t,n,r){window.Dynamsoft&&window.Dynamsoft.Lib.debug&&window.Dynamsoft.Lib.log(e,t,n,r)},error:function(e){window.Dynamsoft&&window.Dynamsoft.Lib.error(e)}};function Me(){return Pe.apply(this,arguments)}function Pe(){return(Pe=t(r().mark((function e(t,n,i,a,s){var u,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===s&&(s={}),e.next=3,n.DataControl.getData(i);case 3:return u=e.sent.customData,c=Ae(t),u?a&&(Ge(u),je(u)):u={},s&&(o.Lib.each(a?["angle","detectArea","filterValue","bitDepth"]:["angle","detectArea","filterValue","bitDepth","resBlob","preview"],(function(e){void 0!==s[e]&&(u[e]=s[e])})),!u.oriBlob&&s.oriBlob&&(u.oriBlob=He(s.oriBlob))),n.DataControl.updateSync(i,{oriData:t.imageData,metadata:c,customData:u},!0),e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ae(e){return{width:e.imageWidth,height:e.imageHeight,bitDepth:e.imageBitDepth,resolutionX:e.imageXResolution,resolutionY:e.imageYResolution,rgba:e.rgba,bgra:e.bgra}}function xe(e){return{imageWidth:e.width,imageHeight:e.height,imageBitDepth:e.bitDepth,imageXResolution:e.resolutionX,imageYResolution:e.resolutionY}}function Re(e){var t=null==e?void 0:e.querySelectorAll(".dynamsoft-camera-preFilter");if(t)for(var n=0;n<t.length;n++){var r=t[n];r&&"IMG"==r.tagName&&r.src&&(rt.revokeObjectURL(r.src),r.onload=null,r.parentNode.remove())}}function ke(e){var t,n=e.getCurrentPage();!n||(n=n.getHtmlElement())&&((t=null==n?void 0:n.querySelector("."+g.filterDropDown))&&(Re(t),e&&e.removeGlobalClickEvent(t),t.remove()),null!=n&&null!=(e=n.querySelector("."+g.filterDropDown))&&e.remove())}function Le(e){var t,n,r;return(o.navInfo.biPhone||o.navInfo.biPad)&&(t=5,n=85,r=3840),o.ImageProcWrapper.getMax4kImage(e,t,n,r)}function Fe(e){var t=void 0===(t=e.defaultViewerName)?R:t,n=e.cropViewer,r=!0;return e=e.visibility,(Xe(n=(void 0===n?{}:n).visibility)&&"hidden"==n.toLowerCase()||Xe(e)&&"hidden"==e.toLowerCase())&&(r=!1),t=t.toLowerCase(),!(!r||t!=R.toLowerCase())}function We(){return(We=t(r().mark((function e(t,n,i,o,a){var s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Fe(i))return s={fileName:o,initFileName:o,curIndex:-1,saveData:!1,fromInternal:a},e.next=5,t.showCropPage(s,n);e.next=7;break;case 5:e.next=10;break;case 7:return s={fileName:o,initFileName:o,curIndex:-1,saveData:!1,fromInternal:a,visibility:i.visibility},e.next=10,t.showDocumentEditPage(s,n);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oe(e){return null==e||(Xe(e)&&e.toLowerCase(),"hidden"!==e&&!1!==e)}function Be(e,t){return!Xe(e)&&t==P||e==t}function Ne(e,t){return Ve.apply(this,arguments)}function Ve(){return(Ve=t(r().mark((function e(t,n){var i,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=(i=n.dcs).getCurrentPage()){e.next=4;break}return e.abrupt("return");case 4:return i.hideLoading("handle multiple image"),i.emit("blurPage"),i.stop(),e.next=9,o.clickMultipleImage();case 9:o.setPreviewImageFlag();case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ue(e){e&&e.oriBlob&&(delete e.oriBlob.imageData,delete e.oriBlob)}function Ge(e){e&&e.resBlob&&(delete e.resBlob.imageData,delete e.resBlob)}function je(e){e&&e.preview&&(Je(e.preview)&&delete e.preview.imageData,delete e.preview)}function He(e){var t;return e&&(Je(e)&&e.imageData?(t={},o.Lib.each(["imageHeight","imageWidth","imageBitDepth","imageXResolution","imageYResolution","rgba","bgra","imageData"],(function(n){void 0!==e[n]&&(t[n]=e[n])}))):t=e),t}function ze(e){e&&(delete e.code,delete e.message)}function Ke(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}function Je(e){return"[object Object]"===Object.prototype.toString.call(e)}function Ye(e){return"function"==typeof e}function Xe(e){return"string"==typeof e}function Qe(e){return"number"==typeof e&&!Number.isNaN(e)}function Ze(e,t){for(var n in e)void 0===t[n]?t[n]=e[n]:Je(e[n])&&Je(t[n])?Ze(e[n],t[n]):void 0!==e[n]&&(t[n]=e[n]);return t}function qe(e){if(null==e||"object"!=typeof e)return e;var t,n,r;if(e instanceof Date)return(t=new Date).setTime(e.getTime()),t;if(e instanceof Array){for(t=[],r=e.length,n=0;n<r;n++)t[n]=qe(e[n]);return t}if(e instanceof Object){for(n in t={},e)e.hasOwnProperty(n)&&(t[n]=qe(e[n]));return t}return Qe(e)||"[object Boolean]"===Object.prototype.toString.call(e)?e:Xe(e)?new String(e):{}}function $e(e,t){e&&e.emit(x,t)}function et(e,t){return t.split(".").reduce((function(e,t){return e[t]||{}}),e)}function tt(e){var t,n,r;return(o.navInfo.biPhone||o.navInfo.biPad)&&(t=5,n=85,r=3840),o.ImageProcWrapper.getMax4kImage(e,t,n,r)}var nt="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",rt={windowURL:window.URL||window.webkitURL,createURL:function(e){return Xe(e)?e:function(e){if(Xe(e)||void 0===e)return{type:"string",data:e};if(e instanceof Blob)return{type:"object",data:rt.createObjectURL(e)};if(e.imageData&&e.imageData instanceof Blob)return{type:"object",data:rt.createObjectURL(e.imageData)};if(e.imageData){var t=Object.prototype.toString.call(e.imageData);if(/\[object \w*Array\w*\]/.test(t))return{type:"object",data:rt.createObjectURL(new Blob([e.imageData]))}}else if(t=Object.prototype.toString.call(e),/\[object \w*Array\w*\]/.test(t))return{type:"object",data:rt.createObjectURL(new Blob([e]))};return/data:image\/\w+;base64/.test(e)?{type:"string",data:e}:{type:"object",data:e}}(e).data},createObjectURL:function(e){return e?(e=rt.windowURL.createObjectURL(e),Ee.log("createObjectURL:"+e),e):""},revokeObjectURL:function(e){Ee.log("revokeObjectURL:"+e),Xe(e)&&0==e.indexOf("blob:http")&&rt.windowURL.revokeObjectURL(e)}};function it(e){var t=Math.random().toString(35).substring(2);return t.length<11&&(t+=Math.random().toString(35).substring(2)),e=Math.max(Math.min(Math.round(e),11),8),t.substring(0,e)}function ot(e,t){if(e==t)return 1;var n=!1;if(Ke(e)&&Ke(t)){var r=e.length;if(r==t.length){n=!0;for(var i=0;i<r;i++)if(!at(e[i],t[i])){n=!1;break}}}return n}function at(e,t,n){return void 0===n&&(n=1),Math.abs(e-t)<n}function st(e,t,n){var r,i,o,a,s,u,c;return!(!Ke(e)||8!=e.length)&&(r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],e=e[7],at(r,0)&&at(i,0)&&at(o,t)&&at(a,0)&&at(s,t)&&at(u,n)&&at(c,0)&&at(e,n))}n=function(){function e(e){this._evtIds=[],this._oPub=null,this._bDisposePub=!1,e?this._oPub=e:(this._oPub=new ut,this._bDisposePub=!0)}var t=e.prototype;return t.getPublishSubscribe=function(){return this._oPub},t._on=function(e,t){t=this._oPub.on(e,t),this.push(e,t)},t._emit=function(e){for(var t,n=arguments.length,r=new Array(1<n?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];null!=(t=this._oPub)&&t.emit.apply(t,[e].concat(r))},t._off=function(e,t){var n;null!=(n=this._oPub)&&n.off(e,t)},t.push=function(e,t){this._evtIds.push({name:e,id:t})},t.dispose=function(){if(this._oPub){for(var e=this._evtIds.length,t=0;t<e;t++){var n=this._evtIds[t];this._oPub.offById(n.name,n.id)}this._bDisposePub&&this._oPub&&this._oPub.dispose()}this._oPub=null},e}();var ut=function(){function e(){this._events={}}var t=e.prototype;return t.on=function(e,t,n){this._events[e]||(this._events[e]=[]);var r=it(10);return this._events[e].push({fn:t,once:n,evtId:r}),r},t.once=function(e,t){this.on(e,t,!0)},t.emit=function(e){var t=this._events[e];if(!t||0===t.length)return!1;for(var n=t.length,r=arguments.length,i=new Array(1<r?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];for(var a=0;a<n;a++){var s,u=t[a];u&&((s=u.fn).call.apply(s,[null].concat(i)),u.once&&(t.splice(a,1),a--))}},t.emitEx=function(e){var t=this._events[e];if(!t||0===t.length)return Promise.resolve(!0);for(var n=t.length,r=Promise.resolve(!0),i=arguments.length,o=new Array(1<i?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];if(1===t.length)return(e=null==(e=t[0])?void 0:(e=e.fn).call.apply(e,[null].concat(o)))instanceof Promise?e:r;for(var s=0;s<n;s++){var u=t[s];u&&function(){var e,n=(e=u.fn).call.apply(e,[null].concat(o));n instanceof Promise&&(r=r.then((function(){return n}))),u.once&&(t.splice(s,1),s--)}()}return r},t.off=function(e,t){var n=this._events[e];if(!n)return!1;if(t)for(var r=n.length-1;0<=r;r--){var i=n[r];i&&i.fn===t&&n.splice(r,1),i=null}else n&&(n.length=0)},t.offById=function(e,t){var n=this._events[e];if(!n)return!1;if(t)for(var r=n.length-1;0<=r;r--){var i=n[r];if(i&&i.evtId===t){n.splice(r,1);break}i=null}else n&&(n.length=0)},t.dispose=function(){for(var e=Object.keys(this._events),t=0,n=e.length;t<n;t++){var r;(r=this._events[r=e[t]])&&r.splice(0),r=null}this._events={}},e}(),ct=function(){function e(e,t){this.name="",this.icon="",this.text="",this.color="",this.className="",this.onclick=null,this.element=null,this.options=e,this.context=t,this.element=this._initEl()}var t=e.prototype;return t._initEl=function(){var e,t,n,r,i,o,a,s,u,c,l=(S=this.options).icon,d=S.text,h=S.colorStyle,f=S.className,m=S.bHeader,p=S.onclick,_=S.name,v=S.onmount,I=S.onunmount,y=S.dropdown,b=void 0===(b=S.order)?0:b,D=S.onSelected,T=void 0!==(T=S.isSelected)&&T,S=void 0===(S=S.visibility)?"visible":S,w=this.context,C=document.createElement("div");if(this.name=_,"capture"==this.name&&(C.style.background=h.background),f){if("hidden"===S)return C.className=f+" "+g.block,C;C.className=f}return C.style.order=String(b),_=C,f=h.color,(S=l)&&((b=document.createElement("i")).className=S,b.style.color=f,_.appendChild(b)),l=C,(S=d)&&((f=document.createElement("p")).innerText=S,l.appendChild(f)),e=C,n=w,r=T,(t=v)&&setTimeout((function(){t(e,n,r)}),0),I&&(this._unmount=I.bind(null,C,w)),i=p,o=w,C.addEventListener("click",(function(e){Xe(i)?o.dcs.emit(i,e,o):Ye(i)&&i(e,o),e.preventDefault()})),s=D,u=w,b=m,(c=a=C).bSelected=_=T,c.bHeader=b,s&&(_&&a.classList.add(b?g.headerSelected:g.footerSelected),a.addEventListener("click",(function(e){c.bSelected=!c.bSelected,a.classList[c.bSelected?"add":"remove"](c.bHeader?g.headerSelected:g.footerSelected),null!=s&&s(c.bSelected,u),e.preventDefault()}))),function(){lt.apply(this,arguments)}(C,w,y,h),C},t.destroy=function(){var e;null!=(e=this._unmount)&&e.call(this),this.element=null},t.update=function(){var e,t;this.element&&(t=this._initEl(),null!=(e=this.element.parentElement)&&e.insertBefore(t,this.element),this.element.remove(),this.element=t)},t.setSelected=function(e){var t=this.options.onSelected;t&&t(e,this.context)},e}();function lt(){return(lt=t(r().mark((function e(t,n,i,o){var a,s,u,c,l,d,h,f;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,f=function(e,t,n){t.dataset.showDropdown="false",e.onclick=function(r){"true"!=t.dataset.showDropdown&&(t.classList.remove(g.displayNone),e.classList.add(g.headerSelected),t.dataset.showDropdown="true",r.stopPropagation(),n.dcs.addGlobalClickEvent(t,(function(){return!(!t||"true"!=t.dataset.showDropdown||(t.classList.add(g.displayNone),t.parentElement.classList.remove(g.headerSelected),t.dataset.showDropdown="false",n.dcs.emit("hideResolutionList"),0))})))}},h=function(e,t,n,r){void 0===t&&(t=!1);for(var i=[],o=e.children,a=0;a<o.length;a++)o[a].classList.contains(g.ddlSelectedItem)&&i.push(o[a]);var s=!0;function u(e,t){e.classList[t?"add":"remove"](g.ddlSelectedItem)}e.onclick=function(o){var a,c=!1;if(o instanceof MouseEvent){if(o.stopPropagation(),!s)return;a=o.target,c=!0}else a=o;if("LI"===(null==(o=a)?void 0:o.tagName)){if(s=!1,-1<(o=i.indexOf(a))){if(!t)return void(s=!0);i.splice(o,1),u(a,!0)}else if(t)i.push(a),u(a,!0);else{for(;i.length;)u(i.pop(),!1);u(a,!0),i.push(a),e&&(e.parentElement.classList.remove(g.headerSelected),e.classList.add(g.displayNone),e.dataset.showDropdown="false",r.dcs.emit("hideResolutionList",e,r))}c&&(o=null==n?void 0:n(a,a.customData,r),Promise.resolve(o).then((function(){s=!0})))}}},d=function(e){var t=document.createDocumentFragment();return e.forEach((function(e,n){var r=document.createElement("li"),i=e.value,o=e.innerHtml;r.customData=i,e.isSelected&&r.classList.add(g.ddlSelectedItem),o?r.innerHTML=o:((i=document.createElement("i")).style.pointerEvents="none",i.className=e.icon||"",(o=document.createElement("p")).style.pointerEvents="none",o.innerText=e.text||"",r.appendChild(i),r.appendChild(o)),t.appendChild(r)})),t},i){e.next=6;break}return e.abrupt("return");case 6:return u=i.list,a=i.multiple,s=i.onclick,e.next=9,u(t,n);case 9:if(e.t0=e.sent,e.t0){e.next=12;break}e.t0=[];case 12:c=d(u=e.t0),(l=null==t?void 0:t.querySelector("dropdown"))?(l.removeEventListener("click",null),l.childNodes&&l.childNodes.forEach((function(e){e.remove()})),l.appendChild(c)):((l=document.createElement("ul")).className="resolutionList dropdown "+g.displayNone,l.style.background=o.background,l.style.color=o.color,l.appendChild(c),t.appendChild(l)),f(t,l,n),h(l,a,s,n),e.next=29;break;case 20:return e.prev=20,e.t1=e.catch(0),Ee.log("Error Begin---"),Ee.log(e.t1),Ee.log(t),Ee.log(n),Ee.log(i),Ee.log("Error End---"),e.abrupt("return",null);case 29:case"end":return e.stop()}}),e,null,[[0,20]])})))).apply(this,arguments)}var dt="dvsDb",ht="dvsDoc",gt=function(){function e(e,t){this._db=e.DataControl._db,t?this.syncDb={}:((e=this._db.DBMng._d)[dt]||(e[dt]={}),e[dt][ht]||(e[dt][ht]={}),this.syncDb=e[dt][ht])}var t=e.prototype;return t.setCustomDataSync=function(e,t){if(this.syncDb)return this.syncDb[e].customData=t,!0},t.getCustomDataSync=function(e){return this.syncDb&&this.syncDb[e]&&this.syncDb[e].customData?this.syncDb[e].customData:null},t.getOriDataSync=function(e){return this.syncDb&&this.syncDb[e]?this.syncDb[e].oriData:null},t.getDataRootSync=function(e){return this.syncDb&&this.syncDb[e]?this.syncDb[e]:null},t.getMetaDataSync=function(e){if(this._db)return this._db.getMetadata(e)},t.removeMidSync=function(e){var t,n=this._db.middle._d;n&&(n=n[e])&&((t=n.customData)&&(Ue(t),Ge(t),je(t),delete n.customData),Xe(n.oriData)&&rt.revokeObjectURL(n.oriData),Xe(n.minData)&&rt.revokeObjectURL(n.minData),delete n.oriData,delete n.minData,(t=n.img)&&(t.src=nt,t.onload=null,t.onerror=null,n.img=null)),this._db.removeMid(e),this._db.removeMetadata(e)},t.removeSync=function(e){var t;this.syncDb&&this.syncDb[e]&&((t=this.syncDb[e])&&(delete t.oriData,Ue(t.customData),Ge(t.customData),je(t.customData),t.metadata&&delete t.metadata,t.tags&&(t.tags.slice(0),delete t.tags)),delete this.syncDb[e]),this.removeMidSync(e)},t.dispose=function(){this._db=null,this.syncDb=null},e}(),ft=function(){function e(e){this._fileTree=e._tree}var t=e.prototype;return t.createFile=function(e){if(this._fileTree)return this._fileTree.createFile(e)},t.openFile=function(e){return this._fileTree&&(e=this._fileTree.findChild(this._fileTree.dfNode,e))&&"file"===e.type?e.chs.slice():[]},t.findFile=function(e){return this._fileTree?this._fileTree.dfNode&&(e=this._fileTree.findChild(this._fileTree.dfNode,e))&&"file"===e.type?e:null:[]},t.replaceFileContent=function(e,t){(e=this.findFile(e))&&(e.chs.splice(0),e.chs=t)},t.getFileCount=function(e){return(e=this.findFile(e))?e.chs.length:0},t.getIndexByUidInFile=function(e,t){var n=this.findFile(e);if(n)for(var r=n.chs.length,i=0;i<r;i++)if(n.chs[i]==t)return i;return-1},t.removeByIndexInFile=function(e,t){return(e=this.findFile(e))&&0<=t&&t<e.chs.length?e.chs.splice(t,1):null},t.removeFile=function(e,t){if(e&&t)for(var n=this.openFile(t),r=0;r<n.length;r++)e.removeSync(n[r])},t.dispose=function(){this._fileTree=null},e}(),mt=function(){function e(e,t,n){this.element=null,this.headerButtons=[],this.footerButtons=[],this.className="",this.pageName="",this.container=null,this.isDestroyed=!1,this._fileWrapper=null,this._dvsWrapper=null,this.template="",this._dcs=null,this._dvs=null,this._pagepubsub=new ut,this._dvsWrapper=new gt(t),this._fileWrapper=new ft(t.File),this.initPageOption(e,n),this._dcs=n,this._dvs=t}var n=e.prototype;return n.initPageOption=function(e,t){this.options=e},n.getDcs=function(){return this._dcs},n.getDvs=function(){return this._dvs},n.getHeaderButtons=function(){return[]},n.getFooterButtons=function(){return[]},n.getOptionsEl=function(){return null},n.createEl=function(){this.headerButtons=this.getHeaderButtons(),this.footerButtons=this.getFooterButtons(),this.container=this.getOptionsEl(),this.element||(e=this.template,(t=document.createElement("div")).innerHTML=e,t.className=this.className,this.element=t);var e,t=null==(e=this.element)?void 0:e.querySelector("header");this.insertButtons(t,this.headerButtons),t=null==(e=this.element)?void 0:e.querySelector("footer"),this.insertButtons(t,this.footerButtons)},n.insertButtons=function(e,t){var n;e.appendChild((e=t,n=document.createDocumentFragment(),e.forEach((function(e){n.appendChild(e.element)})),n))},n.destroy=function(){this.isDestroyed=!0,this._dvsWrapper&&this._dvsWrapper.dispose(),this._dvsWrapper=null,this._fileWrapper&&this._fileWrapper.dispose(),this._fileWrapper=null,pt(this.headerButtons),pt(this.footerButtons),this.headerButtons=[],this.footerButtons=[],this.element&&(this.element.parentElement&&this.element.parentElement.childNodes&&1==this.element.parentElement.childNodes.length?this.element.parentElement.remove():(this.element.remove(),this.element=null)),"documentScanPage"==this.pageName&&(ke(this._dcs),this._dcs.emit("video-closed")),ke(this._dcs),this._dcs=null},n.hide=function(){var e;null!=(e=this.element)&&e.classList.add(g.displayNone)},n.show=function(){var e=t(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!=(t=this.element)&&t.classList.remove(g.displayNone);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.updateButton=function(e,t){for(var n=[].concat(this.headerButtons,this.footerButtons),r=0;r<n.length;r++){var i=n[r];if(i.name===e)return Ze(t,i.options),void i.update()}},n.on=function(e,t){this._pagepubsub.on(e,t)},n.once=function(e,t){this._pagepubsub.once(e,t)},n.off=function(e,t){this._pagepubsub.off(e,t)},n.emit=function(e){for(var t,n=arguments.length,r=new Array(1<n?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=this._pagepubsub).emit.apply(t,[e].concat(r))},n.emitEx=function(e){for(var t,n=arguments.length,r=new Array(1<n?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(t=this._pagepubsub).emitEx.apply(t,[e].concat(r))},n.setDefaultBackgroundColors=function(e,t,n){e.background||(e.background="#000"),t.background||(t.background="#323232"),n.background||(n.background="#000")},n.createIconItems=function(e,t,n,r){var i,o=[],s={dcs:this._dcs,page:this};for(i in e)e[i]&&(e[i].colorStyle="capture"==i&&r?r:t,e[i].bHeader=n,o.push(new ct(a({},e[i],{name:i}),s)));return o},n.getHtmlElement=function(){return this.element},e}();function pt(e){e.forEach((function(t,n){t.destroy(),e[n]=null}))}function _t(){return{icon:g.font+" "+g.iconLoad,onclick:(e=t(r().mark((function e(t,n){var i,o,a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(s=(i=n.dcs).getLoadCallback())){e.next=18;break}if(e.prev=3,o=i.getCurrentPage())return i.emit("blurPage"),a=Fe(void 0===(a=o.options.documentEditorSettings)?{}:a),e.next=11,s(n);e.next=13;break;case 11:(s=e.sent)&&!o.isDestroyed&&bt(s,i,a);case 13:return e.prev=13,i.emit("focusPage"),e.finish(13);case 16:e.next=19;break;case 18:!function(e){var t=document.createElement("input");t.style.display="none",document.body.appendChild(t),t.addEventListener("click",(function(e){e.stopPropagation()})),t.type="file",t.multiple=!0,t.accept="image/png,image/jpeg,image/jpg",t.click(),t.onchange=function(){var n;""!=t.value&&((n=e.dcs).showLoading("load local image"),n.emit("blurPage"),vt({el:t,context:e,callback:It})),document.body.removeChild(t)}}(n);case 19:case"end":return e.stop()}}),e,null,[[3,,13,16]])}))),function(t,n){return e.apply(this,arguments)}),className:g.BUTTON_PREFIX+"loadBtn",text:"Load"};var e}function vt(e){e.context.dcs.captureLoop.getIsLooping()?setTimeout(vt,200,e):e.callback.apply(null,[e.el,e.context])}function It(e,t){return yt.apply(this,arguments)}function yt(){return(yt=t(r().mark((function e(t,n){var i,o,a,s,u,c,l;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=n.dcs,o=t.files,e.prev=2,a=Fe(void 0===(a=(a=i.getCurrentPage()).options.documentEditorSettings)?{}:a),u=!(s=[]),c=0;case 9:if(!(c<o.length)){e.next=22;break}if("application/pdf"==(l=o[c]).type||"image/tiff"==l.type)return 0==u&&i.emit("video-error",Q),u=!0,e.abrupt("continue",19);e.next=15;break;case 15:return e.next=17,tt(o[c]);case 17:s.push(l=e.sent);case 19:c++,e.next=9;break;case 22:0<s.length&&!n.page.isDestroyed&&bt(s,i,a);case 23:return e.prev=23,i.hideLoading("load local image"),t.value=null,t.files=null,t.onchange=null,t=null,i.emit("focusPage"),e.finish(23);case 31:case"end":return e.stop()}}),e,null,[[2,,23,31]])})))).apply(this,arguments)}function bt(){Dt.apply(this,arguments)}function Dt(){return(Dt=t(r().mark((function e(t,n,i){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.showLoading("handleBlobList"),function(){return _e.apply(this,arguments)}(n,t,C,i).finally((function(){n.hideLoading("handleBlobList")}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tt(){return{icon:g.font+" "+g.iconCapture,className:g.BUTTON_PREFIX+"captureBtn",onclick:function(e,t){t.dcs.captureLoop.startManualCapture(t)}}}function St(){return{icon:g.font+" "+g.iconClose,className:g.BUTTON_PREFIX+"closeBtn",onclick:(e=t(r().mark((function e(t,n){var i,o,a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.dcs,a=!1,0<(o=n.page).getImageCount()&&(a=!0),o.pageName==M&&i.config.scannerViewer.funcConfirmExit)return e.next=6,i.config.scannerViewer.funcConfirmExit(a);e.next=13;break;case 6:if(0==(s=e.sent))return e.abrupt("return");e.next=11;break;case 11:if(1!=s&&2!=s)return e.abrupt("return");e.next=13;break;case 13:if(void 0===s&&(s=1),o._isClosed)return e.next=17,i.navigateBack();e.next=18;break;case 17:return e.abrupt("return");case 18:return o._isClosed=!0,i.emit("blurPage"),i.stop(),e.next=23,i.navigateBack();case 23:o.pageName!=M||1!=s&&2!=s||i.exit(o.getDvs());case 24:case"end":return e.stop()}}),e)}))),function(t,n){return e.apply(this,arguments)})};var e}function wt(){return{icon:g.font+" "+g.iconSwitch,onclick:function(e,t){var n=t.dcs;n.emit("blurPage"),n.showLoading("switch camera button click"),n.toggleCamera((t=n.config.scannerViewer.resolution.defaultValue).width,t.height).finally((function(){n.hideLoading("switch camera button click"),n.emit("focusPage")}))},className:g.BUTTON_PREFIX+"toggleCamera",text:"Switch Camera"}}function Ct(){return{icon:g.font+" "+g.iconAutoCapture,className:g.BUTTON_PREFIX+"autoCapture",onmount:function(e,t){},onSelected:function(e,t){var n=t.dcs,r=n.config;e?(r.scannerViewer.autoDetect.enableAutoDetect=!0,r.scannerViewer.autoScan.enableAutoScan=!0):r.scannerViewer.autoScan.enableAutoScan=!1,n.captureLoop.loadLoopTypeFromConfig(),n.captureLoop.startLoop(t)}}}function Et(){return{icon:g.font+" "+g.iconResolution,className:g.BUTTON_PREFIX+"resBtn",dropdown:{multiple:!1,list:function(e,n){var i=n.dcs;return new Promise((function(e,n){i.once("onPlayed",t(r().mark((function t(){var n,o,a,s;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=et(i,"config.scannerViewer.resolution"),n=o.valueList,o=o.defaultValue,i.showLoading("resolution list"),t.prev=3,n&&n.length){t.next=12;break}return t.next=7,i.getResolution();case 7:o=o||{width:1280,height:720},n=t.sent.map((function(e){return{label:e.width+"\xd7"+e.height,value:e}})),t.next=13;break;case 12:o=o||n[n.length-1].value;case 13:if((a=Mt(o,n))<0)return t.next=17,i.getCurrentResolution();t.next=35;break;case 17:if(!(s=t.sent)||s.width==o.width&&s.height==o.height){t.next=34;break}return t.prev=19,t.next=22,i.setResolution(o);case 22:return t.next=24,i.getCurrentResolution();case 24:(a=Mt(s=t.sent,n))<0&&(n.push({value:s,label:s.width+"\xd7"+s.height}),a=n.length-1),t.next=32;break;case 29:t.prev=29,t.t0=t.catch(19);case 32:t.next=35;break;case 34:a<0&&(n.push({value:s,label:s.width+"\xd7"+s.height}),a=n.length-1);case 35:e(n.map((function(e,t){return{value:e.value,text:e.label,icon:"checkBox",isSelected:t===a}})));case 36:return t.prev=36,i.hideLoading("resolution list"),t.finish(36);case 39:case"end":return t.stop()}}),t,null,[[3,,36,39],[19,29]])})))),i.on("resetResolution",(function(){var e,t=i.config.scannerViewer.resolution.valueList,n=Mt(e=i.config.scannerViewer.resolution.defaultValue,t);if(n<0&&(t.push({value:e,label:e.width+"\xd7"+e.height}),n=t.length-1),(e=document.getElementsByClassName("resolutionList"))&&0<e.length){var r=e[0];if(r.childNodes)for(var o=0;o<r.childNodes.length;o++)o==n&&r.onclick(r.childNodes[o])}})),i.on("resetRealResolution",(function(){var e=i.config.scannerViewer.resolution.defaultValue;i.showLoading("resolution button click"),i.setResolution(e).then((function(e){i.hideLoading("resolution button click")}))}))}))},onclick:function(e,t,n){var r=n.dcs;r.showLoading("resolution button click"),r.setResolution(t).then((function(e){t.width!=e.width&&t.height!=e.height&&r.emit("video-error",Z),r.config.scannerViewer.resolution.defaultValue=t,r.hideLoading("resolution button click"),r.getCameraView().resetVideoInfo()}))}},onclick:function(e,t){var n=t.dcs;n.emit("blurPage"),n.once("hideResolutionList",(function(){n.emit("focusPage")}))}}}function Mt(e,t){var n=e.width,r=e.height;return(e=t.findIndex((function(e){var t=(e=e.value||{}).width;return e=e.height,t===n&&e===r})))<0?t.findIndex((function(e){var t=(e=e.value||{}).width;return e=e.height,t===r&&e===n})):e}function Pt(){return{icon:g.font+" "+g.iconAutoDetect,onmount:function(e,t){},onSelected:function(e,t){var n=t.dcs,r=n.config;e?r.scannerViewer.autoDetect.enableAutoDetect=!0:(r.scannerViewer.autoDetect.enableAutoDetect=!1,r.scannerViewer.autoScan.enableAutoScan=!1),n.captureLoop.loadLoopTypeFromConfig(),n.captureLoop.startLoop(t)},className:g.BUTTON_PREFIX+"detectCamera"}}var At="dynamsoft_camera_scan_page_style",xt=h("initElement"),Rt=h("addStyle"),kt=function(e){function n(t,n,r){return n=e.call(this,t,n,r)||this,Object.defineProperty(s(n),Rt,{value:Ft}),Object.defineProperty(s(n),xt,{value:Lt}),n.fileName=null,n._nextViewerPage=null,n.pageName=M,l(s(n),xt)[xt](),n.attachDefaultEvent(),n.initFileName(t),n}c(n,e);var i=n.prototype;return i.initFileName=function(e){this.fileName=C,this._fileWrapper.findFile(this.fileName)||this._fileWrapper.createFile(this.fileName)},i.getFileName=function(){return this.fileName},i.getImageCount=function(){return this._fileWrapper.getFileCount(this.fileName)},i.attachDefaultEvent=function(){var e=this;this.on("onSaveCapture",(function(t,n,r,i,o){return ve(n.dcs,r,i,o,e.fileName)}))},i.setDefaultColors=function(e,t,n,r){this.setDefaultBackgroundColors(e,t,n),e.color||(e.color="#fff"),e.selectedColor||(e.selectedColor="#fe8e14"),t.maskColor||(t.maskColor="#323232"),n.color||(n.color="#fff"),n.selectedColor||(n.selectedColor="#fe8e14"),r.color||(r.color="#fff"),r.background||(r.background="#fe8e14")},i.getOptionsEl=function(){var e;return Xe(e=(void 0===(e=this.options.scannerViewer)?{}:e).element)?document.getElementById(e):e},i.getHeaderButtons=function(){var t,n=(t=this.options).headerButtons,r=(t=void 0===(t=t.scannerViewer)?{}:t).scanButtonStyle;return e.prototype.createIconItems.call(this,void 0===n?{}:n,void 0===(t=t.headerStyle)?{}:t,!0,void 0===r?{}:r)},i.getFooterButtons=function(){var t,n=(t=this.options).footerButtons,r=(t=void 0===(t=t.scannerViewer)?{}:t).scanButtonStyle;return e.prototype.createIconItems.call(this,void 0===n?{}:n,void 0===(t=t.footerStyle)?{}:t,!1,void 0===r?{}:r)},i.initPageOption=function(e,t){e.scannerViewer||(e.scannerViewer=qe(t.config.scannerViewer),t.config&&t.config.scannerViewer&&t.config.scannerViewer.element&&(e.scannerViewer.element=t.config.scannerViewer.element));var n=(t=e.scannerViewer).resolution,r=t.autoScan,i=t.autoDetect,o=t.switchCamera,s=(t=t.loadLocalFile,{icon:g.font+" "+g.iconContinuous,className:g.BUTTON_PREFIX+"continuousMode"});n={headerButtons:{changeResBtn:me(n,Et()),autoDetect:a({isSelected:(null==r?void 0:r.enableAutoScan)||(null==i?void 0:i.enableAutoDetect)},me(i,Pt())),closeBtn:St()},footerButtons:{load:me(t,_t()),toggleCamera:me(o,wt()),capture:Tt(),autoCapture:a({isSelected:null==r?void 0:r.enableAutoScan},me(r,Ct())),multipleBtn:{onclick:Ne,onmount:function(e){e.innerHTML='<img class="'+g.previewImg+'">\n<div class="dynamsoft-camera-imgCount '+g.displayNone+'"></div>\n<div class="dynamsoft-camera-nextArr '+g.font+" "+g.iconBack+'"></div>',Ee.log(e)},className:g.buttonMultipleImg+" "+g.displayNone,text:"Continuous"},continuous:s},scannerViewer:{resolution:{defaultValue:{width:1280,height:720}},fullScreen:!1}},this.options=Ze(e,n)},i.show=function(){var n=t(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.prototype.show.call(this);case 1:case"end":return t.stop()}}),t,this)})));return function(){return n.apply(this,arguments)}}(),i.generatePreview=function(){var e=t(r().mark((function e(){var t,n,i,o,a,s,u,c,l,d,h;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._fileWrapper.openFile(this.fileName),n=t.length,i=null==(i=this.element)?void 0:i.querySelector("."+g.buttonMultipleImg),o=null==i?void 0:i.querySelector("."+g.previewImg),i&&o){e.next=6;break}return e.abrupt("return");case 6:if((a=null==i?void 0:i.querySelector(".dynamsoft-camera-imgCount"))&&(0<n?(a.innerText=String(n),a.classList.remove(g.displayNone)):(a.innerText="",a.classList.add(g.displayNone))),n<=0)return i.classList.add(g.displayNone),o.src!=nt&&""!=o.src&&(rt.revokeObjectURL(o.src),o.src=nt),o.setAttribute("data",""),e.abrupt("return");e.next=13;break;case 13:if(!(s=this._dvsWrapper.getCustomDataSync(a=t[n-1]))){e.next=41;break}if(u=s.detectArea,!0!==s.preview){e.next=23;break}if(ot(l=Xe(l=o.getAttribute("data"))&&""!=l?JSON.parse(l):l,u))return e.abrupt("return");e.next=22;break;case 22:delete s.preview;case 23:if(o.src!=nt&&""!=o.src&&(rt.revokeObjectURL(o.src),o.src=nt),!s.preview){e.next=28;break}c=s.preview,e.next=38;break;case 28:return e.next=30,se(s.oriBlob);case 30:return l=e.sent,u&&(d={cornerPoints:u}),e.next=34,ye(this._dcs,d,l,!1,!1);case 34:c=(h=e.sent).preview,Ue(h);case 38:o.src=rt.createURL(c),c.imageData&&delete c.imageData,u&&o.setAttribute("data",JSON.stringify(u));case 41:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.playVideo=function(){var e=t(r().mark((function e(){var t,n,i,o,a,s,u,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(n=this.element).children[1],(t=this._dcs).showLoading("ShowDocumentScanPage"),e.prev=4,a=(o=void 0===(o=(o=this.options).scannerViewer)?{}:o).resolution,i=o.fullScreen,o=void 0===(o=o.deviceId)?"":o,s=void 0===(s=(a=void 0===a?{}:a).valueList)?[]:s,(a=a.defaultValue)||s&&0<s.length&&(a=s[s.length-1].value),!t.isRunPlaying()){e.next=13;break}if(t.getCameraManage().getCurrentCamera())return e.next=13,t.closeSource();e.next=13;break;case 13:if(""!=o)return e.next=16,t.selectSource(o);e.next=16;break;case 16:return u=(s={width:void 0,height:void 0}).width,c=s.height,a&&(u=a.width||void 0,c=a.height||void 0),e.next=20,t.play(n,u,c,i);case 20:e.next=27;break;case 22:return e.prev=22,e.t0=e.catch(4),e.next=26,t.navigateBack();case 26:t.emit(x,e.t0);case 27:return e.prev=27,t.hideLoading("ShowDocumentScanPage"),e.finish(27);case 30:case"end":return e.stop()}}),e,this,[[4,22,27,30]])})));return function(){return e.apply(this,arguments)}}(),i.queryPreviewImageElement=function(){var e=null==(e=this.element)?void 0:e.querySelector("."+g.buttonMultipleImg);return e?null==e?void 0:e.querySelector("."+g.previewImg):null},i.destroy=function(){var t=this.queryPreviewImageElement();t&&(t.src&&rt.revokeObjectURL(t.src),t.onload=null,t.onerror=null),this.pageName==M&&(null!=(t=this._fileWrapper)&&t.removeFile(this._dvsWrapper,this.fileName),null!=(t=this._dvs)&&null!=(t=t.File)&&t.removeFile(this.fileName),this._dcs.exit(this._dvs)),this._nextViewerPage&&(this._nextViewerPage.destroy(),this._nextViewerPage=null),e.prototype.destroy.call(this)},i.setNextViewerPage=function(e){this._nextViewerPage=e},i.clickMultipleImage=function(){var e=t(r().mark((function e(){var t,n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._nextViewerPage)return t=this._nextViewerPage,n=this._fileWrapper.openFile(this.fileName),e.next=5,t.syncFiles(!1,n);e.next=13;break;case 5:return t.gotoViewPage((n=e.sent)-1),e.next=9,this._dcs.navigateToPage(t);case 9:this.hide(),this._nextViewerPage=null,e.next=16;break;case 13:return i=void 0===(i=this._dcs.config.documentEditorSettings)?{}:i,e.next=16,function(){return We.apply(this,arguments)}(this._dcs,this._dvs,i,C,!0);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.removeDataByIndex=function(e,t){e=this._fileWrapper.removeByIndexInFile(e,t),this._dvsWrapper.removeSync(e)},i.insertDataByIndex=function(e,t,n){return(n=0<=n?this._dvs.DataControl.insertSync(e,[t],n):this._dvs.DataControl.appendSync(e,[t]))&&1==n.length?n[0]:null},i.enableMultiImages=function(){var e;this.element&&((e=null==(e=this.element)?void 0:e.querySelector("."+g.iconContinuous))&&e.classList.add(g.displayNone),(e=null==(e=this.element)?void 0:e.querySelector("."+g.buttonMultipleImg))&&e.classList.remove(g.displayNone))},i.moveMultipleImgPosition=function(){var e,t;this.element&&(e=null==(e=this.element)?void 0:e.querySelector("."+g.buttonMultipleImg))&&(e.style.top="0",e.style.right="0",e.style.position="relative",(t=null==(t=this.element)?void 0:t.querySelector("."+g.BUTTON_PREFIX+"continuousMode"))&&t.appendChild(e),(null==(t=this.element)?void 0:t.querySelector("."+g.iconContinuous)).classList.add(g.displayNone))},i.refreshPreviewWhenChanged=function(){var e=t(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.generatePreview();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.setPreviewImageFlag=function(){var e=this._fileWrapper.openFile(this.fileName);if(0<e.length)for(var t=e.length,n=t-1,r=0;r<t;r++){var i;(i=this._dvsWrapper.getCustomDataSync(i=e[r]))&&(r==n?i.preview=!0:void 0!==i.preview&&delete i.preview)}},n}(mt);function Lt(){var e,t,n,r=this.options,i=(this.setDefaultColors(e=void 0===(e=(i=void 0===(i=r.scannerViewer)?{}:i).headerStyle)?{}:e,t=void 0===(t=i.bodyStyle)?{}:t,n=void 0===(n=i.footerStyle)?{}:n,void 0===(i=i.scanButtonStyle)?{}:i),'\n        <header style="background:'+e.background+'"></header>\n        <div style="background:'+t.background+'" class="videoContainer"></div>\n        <footer style="background:'+n.background+'" class="buttonList">\n            '+(r.title?'<div class="modeTitle">'+r.title+"</div>":"")+"\n        </footer>\n        ");this.template=i,this.className=g.documentScanPage,this.createEl(),l(this,Rt)[Rt]()}function Ft(){var e,t,n=(r=void 0===(r=this.options.scannerViewer)?{}:r).bodyStyle,r="\n."+g.documentScanPage+" ."+g.headerSelected+" i {\n  color: "+(t=void 0===(t=r.headerStyle)?{}:t).selectedColor+" !important;\n}\n."+g.documentScanPage+" ."+g.footerSelected+" i {\n  color: "+(e=void 0===(e=r.footerStyle)?{}:e).selectedColor+" !important;\n}\n@keyframes dynamsoft-camera-glow-keyframe-insert {\n  0% {border: 3px solid transparent;}\n  100% {border: 3px solid "+(void 0===(r=r.scanButtonStyle)?{}:r).background+";}\n}\n."+g.documentScanPage+" .resolutionList .checkBox {\n  border: 1px solid "+t.color+";\n}\n."+g.documentScanPage+" .resolutionList ."+g.ddlSelectedItem+" .checkBox {\n  background-color: "+t.selectedColor+";\n}\n."+g.buttonMultipleImg+" .dynamsoft-camera-imgCount {\n  color: "+e.color+";\n  background: "+e.selectedColor+";\n}\n."+g.buttonMultipleImg+" .dynamsoft-camera-nextArr {\n  color: "+e.selectedColor+";\n}\n.dcs-loading-content div>div {\n  background: "+(void 0===n?{}:n).maskColor+";\n}\n";if(t=document.getElementById(At))t.innerHTML=r;else{(t=document.createElement("style")).type="text/css",t.id=At;try{t.appendChild(document.createTextNode(r))}catch(r){}document.body.appendChild(t)}}function Wt(){return(Wt=t(r().mark((function e(n,i,o,a){var s,u,c,l,d,h,f,m,p,_,v,I,y,b,T,C,E,M,A,x,R,k,L;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(L=function(){var e,t,n,r,i=document.createElement("span"),o=document.createElement("div");return o.className=""+g.filterCheckBox,e=document.createElement("span"),(t=document.createElement("input")).type="checkBox",t.id="dynamsoft-camera-"+it(6),o.appendChild(e),e.appendChild(t),((r=(null==(r=a.config.documentEditorSettings)?void 0:r.filter).applyToAll)&&r.enableApplyToAll&&(t.checked=!0),(n=document.createElement("label")).innerHTML=r.label,n.setAttribute("for",t.id),i.appendChild(o),i.appendChild(n),r=document.createElement("span")).className="dynamsoft-filter-close dynamsoft-camera-font dynamsoft-camera-icon-arrow",r.onclick=function(){ke(a),s=!1},i.appendChild(r),t.checked?(o.classList.add(g.filterCheckedBox),e.style.background=""):(o.classList.remove(g.filterCheckedBox),e.style.background="none"),t.addEventListener("click",(function(){var t=this.checked,n=(t?(o.classList.add(g.filterCheckedBox),e.style.background="",u?a.filterApplyToAllValue=u.dataset.filterValue:(t=!1,a.filterApplyToAllValue=void 0)):(o.classList.remove(g.filterCheckedBox),e.style.background="none",a.filterApplyToAllValue=void 0),null==(n=a.config.documentEditorSettings)?void 0:n.filter);n.applyToAll||(n.applyToAll={}),n.applyToAll.enableApplyToAll=t})),i},k=function(){var e;null!=(e=u)&&e.classList.remove(g.filterSelectedItem),null!=d&&null!=(e=d.querySelector("."+g.filterDropDown))&&null!=(e=e.querySelector("."+g.filterSelectedItem))&&e.classList.remove(g.filterSelectedItem)},R=function(){return(R=t(r().mark((function e(t){var n,o,s,c,l,d,h,f,p,_,v;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopPropagation(),(n=t.target)===u||"LI"!==n.tagName)return e.abrupt("return");e.next=4;break;case 4:if(a.showLoading("click filter"),e.prev=5,l=a.getCurrentPage(),0<=(c=m.getCurrentIndex()))return o=m.getUidByIndex(c),d=l.GetFilterDirty(),e.next=13,l.getCurImageData(o);e.next=15;break;case 13:s=e.sent,d||l.ClearFilterDirty();case 15:if(o&&s)return h=m.getRotateAngle(c),k(),(u=n).classList.add(g.filterSelectedItem),f=n.dataset.filterValue,e.next=23,ue(s);e.next=38;break;case 23:if(p=e.sent,f!==P){e.next=28;break}_=p,e.next=31;break;case 28:return e.next=30,a.filterHandlerByIImageData(s,p,f);case 30:_=e.sent;case 31:return v=(v=a.config.documentEditorSettings.filter).applyToAll,a.curFilterValue=f,a.filterApplyToAllValue=v&&v.enableApplyToAll?f:void 0,e.next=37,Me(_,i,o,!1,{filterValue:f,bitDepth:_.imageBitDepth});case 37:m.rotate(h);case 38:return e.prev=38,a.hideLoading("click filter"),e.finish(38);case 41:case"end":return e.stop()}}),e,null,[[5,,38,41]])})))).apply(this,arguments)},x=function(e){return R.apply(this,arguments)},A=function(e,t){e&&(e.classList[t?"remove":"add"](g.displayNone),t&&u&&(e.scrollLeft=u.offsetLeft),s=t)},M=function(){var e=null==d?void 0:d.querySelector("."+g.filterDropDown);A(e,!1)},u=null,c=s=!(E=function(){c||(m.on(S,M),m.on(D,M),m.on(w,(function(){ke(a),s=!1})),c=!0)}),!(l=a.getCurrentPage())||l.isDestroyed)return e.abrupt("return");e.next=13;break;case 13:if(d=l.getHtmlElement()){e.next=16;break}return e.abrupt("return");case 16:if(h=null==d?void 0:d.querySelector("."+g.BUTTON_PREFIX+"filter"),f=null==h?void 0:h.querySelector("."+g.filterDropDown),m=l.getViewerByUid(o),(p=m.getCurrentIndex())<0)return f&&(Re(f),f.remove()),e.abrupt("return");e.next=23;break;case 23:if(Xe(_=m.getUidByIndex(p))&&""!=_){e.next=27;break}return f&&(Re(f),f.remove()),e.abrupt("return");case 27:if(f&&(v=f.getAttribute("data")),f&&v==_){e.next=39;break}return I=!f,f?(Re(f),y=null==(y=f)?void 0:y.querySelector("ul")):(f=document.createElement("span"),y=document.createElement("ul"),f.appendChild(y)),e.next=33,l.appendFilterDropdownImages(m);case 33:b="",(T=e.sent)&&(y.appendChild(T),u=null==(T=y)?void 0:T.querySelector("."+g.filterSelectedItem),T=!1,(null==h?void 0:h.querySelector("."+g.filterApplyAll))?T=!0:(C=(C=a.config.documentEditorSettings.filter).applyToAll)&&"visible"==C.visibility&&(C=L())&&(C.classList.add(g.filterApplyAll),f.insertBefore(C,f.firstChild),T=!0),b=T?"dynamsoft-camera-H100":"dynamsoft-camera-H71"),f.className=g.filterDropDown+" "+g.displayNone+" "+b,I&&(f.addEventListener("click",function(){var e=t(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),h.appendChild(f)),_&&f.setAttribute("data",_);case 39:A(f,s=!s),n.stopPropagation(),E();case 43:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ot="dynamsoft_camera_viewer_style",Bt=h("bindCameraEvents"),Nt=h("getViewer"),Vt=h("createCameraDvs"),Ut=h("removeCameraDvs"),Gt=h("setViewerStyle"),jt=h("addStyle"),Ht=function(e){function n(t,n,r){return n=e.call(this,t,n,r)||this,Object.defineProperty(s(n),jt,{value:Qt}),Object.defineProperty(s(n),Gt,{value:Xt}),Object.defineProperty(s(n),Ut,{value:Yt}),Object.defineProperty(s(n),Vt,{value:Jt}),Object.defineProperty(s(n),Nt,{value:Kt}),Object.defineProperty(s(n),Bt,{value:zt}),n._backFileName=null,n._initFileName=null,n._pageFileName=null,n._viewerId=null,n._editUid=null,n._zooming=!0,n._savedUid=null,n._copyRefMap={},n._isHandlingPageUid=!1,n._nextHandlePageUid=null,n._backInfo={origApplyToAll:"",origDocumentData:{},initDocumentData:{}},n._currentInfo={documentData:{}},n._nextViewerPage=null,n._bSyncViewerDataFromBackupData=!1,n._backFileName=t.fileName,n._initFileName=t.initFileName,n._pageFileName=t.fileName,n.setPageFilename(),n.options.initDocumentData&&(n._backInfo.initDocumentData=n.options.initDocumentData),n.setZooming(),l(s(n),Vt)[Vt](n.options),l(s(n),jt)[jt](),n}c(n,e);var i=n.prototype;return i.setPageFilename=function(){},i.setZooming=function(){},i.getPageFileName=function(){return this._pageFileName},i.getViewerUid=function(){return this._viewerId},i.getViewerByUid=function(e){return this._dvs.ViewControl.getViewerByUid(e)},i.getImageCount=function(){var e=l(this,Nt)[Nt]();return e?e.getCurrentPageUids().length:0},i.initPageOption=function(e,t){e&&0==e.fromInternal&&e.documentEditorSettings?this.options=e||{}:(this.options=Ze(e||{},{scannerViewer:qe(t.config.scannerViewer),documentEditorSettings:qe(t.config.documentEditorSettings)}),t.config&&t.config.documentEditorSettings&&t.config.documentEditorSettings.element&&(this.options.documentEditorSettings.element=t.config.documentEditorSettings.element))},i.destroy=function(){this.isDestroyed=!0,this._nextViewerPage&&(this._nextViewerPage.destroy(),this._nextViewerPage=null),l(this,Ut)[Ut](),e.prototype.destroy.call(this)},i.getOptionsEl=function(){var e;return Xe(e=(void 0===(e=this.options.documentEditorSettings)?{}:e).element)?document.getElementById(e):e},i.gotoViewPage=function(e){var t=this.getViewerByUid(this._viewerId);if(t){var n=t.getCurrentPageUids();if(0<=e&&e<n.length)return t.gotoPage(e),!0}return!1},i.handlePageByIndex=function(){var e=t(r().mark((function e(t){var n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.getViewerByUid(this._viewerId),n=i.getCurrentPageUids(),!(0<=t&&t<n.length)){e.next=9;break}if(i.gotoPage(t),Xe(n=i.getUidByIndex(t))&&""!=n)return i=this._dvs,e.next=9,this.handlePageByUid(n,i);e.next=9;break;case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i.handlePageByUid=function(){var e=t(r().mark((function e(t,n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initOrigDataByUid(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),i.getCurrentIndex=function(){return this.getViewerByUid(this._viewerId).getCurrentIndex()},i.removePageFile=function(){this._pageFileName&&(Ee.log("remove file: "+this._pageFileName),this._dvs.File.removeFile(this._pageFileName),this._pageFileName=null)},i.show=function(){var n=t(r().mark((function t(){var n,i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isDestroyed)return t.abrupt("return");t.next=2;break;case 2:if(!(i=l(this,Nt)[Nt]())){t.next=12;break}if(0<=(n=i.getCurrentIndex()))return i=i.getUidByIndex(n),t.next=9,this.handlePageByUid(i,this._dvs);t.next=9;break;case 9:if(this.isDestroyed){t.next=12;break}return t.next=12,e.prototype.show.call(this);case 12:case"end":return t.stop()}}),t,this)})));return function(){return n.apply(this,arguments)}}(),i.isVisible=function(){return!!this.element&&!this.element.classList.contains(g.displayNone)},i.backupImageDataFromUids=function(e){for(var t,n,r=e.length,i=0;i<r;i++)Xe(t=e[i])&&""!=t&&(n=null==(n=this._dvsWrapper)?void 0:n.getCustomDataSync(t),this.backupImageDataFromSrcUid(t,n))},i.backupImageDataFromSrcUid=function(e,t){this.isDestroyed||(this._backInfo.origDocumentData[e]=t?{detectArea:t.detectArea,angle:t.angle,filterValue:t.filterValue}:{detectArea:null,angle:0,filterValue:P})},i.isCropPage=function(){return!1},i.fileDataCopyOneToViewer=function(e,t,n,r,i){var o,a,s,u=(s=(s=null==(s=this._dvsWrapper)?void 0:s.getCustomDataSync(n))?Ze(s,{}):{}).oriBlob,c=s.resBlob;return t?u&&u.imageData&&(o=u.imageData,a=Ae(u)):c&&c.imageData&&(o=c.imageData,a=Ae(c)),o&&a||(o=null==(t=this._dvsWrapper)?void 0:t.getOriDataSync(n),(c=xe(a=null==(u=this._dvsWrapper)?void 0:u.getMetaDataSync(n))).imageData=o,s.oriBlob||(s.oriBlob=He(c))),t=r<0||i<=r?this._dvs.DataControl.appendSync(this._pageFileName,[{oriData:o,metadata:a,customData:s}]):this._dvs.DataControl.insertSync(this._pageFileName,[{oriData:o,metadata:a,customData:s}],r),a=o=null,t&&1==t.length?(this._copyRefMap[u=t[0]]=n,u):null},i.fileDataCopyToViewer=function(e){for(var t,n=this.isCropPage(),r=e.length,i=0;i<r;i++)Xe(t=e[i])&&""!=t&&this.fileDataCopyOneToViewer(!1,n,t,-1,r)},i.initOrigDataByUid=function(){var e=t(r().mark((function e(t){var n,i,o,a,s,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isCropPage(),this.isDestroyed)return e.abrupt("return");e.next=4;break;case 4:if(Xe(t)&&""!=t){e.next=6;break}return e.abrupt("return");case 6:if(n=this._dvsWrapper.getDataRootSync(t)){e.next=9;break}return e.abrupt("return");case 9:if(o=void 0===(o=n.metadata)?{}:o,u=n.oriData,s=!1,(i=void 0===(i=n.customData)?{}:i).oriBlob?a=i.oriBlob:(a=u,i.oriBlob=He(u)),Xe(a))return e.next=15,fetch(a);e.next=20;break;case 15:return u=e.sent,e.next=18,u.blob();case 18:a=e.sent,s=!0;case 20:if(a instanceof Blob)return e.next=23,Le(a);e.next=26;break;case 23:a=e.sent,1==o.bitDepth&&(a.imageBitDepth=1),s=!0;case 26:s&&(i.oriBlob=He(a),i.angle=0);case 27:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i.ifOldDocumentDataChanged=function(){var e=this.getViewerByUid(this._viewerId),t=!1;if(e)for(var n=e.getCurrentPageUids(),r=0;r<n.length;r++){var i=n[r];if(Xe(i)&&""!=i){var o=this._copyRefMap[i];if(Xe(o)&&""!=o){if(!(o=this._backInfo.origDocumentData[o]))return!0;var a=null==(a=this._dvsWrapper)?void 0:a.getCustomDataSync(i);if(a&&(t=this.compareOldValueChanged(o,a,i=a.oriBlob)))break}}}return t},i.compareOldValueChanged=function(e,t,n){if(!e||!t)return!0;if(void 0===e.detectArea){if(n&&!st(t.detectArea,n.imageWidth,n=n.imageHeight))return!0}else if(!ot(e.detectArea,t.detectArea))return!0;if(void 0===e.angle){if(0!=t.angle)return!0}else if(e.angle!=t.angle)return!0;return!Be(e.filterValue,t.filterValue)},i.getRefUid=function(e,t){if(this.isDestroyed)return null;if(e=this._copyRefMap[e],t){var r=this._dcs.getPreviousPageByPage(this);if(r&&r instanceof n)return r.getRefUid(e,t)}return Xe(e)&&""!=e?e:null},i.setNextViewerPage=function(e){this._nextViewerPage=e},i.syncFiles=function(){var e=t(r().mark((function e(t,n){var i,o,a,s,u,c,l,d,h,g,f,m,p,_,v,I,y,b,D,T;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isDestroyed)return e.abrupt("return");e.next=2;break;case 2:if(i=this.getViewerByUid(this._viewerId),o=0,!i){e.next=74;break}if(!(a=i.getCurrentPageUids())){e.next=73;break}c=[],l=[],d=a.length,s=0;case 9:if(!(s<d)){e.next=33;break}if(Xe(h=a[s])&&""!=h){e.next=13;break}return e.abrupt("continue",30);case 13:if(Xe(g=this._copyRefMap[h])&&""!=g){e.next=17;break}return c.push(s),e.abrupt("continue",30);case 17:f=!1,u=0;case 19:if(!(u<n.length)){e.next=29;break}if(Xe(m=n[u])&&""!=m){e.next=23;break}return e.abrupt("continue",26);case 23:if(m==g)return f=!0,e.abrupt("break",29);e.next=26;break;case 26:u++,e.next=19;break;case 29:f||(c.push(s),this._dvsWrapper.removeSync(g),delete this._copyRefMap[h],delete this._backInfo.origDocumentData[g]);case 30:s++,e.next=9;break;case 33:0<c.length&&(d-=c.length,i.removeSync(c)),u=0;case 35:if(!(u<n.length)){e.next=43;break}if(Xe(p=n[u])&&""!=p){e.next=39;break}return e.abrupt("continue",40);case 39:this._backInfo.origDocumentData[p]||l.push({uid:p,index:u});case 40:u++,e.next=35;break;case 43:if(_=this.isCropPage(),!(0<l.length)){e.next=71;break}v=[],u=0;case 47:if(!(u<l.length)){e.next=60;break}if(Xe(y=(I=l[u]).uid)&&""!=y){e.next=52;break}return e.abrupt("continue",57);case 52:if(this._backInfo.origDocumentData[y])return e.abrupt("continue",57);e.next=54;break;case 54:D=null==(D=this._dvsWrapper)?void 0:D.getCustomDataSync(y),this.backupImageDataFromSrcUid(y,D),this._pageFileName&&(D=this.fileDataCopyOneToViewer(t,_,y,I.index,d))&&(d++,v.push(D),this._copyRefMap[D]=y);case 57:u++,e.next=47;break;case 60:if(!this._pageFileName){e.next=71;break}u=0;case 62:if(!(u<v.length)){e.next=71;break}if(Xe(b=v[u])&&""!=b){e.next=66;break}return e.abrupt("continue",68);case 66:return e.next=68,this.fillOneCustomDataByUidFirstTime(b,this.isCropPage(),!0);case 68:u++,e.next=62;break;case 71:(D=this._dvs.File.openFile(this._pageFileName,i.uid))&&(o=D.length);case 73:this._nextViewerPage&&(T=i.getCurrentPageUids(),this._nextViewerPage.syncFiles(t,T));case 74:return e.abrupt("return",o);case 75:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),i.reorderImages=function(e,t){for(var n,r,i=t.length,o={},a=0;a<i;a++)!Xe(r=t[a])||""==r||Xe(n=this._copyRefMap[r])&&""!=n&&(o[n]=r);var s,u=e.length,c=[];for(a=0;a<u;a++)Xe(s=e[a])&&""!=s&&c.push(o[s]);return c},i.resetViewerAngleByIndexes=function(e){var t=this.getViewerByUid(this._viewerId);if(t&&e)for(var n=e.length,r=0;r<n;r++)t.resetByIndex(e[r],!1)},i.restoreViewerCustomData=function(){var e=[],t=l(this,Nt)[Nt]();if(t)for(var n,r,i=t.getCurrentPageUids(),o=i.length,a=0;a<o;a++)Xe(r=i[a])&&""!=r&&Xe(n=this._copyRefMap[r])&&""!=n&&(n=this._backInfo.origDocumentData[n])&&(r=this.restoreOneViewerCustomData(t,r,a,n)).changed&&r.needReset&&e.push(a);return e},i.regetViewerCustomDataFromSrc=function(){var e=[],t=l(this,Nt)[Nt]();if(t)for(var n,r,i,o=t.getCurrentPageUids(),a=o.length,s=0;s<a;s++)Xe(n=o[s])&&""!=n&&Xe(i=this._copyRefMap[n])&&""!=i&&(r=null==(r=this._dvsWrapper)?void 0:r.getCustomDataSync(i))&&(i=this.restoreOneViewerCustomData(t,n,s,r)).changed&&i.needReset&&e.push(s);return e},i.restoreOneViewerCustomData=function(e,t,n,r){var i={changed:!1,needReset:!1},o=null==(o=this._dvsWrapper)?void 0:o.getCustomDataSync(t);return o&&r?(this.compareOldValueChanged(r,o,t=o.oriBlob)&&(void 0!==r.detectArea&&(o.detectArea=r.detectArea),o.angle!=r.angle&&(o.angle=r.angle,i.needReset=!0),void 0!==r.filterValue&&(o.filterValue=r.filterValue),Ge(o),i.changed=!0),i):i},i.saveViewerCustomData=function(){var e=l(this,Nt)[Nt]();if(e)for(var t,n,r,i,o=e.getCurrentPageUids(),a=o.length,s=0;s<a;s++)Xe(i=o[s])&&""!=i&&Xe(t=this._copyRefMap[i])&&""!=t&&(n=null==(n=this._dvsWrapper)?void 0:n.getCustomDataSync(t))&&(r=null==(r=this._dvsWrapper)?void 0:r.getCustomDataSync(i))&&(i=!1,ot(n.detectArea,r.detectArea)||(n.detectArea=r.detectArea,i=!0),n.angle!=r.angle&&(n.angle=r.angle,i=!0),Be(n.filterValue,r.filterValue)||(n.filterValue=r.filterValue,i=!0),i&&n.resBlob&&delete n.resBlob,this._backInfo.origDocumentData[t]={detectArea:r.detectArea,angle:r.angle,filterValue:r.filterValue})},i.render=function(){},i.syncFileFromExternalEvent=function(){var e=t(r().mark((function e(t,n){var i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isDestroyed)return e.abrupt("return");e.next=2;break;case 2:return i=null==(i=this._fileWrapper)?void 0:i.openFile(this._backFileName),e.next=5,this.syncFiles(t,i);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),i.getCurrentEditUid=function(){return this._editUid},i.setEditUidAfterSyncImages=function(){var e=t(r().mark((function e(t){var n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isDestroyed)return e.abrupt("return");e.next=2;break;case 2:if(!(n=l(this,Nt)[Nt]())){e.next=9;break}if(0<=(i=!Qe(i=n.getIndexByUid(t))||i<0?n.getCurrentIndex():i))return e.next=9,this.handlePageByIndex(i);e.next=9;break;case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i.fillOneCustomDataByUidFirstTime=function(){var e=t(r().mark((function e(t,n,i){var o,a,s,u,c,l,d,h,g,f,m;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isDestroyed)return e.abrupt("return");e.next=2;break;case 2:if(Xe(t)&&""!=t){e.next=4;break}return e.abrupt("return");case 4:if(o=this._dvsWrapper.getDataRootSync(t)){e.next=7;break}return e.abrupt("return");case 7:if(a=void 0===(a=o.metadata)?{}:a,f=o.oriData,c=u=!1,(l=o.customData)||(o.customData=l={},c=!0),l.resBlob?(g=n&&l.oriBlob?l.oriBlob:l.resBlob)&&g.imageData&&(o.oriData=He(g.imageData),o.metadata=Ae(g),d=g.imageWidth,h=g.imageHeight):((g=xe(a)).imageData=f,n||i||(l.resBlob=He(g)),l.oriBlob?s=l.oriBlob:(s=g,l.oriBlob=He(g)),void 0===l.angle&&(l.angle=0),u=!0),Xe(s))return e.next=14,fetch(s);e.next=19;break;case 14:return f=e.sent,e.next=17,f.blob();case 17:s=e.sent,c=!0;case 19:if(s instanceof Blob)return e.next=22,Le(s);e.next=27;break;case 22:d=(s=e.sent).imageWidth,h=s.imageHeight,1==a.bitDepth&&(s.imageBitDepth=1),c=!0;case 27:c&&(l.oriBlob=He(s),l.angle=0,u=!0),l.detectArea||(d&&h||(s=l.oriBlob)&&(d=s.imageWidth,h=s.imageHeight),0<d&&0<h&&(l.detectArea=[0,0,d,0,d,h,0,h]),u=!0),l.filterValue||(l.filterValue=P,u=!0),u&&(m=this._copyRefMap[t])&&this.backupImageDataFromSrcUid(m,l);case 31:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),i.fillOrigCustomDataFirstTime=function(){var e=t(r().mark((function e(){var t,n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isDestroyed)return e.abrupt("return");e.next=2;break;case 2:if(!(t=this.getViewerByUid(this._viewerId))){e.next=17;break}if(!(t=t.getCurrentPageUids())){e.next=17;break}n=0;case 7:if(!(n<t.length)){e.next=17;break}if(Xe(i=t[n])&&""!=i){e.next=11;break}return e.abrupt("continue",14);case 11:return e.next=13,this.fillOneCustomDataByUidFirstTime(t[n],this.isCropPage(),!1);case 13:this.copyOneBackupToInitData(i);case 14:n++,e.next=7;break;case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.copyOneBackupToInitData=function(e){Xe(e=this._copyRefMap[e])&&""!=e&&(this._backInfo.initDocumentData[e]=Ze(this._backInfo.origDocumentData[e],{}))},n}(mt);function zt(){var e=this;this.getViewerByUid(this._viewerId).on("slideFinished",t(r().mark((function t(){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(n=e.getViewerByUid(e._viewerId))&&0<=(n=n.getCurrentIndex())&&e.handlePageByIndex(n);case 2:case"end":return t.stop()}}),t)}))))}function Kt(){return this.getViewerByUid(this._viewerId)}function Jt(e){var t=this._dvs.ViewControl.createViewer({container:null,displayMode:"single",uiConfig:{canvasConfig:{canvasMouseShape:"pointer"},outerBorder:"0px"},scrollerConfig:{},zooming:this._zooming}),n=(this._viewerId=t.uid,this.options.curIndex),r=null==(r=this._fileWrapper)?void 0:r.openFile(this._backFileName);this._dvs.File.createFile(this._pageFileName,this._viewerId),this._dvs.File.openFile(this._pageFileName,this._viewerId),0==r.length?n=-1:(this.backupImageDataFromUids(r),this._pageFileName&&this.fileDataCopyToViewer(r),0<=n&&(n>=r.length?n=r.length-1:n<0&&(n=0),t.gotoPage(n)),0<=(r=t.getCurrentIndex())&&(this._savedUid=t.getUidByIndex(n=r))),this.options.curIndex=n,t&&l(this,Gt)[Gt](t),l(this,Bt)[Bt]()}function Yt(){var e=l(this,Nt)[Nt]();e.removeAllSync(),this._dvs.ViewControl.removeViewer(e)}function Xt(e){var t=(r=void 0===(r=this.options.documentEditorSettings)?{}:r).headerStyle,n=void 0===(n=r.bodyStyle)?{}:n,r=void 0===(r=r.footerStyle)?{}:r;(t=void 0===t?{}:t).background||(t.background="#000"),n.background||(n.background="#323232"),r.background||(r.background="#000"),e.topMenuBorder="none",e.topMenuColor=t.background,e.canvasBorder="none",e.canvasBackground=n.background,e.displayMode="single",e.footerColor=r.background,e.width="100%",e.height="100%"}function Qt(){var e,t,n=(e=void 0===(e=this.options.documentEditorSettings)?{}:e).bodyStyle;if(n="."+g.headerfont+" { color: "+(t=void 0===(t=e.headerStyle)?{}:t).color+"; background: "+t.background+" !important; }\n."+g.footerfont+" { color: "+(e=void 0===(e=e.footerStyle)?{}:e).color+" !important; }\n."+g.documentEditPage+" ."+g.headerSelected+" i { color: "+t.selectedColor+" !important; }\n."+g.documentEditPage+" ."+g.footerSelected+" i { color: "+e.selectedColor+" !important; }\n."+g.cropPage+" ."+g.footerSelected+" i { color: "+e.selectedColor+" !important; }\n."+g.documentEditPage+" ."+g.cvsContainer+", ."+g.cropPage+" ."+g.cvsContainer+" { background: "+(void 0===n?{}:n).background+" !important; }\n."+g.documentEditPage+" .dvs-cameraPager, ."+g.cropPage+" .dvs-cameraPager{  color: "+t.color+" !important; }\n."+g.documentEditPage+" .dvs-cameraPager p, ."+g.cropPage+" .dvs-cameraPager p{  color: "+t.color+" !important; }\n."+g.documentEditPage+" .dvs-cameraPager .dvs-curPage, ."+g.cropPage+" .dvs-cameraPager .dvs-curPage{ color: "+t.selectedColor+" !important; }\n."+g.documentEditPage+" .dvs-cameraPager ."+g.disable+", ."+g.cropPage+" .dvs-cameraPager ."+g.disable+"{ color: "+t.disabledColor+" !important; }\n."+g.filterDropDown+" {background: "+e.background+" !important;}\n."+g.filterDropDown+" ul {background: "+e.background+" !important;}\n."+g.filterDropDown+" ul li {border-color: "+e.background+"}\n."+g.filterSelectedItem+" { border: 2px solid "+e.selectedColor+" !important; }\n."+g.filterCheckedBox+" { border-color:"+e.selectedColor+"; !important}\n."+g.filterCheckedBox+" span { background: "+e.selectedColor+" !important}\n."+g.filterCheckedBox+" +label { color: "+e.selectedColor+" }",t=document.getElementById(Ot))t.innerHTML=n;else{(t=document.createElement("style")).type="text/css",t.id=Ot;try{t.appendChild(document.createTextNode(n))}catch(e){}document.body.appendChild(t)}}var Zt=h("initElement"),qt=h("initViewer"),$t=function(e){function n(t,n,r){return n=e.call(this,t,n,r)||this,Object.defineProperty(s(n),qt,{value:tn}),Object.defineProperty(s(n),Zt,{value:en}),n.viewerPagerEventId=null,n._curImageData=null,n._filterDirty=!1,n._preEditPageCropData=null,n._bInsertingImage=!1,n._iInsertingIndex=-1,n.pageName=k,l(s(n),Zt)[Zt](),n._backInfo.origApplyToAll=r.filterApplyToAllValue,"hidden"==t.visibility&&n.clickSaveButton(),n}c(n,e);var i=n.prototype;return i.rotateLeft=function(){this._rotate(-90)},i.rotateRight=function(){this._rotate(90)},i._rotate=function(e){if(!(this.isDestroyed||this.getImageCount()<=0)){var t=this._dcs,n=this.getViewerUid(),r=(n=this.getViewerByUid(n)).getCurrentIndex();if(!(r<0)){t.showLoading("rotate button init");try{n.rotateMode=0,n.rotate(e),this._rotateFilterDropDown(n.getRotateAngle(r))}finally{t.hideLoading("rotate button init")}}}},i._rotateFilterDropDown=function(e){var t;if(!this.isDestroyed){var n=null==(t=this.element)?void 0:t.querySelectorAll(".dynamsoft-camera-preFilter");if(n)for(var r=0;r<n.length;r++){var i=n[r];i&&"IMG"==i.tagName&&i.src&&(i.style.transform="rotate("+e+"deg)")}}},i.getOrigAngle=function(e){return(e=this._copyRefMap[e])&&(e=this._backInfo.origDocumentData[e])?e.angle:0},i.getCurrentCustomData=function(){var e,t,n=this._editUid;return Xe(n)&&""!=n?(e=this._preEditPageCropData&&Xe(t=this._copyRefMap[n])&&""!=t?this._preEditPageCropData[t]:e)||this._dvsWrapper.getCustomDataSync(n):e},i.destroy=function(){this.isDestroyed=!0,ke(this._dcs);var t=this.getViewerByUid(this._viewerId);t&&this.viewerPagerEventId&&t.offById(w,this.viewerPagerEventId),this.viewerPagerEventId=null,this.removePageFile(),this.setCurImageData(null),e.prototype.destroy.call(this),this.options=null},i.setPageFilename=function(){this._pageFileName=["__dynamsoft_edit_files",it(6)].join("_")},i.getHeaderButtons=function(){var t,n=(t=this.options).headerButtons;return e.prototype.createIconItems.call(this,void 0===n?{}:n,void 0===(t=(void 0===(t=t.documentEditorSettings)?{}:t).headerStyle)?{}:t,!0,null)},i.getFooterButtons=function(){var t,n=(t=this.options).footerButtons;return e.prototype.createIconItems.call(this,void 0===n?{}:n,void 0===(t=(void 0===(t=t.documentEditorSettings)?{}:t).footerStyle)?{}:t,!1,null)},i.initPageOption=function(t,n){e.prototype.initPageOption.call(this,t,n);var r,i=void 0===(i=(t=this.options.documentEditorSettings).remove)?{}:i,o=void 0===(o=t.insert)?{}:o,a=void 0===(a=t.rotateLeft)?{}:a,s=void 0===(s=t.crop)?{}:s,u=void 0===(u=(r=void 0===(r=t.filter)?{}:r).applyToAll)?{}:u;n.curFilterValue=t=void 0===(t=r.defaultValue)?P:t,n.filterApplyToAllValue=u&&u.enableApplyToAll?t:void 0,u={curIndex:-1,fileName:null,initFileName:this._initFileName,headerButtons:{close:{icon:g.font+" "+g.iconBack,className:g.BUTTON_PREFIX+"back",onclick:function(e,t){(t=t.dcs.getCurrentPage())&&t.clickBackButton()}},pager:{className:"dvs-cameraPager"},delete:me(i,{icon:g.font+" "+g.iconDelete,className:g.BUTTON_PREFIX+"delete",onclick:function(e,t){(t=t.dcs.getCurrentPage())&&t.clickDeleteButton()}})},footerButtons:{insert:me(o,{icon:g.font+" "+g.iconInsert,className:g.BUTTON_PREFIX+"insert",onclick:function(e,t){var n,r,i,o=(t=t.dcs).getCurrentPage();function a(e){var t=e.dcs;t.captureLoop.getIsLooping()?setTimeout(a,200,e):e.callback.apply(null,[e.selectedFile,t])}function s(e,t){var n;e&&("application/pdf"==e.type||"image/tiff"==e.type?t.emit("video-error",Q):(n=t.getCurrentPage())instanceof Pn&&(t.emit("blurPage"),t.showLoading("insert - load image"),a({selectedFile:e,dcs:t,callback:n.selectedFile})))}o&&((n=o._dcs.getPreviousPage())&&n instanceof yn&&n.exitReuseMode(),r=t,t=(n=o).getDvs(),i=!1,r.showInsertPage({fileName:n.getPageFileName(),footerButtons:{capture:{onclick:function(e,t){i||(i=!0,r.getCurrentPage()instanceof Pn&&r.captureLoop.startManualCapture({dcs:r}),i=!1)}},load:{onclick:function(e,t){r.getCurrentPage()instanceof Pn&&function(e,t){var n=document.createElement("input");n.style.display="none",document.body.appendChild(n),n.addEventListener("click",(function(e){e.stopPropagation()})),n.type="file",n.multiple=!1,n.accept="image/png,image/jpeg,image/jpg",n.onchange=function(){var r;""!==n.value&&0<(r=n.files).length&&(t&&t(r[0],e),t=null),document.body.removeChild(n),n.value=null,n.files=null,n.onchange=null,n=null},n.click()}(r,s)}}}},t),r.emit("focusPage"))}}),rotate:me(a,{icon:g.font+" "+g.iconRotateLeft,className:g.BUTTON_PREFIX+"rotateLeft",onclick:function(e,t){(t=t.dcs.getCurrentPage())&&t.rotateLeft()}}),filter:me(r,{icon:g.font+" "+g.iconFilter,className:g.BUTTON_PREFIX+"filter",onclick:function(e,t){var n,r,i=(t=t.dcs).getCurrentPage();i&&(n=i.getDvs(),r=i.getViewerUid(),i.getViewerByUid(r).getCurrentIndex()<0||function(){Wt.apply(this,arguments)}(e,n,r,t))}}),crop:me(s,{icon:g.font+" "+g.iconCrop,className:g.BUTTON_PREFIX+"crop",onclick:function(e,t){(t=t.dcs.getCurrentPage())&&t.clickCropButton()}}),save:{icon:g.font+" "+g.iconSave,className:g.BUTTON_PREFIX+"save",onclick:function(e,t){(t=t.dcs.getCurrentPage())&&t.clickSaveButton()}}}},this.options=Ze(this.options,u)},i.changePageNumber=function(e,t){var n,r;this.element&&(n=null==(r=null==(r=this.element)?void 0:r.querySelector(".dvs-cameraPager"))?void 0:r.querySelector(".dvs-curPage"),r=null==r?void 0:r.querySelector(".dvs-totalPage"),n.innerText=String(e+1),r.innerText=String(t))},i.changeStatus=function(e,t){var n,r;this.element&&(n=null==(r=null==(r=this.element)?void 0:r.querySelector(".dvs-cameraPager"))?void 0:r.querySelector(".dvs-previousPage"),r=null==r?void 0:r.querySelector(".dvs-nextPage"),0<=e?(n.classList[e<=0?"add":"remove"](g.disable),r.classList[t===e+1?"add":"remove"](g.disable)):(n.classList.add(g.disable),r.classList.add(g.disable)))},i.handlePageByUid=function(){var e=t(r().mark((function e(t,n){var i,o,a,s,u,c,l,d,h;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isDestroyed)return e.abrupt("return");e.next=2;break;case 2:if(this._isHandlingPageUid)return this._nextHandlePageUid=t,e.abrupt("return");e.next=5;break;case 5:return this._isHandlingPageUid=!0,i=this._dcs,this._editUid!=(o=t)&&(this.setCurPageId(o),this.setCurImageData(null)),null!=i&&i.showLoading("handle page by uid"),e.prev=10,e.next=13,this.initOrigDataByUid(o);case 13:if(a=null==(a=this._dvsWrapper)?void 0:a.getCustomDataSync(o)){e.next=21;break}if(!(u=this.getViewerByUid(this._viewerId))){e.next=21;break}if((o=u.getUidByIndex(0))&&(a=null==(u=this._dvsWrapper)?void 0:u.getCustomDataSync(o),this.setCurPageId(o)),a){e.next=21;break}return e.abrupt("return");case 21:if(s=a.detectArea,d=a.resBlob,c=re(i,u=a.filterValue),u&&c==u&&d||this.SetFilterDirty(!0),!s||!u||this._filterDirty){e.next=29;break}e.next=44;break;case 29:return s||(this.setCurImageData(null),this.SetFilterDirty(!0)),e.next=32,this.getCurImageData(o);case 32:if((l=e.sent)&&this._filterDirty)return e.next=36,ue(l);e.next=42;break;case 36:return d=e.sent,e.next=39,i.filterHandlerByIImageData(l,d,c);case 39:return h=e.sent,e.next=42,Me(h,n,o,!1,{resBlob:h,filterValue:c,bitDepth:h.imageBitDepth});case 42:this._filterDirty=!1,this.setFilterDropDownDirty();case 44:return e.prev=44,null!=i&&i.hideLoading("handle page by uid"),this._isHandlingPageUid=!1,e.finish(44);case 48:if(this._nextHandlePageUid)return h=this._nextHandlePageUid,this._nextHandlePageUid=null,e.next=53,this.handlePageByUid(h,this._dvs);e.next=53;break;case 53:case"end":return e.stop()}}),e,this,[[10,,44,48]])})));return function(t,n){return e.apply(this,arguments)}}(),i.setCurImageData=function(e){this._curImageData&&delete this._curImageData.imageData,this._curImageData=e},i.getCurImageData=function(){var e=t(r().mark((function e(t){var n,i,o,a,s,u,c,l,d;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isDestroyed)return e.abrupt("return");e.next=2;break;case 2:if(n=this._dcs,!(i=this._editUid==t)){e.next=6;break}if(this._curImageData)return e.abrupt("return",this._curImageData);e.next=6;break;case 6:if(o=null==(o=this._dvsWrapper)?void 0:o.getCustomDataSync(t)){e.next=9;break}return e.abrupt("return");case 9:if(a=o.oriBlob,s=o.detectArea,u=void 0===(u=o.angle)?0:u,null!=n&&n.showLoading("handle page by uid"),e.prev=11,s)return e.next=15,se(a);e.next=22;break;case 15:return l=e.sent,e.next=18,te(l,u,s);case 18:c=e.sent,i&&(this.setCurImageData(c),this.SetFilterDirty(!0)),e.next=32;break;case 22:return e.next=24,se(a,u);case 24:return l=e.sent,e.next=27,oe(l,n,!0,!1,!1);case 27:o.detectArea=(d=e.sent).detectArea,c=d.resImage,this.setCurPageId(t),i&&(this.setCurImageData(c),this.SetFilterDirty(!0));case 32:return e.prev=32,null!=n&&n.hideLoading("handle page by uid"),e.finish(32);case 35:return e.abrupt("return",c);case 36:case"end":return e.stop()}}),e,this,[[11,,32,35]])})));return function(t){return e.apply(this,arguments)}}(),i.render=function(){var e=this.getViewerByUid(this._viewerId),t=e.getCurrentPageUids();t&&0<t.length&&setTimeout((function(){var t;null!=e&&null!=(t=e.ui)&&t.styleChange(),null!=e&&e.rotate(0)}),0)},i.setCurPageId=function(e){this._editUid=e},i.setFilterDropDownDirty=function(){var e=null==(e=this.element)?void 0:e.querySelector("."+g.BUTTON_PREFIX+"filter");e&&(e=null==e?void 0:e.querySelector("."+g.filterDropDown))&&e.setAttribute("data","")},i.SetFilterDirty=function(e){this._filterDirty=!0},i.ClearFilterDirty=function(){this._filterDirty=!1},i.GetFilterDirty=function(){return this._filterDirty},i.clickCropButton=function(){var e=t(r().mark((function e(){var t,n,i,o,a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("hidden"==this.options.documentEditorSettings.cropViewer.visibility.toString().toLowerCase())return e.abrupt("return");e.next=2;break;case 2:if(this.getImageCount()<=0)return e.abrupt("return");e.next=4;break;case 4:if(t=this.getDvs(),n=this.getCurrentIndex(),!this._pageFileName){e.next=23;break}if(i=this.saveViewerAngle(),o={fileName:this._pageFileName,initFileName:this._initFileName,curIndex:n,saveData:!0,fromInternal:this.options.fromInternal,documentEditorSettings:this.options.documentEditorSettings,nextButtonCss:g.font+" "+g.iconSave},(a=this._dcs.getPreviousPage())&&a instanceof yn)return s=(s=this.getViewerByUid(this._viewerId)).getCurrentPageUids(),a.enterReuseMode(o,s),a.gotoViewPage(n),e.next=17,this._dcs.navigateToPage(a);e.next=18;break;case 17:return e.abrupt("return");case 18:return(s=new yn(o,t,this._dcs)).gotoViewPage(n),e.next=22,this._dcs.navigateToPage(s);case 22:this.resetViewerAngleByIndexes(i);case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.updateFileDataToViewer=function(){var e=t(r().mark((function e(){var t,n,i,o,a,s,u,c,l,d,h,g,f,m;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.getViewerByUid(this._viewerId))){e.next=47;break}0<=(n=t.getCurrentIndex())&&(i=t.getUidByIndex(n)),o=t.getCurrentPageUids(),u=o.length,l=!(c=[]),s=0;case 7:if(!(s<u)){e.next=18;break}if(Xe(a=o[s])&&""!=a){e.next=11;break}return e.abrupt("continue",15);case 11:if(Xe(d=this._copyRefMap[a])&&""!=d){e.next=14;break}return e.abrupt("continue",15);case 14:c.push(d);case 15:s++,e.next=7;break;case 18:this.backupImageDataFromUids(c),s=0;case 20:if(!(s<u)){e.next=47;break}if(Xe(a=o[s])&&""!=a){e.next=24;break}return e.abrupt("continue",44);case 24:if(l=i==a,Xe(h=this._copyRefMap[a])&&""!=h){e.next=28;break}return e.abrupt("continue",44);case 28:if(g=this._backInfo.origDocumentData[h],f=this._preEditPageCropData[h],!((m=null==(m=this._dvsWrapper)?void 0:m.getCustomDataSync(a))&&f&&g)){e.next=44;break}if(!ot(f.detectArea,g.detectArea)||f.angle!=g.angle){e.next=35;break}e.next=44;break;case 35:if(m.angle=g.angle,m.detectArea=g.detectArea,m.resBlob&&delete m.resBlob,this._dvsWrapper.setCustomDataSync(a,m),l)return t.resetByIndex(n,!1),this.setCurImageData(null),e.next=44,this.handlePageByUid(i,this._dvs);e.next=44;break;case 44:s++,e.next=20;break;case 47:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.hide=function(){e.prototype.hide.call(this)},i.show=function(){var n=t(r().mark((function t(){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isDestroyed)return this.hide(),t.abrupt("return");t.next=3;break;case 3:if(this._bSyncViewerDataFromBackupData)return t.next=6,this.updateFileDataToViewer();t.next=8;break;case 6:this._preEditPageCropData=null,this._bSyncViewerDataFromBackupData=!1;case 8:return this._dcs.config.documentEditorSettings.visibility="visible",t.next=11,e.prototype.show.call(this);case 11:(n=this.getViewerByUid(this._viewerId))&&0<n.getCurrentPageUids().length&&this.render();case 13:case"end":return t.stop()}}),t,this)})));return function(){return n.apply(this,arguments)}}(),i.clickDeleteButton=function(){var e=t(r().mark((function e(){var t,n,i,o,a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isDestroyed)return e.abrupt("return");e.next=2;break;case 2:if(this.getImageCount()<=0)return e.abrupt("return");e.next=4;break;case 4:if((i=this._dcs).config.documentEditorSettings.remove.funcConfirmRemove)return e.next=8,i.config.documentEditorSettings.remove.funcConfirmRemove();e.next=11;break;case 8:if(0==e.sent)return e.abrupt("return");e.next=11;break;case 11:if(t=this.getViewerByUid(this._viewerId),(n=t.getCurrentIndex())<0)return e.abrupt("return");e.next=15;break;case 15:if(i=t.getUidByIndex(n),(s=this._dcs.getPreviousPage())&&s instanceof yn&&s.exitReuseMode(),s=this.getRefUid(i,!0),o=!1,!Xe(s)||""==s){e.next=29;break}if(!(a=this._initFileName)){e.next=29;break}if(0<=(a=this._fileWrapper.getIndexByUidInFile(a,s)))return s=this._dcs.getRemovePhotoCallback(),e.next=28,s(this._initFileName,a);e.next=29;break;case 28:o=!0;case 29:if(o||t.removeSync(n),0<t.currentPageCount)return e.next=33,this.refreshViewer();e.next=33;break;case 33:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.clickSaveButton=function(){var e=t(r().mark((function e(){var t,n,i,o,a,s,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isDestroyed)return e.abrupt("return");e.next=2;break;case 2:if(t=this.getDvs(),n=this._dcs,a=this.getViewerByUid(this._viewerId),n.showLoading("save button init"),i=!1,o=this.options.fromInternal,e.prev=7,this.saveViewerAngle(),(s=n.getPreviousPage())&&s instanceof yn&&s.exitReuseMode(),this.setCurImageData(null),this.SetFilterDirty(!0),!(0<(s=a.getCurrentPageUids()).length)){e.next=23;break}if(o)return e.next=18,this._saveToWebTwain(s);e.next=21;break;case 18:t.File.removeFile(this._backFileName),e.next=23;break;case 21:return e.next=23,this.saveFromExternal(s);case 23:(u=null==(a=document)?void 0:a.querySelector(".dvs-showImageArea"))&&(u.style.display=""==u.style.display?"block":""),ke(n),i=!0,n.exit(t);case 28:return e.prev=28,n.hideLoading("save button init"),e.finish(28);case 31:if(i&&n.closeAllPages)return e.next=34,n.closeAllPages();e.next=37;break;case 34:if(n.config.documentEditorSettings.funcConfirmExitAfterSave)return e.next=37,n.config.documentEditorSettings.funcConfirmExitAfterSave(!o);e.next=37;break;case 37:case"end":return e.stop()}}),e,this,[[7,,28,31]])})));return function(){return e.apply(this,arguments)}}(),i.ifOldDocumentDataChanged=function(){if(this._backInfo.origApplyToAll!=this._dcs.filterApplyToAllValue)return!0;var e=this.getViewerByUid(this._viewerId),t=!1;if(e)for(var n=e.getCurrentPageUids(),r=0;r<n.length;r++){var i=n[r];if(Xe(i)&&""!=i){var o=this._copyRefMap[i];if(Xe(o)&&""!=o){if(!(o=this._backInfo.origDocumentData[o]))return!0;var a=null==(a=this._dvsWrapper)?void 0:a.getCustomDataSync(i);if(a&&(a=(i=Ze(a,{})).oriBlob,i.angle=Ce(i.angle+e.getRotateAngle(r)),t=this.compareOldValueChanged(o,i,a)))break}}}return t},i.refreshViewer=function(){var e=t(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.getViewerByUid(this._viewerId),0<=(n=t.getCurrentIndex()))return n=t.getUidByIndex(n),e.next=6,this.handlePageByUid(n,this._dvs);e.next=7;break;case 6:t.render();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i._saveToWebTwain=function(){var e=t(r().mark((function e(t){var n,i,o,a,s,u,c,l;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this._dvs,o=(i=this._dcs).getSavePhotoCallback(),a=0;case 3:if(!(a<t.length)){e.next=24;break}if(Xe(s=t[a])&&""!=s){e.next=7;break}return e.abrupt("continue",21);case 7:if(u=this._dvsWrapper.getDataRootSync(s)){e.next=10;break}return e.abrupt("continue",21);case 10:return c=!1,u.customData&&!u.customData.resBlob&&(c=!0),e.next=14,rn(i,u,c);case 14:return l=(c=e.sent).filterBlob,delete c.filterBlob,e.next=19,o([{file:c,iImageData:l}]);case 19:return e.next=21,n.DataControl.removeData(s);case 21:a++,e.next=3;break;case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i.getFileName=function(){return this._backFileName},i.saveCurrentCropData=function(){var e=this.getViewerByUid(this._viewerId),t={};if(e)for(var n,r,i,o=e.getCurrentPageUids(),a=o.length,s=0;s<a;s++)Xe(n=o[s])&&""!=n&&(r=this._copyRefMap[n],i=null==(i=this._dvsWrapper)?void 0:i.getCustomDataSync(n),t[r]=i?{detectArea:i.detectArea,angle:i.angle,filterValue:i.filterValue}:{detectArea:null,angle:0,filterValue:P});return t},i.saveFromExternal=function(){var e=t(r().mark((function e(t){var n,i,o,a,s,u,c,l,d,h,g;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isDestroyed)return e.abrupt("return");e.next=2;break;case 2:n=this._dvs,i=this._dcs.getPreviousPageByPage(this),o=t.length-1;case 5:if(!(0<=o)){e.next=37;break}if(Xe(a=t[o])&&""!=a){e.next=9;break}return e.abrupt("continue",34);case 9:if(s=!0,u=void 0,c=null==(c=this._dvsWrapper)?void 0:c.getCustomDataSync(a)){e.next=13;break}return e.abrupt("continue",34);case 13:if(Xe(l=this._copyRefMap[a])&&""!=l&&(u=(u=this._backInfo.initDocumentData[l])||this._backInfo.origDocumentData[l])&&(this._dcs.filterApplyToAllValue?this._dcs.filterApplyToAllValue!=P||Xe(u.filterValue)&&u.filterValue!=P||ot(u.detectArea,c.detectArea)&&u.angle==c.angle&&(s=!1):ot(u.detectArea,c.detectArea)&&u.angle==c.angle&&Be(u.filterValue,c.filterValue)&&(s=!1)),!s){e.next=34;break}if(d=this._dvsWrapper.getDataRootSync(a)){e.next=19;break}return e.abrupt("continue",34);case 19:if(d.customData&&d.customData.oriBlob){e.next=22;break}return e.next=22,this.handlePageByUid(a,n);case 22:return e.next=24,rn(this._dcs,d,!0);case 24:if(g=(h=e.sent).filterBlob,delete h.filterBlob,i&&i instanceof yn)return e.next=30,i.updateUid(l,g,h);e.next=32;break;case 30:e.next=34;break;case 32:return e.next=34,Me(g,n,l,!0,h);case 34:o--,e.next=5;break;case 37:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i.clickBackButton=function(){var e=t(r().mark((function e(){var t,n,i,o,a,s,u,c,l,d,h,g,f,m;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isDestroyed)return e.abrupt("return");e.next=2;break;case 2:if(t=this._dcs,n=this.getCurrentIndex(),i=t.getPreviousPage(),o=this.ifOldDocumentDataChanged(),(l=this.options.documentEditorSettings.funcConfirmExit)&&Ye(l))return d="",i&&(d=i.pageName),e.next=12,l(o,d);e.next=19;break;case 12:if(0==(a=e.sent))return e.abrupt("return");e.next=17;break;case 17:if(1!=a&&2!=a)return e.abrupt("return");e.next=19;break;case 19:if(void 0===a&&(a=i?2:1),!i){e.next=23;break}e.next=29;break;case 23:if(1!=a){e.next=26;break}e.next=29;break;case 26:if(2==a)return this.clickSaveButton(),e.abrupt("return");e.next=29;break;case 29:if(s=!1,e.prev=30,c=t.getCurrentPage(),ke(t),i&&i instanceof yn)return i.exitReuseMode(),2==a?(u=this.saveViewerAngle(),this.resetViewerAngleByIndexes(u),this.saveViewerCustomData()):1==a&&(this.restoreViewerCustomData(),this.resetViewerAngle()),o&&(l=i.getViewerByUid(i.getViewerUid()),d=l.getCurrentPageUids(),u=i.resetCropInfoByUids(d),i.resetViewerAngleByIndexes(u)),this._bSyncViewerDataFromBackupData=!0,this._preEditPageCropData=this.saveCurrentCropData(),i.gotoViewPage(n),e.next=42,t.navigateBack(1,!1);e.next=47;break;case 42:h=e.sent,t.showLoading("close edit page"),1==h.length?i.setNextViewerPage(h.pop()):t.destroyRemovedPages(),e.next=88;break;case 47:if(i&&i instanceof kt)return 2==a?(u=this.saveViewerAngle(),this.resetViewerAngleByIndexes(u),this.saveViewerCustomData()):1==a&&(this.restoreViewerCustomData(),this.resetViewerAngle()),e.next=51,i.refreshPreviewWhenChanged();e.next=78;break;case 51:return e.next=53,t.navigateBack(1,!1);case 53:if(h=e.sent,t.showLoading("close edit page"),1==h.length?i.setNextViewerPage(h.pop()):t.destroyRemovedPages(),"playing"!=(g=t.getStatus())){e.next=60;break}e.next=74;break;case 60:if("paused"!=g){e.next=64;break}t.resume(),e.next=74;break;case 64:if(f=(f=i.element).children[1],(m=this.options.scannerViewer)&&m.resolution&&m.resolution.defaultValue)return e.next=70,t.play(f,m.resolution.defaultValue.width,m.resolution.defaultValue.height,m.fullScreen);e.next=72;break;case 70:e.next=74;break;case 72:return e.next=74,t.play(f);case 74:t.emit("resetResolution"),t.emit("focusPage"),e.next=88;break;case 78:if(t.showLoading("close edit page"),i)return e.next=82,t.navigateBack();e.next=85;break;case 82:c.hide(),e.next=88;break;case 85:s=!0,c.hide(),t.exit(this._dvs);case 88:return e.prev=88,t.hideLoading("close edit page"),e.finish(88);case 91:if(s&&t.closeAllPages)return e.next=94,t.closeAllPages();e.next=94;break;case 94:case"end":return e.stop()}}),e,this,[[30,,88,91]])})));return function(){return e.apply(this,arguments)}}(),i.insertImgByBlobItem=function(){var e=t(r().mark((function e(t,n){var i,o,a,s,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=(null==(s=n.config.documentEditorSettings)?void 0:s.filter)||{},u={detectArea:u=t.detectArea,oriBlob:i=t.oriBlob,resBlob:o=t.filterBlob||t.resBlob||i,filterValue:s=s.defaultValue,angle:0},i={oriData:o.imageData,metadata:Ae(o),customData:u},s=u=void 0===(o=(s=n.config.scannerViewer||{}).maxDocuments)?20:o,o=this.getViewerByUid(this._viewerId),a="before"===(void 0===(a=(a=(null==(a=n.config.documentEditorSettings)?void 0:a.insert)||{}).position)?"before":a)?o.getCurrentIndex():o.getCurrentIndex()+1,!this.options.fromInternal||o.currentPageCount+1<=s&&o.currentPageCount+1<=u)return s=o.currentPageCount,(a<0||s-1<a)&&(a=-1),this._bInsertingImage=!0,u=this._dcs.getInsertPhotoCallback(),e.next=17,u(this._initFileName,i,a);e.next=19;break;case 17:e.next=20;break;case 19:n.emit("video-error",Y);case 20:return e.abrupt("return",a);case 21:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),i.insertFile=function(){var e=t(r().mark((function e(t){var n,i,o,a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._dcs,this.isDestroyed)return e.abrupt("return");e.next=3;break;case 3:if(e.prev=3,i=a=void 0===(a=(a=n.config.scannerViewer||{}).maxDocuments)?20:a,o=this.getViewerByUid(this._viewerId),!this.options.fromInternal||o.currentPageCount+1<=i&&o.currentPageCount+1<=a)return e.next=10,tt(t);e.next=29;break;case 10:return i=e.sent,e.next=13,se(i);case 13:return o=e.sent,e.next=16,n.packageBlobItemFromIImageData(o,!0,!0,!0);case 16:return a=e.sent,e.next=19,this.insertImgByBlobItem(a,n);case 19:if(0<=(this._iInsertingIndex=s=e.sent))return e.next=24,this.handlePageByIndex(s);e.next=24;break;case 24:return e.next=26,n.navigateBack();case 26:e.next=32;break;case 29:return n.emit("video-error",Y),e.next=32,n.navigateBack();case 32:return e.prev=32,n.stop(),e.finish(32);case 35:case"end":return e.stop()}}),e,this,[[3,,32,35]])})));return function(t){return e.apply(this,arguments)}}(),i.isInsertingImage=function(){return this._bInsertingImage},i.setInsertingImageIndex=function(e){this._iInsertingIndex=e,this._bInsertingImage=!0},i.clearInserting=function(){var e=t(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._bInsertingImage=!1,0<=(t=(t=this._iInsertingIndex)<0&&0<this.getImageCount()?0:t))return this.setCurImageData(null),this.SetFilterDirty(!0),e.next=8,this.handlePageByIndex(t);e.next=8;break;case 8:this._iInsertingIndex=-1;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.applyChanged=function(){var e=this.getViewerByUid(this._viewerId);if(e)for(var t=e.getCurrentPageUids(),n=0;n<t.length;n++){var r,i,o,a=t[n];!Xe(a)||""==a||(o=null==(o=this._dvsWrapper)?void 0:o.getCustomDataSync(a))&&(r=o.detectArea,i=o.angle,(a=this._copyRefMap[a])&&(o=o.filterValue,this._backInfo.origDocumentData[a]&&(o=this._backInfo.origDocumentData[a].filterValue),this._backInfo.origDocumentData[a]={detectArea:r,angle:void 0===i?0:i,filterValue:o}))}},i.appendFilterDropdownImages=function(){var e=t(r().mark((function e(t){var n,i,a,s,u,c,l,d,h,f,m,p,_,v,I,y,b,D,T,S;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._dcs,e.prev=1,0<=(a=t.getCurrentIndex()))return s=t.getUidByIndex(a),c=this.GetFilterDirty(),e.next=8,this.getCurImageData(s);e.next=10;break;case 8:u=e.sent,c||this.ClearFilterDirty();case 10:if(!s||!u){e.next=48;break}l=t.getRotateAngle(a),T=this._dvsWrapper.getCustomDataSync(s),h=null==(h=n.config.documentEditorSettings)?void 0:h.filter,S=void 0===(S=h.defaultValue)?"original":S,I=h.applyToAll,h=h.valueList,d=(d=I&&I.enableApplyToAll&&Xe(n.filterApplyToAllValue)&&""!=n.filterApplyToAllValue?n.filterApplyToAllValue:d)||(d=T.filterValue)||S,e.next=19;var r=u;return o.ImageProcWrapper.createImage({source:r,output:{orgImage:!1,previewImage:{quality:85,width:200,height:200,returnType:o.Enum_ImageType.IT_BGRA,returnBlob:!1,nInterplationMethod:5}}}).then((function(e){return r.imageData=e.src,ze(e.preview),e.preview}));case 19:if(f=e.sent)return e.next=23,ue(f);e.next=48;break;case 23:m=e.sent,_=!(p=[]),v=0;case 27:if(!(v<h.length)){e.next=43;break}if(b=(I=h[v]).label,D=void 0,"original"!==(y=I.value)){e.next=35;break}D=m,_=!0,e.next=39;break;case 35:return e.next=37,n.filterHandlerByIImageData(f,m,y);case 37:D=T=e.sent;case 39:D&&(S=rt.createURL(D),p.push({value:y,url:S,label:b}));case 40:v++,e.next=27;break;case 43:f=null,_||p.unshift({value:P,url:rt.createURL(m),label:"Original"}),h.some((function(e){return e.value===d}))||(d=P),0<p.length&&(i=document.createDocumentFragment()),p.forEach((function(e,t){var n=document.createElement("li");n.innerHTML='<img class="dynamsoft-camera-preFilter" src="'+e.url+'" style="transform:rotate('+l+'deg)"><p>'+e.label+"</p>",i.appendChild(n),n.dataset.filterValue=e.value,e.value===d&&n.classList.add(g.filterSelectedItem)}));case 48:return e.prev=48,e.finish(48);case 50:return e.abrupt("return",i);case 51:case"end":return e.stop()}}),e,this,[[1,,48,50]])})));return function(t){return e.apply(this,arguments)}}(),i.initOrigDataByUid=function(){var n=t(r().mark((function t(n){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.prototype.initOrigDataByUid.call(this,n);case 2:case"end":return t.stop()}}),t,this)})));return function(e){return n.apply(this,arguments)}}(),i.restoreViewerCurrentCustomData=function(){var e=[],t=this.getViewerByUid(this._viewerId),n=t.getCurrentIndex();if(0<=n){var r=t.getCurrentPageUids()[n];if(!Xe(i=this._copyRefMap[r])||""==i)return;var i,o=null==(o=this._dvsWrapper)?void 0:o.getCustomDataSync(i);(i=this.restoreOneViewerCustomData(t,r,n,o)).changed&&(this.setCurImageData(null),i.needReset&&e.push(n))}return e},i.saveViewerAngle=function(){var e=[],t=this.getViewerByUid(this._viewerId);if(t)for(var n,r=t.getCurrentPageUids(),i=r.length,o=t.getCurrentIndex(),a=0;a<i;a++)Xe(n=r[a])&&""!=n&&this.saveViewerOneAngle(t,a==o,a,n)&&e.push(a);return e},i.resetViewerAngle=function(){var e=[],t=this.getViewerByUid(this._viewerId);if(t)for(var n=t.getCurrentPageUids().length,r=0;r<n;r++)0!==t.getRotateAngle(r)&&e.push(r);this.resetViewerAngleByIndexes(e)},i.saveViewerOneAngle=function(e,t,n,r){var i=!1;return e=e.getRotateAngle(n),(n=null==(n=this._dvsWrapper)?void 0:n.getCustomDataSync(r))&&0!=e&&(n.angle=Ce(n.angle+e),n.resBlob&&delete n.resBlob,t&&this.setCurImageData(null),i=!0),i},n}(Ht);function en(){var e,t,n=(t=void 0===(t=this.options.documentEditorSettings)?{}:t).bodyStyle;this.setDefaultBackgroundColors(e=void 0===(e=t.headerStyle)?{}:e,void 0===n?{}:n,t=void 0===(t=t.footerStyle)?{}:t),this.template=['<header style="background:'+e.background+'" class="headerButtons"></header>','<div class="'+g.cvsContainer+'" style="width:100%;height:100%"></div>','<footer style="background:'+t.background+'" class="footerButtons"></footer>'].join(""),this.className=g.documentEditPage,this.createEl(),l(this,qt)[qt]()}function tn(){return nn.apply(this,arguments)}function nn(){return(nn=t(r().mark((function e(){var n,i,o,a,s,u,c,l=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.element){e.next=2;break}return e.abrupt("return");case 2:a=void 0===(a=(void 0===(a=(a=this.options).documentEditorSettings)?{}:a).bodyStyle)?{}:a,n=this._dvs,u=null==(u=this.element)?void 0:u.querySelector(".dvs-cameraPager"),c=null==u?void 0:u.querySelector(".dvs-previousPage"),i=null==u?void 0:u.querySelector(".dvs-nextPage"),(o=this.getViewerByUid(this._viewerId)).canvasBackground=a.background,o.bindView(null==(a=this.element)?void 0:a.querySelector("."+g.cvsContainer)),a=o.getCurrentTab(),c&&i||(u.innerHTML='<div class="dvs-previousPage '+g.font+" "+g.iconArrow+" "+g.headerfont+" "+g.disable+'"></div>\n      <p><span class="dvs-curPage">0</span>/<span class="dvs-totalPage">0</span></p>\n      <div class="dvs-nextPage '+g.font+" "+g.iconArrow+" "+g.headerfont+" "+g.disable+'"></div>',c=null==u?void 0:u.querySelector(".dvs-previousPage"),i=null==u?void 0:u.querySelector(".dvs-nextPage"),a&&0<=a.total&&(c.onclick=t(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!=(t=o.getPrePageIndex()))return t=o.getUidByIndex(t),e.next=5,l.handlePageByUid(t,n);e.next=6;break;case 5:o.prevPage();case 6:case"end":return e.stop()}}),e)}))),i.onclick=t(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!=(t=o.getNextPageIndex()))return t=o.getUidByIndex(t),e.next=5,l.handlePageByUid(t,n);e.next=6;break;case 5:o.nextPage();case 6:case"end":return e.stop()}}),e)}))),(s=this).viewerPagerEventId=o.on(w,(function(e){s&&e&&(s.changePageNumber(e.cur,e.total),s.changeStatus(e.cur,e.total))})))),a&&0<=(u=a.total)&&0<=(c=o.getCurrentIndex())&&(this.changeStatus(c,u),this.changePageNumber(c,u)),null!=(i=o.ui)&&i._resizeViewer();case 16:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function rn(){return on.apply(this,arguments)}function on(){return(on=t(r().mark((function e(t,n,i){var o,a,s,u,c,l,d,h,g,f,m,p,_;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=(l=n.customData).oriBlob,a=l.detectArea,u=l.filterValue,s=l.angle,l=void 0===(l=l.bitDepth)?0:l,g=i,s=Ce(s=void 0===s?0:s),u=u,c=He(o),t.filterApplyToAllValue&&u&&u!=t.filterApplyToAllValue&&(u=t.filterApplyToAllValue,g=!0),!g&&a&&u&&0==s)return(g=n.metadata?xe(n.metadata):{}).imageData=n.oriData,0<l&&(g.imageBitDepth=l),t.emit("resetResolution"),e.abrupt("return",{filterBlob:g,detectArea:a,oriBlob:c,angle:0,filterValue:u});e.next=14;break;case 14:if(a)return e.next=17,se(o);e.next=32;break;case 17:return l=e.sent,e.next=20,te(l,s,a);case 20:return d=e.sent,h=re(t,u),e.next=24,ue(d);case 24:return g=e.sent,e.next=27,t.filterHandlerByIImageData(d,g,h);case 27:return m=e.sent,t.emit("resetResolution"),e.abrupt("return",{filterBlob:m,detectArea:a,oriBlob:c,angle:s,filterValue:h});case 32:return f=re(t,u),e.next=35,se(o,s);case 35:return m=e.sent,e.next=38,t.packageBlobItemFromIImageData(m,!0,!0,!1,f);case 38:return p=(_=e.sent).detectArea,_=_.filterBlob,t.emit("resetResolution"),e.abrupt("return",{filterBlob:_,detectArea:p,oriBlob:c,angle:s,filterValue:f});case 42:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var an=function(){function e(e){var t=this;this.mode="normal",this.vertexes=[],this.midpoints=[],this.probePoints=[],this.slopeRatio=[],this.isCrop=!1,this.ctrlRadius=4,this.sensorRadius=4,this.defaultLineColor="rgba(0,0,0,1)",this.defaultFirstPointColor="rgba(255,0,0,1)",this.invalidLineColor="rgba(255,0,0,1)",this.invalidFirstPointColor="rgba(0,0,0,1)",this.lineColor="rgba(0,0,0,1)",this.firstPointColor="rgba(0,0,0,1)",this.pointFillColor="rgba(255,255,255,0)",this.lineWidth=1,this.dashLine=[4,2],this.isPointSelected=!1,this.activeProbePoint=null,this.moveLeft=0,this.moveTop=0,this.isMoveBox=!1,this.width=0,this.height=0,this.imgWidth=0,this.imgHeight=0,this.leftEdge=0,this.topEdge=0,this.type="bottomRight",this.keepAspectRatio=!1,this.aspectRatio=0,this._startX=null,this._startY=null,this._lastX=null,this._lastY=null,this._lastWhr=1,this.dpr=1,Object.keys(e).forEach((function(n){t[n]=e[n]})),this.resetBox()}var t=e.prototype;return t.getRect=function(){var e=(r=this._getMaxPoint()).minX,t=r.maxX,n=r.minY,r=r.maxY;return{x:Math.floor(e),y:Math.floor(n),width:Math.floor(t-e),height:Math.floor(r-n)}},t.resetBox=function(){this.midpoints=sn(this.vertexes),this.probePoints=this.vertexes.slice().concat(this.midpoints.slice()),this.slopeRatio=un(this.vertexes)},t._getMaxPoint=function(){return{minX:Math.min(this.probePoints[0],this.probePoints[2],this.probePoints[4],this.probePoints[6]),maxX:Math.max(this.probePoints[0],this.probePoints[2],this.probePoints[4],this.probePoints[6]),minY:Math.min(this.probePoints[1],this.probePoints[3],this.probePoints[5],this.probePoints[7]),maxY:Math.max(this.probePoints[1],this.probePoints[3],this.probePoints[5],this.probePoints[7])}},t.checkPointPosition=function(e){var t=(i=this._getMaxPoint()).minX,n=i.maxX,r=i.minY,i=i.maxY,o=this.probePoints[2*e],a=this.probePoints[2*e+1];return e<4?o===n&&a===i?"se":o===n&&a===r?"ne":o===t&&a===r?"nw":o===t&&a===i?"sw":null:o===n?"e":a===i?"s":o===t?"w":a===r?"n":null},t.onStartHandler=function(e,t,n){var r=this.isBoxSelected(e,t);null!==(r=void 0!==n?n:r)&&(this._startX=e,this._startY=t,this._lastX=e,this._lastY=t,-1===r?(this.isPointSelected=!1,this.activeProbePoint=null,"normal"===this.mode&&(this.isMoveBox=!0)):(this.isPointSelected=!0,this.activeProbePoint=r,this.isMoveBox=!1),"free"===this.mode&&3<r&&(this.k1=this.slopeRatio[(1+(n=r-4))%4],this.b1=this.probePoints[(2*n+3)%8]-this.k1*this.probePoints[(2*n+2)%8],this.k2=this.slopeRatio[(3+n)%4],this.b2=this.probePoints[(2*n+1)%8]-this.k2*this.probePoints[(2*n+0)%8]))},t.onMoveHandler=function(e,t,n){if(this.isPointSelected||this.isMoveBox){var r=this.probePoints.slice();if(this.isPointSelected){var i=this.activeProbePoint;void 0!==n&&(i=n),"normal"===this.mode?r=this._movePointNormal(r,i,e,t):(r=this._movePointFree(r,i,e,t),this.slopeRatio=un(this.probePoints).slice(0,4)),this.probePoints=r.slice(),this._checkRectConvexity(this.probePoints)?(this.lineColor=this.defaultLineColor,this.firstPointColor=this.defaultFirstPointColor):(this.lineColor=this.invalidLineColor,this.firstPointColor=this.invalidFirstPointColor)}else if(this.isMoveBox){if(i=t-this._lastY,0==(n=e-this._lastX)&&0==i)return;r=this._moveBox(r,n,i),this.probePoints=r.slice()}n=sn(this.probePoints),this.probePoints=this.probePoints.slice(0,8).concat(n),this.midpoints=n,this._lastX=e,this._lastY=t}},t.onEndHandler=function(){this.lineColor=this.defaultLineColor,this.firstPointColor=this.defaultFirstPointColor;var e,t=this._startX,n=this._startY,r=(this._startX=0,this._startY=0,this._lastX),i=this._lastY;(this.isPointSelected||this.isMoveBox)&&(this.isPointSelected=!1,this.isMoveBox=!1,this.activeProbePoint=null,e=this._checkRectConvexity(this.probePoints),(t!==r||n!==i)&&e||(this.probePoints=this.vertexes.slice().concat(this.midpoints)),this.vertexes=this.probePoints.slice(0,8),this.midpoints=sn(this.probePoints),this.probePoints=this.probePoints.slice(0,8).concat(this.midpoints),this.slopeRatio=un(this.probePoints).slice(0,4))},t._checkEdge=function(e,t){return!!(0<=e&&e<=this.width&&0<=t&&t<this.height)},t._movePointNormal=function(e,t,n,r){n=Math.max(this.leftEdge,Math.min(this.width,n)),r=Math.max(this.topEdge,Math.min(this.height,r));var i=0,o=0;if(this.keepAspectRatio){var a=(c=this._getMaxPoint()).minX,s=c.maxX,u=c.minY,c=c.maxY,l=this.checkPointPosition(t);if(0==(s=(s-a)/(c-u))||s===1/0||s===-1/0||Number.isNaN(s)?s=this._lastWhr:this._lastWhr=s,o=i=0,a="width",t<4){if(o=r-e[2*t+1],0==(i=n-e[2*t])||0===o)return e;a="width"}else if(c=t-4,"e"===l?(t=(1+c)%4,a="width"):"s"===l?(t=c,a="height"):"w"===l?(t=c,a="width"):"n"===l&&(t=(1+c)%4,a="height"),o=r-e[2*c+1],0==(i=n-e[2*c])||0===o)return e;"height"===a?(i=o*s,"ne"!==l&&"sw"!==l&&"n"!==l&&"w"!==l||(i=-i)):(o=i/s,"ne"!==l&&"sw"!==l&&"n"!==l&&"w"!==l||(o=-o)),c=e[2*t+1]+o,(u=e[2*t]+i)<0?(i=0-e[2*t],o=0):u>this.width?(i=this.width-e[2*t],o=0):c<0?(o=0-e[2*t+1],i=0):c>this.height&&(o=this.height-e[2*t+1],i=0),e[2*t]+=i,e[2*t+1]+=o,a=(t+1)%4,s=(t+3)%4,t%2?(e[2*a]+=i,e[2*s+1]+=o):(e[2*a+1]+=o,e[2*s]+=i)}else if(t<4){if(o=r-e[2*t+1],0==(i=n-e[2*t])&&0===o)return e;e[2*t]=n,e[2*t+1]=r,l=(t+1)%4,u=(t+3)%4,t%2?(e[2*l]=n,e[2*u+1]=r):(e[2*l+1]=r,e[2*u]=n)}else 0===(a=this.slopeRatio[(c=t-4)%4])?(e[(2*c+3)%8]=r,e[(2*c+1)%8]=r):a!==1/0&&a!==-1/0||(e[(2*c+2)%8]=n,e[(2*c+0)%8]=n);return e},t._movePointFree=function(e,t,n,r){n=Math.max(this.leftEdge,Math.min(this.width,n)),r=Math.max(this.topEdge,Math.min(this.height,r));var i=e.slice();if(t<4){var o=r-e[2*t+1];if(0==(a=n-e[2*t])&&0==o)return e;e[2*t]=n,e[2*t+1]=r}else{var a,s=-(t=r-(o=this.slopeRatio[(a=t-4)%4])*n)/o,u=t,c=e[(2*a+9)%8]-o*e[(2*a+8)%8],l=-c/o,d=this.k1,h=this.b1,g=this.k2,f=this.b2;0===o?(e[(2*a+3)%8]=r,d!==1/0&&d!==-1/0&&(e[(2*a+2)%8]=(r-h)/d),e[(2*a+1)%8]=r,g!==1/0&&g!==-1/0&&(e[(2*a+0)%8]=(r-f)/g)):o===1/0||o===-1/0?(e[(2*a+2)%8]=n,e[(2*a+3)%8]=d*n+h,e[(2*a+0)%8]=n,e[(2*a+1)%8]=g*n+f):(0===d?e[(2*a+2)%8]+=s-l:d===1/0||d===-1/0?e[(2*a+3)%8]+=u-c:(e[(2*a+2)%8]=(h-t)/(o-d),e[(2*a+3)%8]=(o*h-d*t)/(o-d)),0===g?e[(2*a+0)%8]+=s-l:g===1/0||g===-1/0?e[(2*a+1)%8]+=u-c:(e[(2*a+0)%8]=(f-t)/(o-g),e[(2*a+1)%8]=(o*f-g*t)/(o-g)));for(var m=0;m<4;m++){var p=e[2*m],_=e[2*m+1];if(p<this.leftEdge-.5||p>this.width+.5||_<this.topEdge-.5||_>this.height+.5)return i}}return e},t._moveBox=function(e,t,n){if("normal"===this.mode){var r=Math.min(e[0],e[2],e[4],e[6]),i=Math.max(e[0],e[2],e[4],e[6]),o=Math.min(e[1],e[3],e[5],e[7]),a=Math.max(e[1],e[3],e[5],e[7]);i+(t=r+t<0?-r:t)>this.width&&(t=this.width-i),a+(n=o+n<0?-o:n)>this.height&&(n=this.height-a);for(var s=0;s<4;s++)e[2*s]+=t,e[2*s+1]+=n}return e},t._isPointOnBox=function(e,t){var n,r,i,o;return"normal"===this.mode&&(n=(o=this._getMaxPoint()).minX,r=o.maxX,i=o.minY,o=o.maxY,n<=e&&e<=r&&i<=t&&t<=o)},t.isBoxSelected=function(e,t){var n=this._isPointOnBox(e,t);return null!==(e=this.isCtrlPointSelected(e,t))?e:n?-1:null},t.isCtrlPointSelected=function(e,t){var n=this.sensorRadius,r=(a=this._getMaxPoint()).minX,i=a.maxX,o=a.minY,a=a.maxY,s=Math.min(Math.max(n,.1*(i-r)),3*n)*this.dpr,u=Math.min(Math.max(n,.1*(a-o)),3*n)*this.dpr,c=8;"free"===this.mode&&(c=8);for(var l=0;l<c;l++){var d=this.probePoints[2*l],h=this.probePoints[2*l+1];if(e<=d+s&&d-s<=e&&t<=h+u&&h-u<=t)return l}return null},t._checkRectConvexity=function(e){var t=(e[6]-e[0])*(e[3]-e[1])-(e[7]-e[1])*(e[2]-e[0]),n=(e[0]-e[2])*(e[5]-e[3])-(e[1]-e[3])*(e[4]-e[2]),r=(e[2]-e[4])*(e[7]-e[5])-(e[3]-e[5])*(e[6]-e[4]),i=(e[4]-e[6])*(e[1]-e[7])-(e[5]-e[7])*(e[0]-e[6]);if(t*n*r*i<0)return!1;var o=e.slice().concat(e.slice(0,2));if(this.slopeRatio.length)for(var a=0;a<2;a++)if(this.slopeRatio[a]!==this.slopeRatio[a+2]&&function(e,t,n,r){if(function(e,t,n,r){var i=Math.min,o=Math.max;return i(e[0],t[0])<=o(n[0],r[0])&&i(n[0],r[0])<=o(e[0],t[0])&&i(e[1],t[1])<=o(n[1],r[1])&&i(n[1],r[1])<=o(e[1],t[1])}(e,t,n,r)&&function(e,t,n,r){var i,o;if(!(0<=((i=e[0]*(n[1]-t[1])+t[0]*(e[1]-n[1])+n[0]*(t[1]-e[1]))^(o=e[0]*(r[1]-t[1])+t[0]*(e[1]-r[1])+r[0]*(t[1]-e[1])))&&0!==i&&0!==o||0<=((i=n[0]*(e[1]-r[1])+r[0]*(n[1]-e[1])+e[0]*(r[1]-n[1]))^(o=n[0]*(t[1]-r[1])+r[0]*(n[1]-t[1])+t[0]*(r[1]-n[1])))&&0!==i&&0!==o))return 1}(e,t,n,r)){var i,o;if(o=(e[1]-n[1])*(t[0]-e[0])*(r[0]-n[0])+n[0]*(r[1]-n[1])*(t[0]-e[0])-e[0]*(t[1]-e[1])*(r[0]-n[0]),0==(i=(r[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-r[1]))||0===o){var a=cn(e,t),s=cn(n,r),u=a[0],c=a[1],l=s[0],d=s[1];if(c[0]===l[0]&&c[1]===l[1])return c;if(u[0]===d[0]&&u[1]===d[1])return u;if(ln(c,s)&&ln(l,a))return[l,c];if(ln(u,s)&&ln(d,a))return[u,d];if(ln(u,s)&&ln(c,s))return[u,c];if(ln(l,s)&&ln(d,s))return[l,d]}return[a=o/i,u=(o=t[1]*(e[0]-t[0])*(r[1]-n[1])+(r[0]-t[0])*(r[1]-n[1])*(e[1]-t[1])-r[1]*(n[0]-r[0])*(t[1]-e[1]))/(i=(e[0]-t[0])*(r[1]-n[1])-(t[1]-e[1])*(n[0]-r[0]))]}return!1}(o.slice(2*a,2*a+2),o.slice(2*a+2,2*a+4),o.slice(2*a+4,2*a+6),o.slice(2*a+6,2*a+8)))return!1;return 0<t*n*r*i},e}();function sn(e){for(var t=e.slice(0,8).concat(e[0],e[1]),n=[],r=0;r<4;r++)n.push((t[2*r]+t[2*r+2])/2,(t[2*r+1]+t[2*r+3])/2);return n}function un(e){for(var t=[],n=e.slice(0,8).concat(e[0],e[1]),r=0;r<4;r++)t.push(n[2*r+3]-n[2*r+1]==0&&n[2*r+2]-n[2*r]==0?0:n[2*r+2]-n[2*r]==0?1/0:(n[2*r+3]-n[2*r+1])/(n[2*r+2]-n[2*r]));return t}function cn(e,t){return e[0]===t[0]?e[1]<t[1]?[e,t]:[t,e]:e[0]<t[0]?[e,t]:[t,e]}function ln(e,t){return t[0][0]===t[1][0]?e[1]>=t[0][1]&&e[1]<=t[1][1]:e[0]>=t[0][0]&&e[0]<=t[1][0]}var dn=function(){function e(e){this._cvs=null,this._cropBox=null,this._isCropping=!1,this._zoom=1,this._edgeMargin=10,this._cropStyle={cornerColor:"#FE8E14",lineColor:"#FE8E14",lineWidth:2,lineDash:"solid"},this._cvs=e,this._initEvent()}var t=e.prototype;return t.getEdgeMargin=function(){return this._edgeMargin},t.dispose=function(){this._cvs.removeEventListener("touchstart",null),this._cvs.removeEventListener("touchmove",null),this._cvs.removeEventListener("touchend",null),this._cvs.removeEventListener("mousedown",null),document.removeEventListener("mousemove",null),document.removeEventListener("mouseup",null),this._cvs=null,this.onAreaChanged=null},t.setCropMode=function(e){this._isCropping=e},t.getCropMode=function(){return this._isCropping},t.clearCropBox=function(){this._cropBox=null,this._cvs.getContext("2d").clearRect(0,0,this._cvs.width,this._cvs.height)},t.setZoom=function(e){this._zoom=e},t.setCropArea=function(e,t){var n,r,i,o,a,s;e&&(n=t.relLeft,r=t.relTop,a=t.relWidth,this._limitArea=t,t=this._cvs,o=this._edgeMargin,s=a/=i=this._zoom,e=Te(De(e.map((function(e,t){return t%2==0?e/i+n+o:e/i+r+o})))),this._cropBox=new an({vertexes:e,width:t.width-o-n,height:t.height-o-r,leftEdge:o+n,topEdge:o+r,imgWidth:a,imgHeight:s,mode:"free",dpr:window.devicePixelRatio}),this._isCropping&&this._drawCropArea())},t.getCropArea=function(){var e=this._cropBox,t=this._zoom,n=this._edgeMargin,r=this._limitArea;return e?Te(De(e.vertexes.map((function(e,i){return i%2==0?(e-r.relLeft-n)*t:(e-r.relTop-n)*t})))):[]},t.setCropStyle=function(e){Ze(e,this._cropStyle),this._isCropping&&this._drawCropArea()},t.resize=function(e){var t,n,r=this._cropBox,i=this._edgeMargin;r&&(t=(n=this._cvs).width,n=n.height,r.width=t-i-e.relLeft,r.height=n-i-e.relTop,r.leftEdge=i+e.relLeft,r.topEdge=i+e.relTop,r.imgWidth=e.relWidth,r.imgHeight=e.relHeight)},t._initEvent=function(){var e=this,t=this._cvs;function n(e){this._cvsBoundingRect=this._cvs.getBoundingClientRect();var t=this._cropBox,n=this._cvsBoundingRect;t&&this._cropBox.onStartHandler(e.clientX-(t=n.left),e.clientY-(n=n.top))}function r(e){var t,n;this._cropBox&&this._cropBox.isPointSelected&&(t=(n=this._cvsBoundingRect).left,this._cropBox.onMoveHandler(e.clientX-t,e.clientY-(n=n.top)),this._drawCropArea())}function i(){var e;this._cropBox&&this._cropBox.isPointSelected&&(this._cropBox.onEndHandler(),this._drawCropArea(),null!=(e=this.onAreaChanged)&&e.call(this,this.getCropArea()))}t.addEventListener("touchstart",(function(t){1<(t=t.touches).length||n.call(e,t[0])}),{passive:!1}),t.addEventListener("mousedown",n.bind(this)),t.addEventListener("touchmove",(function(t){var n=t.touches;1<n.length||e._cropBox&&e._cropBox.isPointSelected&&(r.call(e,n[0]),t.preventDefault())}),{passive:!1}),document.addEventListener("mousemove",r.bind(this)),t.addEventListener("touchend",i.bind(this)),document.addEventListener("mouseup",i.bind(this))},t._drawCropArea=function(){var e=this._cvs,t=this._cropStyle;if(n=this._cropBox){var n,r=n.probePoints.slice(),i=((n=e.getContext("2d")).clearRect(0,0,e.width,e.height),t.lineWidth);if(i%2!=0)for(var o=0;o<r.length;o++)r[o]=Math.floor(r[o])-i/2;var a=r.slice(0,8),s=(n.fillStyle="rgba(255,255,255,0)",n.fillRect(0,0,e.width,e.height),n),u=a;e=t,s.save(),s.beginPath(),s.strokeStyle=e.lineColor,s.lineWidth=e.lineWidth,"dashed"===e.lineDash&&s.setLineDash([5,5]),s.moveTo(u[0],u[1]);for(var c=0;c<u.length;c+=2){var l;s.lineTo.apply(s,l=[u[l=(c+2)%8],u[1+l]])}s.closePath(),s.globalCompositeOperation="destination-out",s.fillStyle="rgba(0,0,0)",s.fill(),s.globalCompositeOperation="source-over",s.stroke(),s.closePath(),s.restore();var d=n,h=r,g=(a=t,Math.floor(8));d.save(),d.strokeStyle=a.cornerColor,d.lineWidth=a.lineWidth;for(var f=0;f<h.length;f+=2){var m=[h[f],h[f+1]];d.clearRect(m[0]-g/2,m[1]-g/2,g,g),d.strokeRect(m[0]-g/2,m[1]-g/2,g,g)}d.restore()}},t.setFullArea=function(){var e,t,n,r;this._cropBox&&(e=(r=this._cropBox).imgWidth,t=r.imgHeight,this._cropBox.vertexes=[n=r.leftEdge,r=r.topEdge,n+e,r,n+e,r+t,n,r+t],this._cropBox.resetBox(),this._isCropping&&this._drawCropArea())},t.checkFull=function(){if(!this._cropBox)return!1;var e=this.getInnerCropArea(),t=this._cropBox.getRect();return st(e,t.width,t.height)},t.getInnerCropArea=function(){var e=this._cropBox,t=this._edgeMargin,n=this._limitArea;return e?Te(De(e.vertexes.map((function(e,r){return r%2==0?e-n.relLeft-t:e-n.relTop-t})))):[]},e}(),hn=function(){function e(e,t){this._obElement=null,this._callback=null,this._unbindFn=null,this._callback=t,this._obElement=e,this._initObserver()}var t=e.prototype;return t._initObserver=function(){var e,t,n=this._callback,r=this._obElement;void 0!==window.ResizeObserver?((e=new window.ResizeObserver((function(e){n((e=e[0]).contentRect)}))).observe(r),this._unbindFn=function(){e.unobserve(r),e.disconnect(),e=null}):((t=document.createElement("iframe")).id="fm",t.style.cssText="width:100%;height:100%;z-index:-1;",t.onresize=function(){var e=r.getBoundingClientRect();n(e)},this._unbindFn=function(){t.remove(),t=null})},t.dispose=function(){this._unbindFn(),this._unbindFn=null,this._callback=null,this._obElement=null},t.getCallback=function(){return this._callback},e}(),gn=function(){function e(){this._cropInfoObjs={}}var t=e.prototype;return t.getCropInfo=function(e){return this._cropInfoObjs[e]||(this._cropInfoObjs[e]={}),this._cropInfoObjs[e]},t.destroy=function(){if(this._cropInfoObjs)for(var e in this._cropInfoObjs)delete this._cropInfoObjs[e];this._cropInfoObjs=null},e}(),fn=h("getCropInfo"),mn=h("initCanvas"),pn=h("initToggleButtonEvent"),_n=h("getImageArea"),vn=h("initElement"),In=h("initViewer"),yn=function(e){function n(t,n,r){return t=e.call(this,t,n,r)||this,Object.defineProperty(s(t),In,{value:Cn}),Object.defineProperty(s(t),vn,{value:wn}),Object.defineProperty(s(t),_n,{value:Sn}),Object.defineProperty(s(t),pn,{value:Tn}),Object.defineProperty(s(t),mn,{value:Dn}),Object.defineProperty(s(t),fn,{value:bn}),t.viewerPagerEventId=null,t.cropMng=null,t._resizeMng=null,t._cropInfoHelper=null,t._renderEvents=[],t._imageArea=null,t._reused=!1,t._bk={_cropInfoHelper:null,_backInfo:null,_backFileName:null,_copyRefMap:null,_customData:null},t._renderType=1,t.pageName=R,l(s(t),vn)[vn](),t}c(n,e);var i=n.prototype;return i.isCropPage=function(){return!0},i.enterReuseMode=function(e,t){var n,r,i,o,a=this.getViewerByUid(this._viewerId),s=a.getCurrentPageUids(),u=0;if(!this._reused){for(this._reused=!0,this._bk._cropInfoHelper=this._cropInfoHelper,this._bk._backInfo=this._backInfo,this._bk._backFileName=this._backFileName,this._bk._copyRefMap=this._copyRefMap,this._bk._customData={},u=0;u<s.length;u++){var c=s[u],d=null==(d=this._dvsWrapper)?void 0:d.getCustomDataSync(c);d&&(this._bk._customData[c]={detectArea:d.detectArea,angle:d.angle})}this._cropInfoHelper=new gn,this._copyRefMap={},this._backInfo={origApplyToAll:"",origDocumentData:{},initDocumentData:{}},this._backFileName=e.fileName}for(this.backupImageDataFromUids(t),u=0;u<s.length;u++)this._copyRefMap[c=s[u]]=n=t[u],(r=null==(r=this._dvsWrapper)?void 0:r.getCustomDataSync(c))&&(i=null==(i=this._dvsWrapper)?void 0:i.getCustomDataSync(n))&&(r.detectArea=i.detectArea,r.angle=i.angle,l(this,fn)[fn](c).alreadyHandle=!1,a.resetByIndex(u,!1));e.nextButtonCss&&((null==(o=this.element)?void 0:o.querySelector("."+g.BUTTON_PREFIX+"save i")).className=e.nextButtonCss),this._editUid=null,this.render()},i.render=function(){var e,t=this.getViewerByUid(this._viewerId),n=t.getCurrentPageUids();n&&0<n.length&&(e=this,setTimeout((function(){var n;null!=t&&null!=(n=t.ui)&&n.styleChange(),e._renderType=1,t.rotate(0),e._resizeMng&&Ye(n=e._resizeMng.getCallback())&&n(null)}),0))},i.exitReuseMode=function(){var e;if(this._reused){var t=this.getViewerByUid(this._viewerId),n=t.getCurrentPageUids(),r=0;for(this._cropInfoHelper=this._bk._cropInfoHelper,this._backInfo=this._bk._backInfo,this._backFileName=this._bk._backFileName,this._copyRefMap=this._bk._copyRefMap,r=0;r<n.length;r++){var i,o=n[r],a=null==(a=this._dvsWrapper)?void 0:a.getCustomDataSync(o);a&&this._bk._customData&&(i=this._bk._customData[o])&&(a.detectArea=i.detectArea,a.angle=i.angle),l(this,fn)[fn](o).alreadyHandle=!1,t.resetByIndex(r,!1)}this._bk._cropInfoHelper=null,this._bk._backInfo=null,this._bk._backFileName=null,this._bk._copyRefMap=null,this._bk._customData=null,this._editUid=null,this._reused=!1}(null==(e=this.element)?void 0:e.querySelector("."+g.BUTTON_PREFIX+"save i")).className=g.font+" "+g.iconNext},i.getCurrentArea=function(){if(this.cropMng){var e=this.cropMng.getCropArea();if(e&&0<e.length)return e}return l(this,fn)[fn](this._editUid).savedArea},i.getEditUid=function(){return this._editUid},i.setPageFilename=function(){this._pageFileName=["__dynamsoft_crop_files",it(6)].join("_")},i.initImageCropInfoByUid=function(e){var t,n,r,i,o,a,s;this.isDestroyed||Xe(e)&&""!=e&&(t=l(this,fn)[fn](e),(n=null==(n=this._dvsWrapper)?void 0:n.getCustomDataSync(e))&&(r=null==(r=this._dvsWrapper)?void 0:r.getMetaDataSync(e),e=!1,s=a=0,n.detectArea?i=n.detectArea:(i=[],s=r.height,n.detectArea=i=0<(a=r.width)&&0<s?[0,0,a,0,a,s,0,s]:i),n.angle?o=Ce(n.angle):n.angle=o=0,r&&(s=r.height,0<(a=r.width)&&0<s&&(t.w=a,t.h=s),e=st(i,a,s)),t.fullArea=e,t.savedArea=i,t.angle=o))},i._updateViewerSize=function(){var e,t,n;!this.isDestroyed&&this.element&&(t=null==(t=this.element)?void 0:t.querySelector("."+g.cvsContainer))&&(e=(t=t.getBoundingClientRect()).width,t=t.height,n=null==(n=this.element)?void 0:n.querySelector(".dvs-WebViewer"),e-=2*this.cropMng.getEdgeMargin(),t-=2*this.cropMng.getEdgeMargin(),n.width=e,n.height=t,n.style.cssText="width:"+e+"px;height:"+t+"px")},i._resetCropCanvas=function(){var e;(e=null==(e=this.element)?void 0:e.querySelector(".dvs-cropper"))&&(e.width=1,e.height=1,e.style.cssText="width:1px !important;height:1px !important"),(e=null==(e=this.element)?void 0:e.querySelector(".dvs-canvasEventLayer"))&&(e.width=1,e.height=1,e.style.cssText="width:1px !important;height:1px !important;background:rgba(255,255,255,0)")},i._listenResize=function(){var e=this,t=(t=null==(t=this.element)?void 0:t.querySelector(".dvs-WebViewer"))||this.element;this._resizeMng=new hn(t,(function(){setTimeout((function(){var t,n=e._editUid;n&&(e._setDetectCanvasSize(n),e._updateViewerSize(),t=e._rotateSavedArea(n,0),e._drawCropArea(n,t),e._renderType=2)}),0)}))},i._drawFullArea=function(){this._setDetectCanvasSize(this._editUid);var e=l(this,_n)[_n]();if(!e)return this._renderType=1,void this.render();this.cropMng.resize(e),this.cropMng.setFullArea()},i.getAreaForResize=function(){var e=this.cropMng.getCropArea(),t=l(this,fn)[fn](this._editUid);return this.isAreaFulfilled(e)?[0,0,e=t.w,0,e,e=t.h,0,e]:t.savedArea},i.rotateLeft=function(){this._rotate(this._editUid,-90)},i.rotateRight=function(){this._rotate(this._editUid,90)},i._rotateSavedArea=function(e,t,n){var r,i,o,a;return void 0===n&&(n=null),t=Ce(t),this.cropMng&&(r=(i=(e=l(this,fn)[fn](e)).angle%180==0)?e.w:e.h,i=i?e.h:e.w,0==(a=n||this.cropMng.getCropArea()).length&&(a=e.savedArea),o=this.isAreaFulfilled(a),a=Mn(a,t,i,r),o?(e.fullArea=!0,0!=t&&(e.savedArea=Mn(e.savedArea,t,i,r))):(e.fullArea=!1,e.savedArea=a)),a},i._rotate=function(e,t,n){if(void 0===n&&(n=-1),!(this.isDestroyed||this.getImageCount()<=0)){var r=this._dcs,i=this.getViewerByUid(this._viewerId),o=(t=Ce(t),i.getCurrentPageUids());if(0!=o.length){var a=-1;try{if(null!=r&&r.showLoading("rotate button init"),(a=(a=i&&e?i.getIndexByUid(e):a)<0?this.options.curIndex:a)<0||a>=o.length)return;var s,u,c,d=this._rotateSavedArea(e,t);0!=t&&(this._renderType=3,i.rotateMode=0,i.rotate(t,a),(u=null==(s=this._dvsWrapper)?void 0:s.getCustomDataSync(e))&&(-1==n&&(n=void 0===(c=u.angle)?0:c),u.angle=Ce(n+t),u.resBlob&&delete u.resBlob,l(this,fn)[fn](e).angle=u.angle))}finally{null!=r&&r.hideLoading("rotate button init")}this._drawCropArea(e,d)}}},i.getAngle=function(e){return Qe((e=l(this,fn)[fn](e)).angle)?Ce(e.angle):e.angle=0},i.hide=function(){e.prototype.hide.call(this)},i.show=function(){var n=t(r().mark((function t(){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isDestroyed)return this.hide(),t.abrupt("return");t.next=3;break;case 3:return this._dcs.config.documentEditorSettings.visibility="visible",t.next=6,e.prototype.show.call(this);case 6:this._updateViewerSize(),(n=this.getViewerByUid(this._viewerId))&&(n.getCurrentPageUids().length<=0&&this.disableCrop(),n.render());case 9:case"end":return t.stop()}}),t,this)})));return function(){return n.apply(this,arguments)}}(),i.destroy=function(){var t;this._reused?this.hide():(this.isDestroyed=!0,(t=this.getViewerByUid(this._viewerId))&&this.viewerPagerEventId&&t.offById(w,this.viewerPagerEventId),this.viewerPagerEventId=null,this.removePageFile(),null!=(t=this._resizeMng)&&t.dispose(),(this._resizeMng=null)!=(t=this.cropMng)&&t.dispose(),null!=(t=this.detectCvsEl)&&t.remove(),this.cropMng=null,this.detectCvsEl=null,this._renderEvents.slice(0),null!=(t=this._cropInfoHelper)&&t.destroy(),this._cropInfoHelper=null,e.prototype.destroy.call(this),this.options=null)},i._calImageArea=function(e){var t=this.getViewerByUid(this._viewerId);if(!t)return null;if(!(t=t.getCurrentTab()))return null;if(!(t=t.getCurPage()))return null;if((t={x:t.style.left,y:t.style.top,width:t.style.width,height:t.style.height}).width<=1||t.height<=1)return null;e=this.getAngle(e)%180==0;var n=(r=l(this,fn)[fn](this._editUid)).w,r=r.h,i=e?t.width:t.height,o=e?t.height:t.width,a=Math.min(i/n,o/r);return n=Math.fround(a*n),r=Math.fround(a*r),i=Math.floor(.5*Math.abs(i-n)),o=Math.floor(.5*Math.abs(o-r)),this._imageArea={relLeft:t.x+(e?i:o),relTop:t.y+(e?o:i),relWidth:e?n:r,relHeight:e?r:n,zoom:1/a},this._imageArea},i._drawCropArea=function(e,t){if(!this.isDestroyed&&(this._setDetectCanvasSize(e),this.cropMng)){var n=l(this,_n)[_n]();if(!n)return this._renderType=1,void this.render();this.cropMng.resize(n),n=(n=t)?Te(n=De(n)):l(this,fn)[fn](e).savedArea,this.cropMng.setCropArea(n,l(this,_n)[_n]())}},i._setDetectCanvasSize=function(e){var t,n,r;this.element&&(t=(n=(null==(n=this.element)?void 0:n.querySelector("."+g.cvsContainer)).getBoundingClientRect()).width,n=n.height,(r=this.detectCvsEl)&&(r.width=t,r.height=n,r.style.cssText="left:0px;top:0px;width:"+t+"px;height:"+n+"px")),this.cropMng&&e&&(r=this._calImageArea(e))&&this.cropMng.setZoom(r.zoom)},i.getCropManage=function(){return this.cropMng},i.getDetectAreaForNotRotate=function(e){if(!this.cropMng)return[];var t=this.cropMng.getCropArea();if(!(r=l(this,_n)[_n]()))return this._renderType=1,this.render(),[];var n=r.relWidth,r=r.relHeight,i=this.cropMng._zoom;return Te(function(e,t,n,r){var i=[],o=Ce(t);if(0==o)return e;for(var a=0;a<e.length;a+=2){var s=void 0,u=e[a],c=e[a+1],l=90==o?(s=c,n-u):180==o?(s=n-u,r-c):270==o?(s=r-c,u):(s=u,c);i.push(s,l)}return i}(t,this.getAngle(e),Math.fround(n*i),Math.fround(r*i)))},i.isAreaFulfilled=function(e){if(!(r=this.cropMng))return!1;if(this._editUid){if(!(n=this._calImageArea(this._editUid)))return!0;var t=n.relWidth,n=n.relHeight,r=r._zoom;return st(e,Math.fround(t*r),Math.fround(n*r))}return!0},i.toggleFullAreaButton=function(){var e=this.cropMng;if(!e)return!1;if(!(this.getImageCount()<=0)){var t=l(this,fn)[fn](this._editUid),n=(r=t.angle%180==0)?t.w:t.h,r=r?t.h:t.w,i=this._calImageArea(this._editUid);if(!i)return!1;n=Math.fround(+n),r=Math.fround(+r);var o,a=this.getCurrentArea(),s=st(a,n,r);return s?0===t.savedArea.length?(t.savedArea=[0,0,n-2,0,n-2,r-2,0,r-2],o=t.savedArea):st(o=Te(o=De(o=t.savedArea)),n,r)&&(t.savedArea=o=[0,0,n-2,0,n-2,r-2,0,r-2]):(t.savedArea=a,o=[0,0,n,0,n,r,0,r]),e.setCropArea(o.slice(),i),s}},i.setZooming=function(){this._zooming=!1},i.getHeaderButtons=function(){var t,n=(t=this.options).headerButtons;return e.prototype.createIconItems.call(this,void 0===n?{}:n,void 0===(t=(void 0===(t=t.documentEditorSettings)?{}:t).headerStyle)?{}:t,!0,null)},i.getFooterButtons=function(){var t,n=(t=this.options).footerButtons;return e.prototype.createIconItems.call(this,void 0===n?{}:n,void 0===(t=(void 0===(t=t.documentEditorSettings)?{}:t).footerStyle)?{}:t,!1,null)},i.resetCropInfoByUids=function(e){var t=[],n=this.getViewerByUid(this._viewerId);if(e&&n)for(var r,i,o=n.getCurrentPageUids().length,a=0;a<e.length;a++)!Xe(i=e[a])||""==i||Qe(r=n.getIndexByUid(i))&&0<=r&&r<o&&(this.initImageCropInfoByUid(i),l(this,fn)[fn](i).alreadyHandle=!1,t.push(r));return t},i._resetViewerWhenChanged=function(){var e=[],t=[],n=this.getViewerByUid(this._viewerId);if(n)for(var r=n.getCurrentPageUids(),i=0;i<r.length;i++){var o,a,s,u=r[i];Xe(u)&&""!=u&&l(this,fn)[fn](u).alreadyHandle&&(this._editUid=null,(a=this._copyRefMap[u])&&(a=this._backInfo.origDocumentData[a])?(o=a.detectArea,a=a.angle,(s=null==(s=this._dvsWrapper)?void 0:s.getCustomDataSync(u))&&ot(o,s.detectArea)&&a==s.angle||(t.push(u),e.push(i))):(t.push(u),e.push(i)))}return this.resetCropInfoByUids(t),e},i.clickBackButton=function(){var e=t(r().mark((function e(){var t,n,i,o,a,s,u,c,l,d,h;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isDestroyed)return e.abrupt("return");e.next=2;break;case 2:if((t=this._dcs).getCurrentPage(),n=t.getPreviousPage(),this.saveCurrentDataToUid(this._editUid),i=this.ifOldDocumentDataChanged(),(s=(void 0===(s=this.options.documentEditorSettings.cropViewer)?{}:s).funcConfirmExit)&&Ye(s))return u="",n&&(u=n.pageName),e.next=14,s(i,u);e.next=21;break;case 14:if(0==(o=e.sent))return e.abrupt("return");e.next=19;break;case 19:if(1!=o&&2!=o)return e.abrupt("return");e.next=21;break;case 21:if(void 0===o&&(o=!n||n instanceof $t?1:2),!n){e.next=35;break}if(!(n instanceof $t)){e.next=33;break}if(1!=o){e.next=27;break}e.next=31;break;case 27:if(2==o)return e.next=30,this.clickSaveButton();e.next=31;break;case 30:return e.abrupt("return");case 31:e.next=33;break;case 33:e.next=42;break;case 35:if(1!=o){e.next=38;break}e.next=42;break;case 38:if(2!=o){e.next=42;break}t.showLoading("crop back button SaveAndExit");try{this.clickSaveButton(!0)}finally{t.hideLoading("crop back button SaveAndExit")}return e.abrupt("return");case 42:if(a=!1,e.prev=43,!n){e.next=85;break}if(i&&(s=this._resetViewerWhenChanged(),this.resetViewerAngleByIndexes(s),2==o?this.saveViewerCustomData():1==o&&(s=this.restoreViewerCustomData(),this.resetViewerAngleByIndexes(s))),n instanceof $t)return a=!0,t.showLoading("click crop back"),u=this.getCurrentIndex(),n.hide(),n.gotoViewPage(u),e.next=54,t.navigateBack();e.next=56;break;case 54:e.next=85;break;case 56:if(n instanceof kt)return a=!0,e.next=60,t.navigateBack(1,!1);e.next=85;break;case 60:return c=e.sent,t.showLoading("click crop back"),e.next=64,n.refreshPreviewWhenChanged();case 64:if(1==c.length?n.setNextViewerPage(c.pop()):t.destroyRemovedPages(),"playing"!=(l=t.getStatus())){e.next=69;break}e.next=84;break;case 69:if("paused"!=l){e.next=73;break}t.isHidden()||t.resume(),e.next=84;break;case 73:if(t.isHidden()){e.next=84;break}if(d=(d=n.element).children[1],(h=this.options.scannerViewer)&&h.resolution&&h.resolution.defaultValue)return e.next=80,t.play(d,h.resolution.defaultValue.width,h.resolution.defaultValue.height,h.fullScreen);e.next=82;break;case 80:e.next=84;break;case 82:return e.next=84,t.play(d);case 84:t.isHidden()||t.emit("resetResolution");case 85:if(n){e.next=93;break}if(t.showLoading("click crop back"),t.closeAllPages)return e.next=90,t.closeAllPages();e.next=90;break;case 90:t.exit(this._dvs),e.next=96;break;case 93:if(a){e.next=96;break}return e.next=96,t.navigateBack();case 96:return e.prev=96,n&&t.emit("focusPage"),t.hideLoading("click crop back"),e.finish(96);case 100:case"end":return e.stop()}}),e,this,[[43,,96,100]])})));return function(){return e.apply(this,arguments)}}(),i.initPageOption=function(n,i){var o,a=this,s=(i=void 0===(e.prototype.initPageOption.call(this,n,i),i=this.options.documentEditorSettings.cropViewer)?{}:i).rotateLeft,u=i.rotateRight,c=(i=i.autoDetectBorder,{icon:g.font+" "+g.iconNext,className:g.BUTTON_PREFIX+"save",onclick:function(e,t){(t=t.dcs.getCurrentPage())&&t.clickSaveButton()}});n.nextButtonCss&&(c.icon=n.nextButtonCss),n={footerButtons:{rotateLeft:me(s,{icon:g.font+" "+g.iconRotateLeft,className:g.BUTTON_PREFIX+"rotateLeft",onclick:function(e,t){(t=t.dcs.getCurrentPage())&&t.rotateLeft()}}),rotateRight:me(u,{icon:g.font+" "+g.iconRotateRight,className:g.BUTTON_PREFIX+"rotateRight",onclick:function(e,t){(t=t.dcs.getCurrentPage())&&t.rotateRight()}}),toggleFullArea:me(i,{icon:g.font+" "+g.iconFullCrop,className:g.BUTTON_PREFIX+"toggleFullArea",onclick:function(e,t){var n=t.page;n.getImageCount()<=0||(t=n.toggleFullAreaButton(),(n=null==e?void 0:e.currentTarget)&&n.classList[t?"remove":"add"](g.footerSelected))}}),save:c},headerButtons:{backBtn:{icon:g.font+" "+g.iconBack,className:g.BUTTON_PREFIX+"backBtn",onclick:(o=t(r().mark((function e(t,n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,a.clickBackButton();case 3:case"end":return e.stop()}}),e)}))),function(e,t){return o.apply(this,arguments)})},pager:{className:"dvs-cameraPager"}}},this.options=Ze(this.options,n)},i.changePageNumber=function(e,t){var n,r;this.element&&(n=null==(r=null==(r=this.element)?void 0:r.querySelector(".dvs-cameraPager"))?void 0:r.querySelector(".dvs-curPage"),r=null==r?void 0:r.querySelector(".dvs-totalPage"),n.innerText=String(e+1),r.innerText=String(t))},i.changeStatus=function(e,t){var n,r;this.element&&(n=null==(r=null==(r=this.element)?void 0:r.querySelector(".dvs-cameraPager"))?void 0:r.querySelector(".dvs-previousPage"),r=null==r?void 0:r.querySelector(".dvs-nextPage"),0<=e?(n.classList[e<=0?"add":"remove"](g.disable),r.classList[t===e+1?"add":"remove"](g.disable)):(n.classList.add(g.disable),r.classList.add(g.disable)))},i.handlePageByUid=function(){var e=t(r().mark((function e(t,n){var i,o,a,s,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this._dcs,this.isDestroyed)return e.abrupt("return");e.next=3;break;case 3:if(this._editUid==t){e.next=7;break}this._editUid=t,e.next=8;break;case 7:return e.abrupt("return");case 8:if(this.isDestroyed)return e.abrupt("return");e.next=10;break;case 10:return i.showLoading("handle crop page by uid"),e.prev=11,this._renderType=1,e.next=15,this.initOrigDataByUid(t);case 15:if(this.isDestroyed)return e.abrupt("return");e.next=17;break;case 17:this.initImageCropInfoByUid(t),o=0,u=l(this,fn)[fn](t),s=u.fullArea,o=u.angle,u.alreadyHandle?null!=u.angle&&(o=u.angle,u.angle=0,a=this._rotateSavedArea(t,o,u.savedArea),u.angle=o,this._drawCropArea(t,a)):(0!=(o=null==o?this.getAngle(t):o)?(u.angle=0,a=this._rotateSavedArea(t,0,u.savedArea),this._drawCropArea(t,a),this._rotate(t,o,0)):(a=this._rotateSavedArea(t,0,u.savedArea),this._drawCropArea(t,a)),this._renderType=1,u.alreadyHandle=!0),(u=null==(o=this.element)?void 0:o.querySelector("."+g.BUTTON_PREFIX+"toggleFullArea"))&&u.classList[s?"add":"remove"](g.footerSelected);case 25:return e.prev=25,i.hideLoading("handle crop page by uid"),e.finish(25);case 28:case"end":return e.stop()}}),e,this,[[11,,25,28]])})));return function(t,n){return e.apply(this,arguments)}}(),i.saveCurrentDataToUid=function(e){if(Xe(e)&&""!=e){this._dcs.showLoading("crop save current data");try{var t,n,r,i=this.getAngle(e),o=null==(t=this._dvsWrapper)?void 0:t.getCustomDataSync(e);o&&(n=!1,this.cropMng&&this.cropMng.getCropMode()&&(r=this.getDetectAreaForNotRotate(e),o.detectArea=r,n=!0),o.angle!=i&&(o.angle=i,n=!0),n&&o.resBlob&&delete o.resBlob)}finally{this._dcs.hideLoading("crop save current data")}}},i.clickSaveButton=function(){var e=t(r().mark((function e(t){var n,i,o,a,s,u,c,l,d,h,g,f,m,p,_,v;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t=!1),this.isDestroyed)return e.abrupt("return");e.next=3;break;case 3:if((n=this._dcs).showLoading("crop save"),e.prev=5,u=n.getPreviousPage(),this.saveCurrentDataToUid(this._editUid),i=!1,!u){e.next=24;break}if(u instanceof $t)return(d=this.ifOldDocumentDataChanged())&&(u.setCurPageId(null),u.setCurImageData(null),u.SetFilterDirty(!0)),this.mergeChangedToSavedFileSync(),this._reused&&this.saveChangedTo_bk(),d&&(this._editUid=null),this.options.fromInternal&&u.applyChanged(),i=!0,d=this.getCurrentIndex(),u.hide(),u.gotoViewPage(d),e.next=23,n.navigateBack();e.next=24;break;case 23:ke(n);case 24:if(i){e.next=85;break}if(a=this.getDvs(),s=this.getCurrentIndex(),u=this.getViewerByUid(this._viewerId),c=u.getCurrentPageUids(),(l=this._nextViewerPage)&&l instanceof $t)return e.next=33,l.syncFiles(!1,c);e.next=53;break;case 33:if(o=l.regetViewerCustomDataFromSrc(),l.resetViewerAngleByIndexes(o),d=l.getCurrentIndex(),s!=d&&(l.setCurImageData(null),l.SetFilterDirty(!0)),this.isNextEditPageCurrentDataDifferent(l)&&(o=l.restoreViewerCurrentCustomData(),l.resetViewerAngleByIndexes(o),l.setCurImageData(null),l.SetFilterDirty(!0)),l.gotoViewPage(s),t)return e.next=42,this._dcs.navigateToPage(l,!1);e.next=48;break;case 42:return l.hide(),this.show(),e.next=46,l.clickSaveButton();case 46:e.next=50;break;case 48:return e.next=50,this._dcs.navigateToPage(l);case 50:this._nextViewerPage=null,e.next=83;break;case 53:if(h={fileName:this._pageFileName,initFileName:this._initFileName,curIndex:s,fromInternal:this.options.fromInternal,documentEditorSettings:this.options.documentEditorSettings},this.options.fromInternal){e.next=70;break}g={},f=0;case 57:if(!(f<c.length)){e.next=69;break}if(Xe(m=c[f])&&""!=m){e.next=61;break}return e.abrupt("continue",66);case 61:if(Xe(p=this._copyRefMap[m])&&""!=p){e.next=64;break}return e.abrupt("continue",66);case 64:g[m]=Ze(v=this._backInfo.initDocumentData[p],{});case 66:f++,e.next=57;break;case 69:h.initDocumentData=g;case 70:if(_=new $t(h,a,n),t)return e.next=74,n.navigateToPage(_,!1);e.next=80;break;case 74:return _.hide(),this.show(),e.next=78,_.clickSaveButton();case 78:e.next=83;break;case 80:return _.gotoViewPage(s),e.next=83,n.navigateToPage(_);case 83:t||((v=n.getPreviousPage())&&v.hide(),o=this._resetViewerWhenChanged(),this.resetViewerAngleByIndexes(o)),i=!0;case 85:return e.prev=85,n.hideLoading("crop save"),e.finish(85);case 88:case"end":return e.stop()}}),e,this,[[5,,85,88]])})));return function(t){return e.apply(this,arguments)}}(),i.isNextEditPageCurrentDataDifferent=function(e){if(t=e.getCurrentEditUid()){var t=e.getRefUid(t,!1),n=e.getCurrentCustomData();if(n&&t){var r=null==(r=this._dvsWrapper)?void 0:r.getCustomDataSync(t);if(r)return e.compareOldValueChanged(r,n,null)}}return!0},i.mergeChangedToSavedFileSync=function(){for(var e=this.getViewerByUid(this._viewerId).getCurrentPageUids(),t=0;t<e.length;t++){var n,r,i=e[t],o=this._copyRefMap[i];!Xe(o)||""==o||(n=null==(n=this._dvsWrapper)?void 0:n.getCustomDataSync(i))&&(i=this._backInfo.origDocumentData[o],!(r=null==(r=this._dvsWrapper)?void 0:r.getCustomDataSync(o))||ot(r.detectArea,n.detectArea)&&r.angle==n.angle||(o=!1,ot(r.detectArea,n.detectArea)||(r.detectArea=n.detectArea,o=!0),r.angle!=n.angle&&(r.angle=n.angle,o=!0),o&&r.resBlob&&delete r.resBlob,i&&(o=!1,ot(i.detectArea,n.detectArea)||(i.detectArea=n.detectArea,o=!0),i.angle!=n.angle&&(i.angle=n.angle,o=!0),o&&i.resBlob&&delete i.resBlob)))}},i.compareOldValueChanged=function(e,t,n){if(!e||!t)return!0;if(void 0===e.detectArea){if(!st(t.detectArea,n.imageWidth,n=n.imageHeight))return!0}else if(!ot(e.detectArea,t.detectArea))return!0;if(void 0===e.angle){if(0!=t.angle)return!0}else if(e.angle!=t.angle)return!0;return!1},i.saveChangedTo_bk=function(){if(this._bk&&this._bk._customData){var e=this._cropInfoHelper;this._cropInfoHelper=this._bk._cropInfoHelper;for(var t=this.getViewerByUid(this._viewerId).getCurrentPageUids(),n=0;n<t.length;n++){var r,i,o=t[n],a=null==(a=this._dvsWrapper)?void 0:a.getCustomDataSync(o);a&&((r=this._bk._customData[o])&&(i=!1,ot(r.detectArea,a.detectArea)||(r.detectArea=a.detectArea,i=!0),r.angle!=a.angle&&(r.angle=a.angle,i=!0),i&&r.resBlob&&delete r.resBlob),this._cropInfoHelper&&this.initImageCropInfoByUid(o))}this._cropInfoHelper=e}},i.updateUid=function(){var e=t(r().mark((function e(t,n,i){var o,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._reused)return e.abrupt("return");e.next=2;break;case 2:if(o=this._dvs,Xe(a=this._copyRefMap[t])&&""!=a){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,Me(n,o,a,!0,i);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),i.syncFileFromExternalEvent=function(){var n=t(r().mark((function t(n,i){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isDestroyed)return t.abrupt("return");t.next=2;break;case 2:if(this._reused)return t.next=5,this.syncFileForReusedFromExternalEvent(n,i);t.next=7;break;case 5:t.next=9;break;case 7:return t.next=9,e.prototype.syncFileFromExternalEvent.call(this,n,i);case 9:this.getImageCount()<=0&&this.disableCrop();case 10:case"end":return t.stop()}}),t,this)})));return function(e,t){return n.apply(this,arguments)}}(),i.syncFileForReusedFromExternalEvent=function(){var e=t(r().mark((function e(t,n){var i,o,a,s,u,c,l,d;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._reused)return i=this._copyRefMap,o=this._backInfo,this._copyRefMap=this._bk._copyRefMap,this._backInfo=this._bk._backInfo,s=this._fileWrapper.openFile(this._bk._backFileName),e.next=8,this.syncFiles(t,s);e.next=19;break;case 8:for(this._copyRefMap=i,this._backInfo=o,this._bk._copyRefMap=this._copyRefMap,this._bk._backInfo=this._backInfo,a=this._fileWrapper.openFile(this._backFileName),this.backupNewImageDataFromUids(a),s=this.getViewerByUid(this._viewerId),u=s.getCurrentPageUids(),c=u.length,d=a.length,l=0;l<c;l++)this._copyRefMap[u[l]]=l<d?a[l]:void 0;case 19:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),i.backupNewImageDataFromUids=function(e){for(var t,n,r=e.length,i=0;i<r;i++)Xe(t=e[i])&&""!=t&&!this._backInfo.origDocumentData[t]&&(n=null==(n=this._dvsWrapper)?void 0:n.getCustomDataSync(t),this._backInfo.origDocumentData[t]=n?{detectArea:n.detectArea,angle:n.angle,filterValue:n.filterValue}:{detectArea:null,angle:0,filterValue:this._dcs.curFilterValue})},i.disableCrop=function(){this.cropMng&&(this.cropMng.setCropMode(!1),this.cropMng.clearCropBox());var e=null==(e=this.element)?void 0:e.querySelector("."+g.BUTTON_PREFIX+"toggleFullArea");e&&e.classList.remove(g.footerSelected)},n}(Ht);function bn(e){return this._cropInfoHelper||(this._cropInfoHelper=new gn),this._cropInfoHelper.getCropInfo(e)}function Dn(){var e=this,t=this.element;this.detectCvsEl=null==t?void 0:t.querySelector("."+g.detectCvs),this.detectCvsEl&&(t=(void 0===(t=this.options.documentEditorSettings.cropViewer)?{}:t).polygonStyle,this.cropMng=new dn(this.detectCvsEl),t&&this.cropMng.setCropStyle({lineColor:t.stroke,lineWidth:parseInt(t.strokeWidth,10),cornerColor:t.stroke,lineDash:t.dash}),this.cropMng.onAreaChanged=function(t){for(var n in e.isAreaFulfilled(t)||(l(e,fn)[fn](e._editUid).savedArea=t),e._renderEvents)Ye(e._renderEvents[n])&&e._renderEvents[n](t)})}function Tn(){var e=this;this._renderEvents.push((function(t){t=t||e.getCurrentArea(),t=e.isAreaFulfilled(t);var n=null==(n=e.element)?void 0:n.querySelector("."+g.iconFullCrop);n&&n.parentElement&&n.parentElement.classList[t?"add":"remove"](g.footerSelected)}))}function Sn(){return this._imageArea||(this._imageArea=this._calImageArea(this._editUid)),this._imageArea}function wn(){var e,t,n=(t=void 0===(t=this.options.documentEditorSettings)?{}:t).bodyStyle;this.setDefaultBackgroundColors(e=void 0===(e=t.headerStyle)?{}:e,void 0===n?{}:n,t=void 0===(t=t.footerStyle)?{}:t),this.template=['<header style="background:'+e.background+'" class="headerButtons"></header>','<div class="'+g.cvsContainer+'"><canvas class="'+g.detectCvs+'"></canvas></div>','</div><footer style="background:'+t.background+'" class="footerButtons"></footer>'].join(""),this.className=g.cropPage,this.createEl(),this._listenResize(),l(this,In)[In](),l(this,mn)[mn](),l(this,pn)[pn]()}function Cn(){return En.apply(this,arguments)}function En(){return(En=t(r().mark((function e(){var n,i,o,a,s,u,c,l=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.element){e.next=2;break}return e.abrupt("return");case 2:o=void 0===(o=(void 0===(o=(o=this.options).documentEditorSettings)?{}:o).bodyStyle)?{}:o,n=this._dvs,s=null==(s=this.element)?void 0:s.querySelector(".dvs-cameraPager"),u=null==s?void 0:s.querySelector(".dvs-previousPage"),c=null==s?void 0:s.querySelector(".dvs-nextPage"),(i=this.getViewerByUid(this._viewerId)).canvasBackground=o.background,i.bindView(null==(o=this.element)?void 0:o.querySelector("."+g.cvsContainer)),i.on(T,(function(){if(!l.isDestroyed)if(3==l._renderType)l._renderType=0;else{0!=l._renderType&&(l._renderType=0);var e=i.getCurrentTab();if(e&&(e=e.getCurPage())&&1<e.style.width&&1<e.style.height){l.cropMng.setCropMode(!0),l._resetCropCanvas();var t,n=l._rotateSavedArea(l._editUid,0);for(t in l._drawCropArea(e.uid,n),l._renderEvents)Ye(l._renderEvents[t])&&l._renderEvents[t]()}}})),this._resetCropCanvas(),o=i.getCurrentTab(),u&&c||(s.innerHTML='<div class="dvs-previousPage '+g.font+" "+g.iconArrow+" "+g.headerfont+" "+g.disable+'"></div>\n      <p><span class="dvs-curPage">0</span>/<span class="dvs-totalPage">0</span></p>\n      <div class="dvs-nextPage '+g.font+" "+g.iconArrow+" "+g.headerfont+" "+g.disable+'"></div>',u=null==s?void 0:s.querySelector(".dvs-previousPage"),c=null==s?void 0:s.querySelector(".dvs-nextPage"),o&&0<=o.total&&(u.onclick=t(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l.isDestroyed)return e.abrupt("return");e.next=2;break;case 2:if(-1!=(t=i.getPrePageIndex()))return t=i.getUidByIndex(t),l.saveCurrentDataToUid(l._editUid),e.next=8,l.handlePageByUid(t,n);e.next=10;break;case 8:l.disableCrop(),i.prevPage();case 10:case"end":return e.stop()}}),e)}))),c.onclick=t(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l.isDestroyed)return e.abrupt("return");e.next=2;break;case 2:if(-1!=(t=i.getNextPageIndex()))return t=i.getUidByIndex(t),l.saveCurrentDataToUid(l._editUid),e.next=8,l.handlePageByUid(t,n);e.next=10;break;case 8:l.disableCrop(),i.nextPage();case 10:case"end":return e.stop()}}),e)}))),(a=this).viewerPagerEventId=i.on(w,(function(e){l.isDestroyed||a&&e&&(a.changePageNumber(e.cur,e.total),a.changeStatus(e.cur,e.total))})))),o&&0<=(s=o.total)&&0<=(u=i.getCurrentIndex())&&(this.changeStatus(u,s),this.changePageNumber(u,s),Xe(c=i.getUidByIndex(u))&&""!=c&&this._editUid&&this.saveCurrentDataToUid(this._editUid)),null!=(o=i.ui)&&o._resizeViewer();case 18:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function Mn(e,t,n,r){var i=[],o=Ce(t);if(0==o)return qe(e);for(var a=0;a<e.length;a+=2){var s=void 0,u=Math.fround(e[a]),c=Math.fround(e[a+1]),l=90==o?(s=n-c,u):180==o?(s=r-u,n-c):270==o?(s=c,r-u):(s=u,c);i.push(s,l)}return i}var Pn=function(e){function n(t,n,r){return(t=e.call(this,t,n,r)||this).pageName="insertPage",t}c(n,e);var i=n.prototype;return i.initFileName=function(e){e&&e.fileName&&(this.fileName=e.fileName)},i.attachDefaultEvent=function(){this.on("onSaveCapture",(function(e,t,n,r,i){!function(){An.apply(this,arguments)}(e,t,n,r,i)}))},i.initPageOption=function(e,t){e.scannerViewer||(e.scannerViewer=qe(t.config.scannerViewer),t.config&&t.config.scannerViewer&&t.config.scannerViewer.element&&(e.scannerViewer.element=t.config.scannerViewer.element));var n=(t=e.scannerViewer).resolution,r=t.autoScan,i=t.autoDetect,o=t.switchCamera;t=t.loadLocalFile,n={headerButtons:{changeResBtn:me(n,Et()),autoDetect:a({isSelected:(null==r?void 0:r.enableAutoScan)||(null==i?void 0:i.enableAutoDetect)},me(i,Pt())),closeBtn:St()},footerButtons:{load:me(t,_t()),toggleCamera:me(o,wt()),capture:Tt(),autoCapture:a({isSelected:null==r?void 0:r.enableAutoScan},me(r,Ct())),continuous:{icon:g.font+" "+g.iconContinuous,className:g.BUTTON_PREFIX+"continuousMode",visibility:"hidden"}},scannerViewer:{resolution:{defaultValue:{width:1280,height:720}},fullScreen:!1}},this.options=Ze(e,n)},i.selectedFile=function(){var e=t(r().mark((function e(t,n){var i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.stop(),e.prev=1,(i=n.getPreviousPage())&&i instanceof $t)return e.next=6,i.insertFile(t);e.next=6;break;case 6:e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(1),n.hideLoading("insert - load image"),e.t0;case 12:return e.prev=12,n.hideLoading("insert - load image"),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,8,12,15]])})));return function(t,n){return e.apply(this,arguments)}}(),n}(kt);function An(){return(An=t(r().mark((function e(t,n,i,o,a){var s,u,c,l,d;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(u=(s=n.dcs).getPreviousPage()).isDestroyed&&u instanceof $t){e.next=4;break}return e.abrupt("return");case 4:if(s.showLoading("OnInsertPageSave"),e.prev=5,l=c=void 0===(c=(c=s.config.scannerViewer||{}).maxDocuments)?20:c,d=u.getViewerByUid(u.getViewerUid()),!u.options.fromInternal||d.currentPageCount+1<=l&&d.currentPageCount+1<=c)return s.config&&s.config.scannerViewer&&s.config.scannerViewer.autoScan&&!s.config.scannerViewer.autoScan.enableAutoScan&&s.setLoadingNumber(2),e.next=13,s.packageBlobItemFromIImageData(i,!0,!0,!1);e.next=28;break;case 13:return l=e.sent,e.next=16,u.insertImgByBlobItem(l,s);case 16:if(u.setInsertingImageIndex(d=e.sent),0<=d)return e.next=21,u.handlePageByIndex(d);e.next=21;break;case 21:return o&&s.setImageDataBack(i.imageData),s.emit("blurPage"),e.next=25,s.navigateBack();case 25:e.next=31;break;case 28:return s.emit("video-error",Y),e.next=31,s.navigateBack();case 31:return e.prev=31,s.stop(),s.hideLoading("OnInsertPageSave"),e.finish(31);case 35:case"end":return e.stop()}}),e,null,[[5,,31,35]])})))).apply(this,arguments)}var xn=[{width:320,height:240,type:"exact"},{width:640,height:480,type:"exact"},{width:640,height:360,type:"exact"},{width:800,height:600,type:"exact"},{width:1280,height:720,type:"exact"},{width:1920,height:1080,type:"exact"},{width:2560,height:1440,type:"exact"},{width:3840,height:2160,type:"exact"}],Rn={video:{width:{ideal:1280},height:{ideal:720},facingMode:{ideal:"environment"}}};function kn(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Ln(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ln(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ln(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fn(e,t,n,r,i,o,a,s){void 0===s&&(s=!1);var u,c=JSON.parse(JSON.stringify({video:{width:{ideal:1280},height:{ideal:720},facingMode:{ideal:s?"user":"environment"}}}));if(r="exact"===r&&!i,t&&(c.video.width=((u={})[r?"exact":"ideal"]=t,u)),n&&(c.video.height=((u={})[r?"exact":"ideal"]=n,u)),o&&o.bMobile&&o.bSafari&&i&&(u=Math.max(t||1280,n||720),c.video.width=((i={})[r?"exact":"ideal"]=u,i),delete c.video.height),e)delete c.video.facingMode,c.video.deviceId={exact:e};else if(a&&!s){for(var l,d=["rear","back","r\xfcck","arri\xe8re","trasera","tr\xe1s","traseira","posteriore","\u540e\u9762","\u5f8c\u9762","\u80cc\u9762","\u540e\u7f6e","\u5f8c\u7f6e","\u80cc\u7f6e","\u0437\u0430\u0434\u043d\u0435\u0439","\u0627\u0644\u062e\u0644\u0641\u064a\u0629","\ud6c4","arka","achterzijde","\u0e2b\u0e25\u0e31\u0e07","baksidan","bagside","sau","bak","tylny","takakamera","belakang","\u05d0\u05d7\u05d5\u05e8\u05d9\u05ea","\u03c0\u03af\u03c3\u03c9","spate","h\xe1ts\xf3","zadn\xed","darrere","zadn\xe1","\u0437\u0430\u0434\u043d\u044f","stra\u017enja","belakang","\u092c\u0948\u0915"],h=kn(a);!(l=h()).done&&"break"!==function(){var e=l.value,t=e.label.toLowerCase();if(t&&d.some((function(e){return-1!=t.indexOf(e)}))&&/\b0(\b)?/.test(t))return delete c.video.facingMode,c.video.deviceId={ideal:e.deviceId},"break"}(););!c.video.deviceId&&o.bAndroid&&o.bHarmonyOS&&(delete c.video.facingMode,c.video.deviceId={ideal:a[a.length-1].deviceId})}return c.video.facingMode&&"environment"===(t=(t=(t=c.video.facingMode)instanceof Array&&t.length?t[0]:t).exact||t.ideal||t)&&(c.bFmEnvironment=!!c.video.facingMode),c}function Wn(){return On.apply(this,arguments)}function On(){return(On=t(r().mark((function e(t,n,i,o,a,s,u){var c,l,d,h,g,f;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={},d=l=null,e.prev=3,g=Fn(t,n,i,o,!1,a,s),e.next=7,Bn(g,!1,a,s);case 7:if(l=e.sent){e.next=10;break}return e.abrupt("return",c);case 10:if(document&&document.createElement?d=document.createElement("video"):$e(u,N),h="exact"===o,a.bFirefox||!h)return d.srcObject=l,e.next=16,d.play();e.next=16;break;case 16:c.type=o,h?(g=l.getVideoTracks()[0],(f=g.getConstraints())&&f.width?(c.height=f.height.exact||f.height,c.width=f.width.exact||f.width):(f=g.getSettings(),c.height=f.height.exact||f.height,c.width=f.width.exact||f.width)):(c.height=d.videoHeight,c.width=d.videoWidth),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(3),this._fireLog&&this._fireLog("_getResolution exception:"+(e.t0.message||e.t0));case 23:if(l)return a.bFirefox&&(d.srcObject=null),e.next=27,l.getTracks().forEach((function(e){e.stop()}));e.next=29;break;case 27:d=l=null;case 29:return e.abrupt("return",c);case 30:case"end":return e.stop()}}),e,this,[[3,20]])})))).apply(this,arguments)}function Bn(){return Nn.apply(this,arguments)}function Nn(){return(Nn=t(r().mark((function e(t,n,i,o){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"boolean"==typeof t.video&&(t.video={}),e.prev=1,e.next=4,navigator.mediaDevices.getUserMedia(t);case 4:return e.abrupt("return",e.sent);case 7:if(e.prev=7,e.t0=e.catch(1),!e.t0.name||"OverconstrainedError"!==e.t0.name){e.next=13;break}if(n)throw e.t0;e.next=12;break;case 12:return e.abrupt("return",null);case 13:return i&&i.bMobile&&i.bSafari?(delete t.video.width,delete t.video.height):t.bFmEnvironment?(delete t.video.facingMode,o&&o.length&&(t.video.deviceId={ideal:o[o.length-1].deviceId})):t.video=!0,e.abrupt("return",navigator.mediaDevices.getUserMedia(t));case 15:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function Vn(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return(Vn=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new Vn(e)}var Un=function(){function e(e,t,n,r){this.videoSettings=Rn,this._browserInfo=null,this._isPlugOut=!1,this._resolutionSelector=null,this._cameraInfo=null,this._allCameras=null,this._videoTrack=null,this._allResolutions=[],this._curResolution=null,this._videoEle=null,this._isFill=!1,this._isUser=!1,this._useWebgl=!0,this.videoGlCvs=null,this.videoGl=null,this.glImgData=null,this.glCropImgData=null,this._cameraManager=null,this._oPub=null,this._browserInfo=o.navInfo,!this._browserInfo.bMobile&&this._browserInfo.bSafari?15<=parseInt(this._browserInfo.strBrowserVersion)&&(this._useWebgl=!1):this._browserInfo.bHuaWeiBrowser&&(this._useWebgl=!1),this._cameraInfo=e||{deviceId:"",label:""},this._videoEle=t,this._allCameras=n,this._oPub=r||new ut}var n=e.prototype;return n.getFrame=function(){Date.now();var e,t,n=this._videoEle.videoWidth,r=this._videoEle.videoHeight,i=(this.videoGlCvs||(this.videoGlCvs=globalThis.OffscreenCanvas?new globalThis.OffscreenCanvas(n,r):document.createElement("canvas")),this.videoGlCvs),o=this._useWebgl,a=null;return(a=o?this.videoGl||i.getContext("webgl",{alpha:!1,antialias:!1,depth:!1,stencil:!1,preserveDrawingBuffer:!0})||i.getContext("experimental-webgl",{alpha:!1,antialias:!1,depth:!1,stencil:!1,preserveDrawingBuffer:!0}):a)&&o||(o=!1,this.videoGlCvs=document.createElement("canvas"),i=this.videoGlCvs),i.width==n&&i.height==r||(i.height=r,i.width=n,a&&a.viewport(0,0,n,r)),o?(this.videoGl||(o=(this.videoGl=a).createShader(a.VERTEX_SHADER),a.shaderSource(o,"\nattribute vec4 a_position;\nattribute vec2 a_uv;\n\nvarying vec2 v_uv;\n\nvoid main() {\ngl_Position = a_position;\nv_uv = a_uv;\n}\n"),a.compileShader(o),a.getShaderParameter(o,a.COMPILE_STATUS),t=a.createShader(a.FRAGMENT_SHADER),a.shaderSource(t,"\nprecision lowp float;\n\nvarying vec2 v_uv;\n\nuniform sampler2D u_texture;\n\nvoid main() {\nvec4 sample =  texture2D(u_texture, v_uv);\ngl_FragColor = vec4(sample.b, sample.g, sample.r, 1.0);\n}\n"),a.compileShader(t),a.getShaderParameter(t,a.COMPILE_STATUS),e=a.createProgram(),a.attachShader(e,o),a.attachShader(e,t),a.linkProgram(e),a.getProgramParameter(e,a.LINK_STATUS),a.useProgram(e),a.bindBuffer(a.ARRAY_BUFFER,a.createBuffer()),a.bufferData(a.ARRAY_BUFFER,new Float32Array([-1,1,0,1,1,1,1,1,-1,-1,0,0,1,-1,1,0]),a.STATIC_DRAW),o=a.getAttribLocation(e,"a_position"),a.enableVertexAttribArray(o),a.vertexAttribPointer(o,2,a.FLOAT,!1,16,0),t=a.getAttribLocation(e,"a_uv"),a.enableVertexAttribArray(t),a.vertexAttribPointer(t,2,a.FLOAT,!1,16,8),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,a.createTexture()),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST),a.uniform1i(a.getUniformLocation(e,"u_texture"),0)),(!this.glImgData||this.glImgData.length<n*r*4)&&(this.glImgData=new Uint8Array(n*r*4)),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,this._videoEle),a.drawArrays(a.TRIANGLE_STRIP,0,4),a.readPixels(0,0,a.drawingBufferWidth,a.drawingBufferHeight,a.RGBA,a.UNSIGNED_BYTE,o=this.glImgData),this.glImgData):((t=i.getContext("2d")).drawImage(this._videoEle,0,0),0===i.width||0===i.height?null:((!this.glImgData||this.glImgData.length<i.width*i.height*4)&&(this.glImgData=new Uint8Array(i.width*i.height*4)),this.glImgData.set(t.getImageData(0,0,i.width,i.height).data),this.glImgData))},n.capture=function(){var e=t(r().mark((function e(t){var n,i,o,a,s,u,c,l,d,h,g,f,m,p,_;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t=!1),n=null,e.prev=2,Ee.log("capture"),i=(u=this._videoEle).videoWidth,u=this.getVideoSizeInfo(),o=u.width,a=u.height,s=u.offsetX,u=u.offsetY,c=this.getFrame(),d=l=!1,this.videoGl?d=!0:l=!0,n={imageData:null,imageWidth:o,imageHeight:a,rgba:l,bgra:d},this._isFill){for((!this.glCropImgData||this.glCropImgData.length<o*a*4)&&(this.glCropImgData=new Uint8Array(o*a*4)),h=this.glCropImgData,g=0,f=u+a,m=u;m<f;m++)_=g*o*4,h.set(c.subarray(p=4*(m*i+s),p+4*o),_),g++;n.imageData=h.buffer}else n.imageData=c.buffer;if(t){e.next=16;break}return e.next=15,ue(n);case 15:return e.abrupt("return",e.sent);case 16:e.next=21;break;case 18:return e.prev=18,e.t0=e.catch(2),e.abrupt("return",Promise.reject(e.t0));case 21:return e.abrupt("return",n);case 22:case"end":return e.stop()}}),e,this,[[2,18]])})));return function(t){return e.apply(this,arguments)}}(),n.setImageDataBack=function(e){Ee.log("setImageDataBack"),this._isFill?this.glCropImgData=new Uint8Array(e):this.glImgData=new Uint8Array(e)},n.getVideoSizeInfo=function(){if("none"==(null==(u=this._videoEle)||null==(t=u.style)?void 0:t.display))return{width:u.videoWidth,height:t=u.videoHeight,offsetX:0,offsetY:0};if("playing"!==this.getStatus())throw H;var e=(t=u.getBoundingClientRect()).width,t=t.height;if(0===e||0===t)throw X;var n,r,i,o=0,a=0,s=u.videoHeight,u=u.videoWidth;return this._isFill?(n=e/(u*(e=Math.max(e/u,t/s))),t/=s*e,r=Math.floor(u*n),i=Math.floor(s*t),o=Math.floor((1-n)/2*u),a=Math.floor((1-t)/2*s)):(r=u,i=s),{width:r,height:i,offsetX:o,offsetY:a}},n.setFillMode=function(e){this._isFill=e,this._videoEle&&(this._videoEle.style.objectFit=e?"cover":"contain")},n.setPlugOut=function(){this._isPlugOut=!0},n._checkPlugOut=function(){this._isPlugOut&&this._oPub.emit("video-error",V)},n.getResolutions=function(){var e=t(r().mark((function e(t){var n,i,o,a,s,u,c,l,d,h;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t=!1),0<this._allResolutions.length&&!t)return e.abrupt("return",this._allResolutions);e.next=3;break;case 3:if(this._cameraInfo){e.next=5;break}return e.abrupt("return",null);case 5:n=[],this._allResolutions=[],o=i=!1,e.prev=9,s=function(e){var t,n,r,i=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new Vn(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}(xn);case 11:return e.next=13,s.next();case 13:if(i=!(d=e.sent).done)return u=(d=d.value).width,c=d.height,d=d.type,e.next=18,Wn(this._cameraInfo.deviceId,u,c,d,this._browserInfo,this._allCameras,this._oPub);e.next=32;break;case 18:if(h=(l=e.sent).height===c&&l.width===u||l.height===u&&l.width===c,(d=l&&l.height)&&h){e.next=27;break}return e.next=24,Wn(this._cameraInfo.deviceId,u,c,"ideal",this._browserInfo,this._allCameras,this._oPub);case 24:return(h=e.sent)&&h.height&&!function(e,t){for(var n=e.width,r=e.height,i=kn(t);!(o=i()).done;){var o=o.value;if(o.height===r&&o.width===n)return 1}}({width:h.width,height:h.height},n)&&(delete h.type,n.push(h)),e.abrupt("continue",29);case 27:delete l.type,n.push(l);case 29:i=!1,e.next=11;break;case 32:e.next=38;break;case 34:e.prev=34,e.t0=e.catch(9),o=!0,a=e.t0;case 38:if(e.prev=38,e.prev=39,i&&null!=s.return)return e.next=43,s.return();e.next=43;break;case 43:if(e.prev=43,o)throw a;e.next=46;break;case 46:return e.finish(43);case 47:return e.finish(38);case 48:return this._allResolutions=n,e.abrupt("return",n);case 50:case"end":return e.stop()}}),e,this,[[9,34,38,48],[39,,43,47]])})));return function(t){return e.apply(this,arguments)}}(),n.setResolution=function(){var e=t(r().mark((function e(t,n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.playing())return e.abrupt("return",this.play(t,n,this._cameraManager));e.next=2;break;case 2:return this._curResolution={width:t,height:n},e.abrupt("return",this._curResolution);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.getCurrentResolution=function(){return this._curResolution},n.getCameraInfo=function(){return this._cameraInfo},n.destroy=function(){this.stop(),this._cameraInfo=null,this._allCameras=null,this._allResolutions=null,this._videoEle=null,this._browserInfo=null,this.videoGlCvs=null},n.stop=function(){this._videoEle&&this._videoEle.srcObject&&(this._videoEle.srcObject.getTracks().forEach((function(e){e.stop()})),this._videoEle.srcObject=null,this._videoTrack=null)},n.getDeviceId=function(e){return e&&(e=e.getVideoTracks()).length?(this._videoTrack=e[0],this._videoTrack.getSettings().deviceId):""},n.updateCameraInfo=function(e){var t={};return e&&(e=e.getVideoTracks()).length&&(this._videoTrack=e[0],e={deviceId:(t=this._videoTrack.getSettings()).deviceId,label:this._videoTrack.label},this._cameraInfo=e),t},n.getBestMediaStream=function(){var e=t(r().mark((function e(t,n,i){var o,a,s,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.videoSettings=Fn(this._cameraInfo.deviceId,t,n,i,!0,this._browserInfo,this._allCameras,this._isUser),o=this.videoSettings,e.prev=2,e.next=5,Bn(o,!0,this._browserInfo,this._allCameras);case 5:if(s=this.getDeviceId(a=e.sent),this._cameraManager&&o.bFmEnvironment&&!this._isUser)return e.next=10,this._cameraManager.getAllCamerasInfo();e.next=21;break;case 10:if(this._allCameras=e.sent,this.videoSettings=Fn(this._cameraInfo.deviceId,t,n,i,!0,this._browserInfo,this._allCameras,this._isUser),"boolean"==typeof(o=this.videoSettings).video&&(o.video={}),(u=(u=o.video.deviceId)&&(u.exact||u.ideal||u))&&0<s.length&&s!=u)return a.getTracks().forEach((function(e){e.stop()})),e.next=20,Bn(o,!0,this._browserInfo,this._allCameras);e.next=21;break;case 20:a=e.sent;case 21:return u=this.updateCameraInfo(a),e.abrupt("return",{settings:u,stream:a});case 25:e.prev=25,e.t0=e.catch(2),this.throwError("NotAllowedError"===e.t0.name||"Permission denied"===e.t0.message?U:G);case 28:case"end":return e.stop()}}),e,this,[[2,25]])})));return function(t,n,r){return e.apply(this,arguments)}}(),n.play=function(){var e=t(r().mark((function e(t,n,i){var o,a,s,u,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=this._videoEle)||this.throwError(N),this._cameraManager=i,this._checkPlugOut(),u=this._curResolution,"number"==typeof t&&0<t&&"number"==typeof n&&0<n||(t=u?u.width:1280,n=u?u.height:720),u=function(e,t){for(var n=e.width,r=e.height,i=kn(t);!(o=i()).done;){var o=o.value;if(o.height===r&&o.width===n)return o.type}return"ideal"}({width:t,height:n},a=this._allResolutions),this.stop(),e.next=10,this.getBestMediaStream(t,n,u);case 10:return s=(a=e.sent).settings,o.srcObject=u=a.stream,e.next=16,new Promise((function(e){o.onloadedmetadata=function(t){e(t)}}));case 16:return e.prev=16,e.next=19,o.play();case 19:e.next=27;break;case 21:return e.prev=21,e.t0=e.catch(16),e.next=25,new Promise((function(e){setTimeout(e,1e3)}));case 25:return e.next=27,o.play();case 27:return c={width:o.videoWidth,height:o.videoHeight},s.width&&s.height&&(s.width===t&&s.height===n||s.width===n&&s.height===t)&&(c.width=t,c.height=n),this._curResolution=c,this._oPub.emit("onPlayed",o),e.abrupt("return",c);case 32:case"end":return e.stop()}}),e,this,[[16,21]])})));return function(t,n,r){return e.apply(this,arguments)}}(),n.pause=function(){this._videoEle&&this._videoEle.pause()},n.resume=function(){this._videoEle&&this.paused()&&this.playing()&&this._videoEle.play()},n.paused=function(){return!!this._videoEle&&this._videoEle.paused},n.playing=function(){if(this._isPlugOut)return!1;if(this._videoEle&&this._videoEle.srcObject)try{var e=this._videoEle.srcObject;if(e){var t=e.getVideoTracks();if(t&&0!==t.length)return!0}}catch(e){this.throwError(e)}return!1},n.getStatus=function(){return this.playing()?this.paused()?"paused":"playing":"stopped"},n.getVideoSetting=function(){return this.videoSettings},n.toggleCamera=function(e,t,n){return this._isUser=!this._isUser,this._cameraInfo.deviceId="",this.play(e,t,n)},n.throwError=function(e){this._oPub.emit(x,e)},e}();function Gn(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return jn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jn(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function jn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Hn=function(e){function n(t,n){return(t=e.call(this,t)||this)._allCamerasInfo=[],t.selectedCamera=null,t.videoEl=null,t._trackCameraDeviceChanged(),t._initEl(n),t}c(n,e);var i=n.prototype;return i.selectCamera=function(){var e=t(r().mark((function e(t){var n,i,o,a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._allCamerasInfo.length){e.next=3;break}return e.next=3,this.getAllCamerasInfo();case 3:if(n=this._allCamerasInfo,t=t||new Un(null,this.videoEl,n,this._oPub),i=null,!Xe(t)){e.next=21;break}o={deviceId:"",label:""},a=0;case 9:if(!(a<n.length)){e.next=19;break}if(t===(s=n[a]).deviceId)return o.deviceId=s.deviceId,o.label=s.label,i=new Un(o,this.videoEl,n,this._oPub),e.abrupt("break",19);e.next=16;break;case 16:a++,e.next=9;break;case 19:e.next=22;break;case 21:t instanceof Un&&(i=t);case 22:return this.selectedCamera&&this.selectedCamera.destroy(),this.selectedCamera=i,e.abrupt("return",i);case 25:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i.closeCamera=function(){this.selectedCamera&&(this.selectedCamera.destroy(),this.selectedCamera=null)},i.getCurrentCamera=function(){return this.selectedCamera},i.destroy=function(){this._oPub.off("onCameraChanged")},i.getAllCamerasInfo=function(){var e=t(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zn(this._oPub),e.next=3,function(){return Kn.apply(this,arguments)}();case 3:return this._allCamerasInfo=e.sent,e.abrupt("return",this._allCamerasInfo);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i._trackCameraDeviceChanged=function(){var e=this;void 0!==navigator.mediaDevices&&(navigator.mediaDevices.ondevicechange=function(t){e._cameraChangedHandler(t)})},i._initEl=function(e){e?this.videoEl=e:((e=document.createElement("video")).className=g.cameraVideo,e.playsInline=!0,e.muted=!0,this.videoEl=e,this._oPub.on("onPlayed",(function(e){Jn(e)})))},i._cameraChangedHandler=function(e){},i._requestCamera=function(){var e=t(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zn(this._oPub),0===this._allCamerasInfo.length&&this._oPub.emit("onThrowError",K),e.next=4,this._checkAllowCamera();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i._checkAllowCamera=function(){var e=t(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i.requestCamera=function(){var e=t(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.cameraExist=function(e,t){return!0},n}(n);function zn(e){void 0===navigator.mediaDevices&&(0!==location.origin.lastIndexOf("https://",0)?$e(e,F):$e(e,W)),void 0===navigator.mediaDevices.getUserMedia&&$e(e,O)}function Kn(){return(Kn=t(r().mark((function e(){var t,n,i,o,a,s,u,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,navigator.mediaDevices.enumerateDevices();case 3:t=e.sent,n=[],o=i=0;case 7:if(!(o<t.length)){e.next=24;break}if("videoinput"!==(a=t[o]).kind)return e.abrupt("continue",21);e.next=11;break;case 11:s=!1,u=Gn(n);case 13:if((c=u()).done){e.next=20;break}if(c.value.deviceId===a.deviceId)return s=!0,e.abrupt("break",20);e.next=18;break;case 18:e.next=13;break;case 20:s||((c={}).deviceId=a.deviceId,c.label=!a.label||/^camera\s[0-9]+$/.test(a.label)?"camera "+i++:a.label,n.push(c));case 21:o++,e.next=7;break;case 24:return e.abrupt("return",n);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jn(e,t,n){var r,i,o,a;e&&(i=e.style.objectFit,t=t&&n?(a=t,n):(a=e.videoWidth,e.videoHeight),o=(n=e.getBoundingClientRect()).width,n=n.height,r={zoom:1,left:0,top:0},"cover"===i?(i=Math.max(o/a,n/t),r.zoom=i):(o=(o-a*(i=Math.min(o/a,n/t)))/2,a=(n-t*i)/2,r.zoom=i,r.left=o,r.top=a),e.videoLayout=r)}var Yn,Xn=function(e){function t(t,n){return(t=e.call(this,t)||this)._showCanvas=null,t._containerEl=null,t._videoEl=null,t._obEl=null,t._srcVideoInfo=null,t._videoEl=n,t._showCanvas=t.createCameraCanvas(),t}c(t,e);var n=t.prototype;return n.createCameraCanvas=function(){var e=document.createElement("canvas");return e.className=g.cameraCvs,e.addEventListener("touchstart",(function(e){"touchstart"===e.type&&e.cancelable&&e.preventDefault()}),{passive:!1}),e},n.getCameraDvs=function(){return this._showCanvas},n.resetVideoInfo=function(){var e;o.navInfo.bMobile&&(o.navInfo.biPhone||o.navInfo.biPad)&&(e=0==(e=window.orientation)||180==e?0:90,this._srcVideoInfo={videoWidth:this._videoEl.videoWidth,videoHeight:this._videoEl.videoHeight,orientation:e})},n.bindView=function(e){var t=this;if(!(e=Xe(e)?document.getElementById(e):e))return!1;var n,r=this._showCanvas,i=this._videoEl,a=((null!=(n=i.parentElement)&&n.remove(),n=document.createElement("div")).className=g.cameraContainer,n.appendChild(i),n.appendChild(r),this._containerEl=n,e.appendChild(n),this.updateCanvasRect(),this);return this._obEl=new hn(n,(function(e){var n,r,i;o.navInfo.bMobile&&(o.navInfo.biPhone||o.navInfo.biPad)&&a._videoEl&&0<a._videoEl.videoWidth&&0<a._videoEl.videoHeight&&(i=0==(i=window.orientation)||180==i?0:90,a._srcVideoInfo?i==a._srcVideoInfo.orientation?(n=a._srcVideoInfo.videoWidth,r=a._srcVideoInfo.videoHeight):(r=a._srcVideoInfo.videoHeight,n=a._srcVideoInfo.videoWidth):(a._srcVideoInfo={videoWidth:a._videoEl.videoWidth,videoHeight:a._videoEl.videoHeight,orientation:i},n=a._srcVideoInfo.videoWidth,r=a._srcVideoInfo.videoHeight)),Jn(a._videoEl,n,r),a.updateCanvasRect(),t._oPub.emit("uiResize",e)})),!0},n.updateCanvasRect=function(){this._showCanvas&&(this._showCanvas.width=this._showCanvas.getBoundingClientRect().width,this._showCanvas.height=this._showCanvas.getBoundingClientRect().height)},n.unbindView=function(){this._obEl&&(this._obEl.dispose(),this._obEl=null);var e=this._containerEl;return!!e&&(e.remove(),!0)},n.dispose=function(){var e;this.unbindView(),this._showCanvas.width=1,this._showCanvas.height=1,null!=(e=this._showCanvas)&&e.remove(),this._showCanvas=null,this._containerEl=null,this._videoEl=null,this._obEl=null},t}(n),Qn=function(){function e(){this.path=[],this._removedPages=[],this._currentPage=null}var n,i=e.prototype;return i.setCurrentPage=function(){var e=t(r().mark((function e(t,n){var i,o,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n=!0),i=this._currentPage,this._currentPage=t,i&&i instanceof kt?(o=i.getDcs())&&o.emit("blurPage"):t&&t instanceof kt&&t.pageName==M&&(o=t.getDcs())&&o.emit("focusPage"),t)return e.next=7,function(){return ee.apply(this,arguments)}(t,n);e.next=7;break;case 7:i&&!t&&(a=i.getDcs())&&(a.off("blurPage"),a.off("focusPage"));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),i.navigateTo=function(){var e=t(r().mark((function e(t,n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n=!0),this.path.push(t),e.next=4,this.setCurrentPage(t,n);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),i.redirectTo=function(e){this.closeAllPages(),this.navigateTo(e)},i.redirectToHome=function(){var e=t(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.navigatePopPageSync(this.path.length-1),e.next=4,this.resetCurrentPageAfterPopPage();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.navigatePopPageSync=function(e,t){void 0===e&&(e=1),void 0===t&&(t=!0);for(var n=this.path;0<e;){var r=n.pop();r&&!r.isDestroyed&&(t&&r.hide(),this._removedPages.push(r)),e--}return null},i.getRemovedPages=function(){return this._removedPages},i.destroyRemovedPages=function(){this._removedPages.forEach((function(e){$(e)})),this._removedPages=[]},i.closeAllPages=function(){this.path.forEach((function(e){$(e)})),this.path=[],this.destroyRemovedPages(),this.setCurrentPage(null)},i.hideAllPages=function(){this.path.forEach((function(e){e.hide()}))},i.showAllPages=function(){this.path.forEach((function(e){e.show()}))},i.showDocumentScanPage=function(e,t,n){return e=new kt(e,t,n),this.navigateTo(e),n.captureLoop&&(n.captureLoop.setEnable(),n.once("onPlayed",(function(){n.captureLoop&&n.captureLoop.startLoop({dcs:n})})),n.once("video-closed",(function(){ke(n),n.captureLoop&&n.captureLoop.stopCaptureLoop()})),(n.config.scannerViewer.autoDetect||n.config.scannerViewer.autoScan)&&(n.captureLoop.loadLoopTypeFromConfig(),n.captureLoop.clearCaptureTimer()),n.on("blurPage",(function(){n.captureLoop&&n.captureLoop.isEnable()&&(n.captureLoop.saveLoopTypeToConfig(),n.captureLoop.stopCaptureLoop(),n.captureLoop.setDisable())})),n.on("focusPage",(function(){n.captureLoop&&(n.captureLoop.setEnable(),n.config.scannerViewer.autoScan.enableAutoScan?n.captureLoop.setAutoScan():n.config.scannerViewer.autoDetect.enableAutoDetect&&!n.config.scannerViewer.autoScan.enableAutoScan?n.captureLoop.setAutoDetect():n.captureLoop.changeStyle())}))),e.moveMultipleImgPosition(),e},i.showInsertPage=function(e,t,n){var r=n.getCurrentPage();return e=new Pn(e,t,n),this.navigateTo(e),r.hide(),n.captureLoop&&(n.captureLoop.setEnable(),n.once("onPlayed",(function(){n.captureLoop&&n.captureLoop.startLoop({dcs:n})})),n.once("video-closed",(function(){ke(n),n.captureLoop&&n.captureLoop.stopCaptureLoop()})),n.captureLoop.loadLoopTypeFromConfig()),e},i.showCropPage=function(e,n,i){var o=i.getCurrentPage(),a=new yn(e,n,i),s=e.documentEditorSettings||i.config.documentEditorSettings,u=this;return(n=e.doFillData?a.fillOrigCustomDataFirstTime():Promise.resolve()).then(t(r().mark((function t(){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.isDestroyed)return t.abrupt("return");t.next=2;break;case 2:return n=Oe(e.visibility)&&Oe(s.visibility),t.next=5,u.navigateTo(a,n);case 5:!a.isDestroyed&&n?a.render():a.hide(),o&&o.pageName!=R.toLowerCase&&o.hide();case 7:case"end":return t.stop()}}),t)})))),a},i.showDocumentEditPage=function(e,n,i){var o,a=i.getCurrentPage(),s=new $t(e,n,i),u=e.documentEditorSettings||i.config.documentEditorSettings;return n=e.doFillData?s.fillOrigCustomDataFirstTime():Promise.resolve(),Oe(e.visibility)&&(o=this,n.then(t(r().mark((function t(){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s.isDestroyed)return t.abrupt("return");t.next=2;break;case 2:return n=Oe(e.visibility)&&Oe(u.visibility),t.next=5,o.navigateTo(s,n);case 5:!s.isDestroyed&&n?s.render():s.hide(),a&&a.pageName!=k.toLowerCase&&a.hide();case 7:case"end":return t.stop()}}),t)}))))),s},i.removePage=function(){var e=t(r().mark((function e(t){var n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=this.path.length)<=1)return this.navigatePopPageSync(),e.next=5,this.resetCurrentPageAfterPopPage();e.next=6;break;case 5:return e.abrupt("return");case 6:if(this.path[n-1]==t)return this.navigatePopPageSync(),e.next=11,this.resetCurrentPageAfterPopPage();e.next=12;break;case 11:return e.abrupt("return");case 12:i=n-2;case 13:if(!(0<=i)){e.next=21;break}if(this.path[i]==t)return this.path.splice(i,1),e.abrupt("return");e.next=18;break;case 18:i--,e.next=13;break;case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i.resetCurrentPageAfterPopPage=function(){var e=t(r().mark((function e(t){var n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t=!0),0<(n=this.path).length)return i=n[n.length-1],e.next=6,this.setCurrentPage(i,t);e.next=7;break;case 6:return e.abrupt("return",i);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i=e,(n=[{key:"currentPage",get:function(){return this._currentPage}},{key:"previousPage",get:function(){var e=this.path;return 2<=e.length?e[e.length-2]:null}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(i.prototype,n),Object.defineProperty(i,"prototype",{writable:!1}),e}(),Zn=((mt=Yn=Yn||{})[mt.None=0]="None",mt[mt.AutoScan=1]="AutoScan",mt[mt.AutoDetect=2]="AutoDetect",function(){function e(e){this.isLooping=!1,this._dcs=null,this._cameraCvs=null,this._enabled=!1,this._loopType=Yn.None,this.loopTimer=null,this.lastConfirmTime=0,this.lastDetectTime=(new Date).getTime(),this._captureLoopSub=new ut,this._oldLoopType=[],this._dcs=e}var n=e.prototype;return n.dispose=function(){this._loopType=Yn.None,this.clearCaptureTimer(),this._dcs=null,this._captureLoopSub=null,this._cameraCvs=null},n.resetLastConfirmTime=function(){this.lastConfirmTime=0},n.setAutoScan=function(){this.innerSetNextLoopType(Yn.AutoScan)},n.setAutoDetect=function(){this.innerSetNextLoopType(Yn.AutoDetect)},n.innerSetNextLoopType=function(t){this._loopType==e.EnumLoopType_ManualScan?0==this._oldLoopType.length?this._oldLoopType.push(t):this._oldLoopType[0]=t:(this._loopType=t,this.changeStyle(),this.clearCaptureTimer(),this.startLoop({dcs:this._dcs}))},n.saveLoopTypeToConfig=function(){this._loopType==Yn.AutoScan?(this._dcs.config.scannerViewer.autoScan.enableAutoScan=!0,this._dcs.config.scannerViewer.autoDetect.enableAutoDetect=!0):this._loopType==Yn.AutoDetect?(this._dcs.config.scannerViewer.autoScan.enableAutoScan=!1,this._dcs.config.scannerViewer.autoDetect.enableAutoDetect=!0):(this._dcs.config.scannerViewer.autoScan.enableAutoScan=!1,this._dcs.config.scannerViewer.autoDetect.enableAutoDetect=!1)},n.loadLoopTypeFromConfig=function(){this.isAutoButtonEnabled()&&this._dcs.config.scannerViewer.autoScan.enableAutoScan?(this._loopType=Yn.AutoScan,this._dcs.config.scannerViewer.autoDetect.enableAutoDetect=!0):this.isAutoButtonEnabled()&&this._dcs.config.scannerViewer.autoDetect.enableAutoDetect?this._loopType=Yn.AutoDetect:(this._loopType=Yn.None,this._dcs.config.scannerViewer.autoDetect.enableAutoDetect=!1,this._dcs.config.scannerViewer.autoScan.enableAutoScan=!1),this.changeStyle()},n.getLoopType=function(){return this._loopType},n._setLoopType=function(e){this._loopType=e},n.setIsLooping=function(e){this.isLooping=e},n.getIsLooping=function(){return this.isLooping},n.setEnable=function(){this.isAutoButtonEnabled()&&(this._enabled=!0)},n.setDisable=function(){this._enabled=!1},n.isEnable=function(){return this._enabled},n.isAutoButtonDisabled=function(){return 1!=this._dcs.config.scannerViewer.enableBorderDetection},n.isAutoButtonEnabled=function(){return 1==this._dcs.config.scannerViewer.enableBorderDetection},n.startManualCapture=function(n){var i=this;Ee.log("startManualCapture"),this._oldLoopType.push(this._loopType),this._captureLoopSub.once("onCapturedImage",function(){var e=t(r().mark((function e(t,n,o){var a,s,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={dcs:t,page:t.getCurrentPage()},e.prev=1,0==(void 0===(s=(void 0===(s=t.config.scannerViewer)?{}:s).continuousScan)?{}:s).enableContinuousScan&&i.loadLoopTypeFromConfig(),e.next=7,a.page.emitEx("onSaveCapture",!1,a,n,!0,o);case 7:e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),Ee.log("manual capture error."),Ee.log(e.t0),702==e.t0.code&&(t.hideLoading("startManualCapture 1"),t.emit(x,e.t0));case 14:if(!t.captureLoop){e.next=30;break}if((u=t.captureLoop._oldLoopType).length<=0)return Ee.log("manual capture stack error."),t.captureLoop._loopType=Yn.None,t.hideLoading("startManualCapture 2"),e.abrupt("return");e.next=21;break;case 21:if(t.captureLoop._loopType=u.pop(),t.captureLoop.resetLastConfirmTime(),t.captureLoop.loopTypeIsManualScan())return t.captureLoop.innerLoop(a),t.hideLoading("startManualCapture 3"),e.abrupt("return");e.next=27;break;case 27:t.hideLoading("startManualCapture 4"),t.captureLoop.innerLoop(a),t.captureLoop.changeStyle();case 30:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n,r){return e.apply(this,arguments)}}()),this.lastConfirmTime=(new Date).getTime(),this.loopTypeIsManualScan()||(this._loopType=e.EnumLoopType_ManualScan,this._dcs.showLoading("startManualCapture start loop"),this.isLooping||(this.clearCaptureTimer(),this.innerLoop(n)))},n.startLoop=function(e){Ee.log("startLoop"),this.isAutoButtonDisabled()&&(this._loopType=Yn.None),this._loopType==Yn.AutoScan||this._loopType==Yn.AutoDetect?null==this.loopTimer&&(this.lastConfirmTime=0,this.isLooping||(this.clearCaptureTimer(),this.innerLoop(e))):(this.stopCaptureLoop(),this._dcs.hideLoading("startLoop")),this.changeStyle()},n.changeStyle=function(){if(n=null==(n=this._dcs)||null==(n=n.getCurrentPage())?void 0:n.element){var e=null==n?void 0:n.querySelector("."+g.BUTTON_PREFIX+"autoCapture"),t=null==n?void 0:n.querySelector("."+g.BUTTON_PREFIX+"captureBtn"),n=null==n?void 0:n.querySelector("."+g.BUTTON_PREFIX+"detectCamera");if(this.isAutoButtonDisabled())return e&&(e.classList.remove(g.footerSelected),e.classList.add(g.disable),e.bSelected=!1),n&&t.classList.remove(g.capturing),void(n&&(n.classList.remove(g.headerSelected),n.classList.add(g.disable),n.bSelected=!1));this._loopType==Yn.AutoScan?(e&&(e.classList.add(g.footerSelected),e.bSelected=!0),n&&t.classList.add(g.capturing),n&&(n.classList.add(g.headerSelected),n.bSelected=!0)):this._loopType==Yn.AutoDetect?(e&&(e.classList.remove(g.footerSelected),e.bSelected=!1),n&&t.classList.remove(g.capturing),n&&(n.classList.add(g.headerSelected),n.bSelected=!0)):(e&&(e.classList.remove(g.footerSelected),e.classList.remove(g.disable),e.bSelected=!1),n&&t.classList.remove(g.capturing),n&&(n.classList.remove(g.headerSelected),n.classList.remove(g.disable),n.bSelected=!1))}},n.getDetectRemainTime=function(){var e=(new Date).getTime(),t=et(this._dcs,"config.scannerViewer.autoDetect").fpsLimit;return Math.max(0,1e3/(void 0===t?3:t)-(e-=this.lastDetectTime))},n.loopTypeIsNone=function(){return this._loopType==Yn.None},n.loopTypeIsManualScan=function(){return this._loopType==e.EnumLoopType_ManualScan},n.innerLoop=function(e){var n=this,i=e.dcs,o=i.getAreaDetectCallback(),a=this.getDetectRemainTime();if(o)return this.loopTypeIsNone()?this.exitAutoCaptureFromInner(0):void((this._loopType!=Yn.AutoScan&&this._loopType!=Yn.AutoDetect||this.isEnable())&&(clearTimeout(this.loopTimer),this.loopTimer=setTimeout(t(r().mark((function t(){var o;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.loopTypeIsNone())return t.abrupt("return",n.exitAutoCaptureFromInner(1));t.next=2;break;case 2:if(n.isLooping)return t.abrupt("return");t.next=4;break;case 4:return n.isLooping=!0,t.next=7,n.innerLoopTimeout(e);case 7:o=t.sent,n.isLooping=!1,o&&(n._loopType==Yn.AutoScan||n._loopType==Yn.AutoDetect)&&n.isEnable()?setTimeout((function(){!i.captureLoop||i.captureLoop._loopType!=Yn.AutoScan&&i.captureLoop._loopType!=Yn.AutoDetect||!i.captureLoop.isEnable()||i.captureLoop.innerLoop(e)}),10):n.clearCaptureTimer();case 10:case"end":return t.stop()}}),t)}))),a)))},n.innerLoopTimeout=function(){var e=t(r().mark((function e(t){var n,i,o,a,s,u,c,l,d,h,g,f;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.dcs,this.lastDetectTime=(new Date).getTime(),i=void 0===(i=(o=n.config.scannerViewer).polygonStyle)?{stroke:"#fe8e14",strokeWidth:"2px",dashed:"solid"}:i,o=void 0===(o=o.autoDetect)?{}:o,a=!0,e.prev=4,"playing"!=n.getStatus())return e.abrupt("return",!0);e.next=7;break;case 7:return e.next=9,n.capture(a);case 9:if(s=e.sent,this.loopTypeIsNone())return e.abrupt("return",this.exitAutoCaptureFromInner(2));e.next=14;break;case 14:if(this.loopTypeIsManualScan())return this._captureLoopSub.emit("onCapturedImage",n,s),e.abrupt("return",!1);e.next=17;break;case 17:return e.prev=17,e.next=20,de(s,n);case 20:if(u=e.sent,this._loopType!=Yn.AutoScan){e.next=69;break}if(c=u.cornerPoints,this.loopTypeIsNone())return Ee.log("loop setImageDataBack"),n.setImageDataBack(s.imageData),e.abrupt("return",this.exitAutoCaptureFromInner(3));e.next=27;break;case 27:if(!u.detectedArea){e.next=58;break}if(this.drawArea(c,i,n.getVideoElement()),this.loopTypeIsNone())return Ee.log("loop setImageDataBack"),n.setImageDataBack(s.imageData),e.abrupt("return",this.exitAutoCaptureFromInner(5));e.next=35;break;case 35:if(this.loopTypeIsManualScan())return this._captureLoopSub.emit("onCapturedImage",n,s,u),e.abrupt("return",!1);e.next=38;break;case 38:if(h=void 0===(h=o.autoCaptureDelay)?2e3:h,l=(new Date).getTime(),!(this._loopType==Yn.AutoScan&&0<this.lastConfirmTime&&l-this.lastConfirmTime>h)){e.next=55;break}if(n.showLoading("auto capture"),e.prev=43,h=t.dcs.getCurrentPage())return e.next=48,h.emitEx("onSaveCapture",!0,t,s,!0,u);e.next=48;break;case 48:return e.prev=48,n.hideLoading("auto capture"),e.finish(48);case 51:return n.captureLoop.resetLastConfirmTime(),e.abrupt("return",!0);case 55:0==this.lastConfirmTime&&(this.lastConfirmTime=l);case 56:e.next=62;break;case 58:Ee.log("[capture loop] detect result:"),Ee.log(u),this.lastConfirmTime=0,this.clearCanvas();case 62:if(this.loopTypeIsManualScan())return this._captureLoopSub.emit("onCapturedImage",n,s,u),e.abrupt("return",!1);e.next=65;break;case 65:Ee.log("loop setImageDataBack"),n.setImageDataBack(s.imageData),e.next=85;break;case 69:if(this._loopType!=Yn.AutoDetect){e.next=82;break}if(d=u.cornerPoints,Ee.log("loop setImageDataBack"),n.setImageDataBack(s.imageData),this.loopTypeIsNone())return e.abrupt("return",this.exitAutoCaptureFromInner(3));e.next=75;break;case 75:if(g=st(d,h=s.imageWidth,g=s.imageHeight),this.loopTypeIsNone())return e.abrupt("return",this.exitAutoCaptureFromInner(4));e.next=79;break;case 79:g?this.clearCanvas():(f=n.getVideoElement(),n.captureLoop.drawArea(d,i,f)),e.next=85;break;case 82:if(this.loopTypeIsManualScan())return this._captureLoopSub.emit("onCapturedImage",n,s,u),e.abrupt("return",!1);e.next=85;break;case 85:e.next=90;break;case 87:e.prev=87,e.t0=e.catch(17),Ee.log(e.t0);case 90:e.next=95;break;case 92:e.prev=92,e.t1=e.catch(4),Ee.log(e.t1);case 95:return e.abrupt("return",!0);case 97:case"end":return e.stop()}}),e,this,[[4,92],[17,87],[43,,48,51]])})));return function(t){return e.apply(this,arguments)}}(),n.exitAutoCaptureFromInner=function(e){return this.clearCaptureTimer(),this._dcs.hideLoading("innerLoop exitAutoCaptureFromInner"),Ee.log("auto capture loop: loopType is None "+e),!1},n.clearCaptureTimer=function(){clearTimeout(this.loopTimer),this.loopTimer=null,this.lastConfirmTime=0},n.stopCaptureLoop=function(){this._loopType=Yn.None,this.clearCaptureTimer(),this.clearCanvas()},n.getCameraCvs=function(){return this._cameraCvs||(this._cameraCvs=this._dcs.getCameraView().getCameraDvs()),this._cameraCvs},n.clearCanvas=function(){var e=this.getCameraCvs();e&&e.getContext("2d").clearRect(0,0,e.width,e.height)},n.drawArea=function(e,t,n){var r,i=(r=this.getCameraCvs()).getContext("2d"),o=(n=(i.save(),i.clearRect(0,0,r.width,r.height),r=n.videoLayout).zoom,r.left);i.translate(o,r=r.top),i.scale(n,n),i.beginPath(),i.moveTo(e[0],e[1]);for(var a=2;a<e.length;a+=2)i.lineTo(e[a],e[a+1]);i.closePath(),o=parseInt(t.strokeWidth,10)/n,i.strokeStyle=t.stroke,i.lineCap="round",i.lineWidth=o,"dashed"===t.dash&&i.setLineDash([Math.max(2,o),Math.max(4,2*o)]),i.stroke(),i.restore()},e}()),qn=(Zn.EnumLoopType_ManualScan=3,Zn._defaultConfig={autoScan:{enableAutoScan:!1},autoDetect:{enableAutoDetect:!1},enableBorderDetection:!0},new Map),$n=new Map,er=new Map,tr=function(){function e(e){this._cameraMng=null,this._cameraView=null,this._uiRouters=null,this.captureLoop=null,this.filterApplyToAllValue=void 0,this.curFilterValue=void 0,this._runPlaying=!1,this._loadingConfig={imageSource:null,background:"rgba(0, 0, 0, 0.2)"},this._loadingNumber=0,this.config={},this._container=null,this._savedFilename=null,this._externalViewerUid=null,this._oPub=null,this._areaDetectCallback=null,this._perspectiveCallback=null,this._licenseCallback=null,this._filterHandleList=[],this._savePhotoCallback=null,this._insertPhotoCallback=null,this._removeImageCallback=null,this._changeIndexCallback=null,this._freeCallback=null,this._loadCallback=null,this._exiting=!1,this._oPub=e,this._cameraMng=new Hn(this._oPub),this._cameraView=new Xn(this._oPub,this._cameraMng.videoEl),this._uiRouters=new Qn,this.captureLoop=new Zn(this),document.addEventListener("click",nr),window.addEventListener("focus",ir),window.addEventListener("blur",rr)}var n=e.prototype;return n.bindView=function(e){return(e=Xe(e=void 0===e?this._container:e)?document.getElementById(e):e)?(this._cameraView||(this._cameraView=new Xn(this._oPub,this._cameraMng.videoEl)),this.captureLoop||(this.captureLoop=new Zn(this)),this._cameraView.bindView(e),this._container=e,!0):($e(this._oPub,N),!1)},n.unbindView=function(){var e;return(this._container=null)!=(e=this._cameraView)&&e.dispose(),(this._cameraView=null)!=(e=this.captureLoop)&&e.dispose(),this.captureLoop=null,document.body.classList.remove(g.overflowHidden),!0},n.getVideoElement=function(){return this._cameraMng.videoEl},n.getCameraView=function(){return this._cameraView},n.play=function(){var e=t(r().mark((function e(t,n,i,o,a){var s,u,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===a&&(a=!1),this._checkLicense(),!a&&this._runPlaying)return e.abrupt("return",Promise.reject(z));e.next=4;break;case 4:if(t&&(t instanceof HTMLElement||or(this._oPub,typeof t,"HTMLElement"),this.bindView(t)),this._container){e.next=7;break}return e.abrupt("return",Promise.reject(N));case 7:if(void 0===n||Qe(n)||or(this._oPub,typeof n,"number"),void 0===i||Qe(i)||or(this._oPub,typeof i,"number"),this._runPlaying=!0,e.prev=10,u=this._cameraMng.getCurrentCamera()){e.next=16;break}return e.next=15,this._cameraMng.selectCamera();case 15:u=e.sent;case 16:return null==o?(c=A.scannerViewer.fullScreen,this.config&&this.config.scannerViewer&&null!=this.config.scannerViewer.fullScreen&&(c=this.config.scannerViewer.fullScreen),u.setFillMode(c)):u.setFillMode(o),e.next=19,u.play(n,i,this._cameraMng);case 19:s=e.sent,e.next=26;break;case 22:return e.prev=22,e.t0=e.catch(10),this._runPlaying=!1,e.abrupt("return",Promise.reject(e.t0));case 26:return e.abrupt("return",s);case 27:case"end":return e.stop()}}),e,this,[[10,22]])})));return function(t,n,r,i,o){return e.apply(this,arguments)}}(),n.pause=function(){var e=this._cameraMng.getCurrentCamera();e&&e.pause()},n.stop=function(){var e=this._cameraMng.getCurrentCamera();e&&(e.stop(),this._runPlaying=!1)},n.resume=function(){var e=this._cameraMng.getCurrentCamera();e&&e.resume()},n.getStatus=function(){var e=this._cameraMng.getCurrentCamera();return e?e.getStatus():""},n.capture=function(e){var t=this._cameraMng.getCurrentCamera();return t?t.capture(e):Promise.reject(B)},n.setImageDataBack=function(e){var t=this._cameraMng.getCurrentCamera();return t?t.setImageDataBack(e):($e(this._oPub,B),null)},n.getSourceList=function(){return this._checkLicense(),this._cameraMng.getAllCamerasInfo()},n.selectSource=function(){var e=t(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._checkLicense(),e.next=3,this._cameraMng.selectCamera(t);case 3:if(n=e.sent,this._runPlaying=!1,n){e.next=7;break}return e.abrupt("return",Promise.reject(j));case 7:return e.abrupt("return",null==n?void 0:n.getCameraInfo());case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.closeSource=function(){var e=t(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._runPlaying=!1,t=this._cameraMng.getCurrentCamera())return t=t.getCameraInfo(),this._cameraMng.closeCamera(),e.abrupt("return",t);e.next=6;break;case 6:return e.abrupt("return",Promise.reject(B));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getCurrentSource=function(){var e=t(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._cameraMng.getCurrentCamera())return e.abrupt("return",t.getCameraInfo());e.next=3;break;case 3:return e.abrupt("return",null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getCurrentResolution=function(){var e=t(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._cameraMng.getCurrentCamera())return e.abrupt("return",t.getCurrentResolution());e.next=3;break;case 3:return e.abrupt("return",Promise.reject(B));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getResolution=function(){var e=t(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._cameraMng.getCurrentCamera())return e.abrupt("return",t.getResolutions());e.next=3;break;case 3:return e.abrupt("return",Promise.reject(B));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.setResolution=function(){var e=t(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._cameraMng.getCurrentCamera())return Je(t),e.abrupt("return",n.setResolution(t.width,t.height));e.next=5;break;case 5:return e.abrupt("return",Promise.reject(B));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getVideoSetting=function(){var e=this._cameraMng.getCurrentCamera();return e?e.getVideoSetting():($e(this._oPub,B),null)},n.toggleCamera=function(){var e=t(r().mark((function e(t,n){var i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this._cameraMng.getCurrentCamera())return e.abrupt("return",i.toggleCamera(t,n,this._cameraMng));e.next=3;break;case 3:return e.abrupt("return",Promise.reject(B));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.show=function(){return!!this._container&&this.bindView()},n.isHidden=function(){return!this._container},n.hide=function(){this.unbindView()},n.getAreaDetectCallback=function(){return this._areaDetectCallback},n.getPerspectiveCallback=function(){return this._perspectiveCallback},n.getLicenseCallback=function(){return this._licenseCallback},n.getSavePhotoCallback=function(){return this._savePhotoCallback},n.getInsertPhotoCallback=function(){return this._insertPhotoCallback},n.getRemovePhotoCallback=function(){return this._removeImageCallback},n.getChangeIndexCallback=function(){return this._changeIndexCallback},n.getFreeHandle=function(){return this._freeCallback},n.getLoadCallback=function(){return this._loadCallback},n.bindAreaDetectFunction=function(e){return!!Ye(e)&&(this._areaDetectCallback=e,!0)},n.bindPerspectiveFunction=function(e){return!!Ye(e)&&(this._perspectiveCallback=e,!0)},n.bindLicenseCallback=function(e){return!!Ye(e)&&(this._licenseCallback=e,!0)},n.bindLoadHandle=function(e){return!!Ye(e)&&(this._loadCallback=e,!0)},n.bindFilterHandleList=function(e){return!!Ke(e)&&(this._filterHandleList=e,!0)},n.bindFreeHandle=function(e){return!!Ye(e)&&(this._freeCallback=e,!0)},n.bindSavePhotoCallback=function(e){return!!Ye(e)&&(this._savePhotoCallback=e,!0)},n.bindInsertPhotoCallback=function(e){return!!Ye(e)&&(this._insertPhotoCallback=e,!0)},n.bindRemovePhotoCallback=function(e){return!!Ye(e)&&(this._removeImageCallback=e,!0)},n.bindChangeIndexCallback=function(e){return!!Ye(e)&&(this._changeIndexCallback=e,!0)},n.showDocumentScanPage=function(){var e=t(r().mark((function e(n,i){var o,a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n={}),this._checkLicense(),this.captureLoop||(this.captureLoop=new Zn(this)),o=this._uiRouters.showDocumentScanPage(n,i,this),a=this,s=function(){var e=t(r().mark((function e(t,n,i){var s,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=o.insertDataByIndex(t,n,i),u={action:"add",fileName:o.getFileName(),fromViewerBufferChanged:!1},e.next=4,a.syncFile(u,[s]);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),this.bindInsertPhotoCallback(s),s=function(){var e=t(r().mark((function e(t,n){var i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.removeDataByIndex(t,n),i={action:"remove",fileName:o.getFileName(),fromViewerBufferChanged:!1},e.next=4,a.syncFile(i);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.bindRemovePhotoCallback(s),e.next=11,o.playVideo();case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.showInsertPage=function(){var e=t(r().mark((function e(t,n){var i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t={}),this._checkLicense(),i=this._uiRouters.showInsertPage(t,n,this),e.next=5,i.playVideo();case 5:return e.abrupt("return",i);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.showDocumentEditPage=function(e,t){return this._checkLicense(),this._uiRouters.showDocumentEditPage(e,t,this)},n.showCropPage=function(e,t){return this._checkLicense(),this._uiRouters.showCropPage(e,t,this)},n.navigateToPage=function(){var e=t(r().mark((function e(t,n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._uiRouters.navigateTo(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.destroyRemovedPages=function(){return this._uiRouters.destroyRemovedPages()},n.navigateBack=function(){var e=t(r().mark((function e(t,n){var i,o,a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n=!0),i=s=!0,1==(t=void 0===t?1:t)&&(i=s=!1),this._uiRouters.navigatePopPageSync(t,s),e.next=7,this._uiRouters.resetCurrentPageAfterPopPage(i);case 7:if(o=e.sent,a=this._uiRouters.getRemovedPages(),1!=t){e.next=14;break}if(o)return e.next=13,o.show();e.next=13;break;case 13:a[0].hide();case 14:if(n&&this._uiRouters.destroyRemovedPages(),(!o||o instanceof kt)&&this._cameraMng.getCurrentCamera()&&this.closeSource(),!o){e.next=20;break}o instanceof kt&&(this.bindView(s=o.element.children[1]),o.pageName==M&&o.getDcs().emit("focusPage")),e.next=22;break;case 20:return this.unbindView(),e.abrupt("return",[]);case 22:return e.abrupt("return",a);case 23:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.redirectToHome=function(){var e=t(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._uiRouters.redirectToHome());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.closeAllPages=function(){var e;this._uiRouters.closeAllPages(),null!=(e=this._container)&&e.classList.remove(g.relative),this._cameraMng.getCurrentCamera()&&this.closeSource(),document.body.classList.remove(g.overflowHidden)},n._checkLicense=function(){return this._licenseCallback&&0!==this._licenseCallback().errorCode&&$e(this._oPub,J),!0},n.showLoading=function(e){this._loadingNumber++,e&&Ee.log(["show loading: ",e,", num: ",this._loadingNumber].join("")),e=this.getCurrentPage();var t,n,r={background:this._loadingConfig.background};e instanceof Ht?(t=(t=null==(t=e.options)||null==(t=t.documentEditorSettings)?void 0:t.bodyStyle)||et(this.config.documentEditorSettings,"bodyStyle"),e.options&&e.options.documentEditorSettings&&(r.wrapperEl=e.options.documentEditorSettings.element,r.wrapperEl&&(r.confined=!0))):e instanceof kt&&(t=(t=null==(n=e.options)||null==(n=n.scannerViewer)?void 0:n.bodyStyle)||et(this.config.scannerViewer,"bodyStyle"),e.options&&e.options.scannerViewer&&(r.wrapperEl=e.options.scannerViewer.element,r.wrapperEl&&(r.confined=!0))),t&&Xe(t.loaderBarSource)&&""!=t.loaderBarSource&&(r.imageSource=t.loaderBarSource),this._loadingConfig.imageSource!==r.imageSource&&(this._loadingConfig.imageSource=r.imageSource,o.Lib.hideMask()),o.Lib.showMask(r)},n.setLoadingNumber=function(e){this._loadingNumber=e},n.hideLoading=function(e){this._loadingNumber--,e&&Ee.log(["hide loading: ",e,", num: ",this._loadingNumber].join("")),this._loadingNumber<1&&(o.Lib.hideMask(),this._loadingNumber=0)},n.getDetectArea=function(e){return de(e,this)},n.filterHandler=function(){var e=t(r().mark((function e(t,n){var i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=et(this.config,"documentEditorSettings.filter"),e.abrupt("return",function(){return ge.apply(this,arguments)}(this,t,this._filterHandleList,i=i.valueList,n));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.filterHandlerByIImageData=function(){var e=t(r().mark((function e(t,n,i){var o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){return fe.apply(this,arguments)}(t,n,this._filterHandleList,o=(void 0===(o=(void 0===(o=this.config.documentEditorSettings)?{}:o).filter)?{}:o).valueList,i));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),n.packageBlobItemFromIImageData=function(e,t,n,r,i){return oe(e,this,t=void 0!==t&&t,n=void 0!==n&&n,r=void 0!==r&&r,null,i)},n.on=function(e,t){this._oPub.on(e,t)},n.once=function(e,t){this._oPub.once(e,t)},n.off=function(e,t){this._oPub.off(e,t)},n.emit=function(e){for(var t,n=arguments.length,r=new Array(1<n?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=this._oPub).emit.apply(t,[e].concat(r))},n.getCurrentPage=function(){return this._uiRouters.currentPage},n.getPreviousPage=function(){return this._uiRouters.previousPage},n.getPreviousPageByPage=function(e){for(var t=this._uiRouters.path,n=-1,r=0;r<t.length;r++)if(e==t[r]){n=r;break}return 0<n?t[n-1]:null},n.dispose=function(){var e;document.removeEventListener("click",nr),window.removeEventListener("focus",ir),window.removeEventListener("blur",rr),qn.clear(),$n.clear(),(this._container=null)!=(e=this._cameraView)&&e.dispose(),(this._cameraView=null)!=(e=this._cameraMng)&&e.destroy(),(this._cameraMng=null)!=(e=this._uiRouters)&&e.closeAllPages(),(this._uiRouters=null)!=(e=this.captureLoop)&&e.dispose(),this.captureLoop=null,this._areaDetectCallback=null,this._perspectiveCallback=null,this._licenseCallback=null,this._filterHandleList=[],this._savePhotoCallback=null,this._insertPhotoCallback=null,this._removeImageCallback=null,this._changeIndexCallback=null,this._freeCallback=null,this._loadCallback=null},n.addGlobalClickEvent=function(e,t){var n;Ye(t)&&(n=this,qn.set(e,(function(e){t(e,n)&&n.removeGlobalClickEvent(e)})))},n.removeGlobalClickEvent=function(e){qn.delete(e)},n.addGlobalBlurEvent=function(e,t){var n;Ye(t)&&(n=this,$n.set(e,(function(e){t(e,n)&&n.removeGlobalBlurEvent(e)})))},n.removeGlobalBlurEvent=function(e){$n.delete(e)},n.addGlobalFocusEvent=function(e,t){var n;Ye(t)&&(n=this,er.set(e,(function(e){t(e,n)&&n.removeGlobalBlurEvent(e)})))},n.removeGlobalFocusEvent=function(e){er.delete(e)},n.getCameraManage=function(){return this._cameraMng},n.isRunPlaying=function(){return this._runPlaying},n.setSavedFilename=function(e){this._savedFilename=e},n.getSavedFilename=function(){return this._savedFilename},n.setExternalViewerUid=function(e){e&&(this._externalViewerUid=e)},n.getExternalViewerUid=function(){return this._externalViewerUid},n.openSavedFile=function(e){var t=this.getSavedFilename();return t?(Ee.log("open file: "+t),e.File.openFile(t)):(Ee.log("open file: "+E),e.File.openFile(E)),!0},n.clearExitFlag=function(){this._exiting=!1},n.exit=function(e){this._exiting=!0,this._freeCallback&&this._freeCallback(),document.body.classList.remove(g.overflowHidden),this._savedFilename&&(this._savedFilename=null)},n.syncFile=function(){var e=t(r().mark((function e(t,n){var i,o,a,s,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._exiting)return e.abrupt("return");e.next=2;break;case 2:if(o=!1,!t){e.next=13;break}if("remove"!=t.action){e.next=8;break}e.next=12;break;case 8:if("add"!=t.action){e.next=11;break}e.next=12;break;case 11:return e.abrupt("return");case 12:void 0!==t.fromViewerBufferChanged&&(o=t.fromViewerBufferChanged);case 13:if(!(0<(a=this._uiRouters.path).length)){e.next=60;break}if((u=a[a.length-1])instanceof Ht&&(s=u.getCurrentEditUid()),!((i=a[0])instanceof kt)){e.next=32;break}if(1<a.length)return i=a[1],e.next=23,i.syncFileFromExternalEvent(o,n);e.next=30;break;case 23:if(!(2<a.length)){e.next=30;break}if(!((i=a[2])instanceof Pn)){e.next=28;break}e.next=30;break;case 28:return e.next=30,i.syncFileFromExternalEvent(o,n);case 30:e.next=41;break;case 32:return e.next=34,i.syncFileFromExternalEvent(o);case 34:if(!(1<a.length)){e.next=41;break}if(!((i=a[1])instanceof Pn)){e.next=39;break}e.next=41;break;case 39:return e.next=41,i.syncFileFromExternalEvent(o);case 41:if(!u){e.next=60;break}if(Xe(s)&&""!=s){e.next=48;break}if(u instanceof Pn)return e.abrupt("return");e.next=47;break;case 47:s=u.getCurrentEditUid();case 48:if(!(u instanceof $t)){e.next=58;break}if(u.isInsertingImage())return e.next=52,u.clearInserting();e.next=54;break;case 52:e.next=56;break;case 54:return e.next=56,u.setEditUidAfterSyncImages(s);case 56:e.next=60;break;case 58:return e.next=60,u.setEditUidAfterSyncImages(s);case 60:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),e}();function nr(e){qn.forEach((function(e,t){Ye(e)&&e(t)}))}function rr(e){$n.forEach((function(e,t){Ye(e)&&e(t)}))}function ir(e){er.forEach((function(e,t){Ye(e)&&e(t)}))}function or(e,t,n){e&&e.emit("typeError",t,n)}var ar=function(e){function t(t){var n=e.call(this,t)||this;return n.errorMessage="ok",n.errorCode=0,n._on(b,n.updateErrorMessage.bind(s(n))),n._on("error",(function(e){var t=new Error(e.message);t.code=e.code,n._throwErr(t)})),n._on("typeError",(function(e,t){(e=new Error("Argument of type '"+e+"' is not assignable to parameter of type '"+t+"'.")).code=-4212,n._throwErr(e)})),n._on("valueError",(function(e,t){(e=new Error("The argument '"+e+"' is not valid for the parameter '"+t+"'")).code=-4213,n._throwErr(e)})),n}c(t,e);var n=t.prototype;return n.updateErrorMessage=function(e){this.errorMessage=e.message,this.errorCode=e.code},n._throwErr=function(e){throw this.updateErrorMessage(e),e},t}(n);n=function(e){function n(){return e.call(this)||this}c(n,e);var i=n.prototype;return i.showVideo=function(){var e=t(r().mark((function e(t,n){var i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.videoShown)return e.abrupt("return",Promise.reject(v));e.next=2;break;case 2:if(t){e.next=4;break}return e.abrupt("return",Promise.reject(I));case 4:if(this._dvs){e.next=6;break}return e.abrupt("return",Promise.reject(p));case 6:return this.videoShown=!0,(i=Ze(t,qe(A))).scannerViewer&&(this._dcs.config.scannerViewer=i.scannerViewer),i.documentEditorSettings&&(this._dcs.config.documentEditorSettings=i.documentEditorSettings),i.saveData=!0,i.fromInternal=!0,e.prev=12,this._dcs.clearExitFlag(),this._dcs.setSavedFilename(n),e.next=17,this._dcs.showDocumentScanPage(i,this._dvs);case 17:e.next=23;break;case 19:throw e.prev=19,e.t0=e.catch(12),this.videoShown=!1,e.t0;case 23:return this.videoShown=!0,e.next=26,this._dcs.getCurrentResolution();case 26:return e.abrupt("return",e.sent);case 27:case"end":return e.stop()}}),e,this,[[12,19]])})));return function(t,n){return e.apply(this,arguments)}}(),i.closeVideo=function(){this._dcs.closeAllPages(),this._dcs.exit(this._dvs)},n}(mt=function(e){function t(){var t=e.call(this,new ut)||this;return t.Error=null,t.videoShown=!1,t._dvs=null,t._dcs=null,t.Error=new ar(t._oPub),t._dcs=new tr(t._oPub),t}c(t,e);var n=t.prototype;return n.notBindCamera=function(){return!this._dvs},n.bindCamera=function(e,t){var n=this._dcs.getLicenseCallback();if(n&&0!==n().errorCode)return this._e(_),!1;(this._dvs=t).ViewControl.bindViewUiConstructor(e),this._dcs.off("video-closed"),this._dcs.off("video-error");var r=this;return this._dcs.on("video-closed",(function(){var e;r.videoShown=!1,ke(r._dcs),null!=(e=t._oPub)&&e.emit("video-closed")})),this._dcs.on("video-error",(function(e){t._oPub.emit("video-error",e)})),this._e(f),!0},n.bindAreaDetectFunction=function(e){return Ye(e)?(this._dcs.bindAreaDetectFunction(e),this._e(f),!0):(this._e(m),!1)},n.bindPerspectiveFunction=function(e){return Ye(e)?(this._dcs.bindPerspectiveFunction(e),this._e(f),!0):(this._e(m),!1)},n.bindLicenseCallback=function(e){return Ye(e)?(this._dcs.bindLicenseCallback(e),this._e(f),!0):(this._e(m),!1)},n.bindSavePhotoCallback=function(e){return Ye(e)?(this._dcs.bindSavePhotoCallback(e),this._e(f),!0):(this._e(m),!1)},n.bindInsertPhotoCallback=function(e){return Ye(e)?(this._dcs.bindInsertPhotoCallback(e),this._e(f),!0):(this._e(m),!1)},n.bindRemovePhotoCallback=function(e){return Ye(e)?(this._dcs.bindRemovePhotoCallback(e),this._e(f),!0):(this._e(m),!1)},n.bindFilterHandleList=function(e){return this._dcs.bindFilterHandleList(e),this._e(f),!0},n.bindFreeHandle=function(e){return Ke(e)?(this._dcs.bindFreeHandle(e),this._e(f),!0):(this._e(m),!1)},n._e=function(t){e.prototype._emit.call(this,b,t)},n.dispose=function(){var t;e.prototype.dispose.call(this),null!=(t=this.Error)&&t.dispose(),this.Error=null,this._dcs&&(this._dcs.exit(this._dvs),this._dcs.off("video-closed"),this._dcs.off("video-error"),this._dcs.dispose()),this._dcs=null},n.on=function(t,n){e.prototype._on.call(this,t,n)},n.emit=function(t){for(var n,r=arguments.length,i=new Array(1<r?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];(n=e.prototype._emit).call.apply(n,[this,t].concat(i))},n.off=function(t,n){e.prototype._off.call(this,t,n)},t}(n)),mt=function(e){function t(){return e.call(this)||this}c(t,e);var n=t.prototype;return n.createEditPage=function(e,t){if(!t)throw I;var n=t.fileName;if(!Xe(n)||""==n)throw y;var r=t.viewerUid;(t=Ze(t,qe(A))).initFileName=n,t.scannerViewer&&(this._dcs.config.scannerViewer=t.scannerViewer,delete t.scannerViewer);var i,o,a=!0;return t.documentEditorSettings&&(this._dcs.config.documentEditorSettings=t.documentEditorSettings,(void 0===(o=t.documentEditorSettings.defaultViewerName)?R:o).toLowerCase()==R.toLowerCase()?(i="crop",Xe(o=null==(o=this._dcs.config)||null==(o=o.documentEditorSettings)||null==(o=o.cropViewer)?void 0:o.visibility)&&"hidden"==o.toLowerCase()&&(a=!1)):i="edit"),this._dcs.setSavedFilename(n),this._dcs.setExternalViewerUid(r),t.saveData=!0,t.fromInternal=!1,t.curIndex=e,t.doFillData=!0,this._dcs.clearExitFlag(),"crop"==i&&a?this._dcs.showCropPage(t,this._dvs):this._dcs.showDocumentEditPage(t,this._dvs)},n.syncFile=function(e){this._dcs.syncFile(e)},n.removeEditPage=function(e){try{ke(this._dcs),this._dcs.closeAllPages(),this._dcs.stop(),this._dcs.exit(null),e.isDestroyed||e.destroy()}catch(e){return!1}return!0},t}(mt),window.Dynamsoft||(window.Dynamsoft={}),window.Dynamsoft.CameraViewer=tr,window.Dynamsoft.CameraModel=n,window.Dynamsoft.DocumentEditManager=mt}()}function i(e){var t=r[e];return void 0!==t||(t=r[e]={exports:{}},n[e](t,t.exports,i)),t.exports}})),Z.AddonReady((function(e,t){var n;e.product.bHTML5Edition&&!Z.navInfoSync.bIE&&(e.DynamicLoadAddonFuns&&e.DynamicLoadAddonFuns.push((function(t){function n(){this._stwain=t,this._viewer=null}n.prototype._getCameraViewer=function(){return null==this._viewer&&(e.log("camera addon: bind viewer."),this._viewer=new Z.CameraViewer,this._stwain._ImgManager.getWebViewer().bindCameraForCameraManager()),this._viewer},n.prototype._checkWasmAndLic=function(){var t=!0;return e.detect.wasmScriptLoaded||(Z.DWT.UseService&&!Z.DWT.UseCameraAddonWasm?e.Errors.WasmNotLoaded_UseWasmFalse(this._stwain):e.Errors.WasmNotLoaded(this._stwain),t=!1),e.License.checkProductKey(this._stwain,{Webcam:!0},!0)||(e.log("camera addon: check camera license failed."),t=!1),t&&!e.License.checkProductKey(this._stwain,{Webcam:!0,Wasm:!0},!0)&&(e.log("camera addon: check camera wasm license failed."),t=!1),!t&&{code:this._stwain._errorCode,message:this._stwain._errorString}},n.prototype.getSourceList=function(){var t=this._checkWasmAndLic();return t?e.Promise.reject(t):this._getCameraViewer().getSourceList()},n.prototype.selectSource=function(t){var n=this._checkWasmAndLic();return n?e.Promise.reject(n):(this._getCameraViewer().hide(),this._getCameraViewer().selectSource(t))},n.prototype.closeSource=function(){var t=this._checkWasmAndLic();return t?e.Promise.reject(t):(this._getCameraViewer().hide(),t=this._getCameraViewer().closeSource(),this._stwain._ImgManager.getWebViewer().SetWidth(this._stwain._ImgManager.getWebViewer().GetWidth()),t)},n.prototype.play=function(t,n,r){var i,o,a=this._checkWasmAndLic();return a?e.Promise.reject(a):this._stwain._ImgManager.getWebViewer()._imageEditorInner&&this._stwain._ImgManager.getWebViewer()._imageEditorInner.bShowImageEditForFullScreen?(e.Errors.ImageEditorOpenCannotPlayVideo(this._stwain),e.Promise.reject({code:this._stwain._errorCode,message:this._stwain._errorString})):((a=t)||(this._stwain._ImgManager.getWebViewer().myViewer.bOnlyShowThumbnailsView||!this._stwain._ImgManager.getWebViewer().myViewer.showMain?(t=e.one(["#showImageArea",this._stwain._ImgManager.getWebViewer().GetIdPostfix()].join("")))&&0<t.length&&t[0].className.indexOf("DVS_disabled")<0&&(a=t[0]):(t=e.one(["#container",this._stwain._ImgManager.getWebViewer().GetIdPostfix()].join("")))&&0<t.length&&t[0].className.indexOf("DVS_disabled")<0&&(a=t[0])),a?("object"==typeof n&&(i=n.width,o=n.height),(a=a&&"DIV"==a.nodeName?a:document.getElementById(a)).offsetHeight||a.scrollHeight||a.clientHeight||(a.style.height="200px"),a.offsetWidth||a.scrollWidth||a.clientWidth||(a.style.width="200px"),this._getCameraViewer().show()):((t=this._getCameraViewer())&&t.hide(),this._stwain._ImgManager.getWebViewer().render()),e.log("camera addon: play."),e.isUndefined(r)&&(r=!1),this._getCameraViewer().play(a,i,o,r))},n.prototype.pause=function(){return e.log("camera addon: pause."),this._getCameraViewer().pause()},n.prototype.resume=function(){return e.log("camera addon: resume."),this._getCameraViewer().resume()},n.prototype.getStatus=function(){return e.log("camera addon: get status."),this._getCameraViewer().getStatus()},n.prototype.capture=function(){var t=this._checkWasmAndLic(),n=this._stwain,r=n.GetCurrentDocumentName();return t?e.Promise.reject(t):(""==r&&(r=n._ImgManager.getWebViewer().GetDefaultFileName()),e.log("camera addon: start capture."),this._getCameraViewer().capture().then((function(t){return e.log("camera addon: captured."),new e.Promise((function(i,o){var a=t.imageData||t.blob,s=-1,u=Z.DWT.EnumDWT_ImageType;n._bLocalService?(e.isString(a.type)&&("application/pdf"==a.type?s=u.IT_PDF:"image/png"==a.type?s=u.IT_PNG:"image/jpeg"==a.type||"image/jpg"==a.type?s=u.IT_JPG:"image/bmp"==a.type?s=u.IT_BMP:"image/tiff"==a.type||"image/tif"==a.type?s=u.IT_TIF:"image/jp2"==a.type&&(s=u.IT_J2K)),n.__captureImage(a,s,(function(){e.log("camera addon: loaded image from capture."),i(a)}),(function(t,n){e.log("camera addon: failed to load image from capture."),o({code:t,message:n})}))):n._innerSendToMobile("LoadImageFromBinary",[a,!0,null,r],0,(function(){e.log("camera addon: loaded image from capture."),i(a)}),(function(t,n){e.log("camera addon: failed to load image from capture."),o({code:t,message:n})}))}))})))},n.prototype.stop=function(){this._getCameraViewer().hide(),e.log("camera addon: stop.");var t=this._getCameraViewer().stop();return this._stwain._ImgManager.getWebViewer().SetWidth(this._stwain._ImgManager.getWebViewer().GetWidth()),this._stwain._ImgManager.getWebViewer().render(),t},n.prototype.show=function(){return e.log("camera addon: show."),this._getCameraViewer().show()},n.prototype.hide=function(){return e.log("camera addon: hide."),this._getCameraViewer().hide()},n.prototype.getCurrentResolution=function(){return e.log("camera addon: get current resolution."),this._getCameraViewer().getCurrentResolution()},n.prototype.getCurrentSource=function(){return e.log("camera addon: get current source."),this._getCameraViewer().getCurrentSource()},n.prototype.getResolution=function(){var t=this._checkWasmAndLic();return t?e.Promise.reject(t):(e.log("camera addon: get resolution."),this._getCameraViewer().getResolution())},n.prototype.setResolution=function(t){var n=this._checkWasmAndLic();return n?e.Promise.reject(n):(e.log("camera addon: set resolution."),this._getCameraViewer().setResolution(t))},n.prototype.showVideo=function(t,n,r,i){var o=this._checkWasmAndLic();return o?e.Promise.reject(o):(this._getCameraViewer(),e.log("camera addon: show video."),this._stwain._ImgManager.getWebViewer().showVideo(t,n,r,i))},n.prototype.scanDocument=function(t){var n=this._checkWasmAndLic();return n?e.Promise.reject(n):(this._getCameraViewer(),e.log("camera addon: scan document."),this._stwain._ImgManager.getWebViewer().showVideoEx(t))},n.prototype.closeVideo=function(){var t=this._checkWasmAndLic();return t?e.Promise.reject(t):(e.log("camera addon: close video."),this._stwain._ImgManager.getWebViewer().closeVideo())},n.prototype.on=function(t,n){"video-closed"!=t&&"video-error"!=t?e.Errors.EventNotExist(this._stwain):e.isFunction(n)?(e.log("camera addon: add event "+t),this._stwain._ImgManager.getWebViewer().camera_on(t,n)):e.Errors.CallbackNotAFunction(this._stwain)},n.prototype.off=function(t,n){"video-closed"!=t||"video-error"!=t?e.Errors.EventNotExist(this._stwain):e.isUndefined(n)?this._stwain._ImgManager.getWebViewer().off(t):e.isFunction(n)?(e.log("camera addon: remove event "+t),this._stwain._ImgManager.getWebViewer().off(t,n)):e.Errors.CallbackNotAFunction(this._stwain)},t.__addon=t.__addon||{},t.__addon.Camera=new n})),n=[Z.DWT.ResourcesPath,"/addon/dynamsoft.webtwain.addon.camera.css",e.timestamp].join(""),e.getCss(n))})),function(e){e.DWT||(e.DWT={}),e.Lib||(e.Lib={})}(Z=window.Dynamsoft||{}),Z.aryAddonReadyFun=Z.aryAddonReadyFun||[],Z.AddonReady=Z.AddonReady||function(e){Z.aryAddonReadyFun.push(e)},Z.AddonReady((function(e,t){function n(){var e,t=!1,n=Z.navInfoSync.bMobile;return Z.DWT&&(t=!1===Z.DWT.UseLocalService),Z.navInfo&&(e=Z.navInfo,n=n||e.bPad||e.biPhone||e.biPad),t||n}Z.DWT.EnumTransferErrorCode={TRANS_OK:0,TRANS_URL_MALFFORMAT:1,TRANS_FAILED_RESOLVE_PROXY:2,TRANS_FAILED_RESOLVE_HOST:3,TRANS_FAILED_CONNECT:4,TRANS_REMOTE_ACCESS_DENIED:5,TRANS_PARTIAL_FILE:6,TRANS_UPLOAD_FAILED:7,TRANS_READ_FAILED:8,TRANS_OUT_OF_MEMORY:9,TRANS_REMOTE_FULL_DISK:10,TRANS_OPERATION_TIMEOUT:11,TRANS_SERVICE_ERROR_404:12,TRANS_SERVICE_ERROR_500:13,TRANS_SERVICE_ERROR_503:14,TRANS_SERVICE_ERROR:15,TRANS_NOT_SEND:16,TRANS_WAITFOR_SEND:17,TRANS_SENDING:18,TRANS_PAUSE:19,TRANS_FINISHED:20,TRANS_NULL_POINTER:21,TRANS_INVALID_ID:22,TRANS_Failed:23,TRANS_SERVICE_ERROR_MORE_THAN_500:24,TRANS_SERVICE_ERROR_LESS_THAN_200:25,TRANS_SERVICE_ERROR_MORE_THAN_300:26,TRANS_CANNOT_FINDFILE:27,TRANS_ABORT:28,TRANS_NOT_FINISHED:29,TRANS_TASK_PREPARE_INIT:30,TRANS_TASK_INIT:31,TRANS_BEYOND_MAXSIZE:32};var r=Z,i=Z.dcp,o=[1,7,2,"1026"],a="upload_"+o.join(""),s={Version:"1.0",HttpVersion:"1.1",ServerUrl:"",FileName:"",VERIFYPEER:!1,VERIFYHOST:!1,BlockSize:10240,ThreadNum:1,OnUploadTransferPercentage:function(e,t){},OnRunSuccess:function(e){},OnRunFailure:function(e,t,n){}},u=0,c="",l=function(){u=-2,c="Upload failed because the url to upload to is invalid."},d=function(e,t,n){u=-3,e?c="Upload cancelled.":(c=t&&""!=t?"Upload failed with error: "+t:"Upload failed.",t&&""!=t&&(c=c+"("+n+")"))},h=function(){u=-7,c="The file name is incorrect in the upload job."},g=function(){u=-2400,c="File uploader addon doesn't work under current settings."},f=function(){u=0,c=""};function m(){}function p(e){this.job=e}function _(e){this.job=e}m.prototype={runWaiting:0,CreateJob:function(){var t={HttpHeader:{},documents:[],formFields:[],bEvent:!1};return e.mix(t,s),t.SourceValue=new p(t),t.FormField=new _(t),t},Run:function(t){var n,i=this,o='""',s=t.ServerUrl,d="";if((!t.ar||!t.cu)&&r.DWT&&(r.DWT.ProductKey&&(o='"'+r.DWT.ProductKey+'"'),r.DWT.handshakeCode||r.DWT.organizationID))return Z.DWT.lglic().then((function(e){t.ar=e.ar,t.cu=e.cu,i.Run(t)})),!0;if(!e.isString(s)||""==s)return t.id=-1,l(),!t.bEvent&&e.isFunction(t.OnRunFailure)&&(t.bEvent=!0,t.OnRunFailure(t,u,c),t.bEvent=!1),!1;if(!t.documents||!e.isArray(t.documents)||t.documents.length<=0)return t.id=-1,u=-4,c="Upload failed because the file to upload has invalid content.",!t.bEvent&&e.isFunction(t.OnRunFailure)&&(t.bEvent=!0,t.OnRunFailure(t,u,c),t.bEvent=!1),!1;for(t.Url=s,delete t.ServerUrl,n=0;n<t.documents;n++){var g=t.documents[n];if(!e.isString(g.files)||""==g.files)return t.id=-1,h(),!t.bEvent&&e.isFunction(t.OnRunFailure)&&(t.bEvent=!0,t.OnRunFailure(t,u,c),t.bEvent=!1),!1;e.isString(g.remoteName)&&""!=g.remoteName||(g.remoteName="RemoteFile")}var f=t.SourceValue,m=(delete t.SourceValue,t.FormField),p=(delete t.FormField,e.stringify(t));return p=e.replaceAll(p,'"',"'"),t.ServerUrl=s,delete t.Url,t.SourceValue=f,t.FormField=m,s=['{"id":"',1,'","method":"RunUploadFile","version":"',a,'","parameter":[',o,',"',p,'"'],t.ar&&t.cu?(d=[',"',t.ar,'","',t.cu,'",0]}'].join(""),delete t.ar,delete t.cu,s.push(d)):s.push("]}"),f=s.join(""),i.runWaiting++,Z.FileUploader._sendCmd("RunUploadFile",f,(function(n){var o;i.runWaiting--,n&&((o=n.UploadId)&&0<o?(t.id=o,r.FileUploader.map[t.id]=t,r.FileUploader.ids.push(n.UploadId),t.OnUploadTransferPercentage&&t.OnUploadTransferPercentage(t,0)):(o=n.errorcode,n=n.errorstring,o&&n?(u=o,c=n):(u=-6,c="Cannot create an upload job."),!t.bEvent&&e.isFunction(t.OnRunFailure)&&(t.bEvent=!0,t.OnRunFailure(t,u,c),t.bEvent=!1)))}),(function(n,o,a){i.runWaiting--,r.FileUploader.parseHttpErrors(n,o,a),!t.bEvent&&e.isFunction(t.OnRunFailure)&&(t.bEvent=!0,t.OnRunFailure(t,u,c),t.bEvent=!1)})),!0},Cancel:function(t){return!t.id||t.id<0?(u=-5,c="Invalid upload job id.",!t.bEvent&&e.isFunction(t.OnRunFailure)&&(t.bEvent=!0,t.OnRunFailure(t,u,c),t.bEvent=!1),!1):(Z.FileUploader._sendCmd("DeleteUploadTask",'{"id":"1","method":"DeleteUploadTask","version":"'+a+'","parameter":["'+t.id+'"]}',(function(e){r.FileUploader.deleteJobById(t.id)}),(function(n,i,o){r.FileUploader.parseHttpErrors(n,i,o),!t.bEvent&&e.isFunction(t.OnRunFailure)&&(t.bEvent=!0,t.OnRunFailure(t,u,c),t.bEvent=!1)})),!0)},CancelAllUpload:function(){var e=r.FileUploader.ids,t='{"id":"1","method":"DeleteUploadTask","version":"'+a+'","parameter":["'+e.join(",")+'"]}';return 0<this.runWaiting?(u=-8,c="Can not cancel all jobs when at least one job is still being created.",!1):(this.runWaiting<0&&(this.runWaiting=0),e.length<=0||Z.FileUploader._sendCmd("DeleteUploadTask",t,(function(t){for(var n=0;n<e.length;n++)r.FileUploader.deleteJobById(e[n]);r.FileUploader.ids=[],r.FileUploader.map=[]}),(function(e,t,n){r.FileUploader.parseHttpErrors(e,t,n)})),!0)},OnUploadTransferPercentage:function(e,t){},OnRunSuccess:function(e){},OnRunFailure:function(e,t,n){}},(r.SourceValue=p).prototype.Add=function(t,n,r){var i=this.job;if(!e.isString(t)||""==t)return h(),void(!i.bEvent&&e.isFunction(i.OnRunFailure)&&(i.bEvent=!0,i.OnRunFailure(i,u,c),i.bEvent=!1));r=r||"RemoteFile",t=Z.Lib.replaceAll(t,"\\\\","\\\\"),i.documents.push({files:[t],fileName:n,remoteName:r})},r.FormField=_,r.FileUploader={ids:[],map:{},port:18625,protocol:"https://",ip:"127.0.0.1",wsUrl:"",running:!(_.prototype.Add=function(t,n){var r,i,o=n,a=t;if(null==o&&(o=""),!e.isString(a)||""==a||!e.isString(o))return!1;if(o=encodeURI(o),-1<(a=encodeURI(a)).indexOf("'")||-1<o.indexOf("'"))return!1;for(r=0;r<this.job.formFields.length;r++)if((i=this.job.formFields[r]).name==a)return i.value=o,!0;return this.job.formFields.push({name:a,value:o}),!0}),ws:null,nextLoopTime:600,deleteJobById:function(e){if(f(),n())return g(),!1;var t;if(e){for(t=0;t<r.FileUploader.ids.length;t++)if(e==r.FileUploader.ids[t]){r.FileUploader.ids.splice(t,1);break}var i=r.FileUploader.map[e];for(i.SourceValue.job=null,delete i.SourceValue,i.FormField.job=null,delete i.FormField,delete r.FileUploader.map[e],t=i.documents.length-1;0<=t;t--)i.documents.splice(t,1);for(t=i.formFields.length-1;0<=t;t--)i.formFields.splice(t,1);Z.FileUploader._sendCmd("DeleteUploadTask",'{"id":"1","method":"DeleteUploadTask","version":"'+a+'","parameter":["'+e+'"]}')}},_sendCmdByWS:function(t,n,o){var a;return r.FileUploader.ws?a=r.FileUploader.ws:(a=i.newWebsocket(r.FileUploader.wsUrl),r.FileUploader.ws=a),a.onopen=function(){1==a.readyState?(a.onopen=null,a.send(t)):0==a.readyState&&setTimeout(a.onopen,100)},a.onmessage=function(t){var r=t.data;if("object"==typeof r)return t=r=null,void o();t=r.replace(/\0/g,"");try{(t=e.parse(t))&&"result"in t?n(t.result):o()}catch(t){e.log(r),o()}r=null},a.onerror=function(t){t&&e.log("websocket error: "+t),o()},a.onclose=function(e){a.onclose=null,a.onerror=null,a.onmessage=null,r.FileUploader.ws=null},!0},_sendCmd:function(t,n,i,s){return Z.DWT.ConnectWithSocket?_sendCmdByWS(n,i,s):(t=[r.FileUploader.protocol,r.FileUploader.ip,":",r.FileUploader.port,"/dcp/",a,"/",t,"?type=1&dsver=",o.join(""),"&ts=",e.now()].join(""),e.ajax({url:t,method:"post",dataType:"json",processData:!1,data:n,onSuccess:i,onError:s}))},parseHttpErrors:function(t,n,r){var i;2==(t=t&&e.isArray(t)&&2<t.length?(i=t[1],t[2]):(i=n,r)).state&&0==t.status?"abort"===t.statusText?d(!0):l():d(!1,i,t.status)},loadHttpBlob:function(t,n,i,o,a,s,u){t={method:t,url:n,dataType:"blob",async:i,onSuccess:o,onError:function(t,n,i){r.FileUploader.parseHttpErrors(t,n,i),e.isFunction(a)&&a()}},e.isFunction(s)&&(t.beforeSend=function(e){e.addEventListener("progress",(function(e){delete e.totalSize,delete e.position,s(e)}),!1)}),e.ajax(t)},_OnPercentDone:function(){},Download:function(t,n,o){if(!e.isString(t))return u=-1,c="The zip file that contains the upload library (.dll) is invalid.",e.isFunction(o)&&o(u,c),!1;function a(){return u=-9,c="The zip file that contains the upload library (.dll) download failed.",e.isFunction(o)&&o(u,c),!1}return r.FileUploader.loadHttpBlob("get",t,!0,(function(e){i.loadZip(e,100,n,a)}),a,!1)},Init:function(t,o,a){if(f(),n())return g(),e.isFunction(a)&&a(u,c),!1;function s(){var e,t=Z.dcp.ports[0];t=Z.navInfoSync.bSSL?(e="https://",t[1]):(e="http://",t[0]),r.FileUploader.port=t,r.FileUploader.protocol=e,r.FileUploader.ip=i.host,r.FileUploader.wsUrl=i._getDcpWsPreUrl(0),r.FileUploader.running=!0,o(new m),setTimeout(r.FileUploader.StatusLoop,500)}Z.dcp.detect.bConnected?s():Z.dcp.checkDcpV3(Z.DWT.ProductKey,a,s)},Close:function(){Z.DWT.ConnectWithSocket&&r.FileUploader.ws&&(r.FileUploader.ws.close(),r.FileUploader.ws=null),r.FileUploader.running=!1},VersionInfo:function(t,i){return f(),n()?(g(),e.isFunction(i)&&i(u,c),!1):(Z.FileUploader._sendCmd("VersionInfo",'{"id":"1","method":"VersionInfo","version":"'+a+'","parameter":[]}',t,(function(t,n,o){r.FileUploader.parseHttpErrors(t,n,o),e.isFunction(i)&&i(u,c)})),!0)},StatusLoop:function(){return f(),n()?(g(),!1):(r.FileUploader.GetUploadStatus(),r.FileUploader.running&&setTimeout(r.FileUploader.StatusLoop,r.FileUploader.nextLoopTime),!0)},GetUploadStatus:function(){if(f(),r.FileUploader.ids.length<=0)return!0;if(n())return g(),!1;var t='{"id":"1","method":"GetUploadStatus","version":"'+a+'","parameter":["'+r.FileUploader.ids.join(",")+'"]}';return Z.FileUploader._sendCmd("GetUploadStatus",t,(function(t){if(e.isArray(t))for(var n=0;n<t.length;n++){var i=(c=t[n]).id,o=r.FileUploader.map[i],a=c.percentage,s=c.errorcode,u=c.response,c=c.errorstring;o&&(s==Z.DWT.EnumTransferErrorCode.TRANS_FINISHED?(o.OnUploadTransferPercentage(o,100,I(u)),!o.bEvent&&e.isFunction(o.OnRunSuccess)&&(o.bEvent=!0,o.OnRunSuccess(o,I(u)),o.bEvent=!1),r.FileUploader.deleteJobById(i)):s==Z.DWT.EnumTransferErrorCode.TRANS_OK||s==Z.DWT.EnumTransferErrorCode.TRANS_NOT_SEND||s==Z.DWT.EnumTransferErrorCode.TRANS_WAITFOR_SEND||s==Z.DWT.EnumTransferErrorCode.TRANS_SENDING||s==Z.DWT.EnumTransferErrorCode.TRANS_PAUSE||s==Z.DWT.EnumTransferErrorCode.TRANS_TASK_PREPARE_INIT||s==Z.DWT.EnumTransferErrorCode.TRANS_TASK_INIT?o.OnUploadTransferPercentage(o,a,I(u)):(!o.bEvent&&e.isFunction(o.OnRunFailure)&&(o.bEvent=!0,o.OnRunFailure(o,s,c,I(u)),o.bEvent=!1),r.FileUploader.deleteJobById(i)))}}),(function(e,t,n){})),!0}};var v=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1);function I(e){for(var t,n,r,i,o=e.length,a=0,s="";a<o;){for(;t=v[255&e.charCodeAt(a++)],a<o&&-1==t;);if(-1==t)break;for(;n=v[255&e.charCodeAt(a++)],a<o&&-1==n;);if(-1==n)break;s+=String.fromCharCode(t<<2|(48&n)>>4);do{if(61==(r=255&e.charCodeAt(a++)))return s}while(r=v[r],a<o&&-1==r);if(-1==r)break;s+=String.fromCharCode((15&n)<<4|(60&r)>>2);do{if(61==(i=255&e.charCodeAt(a++)))return s}while(i=v[i],a<o&&-1==i);if(-1==i)break;s+=String.fromCharCode((3&r)<<6|i)}return s}})),function(){var e=screen.width,t=e>550?550:e-10,n=e>680?680:e-10,r=0;function i(e,t,n){var r="flex:1;height:100%;display:flex;align-items:center;justify-content: center;font-size:14px";return Z.DWT.ShowDialog(500,0,["<div style=position:fixed;top:50%;left:50%;width:260px;transform:translate(-50%,-50%);background:#fff;z-index:999;border-radius: 5px;overflow: hidden;>",'<div style="padding:20px;font-size: 16px; color:black;height:70%;text-align:center;display:flex;align-items:center">',e,"</div>",'<div style="height:40px;background:#f5f5f5;display:flex;border-top: solid 1px #cdcccc" >','<span id="dynamsoft-confirm-dialog-yes" style="'+r+';color:#fe8e14;border-right: solid 1px #cdcccc">OK</span>','<span id="dynamsoft-confirm-dialog-no" style="'+r+'">Cancel</span></div>',"</div>"].join(""),!0,!0),new Promise((function(e){document.getElementById("dynamsoft-confirm-dialog-yes").addEventListener("click",(function(){Z.DWT.CloseDialog(),e(t)})),document.getElementById("dynamsoft-confirm-dialog-no").addEventListener("click",(function(){Z.DWT.CloseDialog(),e(n)}))}))}Z.OnWebTwainNotFoundOnWindowsCallback=function(e,t,n,r,i,o,a,s){Z._show_install_dialog(e,{default:t},n,Z.DWT.EnumDWT_PlatformType.enumWindow,r,i,o,a,!1,s)},Z.OnWebTwainNotFoundOnLinuxCallback=function(e,t,n,r,i,o,a,s,u,c){u||(u=Z.DWT.EnumDWT_PlatformType.enumLinux),Z._show_install_dialog(e,{default:t,deb:t,rpm:n},r,u,i,o,a,s,!1,c)},Z.OnWebTwainNotFoundOnMacCallback=function(e,t,n,r,i,o,a,s){Z._show_install_dialog(e,{default:t},n,Z.DWT.EnumDWT_PlatformType.enumMac,r,i,o,a,!1,s)},Z.dwt_change_install_url=function(e){var t=document.getElementById("dwt-btn-install");t&&(t.href=e)},Z.DWT_Reconnect=function(){var e=Z;if((new Date-r)/1e3>30){var t=document.getElementById("dwt-btn-install");t&&(t.innerHTML='Failed to connect to the service, have you run the setup?<br />If not, please run the setup and <a href="javascript:void(0)" onclick="Dynamsoft.DCP_DWT_onclickInstallButton()">click here to connect again</a>.')}else e.DWT?e.DWT.CheckConnectToTheService((function(){Z.DWT.ConnectToTheService()}),(function(){Z.DWT.NeedCheckWebTwainBySocket()?Z.DWT.CheckWebTwainBySocket((function(){Z.OnHTTPCorsError()}),(function(){setTimeout(Z.DWT_Reconnect,500)}),(function(){setTimeout(Z.DWT_Reconnect,500)})):setTimeout(Z.DWT_Reconnect,500)})):console.log("The Dynamsoft namespace is missing")},Z.DCP_DWT_onclickInstallButton=function(){return document.getElementById("dwt-btn-install")&&setTimeout((function(){var e=document.getElementById("dwt-install-url-div");e&&(e.style.display="none");var t=document.getElementById("dwt-btn-install");if(t&&"1"==t.getAttribute("html5")){var n=t.parentNode,i=document.createElement("div");i.id="dwt-btn-install",i.style.textAlign="center",i.style.paddingBottom="15px",i.innerHTML="Connecting to the service...",i.setAttribute("html5","1"),n.removeChild(t),n.appendChild(i),r=new Date,setTimeout(Z.DWT_Reconnect,10)}else(n=t.parentNode).removeChild(t)}),10),!0},Z._show_install_dialog=function(e,t,n,r,i,o,a,s,u,c){return Z._show_install_dialog_Detail(e,t,n,r,i,o,a,s,u,c)},Z._show_install_dialog_Detail=function(e,n,r,i,o,a,s,u,c,l){var d,h,g=Z,f=Z.DWT.EnumDWT_PlatformType,m=i==f.enumLinux||i==f.enumEmbed||i==f.enumChromeOS||i==f.enumHarmonyOS;if(Z.DWT.bNpm&&Z.navInfoSync.bFileSystem)return Z._show_online_download_dialog(n,r,i);d=['<div class="dynamsoft-dwt-dlg-title">',c?"Please update your document scanning service":"Please complete one-time setup","</div>"],g.DWT?(h=m||Z.navInfoSync.bFirefox?"RESTART":"REFRESH",d.push('<div class="dynamsoft-dwt-installdlg-iconholder"> '),d.push('<div class="dynamsoft-dwt-installdlg-splitline" style="left: 125px"></div>'),d.push('<div class="dynamsoft-dwt-installdlg-splitline" style="left: 283px"></div>'),d.push('<img style="margin: 0px 134px 0px 0px" src=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAgCAYAAAAMq2gFAAABOklEQVRIie2WTW6DMBCFH4h1l22VqmqPVUEvEJa9gRt6FDhDpfx0FdJj+Arx3nldhEjEdchgWlaM9CSwMZ/fzMgQvX0TwvA+ePOpIsniRIwZGIl/n/8AGs3RWKB4JA4STjUKBo1EivLtGakEkP7Ru6vbpcpONzFxPFsazQloZyxEmkDepsYk0JIhkZGwzngfWRKvd0u1Pwf93k1NoBjg5uN+pbZuHn0gEFgQ2AVAdgTefQVzU9e2nzaplKbMkEhnK2W9oAOAC9IHIO+Yd5U/rJX2QbocnVSSqARuqse1Ki9BumrUp+U1gXkXRAoyBDIC1jNnCWRPG2Wug2SFrkkUnvHieaPqaxCpo3bL104rLySQviDbpNA0Sgl4W9kXfU9vjWPho+ZaHCHfo6r/kumfYUBEL1/jeJpqFBw/d5aBU2kHOMQAAAAASUVORK5CYII= alt="download">'),d.push('<img style="margin: 2px 132px 2px 0px" src=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAA+klEQVRIid2SMWoCQRiFv3GnW7BII6ZPqeAlorewtBELsZdFOz2Q0VYkXQ6QA9iaIqU+mx2Y3QRd12WKffCY4WdmPt5jzPRT5PQOfOSHnky6/rnoqd/cJFt/0FB6I3UkWOVmZbz+GcyjLEjgeSjRzc3KuCMxzIC8fQwsbtTxqJan/jz+r7qZ4LWC2pzbgpkDmclBAG3gO011T0U+g9Mv8PayTY4u0UIQV5jGORYsAcz4oA7wBWR+SUWJAM5Az17E6gFIGUXA2goGJR8wAK1dUuiwVdECnpQZ7cOggiWy5zCcgIkCcbCX2iUKB6pfdfVLFAwUiNS4f6QaXQHE5K75dPBEiQAAAABJRU5ErkJggg== alt="install">'),d.push('<img src=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAADI0lEQVRIibWXTUhUURTHf+/NsxRCp3QGwhKT/MDoAyNo1apmNhYkodGmaFOWmUXQcpgo2gRN5kerllEGLWqjBqZGFH2BlSRJRVqCjpNjYOaUc1q80fnovZmnMx34w+Odc+///u+9595zlbPPBAuWBbiBPcAOoASwR3xB4BPwAngIdOV2en+n6lA5k5zYDjQBJwCHlRECk0Ar4Mvr9AbNglQRMMFBEYZE8IjgSBKXiIJIm6Gg23PQVHHT038U24DrQL1FhamsHThl7/LOxysGYmAT6BCoT/ifDuoFOqbcHlsyYp9ATQZJF1AjcC2OOMZbh9CQacYYnPzu8tQlKrYLNP8/zkU0B1weeyxxk4AzkySqYvjfKXp6opx8IiuAr1jP05S2bQ3sL4a29zA++4/bD6xTBVwCjkwp3eGAo+WQnw1b8w1jHAIuTQRXppTuWgt1JaAA90egc9Q01K0JVGWCdHch1BTr33c/Q89Y0vAqLQxl6ZJWF8He9RAWuPURHo+nbFKqiZC3XEIFOLAB9hTqpDc/wHO/paZ5ahgwQtEqOFIGNtXYD3Boo076R+DGe3jmN441gibCNAmplKXA8QooyAb7CmgZhLlw1G9T4GgZ7HRCKAytg/DO9AI0tGlVYDhxy4cEmgdhOgSVdjizGXI03acpcKxCJ/01D1ffwdvgktNuWBV4ZeQc/QmX30BgDkpz4dxmWL0SGjbB9gKY+QNX3sLQ9LLy/bVyuE+qgQdmc5K/Es5vAWcO/A5Dlgo/QjrpyMySpjfW9qkC3QIBs9FNzsGlARj7qZNOzcHlAfgys+zTzS/QpYq+pC3JgqdCOvnLSbg4AN9m0zpW20oeeUMLNZdPhIlktdSPEFwbhIlZ8xgL8Ivgg+i1GBRoTEOFVTRu7NUrz9gq844IrWmoSYXW0l7v7YXdpUn8bjsNrAVqLO9Pa3Yv0veiJRZ78wK1Au0ZnN52gdryvvjyVjMY3Tz6y6EfvTJ0LlPlBHC6oi86vfGKzdfktgjlIlwQIbCEtQxE2pSbkQIotT1i5ou1hUebi+ijbXXEN0X00dYNdFf2e0OpOvwLFunYK2i9bNwAAAAASUVORK5CYII= alt="scan">'),d.push('<div><span class="dynamsoft-dwt-installdlg-text" style="right: 125px">Download</span>'),d.push('<span class="dynamsoft-dwt-installdlg-text" style="right: 18px">Install</span>'),d.push('<span class="dynamsoft-dwt-installdlg-text" style="left: 105px">Scan</span>'),d.push("</div>"),d.push("</div>"),r&&m&&(d.push('<div style="margin:10px 0 0 60px;">'),d.push('<div id="dwt-install-url-div">'),Z.navInfo.bArm64||Z.navInfo.bMips64||Z.navInfoSync.bChromeOS||Z.navInfoSync.bHarmonyOS||(d.push('<div><input id="dwt-install-url-deb" name="dwt-install-url" type="radio" onclick="Dynamsoft.dwt_change_install_url(\''+n.deb+'\')" checked="checked" /><label for="dwt-install-url-deb">64 bit .deb (For Ubuntu/Debian)</label></div>'),d.push('<div><input id="dwt-install-url-rpm" name="dwt-install-url" type="radio" onclick="Dynamsoft.dwt_change_install_url(\''+n.rpm+'\')" /><label for="dwt-install-url-rpm">64 bit .rpm (For Fedora)</label></div>')),d.push("</div></div>")),d.push('<div><a id="dwt-btn-install" target="_blank" href="'),d.push(n.default),d.push('"'),d.push(r?' html5="1"':' html5="0"'),d.push(' onclick="Dynamsoft.DCP_DWT_onclickInstallButton()"><div class="dynamsoft-dwt-dlg-button">Download</div></a></div>'),r?o?(d.push('<div class="dynamsoft-dwt-dlg-tail" style="text-align:left; padding-left: 80px">'),d.push("If you still see the dialog after installing the scan service, please<br />"),d.push("1. Add the website to the zone of trusted sites.<br />"),d.push("IE | Tools | Internet Options | Security | Trusted Sites.<br />"),d.push("2. Refresh your browser."),d.push("</div>")):m&&(d.push('<div class="dynamsoft-dwt-dlg-tail">'),d.push('<div class="dynamsoft-dwt-dlg-red">After the installation, please <strong>'+h+"</strong>  your browser.</div>"),d.push("</div>")):(d.push('<div class="dynamsoft-dwt-dlg-tail" style="text-align:left; padding-left: 80px">'),o?(d.push("After the installation, please<br />"),d.push("1. Restart the browser<br />"),d.push('2. Allow "DynamicWebTWAIN" add-on to run by right clicking on the Information Bar in the browser.')):d.push('<div class="dynamsoft-dwt-dlg-red">After installation, please <strong>REFRESH</strong> your browser.</div>'),d.push("</div>")),g.DWT.ShowMessage(d.join(""),{width:t,headerStyle:1})):console.log("The Dynamsoft namespace is missing")},Z.OnWebTwainNeedUpgradeCallback=function(e,t,n,r,i,o,a,s){Z._show_install_dialog(e,t,n,r,i,o,a,s,!0,!0)},Z.OnWebTwainPostExecuteCallback=function(){Z.DWT?Z.DWT.OnWebTwainPostExecute():console.log("The Dynamsoft namespace is missing")},Z.OnRemoteWebTwainNotFoundCallback=function(e,n,r,i,o){Z.DWT?Z.DWT.ShowMessage((o?['<div class="dynamsoft-dwt-dlg-tips" style="text-align:left;font-size:1.4em">',"Failed to connect to the Dynamsoft Service, please make sure that the certificate is valid.<br /><br />","</div>"]:['<div class="dynamsoft-dwt-dlg-tips" style="text-align:left">',"Failed to connect to the Dynamsoft Service.<br />","Please make sure that the certificate is valid OR ","If you change the Dynamsoft.DWT.Host to your own IP/domain, do not forget to update the certificate accordingly.","</div>",'<div class="dynamsoft-dwt-dlg-tail">','<div class="dynamsoft-dwt-dlg-red">After installation, please REFRESH your browser.</div></div>']).join(""),{width:t,headerStyle:1}):console.log("The Dynamsoft namespace is missing")},Z.OnRemoteWebTwainNeedUpgradeCallback=function(e,n,r,i){Z.DWT?Z.DWT.ShowMessage(['<div class="dynamsoft-dwt-dlg-tips">',"Dynamsoft Service is outdated on the PC with IP/domain <br />",'"',n,'".<br />',"Please open the page on that PC to download and install it.","</div>",'<div class="dynamsoft-dwt-dlg-tail">','<div class="dynamsoft-dwt-dlg-red">After installation, please REFRESH your browser.</div></div>'].join(""),{width:t,headerStyle:1}):console.log("The Dynamsoft namespace is missing")},Z.OnWebTWAINDllDownloadSuccessful=function(){console.log("The Web TWAIN Module was downloaded successfully!")},Z.OnWebTWAINDllDownloadFailure=function(e,n,r){if(Z.DWT)return-2371==n&&Z.DWT.ShowMessage(['<div class="dynamsoft-dwt-dlg-tips">',r,"</div>",'<div class="dynamsoft-dwt-dlg-tail">','<div class="dynamsoft-dwt-dlg-red">You can try <strong>REFRESHING</strong> your browser to try again. <br /> If the issue persists, please contact the website administrator.</div></div>'].join(""),{width:t,headerStyle:1}),!0;console.log("The Dynamsoft namespace is missing")},Z.OnGetServiceUpdateStatus=function(e,t,n){"Update skipped"!=n&&console.log(n)},Z.OnWebTWAINModuleDownloadManually=function(e,t,n,r,i,o){return Z._show_install_dialog("",e,!0,t,n,r,i,o,!1,!1)},Z.OnLTSLicenseError=function(e){var t="",r=Z.DWT.licenseException,i=0;r&&(i=r.code),(-2440==i||-2441==i||-2443==i||-2446==i||e.indexOf("Internet connection")>-1||e.indexOf("Storage")>-1)&&(t='<div>You can register for a free 30-day trial <a href="https://www.dynamsoft.com/customer/license/trialLicense?product=dwt&deploymenttype=js" target="_blank" class="dynamsoft-major-color">here</a>. Make sure to select the product Dynamic Web TWAIN.</div>'),Z.DWT.ShowMessage([e,t].join(""),{width:n,headerStyle:2})},Z.OnLTSConnectionFailure=Z.OnLTSLicenseError,Z.OnLTSReturnedAnError=Z.OnLTSLicenseError,Z.OnLTSUUIDError=Z.OnLTSLicenseError,Z.OnLTSConnectionWarning=function(){var e=["Warning: You are seeing this dialog because Dynamic Web TWAIN has failed to connect to the License Tracking Server. ","A cached authorization is being used, and you can continue to use the software as usual. ","Please get connected to the network as soon as possible. ",Z.DWT.isPublicLicense()?'<a class="dynamsoft-major-color" href="https://www.dynamsoft.com/company/contact/">Contact Dynamsoft</a> ':"Contact the site administrator ","for more information."].join("");Z.DWT.ShowMessage(e,{width:n,caption:"Warning",headerStyle:2})},Z.OnLTSPublicLicenseMessage=function(e){Z.DWT.ShowMessage(e,{width:n,caption:"Warning",headerStyle:2})},Z.OnHTTPCorsError=function(){var e=["<div>The Connection from the insecure (HTTP) web page to the local 'Dynamsoft Service' failed!</div>",'<div style="margin-top:10px">To fix the issue, please update your website to HTTPS or refer to <br /><a target="_blank" href="https://www.dynamsoft.com/web-twain/docs/faq/http-insecure-websites-in-chromium-browser.html?ver=latest">this article</a> for other workarounds.</div>'].join("");Z.DWT.ShowMessage(e,{width:n,headerStyle:2})},Z.OnLicenseExpiredMessage=function(e,t){var r,i='<a target="_blank" href="https://www.dynamsoft.com/company/contact/">contact us</a>',o='<a target="_blank" href="https://www.dynamsoft.com/store/dynamic-web-twain/#DynamicWebTWAIN">online store</a>',a="https://www.dynamsoft.com/customer/license/trialLicense?product=dwt&utm_source=in-product";t>5||(r=t>0?['<div style="padding:0 0 10px 0">Kindly note your trial key is expiring in ',t<=1?"1 day":parseInt(t)+" days",". Two quick steps to extend your trial:</div>",'<div style="margin:0 0 0 10px">1. <a target="_blank" href="',a,'">Request a new trial key</a> and follow the instructions to set the new key</div>','<div style="margin:0 0 0 10px">2. Refresh your scan page and try again</div>','<div style="padding:10px 0 0 0">If you run into any issues, please ',i,".</div>",'<div style="padding:0">If you are ready to purchase a full license, please go to the ',o," or ",i,".</div>"].join(""):['<div style="padding:0">Sorry. Your trial key has expired on ',e,". You can purchase a full license at the ",o,".</div>",'<div style="padding:0">Or, you can try requesting a new trial key at <a target="_blank" href="',a,'">this page</a>.</div>','<div style="padding:0">If you need any help, please ',i,".</div>"].join("")),r&&Z.DWT.ShowMessage(r,{width:n,caption:"Warning",headerStyle:2})},Z.OnLicenseError=function(e,t){Z.DWT.ShowMessage(e,{width:n,headerStyle:2})},Z.OnSSLCertInfo=function(e){},Z.funcConfirmRemove=function(){return i("Are you sure you want to delete this image?",!0,!1)},Z.funcConfirmExit=function(e){return e?i(" Are you sure you want to exit without saving?",!0,!1):Promise.resolve(!0)},Z.funcConfirmExitAfterSave=function(e){},Z.funcConfirmCropViewerExit=function(e,t){return"mainViewer"==t&&e?i("Are you sure you want to exit without saving?",Z.DWT.EnumDWT_ConfirmExitType.Exit,Z.DWT.EnumDWT_ConfirmExitType.Cancel):Promise.resolve("documentScanPage"==t&&e?Z.DWT.EnumDWT_ConfirmExitType.SaveAndExit:Z.DWT.EnumDWT_ConfirmExitType.Exit)},Z.funcConfirmMainViewerExit=function(e,t){return""==t&&e?i("Are you sure you want to exit without saving?",Z.DWT.EnumDWT_ConfirmExitType.Exit,Z.DWT.EnumDWT_ConfirmExitType.Cancel):Promise.resolve("cropViewer"==t&&e?Z.DWT.EnumDWT_ConfirmExitType.SaveAndExit:Z.DWT.EnumDWT_ConfirmExitType.Exit)},Z._show_online_download_dialog=function(e,n,r){var i,o,a,s=Z.DWT.JSVersion.split(","),u=s[0]+"."+s[1],c=location.pathname;c=c.substring(0,c.lastIndexOf("/")+1),r==Z.DWT.EnumDWT_PlatformType.enumLinux&&(arm64||mips64)&&(arm64?e.default=getDebPath("arm64"):mips64&&(e.default=getDebPath("mips64el"))),i=["https://www.dynamsoft.com/web-twain/install-dynamsoft-service/?productId=1000001","&downloadLink=https://demo.dynamsoft.com/DWT/Resources/dist/DynamsoftServiceSetup_",u,".",a=e.default.substr(e.default.length-3)].join(""),o=Z.Lib.Path.normalize([c,e.default].join("")),r==Z.DWT.EnumDWT_PlatformType.enumWindow&&0==o.indexOf("/")&&(o=o.substr(1)),Z.DWT.ShowMessage(['<div class="dynamsoft-dwt-ltsdlg-body" style="padding:0 20px 20px 20px">',"<div>To support document scanning, please complete one-time installation of the DynamsoftServiceSetup.",a," on this machine.</div>","<div>You can download the file via this trust site:</div>",'<div><a id="dwt-btn-install" target="_blank" href="',i,'"><div class="dynamsoft-dwt-dlg-button">Open Site</div></a></div>','<div style="word-break: break-word;">Or, go to <br />',o," if the file exists.</div>","<div>After the installation, please <strong>REFRESH</strong>  your browser.<br /></div>","</div>"].join(""),{width:t,headerStyle:1,closeButton:!1})}}(),Z.DWT.AutoLoad=!1,Z.DWT.IfAddMD5InUploadHeader=!1,Z.DWT.IfConfineMaskWithinTheViewer=!1;var ne=Z,re=n("PdH4"),ie=n.n(re),oe=n("t0ZU"),ae=n("wd/R"),se=n.n(ae),ue=n("AytR"),ce=n("fXoL"),le=n("tk/3"),de=n("5eHb");let he=(()=>{class e{constructor(e,t){this.http=e,this.toastr=t,this.scannerContainerId=new o.a(null),this.scannedFileUploadedRes=new o.a(null),this.scannerList=new o.a(null),this.runningEnvironment=ne.Lib.env,this.bWASM=!0,this.bufferSubject=new a.a,this.bUseCameraViaDirectShow=!1,this.env=ue.a.production,this.bUseService=!1,this.DWObjectEx=null,this.devices=[],this.containerId="dwtcontrolContainer",this.productKey="t01529gIAAKJkJ7NE09gGSCFgBPt9loCdjfWTUQw5J8LIA1LCRHboDI5iKHohQFdrJqlAdbgOdUyHwlRUQ6lL/EBrAhzNDHpzQy03jMDAhmh7p76JM/wGjwF0AvgmZzBe+QJPPapRBwc4A5qAMY0f4DrkZ1YchPSAM6AJuA7pQDDJ1r9JNgWtMySFgDOgCZghHailwMzwAu5jlhM=",this.scanOptions={IfShowUI:!1,PixelType:"2",Resolution:200,IfFeederEnabled:!1,IfDuplexEnabled:!1,IfDisableSourceAfterAcquire:!0,IfGetImageInfo:!0,IfGetExtImageInfo:!0,IfShowFileDialog:!1,extendedImageInfoQueryLevel:0,IfAutomaticDeskew:!0,continuousScan:{visibility:!0,enableContinuousScan:!0},funcConfirmExitContinuousScan:!0,funcConfirmExit:!0}}setScannerContainerId(e){this.scannerContainerId.next(e)}getScannerContainerId(){return this.scannerContainerId.asObservable()}dynamSoftOnload(e=!1,t,n=null){this.containerId=t,ne.DWT.Containers=[{WebTwainId:"dwtObject",ContainerId:t,Width:"470px",Height:"250px"}],console.log("Scanner service"),ne.DWT.OnWebTwainReady=()=>{this.DWObject=ne.DWT.GetWebTwain(t)},ne.DWT.ProductKey=this.productKey,ne.DWT.ResourcesPath="assets/dwt-resources",ne.DWT.Load(),e&&this.acquireImage("scan",null,n)}acquireImage(e,t,n){return new Promise((e,t)=>{if(this.DWObject){let i=[];this.getDevices(),i=this.devices,console.log(i),this.scanOptions.SelectSourceByIndex=(null==i?void 0:i.length)?i.findIndex(e=>"FUJITSU"==(null==e?void 0:e.Manufacturer)):this.toastr.error("Supporting Scanner is not found"),(null==i?void 0:i.length)&&this.DWObject.AcquireImage(this.scanOptions,()=>Object(r.a)(this,void 0,void 0,(function*(){this.DWObject.SelectAllImages();let t=this.DWObject.SelectedImagesIndices;t&&this.toastr.info("Scan Completed Processing the documents.."),t.map((e,t)=>Object(r.a)(this,void 0,void 0,(function*(){let t=[e];yield this.uploadThroughAJAX(t,4,n)}))),e(!0)})),(e,n)=>{console.log(n,e),ie.a.fire({title:"Connection Error",text:"Please check the scanner connection",type:"warning",showConfirmButton:!0,confirmButtonText:"OK",showCancelButton:!0,icon:"warning",dangerMode:!0}).then(e=>{}),t(n)})}})}uploadThroughAJAX(e,t,n){this.DWObject.ConvertToBlob(e,t,(t,r)=>{let i=(new Date).toISOString().replace(/[\-\.\:ZT]/g,""),o="pos-@"+se()(n).format("YYYY-MM-DD")+"@"+i+"dwt.pdf";var a=new FormData;a.append("file",t,o),a.append("is_private","1"),a.append("folder","Home"),this.http.post(oe.a.uploadFile,a).subscribe(t=>{t&&(this.DWObject.RemoveImage(e),this.scannedFileUploadedRes.next(t))})},(e,t)=>{console.log(t)})}getDevices(){return new Promise((e,t)=>{var n;let r=this.DWObject;this.DWObjectEx&&(r=this.DWObjectEx);let i=null===(n=this.DWObject)||void 0===n?void 0:n.SourceCount,o=this.DWObject.GetSourceNames(!0);this.devices=o,i!==(null==o?void 0:o.length)&&t("Possible wrong source count!")})}}return e.\u0275fac=function(t){return new(t||e)(ce.pc(le.b),ce.pc(de.d))},e.\u0275prov=ce.Xb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);