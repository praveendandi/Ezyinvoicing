(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{aesy:function(t,e,c){"use strict";c.r(e),c.d(e,"TabletModule",(function(){return x}));var i=c("ofXK"),a=c("tyNb"),n=c("fXoL"),r=c("cp0P"),s=c("Kj3r"),l=c("eIep"),o=c("t0ZU"),d=c("1kSV"),h=c("tk/3"),g=c("5eHb"),u=c("3Pt+");function b(t,e){if(1&t&&(n.hc(0,"tr"),n.hc(1,"td"),n.cd(2),n.gc(),n.hc(3,"td"),n.cd(4),n.gc(),n.hc(5,"td"),n.cd(6),n.gc(),n.hc(7,"td"),n.cd(8),n.gc(),n.hc(9,"td"),n.cd(10),n.gc(),n.hc(11,"td"),n.cc(12,"span"),n.gc(),n.gc()),2&t){const t=e.$implicit;n.Nb(2),n.dd(null==t?null:t.index),n.Nb(2),n.ed(" ",null==t?null:t.device_name," "),n.Nb(2),n.ed(" ",null==t?null:t.tablet," "),n.Nb(2),n.ed(" ",null==t?null:t.ip_address," "),n.Nb(2),n.ed(" ",null==t?null:t.creation," ")}}function f(t,e){1&t&&(n.hc(0,"div",20),n.hc(1,"h5"),n.cd(2,"No Data Found"),n.gc(),n.gc())}function m(t,e){if(1&t){const t=n.ic();n.hc(0,"div"),n.hc(1,"p",26),n.sc("click",(function(){n.Qc(t);const e=n.wc(2);return e.filters.start=e.tabletList.length,e.filters.currentPage=e.filters.currentPage+1,e.updateRouterParams()})),n.cd(2," more "),n.gc(),n.gc()}}function p(t,e){if(1&t){const t=n.ic();n.hc(0,"div",21),n.hc(1,"div",22),n.hc(2,"select",23),n.sc("ngModelChange",(function(e){return n.Qc(t),n.wc().filters.itemsPerPage=e}))("change",(function(){return n.Qc(t),n.wc().checkPagination()})),n.hc(3,"option",24),n.cd(4,"20"),n.gc(),n.hc(5,"option",24),n.cd(6,"50"),n.gc(),n.hc(7,"option",24),n.cd(8,"100"),n.gc(),n.hc(9,"option",24),n.cd(10,"150"),n.gc(),n.hc(11,"option",24),n.cd(12,"500"),n.gc(),n.gc(),n.gc(),n.ad(13,m,3,0,"div",25),n.gc()}if(2&t){const t=n.wc();n.Nb(2),n.Ec("ngModel",t.filters.itemsPerPage),n.Nb(1),n.Ec("value",20),n.Nb(2),n.Ec("value",50),n.Nb(2),n.Ec("value",100),n.Nb(2),n.Ec("value",150),n.Nb(2),n.Ec("value",500),n.Nb(2),n.Ec("ngIf",t.tabletList.length<t.filters.totalCount)}}function v(t,e){1&t&&(n.hc(0,"small",48),n.cd(1,"Required"),n.gc())}function y(t,e){1&t&&(n.hc(0,"small",48),n.cd(1,"Required"),n.gc())}function P(t,e){1&t&&(n.hc(0,"small",48),n.cd(1,"Required"),n.gc())}function C(t,e){1&t&&(n.hc(0,"div"),n.hc(1,"small",48),n.hc(2,"b"),n.cd(3,"You have entered an invalid IP address!"),n.gc(),n.gc(),n.gc())}function N(t,e){if(1&t){const t=n.ic();n.hc(0,"div",27),n.hc(1,"h6"),n.hc(2,"b",28),n.cd(3),n.gc(),n.gc(),n.hc(4,"button",29),n.sc("click",(function(){return e.$implicit.dismiss("Cross click")})),n.hc(5,"span",30),n.cd(6,"\xd7"),n.gc(),n.gc(),n.gc(),n.hc(7,"div",31),n.hc(8,"form",32,33),n.sc("ngSubmit",(function(){n.Qc(t);const e=n.Oc(9);return n.wc().onSubmit(e)})),n.hc(10,"div",10),n.hc(11,"div",11),n.hc(12,"div",34),n.hc(13,"label",35),n.cd(14,"Tablet"),n.gc(),n.hc(15,"input",36,37),n.sc("ngModelChange",(function(e){return n.Qc(t),n.wc().tabletDetails.tablet=e})),n.gc(),n.ad(17,v,2,0,"small",38),n.gc(),n.gc(),n.hc(18,"div",11),n.hc(19,"div",34),n.hc(20,"label",39),n.cd(21,"Device Name"),n.gc(),n.hc(22,"input",40,41),n.sc("ngModelChange",(function(e){return n.Qc(t),n.wc().tabletDetails.device_name=e})),n.gc(),n.ad(24,y,2,0,"small",38),n.gc(),n.gc(),n.hc(25,"div",11),n.hc(26,"div",34),n.hc(27,"label",42),n.cd(28,"IP Address"),n.gc(),n.hc(29,"input",43,44),n.sc("change",(function(e){return n.Qc(t),n.wc().getPrinter(e)}))("ngModelChange",(function(e){return n.Qc(t),n.wc().tabletDetails.ip_address=e})),n.gc(),n.ad(31,P,2,0,"small",38),n.ad(32,C,4,0,"div",25),n.gc(),n.gc(),n.hc(33,"div",45),n.hc(34,"button",46),n.sc("click",(function(){return e.$implicit.dismiss("Cross click")})),n.cd(35,"Cancel"),n.gc(),n.hc(36,"button",47),n.cd(37,"Save"),n.gc(),n.gc(),n.gc(),n.gc(),n.gc()}if(2&t){const t=n.Oc(9),e=n.Oc(16),c=n.Oc(23),i=n.Oc(30),a=n.wc();n.Nb(3),n.ed("",a.viewType," Tablet"),n.Nb(12),n.Ec("ngModel",a.tabletDetails.tablet),n.Nb(2),n.Ec("ngIf",t.touched&&(null==e||null==e.errors?null:e.errors.required)),n.Nb(5),n.Ec("ngModel",a.tabletDetails.device_name),n.Nb(2),n.Ec("ngIf",t.touched&&(null==c||null==c.errors?null:c.errors.required)),n.Nb(5),n.Ec("ngModel",a.tabletDetails.ip_address),n.Nb(2),n.Ec("ngIf",t.touched&&(null==i||null==i.errors?null:i.errors.required)),n.Nb(1),n.Ec("ngIf",a.ipValid)}}class _{constructor(){this.itemsPerPage=20,this.currentPage=1,this.totalCount=0,this.start=0,this.search=""}}const M=[{path:"",component:(()=>{class t{constructor(t,e,c,i,a){this.modal=t,this.router=e,this.http=c,this.activatedRoute=i,this.toaster=a,this.filters=new _,this.onSearch=new n.q,this.tabletList=[],this.tabletDetails={},this.formData={}}ngOnInit(){this.getTabletData(),this.onSearch.pipe(Object(s.a)(500)).subscribe(t=>{this.tabletList=[],this.filters.start=0,this.filters.totalCount=0,this.updateRouterParams()})}getTabletData(){this.activatedRoute.queryParams.pipe(Object(l.a)(t=>{const e={filters:[]};this.filters.search&&e.filters.push(["device_name","like",`%${this.filters.search}%`]),e.limit_start=this.filters.start,e.limit_page_length=this.filters.itemsPerPage,e.order_by="`tabActive Tablets`.`creation` desc",e.fields=JSON.stringify(["name","creation","modified","modified_by","idx","tablet","ip_address","socket_id","uuid","device_name"]),e.filters=JSON.stringify(e.filters);const c=this.http.get(`${o.a.resource}/${o.b.tablet}`,{params:{fields:JSON.stringify(["count( `tabActive Tablets`.`name`) AS total_count"]),filters:e.filters}}),i=this.http.get(`${o.a.resource}/${o.b.tablet}`,{params:e});return Object(r.a)([c,i])})).subscribe(t=>{1==this.filters.currentPage&&(this.tabletList=[]);const[e,c]=t;this.filters.totalCount=e.data[0].total_count,c.data=c.data.map((t,e)=>(t&&(t.index=this.tabletList.length+e+1),t)),c.data&&(this.tabletList=0!==this.filters.start?this.tabletList.concat(c.data):c.data)})}updateRouterParams(){this.router.navigate(["home/tablet"],{queryParams:this.filters})}addtablet(t,e,c){this.tabletDetails={},this.viewType=e,"Edit"===e&&(this.tabletDetails=Object.assign({},c)),this.modal.open(t,{size:"md",centered:!0})}onSubmit(t){var e;if(console.log("===",t.value),"Edit"===this.viewType&&t.valid)this.http.put(`${o.a.resource}/${o.b.tablet}/${null===(e=this.tabletDetails)||void 0===e?void 0:e.name}`,t.value).subscribe(t=>{try{t.data&&(this.toaster.success("Saved"),this.modal.dismissAll(),this.getTabletData())}catch(e){console.log(e)}});else if(t.valid){t.value.doctype=o.b.tablet;const e=new FormData;e.append("doc",JSON.stringify(t.value)),e.append("action","Save"),this.http.post(""+o.a.fileSave,e).subscribe(t=>{try{t?(this.toaster.success("Saved"),this.modal.dismissAll(),this.getTabletData()):this.toaster.error(t._server_messages)}catch(e){console.log(e)}},e=>{t.form.setErrors({error:e.error.message})})}else t.form.markAllAsTouched()}getPrinter(t,e){var c;this.ValidateIPaddress(null===(c=t.target)||void 0===c?void 0:c.value)}ValidateIPaddress(t){return/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(t)?(this.ipValid=!1,!0):(this.ipValid=!0,!1)}checkPagination(){this.filters.currentPage=1,this.updateRouterParams()}}return t.\u0275fac=function(e){return new(e||t)(n.bc(d.k),n.bc(a.e),n.bc(h.b),n.bc(a.a),n.bc(g.d))},t.\u0275cmp=n.Vb({type:t,selectors:[["app-tablet"]],decls:40,vars:5,consts:[[1,"row","mb-3"],[1,"col-md-9","col-lg-9"],[1,"d-flex"],[1,"font-weight-bold","text-white","my-auto"],[1,"col-lg-3","col-md-3"],[1,"position-relative","mt-2","mt-lg-0","mt-md-0"],["type","search","placeholder","Search by Device Name",1,"form-control","pl-5",3,"ngModel","ngModelChange","keyup","search","keyup.enter"],["search",""],[1,"search"],[1,"ri-search-line"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-body","p-0"],[1,"table-responsive"],[1,"table","table-bordered"],[4,"ngFor","ngForOf"],["class","text-center py-3",4,"ngIf"],["class","d-flex pb-2 justify-content-between",4,"ngIf"],["tabletModal",""],[1,"text-center","py-3"],[1,"d-flex","pb-2","justify-content-between"],[1,"px-3"],["name","itemsPerPage","id","itemsPerPage",1,"custom-select",3,"ngModel","ngModelChange","change"],[3,"value"],[4,"ngIf"],[1,"text-right","pr-5","more","text-primary",3,"click"],[1,"modal-header"],[1,"text-capitalize"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"ngSubmit"],["form","ngForm"],[1,"form-group"],["for","tablet"],["id","tablet","type","text","name","tablet","required","",1,"form-control",3,"ngModel","ngModelChange"],["tablet","ngModel"],["class","text-danger",4,"ngIf"],["for","device_name"],["id","device_name","type","text","name","device_name","required","",1,"form-control",3,"ngModel","ngModelChange"],["device_name","ngModel"],["for","ip_address"],["id","ip_address","onkeypress","return (event.charCode !=8 && event.charCode ==0  || event.charCode==190 || event.charCode==110 || event.charCode==46 || (event.charCode >= 48 && event.charCode <= 57 ))","type","text","name","ip_address","required","",1,"form-control",3,"ngModel","change","ngModelChange"],["ip_address","ngModel"],[1,"text-right","col-md-12"],["type","button",1,"btn","btn-outline-primary",3,"click"],["type","submit",1,"btn","btn-primary","ml-3"],[1,"text-danger"]],template:function(t,e){if(1&t){const t=n.ic();n.hc(0,"section"),n.hc(1,"div",0),n.hc(2,"div",1),n.hc(3,"div",2),n.hc(4,"h4",3),n.cd(5,"Tablets"),n.hc(6,"small"),n.cd(7),n.gc(),n.gc(),n.gc(),n.gc(),n.hc(8,"div",4),n.hc(9,"div",5),n.hc(10,"input",6,7),n.sc("ngModelChange",(function(t){return e.filters.search=t}))("keyup",(function(){n.Qc(t);const c=n.Oc(11);return e.filters.search=c.value,e.onSearch.emit(e.filters)}))("search",(function(){return e.onSearch.emit(e.filters)}))("keyup.enter",(function(){return e.updateRouterParams()})),n.gc(),n.hc(12,"span",8),n.cc(13,"i",9),n.gc(),n.gc(),n.gc(),n.gc(),n.hc(14,"div",10),n.hc(15,"div",11),n.hc(16,"div",12),n.hc(17,"div",13),n.hc(18,"div",14),n.hc(19,"table",15),n.hc(20,"thead"),n.hc(21,"tr"),n.hc(22,"th"),n.cd(23,"S.No"),n.gc(),n.hc(24,"th"),n.cd(25,"Device Name"),n.gc(),n.hc(26,"th"),n.cd(27,"Tablet Name"),n.gc(),n.hc(28,"th"),n.cd(29,"IP Address"),n.gc(),n.hc(30,"th"),n.cd(31,"Creation"),n.gc(),n.hc(32,"th"),n.cd(33,"Actions"),n.gc(),n.gc(),n.gc(),n.hc(34,"tbody"),n.ad(35,b,13,5,"tr",16),n.gc(),n.gc(),n.ad(36,f,3,0,"div",17),n.ad(37,p,14,7,"div",18),n.gc(),n.gc(),n.gc(),n.gc(),n.gc(),n.gc(),n.ad(38,N,38,8,"ng-template",null,19,n.bd)}2&t&&(n.Nb(7),n.ed("(",e.filters.totalCount,")"),n.Nb(3),n.Ec("ngModel",e.filters.search),n.Nb(25),n.Ec("ngForOf",e.tabletList),n.Nb(1),n.Ec("ngIf",!e.tabletList.length),n.Nb(1),n.Ec("ngIf",e.tabletList.length))},directives:[u.b,u.i,u.l,i.o,i.p,u.r,u.m,u.t,u.u,u.j,u.k,u.q],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:8px;font-size:14px;border:1px solid rgba(221,218,218,.3)}.form-group[_ngcontent-%COMP%]{margin-bottom:10px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px}.more[_ngcontent-%COMP%]{text-decoration:underline;cursor:pointer}"]}),t})()}];let w=(()=>{class t{}return t.\u0275mod=n.Zb({type:t}),t.\u0275inj=n.Yb({factory:function(e){return new(e||t)},imports:[[a.i.forChild(M)],a.i]}),t})(),x=(()=>{class t{}return t.\u0275mod=n.Zb({type:t}),t.\u0275inj=n.Yb({factory:function(e){return new(e||t)},imports:[[i.c,w,u.d]]}),t})()}}]);