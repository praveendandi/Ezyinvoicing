(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{"5B7W":function(t,e,c){"use strict";c.r(e),c.d(e,"IpPrintersModule",(function(){return k}));var r=c("ofXK"),i=c("tyNb"),n=c("fXoL"),s=c("t0ZU"),a=c("wd/R"),o=c("Kj3r"),d=c("eIep"),l=c("cp0P"),h=c("1kSV"),g=c("tk/3"),u=c("5eHb"),p=c("3Pt+");const f=["printerModal"],m=function(t,e){return{"badge-success":t,"badge-danger":e}};function b(t,e){if(1&t){const t=n.ic();n.hc(0,"tr"),n.hc(1,"td"),n.cd(2),n.gc(),n.hc(3,"td"),n.cd(4),n.gc(),n.hc(5,"td"),n.cd(6),n.gc(),n.hc(7,"td"),n.cd(8),n.gc(),n.hc(9,"td"),n.cd(10),n.xc(11,"date"),n.gc(),n.hc(12,"td"),n.hc(13,"span",25),n.cd(14),n.gc(),n.gc(),n.hc(15,"td"),n.hc(16,"span",26),n.sc("click",(function(){n.Pc(t);const c=e.$implicit;return n.wc().addPrinter("edit",c)})),n.cd(17,"Edit"),n.gc(),n.gc(),n.gc()}if(2&t){const t=e.$implicit,c=e.index;n.Nb(2),n.dd(c+1),n.Nb(2),n.dd(null==t?null:t.printer_name),n.Nb(2),n.ed(" ",(null==t?null:t.printer_ip)||"N/A"," "),n.Nb(2),n.dd(null==t?null:t.port),n.Nb(2),n.ed(" ",n.yc(11,7,null==t?null:t.last_used)||""," "),n.Nb(3),n.Dc("ngClass",n.Ic(9,m,"Enable"===(null==t?null:t.status),"Disable"===(null==t?null:t.status))),n.Nb(1),n.ed(" ",(null==t?null:t.status)||"N/A","")}}function P(t,e){1&t&&(n.hc(0,"div",27),n.hc(1,"h5"),n.hc(2,"b"),n.cd(3,"No Data Found"),n.gc(),n.gc(),n.gc())}function v(t,e){if(1&t){const t=n.ic();n.hc(0,"div",28),n.hc(1,"div",29),n.hc(2,"select",30),n.sc("ngModelChange",(function(e){return n.Pc(t),n.wc().filters.itemsPerPage=e}))("change",(function(){return n.Pc(t),n.wc().checkPagination()})),n.hc(3,"option",31),n.cd(4,"20"),n.gc(),n.hc(5,"option",31),n.cd(6,"50"),n.gc(),n.hc(7,"option",31),n.cd(8,"100"),n.gc(),n.hc(9,"option",31),n.cd(10,"150"),n.gc(),n.hc(11,"option",31),n.cd(12,"500"),n.gc(),n.gc(),n.gc(),n.gc()}if(2&t){const t=n.wc();n.Nb(2),n.Dc("ngModel",t.filters.itemsPerPage),n.Nb(1),n.Dc("value",20),n.Nb(2),n.Dc("value",50),n.Nb(2),n.Dc("value",100),n.Nb(2),n.Dc("value",150),n.Nb(2),n.Dc("value",500)}}function D(t,e){1&t&&(n.hc(0,"small",59),n.cd(1,"Required"),n.gc())}function y(t,e){1&t&&(n.hc(0,"div"),n.hc(1,"small",59),n.hc(2,"b"),n.cd(3,"You have entered an invalid IP address!"),n.gc(),n.gc(),n.gc())}function C(t,e){1&t&&(n.hc(0,"small",59),n.cd(1,"Required"),n.gc())}function M(t,e){if(1&t){const t=n.ic();n.hc(0,"div",32),n.hc(1,"h6"),n.hc(2,"b",33),n.cd(3),n.gc(),n.gc(),n.hc(4,"button",34),n.sc("click",(function(){return e.$implicit.dismiss("Cross click")})),n.hc(5,"span",35),n.cd(6,"\xd7"),n.gc(),n.gc(),n.gc(),n.hc(7,"div",36),n.hc(8,"form",37,38),n.sc("ngSubmit",(function(){n.Pc(t);const e=n.Nc(9);return n.wc().onSubmit(e)})),n.hc(10,"div",12),n.hc(11,"div",13),n.hc(12,"div",39),n.hc(13,"label",40),n.cd(14,"Printer IP"),n.gc(),n.hc(15,"input",41,42),n.sc("change",(function(e){return n.Pc(t),n.wc().getPrinter(e)}))("ngModelChange",(function(e){return n.Pc(t),n.wc().formData.printer_ip=e})),n.gc(),n.ad(17,D,2,0,"small",43),n.ad(18,y,4,0,"div",44),n.gc(),n.gc(),n.hc(19,"div",13),n.hc(20,"div",39),n.hc(21,"label",45),n.cd(22,"Printer Port"),n.gc(),n.hc(23,"input",46,47),n.sc("ngModelChange",(function(e){return n.Pc(t),n.wc().formData.port=e})),n.gc(),n.gc(),n.gc(),n.hc(25,"div",13),n.hc(26,"div",39),n.hc(27,"label",48),n.cd(28,"Printer Name"),n.gc(),n.hc(29,"input",49,50),n.sc("ngModelChange",(function(e){return n.Pc(t),n.wc().formData.printer_name=e})),n.gc(),n.gc(),n.gc(),n.hc(31,"div",13),n.hc(32,"div",39),n.hc(33,"label",51),n.cd(34,"Status"),n.gc(),n.hc(35,"select",52,53),n.sc("ngModelChange",(function(e){return n.Pc(t),n.wc().contentChange(e)}))("ngModelChange",(function(e){return n.Pc(t),n.wc().formData.status=e})),n.hc(37,"option",54),n.cd(38,"Active"),n.gc(),n.hc(39,"option",55),n.cd(40,"In Active"),n.gc(),n.gc(),n.ad(41,C,2,0,"small",43),n.gc(),n.gc(),n.hc(42,"div",56),n.hc(43,"button",57),n.sc("click",(function(){return e.$implicit.dismiss("Cross click")})),n.cd(44,"Cancel"),n.gc(),n.hc(45,"button",58),n.cd(46,"Save"),n.gc(),n.gc(),n.gc(),n.gc(),n.gc()}if(2&t){const t=n.Nc(9),e=n.Nc(16),c=n.Nc(36),r=n.wc();n.Nb(3),n.ed("",r.viewType," Printer"),n.Nb(12),n.Dc("ngModel",r.formData.printer_ip),n.Nb(2),n.Dc("ngIf",t.touched&&(null==e||null==e.errors?null:e.errors.required)),n.Nb(1),n.Dc("ngIf",r.ipValid&&r.ipPrinterCheck),n.Nb(5),n.Dc("ngModel",r.formData.port),n.Nb(6),n.Dc("ngModel",r.formData.printer_name),n.Nb(6),n.Dc("ngModel",r.formData.status),n.Nb(6),n.Dc("ngIf",t.touched&&(null==c||null==c.errors?null:c.errors.required)),n.Nb(4),n.Dc("disabled",r.ipValid)}}class N{constructor(){this.itemsPerPage=20,this.currentPage=1,this.totalCount=0,this.search=""}}const w=[{path:"",component:(()=>{class t{constructor(t,e,c,r,i){this.modal=t,this.http=e,this.toaster=c,this.activatedRoute=r,this.router=i,this.filters=new N,this.onSearch=new n.q,this.formData={},this.posPrinters=[],this.printerValid=!1,this.ipValid=!1,this.date=a(new Date).format("YYYY-MM-DD HH:mm:ss")}ngOnInit(){this.formData.status="Enable",this.onSearch.pipe(Object(o.a)(500)).subscribe(t=>this.updateRouterParams()),this.getPosPrinters()}updateRouterParams(){this.router.navigate(["home/ip-printer"],{queryParams:this.filters})}addPrinter(t,e){this.printerValid=!1,this.ipValid=!1,"edit"==t?(this.formData=Object.assign({},e),this.viewType="edit"):(this.formData={},this.viewType="add",this.formData.status="Enable"),this.modal.open(this.printerModal,{size:"md",centered:!0})}contentChange(t){console.log(t),this.status=t}onSubmit(t){if(t.form.markAllAsTouched(),t.valid&&"add"===this.viewType){"Disable"===this.status&&(this.formData.last_used=this.date),this.formData.doctype=s.b.posPrinters;const t=new FormData;t.append("doc",JSON.stringify(this.formData)),t.append("action","Save"),this.http.post(""+s.a.fileSave,t).subscribe(t=>{t&&(console.log(t),this.getPosPrinters(),this.toaster.success("successfully added"),this.modal.dismissAll())})}else"Disable"===this.status&&(this.formData.last_used=this.date),this.formData.doctype=s.b.posPrinters,this.http.put(`${s.a.resource}/${s.b.posPrinters}/${this.formData.name}`,this.formData).subscribe(t=>{t&&(console.log(t),this.getPosPrinters(),this.toaster.success("successfully Updated"),this.modal.dismissAll())})}getPosPrinters(){this.activatedRoute.queryParams.pipe(Object(d.a)(t=>{this.filters.totalCount=parseInt(t.totalCount,0)||this.filters.totalCount,this.filters.search=t.search||this.filters.search;const e={filters:[]};this.filters.search&&e.filters.push(["name","like",`%${this.filters.search}%`]),e.limit_page_length=this.filters.itemsPerPage,e.order_by="`tabPOS Printers`.`modified` desc",e.fields=JSON.stringify(["last_used","printer_ip","port","printer_name","status","name"]),e.filters=JSON.stringify(e.filters);const c=this.http.get(`${s.a.resource}/${s.b.posPrinters}`,{params:{fields:JSON.stringify(["count( `tabPOS Printers`.`name`) AS total_count"]),filters:e.filters}}),r=this.http.get(`${s.a.resource}/${s.b.posPrinters}`,{params:e});return Object(l.a)([c,r])})).subscribe(t=>{1==this.filters.currentPage&&(this.posPrinters=[]);const[e,c]=t;this.filters.totalCount=e.data[0].total_count,c.data&&(this.posPrinters=1!==this.filters.currentPage?this.posPrinters.concat(c.data):c.data)})}checkPagination(){this.filters.currentPage=1,this.updateRouterParams()}getPrinter(t,e){var c;this.ipPrinterCheck=null===(c=t.target)||void 0===c?void 0:c.value,this.ValidateIPaddress(this.ipPrinterCheck)}ValidateIPaddress(t){return/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(t)?(this.ipValid=!1,!0):(this.ipValid=!0,!1)}}return t.\u0275fac=function(e){return new(e||t)(n.bc(h.k),n.bc(g.b),n.bc(u.d),n.bc(i.a),n.bc(i.e))},t.\u0275cmp=n.Vb({type:t,selectors:[["app-ip-printers"]],viewQuery:function(t,e){var c;1&t&&n.jd(f,!0),2&t&&n.Mc(c=n.tc())&&(e.printerModal=c.first)},decls:46,vars:4,consts:[[1,"row","mb-3"],[1,"col-md-9","col-lg-9"],[1,"d-flex"],[1,"text-white"],["type","button",1,"btn","btn-primary","ml-3",3,"click"],[1,"ri-add-line"],[1,"col-md-3","text-right"],[1,"position-relative","mt-2","mt-lg-0","mt-md-0"],["type","search","placeholder","Search by Printer IP",1,"form-control","pl-5",3,"ngModel","ngModelChange","keyup","search"],["search",""],[1,"search"],[1,"ri-search-line"],[1,"row"],[1,"col-md-12"],[1,"card","border-0","shadow"],[1,"card-body","p-0"],[1,"table-responsive"],[1,"table","table-bordered"],[1,"pl-4"],[4,"ngFor","ngForOf"],["class","text-center py-5",4,"ngIf"],[1,"col-md-11"],[1,"col-md-1"],["class","text-right mb-2",4,"ngIf"],["printerModal",""],[1,"badge",3,"ngClass"],[1,"text-primary","cursor-pointer",3,"click"],[1,"text-center","py-5"],[1,"text-right","mb-2"],[1,"px-2"],["name","itemsPerPage","id","itemsPerPage",1,"custom-select",3,"ngModel","ngModelChange","change"],[3,"value"],[1,"modal-header"],[1,"text-capitalize"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"ngSubmit"],["form","ngForm"],[1,"form-group"],["for","printer_ip"],["onkeypress","return (event.charCode !=8 && event.charCode ==0  || event.charCode==190 || event.charCode==110 || event.charCode==46 || (event.charCode >= 48 && event.charCode <= 57 ))","id","printer_ip","type","text","name","printer_ip","required","",1,"form-control",3,"ngModel","change","ngModelChange"],["printer_ip","ngModel"],["class","text-danger",4,"ngIf"],[4,"ngIf"],["for","port"],["id","port","type","text","name","port","required","",1,"form-control",3,"ngModel","ngModelChange"],["port","ngModel"],["for","printer_name"],["id","printer_name","type","text","name","printer_name","required","",1,"form-control",3,"ngModel","ngModelChange"],["printer_name","ngModel"],["for","status"],["id","status","name","status","required","",1,"custom-select",3,"ngModel","ngModelChange"],["status","ngModel"],["value","Enable"],["value","Disable"],[1,"text-right","col-md-12"],["type","button",1,"btn","btn-outline-primary",3,"click"],["type","submit",1,"btn","btn-primary","ml-3",3,"disabled"],[1,"text-danger"]],template:function(t,e){if(1&t){const t=n.ic();n.hc(0,"section"),n.hc(1,"div",0),n.hc(2,"div",1),n.hc(3,"div",2),n.hc(4,"h4",3),n.hc(5,"b"),n.cd(6,"POS Printers"),n.gc(),n.gc(),n.hc(7,"button",4),n.sc("click",(function(){return e.addPrinter("add",null)})),n.cc(8,"i",5),n.gc(),n.gc(),n.gc(),n.hc(9,"div",6),n.hc(10,"div",7),n.hc(11,"input",8,9),n.sc("ngModelChange",(function(t){return e.filters.search=t}))("keyup",(function(){n.Pc(t);const c=n.Nc(12);return e.filters.search=c.value,e.onSearch.emit(e.filters)}))("search",(function(){return e.onSearch.emit(e.filters)})),n.gc(),n.hc(13,"span",10),n.cc(14,"i",11),n.gc(),n.gc(),n.gc(),n.gc(),n.hc(15,"div",12),n.hc(16,"div",13),n.hc(17,"div",14),n.hc(18,"div",15),n.hc(19,"div",16),n.hc(20,"table",17),n.hc(21,"thead"),n.hc(22,"tr"),n.hc(23,"th",18),n.cd(24,"S.No"),n.gc(),n.hc(25,"th"),n.cd(26,"Printer Name"),n.gc(),n.hc(27,"th"),n.cd(28,"Printer IP"),n.gc(),n.hc(29,"th"),n.cd(30,"Printer Port"),n.gc(),n.hc(31,"th"),n.cd(32,"Last Used"),n.gc(),n.hc(33,"th"),n.cd(34,"Status"),n.gc(),n.hc(35,"th"),n.cd(36,"Actions"),n.gc(),n.gc(),n.gc(),n.hc(37,"tbody"),n.ad(38,b,18,12,"tr",19),n.gc(),n.gc(),n.ad(39,P,4,0,"div",20),n.gc(),n.hc(40,"div",12),n.cc(41,"div",21),n.hc(42,"div",22),n.ad(43,v,13,6,"div",23),n.gc(),n.gc(),n.gc(),n.gc(),n.gc(),n.gc(),n.gc(),n.ad(44,M,47,9,"ng-template",null,24,n.bd)}2&t&&(n.Nb(11),n.Dc("ngModel",e.filters.search),n.Nb(27),n.Dc("ngForOf",e.posPrinters),n.Nb(1),n.Dc("ngIf",!(null!=e.posPrinters&&e.posPrinters.length)),n.Nb(4),n.Dc("ngIf",null==e.posPrinters?null:e.posPrinters.length))},directives:[p.b,p.i,p.l,r.o,r.p,r.n,p.r,p.m,p.t,p.u,p.j,p.k,p.q],pipes:[r.f],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:8px;font-size:14px;border:1px solid rgba(221,218,218,.3)}.form-group[_ngcontent-%COMP%]{margin-bottom:10px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px}"]}),t})()}];let _=(()=>{class t{}return t.\u0275mod=n.Zb({type:t}),t.\u0275inj=n.Yb({factory:function(e){return new(e||t)},imports:[[i.i.forChild(w)],i.i]}),t})(),k=(()=>{class t{}return t.\u0275mod=n.Zb({type:t}),t.\u0275inj=n.Yb({factory:function(e){return new(e||t)},imports:[[r.c,_,p.d]]}),t})()}}]);