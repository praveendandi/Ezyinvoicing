(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{PSHn:function(t,e,c){"use strict";c.r(e),c.d(e,"ReconciliationModule",(function(){return x}));var n=c("ofXK"),i=c("tyNb"),o=c("fXoL"),r=c("Kj3r"),s=c("1G5W"),a=c("eIep"),h=c("t0ZU"),d=c("tk/3"),g=c("5eHb"),l=c("mFJh"),u=c("3Pt+");function f(t,e){if(1&t&&(o.hc(0,"option",38),o.cd(1),o.gc()),2&t){const t=e.$implicit;o.Dc("value",t.short),o.Nb(1),o.dd(t.long)}}function p(t,e){if(1&t&&(o.hc(0,"option"),o.cd(1),o.gc()),2&t){const t=e.$implicit;o.Nb(1),o.dd(t)}}function b(t,e){1&t&&(o.hc(0,"span",41),o.cd(1,"Matched"),o.gc())}function m(t,e){1&t&&(o.hc(0,"span",42),o.cd(1,"Missing in Ezy Invoicing"),o.gc())}function v(t,e){if(1&t&&(o.hc(0,"tr"),o.hc(1,"td"),o.cd(2),o.gc(),o.hc(3,"td"),o.cd(4),o.gc(),o.hc(5,"td"),o.cd(6),o.gc(),o.hc(7,"td"),o.cd(8),o.gc(),o.hc(9,"td"),o.cd(10),o.gc(),o.hc(11,"td"),o.cd(12,"10.00"),o.gc(),o.hc(13,"td"),o.cd(14),o.xc(15,"date"),o.gc(),o.hc(16,"td"),o.cd(17),o.xc(18,"date"),o.gc(),o.hc(19,"td"),o.ad(20,b,2,0,"span",39),o.ad(21,m,2,0,"span",40),o.gc(),o.gc()),2&t){const t=e.$implicit;o.Nb(2),o.dd(t.index),o.Nb(2),o.dd(null==t?null:t.invoice_number),o.Nb(2),o.dd(null==t?null:t.invoice_date),o.Nb(2),o.dd(null==t?null:t.gst_number),o.Nb(2),o.dd(null==t?null:t.total_invoice_amount),o.Nb(4),o.dd(o.yc(15,9,null==t?null:t.irn_generated_date)),o.Nb(3),o.dd(o.yc(18,11,null==t?null:t.gstr_saved_date)),o.Nb(3),o.Dc("ngIf",1==(null==t?null:t.gstr_filed)),o.Nb(1),o.Dc("ngIf",0==(null==t?null:t.gstr_filed))}}const M=function(){return["/gstr/dashboard"]},P=function(){return["/gstr/gstr1"]},C=function(){return["/gstr/invoice"]};class y{constructor(){this.itemsPerPage=20,this.currentPage=1,this.totalCount=0,this.start=0,this.category="",this.search={status:"",searchBy:"",confno:"",firstName:"",lastName:"",invoiceType:"B2B",filterBy:"Custom",filterType:"invoice_date",filterDate:"",month:"",year:""}}}const O=[{path:"",component:(()=>{class t{constructor(t,e,c,n,i){this.http=t,this.activatedRoute=e,this.router=c,this.toastr=n,this.yearService=i,this.destroyEvents=new o.q,this.invoiceList=[],this.yearsList=[],this.monthList=[],this.filters=new y,this.onSearch=new o.q,this.searchCond="Invoice No"}ngOnInit(){this.onSearch.pipe(Object(r.a)(500)).subscribe(t=>{this.invoiceList=[],this.filters.start=0,this.filters.totalCount=0,this.updateRouterParams()}),this.yearService.years.pipe(Object(s.a)(this.destroyEvents)).subscribe(t=>this.yearsList=t),this.yearService.months.pipe(Object(s.a)(this.destroyEvents)).subscribe(t=>this.monthList=t);const t=new Date;t.setMonth(t.getMonth()-1);let e=t.toLocaleString("default",{month:"long"});e=t.getMonth()+1;let c=t.getFullYear();this.filters.search.month=e,this.filters.search.year=c,this.activatedRoute.queryParams.subscribe(t=>{if(console.log(t),t&&t.search){const e=JSON.parse(t.search);console.log(e),this.filters.search.month=e.month,this.filters.search.year=e.year}}),this.getInvoicesList()}getInvoicesList(){this.activatedRoute.queryParams.pipe(Object(a.a)(t=>{const e={filters:[]};return this.filters.search.confno&&e.filters.push(["invoice_number","like",`%${this.filters.search.confno}%`]),this.filters.search.status&&e.filters.push(["gstr_filed","like",`%${this.filters.search.status}%`]),e.limit_page_length=20,e.fields=JSON.stringify(["*"]),e.filters=JSON.stringify(e.filters),e.limit_start=(this.filters.currentPage-1)*this.filters.itemsPerPage,e.month=this.filters.search.month,e.year=this.filters.search.year,this.http.get(""+h.a.getInvoices,{params:e})})).subscribe(t=>{var e,c;if(1==this.filters.currentPage&&(this.invoiceList=[]),null===(e=null==t?void 0:t.message)||void 0===e?void 0:e.success){let e=null===(c=null==t?void 0:t.message)||void 0===c?void 0:c.data;e=e.map((t,e)=>(t&&(t.index=this.invoiceList.length+e+1),t)),e&&(this.invoiceList=1!==this.filters.currentPage?this.invoiceList.concat(e):e)}else this.toastr.error("Failed to Load")})}updateRouterParams(){const t=JSON.parse(JSON.stringify(this.filters));t.search=JSON.stringify(t.search),this.router.navigate(["gstr/reconciliation"],{queryParams:t})}selectMonthYear(t,e){console.log(t),"month"===e&&t&&(this.filters.search.month=t,this.updateRouterParams()),"year"===e&&t&&(this.filters.search.year=t,this.updateRouterParams())}reconcilation(){let t=this.filters.search.month;JSON.parse(t)<=9&&(t="0"+t),this.http.post(h.a.reconcile,{ret_period:`${t}${this.filters.search.year}`}).subscribe(t=>{t.message.sucess&&(console.log(t),this.getInvoicesList())})}ngOnDestroy(){this.destroyEvents.next(),this.destroyEvents.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(o.bc(d.b),o.bc(i.a),o.bc(i.e),o.bc(g.d),o.bc(l.a))},t.\u0275cmp=o.Vb({type:t,selectors:[["app-reconciliation"]],decls:118,vars:14,consts:[[1,"border-bottom","bg-linear","px-3"],[1,"container-fluid","px-5","py-1"],[1,"d-flex","no-gutters","justify-content-between"],[1,""],[1,"mb-0","text-white"],[1,"d-flex","align-items-center"],[1,"mb-0","text-white",3,"routerLink"],[1,"cursor-pointer","underline"],[1,"ri-arrow-right-s-line","text-white"],[1,"text-white","mb-0",3,"routerLink"],[1,"text-white","mb-0",3,"routerLink","queryParamsHandling"],[1,"text-white","mb-0"],[1,"m-0"],[1,"pr-2","text-white"],[1,"flex-fill"],["id","my-select","name","month",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"flex-fill","ml-3"],["id","my-select","name","year",1,"form-control","px-4",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[1,"mt-3"],[1,"container-fluid"],[1,"row"],[1,"col-md-6"],[1,"d-flex"],["type","search","placeholder","search by invoice number",1,"form-control",3,"ngModel","keyup","search","ngModelChange"],["id","my-select",1,"form-control",3,"ngModel","ngModelChange"],["value",""],["value","1"],["value","0"],[1,"col-md-6","text-right"],["type","button",1,"btn","btn-default","reconcile",3,"click"],[1,"row","mt-3"],[1,"col-md-12"],[1,"table","table-bordered","text-center","first-table"],[1,"thead-light"],[1,"table-reponsive","first-table"],[1,"table","table-bordered","text-center","table-sm"],[3,"value"],["class","badge badge-success",4,"ngIf"],["class","badge badge-danger mismatched",4,"ngIf"],[1,"badge","badge-success"],[1,"badge","badge-danger","mismatched"]],template:function(t,e){1&t&&(o.hc(0,"section",0),o.hc(1,"div",1),o.hc(2,"div",2),o.hc(3,"div",3),o.hc(4,"h6",4),o.hc(5,"strong"),o.cd(6,"Invoices Reconciliation"),o.gc(),o.gc(),o.hc(7,"div",5),o.hc(8,"div"),o.hc(9,"p",6),o.hc(10,"small",7),o.cd(11,"Dashboard"),o.gc(),o.gc(),o.gc(),o.hc(12,"div"),o.cc(13,"i",8),o.gc(),o.hc(14,"div"),o.hc(15,"p",9),o.hc(16,"small",7),o.cd(17,"GSTR1-Summary"),o.gc(),o.gc(),o.gc(),o.hc(18,"div"),o.cc(19,"i",8),o.gc(),o.hc(20,"div"),o.hc(21,"p",10),o.hc(22,"small",7),o.cd(23,"Invoices"),o.gc(),o.gc(),o.gc(),o.hc(24,"div"),o.cc(25,"i",8),o.gc(),o.hc(26,"div"),o.hc(27,"p",11),o.hc(28,"small",3),o.cd(29,"Invoice Reconciliation"),o.gc(),o.gc(),o.gc(),o.gc(),o.gc(),o.hc(30,"div",5),o.hc(31,"div"),o.hc(32,"p",12),o.hc(33,"small",13),o.cd(34,"Return Period"),o.gc(),o.gc(),o.gc(),o.hc(35,"div",14),o.hc(36,"div",3),o.hc(37,"select",15),o.sc("ngModelChange",(function(t){return e.filters.search.month=t}))("ngModelChange",(function(t){return e.selectMonthYear(t,"month")})),o.ad(38,f,2,2,"option",16),o.gc(),o.gc(),o.gc(),o.hc(39,"div",17),o.hc(40,"div",3),o.hc(41,"select",18),o.sc("ngModelChange",(function(t){return e.filters.search.year=t}))("ngModelChange",(function(t){return e.selectMonthYear(t,"year")})),o.ad(42,p,2,1,"option",19),o.gc(),o.gc(),o.gc(),o.gc(),o.gc(),o.gc(),o.gc(),o.hc(43,"section",20),o.hc(44,"div",21),o.hc(45,"div",22),o.hc(46,"div",23),o.hc(47,"div",24),o.hc(48,"div",14),o.hc(49,"input",25),o.sc("keyup",(function(){return e.onSearch.emit(e.filters)}))("search",(function(){return e.onSearch.emit(e.filters)}))("ngModelChange",(function(t){return e.filters.search.confno=t})),o.gc(),o.gc(),o.hc(50,"div",17),o.hc(51,"select",26),o.sc("ngModelChange",(function(t){return e.filters.search.status=t}))("ngModelChange",(function(){return e.updateRouterParams()})),o.hc(52,"option",27),o.cd(53,"All Invoice"),o.gc(),o.hc(54,"option",28),o.cd(55,"Matched"),o.gc(),o.hc(56,"option",29),o.cd(57,"Mis-Matched"),o.gc(),o.gc(),o.gc(),o.gc(),o.gc(),o.hc(58,"div",30),o.hc(59,"button",31),o.sc("click",(function(){return e.reconcilation()})),o.cd(60,"Reconcile"),o.gc(),o.gc(),o.gc(),o.hc(61,"div",32),o.hc(62,"div",33),o.hc(63,"table",34),o.hc(64,"thead",35),o.hc(65,"tr"),o.hc(66,"th"),o.cd(67,"Total Invoices"),o.gc(),o.hc(68,"th"),o.cd(69,"Matching"),o.gc(),o.hc(70,"th"),o.cd(71,"Missing in E invoicing"),o.gc(),o.hc(72,"th"),o.cd(73,"Missing in GST"),o.gc(),o.hc(74,"th"),o.cd(75,"Last Reconciled on"),o.gc(),o.gc(),o.gc(),o.hc(76,"tbody"),o.hc(77,"tr"),o.hc(78,"td"),o.hc(79,"b"),o.cd(80,"100"),o.gc(),o.gc(),o.hc(81,"td"),o.hc(82,"b"),o.cd(83,"10"),o.gc(),o.gc(),o.hc(84,"td"),o.hc(85,"b"),o.cd(86,"10"),o.gc(),o.gc(),o.hc(87,"td"),o.hc(88,"b"),o.cd(89,"10"),o.gc(),o.gc(),o.hc(90,"td"),o.hc(91,"b"),o.cd(92,"30"),o.gc(),o.gc(),o.gc(),o.gc(),o.gc(),o.gc(),o.gc(),o.gc(),o.gc(),o.hc(93,"section"),o.hc(94,"div",36),o.hc(95,"table",37),o.hc(96,"thead",35),o.hc(97,"tr"),o.hc(98,"th"),o.cd(99,"#"),o.gc(),o.hc(100,"th"),o.cd(101,"Invoice Number"),o.gc(),o.hc(102,"th"),o.cd(103,"Invoice Date"),o.gc(),o.hc(104,"th"),o.cd(105,"GST Number"),o.gc(),o.hc(106,"th"),o.cd(107,"Invoice Value"),o.gc(),o.hc(108,"th"),o.cd(109,"Invoice Count"),o.gc(),o.hc(110,"th"),o.cd(111,"E invoicing generation date"),o.gc(),o.hc(112,"th"),o.cd(113,"Updated to E invoicing on"),o.gc(),o.hc(114,"th"),o.cd(115,"Status"),o.gc(),o.gc(),o.gc(),o.hc(116,"tbody"),o.ad(117,v,22,13,"tr",19),o.gc(),o.gc(),o.gc(),o.gc()),2&t&&(o.Nb(9),o.Dc("routerLink",o.Gc(11,M)),o.Nb(6),o.Dc("routerLink",o.Gc(12,P)),o.Nb(6),o.Dc("routerLink",o.Gc(13,C))("queryParamsHandling","merge"),o.Nb(16),o.Dc("ngModel",e.filters.search.month),o.Nb(1),o.Dc("ngForOf",e.monthList),o.Nb(3),o.Dc("ngModel",e.filters.search.year),o.Nb(1),o.Dc("ngForOf",e.yearsList),o.Nb(7),o.Dc("ngModel",e.filters.search.confno),o.Nb(2),o.Dc("ngModel",e.filters.search.status),o.Nb(66),o.Dc("ngForOf",e.invoiceList))},directives:[i.f,u.r,u.i,u.l,n.o,u.b,u.m,u.t,n.p],pipes:[n.f],styles:[".form-control[_ngcontent-%COMP%]{font-size:14px;height:35px}.custom-select[_ngcontent-%COMP%]{height:35px}.btn-primary[_ngcontent-%COMP%]{background:#012254!important;border:0;border-radius:0!important;font-size:14px!important}i[_ngcontent-%COMP%]{vertical-align:middle!important}.crums[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:15px}.underline[_ngcontent-%COMP%]{-webkit-text-decoration-line:underline;text-decoration-line:underline}.footerCard[_ngcontent-%COMP%]{position:fixed;bottom:2px}.footerCard[_ngcontent-%COMP%]   .c-border[_ngcontent-%COMP%]{border-color:#ffe4e4!important}.footer-card[_ngcontent-%COMP%]{position:fixed;bottom:2px}.invoice[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child, .invoice[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{position:sticky;left:0}.invoice[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, .invoice[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{position:sticky;right:0}.invoice[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{background:#fff}.invoice[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{background:#f5f5f5}.invoice[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{background:#fff}.invoice[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .invoice[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{white-space:nowrap}.invoice-card[_ngcontent-%COMP%]{height:60vh!important;overflow-y:scroll!important}.custom-select[_ngcontent-%COMP%]{font-size:13px}.pagination[_ngcontent-%COMP%]{border:1px solid #d3d3d3}.bg-count[_ngcontent-%COMP%]{background-color:#ffd3d3!important;font-weight:700}.morec[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px!important}.more[_ngcontent-%COMP%]{color:#ee3737!important;font-weight:700;text-decoration:underline}.calendar[_ngcontent-%COMP%]{max-width:200px}.calendar[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;top:5px;right:10px;cursor:pointer}.search-dropdown[_ngcontent-%COMP%]{border-radius:3px}.search-dropdown[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:15px!important;margin-bottom:0}.reconcile[_ngcontent-%COMP%]{background:#0070d4;border-radius:0!important;padding:10px 40px!important;font-size:13px;color:#fff!important}table[_ngcontent-%COMP%]   .mismatched[_ngcontent-%COMP%]{background:#ffbfc1!important}table[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{padding:5px 10px;border-radius:30px;font-size:11px}"]}),t})()}];let _=(()=>{class t{}return t.\u0275mod=o.Zb({type:t}),t.\u0275inj=o.Yb({factory:function(e){return new(e||t)},imports:[[i.i.forChild(O)],i.i]}),t})(),x=(()=>{class t{}return t.\u0275mod=o.Zb({type:t}),t.\u0275inj=o.Yb({factory:function(e){return new(e||t)},imports:[[n.c,_,u.d]]}),t})()}}]);