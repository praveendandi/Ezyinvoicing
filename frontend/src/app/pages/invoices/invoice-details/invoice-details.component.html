<section class="invoice-details">

    <div class="card-header mb-3  p-0">
        <div class="row">
            <div class="col-md-3">
                <h5 class="text-white d-flex align-items-center">
                    <i *ngIf="params?.prop === 'invoice'" [routerLink]="['/home/invoices']" [replaceUrl]="true"
                        [queryParamsHandling]="'preserve'" class="cursor-pointer ri-arrow-left-line"></i>
                    <i *ngIf="params?.prop === 'credit'" [routerLink]="['/home/credit-invoices']" [replaceUrl]="true"
                        [queryParamsHandling]="'preserve'" class="cursor-pointer ri-arrow-left-line"></i>
                    <i *ngIf="params?.prop === 'amend'" [routerLink]="['/home/amend-invoices']" [replaceUrl]="true"
                        [queryParamsHandling]="'preserve'" class="cursor-pointer ri-arrow-left-line"></i>
                    <b class="pr-2">{{invoiceInfo.invoice_number || 'NA'}}</b>
                    <span class="c-badge" *ngIf='invoiceInfo?.invoice_type'> <b>{{invoiceInfo?.invoice_type}}</b>
                    </span>
                    <span class="badge mx-3"
                        [ngClass]="{'badge-success': invoiceInfo.irn_generated == 'Success','badge-warning':invoiceInfo.irn_generated == 'Pending','badge-default':invoiceInfo.irn_generated == 'Cancelled','badge-danger':invoiceInfo.irn_generated == 'Error'}">{{invoiceInfo.irn_generated}}</span>

                    <span
                        *ngIf="companyDetails?.disable_sez !== 1 && invoiceInfo.invoice_type === 'B2B' && (invoiceInfo.irn_generated == 'Pending' || invoiceInfo?.irn_generated == 'Error')">
                        <div class="custom-control custom-switch">
                            <input type="checkbox" class="custom-control-input" id="sez" [(ngModel)]="sez"
                                #sezs="ngModel" name="sez" (change)=" switchSEZ()">
                            <label class="custom-control-label" for="sez"><small>sez</small></label>
                        </div>
                    </span>

                    <span
                        *ngIf="sez && (invoiceInfo.irn_generated == 'Pending' || invoiceInfo?.irn_generated == 'Error')">
                        <div class="custom-control custom-switch mx-3">
                            <input type="checkbox" class="custom-control-input" id="lut" [(ngModel)]="lut"
                                #luts="ngModel" name="lut" (change)=" switchSEZ()">
                            <label class="custom-control-label" for="lut"><small>LUT</small></label>
                        </div>
                    </span>

                </h5>
            </div>

            <div class="col-md-9 d-flex align-items-center justify-content-between">
                <div class="">
                    <ng-container *ngIf="companyDetails?.e_invoice_missing_date_feature">

                        <p [ngClass]="{'text-danger': invoiceInfo?.expiry_days <= 1}"
                            *ngIf="invoiceInfo?.invoice_type == 'B2B' && (invoiceInfo?.irn_generated == 'Pending' || invoiceInfo?.irn_generated == 'Error')">
                            <b>
                                <span *ngIf="invoiceInfo?.expiry_days >= 0 "
                                    class="irn-text-info-warn">{{invoiceInfo?.expiry_days == 0 ? "Today" :
                                    invoiceInfo?.expiry_days +'days'}} left for IRN generation</span>
                                <span *ngIf="invoiceInfo?.expiry_days < 0" class="irn-text-info">IRN generation
                                    Expired</span>
                            </b>
                        </p>
                    </ng-container>

                </div>
                <div class="text-right text-white c-icons-z">

                    <button
                        *ngIf="invoiceInfo.irn_generated === 'Success' && companyDetails?.b2b_to_credit == 1 && companyDetails?.manual_credit_invoice == 1 && companyDetails?.ezy_gst_module == 1"
                        (click)="synctoGST()" class="btn emailBtn mr-2" appPermissionButton accessType="write"
                        type="button">
                        {{invoiceInfo.synced_to_erp == 0?'Sync to GST':'Re-Sync to GST'}}
                    </button>
                    <button
                        *ngIf="invoiceInfo.invoice_type === 'B2B' && invoiceInfo.irn_generated === 'Success' && companyDetails?.b2b_to_credit == 1 && invoiceInfo?.credit_note_raised === 'No' && loginUSerRole && !invoiceInfo.showCancelIrn && companyDetails?.manual_credit_invoice == 1"
                        (click)="convertToCredit(SuccessInvoiceCreditNote)" class="btn emailBtn mr-2"
                        appPermissionButton accessType="write" type="button">
                        Raise Credit</button>
                    <button
                        *ngIf="invoiceInfo.invoice_type === 'B2B' && invoiceInfo.irn_generated === 'Success' && companyDetails?.tax_invoice_to_manual == 1 && companyDetails?.manual_tax_invoice == 1"
                        (click)="convertCreditMAnual(SuccessInvoiceChanges)" class="btn emailBtn mr-2"
                        appPermissionButton accessType="write" type="button">
                        Copy Tax Invoice</button>
                    <button
                        *ngIf="invoiceInfo.irn_generated === 'Error' && companyDetails?.manual_tax_invoice == 1 && invoiceInfo.error_message == ' Invoice Total Mismatch' && invoiceInfo?.invoice_category == 'Tax Invoice' "
                        (click)="convertManual()" class="btn emailBtn mr-2" appPermissionButton accessType="write"
                        type="button">
                        Move to Manual</button>
                    <button
                        *ngIf="invoiceInfo.allowance_invoice === 'Yes' && companyDetails?.manual_credit_invoice == 1"
                        (click)="convertCredit(moveToCreditDateEdit)" class="btn emailBtn mr-2" appPermissionButton
                        accessType="write" type="button">
                        Mark as Credit</button>
                    <button
                        *ngIf="invoiceInfo.invoice_type === 'B2B' && invoiceInfo.debit_invoice === 'Yes' && companyDetails?.manual_debit_invoice == 1"
                        (click)="convertDebit()" class="btn emailBtn mr-2" appPermissionButton accessType="write"
                        type="button">
                        Mark as Debit</button>
                    <button
                        *ngIf="invoiceInfo.invoice_type === 'B2C' && companyDetails?.b2c_to_b2b == 1 && companyDetails?.name != 'NA-01'"
                        (click)="openConvertModal()" class="btn emailBtn mr-2" appPermissionButton accessType="write"
                        type="button">
                        Convert
                        B2B</button>

                    <button
                        *ngIf="invoiceInfo.invoice_type === 'B2C' && companyDetails?.b2c_to_b2b == 1 && companyDetails?.name == 'NA-01' && (loginUSerRole)"
                        (click)="openConvertModal()" class="btn emailBtn mr-2" appPermissionButton accessType="write"
                        type="button">
                        Convert
                        B2B</button>

                    <!-- <button *ngIf="invoiceInfo.invoice_type === 'B2B' && invoiceInfo.allowance_invoice === 'No'&& companyDetails?.b2c_to_b2b == 1 &&( invoiceInfo.irn_generated == 'Pending' || invoiceInfo.irn_generated=='Error')" (click)="ConvertB2BTOB2C()" class="btn emailBtn mr-2"
                        appPermissionButton accessType="write" type="button">
            Convert
            B2C</button> -->
                    <button
                        *ngIf="invoiceInfo.invoice_type === 'B2B' && companyDetails?.b2c_to_b2b == 1 &&( invoiceInfo.irn_generated == 'Pending' || invoiceInfo.irn_generated=='Error')"
                        (click)="ConvertB2BTOB2C()" class="btn emailBtn mr-2" appPermissionButton accessType="write"
                        type="button">
                        Convert
                        B2C</button>

                    <!-- <button
            *ngIf="(companyDetails?.auto_adjustment == 'Automatic' && invoiceInfo?.has_credit_items == 'Yes')&&((invoiceInfo.invoice_type === 'B2B' && invoiceInfo.irn_generated == 'Pending') || (invoiceInfo.invoice_type === 'B2C' && invoiceInfo.irn_generated == 'Success'))"
            (click)="adjustInvoices()" class="btn emailBtn mr-2" appPermissionButton accessType="write" type="button">
            Adjust</button> -->

                    <button *ngIf="invoiceInfo.irn_generated == 'Error' || invoiceInfo.irn_generated == 'Pending'"
                        (click)="deleteInvoices()" class="btn emailBtn mr-2" appPermissionButton accessType="delete"
                        type="button">
                        <i class="ri-delete-bin-line"></i> Delete</button>

                    <button *ngIf="invoiceInfo.irn_generated == 'Success'" (click)="openEmailTemp()"
                        class="btn emailBtn mr-2" appPermissionButton accessType="email" type="button"><i
                            class="ri-mail-line"></i> Email</button>

                    <div ngbDropdown class="d-inline-block  mr-2">
                        <button class="btn emailBtn" appPermissionButton accessType="print" id="dropdownBasic1"
                            ngbDropdownToggle><i class="ri-printer-line"></i> Print</button>
                        <div ngbDropdownMenu aria-labelledby="dropdownBasic1" class="pl-3">
                            <button *ngIf="invoiceInfo.invoice_file" (click)="printInvoice('Original Invoice')"
                                ngbDropdownItem>Invoice</button>
                            <button *ngIf="invoiceInfo.invoice_file && invoiceInfo.irn_generated === 'Success'"
                                (click)="printInvoice('Tax Invoice')" ngbDropdownItem>Invoice
                                QR</button>
                            <!-- <button *ngIf="invoiceInfo.invoice_file && invoiceInfo.irn_generated === 'Success'" (click)="printSignInvoice()" ngbDropdownItem>
                                Signed invoice
                            </button> -->
                            <button
                                *ngIf="invoiceInfo.irn_generated === 'Success' && invoiceInfo?.has_credit_items == 'Yes'"
                                (click)="printInvoice('Tax Invoice with Credits')" ngbDropdownItem>Credit
                                Note QR</button>
                            <button *ngIf="invoiceInfo.invoice_from == 'File' && invoiceInfo?.invoice_file == ''"
                                (click)="printPdf()" ngbDropdownItem>PMS Invoice</button>

                        </div>
                    </div>


                    <div class="d-inline-block ">
                        <ng-container
                            *ngIf="invoiceInfo.allowance_invoice === 'No' && invoiceInfo.ready_to_generate_irn == 'Yes' && invoiceInfo.irn_generated == 'Pending' && invoiceInfo.invoice_type == 'B2B'">
                            <button (click)="generateIrn()" appPermissionButton accessType="submit"
                                class="btn btn-danger btn-small" type="button"
                                [disabled]="companyDetails?.e_invoice_missing_date_feature &&  checkIRNdate ">Generate
                                IRN</button>
                        </ng-container>
                        <ng-container
                            *ngIf="invoiceInfo.allowance_invoice === 'No' && invoiceInfo.ready_to_generate_irn == 'Yes' && invoiceInfo.irn_generated == 'Pending' && invoiceInfo.invoice_type == 'B2C'">
                            <button (click)="generateQr()" class="btn btn-danger btn-small" appPermissionButton
                                accessType="submit" type="button">Generate
                                QR</button>
                        </ng-container>
                        <!-- <ng-container
                            *ngIf="invoiceInfo.invoice_type == 'B2B' ?(invoiceInfo.irn_generated == 'Error' || invoiceInfo.irn_generated == 'Pending'|| invoiceInfo.irn_generated == 'Zero Invoice'):(invoiceInfo.qr_generated == 'Pending' || invoiceInfo.qr_generated == 'Success' || invoiceInfo?.qr_generated =='Error'|| invoiceInfo?.qr_generated =='Zero Invoice')"> -->
                        <ng-container
                            *ngIf="invoiceInfo.invoice_type == 'B2B' ?(invoiceInfo.irn_generated == 'Error' || invoiceInfo.irn_generated == 'Pending'|| invoiceInfo.irn_generated == 'Zero Invoice' || invoiceInfo?.irn_generated =='NA'):(invoiceInfo.irn_generated == 'Pending' || invoiceInfo.irn_generated == 'Success' || invoiceInfo?.irn_generated =='Error'|| invoiceInfo?.irn_generated =='Zero Invoice' || invoiceInfo?.irn_generated =='NA')">
                            <button (click)="reInitiateInvoice()" class="btn btn-danger btn-small ml-1"
                                appPermissionButton accessType="write" type="button">Re-Upload</button>
                        </ng-container>


                        <ng-container
                            *ngIf="invoiceInfo.invoice_type == 'B2B' ?(invoiceInfo.irn_generated == 'Error' || invoiceInfo.irn_generated == 'Pending'|| invoiceInfo.irn_generated == 'Zero Invoice' || invoiceInfo?.irn_generated =='NA'):(invoiceInfo.irn_generated == 'Pending' || invoiceInfo.irn_generated == 'Success' || invoiceInfo?.irn_generated =='Error'|| invoiceInfo?.irn_generated =='Zero Invoice' || invoiceInfo?.irn_generated =='NA')">
                            <button (click)="reload(invoiceInfo?.invoice_file)" class="btn btn-danger btn-small ml-1"
                                appPermissionButton accessType="write" type="button">Re-Process</button>
                        </ng-container>

                        <ng-container *ngIf="invoiceInfo.irn_generated == 'Success'">
                            <!-- <ng-container *ngIf="invoiceInfo.irn_generated == 'Success' && (invoiceInfo?.qr_code == '' || invoiceInfo?.qr_code_image == '' || invoiceInfo?.b2c_qrimage == '')"> -->
                            <!-- <ng-container *ngIf="checkRedoQRDate"> -->
                            <button (click)="reAttachInvoice()" appPermissionButton accessType="write"
                                class="btn btn-danger btn-small ml-1" type="button">Redo QR</button>
                            <!-- </ng-container> -->
                        </ng-container>
                        <ng-container
                            *ngIf="invoiceInfo.ready_to_generate_irn == 'Yes' && invoiceInfo.irn_generated == 'Success'">
                            <button (click)="cancelIrn()" *ngIf="invoiceInfo.showCancelIrn" appPermissionButton
                                accessType="cancel" class="btn btn-danger btn-small ml-1" type="button">Cancel
                                IRN</button>
                        </ng-container>
                        <!-- <ng-container *ngIf="invoiceInfo.irn_generated == 'Error' || invoiceInfo.irn_generated == 'Pending'">
              <button (click)="deleteInvoices()" ngbTooltip="Delete" class="btn btn-primary btn-small ml-1"
                appPermissionButton accessType="delete" type="button"><span><i class="ri-delete-bin-line text-white"
                    style="margin:0;"></i></span></button>
            </ng-container> -->
                        <ng-container *ngIf="invoiceInfo.irn_cancelled == 'Yes'">
                            <strong>IRN CANCELLED</strong>
                        </ng-container>
                        <ng-container *ngIf="invoiceInfo.invoice_type == 'B2C'&&invoiceInfo.irn_generated == 'Success'">
                            <strong>QR GENERATED</strong>
                        </ng-container>


                    </div>



                </div>
            </div>
        </div>
    </div>

    <div class="card border-0 bg-transparent position-relative">
        <div class="card-body p-0">
            <div>
                <ul ngbNav #nav="ngbNav" [(activeId)]="active" (activeIdChange)="onTabChange($event)" class="nav-tabs">
                    <li [ngbNavItem]="1">
                        <a ngbNavLink>Invoice Summary</a>
                        <ng-template ngbNavContent>
                            <ng-container [ngTemplateOutlet]="summary"
                                [ngTemplateOutletContext]="{tableData: (invoiceInfo.items || []),total:invoiceInfo.amount_after_gst}">
                            </ng-container>
                            <div class="row">
                                <div class="col-md-8 offset-md-2">
                                    <table class="table table-striped summary">
                                        <thead>
                                            <tr>
                                                <th>{{invoiceInfo.amount_before_gst || 'NA'}} <br> <small>Debit summary
                                                        without GST</small>
                                                </th>
                                                <th>{{invoiceInfo.credit_value_before_gst || 'NA'}} <br>
                                                    <small> {{invoiceInfo?.has_discount_items === 'Yes'?'Discount
                                                        Details':'Credit Summary'}}
                                                        without GST</small>
                                                </th>
                                                <th>{{invoiceInfo.pms_invoice_summary_without_gst || 'NA'}} <br>
                                                    <small>Invoice summary without GST
                                                    </small>
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <th>{{invoiceInfo.amount_after_gst || 'NA'}} <br> <small>Debit summary
                                                        with GST</small></th>
                                                <th>{{invoiceInfo.credit_value_after_gst || 'NA'}} <br>
                                                    <small>{{invoiceInfo?.has_discount_items === 'Yes'?'Discount
                                                        Details':'Credit Summary'}} with
                                                        GST</small>
                                                </th>
                                                <th>{{invoiceInfo.pms_invoice_summary || 'NA'}} <br> <small>Invoice
                                                        summary with GST.
                                                    </small></th>
                                            </tr>

                                        </tbody>
                                    </table>
                                </div>
                            </div>


                        </ng-template>
                    </li>


                    <li [ngbNavItem]="3">
                        <a ngbNavLink>GST & SAC Code Summary</a>
                        <ng-template ngbNavContent>
                            <div class="cpx-5">
                                <div class="row">


                                    <div class="col-md-5">

                                        <div class="total-card summary">
                                            <h6 class="px-2 py-2"><strong>Debit Summary</strong></h6>
                                            <table class="table bg-white" id="total-table">


                                                <tr class="text-right">
                                                    <td colspan="17" class="total"><span>Total Sales :</span>
                                                    </td>
                                                    <td colspan="9" class="text-right"><strong
                                                            class="total">{{invoiceInfo.sales_amount_before_tax
                                                            |
                                                            number:'0.2'}}</strong></td>
                                                </tr>

                                                <tr class="text-right">
                                                    <td colspan="17" class="total"><span>Add : CGST</span></td>
                                                    <td colspan="9" class="text-right"><strong
                                                            class="total">{{invoiceInfo.cgst_amount |
                                                            number:'0.2'}}</strong></td>
                                                </tr>

                                                <tr class="text-right">
                                                    <td colspan="17" class="total"><span>Add : SGST</span> </td>
                                                    <td colspan="9" class="text-right"><strong
                                                            class="total">{{invoiceInfo.sgst_amount |
                                                            number:'0.2'}}</strong></td>
                                                </tr>

                                                <tr class="text-right">
                                                    <td colspan="17" class="total"><span>Add : IGST</span></td>
                                                    <td colspan="9" class="text-right"><strong
                                                            class="total">{{invoiceInfo.igst_amount |
                                                            number:'0.2'}}</strong></td>
                                                </tr>

                                                <tr class="text-right">
                                                    <td colspan="17" class="total"><span>Tax Amount : GST</span> </td>
                                                    <td colspan="9" class="text-right"><strong
                                                            class="total">{{invoiceInfo.total_gst_amount |
                                                            number:'0.2'}}</strong></td>
                                                </tr>
                                                <tr class="text-right">
                                                    <td colspan="17" class="total"><span>VAT</span> </td>
                                                    <td colspan="9" class="text-right"><strong
                                                            class="total">{{invoiceInfo.total_vat_amount |
                                                            number:'0.2'}}</strong></td>
                                                </tr>
                                                <!-- <tr class="text-right">
                                                    <td colspan="17" class="total"><span>State CESS</span> </td>
                                                    <td colspan="9" class="text-right"><strong
                                                            class="total">{{invoiceInfo.total_state_cess_amount
                                                            |
                                                            number:'0.2'}}</strong></td>
                                                </tr> -->
                                                <tr class="text-right">
                                                    <td colspan="17" class="total"><span>Central CESS</span> </td>
                                                    <td colspan="9" class="text-right"><strong
                                                            class="total">{{invoiceInfo.total_central_cess_amount |
                                                            number:'0.2'}}</strong></td>
                                                </tr>


                                                <tr class="text-right">
                                                    <td colspan="17" class="total"><span>Total Amount After Tax :</span>
                                                    </td>
                                                    <td colspan="9" class="text-right"><strong
                                                            class="total">{{invoiceInfo.sales_amount_after_tax
                                                            |
                                                            number:'0.2'}}</strong></td>
                                                </tr>
                                                <tr class="text-right">
                                                    <td colspan="17" class="total"><span>Difference Amount :</span>
                                                    </td>
                                                    <td colspan="9" class="text-right"><strong
                                                            class="total">{{invoiceInfo.invoice_round_off_amount |
                                                            number:'0.2'}}</strong></td>
                                                </tr>
                                            </table>
                                        </div>

                                        <div class="summary">
                                            <h6><strong>GST Summary</strong></h6>
                                            <table class="table table-bordered text-center my-3">
                                                <thead>
                                                    <tr>
                                                        <th>#</th>
                                                        <th>Tax Type</th>
                                                        <th>Tax Percentage</th>
                                                        <th class="text-right">Amount</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr *ngFor="let summary of invoiceInfo.gst_summary;let i =index">
                                                        <td>{{i+1}}</td>
                                                        <td>{{summary.tax_type}}</td>
                                                        <td>{{summary.tax_percentage}}%</td>
                                                        <td class="text-right">{{summary.amount | number : '0.2'}}</td>
                                                    </tr>

                                                </tbody>
                                            </table>
                                            <h6 class="text-right"><strong><small>Total Tax Amount GST</small> :
                                                    {{invoiceInfo.gst_summaryTotal | number : '0.2'}} </strong> </h6>
                                        </div>
                                    </div>


                                    <div class="col-md-7">

                                        <div class="total-card summary">
                                            <h6 class="px-2 py-2"><strong>Allowance/Credit Summary</strong></h6>
                                            <table class="table bg-white" id="total-table">


                                                <tr class="text-right">
                                                    <td colspan="17" class="total"><span>Total Sales :</span>
                                                    </td>
                                                    <td colspan="9" class="text-right"><strong
                                                            class="total">{{invoiceInfo.credit_value_before_gst
                                                            |
                                                            number:'0.2'}}</strong></td>
                                                </tr>

                                                <tr class="text-right">
                                                    <td colspan="17" class="total"><span>Add : CGST</span></td>
                                                    <td colspan="9" class="text-right"><strong
                                                            class="total">{{invoiceInfo.credit_cgst_amount |
                                                            number:'0.2'}}</strong></td>
                                                </tr>

                                                <tr class="text-right">
                                                    <td colspan="17" class="total"><span>Add : SGST</span> </td>
                                                    <td colspan="9" class="text-right"><strong
                                                            class="total">{{invoiceInfo.credit_sgst_amount |
                                                            number:'0.2'}}</strong></td>
                                                </tr>

                                                <tr class="text-right">
                                                    <td colspan="17" class="total"><span>Add : IGST</span></td>
                                                    <td colspan="9" class="text-right"><strong
                                                            class="total">{{invoiceInfo.credit_igst_amount |
                                                            number:'0.2'}}</strong></td>
                                                </tr>

                                                <tr class="text-right">
                                                    <td colspan="17" class="total"><span>Tax Amount : GST</span> </td>
                                                    <td colspan="9" class="text-right"><strong
                                                            class="total">{{invoiceInfo.credit_cgst_amount +
                                                            invoiceInfo.credit_sgst_amount +
                                                            invoiceInfo.credit_igst_amount |
                                                            number:'0.2'}}</strong></td>
                                                </tr>
                                                <tr class="text-right">
                                                    <td colspan="17" class="total"><span>VAT</span> </td>
                                                    <td colspan="9" class="text-right"><strong
                                                            class="total">{{invoiceInfo.total_credit_vat_amount
                                                            |
                                                            number:'0.2'}}</strong></td>
                                                </tr>
                                                <!-- <tr class="text-right">
                                                    <td colspan="17" class="total"><span>State CESS</span> </td>
                                                    <td colspan="9" class="text-right"><strong
                                                            class="total">{{invoiceInfo.total_credit_state_cess_amount |
                                                            number:'0.2'}}</strong></td>
                                                </tr> -->
                                                <tr class="text-right">
                                                    <td colspan="17" class="total"><span>Central CESS</span> </td>
                                                    <td colspan="9" class="text-right"><strong
                                                            class="total">{{invoiceInfo.total_credit_central_cess_amount
                                                            |
                                                            number:'0.2'}}</strong></td>
                                                </tr>


                                                <tr class="text-right">
                                                    <td colspan="17" class="total"><span>Total Amount After Tax :</span>
                                                    </td>
                                                    <td colspan="9" class="text-right"><strong
                                                            class="total">{{invoiceInfo.credit_value_after_gst
                                                            |
                                                            number:'0.2'}}</strong></td>
                                                </tr>
                                                <tr>
                                                    <td>.</td>
                                                    <td>.</td>
                                                </tr>
                                                <!-- <tr class="text-right">
                                                    <td colspan="17" class="total"><span>Difference Amount :</span>
                                                    </td>
                                                    <td colspan="9" class="text-right"><strong
                                                            class="total">{{invoiceInfo.invoice_round_off_amount |
                                                            number:'0.2'}}</strong></td>
                                                </tr> -->
                                            </table>
                                        </div>

                                        <div class="summary">
                                            <h6 class="px-2 py-2"><strong>Totals</strong></h6>
                                            <table class="table table-striped">
                                                <thead>
                                                    <tr>
                                                        <th>{{invoiceInfo.amount_before_gst || 'NA'}} <br> <small>Debit
                                                                summary without GST</small>
                                                        </th>
                                                        <th>{{invoiceInfo.credit_value_before_gst || 'NA'}} <br>
                                                            <small> {{invoiceInfo?.has_discount_items ===
                                                                'Yes'?'Discount Details':'Credit Summary'}} without
                                                                GST</small>
                                                        </th>
                                                        <th>{{invoiceInfo.pms_invoice_summary_without_gst || 'NA'}} <br>
                                                            <small>Invoice summary without GST
                                                            </small>
                                                        </th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <th>{{invoiceInfo.amount_after_gst || 'NA'}} <br> <small>Debit
                                                                summary with GST</small></th>
                                                        <th>{{invoiceInfo.credit_value_after_gst || 'NA'}} <br>
                                                            <small>{{invoiceInfo?.has_discount_items === 'Yes'?'Discount
                                                                Details':'Credit Summary'}}
                                                                with GST</small>
                                                        </th>
                                                        <th>{{invoiceInfo.pms_invoice_summary || 'NA'}} <br>
                                                            <small>Invoice summary with GST.
                                                            </small>
                                                        </th>
                                                    </tr>

                                                </tbody>
                                            </table>
                                        </div>

                                        <div class="summary">
                                            <h6><strong>SAC Code Summary</strong></h6>
                                            <div class="table-responsive">
                                                <table class="table table-bordered text-center bg-white mt-3">
                                                    <thead>
                                                        <tr>
                                                            <th>#</th>
                                                            <th>SAC/HSN CODE</th>
                                                            <th>Type</th>
                                                            <th>SALES</th>
                                                            <th>CGST</th>
                                                            <th>SGST</th>
                                                            <th>IGST</th>
                                                            <!-- <th>State CESS</th> -->
                                                            <th>Central CESS</th>
                                                            <th>VAT</th>
                                                            <th>Total Amount</th>

                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr
                                                            *ngFor="let sac of invoiceInfo.sac_hsn_based_taxes;let i = index">
                                                            <td>{{i+1}}</td>
                                                            <td>{{sac.sac_hsn_code}}</td>
                                                            <td>{{sac.type}}</td>
                                                            <td>{{sac.amount_before_gst}}</td>
                                                            <td>{{sac.cgst}}</td>
                                                            <td>{{sac.sgst}}</td>
                                                            <td>{{sac.igst}}</td>
                                                            <!-- <td>{{sac.state_cess}}</td> -->
                                                            <td>{{sac.cess}}</td>
                                                            <td>{{sac.vat}}</td>
                                                            <td>{{sac.amount_after_gst}}</td>
                                                        </tr>

                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>


                                    </div>
                                </div>
                            </div>
                        </ng-template>
                    </li>
                    <li [ngbNavItem]="4" *ngIf="invoiceInfo.irn_generated==='Success'">
                        <a *ngIf="invoiceInfo.has_credit_items === 'Yes'" ngbNavLink>Credit Note Summary</a>
                        <a *ngIf="invoiceInfo.has_discount_items === 'Yes'" ngbNavLink>Discount Summary</a>
                        <ng-template ngbNavContent>
                            <ng-container [ngTemplateOutlet]="summary"
                                [ngTemplateOutletContext]="{tableData: invoiceInfo.creditSummary,total:invoiceInfo.credit_value_after_gst}">
                            </ng-container>
                        </ng-template>
                    </li>

                    <li [ngbNavItem]="5" *ngIf="invoiceInfo.invoice_from !=='Web'">
                        <a ngbNavLink>PMS Invoice</a>
                        <!-- Potrait start -->
                        <ng-template ngbNavContent *ngIf="this.companyDetails.e_tax_format == 'Portrait'">
                            <div id="prints">
                                <div class="pt-3 summary  preview section-to-print" [ngClass]="{'no-print': printPdf}">
                                    <div class="row mb-2">
                                        <div class="col-md-6">
                                            <div class="d-flex">
                                                <h5 class="text-capitalize text-primary"><strong>PMS Invoice</strong>
                                                </h5>
                                                <!-- <p class="mb-0" style="line-height: 30px; margin-left: 10px;"> --
                                                    <strong> {{companyDetails.e_tax_format}}</strong>
                                                </p> -->
                                            </div>
                                        </div>
                                        <div class="col-md-6 text-right section-to-print">
                                            <!-- <button *ngIf="this.companyDetails.e_tax_format == 'Landscape'"
                                                class="btn btn-sm btn-primary mr-1"
                                                (click)="this.companyDetails.e_tax_format = 'Portrait'">Portrait</button>
                                            <button *ngIf="this.companyDetails.e_tax_format == 'Portrait'"
                                                class="btn btn-sm btn-primary mr-1"
                                                (click)="this.companyDetails.e_tax_format = 'Landscape'">Landscape</button> -->
                                            <button
                                                *ngIf="eTaxInvoiceDownloadBtn && invoiceInfo?.invoice_type === 'B2C' && (invoiceInfo.irn_generated == 'Success' || invoiceInfo?.irn_generated == 'Cancelled')"
                                                (click)="downlaod_e_tax_invoice()" class="btn btn-primary py-1 mx-1"
                                                type="button">Download Signed Invoice</button>
                                            <button (click)="printPdf()" class="btn btn-success py-1"
                                                type="button">Print</button>
                                        </div>
                                    </div>
                                    <div>
                                        <table class="table mb-0">
                                            <tbody>
                                                <tr>
                                                    <td width="50%" style="vertical-align: middle;">
                                                        <div class="logo">
                                                            <!-- <div class="mb-3" *ngIf="companyDetails?.company_logo">
                                <img class="img-fluid" [src]="apiDomain + companyDetails?.company_logo" alt="">
                              </div> -->
                                                            <ng-template #logoBlock>
                                                                <div class="mb-3" *ngIf="invoiceInfo?.company_logo">
                                                                    <img class="img-fluid"
                                                                        [src]="apiDomain + invoiceInfo?.company_logo"
                                                                        alt="">
                                                                </div>
                                                            </ng-template>
                                                            <div
                                                                *ngIf="companyDetails?.custom_e_tax_invoice_logo == 1; else logoBlock">
                                                                <img [src]="apiDomain + companyDetails?.custom_e_tax_invoice_logo_image"
                                                                    alt=" " width="50%">
                                                            </div>
                                                            <div>
                                                                <address>
                                                                    <b>
                                                                        <p>{{invoiceInfo?.company_legal_name}}
                                                                            <br>
                                                                            {{invoiceInfo?.company_address_1}}
                                                                            ,{{invoiceInfo?.company_address_2}}
                                                                            ,
                                                                            {{invoiceInfo?.company_location}},
                                                                            {{invoiceInfo?.company_pincode}}
                                                                        </p>
                                                                    </b>
                                                                </address>
                                                            </div>
                                                            <!-- <ng-container
                                                                *ngIf="this.invoiceInfo?.irn_generated == 'Success' && (this.companyDetails?.name == 'FMCOMR-01' || this.companyDetails?.name == 'FPBSA-01' || this.companyDetails?.name == 'HRC-01' || this.companyDetails?.name == 'JWMC-01'); else elseSeller">
                                                                <div>
                                                                    <address>
                                                                        <b>
                                                                            <p> {{irnObject?.irn_request_object?.data?.SellerDtls.LglNm}}
                                                                                <br>
                                                                                {{irnObject?.irn_request_object?.data?.SellerDtls.Addr1}}
                                                                                ,{{irnObject?.irn_request_object?.data?.SellerDtls.Addr2}}
                                                                                ,
                                                                                {{irnObject?.irn_request_object?.data?.SellerDtls.Loc}},
                                                                                {{irnObject?.irn_request_object?.data?.SellerDtls.Pin}}
                                                                            </p>
                                                                        </b>
                                                                    </address>
                                                                </div>
                                                            </ng-container>

                                                            <ng-template #elseSeller>
                                                                <div>
                                                                    <address>
                                                                        <b>
                                                                            <p>{{companyDetails.legal_name}}
                                                                                <br>
                                                                                {{companyDetails?.address_1}}
                                                                                ,{{companyDetails?.address_2}}
                                                                                ,
                                                                                {{companyDetails?.location}},
                                                                                {{companyDetails?.pincode}}
                                                                            </p>
                                                                        </b>
                                                                    </address>
                                                                </div>
                                                            </ng-template> -->
                                                        </div>
                                                    </td>
                                                    <td width="50%" align="right">
                                                        <div class="qr">
                                                            <img class="img-fluid"
                                                                [src]="apiDomain + invoiceInfo.qr_code_image" alt="">
                                                            <span class="imgTextPMS"
                                                                *ngIf="invoiceInfo.irn_generated === 'Cancelled'">
                                                                <h1>Cancelled</h1>
                                                            </span>
                                                        </div>
                                                        <div class="qr">
                                                            <img class="img-fluid"
                                                                [src]="apiDomain + invoiceInfo.b2c_qrimage" alt="">
                                                        </div>

                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>

                                    <div>
                                        <table class="table mb-0">
                                            <tbody>
                                                <tr>
                                                    <td width="100%">
                                                        <div class="border">
                                                            <div class="heading">
                                                                <h4><strong>1. e-Invoice
                                                                        Details</strong></h4>
                                                            </div>
                                                            <div class="c-p-8">
                                                                <table>
                                                                    <tr>
                                                                        <td>
                                                                            <strong>IRN</strong> :
                                                                            {{invoiceInfo.irn_number}}
                                                                        </td>
                                                                        <td><strong>Ack. No : <br>
                                                                            </strong> {{invoiceInfo.ack_no}}
                                                                        </td>
                                                                        <td><strong>Ack. Date : <br>
                                                                            </strong> {{invoiceInfo.ack_date}}
                                                                        </td>
                                                                    </tr>
                                                                </table>
                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>

                                            </tbody>
                                        </table>
                                    </div>

                                    <div>
                                        <table class="table mb-0">
                                            <tbody>
                                                <tr>
                                                    <td width="100%">
                                                        <div class="border">
                                                            <div class="heading">
                                                                <h4><strong>2. Transaction
                                                                        Details</strong></h4>
                                                            </div>
                                                            <div class="c-p-8">
                                                                <table>
                                                                    <tr>
                                                                        <td width="15%">
                                                                            <strong>Category</strong> :
                                                                            {{invoiceInfo.invoice_type}}
                                                                        </td>
                                                                        <td width="25%">
                                                                            <strong>Invoice No
                                                                            </strong> : {{invoiceInfo.invoice_number}}
                                                                        </td>
                                                                        <td *ngIf="this.TaxInvoice" width="20%">
                                                                            <strong>Document Type
                                                                            </strong> : Tax Invoice
                                                                        </td>
                                                                        <td width="20%">
                                                                            <strong>Document Date
                                                                            </strong> :{{invoiceInfo.invoice_date | date
                                                                            :'dd/MM/yyyy'}}
                                                                        </td>
                                                                        <td width="20%">
                                                                            <strong>Room No</strong> :
                                                                            {{invoiceInfo?.room_number}}
                                                                        </td>
                                                                    </tr>

                                                                </table>

                                                                <table class="">

                                                                </table>
                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>

                                            </tbody>
                                        </table>
                                    </div>

                                    <div>
                                        <table class="table mb-0">
                                            <tbody>
                                                <tr>
                                                    <td width="100%">
                                                        <div class="border">
                                                            <div class="heading">
                                                                <h4><strong>3. Party
                                                                        Details</strong></h4>
                                                            </div>
                                                            <div class="c-p-8">
                                                                <table class="party">
                                                                    <tr>
                                                                        <td width="49%" style="vertical-align: top;">
                                                                            <div>
                                                                                <h5><strong>Seller</strong>
                                                                                </h5>
                                                                            </div>

                                                                            <div class="max-500">

                                                                                <div>
                                                                                    <p class="m-0">
                                                                                        <b>GSTIN </b>:
                                                                                        {{invoiceInfo?.company_gst}},<br>
                                                                                        <b>PAN </b>:
                                                                                        {{invoiceInfo.company_gst?.substring(2).slice(0,-3)}},

                                                                                    </p>
                                                                                    <div>
                                                                                        <p class="m-0">
                                                                                            <span
                                                                                                *ngIf="invoiceInfo?.company_cin_number">
                                                                                                <b>CIN No</b>:
                                                                                                {{invoiceInfo?.company_cin_number}},
                                                                                            </span>
                                                                                            <span
                                                                                                *ngIf="invoiceInfo?.company_tin_number">
                                                                                                <b>TIN No</b>:
                                                                                                {{invoiceInfo?.company_tin_number}}
                                                                                            </span>

                                                                                        </p>
                                                                                        <p class="m-0">
                                                                                            <span
                                                                                                *ngIf="invoiceInfo?.company_fssai_number">
                                                                                                <b>FSSAI
                                                                                                    LIC No </b>:
                                                                                                {{invoiceInfo?.company_fssai_number}}
                                                                                            </span>
                                                                                        </p>

                                                                                    </div>

                                                                                    <p>
                                                                                        {{invoiceInfo?.company_name}}<br>{{invoiceInfo?.company_legal_name}}
                                                                                        <br>
                                                                                        {{invoiceInfo?.company_address_1}}
                                                                                        ,{{invoiceInfo?.company_address_2}}
                                                                                        ,
                                                                                        {{invoiceInfo?.company_location}},
                                                                                        {{invoiceInfo?.company_pincode}}
                                                                                    </p>
                                                                                </div>
                                                                            </div>

                                                                            <!-- <ng-container
                                                                                *ngIf="this.invoiceInfo?.irn_generated == 'Success' && this.invoiceInfo?.invoice_type == 'B2B'&&(this.companyDetails.name == 'FMCOMR-01' || this.companyDetails?.name == 'FPBSA-01' || this.companyDetails?.name == 'HRC-01'|| this.companyDetails?.name == 'JWMC-01'); else elseSeller1">

                                                                                <div class="max-500">
                                                                                    <p class="mb-1">
                                                                                        <b>GSTIN </b>:
                                                                                        {{irnObject?.irn_request_object?.data?.SellerDtls.Gstin}},
                                                                                        <b class="ml-1">PAN </b>:
                                                                                        {{irnObject?.irn_request_object?.data?.SellerDtls.Gstin.substring(2,
                                                                                        12)}}
                                                                                    </p>
                                                                                    <p class="mb-1">
                                                                                        <b>FSSAI LIC No </b>: {{null}}
                                                                                    </p>
                                                                                    <p>{{irnObject?.irn_request_object?.data?.SellerDtls.TrdNm}}<br>{{irnObject?.irn_request_object?.data?.SellerDtls.LglNm}}
                                                                                        <br>
                                                                                        {{irnObject?.irn_request_object?.data?.SellerDtls.Addr1}}
                                                                                        ,{{irnObject?.irn_request_object?.data?.SellerDtls.Addr2}}
                                                                                        ,
                                                                                        {{irnObject?.irn_request_object?.data?.SellerDtls.Loc}},
                                                                                        {{irnObject?.irn_request_object?.data?.SellerDtls.Pin}}
                                                                                    </p>
                                                                                </div>
                                                                            </ng-container>

                                                                            <ng-template #elseSeller1>
                                                                                <div class="max-500">

                                                                                    <div>
                                                                                        <b>GSTIN </b>:
                                                                                        {{companyDetails?.gst_number}},<br>
                                                                                        <b>PAN </b>:
                                                                                        {{companyDetails?.pan_number}}, 
                                                                                            
                                                                                            <p class="m-0" >
                                                                                                <b>FSSAI LIC No </b>:
                                                                                        {{companyDetails?.fssai_number}}
                                                                                            </p>
                                                                                        
                                                                                         {{companyDetails?.company_name}}<br>{{companyDetails?.legal_name}}
                                                                                        <br>
                                                                                        {{companyDetails?.address_1}}
                                                                                        ,{{companyDetails?.address_2}} ,
                                                                                        {{companyDetails?.location}},
                                                                                        {{companyDetails?.pincode}}
                                                                                        </div>
                                                                                </div>
                                                                            </ng-template> -->
                                                                        </td>
                                                                        <td width="51%"
                                                                            style="vertical-align: top;border-left: 1px solid rgba(102, 102, 102, 0.479);padding-left: 1%;">
                                                                            <div>
                                                                                <h5><strong>Purchaser</strong>
                                                                                </h5>
                                                                            </div>

                                                                            <div
                                                                                *ngIf="invoiceInfo?.invoice_type === 'B2B'">
                                                                                <p class="mb-1">
                                                                                    <b>Guest Name </b> :
                                                                                    {{invoiceInfo.guest_name}}
                                                                                </p>
                                                                                <p class="mb-1">
                                                                                    <b> GSTIN </b>:
                                                                                    {{invoiceInfo.gst_number}}
                                                                                </p>
                                                                                <p> {{invoiceInfo.legal_name}}
                                                                                    <br>
                                                                                    {{invoiceInfo.address_floor_number?invoiceInfo.address_floor_number+',':''}}
                                                                                    {{invoiceInfo.address_1?invoiceInfo.address_1+',':''}}
                                                                                    {{invoiceInfo.address_2 !==
                                                                                    invoiceInfo.address_1
                                                                                    ?invoiceInfo.address_2+',':''}}
                                                                                    <br>
                                                                                    {{invoiceInfo.address_street?invoiceInfo.address_street+',':''}}
                                                                                    {{invoiceInfo.location?invoiceInfo.location+',':''}}
                                                                                    {{invoiceInfo.pincode}}
                                                                                    {{invoiceInfo.email?","+invoiceInfo.email:''}}
                                                                                    <br>
                                                                                    <b>Place of Supply</b> :
                                                                                    {{invoiceInfo?.place_of_supply_name?.state}}({{(invoiceInfo.place_of_supply
                                                                                    | trim) || 'NA'}})
                                                                                </p>

                                                                            </div>

                                                                            <div
                                                                                *ngIf="invoiceInfo?.invoice_type === 'B2C'">
                                                                                <p class="mb-1">
                                                                                    <b> Guest Name :</b>
                                                                                    {{invoiceInfo.guest_name}}
                                                                                </p>
                                                                                <!-- <p class="mb-1">
                                                                                    <b> Room Number :</b> {{invoiceInfo.room_number}}
                                                                                </p> -->
                                                                                <p class="mb-1">
                                                                                    <b> Confirmation Number :</b>
                                                                                    {{invoiceInfo.confirmation_number}}
                                                                                </p>

                                                                            </div>

                                                                        </td>
                                                                    </tr>

                                                                </table>

                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>

                                            </tbody>
                                        </table>
                                    </div>

                                    <div>
                                        <!-- <table class="table mb-0">
                                            <tbody>
                                                <tr>
                                                    <td width="100%"> -->
                                        <div class="pdf-table">
                                            <div class="heading b-h">
                                                <h4><strong>4.Items
                                                        Details</strong></h4>
                                            </div>
                                            <div class="c-p-8  table-responsive">
                                                <table class="table pdfTable goods mb-0">
                                                    <thead>
                                                        <tr>
                                                            <!-- <th>S.NO</th> -->
                                                            <th>Date</th>
                                                            <th>Product Description
                                                            </th>

                                                            <th style="width: 80px;">SAC/HSN</th>
                                                            <th>Item Value</th>

                                                            <th>GST Rate</th>
                                                            <th>GST Amount</th>
                                                            <th>VAT</th>

                                                            <!-- <th>S.CESS</th> -->
                                                            <th>CESS</th>




                                                            <th>
                                                                Total Item Value
                                                            </th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>


                                                        <tr *ngFor="let item of invoiceInfo.items; let i = index">
                                                            <!-- <td>
                                        {{i+1}}</td> -->
                                                            <td style="min-width: 80px;">
                                                                {{item.date | date:'dd-MM-yyyy'}}</td>
                                                            <td style="max-width: 140px;">
                                                                {{item.description}}
                                                            </td>
                                                            <td>
                                                                {{item.sac_code}}
                                                            </td>
                                                            <td class="text-right">
                                                                {{item.item_value}}
                                                            </td>
                                                            <td class="text-right">
                                                                {{item.gst_rate}} %
                                                            </td>
                                                            <td class="text-right">
                                                                {{item.sgst_amount + item.igst_amount + item.cgst_amount
                                                                | number : '0.2'}}
                                                            </td>
                                                            <td class="text-right">{{item.vat_amount}}</td>
                                                            <!-- <td class="text-right">
                                                                {{item.state_cess_amount}}</td> -->
                                                            <td class="text-right">
                                                                {{item.cess_amount}}</td>
                                                            <td class="text-right">
                                                                {{item.item_value_after_gst | number : '0.2'}}
                                                            </td>
                                                        </tr>

                                                    </tbody>
                                                </table>

                                            </div>

                                        </div>
                                        <!-- </td>
                                                </tr>

                                            </tbody>
                                        </table> -->
                                    </div>

                                    <div class="c-border-table"></div>

                                    <div class="">
                                        <table class="table  goods goods2" style="margin: 0;">
                                            <thead>
                                                <tr>
                                                    <th>HSN/SAC CODE</th>
                                                    <th>SALES
                                                    </th>

                                                    <th>CGST

                                                    </th>
                                                    <th>SGST
                                                    </th>
                                                    <th>IGST

                                                    </th>

                                                    <!-- <th>S.CESS</th> -->
                                                    <th>CESS</th>
                                                    <!-- latest -->


                                                    <th>
                                                        VAT
                                                    </th>


                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr *ngFor="let item of invoiceInfo.sac_hsn_based_taxes">

                                                    <td>
                                                        {{item.sac_hsn_code}}</td>
                                                    <td class="text-right">
                                                        {{item.amount_before_gst| number : '0.2'}}</td>
                                                    <td class="text-right">
                                                        {{item.cgst| number : '0.2'}}</td>
                                                    <td class="text-right">
                                                        {{item.sgst| number : '0.2'}}</td>
                                                    <td class="text-right">
                                                        {{item.igst| number : '0.2'}}</td>
                                                    <td class="text-right">
                                                        {{item.cess | number : '0.2'}}</td>
                                                    <!-- <td class="text-right">
                                                        {{item.state_cess | number : '0.2'}}</td> -->
                                                    <td class="text-right">{{item?.vat | number : '0.2'}}</td>
                                                </tr>


                                            </tbody>
                                        </table>

                                    </div>
                                    <div class=" my-2 c-border-table"></div>
                                    <div class="">
                                        <table class="table  goods goods2" style="margin: 0;">
                                            <thead>
                                                <tr>
                                                    <th>Tax'ble Value</th>
                                                    <th>CGST </th>

                                                    <th>SGST </th>
                                                    <th>IGST </th>

                                                    <th>CESS </th>
                                                    <!-- <th>State CESS </th> -->
                                                    <th>Discount</th>
                                                    <th>
                                                        Other Charges
                                                    </th>
                                                    <th *ngIf="!companyDetails.vat_reporting">Vat</th>
                                                    <th>
                                                        Round off
                                                    </th>
                                                    <th>
                                                        Total Inv. Value
                                                    </th>

                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>

                                                    <td class="text-right">
                                                        {{invoiceInfo?.pms_invoice_summary_without_gst| number : '0.2'}}
                                                    </td>
                                                    <td class="text-right">{{invoiceInfo?.cgst_amount| number : '0.2'}}
                                                    </td>
                                                    <td class="text-right">{{invoiceInfo?.sgst_amount| number : '0.2'}}
                                                    </td>
                                                    <td class="text-right">{{invoiceInfo?.igst_amount| number : '0.2'}}
                                                    </td>
                                                    <td class="text-right">{{invoiceInfo?.total_central_cess_amount|
                                                        number : '0.2'}}</td>
                                                    <!-- <td class="text-right">{{invoiceInfo?.total_state_cess_amount|
                                                        number : '0.2'}}</td> -->
                                                    <td class="text-right">0</td>
                                                    <td class="text-right">
                                                        {{companyDetails.vat_reporting?invoiceInfo?.other_charges:invoiceInfo?.other_charges_before_tax
                                                        | number : '0.2'}}</td>
                                                    <td class="text-right" *ngIf="!companyDetails.vat_reporting">
                                                        {{invoiceInfo?.total_vat_amount | number : '0.2'}}</td>
                                                    <td class="text-right">{{invoiceInfo?.invoice_round_off_amount|
                                                        number : '0.2'}}</td>
                                                    <td class="text-right">{{invoiceInfo?.sales_amount_after_tax| number
                                                        : '0.2'}}</td>
                                                </tr>


                                            </tbody>
                                        </table>
                                    </div>

                                    <div class="border my-2">
                                        <table class="table table-light mb-0">
                                            <tbody>
                                                <tr>
                                                    <td width="100%">
                                                        <table width="100" class="table mb-1">
                                                            <tbody>
                                                                <tr>
                                                                    <td width="50%" style="vertical-align: middle;">
                                                                        <div class="">

                                                                            <div class="c-p-8">
                                                                                <div style="padding: 2px 5px">
                                                                                    <strong>Generated
                                                                                        By</strong> :
                                                                                    {{loginData?.full_name}}
                                                                                </div>
                                                                                <div style="padding:2px 5px">
                                                                                    <strong>Print
                                                                                        Date
                                                                                    </strong> : {{myDate |
                                                                                    date:'mediumDate'}}
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </td>
                                                                    <!-- <td width="33.33%" align="center" style="vertical-align: middle;">
                                    <div class="">
                                      <div class="c-p-8">
                                                                              <img class="img-fluid"
                                                                                  src="images/bar.PNG"
                                                                                  alt="">
                                                                          </div>
                                    </div>
                                  </td> -->
                                                                    <td width="30%" align="right">
                                                                        <div class="">

                                                                            <div class="c-p-8">
                                                                                <div>
                                                                                    <!-- <img class="img-fluid"
                                                                                      src="images/sign.PNG"
                                                                                      alt=""> -->
                                                                                </div>
                                                                                <div>
                                                                                    <div style="padding:2px 5px">
                                                                                        <!-- <b>Amount In Words :</b> {{invoiceInfo?.sales_amount_after_tax | amountToWord }}
                                                                                        <br> -->
                                                                                        <b>Amount In Words
                                                                                            :</b>
                                                                                        {{invoiceInfo?.amount_in_word ||
                                                                                        (invoiceInfo?.sales_amount_after_tax
                                                                                        | amountToWord) }}
                                                                                        <br>

                                                                                    </div>
                                                                                    <div style="padding:2px 5px">
                                                                                        <strong> System Generated On
                                                                                        </strong> :
                                                                                        <!-- {{invoiceInfo.ack_date
                                                                                      |
                                                                                      date:'medium'}} -->
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </td>
                                                                    <td *ngIf="eTaxInvoiceDownloadBtn && invoiceInfo?.invoice_type === 'B2C' && (invoiceInfo.irn_generated == 'Success' || invoiceInfo?.irn_generated == 'Cancelled')"
                                                                        width="20%" align="right"
                                                                        style="vertical-align: bottom;">
                                                                        <div class='sign_images'>
                                                                            <!-- <img class="img-fluid" src="assets/images/sign.png" alt="Signature" > -->
                                                                            <img class="img-fluid"
                                                                                [src]="apiDomain + this.signature_img"
                                                                                alt="">

                                                                        </div>
                                                                    </td>
                                                                </tr>

                                                            </tbody>
                                                        </table>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <div *ngIf="companyDetails?.custom_e_tax_invoice_footer == 1">
                                        <img [src]="apiDomain + companyDetails?.custom_e_tax_invoice_footer_image"
                                            alt=" " width="100%">
                                    </div>

                                </div>
                            </div>
                        </ng-template>
                        <!-- Potrait end -->

                        <!-- Landscape start -->
                        <ng-template ngbNavContent *ngIf="this.companyDetails.e_tax_format == 'Landscape'">
                            <div id="prints">
                                <div class="pt-3 summary  preview section-to-print" [ngClass]="{'no-print': printPdf}">
                                    <div class="row mb-2">
                                        <div class="col-md-6">
                                            <div class="d-flex">
                                                <h5 class="text-capitalize text-primary"><strong>PMS Invoice</strong>
                                                </h5>
                                                <!-- <p class="mb-0" style="line-height: 30px; margin-left: 10px;"> --
                                                    <strong> {{companyDetails.e_tax_format}}</strong>
                                                </p> -->
                                            </div>
                                        </div>
                                        <div class="col-md-6 text-right section-to-print">
                                            <!-- <button *ngIf="this.companyDetails.e_tax_format == 'Landscape'"
                                                class="btn btn-sm btn-primary mr-1"
                                                (click)="this.companyDetails.e_tax_format = 'Portrait'">Portrait</button>
                                            <button *ngIf="this.companyDetails.e_tax_format == 'Portrait'"
                                                class="btn btn-sm btn-primary mr-1"
                                                (click)="this.companyDetails.e_tax_format = 'Landscape'">Landscape</button> -->
                                            <button
                                                *ngIf="eTaxInvoiceDownloadBtn && invoiceInfo?.invoice_type === 'B2C' && (invoiceInfo.irn_generated == 'Success' || invoiceInfo?.irn_generated == 'Cancelled')"
                                                (click)="downlaod_e_tax_invoice()" class="btn btn-primary py-1 mx-1"
                                                type="button">Download Signed Invoice</button>
                                            <button (click)="printPdf()" class="btn btn-success py-1"
                                                type="button">Print</button>
                                        </div>
                                    </div>
                                    <div>
                                        <table class="table mb-0 goods3">
                                            <tbody>
                                                <tr>
                                                    <td width="25%" style="vertical-align: middle;">
                                                        <div class="logo">

                                                            <ng-template #logoBlock>
                                                                <div class="mb-3" *ngIf="companyDetails?.company_logo">
                                                                    <img class="img-fluid"
                                                                        [src]="apiDomain + companyDetails?.company_logo"
                                                                        alt="">
                                                                </div>
                                                            </ng-template>
                                                            <div *ngIf="companyDetails?.custom_e_tax_invoice_logo == 1; else logoBlock"
                                                                class="mb-4">
                                                                <img [src]="apiDomain + companyDetails?.custom_e_tax_invoice_logo_image"
                                                                    alt="header" width="60%">
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <td width="25%">

                                                        <div>
                                                            <address>
                                                                <b>
                                                                    <p>{{invoiceInfo?.company_name}}<br>
                                                                        {{invoiceInfo.company_legal_name}}<br>
                                                                        {{invoiceInfo?.company_address_1}}
                                                                        ,{{invoiceInfo?.company_address_2}}
                                                                        ,
                                                                        {{invoiceInfo?.company_location}},
                                                                        {{invoiceInfo?.company_pincode}}
                                                                    </p>
                                                                </b>
                                                            </address>
                                                            <p class="mb-0"><b>GSTIN </b>:
                                                                {{invoiceInfo?.company_gst}}</p>
                                                            <p class="mb-0"><b>Tel </b>: </p>
                                                            <p class="mb-0"><b>E-Mail </b>: </p>
                                                            <p class="mb-0"><b>PAN No. </b>:
                                                                {{invoiceInfo?.company_gst?.substring(2).slice(0,-3)}}
                                                            </p>
                                                            <p class="mb-0"><b>IRN </b>: {{invoiceInfo.irn_number}}</p>
                                                            <p class="mb-0"><b>Ack. No</b>: {{invoiceInfo.ack_no}}</p>
                                                            <p class="mb-0"><b>IRN Date </b>: {{invoiceInfo.ack_date |
                                                                date}}</p>
                                                        </div>

                                                        <!-- <ng-container
                                                            *ngIf="this.invoiceInfo?.irn_generated == 'Success' && this.invoiceInfo?.invoice_type == 'B2B' && (this.companyDetails?.name == 'FMCOMR-01' || this.companyDetails?.name == 'FPBSA-01' || this.companyDetails?.name == 'HRC-01' || this.companyDetails?.name == 'JWMC-01'); else elseSeller">
                                                            <div>
                                                                <address>
                                                                    <b>
                                                                        <p> {{irnObject?.irn_request_object?.data?.SellerDtls.LglNm}}
                                                                            <br>
                                                                            {{irnObject?.irn_request_object?.data?.SellerDtls.Addr1}}
                                                                            ,{{irnObject?.irn_request_object?.data?.SellerDtls.Addr2}}
                                                                            ,
                                                                            {{irnObject?.irn_request_object?.data?.SellerDtls.Loc}},
                                                                            {{irnObject?.irn_request_object?.data?.SellerDtls.Pin}}
                                                                        </p>
                                                                    </b>
                                                                </address>
                                                                <p class="mb-0"><b>GSTIN </b>:
                                                                    {{irnObject?.irn_request_object?.data?.SellerDtls.Gstin}}
                                                                </p>
                                                                <p class="mb-0"><b>Tel </b>: </p>
                                                                <p class="mb-0"><b>E-Mail </b>: </p>
                                                                <p class="mb-0"><b>PAN No. </b>:
                                                                    {{irnObject?.irn_request_object?.data?.SellerDtls.Gstin.substring(2,
                                                                    12)}}</p>
                                                                <p class="mb-0"><b>IRN </b>: {{invoiceInfo.irn_number}}
                                                                </p>
                                                                <p class="mb-0"><b>Ack. No</b>: {{invoiceInfo.ack_no}}
                                                                </p>
                                                                <p class="mb-0"><b>IRN Date </b>: {{invoiceInfo.ack_date
                                                                    | date}}</p>
                                                            </div>
                                                        </ng-container>

                                                        <ng-template #elseSeller>
                                                            <div>
                                                                <address>
                                                                    <b>
                                                                        <p>{{companyDetails?.company_name}}<br>
                                                                            {{companyDetails.legal_name}}<br>
                                                                            {{companyDetails?.address_1}}
                                                                            ,{{companyDetails?.address_2}}
                                                                            ,
                                                                            {{companyDetails?.location}},
                                                                            {{companyDetails?.pincode}}
                                                                        </p>
                                                                    </b>
                                                                </address>
                                                                <p class="mb-0"><b>GSTIN </b>:
                                                                    {{companyDetails?.gst_number}}</p>
                                                                <p class="mb-0"><b>Tel </b>: </p>
                                                                <p class="mb-0"><b>E-Mail </b>: </p>
                                                                <p class="mb-0"><b>PAN No. </b>:
                                                                    {{companyDetails?.pan_number}}</p>
                                                                <p class="mb-0"><b>IRN </b>: {{invoiceInfo.irn_number}}
                                                                </p>
                                                                <p class="mb-0"><b>Ack. No</b>: {{invoiceInfo.ack_no}}
                                                                </p>
                                                                <p class="mb-0"><b>IRN Date </b>: {{invoiceInfo.ack_date
                                                                    | date}}</p>
                                                            </div>
                                                        </ng-template> -->

                                                    </td>
                                                    <td width="25%">
                                                        <div>
                                                            <p class="mb-0"><b>Invoice No. </b>:
                                                                {{invoiceInfo.invoice_number}}</p>
                                                            <p class="mb-0"><b>Invoice date </b>:
                                                                {{invoiceInfo.invoice_date | date : 'dd/MM/yyyy'}}</p>
                                                            <p class="mb-0" *ngIf="companyDetails?.website"><b>Website
                                                                </b>: {{companyDetails?.website}} </p>
                                                            <p class="mb-0"><b>VAT No. </b>: </p>
                                                            <p class="mb-0"><b>CIN </b>: </p>
                                                            <p class="mb-0"><b>Sales Order No </b>: </p>
                                                            <p class="mb-0"><b>Whether Tax is Payable on Reverse Charge
                                                                </b>: No</p>
                                                        </div>
                                                    </td>
                                                    <td width="25%" align="right">
                                                        <div class="qr">
                                                            <img class="img-fluid"
                                                                [src]="apiDomain + invoiceInfo?.qr_code_image" alt="">
                                                            <span class="imgTextPMS"
                                                                *ngIf="invoiceInfo.irn_generated === 'Cancelled'">
                                                                <h1>Cancelled</h1>
                                                            </span>
                                                        </div>

                                                        <div class="qr">
                                                            <img class="img-fluid"
                                                                [src]="apiDomain + invoiceInfo.credit_qr_code_image"
                                                                alt="">
                                                        </div>
                                                        <div class="qr">
                                                            <img class="img-fluid"
                                                                [src]="apiDomain + invoiceInfo.b2c_qrimage" alt="">
                                                        </div>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>

                                    <div>
                                        <table class="table goods3 mb-0">
                                            <tbody>
                                                <tr>
                                                    <td width="100%">
                                                        <div class="">
                                                            <div class="c-p-8">
                                                                <table class="party">
                                                                    <tr>
                                                                        <td width="50%" style="vertical-align: top;">
                                                                            <p class="mb-1"><b><u>Bill To
                                                                                        Details:</u></b></p>
                                                                            <div
                                                                                *ngIf="invoiceInfo?.invoice_type === 'B2B'">
                                                                                <p class="mb-1">
                                                                                    <b>{{invoiceInfo.guest_name}}<br>
                                                                                        {{invoiceInfo.legal_name}}
                                                                                        <br>
                                                                                        {{invoiceInfo.address_floor_number?invoiceInfo.address_floor_number+',':''}}
                                                                                        {{invoiceInfo.address_1?invoiceInfo.address_1+',':''}}
                                                                                        {{invoiceInfo.address_2 !==
                                                                                        invoiceInfo.address_1
                                                                                        ?invoiceInfo.address_2+',':''}}
                                                                                        <br>
                                                                                        {{invoiceInfo.address_street?invoiceInfo.address_street+',':''}}
                                                                                        {{invoiceInfo.location?invoiceInfo.location+',':''}}
                                                                                        {{invoiceInfo.pincode}}
                                                                                    </b>
                                                                                    <b>Place of Supply </b>:
                                                                                    {{invoiceInfo?.place_of_supply_name?.state}}({{(invoiceInfo.place_of_supply
                                                                                    | trim) || 'NA'}})
                                                                                </p>
                                                                                <p class="mb-0">
                                                                                    <b> GSTIN </b>:
                                                                                    {{invoiceInfo.gst_number}},
                                                                                </p>
                                                                                <p class="mb-0">
                                                                                    <b>Tel </b>:
                                                                                    <!-- {{invoiceInfo?.gst_number.substr(2, 10)}} -->
                                                                                </p>
                                                                                <p class="mb-0">
                                                                                    <b>Email</b>:
                                                                                    {{invoiceInfo.email?","+invoiceInfo.email:''}}
                                                                                </p>
                                                                                <p class="mb-0">
                                                                                    <b> Place of Supply </b>:
                                                                                    {{invoiceInfo?.place_of_supply_name?.state}}({{(invoiceInfo.place_of_supply
                                                                                    | trim) || 'NA'}})
                                                                                </p>
                                                                            </div>


                                                                            <div
                                                                                *ngIf="invoiceInfo?.invoice_type === 'B2C'">
                                                                                <p class="mb-0">
                                                                                    <b> Guest Name :</b>
                                                                                    {{invoiceInfo.guest_name}}
                                                                                </p>
                                                                                <!-- <p class="mb-1">
                                                                                  <b> Room Number :</b> {{invoiceInfo.room_number}}
                                                                              </p> -->
                                                                                <p class="mb-0">
                                                                                    <b> Confirmation Number :</b>
                                                                                    {{invoiceInfo.confirmation_number}}
                                                                                </p>

                                                                            </div>
                                                                        </td>
                                                                        <td width="50%" style="vertical-align: top;">
                                                                            <!-- <p class="mb-0"><b><u>Registered Office Address:</u></b></p>
                                                                            <p>
                                                                                Raheja Tower Plot No C30 Block G,<br>
                                                                                Bandra Kurla Complex Bandra E,<br>
                                                                                54B Lands End, Sisters Bunglow, Ground 1st and 2nd Floor, Wipro Limited<br>
                                                                                www.chalethotels.com</p> -->
                                                                        </td>
                                                                    </tr>

                                                                </table>

                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>

                                            </tbody>
                                        </table>
                                    </div>


                                    <div>
                                        <div class="pdf-table">
                                            <div class="c-p-8  table-responsive goods3">
                                                <table class="table pdfTable goods mb-0">
                                                    <thead>
                                                        <tr>
                                                            <th rowspan="2">S.NO</th>
                                                            <th rowspan="2">Service<br> Description</th>
                                                            <th rowspan="2">HSN/SAC <br>Code </th>
                                                            <th>UQC</th>
                                                            <th>Unit <br>Price</th>
                                                            <th>Amount</th>
                                                            <th>Discount</th>
                                                            <th>Taxable<br> Value</th>
                                                            <th>CGST Rate<br> (%)</th>
                                                            <th>CGST<br> Amt (Rs.)</th>
                                                            <th>SGST/UTGST<br> Rate (%)</th>
                                                            <th>SGST/UTGST<br> Amt(Rs.)</th>
                                                            <th>IGST Rate <br>(%)</th>
                                                            <th>IGST <br> Amt(Rs.)</th>
                                                            <th>Cess Adv <br> Rate %</th>
                                                            <th>Cess Adv Amt. <br>(Rs)</th>
                                                            <th>Total Amt.</th>
                                                        </tr>
                                                        <tr>
                                                            <th>Qty.</th>
                                                            <th>(Rs.)</th>
                                                            <th>(Rs.)</th>
                                                            <th>(Rs.)</th>
                                                            <th>(Rs.)</th>
                                                            <th>(%)</th>
                                                            <th>(Rs.)</th>
                                                            <th>(%)</th>
                                                            <th>(Rs.)</th>
                                                            <th>(%)</th>
                                                            <th>(Rs.)</th>
                                                            <th>(%)</th>
                                                            <th>(Rs.)</th>
                                                            <th>(Rs.)</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>

                                                        <tr *ngFor="let item of invoiceInfo.items; let i = index">
                                                            <td>{{i+1}}</td>
                                                            <td>{{item.item_name}}</td>
                                                            <td>{{item.sac_code}}</td>
                                                            <td class="text-right">
                                                                {{item.quantity}}</td>
                                                            <td class="text-right">
                                                                {{item.item_taxable_value}}
                                                            </td>
                                                            <td class="text-right">
                                                                {{item.item_taxable_value}}
                                                            </td>
                                                            <td class="text-right">
                                                                {{item.discount_value}}</td>
                                                            <td class="text-right">
                                                                {{item.item_taxable_value}}</td>
                                                            <td class="text-right">
                                                                {{item.cgst}}</td>
                                                            <td class="text-right">
                                                                {{item.cgst_amount}}
                                                            </td>
                                                            <td class="text-right">
                                                                {{item.sgst}}
                                                            </td>
                                                            <td class="text-right">
                                                                {{item.sgst_amount}}
                                                            </td>
                                                            <td class="text-right">
                                                                {{item.igst}}
                                                            </td>
                                                            <td class="text-right">
                                                                {{item.igst_amount}}
                                                            </td>
                                                            <td class="text-right">
                                                                {{item.cess}}
                                                            </td>
                                                            <td class="text-right">
                                                                {{item.cess_amount}}
                                                            </td>
                                                            <td class="text-right">
                                                                {{item.item_value_after_gst}}
                                                            </td>

                                                        </tr>
                                                        <tr style="background-color: #f4f4f4;">
                                                            <td colspan="7" class="border-right border-bottom">
                                                                <strong>Grand Total</strong>
                                                            </td>
                                                            <td class="text-right border-right border-bottom">
                                                                <strong>{{invoiceInfo.amount_before_gst}}</strong>
                                                            </td>
                                                            <td colspan="2"
                                                                class="text-right border-right border-bottom">
                                                                <strong>{{invoiceInfo.cgst_amount}}</strong>
                                                            </td>
                                                            <td colspan="2"
                                                                class="text-right border-right border-bottom">
                                                                <strong>{{invoiceInfo.sgst_amount}}</strong>
                                                            </td>
                                                            <td colspan="2"
                                                                class="text-right border-right border-bottom">
                                                                <strong>{{invoiceInfo.igst_amount}}</strong>
                                                            </td>
                                                            <td colspan="2"
                                                                class="text-right border-right border-bottom">
                                                                <strong>{{invoiceInfo?.cess_amount}}</strong>
                                                            </td>
                                                            <td class="text-right border-bottom">
                                                                <strong>{{invoiceInfo.total_invoice_amount}}</strong>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td colspan="12" class="border-right border-bottom"></td>
                                                            <td colspan="3" class="border-right border-bottom">
                                                                <strong>Sub Total (Rs.) </strong>
                                                            </td>
                                                            <td colspan="2" class="text-right border-bottom">
                                                                <strong>{{invoiceInfo.total_invoice_amount}}</strong>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td colspan="12" class="border-right border-bottom"></td>
                                                            <td colspan="3" class="border-right border-bottom">
                                                                <strong>Round off (Rs.) </strong>
                                                            </td>
                                                            <td colspan="2" class="text-right border-bottom">
                                                                <strong></strong>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td colspan="12" class="border-right"></td>
                                                            <td colspan="3" class="border-right">
                                                                <strong>Invoice Value (Rs.)</strong>
                                                            </td>
                                                            <td colspan="2" class="text-right">
                                                                <strong>{{invoiceInfo.total_invoice_amount}}</strong>
                                                            </td>
                                                        </tr>

                                                    </tbody>
                                                </table>


                                            </div>

                                        </div>
                                    </div>


                                    <div class=" my-2">
                                        <table class="table table-light mb-0">
                                            <tbody>
                                                <tr>
                                                    <td width="100%">
                                                        <table width="100" class="table goods3"
                                                            style="margin-bottom: 0;">
                                                            <tbody>
                                                                <tr>
                                                                    <td width="25%" align="center"
                                                                        style="vertical-align: bottom;">
                                                                        <p class="mb-0"><strong> Guest
                                                                                Signature</strong></p>
                                                                    </td>
                                                                    <td width="50%" align="center">
                                                                        <div class="table-bottom">
                                                                            <table class="table">
                                                                                <tr>
                                                                                    <td>
                                                                                        <p class="mb-0">Payment Details:
                                                                                        </p>
                                                                                    </td>
                                                                                    <td></td>
                                                                                </tr>
                                                                                <tr>
                                                                                    <td>
                                                                                        <p class="mb-0">Bank Account :
                                                                                        </p>
                                                                                    </td>
                                                                                    <td>
                                                                                        <p class="mb-0">Payment Due Date
                                                                                            :</p>
                                                                                    </td>
                                                                                </tr>
                                                                                <tr>
                                                                                    <td>
                                                                                        <p class="mb-0">IFSC Code :</p>
                                                                                    </td>
                                                                                    <td>
                                                                                        <p class="mb-0">Payment Terms :
                                                                                        </p>
                                                                                    </td>
                                                                                </tr>
                                                                                <tr>
                                                                                    <td>
                                                                                        <p class="mb-0">Beneficiary :
                                                                                        </p>
                                                                                    </td>
                                                                                    <td></td>
                                                                                </tr>
                                                                            </table>
                                                                        </div>
                                                                    </td>
                                                                    <td width="25%" align="center"
                                                                        style="vertical-align: middle;">
                                                                        <p class="mb-0"><strong> For &nbsp;&nbsp;&nbsp;
                                                                                {{invoiceInfo?.company_legal_name}}</strong>
                                                                        </p>
                                                                        <br>
                                                                        <br>
                                                                        <p class="mb-0"><strong> Authorised Signatory
                                                                            </strong></p>
                                                                    </td>

                                                                </tr>

                                                            </tbody>
                                                        </table>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>


                                    <div *ngIf="companyDetails?.custom_e_tax_invoice_footer == 1">
                                        <img [src]="apiDomain + companyDetails?.custom_e_tax_invoice_footer_image"
                                            alt="header" width="100%">
                                    </div>

                                </div>
                            </div>
                        </ng-template>
                        <!-- Landscape end -->
                    </li>


                    <li [ngbNavItem]="6"
                        *ngIf="(invoiceInfo?.irn_generated === 'Success' || invoiceInfo?.irn_generated === 'Cancelled') && invoiceInfo?.invoice_type === 'B2B' ">
                        <a ngbNavLink>E-Tax Invoice </a>
                        <ng-template ngbNavContent *ngIf="this.companyDetails.company_code === 'HINDIA-01'">
                            <div class="pt-3 summary preview " id="section-to-print">
                                <div>
                                    <!-- <div class="text-center mb-3">
                                    <span (click)="InvoicePdf('tax')" class="badge cursor-pointer badge-pill badge-primary py-2 px-3">Tax Invoice</span>
                                    <span  (click)="InvoicePdf('credit')" *ngIf="invoiceInfo?.has_credit_items === 'Yes'" class="badge cursor-pointer badge-pill badge-secondary py-2 ml-3 px-3">Credit Invoice</span>
                                </div> -->
                                </div>


                                <div class="min-h">
                                    <div>

                                        <div class="row mb-2">
                                            <div class="col-md-6">
                                                <h5 class="text-capitalize text-primary"><strong>{{invoicetypeName ?
                                                        invoicetypeName : 'Tax'}} Invoice</strong></h5>
                                            </div>
                                            <div class="col-md-6 text-right section-to-print" id="pdfBtn">
                                                <button (click)="printPdf()" class="btn btn-primary py-1"
                                                    type="button">Print</button>
                                            </div>
                                        </div>

                                        <div class="">

                                            <div>
                                                <table class="table mb-0">
                                                    <tbody>
                                                        <tr>
                                                            <td width="60%" style="vertical-align: middle;">
                                                                <div class="logo">
                                                                    <ng-template #logoBlock>
                                                                        <div class="mb-3"
                                                                            *ngIf="invoiceInfo?.company_logo">
                                                                            <img class="img-fluid"
                                                                                [src]="apiDomain + invoiceInfo?.company_logo"
                                                                                alt="">
                                                                        </div>
                                                                    </ng-template>
                                                                    <div *ngIf="companyDetails?.custom_e_tax_invoice_logo == 1; else logoBlock"
                                                                        class="mb-4">
                                                                        <img [src]="apiDomain + companyDetails?.custom_e_tax_invoice_logo_image"
                                                                            alt=" " width="40%">
                                                                    </div>
                                                                    <p><span class="font-weight-bold">IRN No : </span>
                                                                        {{invoiceInfo.irn_number}}</p>
                                                                    <div class="row">
                                                                        <div class="col-4">
                                                                            <p><span class="font-weight-bold">Category
                                                                                    Code :</span> {{invoiceInfo.suptyp}}
                                                                            </p>
                                                                        </div>
                                                                        <div class="col-4">
                                                                            <p class="float-left"><span
                                                                                    class="font-weight-bold"> Ack. No
                                                                                    :</span> {{invoiceInfo.ack_no}}</p>
                                                                        </div>
                                                                        <div class="col-4">
                                                                            <p class="float-right"><span
                                                                                    class="font-weight-bold"> Ack. Date
                                                                                    :</span> {{invoiceInfo.ack_date}}
                                                                            </p>
                                                                        </div>
                                                                    </div>

                                                                </div>
                                                            </td>
                                                            <td width="40%" align="right">
                                                                <div class="qr">
                                                                    <img class="img-fluid"
                                                                        [src]="apiDomain + invoiceInfo.qr_code_image"
                                                                        alt="">
                                                                    <p class="qrCode font-weight-bold ">QR Code :</p>
                                                                    <span class="imgTextPMS"
                                                                        *ngIf="invoiceInfo.irn_generated === 'Cancelled'">
                                                                        <h1>Cancelled</h1>
                                                                    </span>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                            <div class="extab mb-2 border">
                                                <h5 class="text-center font-weight-bold bg-primary">TAX INVOICE</h5>
                                                <h6 class="text-center">GSTIN: {{invoiceInfo?.company_gst}}</h6>
                                                <h6 class="text-center">PAN:
                                                    {{invoiceInfo?.company_gst?.substring(2).slice(0, -3)}}</h6>
                                                <table class="table mb-0">
                                                    <tbody>
                                                        <tr>
                                                            <td>
                                                                <p><span class="font-weight-bold">Invoice No:
                                                                    </span>{{invoiceInfo.invoice_number}}</p>
                                                            </td>
                                                            <td>
                                                                <p><span class="font-weight-bold">Transport Mode:</span>
                                                                </p>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>
                                                                <p><span class="font-weight-bold">Invoice date:</span>
                                                                    {{invoiceInfo.invoice_date}}</p>
                                                            </td>
                                                            <td>
                                                                <p><span class="font-weight-bold">Vehicle number:</span>
                                                                </p>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td class="borderZero">
                                                                <table class="table m-0">
                                                                    <tbody>
                                                                        <tr>
                                                                            <td><span class="font-weight-bold">Reverse
                                                                                    Charge (Y/N):</span> </td>
                                                                            <td></td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                            </td>
                                                            <td>
                                                                <p><span class="font-weight-bold">Date of
                                                                        Supply:</span>{{invoiceInfo.irn_generated_time}}
                                                                </p>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td class="borderZero">
                                                                <table class="table m-0">
                                                                    <tbody>
                                                                        <tr>
                                                                            <td><span
                                                                                    class="font-weight-bold">State:</span>
                                                                                <span
                                                                                    *ngIf='invoiceInfo.place_of_supply<10'>{{invoiceInfo?.place_of_supply_name?.state}}({{('0'+invoiceInfo.place_of_supply
                                                                                    | trim) || 'NA'}})</span>
                                                                                <span
                                                                                    *ngIf='invoiceInfo.place_of_supply>=10'>{{invoiceInfo?.place_of_supply_name?.state}}({{(invoiceInfo.place_of_supply
                                                                                    | trim) || 'NA'}})</span>

                                                                                <!-- <span
                                                                                    *ngIf="invoiceInfo?.company_place_of_supply<10">
                                                                                    {{'0'+invoiceInfo?.company_place_of_supply}}</span>
                                                                                <span
                                                                                    *ngIf="invoiceInfo?.company_place_of_supply>=10">
                                                                                    {{invoiceInfo?.company_place_of_supply}}</span> -->

                                                                            </td>
                                                                            <td><span
                                                                                    class="font-weight-bold">Code:</span>
                                                                            </td>
                                                                            <td
                                                                                *ngIf="invoiceInfo?.company_state_code<10">
                                                                                {{'0'+invoiceInfo?.company_state_code}}
                                                                            </td>
                                                                            <td
                                                                                *ngIf="invoiceInfo?.company_state_code>=10">
                                                                                {{invoiceInfo?.company_state_code}}</td>

                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                            </td>
                                                            <td>
                                                                <p><span class="font-weight-bold">Place of Supply:
                                                                    </span> <span
                                                                        *ngIf="invoiceInfo?.company_place_of_supply<10">{{'0'+invoiceInfo?.company_place_of_supply}}
                                                                    </span>
                                                                    <span
                                                                        *ngIf="invoiceInfo?.company_place_of_supply>=10">{{invoiceInfo?.company_place_of_supply}}
                                                                    </span>
                                                                </p>
                                                            </td>
                                                        </tr>
                                                    </tbody>

                                                </table>

                                                <table class="table mb-0">
                                                    <thead class="bgColor">
                                                        <tr>
                                                            <th class="text-center w-50">Seller</th>
                                                            <th class="text-center">Buyer</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr>
                                                            <td rowspan="5">
                                                                <p><span class="font-weight-bold">CIN NO :
                                                                        U55101DL2009PTC189886 </span><br> WAVE
                                                                    HOSPITALITY PRIVATE LIMITED REG OFF : HOTEL HOLIDAY
                                                                    INN ASSET AREA-12, HOSPITALITY DISTRICT AEROCITY,
                                                                    DELHI
                                                                    INTERNATIONAL AIRPORT MAHIPALPUR, NEW DELHI-110037,
                                                                    INDIA T: +91 11 4222 2000 F: 4222 2020
                                                                    <br> Email : dinesh@wavehospitality.com
                                                                </p>
                                                            </td>
                                                            <td>
                                                                <p><span class="font-weight-bold">Name:</span>
                                                                    {{invoiceInfo.legal_name}}</p>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <!-- <td>
                                                                <p><span class="font-weight-bold">Address:</span></p>
                                                            </td> -->
                                                            <td>
                                                                <p><span
                                                                        class="font-weight-bold">Address:</span>{{invoiceInfo.address_1}}
                                                                    ,{{invoiceInfo.address_2}} ,
                                                                    {{invoiceInfo.location}}, {{invoiceInfo.pincode}}
                                                                    {{invoiceInfo.email}} </p>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <!-- <td>
                                                                <p><span class="font-weight-bold">GSTIN:</span> </p>
                                                            </td> -->
                                                            <td>
                                                                <p><span
                                                                        class="font-weight-bold">GSTIN:</span>{{invoiceInfo.gst_number}}
                                                                </p>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <!-- <td>
                                                                <p></p>
                                                            </td> -->
                                                            <td>
                                                                <p><span class="font-weight-bold">PAN
                                                                        :</span>{{invoiceInfo?.gst_number?.substring(2).slice(0,
                                                                    -3)}}</p>
                                                            </td>
                                                        </tr>

                                                        <tr>
                                                            <!-- <td class="borderZero">
                                                                <table class="table m-0 ">
                                                                    <tbody>
                                                                        <tr>
                                                                            <td class="font-weight-bold">State: <span *ngIf='invoiceInfo.place_of_supply<10'>{{invoiceInfo?.place_of_supply_name?.state}}({{('0'+invoiceInfo.place_of_supply | trim) || 'NA'}})</span>
                                                                                <span *ngIf='invoiceInfo.place_of_supply>=10'>{{invoiceInfo?.place_of_supply_name?.state}}({{(invoiceInfo.place_of_supply | trim) || 'NA'}})</span </td>
                                                                            <td class="font-weight-bold">Code:</td>
                                                                            <td  *ngIf='invoiceInfo.state_code<10' >{{'0'+invoiceInfo.state_code}}</td>
                                                                            <td  *ngIf='invoiceInfo.state_code>=10' >{{invoiceInfo.state_code}}</td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                            </td> -->
                                                            <td class="borderZero">
                                                                <table class="table m-0 ">
                                                                    <tbody>
                                                                        <tr>
                                                                            <td class="font-weight-bold">
                                                                                State: <span
                                                                                    *ngIf="invoiceInfo.place_of_supply<10">{{invoiceInfo?.place_of_supply_name?.state}}({{('0'+invoiceInfo.place_of_supply
                                                                                    | trim) || 'NA'}})</span>
                                                                                <span
                                                                                    *ngIf="invoiceInfo.place_of_supply>=10">{{invoiceInfo?.place_of_supply_name?.state}}({{(invoiceInfo.place_of_supply
                                                                                    | trim) || 'NA'}})</span>
                                                                            </td>
                                                                            <td class="font-weight-bold">Code</td>
                                                                            <td *ngIf="invoiceInfo.state_code<10">
                                                                                {{'0'+invoiceInfo.state_code}}</td>
                                                                            <td *ngIf="invoiceInfo.state_code>=10">
                                                                                {{invoiceInfo.state_code}}</td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                            </td>
                                                        </tr>
                                                    </tbody>

                                                </table>

                                                <table class="table table-bordered bg-white shadow-sm mb-0">
                                                    <thead class="bgColor">
                                                        <tr>
                                                            <!-- <th>S. No.</th> -->
                                                            <th>Product Description</th>
                                                            <th>SAC Code</th>
                                                            <th>UOM</th>

                                                            <th>Quantity/Unit</th>
                                                            <th>Rate (INR)</th>
                                                            <th>Amount</th>
                                                            <th>Discount</th>
                                                            <th>Taxable Value</th>
                                                            <th class="p-0 borderZero">
                                                                <table class="table  mb-0 text-center no-pad">
                                                                    <tr>
                                                                        <th colspan="2">IGST</th>
                                                                    </tr>
                                                                    <tr class="text-center">
                                                                        <th>Rate</th>
                                                                        <th>Amount</th>
                                                                    </tr>
                                                                </table>
                                                            </th>
                                                            <th class="p-0 borderZero">
                                                                <table class="table  mb-0 text-center no-pad">
                                                                    <tr>
                                                                        <th colspan="2">CGST</th>
                                                                    </tr>
                                                                    <tr class="text-center">
                                                                        <th>Rate</th>
                                                                        <th>Amount</th>
                                                                    </tr>
                                                                </table>
                                                            </th>
                                                            <th class="p-0 borderZero">
                                                                <table class="table    mb-0 text-center no-pad">
                                                                    <tr>
                                                                        <th colspan="2">SGST</th>
                                                                    </tr>
                                                                    <tr class="text-center">
                                                                        <th>Rate</th>
                                                                        <th>Amount</th>
                                                                    </tr>
                                                                </table>
                                                            </th>
                                                            <th>Total</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr *ngFor="let item of invoiceInfo.items; let i = index">
                                                            <!-- <td *ngIf="item.item_mode === 'Debit' && item.type === 'Included'">
        {{i+1}}</td> -->
                                                            <!-- <td style="min-width: 80px;" *ngIf="item.item_mode === 'Debit' && item.type === 'Included'">
                                                    {{i}}</td> -->
                                                            <td
                                                                *ngIf="(item.item_mode === 'Debit' || item.item_mode === 'Credit') && item.type === 'Included'">
                                                                {{item.description}} <br /> <small
                                                                    style="font-style: italic;"><b>{{item?.item_reference}}</b></small>

                                                            </td>
                                                            <td
                                                                *ngIf="(item.item_mode === 'Debit' || item.item_mode === 'Credit') && item.type === 'Included'">
                                                                {{item.sac_code}}
                                                            </td>
                                                            <td
                                                                *ngIf="(item.item_mode === 'Debit' || item.item_mode === 'Credit') && item.type === 'Included'">
                                                                {{item.unit_of_measurement}}
                                                            </td>
                                                            <td *ngIf="(item.item_mode === 'Debit' || item.item_mode === 'Credit') && item.type === 'Included'"
                                                                class="text-center">
                                                                <!-- {{item.item_value}} -->
                                                                {{item.quantity}}
                                                            </td>
                                                            <td *ngIf="(item.item_mode === 'Debit' || item.item_mode === 'Credit') && item.type === 'Included'"
                                                                class="text-center">
                                                                {{item.item_value/item.quantity | number : '0.2'}}
                                                            </td>
                                                            <td *ngIf="(item.item_mode === 'Debit' || item.item_mode === 'Credit') && item.type === 'Included'"
                                                                class="text-right">
                                                                {{item.item_value | number : '0.2'}}
                                                            </td>
                                                            <!-- <td *ngIf="item.item_mode === 'Debit' && item.type === 'Included'" class="text-right">
                                                                {{item.sgst_amount + item.igst_amount + item.cgst_amount | number : '0.2'}}
                                                            </td> -->
                                                            <td *ngIf="(item.item_mode === 'Debit' || item.item_mode === 'Credit') && item.type === 'Included'"
                                                                class="text-right">
                                                                <p *ngIf="item.discount_value !=0">{{item.discount_value
                                                                    }}</p>
                                                            </td>
                                                            <!-- <td *ngIf="item.item_mode === 'Debit' && item.type === 'Included'" class="text-right">
                                                    {{item.gst_rate}} %
                                                </td> -->
                                                            <td *ngIf="(item.item_mode === 'Debit' || item.item_mode === 'Credit') && item.type === 'Included'"
                                                                class="text-right">
                                                                {{item.item_taxable_value | number : '0.2'}}
                                                            </td>
                                                            <td *ngIf="(item.item_mode === 'Debit' || item.item_mode === 'Credit') && item.type === 'Included'"
                                                                class="borderZero">
                                                                <table class="table    mb-0 text-center no-pad">
                                                                    <tr class="text-center">
                                                                        <th>{{item.igst}} %</th>
                                                                        <th>{{item.igst_amount | number : '0.2'}}</th>
                                                                    </tr>
                                                                </table>
                                                            </td>
                                                            <td *ngIf="(item.item_mode === 'Debit' || item.item_mode === 'Credit') && item.type === 'Included'"
                                                                class="borderZero">
                                                                <table class="table    mb-0 text-center no-pad">
                                                                    <tr class="text-center">
                                                                        <th>{{item.cgst}} %</th>
                                                                        <th>{{item.cgst_amount | number : '0.2'}}</th>
                                                                    </tr>
                                                                </table>
                                                            </td>
                                                            <td *ngIf="(item.item_mode === 'Debit' || item.item_mode === 'Credit') && item.type === 'Included'"
                                                                class="borderZero">
                                                                <table class="table    mb-0 text-center no-pad">
                                                                    <tr class="text-center">
                                                                        <th>{{item.sgst}} %</th>
                                                                        <th>{{item.sgst_amount | number : '0.2'}}</th>
                                                                    </tr>
                                                                </table>
                                                            </td>
                                                            <td *ngIf="(item.item_mode === 'Debit' || item.item_mode === 'Credit') && item.type === 'Included'"
                                                                class="text-right">
                                                                {{item.item_value_after_gst}}
                                                            </td>
                                                            <!-- <td *ngIf="item.item_mode === 'Debit' && item.type === 'Included'" class="text-right">
                                                    {{item.state_cess_amount}}</td>
                                                <td *ngIf="item.item_mode === 'Debit' && item.type === 'Included'" class="text-right">
                                                    {{item.cess_amount}}</td>
                                                <td *ngIf="item.item_mode === 'Debit' && item.type === 'Included'" class="text-right">
                                                    {{item.item_value_after_gst | number : '0.2'}}
                                                </td> -->
                                                        </tr>

                                                        <tr>
                                                            <td colspan="3" class="text-center font-weight-bold">Total
                                                            </td>

                                                            <td class="font-weight-bold text-center">{{
                                                                getTotal('quantity') }}</td>
                                                            <td></td>
                                                            <td></td>
                                                            <!-- <td class="font-weight-bold text-right">{{invoiceInfo.sgst_amount + invoiceInfo.igst_amount + invoiceInfo.cgst_amount | number : '0.2'}}</td> -->
                                                            <td></td>
                                                            <td class="font-weight-bold text-right">
                                                                {{(invoiceInfo?.invoice_category==='Credit Invoice'?
                                                                '-'+invoiceInfo?.credit_value_before_gst
                                                                :invoiceInfo?.amount_before_gst) | number : '0.2'}}</td>
                                                            <td class="borderZero">
                                                                <table class="table " style="margin-top: -10px;">
                                                                    <tbody>
                                                                        <tr>
                                                                            <td class="w-50"></td>
                                                                            <td class="font-weight-bold ">
                                                                                <p class="p-0">
                                                                                    {{invoiceInfo?.igst_amount | number
                                                                                    : '0.2'}}</p>
                                                                            </td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                            </td>
                                                            <td class="borderZero">
                                                                <table class="table " style="margin-top: -10px;">
                                                                    <tbody>
                                                                        <tr>
                                                                            <td class="w-50"></td>
                                                                            <td class="font-weight-bold ">
                                                                                <p class="p-0">
                                                                                    {{invoiceInfo?.cgst_amount | number
                                                                                    : '0.2'}}</p>
                                                                            </td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                            </td>
                                                            <td class="borderZero">
                                                                <table class="table " style="margin-top: -10px;">
                                                                    <tbody>
                                                                        <tr>
                                                                            <td class="w-50"></td>
                                                                            <td class="font-weight-bold ">
                                                                                <p class="p-0">
                                                                                    {{invoiceInfo?.sgst_amount | number
                                                                                    : '0.2'}}</p>
                                                                            </td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                            </td>
                                                            <td class="font-weight-bold text-right">
                                                                {{invoiceInfo?.sales_amount_after_tax| number : '0.2'}}
                                                            </td>
                                                        </tr>
                                                        <tr
                                                            *ngIf="(sez || invoiceInfo.irn_generated == 'Success') && companyDetails.show_application_reference_number_in_etax == 1">
                                                            <td colspan="8" class="font-weight-bold">
                                                                <div *ngIf="invoiceInfo.suptyp == 'SEZWP'">
                                                                    <p>SEZWP -
                                                                        {{companyDetails?.sezwp_terms_and_conditions}}
                                                                    </p>
                                                                </div>
                                                                <div *ngIf="invoiceInfo.suptyp == 'SEZWOP'">
                                                                    <p>SEZWOP -
                                                                        {{companyDetails?.sezwop_terms_and_conditions }}
                                                                    </p>
                                                                </div>
                                                            </td>
                                                            <td colspan="4" class="font-weight-bold">
                                                                <div class='text-right'>
                                                                    <p>Application Reference Number -
                                                                        {{invoiceInfo?.company_application_reference_number}}
                                                                    </p>
                                                                </div>
                                                                <div class='text-right'>
                                                                    <p>Date of filing -
                                                                        {{invoiceInfo?.company_data_filing}}
                                                                    </p>
                                                                </div>
                                                            </td>
                                                        </tr>

                                                        <tr>
                                                            <td colspan="8" class="text-center font-weight-bold">Total
                                                                Invoice amount in words</td>
                                                            <td colspan="2" class="font-weight-bold">Total Amount before
                                                                Tax</td>
                                                            <td colspan="2" class="text-right">
                                                                {{(invoiceInfo?.invoice_category==='Credit Invoice'?
                                                                '-'+invoiceInfo?.credit_value_before_gst
                                                                :invoiceInfo?.amount_before_gst) | number : '0.2'}}</td>
                                                        </tr>
                                                        <tr>
                                                            <td colspan="8" rowspan="4"
                                                                class="font-weight-bold text-center">
                                                                {{invoiceInfo?.sales_amount_after_tax | amountToWord}}
                                                            </td>

                                                            <!-- <td colspan="8" rowspan="3" class="font-weight-bold text-center">{{invoiceInfo?.sales_amount_after_tax | amountToWord }}</td> -->
                                                            <td colspan="2" class="font-weight-bold">Add: IGST</td>
                                                            <td colspan="2" class="text-right">
                                                                {{invoiceInfo?.igst_amount | number : '0.2'}}</td>
                                                        </tr>
                                                        <tr>
                                                            <td colspan="2" class="font-weight-bold">Add: CGST</td>
                                                            <td colspan="2" class="text-right">
                                                                {{invoiceInfo?.cgst_amount | number : '0.2'}}</td>
                                                        </tr>
                                                        <tr>
                                                            <td colspan="2" class="font-weight-bold">Add: SGST</td>
                                                            <td colspan="2" class="text-right">
                                                                {{invoiceInfo?.sgst_amount | number : '0.2'}}</td>
                                                        </tr>
                                                        <tr>
                                                            <td colspan="2" class="font-weight-bold">Total Tax Amount
                                                            </td>
                                                            <td colspan="2" class="text-right">{{invoiceInfo.sgst_amount
                                                                + invoiceInfo.igst_amount + invoiceInfo.cgst_amount |
                                                                number : '0.2'}}</td>
                                                        </tr>
                                                        <tr>
                                                            <td colspan="8">
                                                                <p>Generated By : WAVE HOSPITALITY PRIVATE LIMITED </p>
                                                            </td>
                                                            <td colspan="2" class="font-weight-bold">Total Amount after
                                                                Tax:</td>
                                                            <td colspan="2" class="text-right">
                                                                {{invoiceInfo?.sales_amount_after_tax| number : '0.2'}}
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td colspan="8">
                                                                <p class="font-weight-bold text-center">Bank details of
                                                                    Wave Hospitality</p>
                                                            </td>
                                                            <!-- <td colspan="2"></td> -->
                                                            <td colspan="2" class="font-weight-bold">GST on Reverse
                                                                Charge</td>
                                                            <td colspan="2" class="text-right">0</td>
                                                        </tr>
                                                        <tr>
                                                            <td colspan="4">
                                                                <strong> Benificiay Name :</strong>
                                                                WAVE HOSPITALITY PRIVATE LIMITED
                                                            </td>
                                                            <td colspan="4">
                                                                <strong>Bank IFSC:</strong>
                                                                YESB0000066
                                                            </td>
                                                            <td colspan="4">
                                                                <p><small>Ceritified that the particulars given above
                                                                        are true and correct</small></p>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td colspan="4">
                                                                <strong>Bank A/C No:</strong>
                                                                006681400000195
                                                            </td>
                                                            <td colspan="4">
                                                                <strong>BRANCH :</strong>
                                                                Kapashera Village, New Delhi
                                                            </td>
                                                            <td colspan="4">
                                                                <p class="font-weight-bold text-center">For Wave
                                                                    Hospitality Private Limited</p>
                                                            </td>
                                                        </tr>

                                                        <tr>
                                                            <td colspan="5">
                                                                <p class="font-weight-bold text-center">Terms &
                                                                    conditions</p>
                                                            </td>
                                                            <td colspan="3"></td>
                                                            <td colspan="4"></td>
                                                        </tr>
                                                        <tr>
                                                            <td colspan="5"></td>
                                                            <td colspan="3">Common Seal</td>
                                                            <td colspan="4">Authorised signatory</td>
                                                        </tr>
                                                    </tbody>

                                                </table>

                                            </div>


                                        </div>
                                    </div>
                                </div>



                            </div>

                        </ng-template>

                        <ng-template ngbNavContent *ngIf="this.companyDetails.company_code != 'HINDIA-01'">

                            <!-- Potrait format start-->
                            <div *ngIf="this.companyDetails.e_tax_format == 'Portrait'" class="pt-3 summary preview "
                                id="section-to-print">
                                <div>
                                    <!-- <div class="text-center mb-3">
                                        <span (click)="InvoicePdf('tax')" class="badge cursor-pointer badge-pill badge-primary py-2 px-3">Tax Invoice</span>
                                        <span  (click)="InvoicePdf('credit')" *ngIf="invoiceInfo?.has_credit_items === 'Yes'" class="badge cursor-pointer badge-pill badge-secondary py-2 ml-3 px-3">Credit Invoice</span>
                                    </div> -->
                                </div>


                                <div class="min-h">
                                    <div>

                                        <div class="row mb-2">
                                            <div class="col-md-6">
                                                <div class="d-flex">
                                                    <h5 class="text-capitalize text-primary"><strong>{{invoicetypeName ?
                                                            invoicetypeName : 'Tax'}} Invoice </strong></h5>
                                                    <!-- <p class="mb-0" style="line-height: 30px; margin-left: 10px;"> --
                                                        <strong> {{companyDetails.e_tax_format}}</strong>
                                                    </p> -->
                                                </div>
                                            </div>

                                            <div class="col-md-6 text-right section-to-print" id="pdfBtn">
                                                <div>
                                                    <!-- <button *ngIf="this.companyDetails.e_tax_format == 'Landscape'"
                                                        class="btn btn-sm btn-primary mr-2"
                                                        (click)="this.companyDetails.e_tax_format = 'Portrait'">Portrait</button>
                                                    <button *ngIf="this.companyDetails.e_tax_format == 'Portrait'"
                                                        class="btn btn-sm btn-primary mr-2"
                                                        (click)="this.companyDetails.e_tax_format = 'Landscape'">Landscape</button> -->
                                                    <button *ngIf="eTaxInvoiceDownloadBtn"
                                                        (click)="downlaod_e_tax_invoice()"
                                                        class="btn btn-sm btn-primary mr-2" type="button">Download
                                                        Signed Invoice</button>
                                                    <button (click)="printPdf()" class="btn btn-sm btn-success mr-2"
                                                        type="button">Print</button>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="">
                                            <!-- <div *ngIf="companyDetails?.custom_e_tax_invoice_logo == 1">
                        <img [src]="apiDomain + companyDetails?.custom_e_tax_invoice_logo_image" alt=" " width="100%">
                      </div> -->
                                            <div>
                                                <table class="table mb-0">
                                                    <tbody>
                                                        <tr>
                                                            <td width="50%" style="vertical-align: middle;">
                                                                <div class="logo">
                                                                    <ng-template #logoBlock>
                                                                        <div class="mb-3"
                                                                            *ngIf="invoiceInfo?.company_logo">
                                                                            <img class="img-fluid"
                                                                                [src]="apiDomain + invoiceInfo?.company_logo"
                                                                                alt="">
                                                                        </div>
                                                                    </ng-template>
                                                                    <div *ngIf="companyDetails?.custom_e_tax_invoice_logo == 1; else logoBlock"
                                                                        class="mb-4">
                                                                        <img [src]="apiDomain + companyDetails?.custom_e_tax_invoice_logo_image"
                                                                            alt=" " width="60%">
                                                                    </div>
                                                                </div>

                                                                <div>
                                                                    <address>
                                                                        <b>
                                                                            <p>{{invoiceInfo?.company_legal_name}}
                                                                                <br>
                                                                                {{invoiceInfo?.company_address_1}}
                                                                                ,{{invoiceInfo?.company_address_2}}
                                                                                ,
                                                                                {{invoiceInfo?.company_location}},
                                                                                {{invoiceInfo?.company_pincode}}
                                                                            </p>
                                                                        </b>
                                                                    </address>
                                                                </div>

                                                                <!-- <ng-container
                                                                    *ngIf="this.invoiceInfo?.irn_generated == 'Success' && (this.companyDetails?.name == 'FMCOMR-01' || this.companyDetails?.name == 'FPBSA-01' || this.companyDetails?.name == 'HRC-01' || this.companyDetails?.name == 'JWMC-01'); else elseSeller">
                                                                    <div>
                                                                        <address>
                                                                            <b>
                                                                                <p> {{irnObject?.irn_request_object?.data?.SellerDtls.LglNm}}
                                                                                    <br>
                                                                                    {{irnObject?.irn_request_object?.data?.SellerDtls.Addr1}}
                                                                                    ,{{irnObject?.irn_request_object?.data?.SellerDtls.Addr2}}
                                                                                    ,
                                                                                    {{irnObject?.irn_request_object?.data?.SellerDtls.Loc}},
                                                                                    {{irnObject?.irn_request_object?.data?.SellerDtls.Pin}}
                                                                                </p>
                                                                            </b>
                                                                        </address>
                                                                    </div>
                                                                </ng-container>

                                                                <ng-template #elseSeller>
                                                                    <div>
                                                                        <address>
                                                                            <b>
                                                                                <p>{{companyDetails.legal_name}}
                                                                                    <br>
                                                                                    {{companyDetails?.address_1}}
                                                                                    ,{{companyDetails?.address_2}}
                                                                                    ,
                                                                                    {{companyDetails?.location}},
                                                                                    {{companyDetails?.pincode}}
                                                                                </p>
                                                                            </b>
                                                                        </address>
                                                                    </div>
                                                                </ng-template> -->

                                                            </td>
                                                            <td width="50%" align="right">
                                                                <div class="qr">
                                                                    <img class="img-fluid"
                                                                        [src]="apiDomain + invoiceInfo.qr_code_image"
                                                                        alt="">
                                                                    <span class="imgTextPMS"
                                                                        *ngIf="invoiceInfo.irn_generated === 'Cancelled'">
                                                                        <h1>Cancelled</h1>
                                                                    </span>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>

                                            <div>
                                                <table class="table mb-0">
                                                    <tbody>
                                                        <tr>
                                                            <td width="100%">
                                                                <div class="border">
                                                                    <div class="heading">
                                                                        <h4><strong>1. e-Invoice
                                                                                Details</strong></h4>
                                                                    </div>
                                                                    <div class="c-p-8">
                                                                        <table>
                                                                            <tr>
                                                                                <td>
                                                                                    <strong>IRN</strong> :
                                                                                    {{invoiceInfo.irn_number}}
                                                                                </td>
                                                                                <td><strong>Ack. No : <br>
                                                                                    </strong> {{invoiceInfo.ack_no}}
                                                                                </td>
                                                                                <td><strong>Ack. Date : <br>
                                                                                    </strong> {{invoiceInfo.ack_date}}
                                                                                </td>

                                                                            </tr>
                                                                        </table>
                                                                    </div>
                                                                </div>
                                                            </td>
                                                        </tr>

                                                    </tbody>
                                                </table>
                                            </div>

                                            <div>
                                                <table class="table mb-0">
                                                    <tbody>
                                                        <tr>
                                                            <td width="100%">
                                                                <div class="border">
                                                                    <div class="heading">
                                                                        <h4><strong>2. Transaction
                                                                                Details</strong></h4>
                                                                    </div>
                                                                    <div class="c-p-8">
                                                                        <table>
                                                                            <tr>
                                                                                <td width="15%">
                                                                                    <strong>Category</strong> :
                                                                                    {{invoiceInfo.invoice_type}}
                                                                                </td>
                                                                                <td width="25%">
                                                                                    <strong>Invoice No
                                                                                    </strong> :
                                                                                    {{invoiceInfo.invoice_number}}
                                                                                </td>
                                                                                <td *ngIf="this.TaxInvoice" width="20%">
                                                                                    <strong>Document Type
                                                                                    </strong> : Tax Invoice
                                                                                </td>
                                                                                <td width="20%">
                                                                                    <strong>Document Date
                                                                                    </strong> :
                                                                                    {{invoiceInfo.invoice_date | date :
                                                                                    'dd/MM/yyyy'}}
                                                                                </td>
                                                                                <td width="20%">
                                                                                    <strong>Room No</strong> :
                                                                                    {{invoiceInfo?.room_number}}
                                                                                </td>
                                                                            </tr>

                                                                        </table>

                                                                        <table class="">

                                                                        </table>
                                                                    </div>
                                                                </div>
                                                            </td>
                                                        </tr>

                                                    </tbody>
                                                </table>
                                            </div>

                                            <div>
                                                <table class="table mb-0">
                                                    <tbody>
                                                        <tr>
                                                            <td width="100%">
                                                                <div class="border">
                                                                    <div class="heading">
                                                                        <h4><strong>3. Party
                                                                                Details</strong></h4>
                                                                    </div>
                                                                    <div class="c-p-8">
                                                                        <table class="party">
                                                                            <tr>
                                                                                <td width="49%"
                                                                                    style="vertical-align: top;">
                                                                                    <div>
                                                                                        <h5><strong>Seller</strong>
                                                                                        </h5>
                                                                                    </div>

                                                                                    <div class="max-500">

                                                                                        <div>
                                                                                            <p class="m-0">
                                                                                                <b>GSTIN </b>:
                                                                                                {{invoiceInfo?.company_gst}},<br>
                                                                                                <b>PAN </b>:
                                                                                                {{invoiceInfo.company_gst?.substring(2).slice(0,-3)}},

                                                                                            </p>
                                                                                            <div>
                                                                                                <p class="m-0">
                                                                                                    <span
                                                                                                        *ngIf="invoiceInfo?.company_cin_number">
                                                                                                        <b>CIN No</b>:
                                                                                                        {{invoiceInfo?.company_cin_number}},
                                                                                                    </span>
                                                                                                    <span
                                                                                                        *ngIf="invoiceInfo?.company_tin_number">
                                                                                                        <b>TIN No</b>:
                                                                                                        {{invoiceInfo?.company_tin_number}}
                                                                                                    </span>

                                                                                                </p>
                                                                                                <p class="m-0">
                                                                                                    <span
                                                                                                        *ngIf="invoiceInfo?.company_fssai_number">
                                                                                                        <b>FSSAI
                                                                                                            LIC no </b>:
                                                                                                        {{invoiceInfo?.company_fssai_number}}
                                                                                                    </span>
                                                                                                </p>

                                                                                            </div>

                                                                                            <p class="m-0">
                                                                                                {{invoiceInfo?.company_name}}<br>{{invoiceInfo?.company_legal_name}}
                                                                                                <br>
                                                                                                {{invoiceInfo?.company_address_1}}
                                                                                                ,{{invoiceInfo?.company_address_2}}
                                                                                                ,
                                                                                                {{invoiceInfo?.company_location}},
                                                                                                {{invoiceInfo?.company_pincode}}

                                                                                            </p>


                                                                                        </div>
                                                                                    </div>

                                                                                    <!-- <ng-container
                                                                                        *ngIf="this.invoiceInfo?.irn_generated == 'Success' && this.invoiceInfo?.invoice_type == 'B2B'&&(this.companyDetails?.name == 'FMCOMR-01' || this.companyDetails?.name == 'FPBSA-01' || this.companyDetails?.name == 'HRC-01' || this.companyDetails?.name == 'JWMC-01'); else elseSeller2">

                                                                                        <div class="max-500">
                                                                                            <p class="mb-1">
                                                                                                <b>GSTIN </b>:
                                                                                                {{irnObject?.irn_request_object?.data?.SellerDtls.Gstin}},
                                                                                                <b class="ml-1">PAN
                                                                                                </b>:
                                                                                                {{irnObject?.irn_request_object?.data?.SellerDtls.Gstin.substring(2,
                                                                                                12)}}
                                                                                            </p>
                                                                                            <p class="mb-1">
                                                                                                <b>FSSAI LIC No </b>:
                                                                                                {{null}}
                                                                                            </p>
                                                                                            <p>{{irnObject?.irn_request_object?.data?.SellerDtls.TrdNm}}<br>{{irnObject?.irn_request_object?.data?.SellerDtls.LglNm}}
                                                                                                <br>
                                                                                                {{irnObject?.irn_request_object?.data?.SellerDtls.Addr1}}
                                                                                                ,{{irnObject?.irn_request_object?.data?.SellerDtls.Addr2}}
                                                                                                ,
                                                                                                {{irnObject?.irn_request_object?.data?.SellerDtls.Loc}},
                                                                                                {{irnObject?.irn_request_object?.data?.SellerDtls.Pin}}
                                                                                            </p>
                                                                                        </div>
                                                                                    </ng-container>

                                                                                    <ng-template #elseSeller2>
                                                                                        <div class="max-500">
                                                                                            <p class="mb-1">
                                                                                                <b>GSTIN </b>:
                                                                                                {{companyDetails?.gst_number}},
                                                                                                <b class="ml-1">PAN
                                                                                                </b>:
                                                                                                {{companyDetails?.pan_number}}
                                                                                            </p>
                                                                                          11111
                                                                                            <p class="mb-1">
                                                                                                <b>FSSAI LIC No </b>:
                                                                                                {{companyDetails?.fssai_number}}
                                                                                            </p>
                                                                                            <p>{{companyDetails?.company_name}}<br>{{companyDetails?.legal_name}}
                                                                                                <br>
                                                                                                {{companyDetails?.address_1}}
                                                                                                ,{{companyDetails?.address_2}}
                                                                                                ,
                                                                                                {{companyDetails?.location}},
                                                                                                {{companyDetails?.pincode}}
                                                                                            </p>
                                                                                        </div>
                                                                                    </ng-template> -->
                                                                                </td>
                                                                                <td width="51%"
                                                                                    style="vertical-align: top;border-left: 1px solid rgba(102, 102, 102, 0.479);padding-left: 1%;">
                                                                                    <div>
                                                                                        <h5><strong>Purchaser</strong>
                                                                                        </h5>
                                                                                    </div>
                                                                                    <div
                                                                                        *ngIf="invoiceInfo?.invoice_type === 'B2B'">
                                                                                        <p class="mb-1">
                                                                                            <b>Guest</b> :
                                                                                            {{invoiceInfo.guest_name}}
                                                                                        </p>
                                                                                        <p class="mb-1">
                                                                                            <b> GSTIN </b>:
                                                                                            {{invoiceInfo.gst_number}},
                                                                                            <b class="ml-1">PAN </b>:
                                                                                            {{invoiceInfo?.gst_number.substr(2,
                                                                                            10)}}
                                                                                        </p>
                                                                                        <p> {{invoiceInfo.legal_name}}
                                                                                            <br>
                                                                                            {{invoiceInfo.address_floor_number?invoiceInfo.address_floor_number+',':''}}
                                                                                            {{invoiceInfo.address_1?invoiceInfo.address_1+',':''}}
                                                                                            {{invoiceInfo.address_2 !==
                                                                                            invoiceInfo.address_1?invoiceInfo.address_2+',':''}}
                                                                                            <br>
                                                                                            {{invoiceInfo.address_street?invoiceInfo.address_street+',':''}}
                                                                                            {{invoiceInfo.location?invoiceInfo.location+',':''}}
                                                                                            {{invoiceInfo.pincode}}
                                                                                            {{invoiceInfo.email?","+invoiceInfo.email:''}}
                                                                                            <br>
                                                                                            <b> Place of Supply </b>:
                                                                                            {{invoiceInfo?.place_of_supply_name?.state}}({{(invoiceInfo.place_of_supply
                                                                                            | trim) || 'NA'}})
                                                                                        </p>
                                                                                    </div>

                                                                                    <div
                                                                                        *ngIf="invoiceInfo?.invoice_type === 'B2C'">
                                                                                        <p class="mb-1">
                                                                                            <b> Guest Name :</b>
                                                                                            {{invoiceInfo.guest_name}}
                                                                                        </p>
                                                                                        <!-- <p class="mb-1">
                                                                                            <b> Room Number :</b> {{invoiceInfo.room_number}}
                                                                                        </p> -->
                                                                                        <p class="mb-1">
                                                                                            <b> Confirmation Number
                                                                                                :</b>
                                                                                            {{invoiceInfo.confirmation_number}}
                                                                                        </p>

                                                                                    </div>
                                                                                </td>
                                                                            </tr>

                                                                        </table>

                                                                    </div>
                                                                </div>
                                                            </td>
                                                        </tr>

                                                    </tbody>
                                                </table>
                                            </div>

                                            <div>

                                                <!-- <table class="table mb-0">
                                                    <tbody>
                                                        <tr>
                                                            <td width="100%"> -->
                                                <div class="pdf-table">
                                                    <div class="heading b-h">
                                                        <h4><strong>4. Item
                                                                Details</strong></h4>
                                                    </div>
                                                    <div class="c-p-8  table-responsive">
                                                        <table class="table pdfTable goods mb-0">
                                                            <thead>
                                                                <tr>
                                                                    <!-- <th>S.NO</th> -->
                                                                    <th>Date</th>
                                                                    <th>Product Description
                                                                    </th>
                                                                    <th style="width: 80px;">SAC/HSN
                                                                    </th>
                                                                    <th>Item Value</th>
                                                                    <th>GST Rate</th>
                                                                    <th>GST Amount</th>
                                                                    <th>VAT</th>

                                                                    <!-- <th>S.CESS</th> -->
                                                                    <th>CESS</th>

                                                                    <th>
                                                                        Total Item Value
                                                                    </th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>

                                                                <tr
                                                                    *ngFor="let item of invoiceInfo.items; let i = index">
                                                                    <!-- <td *ngIf="item.item_mode === 'Debit' && item.type === 'Included'">
                                            {{i+1}}</td> -->
                                                                    <ng-container
                                                                        *ngIf="item.item_mode === 'Debit' && item.revenue_item != 'Non-Revenue' && (item.type === 'Included' || item.type === 'Excempted' || item.type === 'Non-Gst') ">
                                                                        <td style="min-width: 80px;">
                                                                            {{ item?.date | date:'dd- MM-yyyy'}}</td>
                                                                        <td>
                                                                            {{item.description}} <br /> <small
                                                                                style="font-style: italic;"><b>{{item?.item_reference
                                                                                    != '[NA Pk' ? item?.item_reference :
                                                                                    '' }}</b></small>

                                                                        </td>
                                                                        <td>
                                                                            {{item.sac_code}}
                                                                        </td>
                                                                        <td class="text-right">
                                                                            {{item.item_value}}
                                                                        </td>
                                                                        <td class="text-right">
                                                                            {{item.gst_rate}} %
                                                                        </td>
                                                                        <td class="text-right">
                                                                            {{item.sgst_amount + item.igst_amount +
                                                                            item.cgst_amount | number : '0.2'}}
                                                                        </td>
                                                                        <td class="text-right">
                                                                            {{item.vat_amount}}</td>
                                                                        <!-- <td class="text-right">
                                                                            {{item.state_cess_amount}}</td> -->
                                                                        <td class="text-right">
                                                                            {{item.cess_amount}}</td>
                                                                        <td class="text-right">
                                                                            {{item.item_value_after_gst | number :
                                                                            '0.2'}}
                                                                        </td>
                                                                    </ng-container>
                                                                </tr>

                                                            </tbody>
                                                        </table>

                                                    </div>

                                                </div>
                                                <!-- </td>
                                                        </tr>

                                                    </tbody>
                                                </table> -->
                                            </div>

                                            <div class="c-border-table"></div>

                                            <div>
                                                <table class="table  goods goods2" style="margin: 0;">
                                                    <thead>
                                                        <tr>
                                                            <th>HSN/SAC CODE</th>
                                                            <th>SALES
                                                            </th>

                                                            <th>CGST

                                                            </th>
                                                            <th>SGST
                                                            </th>
                                                            <th>IGST

                                                            </th>
                                                            <!-- <th>S.CESS </th> -->
                                                            <th>CESS </th>

                                                            <th>
                                                                VAT
                                                            </th>


                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr *ngFor="let item of taxableArr">
<!-- 
                                                            <td>
                                                                {{item.sac_code}}</td>
                                                            <td>
                                                                {{item.item_value | number : '1.2-2'}}</td>
                                                            <td>
                                                                {{item.cgst_amount | number : '1.2-2'}}</td>
                                                            <td>
                                                                {{item.sgst_amount | number : '1.2-2'}}</td>
                                                            <td>
                                                                {{item.igst_amount | number : '1.2-2'}}</td>
                                                            <td>
                                                                {{item.cess}}</td>
                                                            <td>
                                                                {{item.cess_amount}}</td>
                                                            <td>{{item.vat_amount}}</td>
                                                        </tr> -->



                                                        <tr *ngFor="let item of invoiceInfo.sac_hsn_based_taxes">

                                                            <td>
                                                                {{item.sac_hsn_code}}</td>
                                                            <td class="text-right">
                                                                {{item.amount_before_gst| number : '0.2'}}</td>
                                                            <td class="text-right">
                                                                {{item.cgst| number : '0.2'}}</td>
                                                            <td class="text-right">
                                                                {{item.sgst| number : '0.2'}}</td>
                                                            <td class="text-right">
                                                                {{item.igst| number : '0.2'}}</td>
                                                            <td class="text-right">
                                                                {{item.cess | number : '0.2'}}</td>
                                                            <!-- <td class="text-right">
                                                                {{item.state_cess | number : '0.2'}}</td> -->
                                                            <td class="text-right">{{item?.vat | number : '0.2'}}</td>
                                                        </tr>
                                                    </tbody>
                                                </table>

                                            </div>

                                            <div class=" my-2 c-border-table"></div>
                                            <div class="">
                                                <table class="table  goods goods2" style="margin: 0;">
                                                    <thead>
                                                        <tr>
                                                            <th>Tax'ble Value</th>
                                                            <th>CGST </th>

                                                            <th>SGST </th>
                                                            <th>IGST </th>

                                                            <th>CESS </th>
                                                            <!-- <th>State CESS </th> -->
                                                            <th>Discount</th>
                                                            <th>
                                                                Other Charges
                                                            </th>
                                                            <th *ngIf="!companyDetails.vat_reporting">Vat</th>
                                                            <th>
                                                                Round off
                                                            </th>
                                                            <th>
                                                                Total Inv. Value
                                                            </th>

                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr>

                                                            <td class="text-right">
                                                                {{invoiceInfo?.pms_invoice_summary_without_gst | number
                                                                : '0.2'}}</td>
                                                            <td class="text-right">{{invoiceInfo?.cgst_amount | number :
                                                                '0.2'}} </td>
                                                            <td class="text-right">{{invoiceInfo?.sgst_amount | number :
                                                                '0.2'}}</td>
                                                            <td class="text-right">{{invoiceInfo?.igst_amount | number :
                                                                '0.2'}}</td>
                                                            <td class="text-right">
                                                                {{invoiceInfo?.total_central_cess_amount | number :
                                                                '0.2'}}</td>
                                                            <!-- <td class="text-right">
                                                                {{invoiceInfo?.total_state_cess_amount | number :
                                                                '0.2'}}</td> -->
                                                            <td class="text-right">0</td>
                                                            <td class="text-right">{{companyDetails.vat_reporting?
                                                                invoiceInfo?.other_charges :
                                                                invoiceInfo?.other_charges_before_tax | number : '0.2'}}
                                                            </td>
                                                            <td class="text-right"
                                                                *ngIf="!companyDetails.vat_reporting">
                                                                {{invoiceInfo?.total_vat_amount | number : '0.2'}}</td>
                                                            <td class="text-right">
                                                                {{invoiceInfo?.invoice_round_off_amount| number :
                                                                '0.2'}}</td>
                                                            <td class="text-right">
                                                                {{invoiceInfo?.sales_amount_after_tax| number : '0.2'}}
                                                            </td>
                                                        </tr>


                                                    </tbody>
                                                </table>

                                            </div>
                                            <div class="border my-2">
                                                <table class="table table-light mb-0">
                                                    <tbody>
                                                        <tr>
                                                            <td width="100%">
                                                                <table width="100" class="table mb-1">
                                                                    <tbody>
                                                                        <tr>
                                                                            <td width="20%"
                                                                                style="vertical-align: middle;">
                                                                                <div class="">

                                                                                    <div class="c-p-8">
                                                                                        <div style="padding: 2px 5px">
                                                                                            <strong>Generated
                                                                                                By</strong> :
                                                                                            {{loginData?.full_name}}
                                                                                        </div>
                                                                                        <div style="padding:2px 5px">
                                                                                            <strong>Print
                                                                                                Date
                                                                                            </strong> : {{myDate |
                                                                                            date:'mediumDate'}}
                                                                                        </div>

                                                                                    </div>
                                                                                </div>
                                                                            </td>
                                                                            <td width="60%"
                                                                                style="vertical-align: middle;">
                                                                                <div class="">

                                                                                    <div class="c-p-8">
                                                                                        <div>
                                                                                        </div>
                                                                                        <div>
                                                                                            <div
                                                                                                style="padding:2px 5px">
                                                                                                <!-- <b>Amount In Words :</b> {{invoiceInfo?.sales_amount_after_tax | amountToWord }}
                                                                                                <br> -->
                                                                                                <b>Amount In Words :</b>
                                                                                                {{invoiceInfo?.amount_in_word
                                                                                                ||
                                                                                                (invoiceInfo?.sales_amount_after_tax
                                                                                                | amountToWord) }}
                                                                                                <br>
                                                                                            </div>
                                                                                            <div
                                                                                                style="padding:2px 5px">
                                                                                                <strong> System
                                                                                                    Generated On
                                                                                                </strong> :
                                                                                                {{invoiceInfo.ack_date |
                                                                                                date:'medium'}}
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </td>
                                                                            <td *ngIf="eTaxInvoiceDownloadBtn"
                                                                                width="20%" align="right"
                                                                                style="vertical-align: bottom;">
                                                                                <div class='sign_images'>
                                                                                    <!-- <img class="img-fluid" src="assets/images/sign.png" alt="Signature" > -->
                                                                                    <img class="img-fluid"
                                                                                        [src]="apiDomain + this.signature_img"
                                                                                        alt="">

                                                                                </div>
                                                                            </td>
                                                                        </tr>

                                                                    </tbody>
                                                                </table>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                            <div *ngIf="(sez || invoiceInfo.irn_generated == 'Success') && companyDetails.show_application_reference_number_in_etax == 1 "
                                                class='footer-txt'>
                                                <div *ngIf="invoiceInfo.suptyp == 'SEZWP'" class="pl-3">
                                                    <p>SEZWP - {{companyDetails.sezwp_terms_and_conditions}} </p>
                                                </div>
                                                <div *ngIf="invoiceInfo.suptyp == 'SEZWOP'" class="pl-3">
                                                    <p>SEZWOP - {{companyDetails.sezwop_terms_and_conditions }} </p>
                                                </div>
                                                <div class='text-right pt-2 pr-3'>
                                                    <p>Application Reference Number -
                                                        {{invoiceInfo?.company_application_reference_number}}</p>
                                                </div>
                                                <div class='text-right pr-3'>
                                                    <p>Date of filing - {{invoiceInfo?.company_data_filing}}</p>
                                                </div>

                                            </div>
                                            <div *ngIf="companyDetails?.custom_e_tax_invoice_footer == 1">
                                                <img [src]="apiDomain + companyDetails?.custom_e_tax_invoice_footer_image"
                                                    alt=" " width="100%">
                                            </div>

                                        </div>
                                    </div>
                                </div>



                            </div>
                            <!-- Potrait format end-->

                            <!-- Landscape format start-->
                            <div *ngIf="this.companyDetails.e_tax_format == 'Landscape'" class="pt-3 summary preview"
                                id="section-to-print">
                                <div>
                                    <div>
                                        <div class="min-h">
                                            <div class="row mb-2">
                                                <div class="col-md-6">
                                                    <div class="d-flex">
                                                        <h5 class="text-capitalize text-primary">
                                                            <strong>{{invoicetypeName ? invoicetypeName : 'Tax'}}
                                                                Invoice </strong>
                                                        </h5>
                                                        <!-- <p class="mb-0" style="line-height: 30px; margin-left: 10px;">
                                                            -- <strong> {{companyDetails.e_tax_format}}</strong></p> -->
                                                    </div>
                                                </div>

                                                <div class="col-md-6 text-right section-to-print" id="pdfBtn">
                                                    <div>
                                                        <!-- <button *ngIf="this.companyDetails.e_tax_format == 'Landscape'"
                                                            class="btn btn-sm btn-primary mr-2"
                                                            (click)="this.companyDetails.e_tax_format = 'Portrait'">Portrait</button>
                                                        <button *ngIf="this.companyDetails.e_tax_format == 'Portrait'"
                                                            class="btn btn-sm btn-primary mr-2"
                                                            (click)="this.companyDetails.e_tax_format = 'Landscape'">Landscape</button> -->
                                                        <button *ngIf="eTaxInvoiceDownloadBtn"
                                                            (click)="downlaod_e_tax_invoice()"
                                                            class="btn btn-sm btn-primary mr-2" type="button">Download
                                                            Signed Invoice</button>
                                                        <button (click)="printPdf()" class="btn btn-sm btn-success mr-2"
                                                            type="button">Print</button>

                                                    </div>
                                                </div>
                                            </div>
                                            <div>
                                                <table class="table mb-0 goods3">
                                                    <tbody>
                                                        <tr>
                                                            <td width="25%" style="vertical-align: middle;">
                                                                <div class="logo">

                                                                    <ng-template #logoBlock>
                                                                        <div class="mb-3"
                                                                            *ngIf="invoiceInfo?.company_logo">
                                                                            <img class="img-fluid"
                                                                                [src]="apiDomain + invoiceInfo?.company_logo"
                                                                                alt="">
                                                                        </div>
                                                                    </ng-template>
                                                                    <div *ngIf="companyDetails?.custom_e_tax_invoice_logo == 1; else logoBlock"
                                                                        class="mb-4">
                                                                        <img [src]="apiDomain + companyDetails?.custom_e_tax_invoice_logo_image"
                                                                            alt="header" width="60%">
                                                                    </div>
                                                                </div>
                                                            </td>
                                                            <td width="25%">

                                                                <div>
                                                                    <address>
                                                                        <b>
                                                                            <p>{{invoiceInfo?.company_name}}<br>
                                                                                {{invoiceInfo.company_legal_name}}<br>
                                                                                {{invoiceInfo?.company_address_1}}
                                                                                ,{{invoiceInfo?.company_address_1}}
                                                                                ,
                                                                                {{invoiceInfo?.company_location}},
                                                                                {{invoiceInfo?.company_pincode}}
                                                                            </p>
                                                                        </b>
                                                                    </address>
                                                                    <p class="mb-0"><b>GSTIN </b>:
                                                                        {{companyDetails?.company_gst}}</p>
                                                                    <p class="mb-0"><b>Tel </b>: </p>
                                                                    <p class="mb-0"><b>E-Mail </b>: </p>
                                                                    <p class="mb-0"><b>PAN No. </b>:
                                                                        {{invoiceInfo?.company_gst?.substring(2).slice(0,-3)}}
                                                                    </p>
                                                                    <p class="mb-0"><b>IRN </b>:
                                                                        {{invoiceInfo.irn_number}}</p>
                                                                    <p class="mb-0"><b>Ack. No</b>:
                                                                        {{invoiceInfo.ack_no}}</p>
                                                                    <p class="mb-0"><b>IRN Date </b>:
                                                                        {{invoiceInfo.ack_date | date}}</p>
                                                                </div>


                                                                <!-- <ng-container
                                                                    *ngIf="this.invoiceInfo?.irn_generated == 'Success' && this.invoiceInfo?.invoice_type == 'B2B' && (this.companyDetails?.name == 'FMCOMR-01' || this.companyDetails?.name == 'FPBSA-01' || this.companyDetails?.name == 'HRC-01' || this.companyDetails?.name == 'JWMC-01'); else elseSeller">
                                                                    <div>
                                                                        <address>
                                                                            <b>
                                                                                <p> {{irnObject?.irn_request_object?.data?.SellerDtls.LglNm}}
                                                                                    <br>
                                                                                    {{irnObject?.irn_request_object?.data?.SellerDtls.Addr1}}
                                                                                    ,{{irnObject?.irn_request_object?.data?.SellerDtls.Addr2}}
                                                                                    ,
                                                                                    {{irnObject?.irn_request_object?.data?.SellerDtls.Loc}},
                                                                                    {{irnObject?.irn_request_object?.data?.SellerDtls.Pin}}
                                                                                </p>
                                                                            </b>
                                                                        </address>
                                                                        <p class="mb-0"><b>GSTIN </b>:
                                                                            {{irnObject?.irn_request_object?.data?.SellerDtls.Gstin}}
                                                                        </p>
                                                                        <p class="mb-0"><b>Tel </b>: </p>
                                                                        <p class="mb-0"><b>E-Mail </b>: </p>
                                                                        <p class="mb-0"><b>PAN No. </b>:
                                                                            {{irnObject?.irn_request_object?.data?.SellerDtls.Gstin.substring(2,
                                                                            12)}}</p>
                                                                        <p class="mb-0"><b>IRN </b>:
                                                                            {{invoiceInfo.irn_number}}</p>
                                                                        <p class="mb-0"><b>Ack. No</b>:
                                                                            {{invoiceInfo.ack_no}}</p>
                                                                        <p class="mb-0"><b>IRN Date </b>:
                                                                            {{invoiceInfo.ack_date | date}}</p>
                                                                    </div>
                                                                </ng-container>

                                                                <ng-template #elseSeller>
                                                                    <div>
                                                                        <address>
                                                                            <b>
                                                                                <p>{{companyDetails?.company_name}}<br>
                                                                                    {{companyDetails.legal_name}}<br>
                                                                                    {{companyDetails?.address_1}}
                                                                                    ,{{companyDetails?.address_2}}
                                                                                    ,
                                                                                    {{companyDetails?.location}},
                                                                                    {{companyDetails?.pincode}}
                                                                                </p>
                                                                            </b>
                                                                        </address>
                                                                        <p class="mb-0"><b>GSTIN </b>:
                                                                            {{companyDetails?.gst_number}}</p>
                                                                        <p class="mb-0"><b>Tel </b>: </p>
                                                                        <p class="mb-0"><b>E-Mail </b>: </p>
                                                                        <p class="mb-0"><b>PAN No. </b>:
                                                                            {{companyDetails?.pan_number}}</p>
                                                                        <p class="mb-0"><b>IRN </b>:
                                                                            {{invoiceInfo.irn_number}}</p>
                                                                        <p class="mb-0"><b>Ack. No</b>:
                                                                            {{invoiceInfo.ack_no}}</p>
                                                                        <p class="mb-0"><b>IRN Date </b>:
                                                                            {{invoiceInfo.ack_date | date}}</p>
                                                                    </div>
                                                                </ng-template> -->

                                                            </td>
                                                            <td width="25%">
                                                                <div>
                                                                    <p class="mb-0"><b>Invoice No. </b>:
                                                                        {{invoiceInfo.invoice_number}}</p>
                                                                    <p class="mb-0"><b>Invoice date </b>:
                                                                        {{invoiceInfo.invoice_date | date :
                                                                        'dd/MM/yyyy'}}</p>
                                                                    <p class="mb-0" *ngIf="companyDetails?.website">
                                                                        <b>Website </b>: {{companyDetails?.website}}
                                                                    </p>
                                                                    <p class="mb-0"><b>VAT No. </b>: </p>
                                                                    <p class="mb-0"><b>CIN </b>: </p>
                                                                    <p class="mb-0"><b>Sales Order No </b>: </p>
                                                                    <p class="mb-0"><b>Whether Tax is Payable on Reverse
                                                                            Charge </b>: No</p>
                                                                </div>
                                                            </td>
                                                            <td width="25%" align="right">
                                                                <div class="qr">
                                                                    <img class="img-fluid"
                                                                        [src]="apiDomain + invoiceInfo?.qr_code_image"
                                                                        alt="">
                                                                    <span class="imgTextPMS"
                                                                        *ngIf="invoiceInfo.irn_generated === 'Cancelled'">
                                                                        <h1>Cancelled</h1>
                                                                    </span>
                                                                </div>

                                                                <div class="qr">
                                                                    <img class="img-fluid"
                                                                        [src]="apiDomain + invoiceInfo.credit_qr_code_image"
                                                                        alt="">
                                                                </div>
                                                                <div class="qr">
                                                                    <img class="img-fluid"
                                                                        [src]="apiDomain + invoiceInfo.b2c_qrimage"
                                                                        alt="">
                                                                </div>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>

                                            <div>
                                                <table class="table goods3 mb-0">
                                                    <tbody>
                                                        <tr>
                                                            <td width="100%">
                                                                <div class="">
                                                                    <div class="c-p-8">
                                                                        <table class="party">
                                                                            <tr>
                                                                                <td width="50%"
                                                                                    style="vertical-align: top;">
                                                                                    <p class="mb-1"><b><u>Bill To
                                                                                                Details:</u></b></p>
                                                                                    <div
                                                                                        *ngIf="invoiceInfo?.invoice_type === 'B2B'">
                                                                                        <p class="mb-1">
                                                                                            <b>{{invoiceInfo.guest_name}}<br>
                                                                                                {{invoiceInfo.legal_name}}
                                                                                                <br>
                                                                                                {{invoiceInfo.address_floor_number?invoiceInfo.address_floor_number+',':''}}
                                                                                                {{invoiceInfo.address_1?invoiceInfo.address_1+',':''}}
                                                                                                {{invoiceInfo.address_2
                                                                                                !==
                                                                                                invoiceInfo.address_1 ?
                                                                                                invoiceInfo.address_2+',':''}}
                                                                                                <br>
                                                                                                {{invoiceInfo.address_street?invoiceInfo.address_street+',':''}}
                                                                                                {{invoiceInfo.location?invoiceInfo.location+',':''}}
                                                                                                {{invoiceInfo.pincode}}
                                                                                            </b>
                                                                                        </p>
                                                                                        <p class="mb-0">
                                                                                            <b> GSTIN </b>:
                                                                                            {{invoiceInfo.gst_number}},
                                                                                        </p>
                                                                                        <p class="mb-0">
                                                                                            <b>Tel </b>:
                                                                                            <!-- {{invoiceInfo?.gst_number.substr(2, 10)}} -->
                                                                                        </p>
                                                                                        <p class="mb-0">
                                                                                            <b>Email</b>:
                                                                                            {{invoiceInfo.email?","+invoiceInfo.email:''}}
                                                                                        </p>
                                                                                        <p class="mb-0">
                                                                                            <b> Place of Supply </b>:
                                                                                            {{invoiceInfo?.place_of_supply_name?.state}}({{(invoiceInfo.place_of_supply
                                                                                            | trim) || 'NA'}})
                                                                                        </p>
                                                                                    </div>


                                                                                    <div
                                                                                        *ngIf="invoiceInfo?.invoice_type === 'B2C'">
                                                                                        <p class="mb-0">
                                                                                            <b> Guest Name :</b>
                                                                                            {{invoiceInfo.guest_name}}
                                                                                        </p>
                                                                                        <!-- <p class="mb-1">
                                                                                          <b> Room Number :</b> {{invoiceInfo.room_number}}
                                                                                      </p> -->
                                                                                        <p class="mb-0">
                                                                                            <b> Confirmation Number
                                                                                                :</b>
                                                                                            {{invoiceInfo.confirmation_number}}
                                                                                        </p>

                                                                                    </div>
                                                                                </td>
                                                                                <td width="50%"
                                                                                    style="vertical-align: top;">
                                                                                    <!-- <p class="mb-0"><b><u>Registered Office Address:</u></b></p>
                                                                                    <p>
                                                                                        Raheja Tower Plot No C30 Block G,<br>
                                                                                        Bandra Kurla Complex Bandra E,<br>
                                                                                        54B Lands End, Sisters Bunglow, Ground 1st and 2nd Floor, Wipro Limited<br>
                                                                                        www.chalethotels.com</p> -->
                                                                                </td>
                                                                            </tr>

                                                                        </table>

                                                                    </div>
                                                                </div>
                                                            </td>
                                                        </tr>

                                                    </tbody>
                                                </table>
                                            </div>


                                            <div>
                                                <div class="pdf-table">
                                                    <div class="c-p-8  table-responsive goods3">
                                                        <table class="table pdfTable goods mb-0">
                                                            <thead>
                                                                <tr>
                                                                    <th rowspan="2">S.NO</th>
                                                                    <th rowspan="2">Service<br> Description</th>
                                                                    <th rowspan="2">HSN/SAC <br>Code </th>
                                                                    <th>UQC</th>
                                                                    <th>Unit <br>Price</th>
                                                                    <th>Amount</th>
                                                                    <th>Discount</th>
                                                                    <th>Taxable<br> Value</th>
                                                                    <th>CGST Rate<br> (%)</th>
                                                                    <th>CGST<br> Amt (Rs.)</th>
                                                                    <th>SGST/UTGST<br> Rate (%)</th>
                                                                    <th>SGST/UTGST<br> Amt(Rs.)</th>
                                                                    <th>IGST Rate <br>(%)</th>
                                                                    <th>IGST <br> Amt(Rs.)</th>
                                                                    <th>Cess Adv <br> Rate %</th>
                                                                    <th>Cess Adv Amt. <br>(Rs)</th>
                                                                    <th>Total Amt.</th>
                                                                </tr>
                                                                <tr>
                                                                    <th>Qty.</th>
                                                                    <th>(Rs.)</th>
                                                                    <th>(Rs.)</th>
                                                                    <th>(Rs.)</th>
                                                                    <th>(Rs.)</th>
                                                                    <th>(%)</th>
                                                                    <th>(Rs.)</th>
                                                                    <th>(%)</th>
                                                                    <th>(Rs.)</th>
                                                                    <th>(%)</th>
                                                                    <th>(Rs.)</th>
                                                                    <th>(%)</th>
                                                                    <th>(Rs.)</th>
                                                                    <th>(Rs.)</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>

                                                                <tr
                                                                    *ngFor="let item of invoiceInfo.items; let i = index">
                                                                    <ng-container
                                                                        *ngIf="item.item_mode === 'Debit' && item.revenue_item != 'Non-Revenue' && (item.type === 'Included' || item.type === 'Excempted' || item.type === 'Non-Gst') ">
                                                                        <td>{{i+1}}</td>
                                                                        <td>{{item.item_name}}</td>
                                                                        <td>{{item.sac_code}}</td>
                                                                        <td class="text-right">
                                                                            {{item.quantity}}</td>
                                                                        <td class="text-right">
                                                                            {{item.item_taxable_value}}
                                                                        </td>
                                                                        <td class="text-right">
                                                                            {{item.item_taxable_value}}
                                                                        </td>
                                                                        <td class="text-right">
                                                                            {{item.discount_value}}</td>
                                                                        <td class="text-right">
                                                                            {{item.item_taxable_value}}</td>
                                                                        <td class="text-right">
                                                                            {{item.cgst}}</td>
                                                                        <td class="text-right">
                                                                            {{item.cgst_amount}}
                                                                        </td>
                                                                        <td class="text-right">
                                                                            {{item.sgst}}
                                                                        </td>
                                                                        <td class="text-right">
                                                                            {{item.sgst_amount}}
                                                                        </td>
                                                                        <td class="text-right">
                                                                            {{item.igst}}
                                                                        </td>
                                                                        <td class="text-right">
                                                                            {{item.igst_amount}}
                                                                        </td>
                                                                        <td class="text-right">
                                                                            {{item.cess}}
                                                                        </td>
                                                                        <td class="text-right">
                                                                            {{item.cess_amount}}
                                                                        </td>
                                                                        <td class="text-right">
                                                                            {{item.item_value_after_gst}}
                                                                        </td>
                                                                    </ng-container>
                                                                </tr>
                                                                <tr style="background-color: #f4f4f4;">
                                                                    <td colspan="7" class="border-right border-bottom">
                                                                        <strong>Grand Total</strong>
                                                                    </td>
                                                                    <td class="text-right border-right border-bottom">
                                                                        <strong>{{invoiceInfo.amount_before_gst}}</strong>
                                                                    </td>
                                                                    <td colspan="2"
                                                                        class="text-right border-right border-bottom">
                                                                        <strong>{{invoiceInfo.cgst_amount}}</strong>
                                                                    </td>
                                                                    <td colspan="2"
                                                                        class="text-right border-right border-bottom">
                                                                        <strong>{{invoiceInfo.sgst_amount}}</strong>
                                                                    </td>
                                                                    <td colspan="2"
                                                                        class="text-right border-right border-bottom">
                                                                        <strong>{{invoiceInfo.igst_amount}}</strong>
                                                                    </td>
                                                                    <td colspan="2"
                                                                        class="text-right border-right border-bottom">
                                                                        <strong>{{invoiceInfo?.cess_amount}}</strong>
                                                                    </td>
                                                                    <td class="text-right border-bottom">
                                                                        <strong>{{invoiceInfo.total_invoice_amount}}</strong>
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td colspan="12" class="border-right border-bottom">
                                                                    </td>
                                                                    <td colspan="3" class="border-right border-bottom">
                                                                        <strong>Sub Total (Rs.) </strong>
                                                                    </td>
                                                                    <td colspan="2" class="text-right border-bottom">
                                                                        <strong>{{invoiceInfo.total_invoice_amount}}</strong>
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td colspan="12" class="border-right border-bottom">
                                                                    </td>
                                                                    <td colspan="3" class="border-right border-bottom">
                                                                        <strong>Round off (Rs.) </strong>
                                                                    </td>
                                                                    <td colspan="2" class="text-right border-bottom">
                                                                        <strong></strong>
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td colspan="12" class="border-right"></td>
                                                                    <td colspan="3" class="border-right">
                                                                        <strong>Invoice Value (Rs.)</strong>
                                                                    </td>
                                                                    <td colspan="2" class="text-right">
                                                                        <strong>{{invoiceInfo.total_invoice_amount}}</strong>
                                                                    </td>
                                                                </tr>

                                                            </tbody>
                                                        </table>


                                                    </div>

                                                </div>
                                            </div>


                                            <div class=" my-2">
                                                <table class="table table-light mb-0">
                                                    <tbody>
                                                        <tr>
                                                            <td width="100%">
                                                                <table width="100" class="table goods3"
                                                                    style="margin-bottom: 0;">
                                                                    <tbody>
                                                                        <tr>
                                                                            <td width="25%" align="center"
                                                                                style="vertical-align: bottom;">
                                                                                <p class="mb-0"><strong> Guest
                                                                                        Signature</strong></p>
                                                                            </td>
                                                                            <td width="50%" align="center">
                                                                                <div class="table-bottom">
                                                                                    <table class="table">
                                                                                        <tr>
                                                                                            <td>
                                                                                                <p class="mb-0">Payment
                                                                                                    Details:</p>
                                                                                            </td>
                                                                                            <td></td>
                                                                                        </tr>
                                                                                        <tr>
                                                                                            <td>
                                                                                                <p class="mb-0">Bank
                                                                                                    Account :</p>
                                                                                            </td>
                                                                                            <td>
                                                                                                <p class="mb-0">Payment
                                                                                                    Due Date :</p>
                                                                                            </td>
                                                                                        </tr>
                                                                                        <tr>
                                                                                            <td>
                                                                                                <p class="mb-0">IFSC
                                                                                                    Code :</p>
                                                                                            </td>
                                                                                            <td>
                                                                                                <p class="mb-0">Payment
                                                                                                    Terms :</p>
                                                                                            </td>
                                                                                        </tr>
                                                                                        <tr>
                                                                                            <td>
                                                                                                <p class="mb-0">
                                                                                                    Beneficiary :</p>
                                                                                            </td>
                                                                                            <td></td>
                                                                                        </tr>
                                                                                    </table>
                                                                                </div>
                                                                            </td>
                                                                            <td width="25%" align="center"
                                                                                style="vertical-align: middle;">
                                                                                <p class="mb-0"><strong> For
                                                                                        &nbsp;&nbsp;&nbsp;
                                                                                        {{companyDetails?.legal_name}}</strong>
                                                                                </p>
                                                                                <br>
                                                                                <br>
                                                                                <p class="mb-0"><strong> Authorised
                                                                                        Signatory </strong></p>
                                                                            </td>

                                                                        </tr>

                                                                    </tbody>
                                                                </table>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                            <div *ngIf="(sez || invoiceInfo.irn_generated == 'Success') && companyDetails.show_application_reference_number_in_etax == 1"
                                                class='footer-txt'>
                                                <div *ngIf="invoiceInfo.suptyp == 'SEZWP'" class="pl-3">
                                                    <p>SEZWP - {{companyDetails.sezwp_terms_and_conditions}} </p>
                                                </div>
                                                <div *ngIf="invoiceInfo.suptyp == 'SEZWOP'" class="pl-3">
                                                    <p>SEZWOP - {{companyDetails.sezwop_terms_and_conditions }} </p>
                                                </div>
                                                <div class='text-right pt-2 pr-3'>
                                                    <p>Application Reference Number - {{invoiceInfo.arn_number}}</p>

                                                </div>
                                                <div class='text-right pr-3'>
                                                    <p>Date of filing - {{invoiceInfo?.company_data_filing}}</p>
                                                </div>

                                            </div>


                                            <div *ngIf="companyDetails?.custom_e_tax_invoice_footer == 1">
                                                <img [src]="apiDomain + companyDetails?.custom_e_tax_invoice_footer_image"
                                                    alt="header" width="100%">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Landscape format end-->


                        </ng-template>
                    </li>


                    <li [ngbNavItem]="7"
                        *ngIf="(invoiceInfo?.irn_generated === 'Success'|| invoiceInfo?.irn_generated === 'Cancelled' )&& invoiceInfo?.has_credit_items==='Yes'&& invoiceInfo?.invoice_type === 'B2B'&& invoiceInfo.invoice_from !=='Web'">
                        <a ngbNavLink>E-Credit Invoice</a>

                        <ng-template ngbNavContent>
                            <!-- Potrait format start-->
                            <div *ngIf="this.companyDetails.e_tax_format == 'Portrait'" class="pt-3 summary preview"
                                id="section-to-print">
                                <div>
                                    <div class="row mb-2">
                                        <div class="col-md-6">
                                            <div class="d-flex">
                                                <h5 class="text-capitalize text-primary"><strong>{{invoicetypeName ?
                                                        invoicetypeName : 'Credit'}} Invoice</strong></h5>
                                                <!-- <p class="mb-0" style="line-height: 30px; margin-left: 10px;"> --
                                                    <strong> {{companyDetails.e_tax_format}}</strong>
                                                </p> -->
                                            </div>
                                        </div>
                                        <div class="col-md-6 text-right section-to-print">
                                            <!-- <button *ngIf="this.companyDetails.e_tax_format == 'Landscape'"
                                                class="btn btn-sm btn-primary mr-2"
                                                (click)="this.companyDetails.e_tax_format = 'Portrait'">Portrait</button>
                                            <button *ngIf="this.companyDetails.e_tax_format == 'Portrait'"
                                                class="btn btn-sm btn-primary mr-2"
                                                (click)="this.companyDetails.e_tax_format = 'Landscape'">Landscape</button> -->
                                            <button (click)="printPdf()" class="btn btn-success py-1"
                                                type="button">Print</button>
                                        </div>
                                    </div>
                                    <div class="">
                                        <div>
                                            <table class="table mb-0">
                                                <tbody>
                                                    <tr>
                                                        <td width="50%" style="vertical-align: middle;">
                                                            <div class="logo">
                                                                <!-- <div
                                                                    *ngIf="companyDetails?.custom_e_tax_invoice_logo == 1; else logoBlock2">
                                                                    <img [src]="apiDomain + companyDetails?.custom_e_tax_invoice_logo_image"
                                                                        alt=" " width="100%">
                                                                </div>
                                                                <ng-template #logoBlock2> -->
                                                                <div class="mb-3" *ngIf="invoiceInfo?.company_logo">
                                                                    <img class="img-fluid"
                                                                        [src]="apiDomain + invoiceInfo?.company_logo"
                                                                        alt="">
                                                                </div>
                                                                <!-- </ng-template> -->

                                                                <div>
                                                                    <address>
                                                                        <b>
                                                                            <p>{{invoiceInfo.company_legal_name}}
                                                                                <br>
                                                                                {{invoiceInfo?.company_address_1}}
                                                                                ,{{invoiceInfo?.company_address_2}}
                                                                                ,
                                                                                {{invoiceInfo?.company_location}},
                                                                                {{invoiceInfo?.company_pincode}}
                                                                            </p>
                                                                        </b>
                                                                    </address>
                                                                </div>

                                                                <!-- <ng-container
                                                                    *ngIf="this.invoiceInfo?.irn_generated == 'Success' && (this.companyDetails?.name == 'FMCOMR-01' || this.companyDetails?.name == 'FPBSA-01' || this.companyDetails?.name == 'HRC-01' || this.companyDetails?.name == 'JWMC-01'); else elseSeller">
                                                                    <div>
                                                                        <address>
                                                                            <b>
                                                                                <p> {{irnObject?.irn_request_object?.data?.SellerDtls.LglNm}}
                                                                                    <br>
                                                                                    {{irnObject?.irn_request_object?.data?.SellerDtls.Addr1}}
                                                                                    ,{{irnObject?.irn_request_object?.data?.SellerDtls.Addr2}}
                                                                                    ,
                                                                                    {{irnObject?.irn_request_object?.data?.SellerDtls.Loc}},
                                                                                    {{irnObject?.irn_request_object?.data?.SellerDtls.Pin}}
                                                                                </p>
                                                                            </b>
                                                                        </address>
                                                                    </div>
                                                                </ng-container>

                                                                <ng-template #elseSeller>
                                                                    <div>
                                                                        <address>
                                                                            <b>
                                                                                <p>{{companyDetails.legal_name}}
                                                                                    <br>
                                                                                    {{companyDetails?.address_1}}
                                                                                    ,{{companyDetails?.address_2}}
                                                                                    ,
                                                                                    {{companyDetails?.location}},
                                                                                    {{companyDetails?.pincode}}
                                                                                </p>
                                                                            </b>
                                                                        </address>
                                                                    </div>
                                                                </ng-template> -->


                                                            </div>
                                                        </td>
                                                        <td width="50%" align="right">
                                                            <div class="qr">
                                                                <img class="img-fluid"
                                                                    [src]="apiDomain + invoiceInfo.credit_qr_code_image"
                                                                    alt="">
                                                                <span class="imgTextPMS"
                                                                    *ngIf="invoiceInfo.irn_generated === 'Cancelled'">
                                                                    <h1>Cancelled</h1>
                                                                </span>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>

                                        <div>
                                            <table class="table mb-0">
                                                <tbody>
                                                    <tr>
                                                        <td width="100%">
                                                            <div class="border">
                                                                <div class="heading">
                                                                    <h4><strong>1. e-Invoice
                                                                            Details</strong></h4>
                                                                </div>
                                                                <div class="c-p-8">
                                                                    <table>
                                                                        <tr>
                                                                            <td style="max-width: 200px;">
                                                                                <strong>IRN</strong> :
                                                                                {{invoiceInfo.credit_irn_number}}
                                                                            </td>
                                                                            <td><strong>Ack. No : <br>
                                                                                </strong> {{invoiceInfo.credit_ack_no}}
                                                                            </td>
                                                                            <td><strong>Ack. Date : <br>
                                                                                </strong> {{invoiceInfo.credit_ack_date
                                                                                }}
                                                                            </td>
                                                                        </tr>
                                                                    </table>
                                                                </div>
                                                            </div>
                                                        </td>
                                                    </tr>

                                                </tbody>
                                            </table>
                                        </div>

                                        <div>
                                            <table class="table mb-0">
                                                <tbody>
                                                    <tr>
                                                        <td width="100%">
                                                            <div class="border">
                                                                <div class="heading">
                                                                    <h4><strong>2. Transaction
                                                                            Details</strong></h4>
                                                                </div>
                                                                <div class="c-p-8">
                                                                    <table>
                                                                        <tr>
                                                                            <td width="15%">
                                                                                <strong>Category</strong> :
                                                                                {{invoiceInfo.invoice_type}}
                                                                            </td>
                                                                            <td width="25%">
                                                                                <strong>Invoice No
                                                                                </strong> :
                                                                                {{invoiceInfo.invoice_number}}
                                                                            </td>
                                                                            <td *ngIf="this.CreditInvoice" width="30%">
                                                                                <strong>Document Type
                                                                                </strong> : Credit Invoice
                                                                            </td>
                                                                            <td width="30%">
                                                                                <strong>Document Date
                                                                                </strong> :{{invoiceInfo.invoice_date |
                                                                                date :'dd/MM/yyyy'}}
                                                                            </td>
                                                                        </tr>

                                                                    </table>

                                                                    <table class="">

                                                                    </table>
                                                                </div>
                                                            </div>
                                                        </td>
                                                    </tr>

                                                </tbody>
                                            </table>
                                        </div>

                                        <div>
                                            <table class="table mb-0">
                                                <tbody>
                                                    <tr>
                                                        <td width="100%">
                                                            <div class="border">
                                                                <div class="heading">
                                                                    <h4><strong>3. Party
                                                                            Details</strong></h4>
                                                                </div>
                                                                <div class="c-p-8">
                                                                    <table class="party">
                                                                        <tr>
                                                                            <td width="49%"
                                                                                style="vertical-align: top;">
                                                                                <div>
                                                                                    <h5><strong>Seller</strong>
                                                                                    </h5>
                                                                                </div>

                                                                                <div class="max-500">
                                                                                    <p class="mb-1">
                                                                                        <b>GSTIN </b>:
                                                                                        {{invoiceInfo?.company_gst}},
                                                                                        <b class="ml-1">PAN </b>:
                                                                                        {{invoiceInfo?.company_gst?.substring(2).slice(0,-3)}}
                                                                                    </p>
                                                                                    <p class="mb-1">
                                                                                        <b>FSSAI LIC No </b>:
                                                                                        {{invoiceInfo?.company_fssai_number}}
                                                                                    </p>
                                                                                    <p>{{invoiceInfo?.company_name}}<br>{{invoiceInfo?.company_legal_name}}
                                                                                        <br>
                                                                                        {{invoiceInfo?.company_address_1}}
                                                                                        ,{{invoiceInfo?.company_address_2}}
                                                                                        ,
                                                                                        {{invoiceInfo?.company_location}},
                                                                                        {{invoiceInfo?.company_pincode}}
                                                                                    </p>
                                                                                </div>

                                                                                <!-- <ng-container
                                                                                    *ngIf="this.invoiceInfo?.irn_generated == 'Success' && this.invoiceInfo?.invoice_type == 'B2B'&&(this.companyDetails?.name == 'FMCOMR-01' || this.companyDetails?.name == 'FPBSA-01' || this.companyDetails?.name == 'HRC-01' || this.companyDetails?.name == 'JWMC-01'); else elseSeller">

                                                                                    <div class="max-500">
                                                                                        <p class="mb-1">
                                                                                            <b>GSTIN </b>:
                                                                                            {{irnObject?.irn_request_object?.data?.SellerDtls.Gstin}},
                                                                                            <b class="ml-1">PAN </b>:
                                                                                            {{irnObject?.irn_request_object?.data?.SellerDtls.Gstin.substring(2,
                                                                                            12)}}
                                                                                        </p>
                                                                                        <p class="mb-1">
                                                                                            <b>FSSAI LIC No </b>:
                                                                                            {{null}}
                                                                                        </p>
                                                                                        <p>{{irnObject?.irn_request_object?.data?.SellerDtls.TrdNm}}<br>{{irnObject?.irn_request_object?.data?.SellerDtls.LglNm}}
                                                                                            <br>
                                                                                            {{irnObject?.irn_request_object?.data?.SellerDtls.Addr1}}
                                                                                            ,{{irnObject?.irn_request_object?.data?.SellerDtls.Addr2}}
                                                                                            ,
                                                                                            {{irnObject?.irn_request_object?.data?.SellerDtls.Loc}},
                                                                                            {{irnObject?.irn_request_object?.data?.SellerDtls.Pin}}
                                                                                        </p>
                                                                                    </div>
                                                                                </ng-container>

                                                                                <ng-template #elseSeller>
                                                                                    <div class="max-500">
                                                                                        <p class="mb-1">
                                                                                            <b>GSTIN </b>:
                                                                                            {{companyDetails?.gst_number}},
                                                                                            <b class="ml-1">PAN </b>:
                                                                                            {{companyDetails?.pan_number}}
                                                                                        </p>
                                                                                        <p class="mb-1">
                                                                                            <b>FSSAI LIC No </b>:
                                                                                            {{companyDetails?.fssai_number}}
                                                                                        </p>
                                                                                        <p>{{companyDetails?.company_name}}<br>{{companyDetails?.legal_name}}
                                                                                            <br>
                                                                                            {{companyDetails?.address_1}}
                                                                                            ,{{companyDetails?.address_2}}
                                                                                            ,
                                                                                            {{companyDetails?.location}},
                                                                                            {{companyDetails?.pincode}}
                                                                                        </p>
                                                                                    </div>
                                                                                </ng-template> -->


                                                                            </td>
                                                                            <td width="51%"
                                                                                style="vertical-align: top;border-left: 1px solid rgba(102, 102, 102, 0.479);padding-left: 1%;">
                                                                                <div>
                                                                                    <h5><strong>Purchaser</strong>
                                                                                    </h5>
                                                                                </div>

                                                                                <div>
                                                                                    <p class="mb-1">
                                                                                        <b> GSTIN </b>:
                                                                                        {{invoiceInfo.gst_number}}
                                                                                    </p>
                                                                                    <p> {{invoiceInfo.legal_name}}
                                                                                        <br>
                                                                                        {{invoiceInfo.address_floor_number?invoiceInfo.address_floor_number+',':''}}
                                                                                        {{invoiceInfo.address_1?invoiceInfo.address_1+',':''}}
                                                                                        {{invoiceInfo.address_2 !==
                                                                                        invoiceInfo.address_1
                                                                                        ?invoiceInfo.address_2+',':''}}
                                                                                        <br>
                                                                                        {{invoiceInfo.address_street?invoiceInfo.address_street+',':''}}
                                                                                        {{invoiceInfo.location?invoiceInfo.location+',':''}}
                                                                                        {{invoiceInfo.pincode}}
                                                                                        {{invoiceInfo.email?","+invoiceInfo.email:''}}
                                                                                        <br>
                                                                                        <b> Place of Supply </b>:
                                                                                        {{invoiceInfo?.place_of_supply_name?.state}}({{(invoiceInfo.place_of_supply
                                                                                        | trim) || 'NA'}})
                                                                                    </p>
                                                                                </div>
                                                                            </td>
                                                                        </tr>

                                                                    </table>

                                                                </div>
                                                            </div>
                                                        </td>
                                                    </tr>

                                                </tbody>
                                            </table>
                                        </div>

                                        <div>
                                            <!-- <table class="table mb-0">
                                                <tbody>
                                                    <tr>
                                                        <td width="100%"> -->
                                            <div class="pdf-table">
                                                <div class="heading b-h">
                                                    <h4><strong>4. Item
                                                            Details</strong></h4>
                                                </div>
                                                <div class="c-p-8  table-responsive">
                                                    <table class="table pdfTable goods mb-0">
                                                        <thead>
                                                            <tr>
                                                                <th>Date</th>
                                                                <th>Product Description
                                                                </th>

                                                                <th style="width: 80px;">SAC/HSN</th>
                                                                <th>Item Value</th>
                                                                <th>GST Rate</th>

                                                                <th>GST Amount</th>

                                                                <!-- <th>S.CESS</th> -->
                                                                <th>CESS</th>




                                                                <th>
                                                                    Total Item Value
                                                                </th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>


                                                            <tr *ngFor="let item of invoiceInfo.items; let i = index">
                                                                <td style="min-width: 80px;"
                                                                    *ngIf="item.item_mode === 'Credit'">
                                                                    {{item?.date | date:'dd-MM-yyyy'||'NA'}}</td>
                                                                <td *ngIf="item.item_mode === 'Credit'">
                                                                    {{item?.description||'NA'}}
                                                                </td>
                                                                <td *ngIf="item.item_mode === 'Credit'">
                                                                    {{item?.sac_code || 'NA'}}
                                                                </td>
                                                                <td *ngIf="item.item_mode === 'Credit'"
                                                                    class="text-right">
                                                                    {{item?.item_value || 'NA'}}
                                                                </td>
                                                                <td *ngIf="item.item_mode === 'Credit'"
                                                                    class="text-right">
                                                                    {{item.gst_rate}} %
                                                                </td>
                                                                <td *ngIf="item.item_mode === 'Credit'"
                                                                    class="text-right">
                                                                    {{(item.sgst_amount + item.igst_amount +
                                                                    item.cgst_amount | number : '0.2') || 'NA' }}
                                                                </td>
                                                                <!-- <td *ngIf="item.item_mode === 'Credit'"
                                                                    class="text-right">
                                                                    {{item?.state_cess_amount || 'NA'}}</td> -->
                                                                <td *ngIf="item.item_mode === 'Credit'"
                                                                    class="text-right">
                                                                    {{item.cess_amount || 'NA'}}</td>
                                                                <td *ngIf="item.item_mode === 'Credit'"
                                                                    class="text-right">
                                                                    {{(item.item_value_after_gst | number : '0.2') ||
                                                                    'NA'}}
                                                                </td>
                                                            </tr>

                                                        </tbody>
                                                    </table>

                                                </div>

                                            </div>
                                            <!-- </td>
                                                    </tr>

                                                </tbody>
                                            </table> -->
                                        </div>

                                        <div class="c-border-table"></div>


                                        <div class=" my-2 c-border-table"></div>
                                        <div class="">
                                            <table class="table  goods goods2" style="margin: 0;">
                                                <thead>
                                                    <tr>
                                                        <th>Tax'ble Value</th>
                                                        <th>CGST </th>

                                                        <th>SGST </th>
                                                        <th>IGST </th>

                                                        <th>CESS </th>
                                                        <!-- <th>State CESS </th> -->
                                                        <th>Discount</th>
                                                        <th>
                                                            Other Charges
                                                        </th>
                                                        <th>
                                                            Round off
                                                        </th>
                                                        <th>
                                                            Total Inv. Value
                                                        </th>

                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td class="text-right">{{invoiceInfo?.credit_value_before_gst |
                                                            number : '0.2'}}</td>
                                                        <td class="text-right">{{invoiceInfo?.credit_cgst_amount |
                                                            number : '0.2'}} </td>
                                                        <td class="text-right">{{invoiceInfo?.credit_sgst_amount |
                                                            number : '0.2'}}</td>
                                                        <td class="text-right">{{invoiceInfo?.credit_igst_amount |
                                                            number : '0.2'}}</td>
                                                        <td class="text-right">
                                                            {{invoiceInfo?.total_credit_central_cess_amount | number :
                                                            '0.2'}}
                                                        </td>
                                                        <!-- <td class="text-right">
                                                            {{invoiceInfo?.total_credit_state_cess_amount | number :
                                                            '0.2'}}</td> -->
                                                        <td class="text-right">0</td>
                                                        <td class="text-right"> {{invoiceInfo?.other_charges | number :
                                                            '0.2'}}</td>
                                                        <td class="text-right">0</td>
                                                        <td class="text-right">{{invoiceInfo?.credit_value_after_gst|
                                                            number : '0.2'}}</td>
                                                    </tr>


                                                </tbody>
                                            </table>

                                        </div>
                                        <div class="border my-2">
                                            <table class="table table-light mb-0">
                                                <tbody>
                                                    <tr>
                                                        <td width="100%">
                                                            <table width="100" class="table mb-1">
                                                                <tbody>
                                                                    <tr>
                                                                        <td width="50%" style="vertical-align: middle;">
                                                                            <div class="">

                                                                                <div class="c-p-8">
                                                                                    <div style="padding: 2px 5px">
                                                                                        <strong>Generated
                                                                                            By</strong> :
                                                                                        {{loginData?.full_name}}
                                                                                    </div>
                                                                                    <div style="padding:2px 5px">
                                                                                        <strong>Print
                                                                                            Date
                                                                                        </strong> : {{myDate |
                                                                                        date:'mediumDate'}}
                                                                                    </div>
                                                                                    <div style="padding: 2px 5px">
                                                                                        Application Reference Number -
                                                                                        {{invoiceInfo?.company_application_reference_number}}
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </td>
                                                                        <!-- <td width="33.33%" align="center" style="vertical-align: middle;">
                                      <div class="">

                                      </div>
                                    </td> -->
                                                                        <td width="50%" align="right">
                                                                            <div class="">

                                                                                <div class="c-p-8">

                                                                                    <div>
                                                                                        <div style="padding:2px 5px">
                                                                                            <!-- <b>Amount In Words :</b> {{invoiceInfo?.sales_amount_after_tax | amountToWord }}
                                                                                            <br> -->
                                                                                            <b>Amount In Words :</b>
                                                                                            {{invoiceInfo?.amount_in_word
                                                                                            ||
                                                                                            (invoiceInfo?.sales_amount_after_tax
                                                                                            | amountToWord) }}
                                                                                            <br>

                                                                                        </div>
                                                                                        <div style="padding:2px 5px">
                                                                                            <strong> System Generated On
                                                                                            </strong> :
                                                                                            {{invoiceInfo.credit_ack_date
                                                                                            | date:'mediumDate'}}
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </td>
                                                                    </tr>

                                                                </tbody>
                                                            </table>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>

                                        <div *ngIf="companyDetails?.custom_e_tax_invoice_footer == 1">
                                            <img [src]="apiDomain + companyDetails?.custom_e_tax_invoice_footer_image"
                                                alt=" " width="100%">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Potrait format end-->


                            <!-- Landscape format start-->
                            <div *ngIf="this.companyDetails.e_tax_format == 'Landscape'" class="pt-3 summary preview"
                                id="section-to-print">
                                <div>
                                    <div>
                                        <div class="min-h">
                                            <div class="row mb-2">
                                                <div class="col-md-6">
                                                    <div class="d-flex">
                                                        <h5 class="text-capitalize text-primary">
                                                            <strong>{{invoicetypeName ? invoicetypeName : 'Credit'}}
                                                                Invoice </strong>
                                                        </h5>
                                                        <!-- <p class="mb-0" style="line-height: 30px; margin-left: 10px;">
                                                            -- <strong> {{companyDetails.e_tax_format}}</strong></p> -->
                                                    </div>
                                                </div>

                                                <div class="col-md-6 text-right section-to-print" id="pdfBtn">
                                                    <div>
                                                        <!-- <button *ngIf="this.companyDetails.e_tax_format == 'Landscape'"
                                                            class="btn btn-sm btn-primary mr-2"
                                                            (click)="this.companyDetails.e_tax_format = 'Portrait'">Portrait</button>
                                                        <button *ngIf="this.companyDetails.e_tax_format == 'Portrait'"
                                                            class="btn btn-sm btn-primary mr-2"
                                                            (click)="this.companyDetails.e_tax_format = 'Landscape'">Landscape</button> -->
                                                        <button (click)="printPdf()" class="btn btn-sm btn-success mr-2"
                                                            type="button">Print</button>

                                                    </div>
                                                </div>
                                            </div>
                                            <div>
                                                <table class="table mb-0 goods3">
                                                    <tbody>
                                                        <tr>
                                                            <td width="25%" style="vertical-align: middle;">
                                                                <div class="logo">

                                                                    <div class="mb-3" *ngIf="invoiceInfo?.company_logo">
                                                                        <img class="img-fluid"
                                                                            [src]="apiDomain + invoiceInfo?.company_logo"
                                                                            alt="">
                                                                    </div>
                                                                </div>
                                                            </td>
                                                            <td width="25%">
                                                                <div>
                                                                    <address class="mb-0">
                                                                        <p class="mb-0">
                                                                            <b>{{invoiceInfo?.company_name}}<br>
                                                                                {{invoiceInfo?.company_legal_name}}
                                                                                <br>
                                                                                {{invoiceInfo?.company_address_1}}
                                                                                ,{{invoiceInfo?.company_address_2}}
                                                                                ,
                                                                                {{invoiceInfo?.company_location}},
                                                                                {{invoiceInfo?.company_pincode}}
                                                                            </b>
                                                                        </p>
                                                                    </address>
                                                                    <p class="mb-0"><b>GSTIN </b>:
                                                                        {{invoiceInfo?.company_gst}}</p>
                                                                    <p class="mb-0"><b>Tel </b>: </p>
                                                                    <p class="mb-0"><b>E-Mail </b>: </p>
                                                                    <p class="mb-0"><b>PAN No. </b>:
                                                                        {{invoiceInfo?.company_gst?.substring(2).slice(0,-3)}}
                                                                    </p>
                                                                    <p class="mb-0"><b>IRN </b>:
                                                                        {{invoiceInfo.credit_irn_number}}</p>
                                                                    <p class="mb-0"><b>Ack. No</b>:
                                                                        {{invoiceInfo.credit_ack_no}}</p>
                                                                    <p class="mb-0"><b>IRN Date </b>:
                                                                        {{invoiceInfo.credit_ack_date | date}}</p>
                                                                </div>
                                                            </td>
                                                            <td width="25%">
                                                                <div>
                                                                    <p class="mb-0"><b>Invoice No. </b>:
                                                                        {{invoiceInfo.invoice_number}}</p>
                                                                    <p class="mb-0"><b>Invoice date </b>:
                                                                        {{invoiceInfo.invoice_date | date :
                                                                        'dd/MM/yyyy'}}</p>
                                                                    <p class="mb-0" *ngIf="companyDetails?.website">
                                                                        <b>Website </b>: {{companyDetails?.website}}
                                                                    </p>
                                                                    <p class="mb-0"><b>VAT No. </b>: </p>
                                                                    <p class="mb-0"><b>CIN </b>: </p>
                                                                    <p class="mb-0"><b>Sales Order No </b>: </p>
                                                                    <p class="mb-0"><b>Whether Tax is Payable on Reverse
                                                                            Charge </b>: No</p>
                                                                </div>
                                                            </td>
                                                            <td width="25%" align="right">
                                                                <div class="qr">
                                                                    <img class="img-fluid"
                                                                        [src]="apiDomain + invoiceInfo?.qr_code_image"
                                                                        alt="">
                                                                    <span class="imgTextPMS"
                                                                        *ngIf="invoiceInfo.irn_generated === 'Cancelled'">
                                                                        <h1>Cancelled</h1>
                                                                    </span>
                                                                </div>

                                                                <div class="qr">
                                                                    <img class="img-fluid"
                                                                        [src]="apiDomain + invoiceInfo.credit_qr_code_image"
                                                                        alt="">
                                                                </div>
                                                                <div class="qr">
                                                                    <img class="img-fluid"
                                                                        [src]="apiDomain + invoiceInfo.b2c_qrimage"
                                                                        alt="">
                                                                </div>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>

                                            <div>
                                                <table class="table goods3 mb-0">
                                                    <tbody>
                                                        <tr>
                                                            <td width="100%">
                                                                <div class="">
                                                                    <div class="c-p-8">
                                                                        <table class="party">
                                                                            <tr>
                                                                                <td width="50%"
                                                                                    style="vertical-align: top;">
                                                                                    <p class="mb-1"><b><u>Bill To
                                                                                                Details:</u></b></p>
                                                                                    <div
                                                                                        *ngIf="invoiceInfo?.invoice_type === 'B2B'">
                                                                                        <p class="mb-1">
                                                                                            <b>{{invoiceInfo.guest_name}}<br>
                                                                                                {{invoiceInfo.legal_name}}
                                                                                                <br>
                                                                                                {{invoiceInfo.address_floor_number?invoiceInfo.address_floor_number+',':''}}
                                                                                                {{invoiceInfo.address_1?invoiceInfo.address_1+',':''}}
                                                                                                {{invoiceInfo.address_2
                                                                                                !==
                                                                                                invoiceInfo.address_1
                                                                                                ?invoiceInfo.address_2+',':''}}
                                                                                                <br>
                                                                                                {{invoiceInfo.address_street?invoiceInfo.address_street+',':''}}
                                                                                                {{invoiceInfo.location?invoiceInfo.location+',':''}}
                                                                                                {{invoiceInfo.pincode}}
                                                                                            </b>
                                                                                            <b>Place of Supply </b>:
                                                                                            {{invoiceInfo?.place_of_supply_name?.state}}({{(invoiceInfo.place_of_supply
                                                                                            | trim) || 'NA'}})
                                                                                        </p>
                                                                                        <p class="mb-0">
                                                                                            <b> GSTIN </b>:
                                                                                            {{invoiceInfo.gst_number}},
                                                                                        </p>
                                                                                        <p class="mb-0">
                                                                                            <b>Tel </b>:
                                                                                            <!-- {{invoiceInfo?.gst_number.substr(2, 10)}} -->
                                                                                        </p>
                                                                                        <p class="mb-0">
                                                                                            <b>Email</b>:
                                                                                            {{invoiceInfo.email?","+invoiceInfo.email:''}}
                                                                                        </p>
                                                                                        <p class="mb-0">
                                                                                            <b> Place of Supply </b>:
                                                                                            {{invoiceInfo?.place_of_supply_name?.state}}({{(invoiceInfo.place_of_supply
                                                                                            | trim) || 'NA'}})
                                                                                        </p>
                                                                                    </div>


                                                                                    <div
                                                                                        *ngIf="invoiceInfo?.invoice_type === 'B2C'">
                                                                                        <p class="mb-0">
                                                                                            <b> Guest Name :</b>
                                                                                            {{invoiceInfo.guest_name}}
                                                                                        </p>
                                                                                        <!-- <p class="mb-1">
                                                                                          <b> Room Number :</b> {{invoiceInfo.room_number}}
                                                                                      </p> -->
                                                                                        <p class="mb-0">
                                                                                            <b> Confirmation Number
                                                                                                :</b>
                                                                                            {{invoiceInfo.confirmation_number}}
                                                                                        </p>

                                                                                    </div>
                                                                                </td>
                                                                                <td width="50%"
                                                                                    style="vertical-align: top;">
                                                                                    <!-- <p class="mb-0"><b><u>Registered Office Address:</u></b></p>
                                                                                    <p>
                                                                                        Raheja Tower Plot No C30 Block G,<br>
                                                                                        Bandra Kurla Complex Bandra E,<br>
                                                                                        54B Lands End, Sisters Bunglow, Ground 1st and 2nd Floor, Wipro Limited<br>
                                                                                        www.chalethotels.com</p> -->
                                                                                </td>
                                                                            </tr>

                                                                        </table>

                                                                    </div>
                                                                </div>
                                                            </td>
                                                        </tr>

                                                    </tbody>
                                                </table>
                                            </div>


                                            <div>
                                                <div class="pdf-table">
                                                    <div class="c-p-8  table-responsive goods3">
                                                        <table class="table pdfTable goods mb-0">
                                                            <thead>
                                                                <tr>
                                                                    <th rowspan="2">S.NO</th>
                                                                    <th rowspan="2">Service<br> Description</th>
                                                                    <th rowspan="2">HSN/SAC <br>Code </th>
                                                                    <th>UQC</th>
                                                                    <th>Unit <br>Price</th>
                                                                    <th>Amount</th>
                                                                    <th>Discount</th>
                                                                    <th>Taxable<br> Value</th>
                                                                    <th>CGST Rate<br> (%)</th>
                                                                    <th>CGST<br> Amt (Rs.)</th>
                                                                    <th>SGST/UTGST<br> Rate (%)</th>
                                                                    <th>SGST/UTGST<br> Amt(Rs.)</th>
                                                                    <th>IGST Rate <br>(%)</th>
                                                                    <th>IGST <br> Amt(Rs.)</th>
                                                                    <th>Cess Adv <br> Rate %</th>
                                                                    <th>Cess Adv Amt. <br>(Rs)</th>
                                                                    <th>Total Amt.</th>
                                                                </tr>
                                                                <tr>
                                                                    <th>Qty.</th>
                                                                    <th>(Rs.)</th>
                                                                    <th>(Rs.)</th>
                                                                    <th>(Rs.)</th>
                                                                    <th>(Rs.)</th>
                                                                    <th>(%)</th>
                                                                    <th>(Rs.)</th>
                                                                    <th>(%)</th>
                                                                    <th>(Rs.)</th>
                                                                    <th>(%)</th>
                                                                    <th>(Rs.)</th>
                                                                    <th>(%)</th>
                                                                    <th>(Rs.)</th>
                                                                    <th>(Rs.)</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>

                                                                <tr
                                                                    *ngFor="let item of invoiceInfo.items; let i = index">
                                                                    <td style="min-width: 80px;"
                                                                        *ngIf="item.item_mode === 'Credit'">
                                                                        {{i+1}}</td>
                                                                    <td *ngIf="item.item_mode === 'Credit'">
                                                                        {{item?.description||'NA'}}
                                                                    </td>
                                                                    <td *ngIf="item.item_mode === 'Credit'">
                                                                        {{item?.sac_code || 'NA'}}
                                                                    </td>
                                                                    <td *ngIf="item.item_mode === 'Credit'"
                                                                        class="text-right">
                                                                        {{item?.quantity}}
                                                                    </td>
                                                                    <td *ngIf="item.item_mode === 'Credit'"
                                                                        class="text-right">
                                                                        {{item?.item_value || 'NA'}}
                                                                    </td>
                                                                    <td *ngIf="item.item_mode === 'Credit'"
                                                                        class="text-right">
                                                                        {{item?.item_value || 'NA'}}
                                                                    </td>
                                                                    <td *ngIf="item.item_mode === 'Credit'"
                                                                        class="text-right">
                                                                        {{item.gst_rate}} %</td>
                                                                    <td *ngIf="item.item_mode === 'Credit'"
                                                                        class="text-right">
                                                                        {{item?.item_value || 'NA'}}
                                                                    </td>
                                                                    <td *ngIf="item.item_mode === 'Credit'"
                                                                        class="text-right">
                                                                        {{item?.cgst || 'NA'}}
                                                                    </td>
                                                                    <td *ngIf="item.item_mode === 'Credit'"
                                                                        class="text-right">
                                                                        {{(item?.cgst_amount | number : '0.2') || 'NA'}}
                                                                    </td>
                                                                    <td *ngIf="item.item_mode === 'Credit'"
                                                                        class="text-right">
                                                                        {{item?.sgst || 'NA'}}
                                                                    </td>
                                                                    <td *ngIf="item.item_mode === 'Credit'"
                                                                        class="text-right">
                                                                        {{(item?.sgst_amount | number : '0.2') || 'NA'}}
                                                                    </td>
                                                                    <td *ngIf="item.item_mode === 'Credit'"
                                                                        class="text-right">
                                                                        {{item?.igst || 'NA'}}
                                                                    </td>
                                                                    <td *ngIf="item.item_mode === 'Credit'"
                                                                        class="text-right">
                                                                        {{(item?.igst_amount | number : '0.2') || 'NA'}}
                                                                    </td>
                                                                    <td *ngIf="item.item_mode === 'Credit'"
                                                                        class="text-right">
                                                                        {{item?.cess || 'NA'}}
                                                                    </td>
                                                                    <td *ngIf="item.item_mode === 'Credit'"
                                                                        class="text-right">
                                                                        {{item?.cess_amount || 'NA'}}
                                                                    </td>
                                                                    <td *ngIf="item.item_mode === 'Credit'"
                                                                        class="text-right">
                                                                        {{item?.item_value_after_gst || 'NA'}}
                                                                    </td>
                                                                </tr>
                                                                <tr style="background-color: #f4f4f4;">
                                                                    <td colspan="7" class="border-right border-bottom">
                                                                        <strong>Grand Total</strong>
                                                                    </td>
                                                                    <td class="text-right border-right border-bottom">
                                                                        <strong>{{invoiceInfo.credit_value_before_gst |
                                                                            number : '0.2'}}</strong>
                                                                    </td>
                                                                    <td colspan="2"
                                                                        class="text-right border-right border-bottom">
                                                                        <strong>{{invoiceInfo.credit_cgst_amount |
                                                                            number : '0.2'}}</strong>
                                                                    </td>
                                                                    <td colspan="2"
                                                                        class="text-right border-right border-bottom">
                                                                        <strong>{{invoiceInfo.credit_sgst_amount |
                                                                            number : '0.2'}}</strong>
                                                                    </td>
                                                                    <td colspan="2"
                                                                        class="text-right border-right border-bottom">
                                                                        <strong>{{invoiceInfo.credit_igst_amount |
                                                                            number : '0.2'}}</strong>
                                                                    </td>
                                                                    <td colspan="2"
                                                                        class="text-right border-right border-bottom">
                                                                        <strong>{{invoiceInfo?.total_credit_central_cess_amount
                                                                            | number : '0.2'}}</strong>
                                                                    </td>
                                                                    <td class="text-right border-bottom">
                                                                        <strong>{{invoiceInfo.total_credit_state_cess_amount
                                                                            | number : '0.2'}}</strong>
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td colspan="12" class="border-right border-bottom">
                                                                    </td>
                                                                    <td colspan="3" class="border-right border-bottom">
                                                                        <strong>Sub Total (Rs.) </strong>
                                                                    </td>
                                                                    <td colspan="2" class="text-right border-bottom">
                                                                        <strong>{{invoiceInfo.credit_value_after_gst}}</strong>
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td colspan="12" class="border-right border-bottom">
                                                                    </td>
                                                                    <td colspan="3" class="border-right border-bottom">
                                                                        <strong>Round off (Rs.) </strong>
                                                                    </td>
                                                                    <td colspan="2" class="text-right border-bottom">
                                                                        <strong></strong>
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td colspan="12" class="border-right"></td>
                                                                    <td colspan="3" class="border-right">
                                                                        <strong>Invoice Value (Rs.)</strong>
                                                                    </td>
                                                                    <td colspan="2" class="text-right">
                                                                        <strong>{{invoiceInfo.credit_value_after_gst}}</strong>
                                                                    </td>
                                                                </tr>

                                                            </tbody>
                                                        </table>


                                                    </div>

                                                </div>
                                            </div>


                                            <div class=" my-2">
                                                <table class="table table-light mb-0">
                                                    <tbody>
                                                        <tr>
                                                            <td width="100%">
                                                                <table width="100" class="table goods3"
                                                                    style="margin-bottom: 0;">
                                                                    <tbody>
                                                                        <tr>
                                                                            <td width="25%" align="center"
                                                                                style="vertical-align: bottom;">
                                                                                <p class="mb-0"><strong> Guest
                                                                                        Signature</strong></p>
                                                                            </td>
                                                                            <td width="50%" align="center">
                                                                                <div class="table-bottom">
                                                                                    <table class="table">
                                                                                        <tr>
                                                                                            <td>
                                                                                                <p class="mb-0">Payment
                                                                                                    Details:</p>
                                                                                            </td>
                                                                                            <td></td>
                                                                                        </tr>
                                                                                        <tr>
                                                                                            <td>
                                                                                                <p class="mb-0">Bank
                                                                                                    Account :</p>
                                                                                            </td>
                                                                                            <td>
                                                                                                <p class="mb-0">Payment
                                                                                                    Due Date :</p>
                                                                                            </td>
                                                                                        </tr>
                                                                                        <tr>
                                                                                            <td>
                                                                                                <p class="mb-0">IFSC
                                                                                                    Code :</p>
                                                                                            </td>
                                                                                            <td>
                                                                                                <p class="mb-0">Payment
                                                                                                    Terms :</p>
                                                                                            </td>
                                                                                        </tr>
                                                                                        <tr>
                                                                                            <td>
                                                                                                <p class="mb-0">
                                                                                                    Beneficiary :</p>
                                                                                            </td>
                                                                                            <td></td>
                                                                                        </tr>
                                                                                    </table>
                                                                                </div>
                                                                            </td>
                                                                            <td width="25%" align="center"
                                                                                style="vertical-align: middle;">
                                                                                <p class="mb-0"><strong> For
                                                                                        &nbsp;&nbsp;&nbsp;
                                                                                        {{companyDetails?.legal_name}}</strong>
                                                                                </p>
                                                                                <br>
                                                                                <br>
                                                                                <p class="mb-0"><strong> Authorised
                                                                                        Signatory </strong></p>
                                                                            </td>

                                                                        </tr>

                                                                    </tbody>
                                                                </table>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>


                                            <div *ngIf="companyDetails?.custom_e_tax_invoice_footer == 1">
                                                <img [src]="apiDomain + companyDetails?.custom_e_tax_invoice_footer_image"
                                                    alt="header" width="100%">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Landscape format end-->



                        </ng-template>
                    </li>






                </ul>

                <div class="side-nav d-flex">
                    <div *ngIf="invoiceInfo.converted_from_b2c_time">
                        <span class="text-white pt-1 pr-2">Converted <b> B2C </b>to <b>B2B </b>on
                            {{invoiceInfo.converted_from_b2c_time |
                            date:"MMM d, y"}}</span>
                    </div>
                    <!-- <div
                        *ngIf="(invoiceInfo.ready_to_generate_irn == 'No' && invoiceInfo.irn_generated == 'Error')|| invoiceInfo?.qr_generated == 'Error'"> -->
                    <div *ngIf=" invoiceInfo.irn_generated == 'Error'">
                        <span class="text-white pr-2"><i class="error-icon ri-error-warning-fill text-danger pr-1"></i>
                            <strong>Error :
                            </strong> {{invoiceInfo.error_message || 'NA'}}</span>

                        <div class="text-right" *ngIf="invoiceInfo.error_message == ' Invoice Total Mismatch'">
                            <span (click)="help(howToSolve)" class="text-white cursor-pointer text-underline">How to
                                solve this
                                ?</span>
                        </div>

                        <div class="text-right" *ngIf="invoiceInfo.error_message.includes('SAC Code')">
                            <span (click)="help(howToSolve)" class="text-white cursor-pointer text-underline">How to
                                solve ?</span>
                        </div>

                    </div>
                    <!-- <button *ngIf="errorBtn" class="mr-2 btn btn-primary bg-transperent" (click)="addSacError(selectErrType)"> <i
              class="addSac ri-add-line " ngbTooltip="ADD SAC"></i> </button> -->

                    <div ngbDropdown class="d-inline-block  mr-2 c-bb" placement="top-right" *ngIf="errorBtn">
                        <button class="btn emailBtn" appPermissionButton accessType="write" id="dropdownBasic2"
                            ngbDropdownToggle><i class="ri-add-line"></i> Add</button>
                        <div ngbDropdownMenu aria-labelledby="dropdownBasic2" class="pl-3">
                            <button ngbDropdownItem (click)="addSacError(selectErrType)">Payment</button>
                            <button ngbDropdownItem (click)="selectRevenue()">Revenue</button>
                        </div>
                    </div>
                    <!-- <button appPermissionButton class="mr-2 btn btn-primary p-0  bg-transperent" id='del'
            *ngIf="invoiceInfo.irn_generated == 'Error' || invoiceInfo.irn_generated == 'Pending'" accessType="delete"
            (click)="deleteInvoices()">
            <i ngbTooltip="Delete Invoice" class="ri-delete-bin-line"></i>
          </button> -->

                    <div (click)="openMenu()">
                        <i ngbTooltip="Activity log" class="ri-history-fill "></i>
                    </div>

                </div>
                <div [ngbNavOutlet]="nav" class="mt-2"></div>
            </div>
        </div>
    </div>


</section>



<ng-template #content let-modal>
    <form #form="ngForm" (ngSubmit)="onInvoiceSubmit(form,modal)">
        <div class="modal-header">
            <h5 class="" id="modal-basic-title">Invoice Edit</h5>
            <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body">
            <div class="row">
                <div class="col-lg-6 col-md-6">
                    <div class="form-group">
                        <input type="text" appMatInput class="form-control" id="GuestName" name="guest_name"
                            [(ngModel)]="editData.guest_name" #guest_name="ngModel" required>
                        <label for="GuestName" class="mat-label">Guest Name</label>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6">
                    <div class="form-group">
                        <input type="text" appMatInput class="form-control" id="room_number" name="room_number"
                            [(ngModel)]="editData.room_number" #room_number="ngModel" required>
                        <label for="RoomNumber" class="mat-label">Room Number</label>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6">
                    <div class="form-group">
                        <label for="InvoiceType" class="mat-label">Invoice Type</label>
                        <select appMatInput name="invoice_type" class="custom-select" id="invoice_type"
                            [(ngModel)]="editData.invoice_type" #invoice_type="ngModel" required>
                            <option value="B2B">B2B</option>
                            <option value="B2C">B2C</option>
                        </select>
                    </div>
                </div>

                <div class="col-lg-6 col-md-6">
                    <div class="form-group">
                        <input type="text" appMatInput class="form-control" id="ConfirmationNumber"
                            name="confirmation_number" [(ngModel)]="editData.confirmation_number"
                            #confirmation_number="ngModel" required>
                        <label for="ConfirmationNumber" class="mat-label">Confirmation Number</label>
                    </div>
                </div>

            </div>
        </div>
        <div class="modal-footer">
            <button type="reset" class="btn btn-outline-dark" (click)="modal.close('Save click')">Cancel</button>
            <button type="submit" appPermissionButton accessType="write" class="btn btn-primary">Save</button>
        </div>
    </form>
</ng-template>


<ng-template #taxModal let-modal>
    <form (ngSubmit)="onTaxSubmit(form,modal)" #form="ngForm">
        <div class="modal-header">
            <h5 class="" id="modal-basic-title">Tax Payer Edit</h5>
            <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body">
            <div class="row">
                <div class="col-lg-6 col-md-6">
                    <div class="form-group">
                        <input type="text" appMatInput class="form-control text-uppercase" id="GSTNumber"
                            name="gst_number" (ngModelChange)="changeDescription($event)" minlength="15" maxlength="15"
                            appValidateGST [(ngModel)]="editData.gst_number" #gst_number="ngModel" required>
                        <label for="GSTNumber" class="mat-label">GST Number</label>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6">
                    <div class="form-group">
                        <input type="text" appMatInput class="form-control" id="LegalName" name="legal_name"
                            [(ngModel)]="editData.legal_name" #legal_name="ngModel" readonly required>
                        <label for="LegalName" class="mat-label">Legal Name</label>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6">
                    <div class="form-group">
                        <input type="text" appMatInput class="form-control" id="TradeNumber" name="trade_name"
                            [(ngModel)]="editData.trade_name" #trade_name="ngModel" readonly required>
                        <label for="TradeNumber" class="mat-label">Trade Number</label>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6">
                    <div class="form-group">
                        <input type="text" appMatInput class="form-control" id="stateCode" name="state_code"
                            [(ngModel)]="editData.state_code" #state_code="ngModel" readonly required>
                        <label for="stateCode" class="mat-label">State code</label>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6">
                    <div class="form-group">
                        <input type="text" appMatInput class="form-control" id="Address1" name="address_1"
                            [(ngModel)]="editData.address_1" #address_1="ngModel" required>
                        <label for="Address1" class="mat-label">Address 1</label>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6">
                    <div class="form-group">
                        <input type="text" appMatInput class="form-control" id="Address2" name="address_2"
                            [(ngModel)]="editData.address_2" #address_2="ngModel" required>
                        <label for="Address2" class="mat-label">Address 2</label>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6">
                    <div class="form-group">
                        <input type="text" appMatInput class="form-control" id="Location" name="location"
                            [(ngModel)]="editData.location" #location="ngModel" required>
                        <label for="Location" class="mat-label">Location</label>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6">
                    <div class="form-group">
                        <input type="text" appMatInput class="form-control" id="Pincode" name="pincode"
                            [(ngModel)]="editData.pincode" #pincode="ngModel" readonly required>
                        <label for="Pincode" class="mat-label">Pincode</label>
                    </div>
                </div>

            </div>
        </div>
        <div class="modal-footer">
            <button type="reset" class="btn btn-outline-dark" (click)="modal.close('Save click')">Cancel</button>
            <button type="submit" appPermissionButton accessType="write" class="btn btn-primary">Save</button>
        </div>
    </form>
</ng-template>
<ng-template #summary let-tableData="tableData" let-total="total">
    <div class="mt-3">
        <div class="row">
            <div class="col-md-3">
                <div class="bg-white each-block shadow-sm">
                    <div>
                        <h6><strong>Invoice Details</strong> <span
                                *ngIf="invoiceInfo.irn_generated === 'Pending' || invoiceInfo.irn_generated == 'Error'"
                                appPermissionButton accessType="write" (click)="invoiceEdit(content)"
                                class="edit">Edit</span>
                        </h6>
                    </div>
                    <div>

                        <u class="list-unstyled">
                            <li><span>Guest Name</span> <strong placement="top"
                                    ngbTooltip="{{invoiceInfo.guest_name || 'NA'}}"
                                    class="text-truncate">{{invoiceInfo.guest_name || 'NA'}}</strong></li>
                            <li><span>Room Number</span> <strong>{{invoiceInfo.room_number|| 'NA'}}</strong></li>
                            <li><span>Invoice Type</span> <strong>{{invoiceInfo.invoice_type|| 'NA'}}</strong></li>
                            <li><span>Confirmation No</span> <strong>{{invoiceInfo.confirmation_number|| 'NA'}}</strong>
                            <li><span>Invoice Date</span> <strong>{{(invoiceInfo.invoice_date | date)|| 'NA'}}</strong>
                            </li>
                            <!-- <li *ngIf="active === 4" ngbTooltip="{{invoiceInfo.credit_irn_number}}" placement="top"><span>IRN No</span> <strong class="text-truncate">{{invoiceInfo.credit_irn_number|| 'NA'}}</strong> <i *ngIf="invoiceInfo.credit_irn_number" (click)="copyToClipboard(invoiceInfo.credit_irn_number);" [ngClass]="{'ri-clipboard-fill': isCopy, 'ri-clipboard-line':!isCopy}" class="p-ab cursor-pointer"></i></li> -->
                        </u>
                    </div>
                </div>
            </div>
            <div class="col-md-5">
                <div class="bg-white  each-block shadow-sm">
                    <div>
                        <h6><strong>Tax Payer Details</strong> <span
                                *ngIf="invoiceInfo.irn_generated === 'Pending'  || invoiceInfo.irn_generated === 'Error'"
                                appPermissionButton accessType="write" class="edit">
                                <span class="mr-2" *ngIf="invoiceInfo.invoice_type === 'B2B'"
                                    (click)="updateFromGSPortal()">Update</span>
                                <span (click)="taxEdit(taxModal)">Edit</span> </span>
                        </h6>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <u class="list-unstyled">
                                <li><span>Legal Name</span> <strong placement="top"
                                        ngbTooltip="{{invoiceInfo.legal_name}}"
                                        class="text-truncate">{{(invoiceInfo.legal_name | trim) || 'NA'}}</strong></li>
                                <li><span>GST Number</span> <strong>{{invoiceInfo.gst_number|| 'NA'}}</strong></li>
                                <li><span>Address 1 <a
                                            *ngIf="invoiceInfo.irn_generated == 'Pending' || invoiceInfo.irn_generated == 'Error' "><i
                                                (click)="editAddress1fun(editAddress1)" class="ri-pencil-fill ml-2"
                                                style="color: #000; font-size: 15px; cursor: pointer;"></i></a></span>
                                    <strong placement="top" ngbTooltip="{{invoiceInfo.address_1}}"
                                        class="text-truncate">{{(invoiceInfo.address_1 | trim) || 'NA'}}</strong>
                                </li>
                                <li><span>Location <a
                                            *ngIf="invoiceInfo.irn_generated == 'Pending' || invoiceInfo.irn_generated == 'Error' "><i
                                                (click)="locationfun(editInvoiceLocation)" class="ri-pencil-fill ml-2"
                                                style="color: #000; font-size: 15px; cursor: pointer;"></i></a></span>
                                    <strong>{{(invoiceInfo?.location | trim) || 'NA'}}</strong>
                                </li>
                                <li *ngIf="invoiceInfo.invoice_type === 'B2B'"><span>Place of Supply <a
                                            *ngIf="invoiceInfo.irn_generated == 'Pending' || invoiceInfo.irn_generated == 'Error' "><i
                                                (click)="editPOS(editPlaceOfSupply)" class="ri-pencil-fill ml-2"
                                                style="color: #000; font-size: 15px; cursor: pointer;"></i></a></span>
                                    <strong>{{invoiceInfo?.place_of_supply_name?.state}}({{(invoiceInfo.place_of_supply
                                        | trim) ||
                                        'NA'}})</strong>
                                </li>
                            </u>
                        </div>
                        <div class="col-md-6">
                            <u class="list-unstyled text-right">
                                <li><span>Trade Name</span> <strong placement="top"
                                        ngbTooltip="{{invoiceInfo.trade_name}}"
                                        class="text-truncate">{{(invoiceInfo.trade_name | trim) || 'NA'}}</strong></li>
                                <li><span>State code</span> <strong>{{stateCode?.state}}({{(invoiceInfo.state_code) ||
                                        'NA'}})</strong>
                                </li>
                                <li><span>Address 2 <a
                                            *ngIf="invoiceInfo.irn_generated == 'Pending' || invoiceInfo.irn_generated == 'Error' "><i
                                                (click)="editAddress2fun(editAddress2)" class="ri-pencil-fill ml-2"
                                                style="color: #000; font-size: 15px; cursor: pointer;"></i></a></span>
                                    <strong placement="top" ngbTooltip="{{invoiceInfo.address_2}}"
                                        class="text-truncate">{{(invoiceInfo.address_2 | trim) || 'NA'}}</strong>
                                </li>
                                <li><span>Pincode</span> <strong>{{(invoiceInfo.pincode | trim) || 'NA'}}</strong></li>
                            </u>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="bg-white  each-block shadow-sm">
                    <div class="d-flex justify-content-between">
                        <h6><strong>Attachments</strong></h6>

                    </div>
                    <div class="pt-3">
                        <div class="">
                            <div class="text-center" *ngIf="invoiceInfo.qr_code_generated === 'Success'">
                                <img *ngIf="invoiceInfo.irn_generated=='Success' && invoiceInfo.invoice_type =='B2C'"
                                    class="img-fluid" [src]="apiDomain + invoiceInfo.b2c_qrimage" alt="">
                                <span class="imgText"
                                    *ngIf="invoiceInfo.irn_generated === 'Cancelled' && invoiceInfo.invoice_type">
                                    <h1>Cancelled</h1>
                                </span>
                                <img *ngIf="invoiceInfo.qr_code_image" class="img-fluid"
                                    [src]="apiDomain + invoiceInfo.qr_code_image" alt="">
                                <img *ngIf="invoiceInfo.credit_qr_code_image" class="img-fluid"
                                    [src]="apiDomain + invoiceInfo.credit_qr_code_image" alt="">

                            </div>
                        </div>

                    </div>
                </div>

            </div>
        </div>
    </div>

    <div class="row irn-card mt-4 no-gutters"
        *ngIf="active===1 && invoiceInfo.irn_generated === 'Success' && invoiceInfo.invoice_type == 'B2B'">
        <div class="col-md-8">
            <h5><strong>IRN No : <span>{{invoiceInfo?.irn_number}}
                    </span></strong></h5>
        </div>
        <div class="col-md-2 text-right">
            <h5><strong>Ack No : <span>{{invoiceInfo?.ack_no}}
                    </span></strong></h5>
        </div>
        <div class="col-md-2 text-right">
            <h5><strong>Ack Date : <span>{{invoiceInfo?.ack_date}}
                    </span></strong></h5>
        </div>
    </div>

    <div class="row irn-card mt-4 no-gutters" *ngIf="active===4">
        <div class="col-md-8">
            <h5><strong>Credit IRN No : <span
                        *ngIf="invoiceInfo.irn_generated !== 'Cancelled'">{{invoiceInfo?.credit_irn_number}} <i
                            *ngIf="invoiceInfo.credit_irn_number"
                            (click)="copyToClipboard(invoiceInfo.credit_irn_number);"
                            [ngClass]="{'ri-clipboard-fill': isCopy, 'ri-clipboard-line':!isCopy}"
                            class="p-ab cursor-pointer"></i></span></strong></h5>
        </div>
        <div class="col-md-2 text-right">
            <h5><strong> Ack No : <span
                        *ngIf="invoiceInfo.irn_generated !== 'Cancelled'">{{invoiceInfo?.credit_ack_no}}</span></strong>
            </h5>
        </div>
        <div class="col-md-2 text-right">
            <h5><strong> Ack Date : <span
                        *ngIf="invoiceInfo.irn_generated !== 'Cancelled'">{{invoiceInfo?.credit_ack_date}}</span></strong>
            </h5>
        </div>
    </div>

    <div class="my-3">



        <div class="row">

            <div class="col-md-8">

                <div class="d-flex">
                    <h5><strong>Invoice Summary ({{sortedListInvoice.length }})</strong></h5>
                    <button *ngIf="invoiceInfo.irn_generated !== 'Success' && invoiceInfo.irn_generated !== 'Cancelled'"
                        (click)="addInvoiceItem()" class="btn btn-primary px-3 py-1 ml-2" type="button"><i
                            class="ri-add-line"></i></button>
                    <button
                        *ngIf="(invoiceInfo.irn_generated === 'Pending' && invoiceInfo?.items?.length && isChecked) || (invoiceInfo.irn_generated === 'Error' && invoiceInfo?.items?.length && isChecked)"
                        (click)="deleteLineItems()" class="btn btn-primary px-3 py-1 ml-2" type="button"><i
                            class="ri-delete-bin-line"></i></button>

                    <button
                        *ngIf="(companyDetails?.auto_adjustment == 'Automatic' && invoiceInfo?.has_credit_items == 'Yes')&&((invoiceInfo.invoice_type === 'B2B' && invoiceInfo.irn_generated == 'Pending') || (invoiceInfo.invoice_type === 'B2C' && invoiceInfo.irn_generated == 'Success'))"
                        (click)="adjustInvoices()" class="btn btn-primary px-3 py-1 ml-2" appPermissionButton
                        accessType="write" type="button">
                        Adjust</button>
                    <div class="sync-status" *ngIf="companyDetails?.ezy_gst_module == 1">
                        <span *ngIf="invoiceInfo?.synced_to_erp == 0">
                            <p class="ml-3 mb-0 text-danger non-sync"><i class="ri-close-circle-line"></i> Not Synced
                            </p>
                        </span>
                        <div *ngIf="invoiceInfo?.synced_to_erp == 1" class="position-absolute">
                            <p class="mb-0 text-success sync"><i class="ri-checkbox-circle-fill"></i> Synced to EzyGST
                            </p>
                            <p class="text-right " style="font-size: 13px"><i class="ri-calendar-check-line"></i>
                                {{invoiceInfo?.synced_date |date : ["MMM d y"]}}</p>
                        </div>
                    </div>
                    <div class="ml-3" *ngIf="companyDetails?.ezy_gst_module == 1">
                        <span *ngIf="invoiceInfo?.synced_to_erp == 0 && invoiceInfo?.sync_status == 'Error'"
                            style="display: flex" class="badge"
                            [ngClass]="{'badge-danger':invoiceInfo.sync_status == 'Error'}">
                            <div [innerHtml]="invoiceInfo?.sync_message"></div>
                        </span>
                        <!-- <a (click)="SyncErrorLogs(submodel,invoice)" *ngIf="invoiceInfo?.sync_status == 'Error'">View Error</a> -->
                    </div>
                </div>

            </div>
            <div class="col-md-4 d-flex justify-content-end">
                <h5>
                    <button (click)="exportInvoiceItem()" class="btn btn-sm btn-primary px-3"
                        type="button">Export</button>
                </h5>
            </div>

        </div>
    </div>

    <div class="row mt-2">
        <div class="col-md-12">


            <div class="table-responsive c-h" [ngClass]="{'h-fix-item': sortedListInvoice.length <= 3}">
                <table class="table table-bordered bg-white shadow-sm mb-0">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th
                                *ngIf="invoiceInfo.irn_generated === 'Pending' || invoiceInfo.irn_generated === 'Error'">
                                #</th>
                            <th>Date</th>
                            <th>Item Name</th>
                            <th>SAC/HSN CODE</th>
                            <th>Discount</th>
                            <th class="text-right">Item Value<br><small>(exclusive GST)</small></th>
                            <th *ngIf="lut && sez">
                                <table class="table border-0 mb-0 text-center no-pad">
                                    <tr>
                                        <th colspan="2">LUT</th>
                                    </tr>
                                    <tr class="text-center">
                                        <th>Exempted</th>
                                    </tr>
                                    <tr>
                                        <div class="custom-control custom-checkbox">
                                            <input type="checkbox" name="customCheckAll" [(ngModel)]="selectAll"
                                                class="custom-control-input" id="customCheckAll"
                                                (change)="enableSezForAll()"
                                                [disabled]="invoiceInfo.irn_generated === 'Success'" />
                                            <label class="custom-control-label" for="customCheckAll"></label>
                                        </div>
                                    </tr>
                                </table>
                            </th>

                            <th class="p-0">
                                <table class="table  border-0 mb-0 text-center no-pad">
                                    <tr>
                                        <th colspan="2">CGST</th>
                                    </tr>
                                    <tr class="text-center">
                                        <th>Rate</th>
                                        <th>Amount</th>
                                    </tr>
                                </table>
                            </th>
                            <th class="p-0">
                                <table class="table  border-0  mb-0 text-center no-pad">
                                    <tr>
                                        <th colspan="2">SGST</th>
                                    </tr>
                                    <tr class="text-center">
                                        <th>Rate</th>
                                        <th>Amount</th>
                                    </tr>
                                </table>
                            </th>
                            <th class="p-0">
                                <table class="table  border-0  mb-0 text-center no-pad">
                                    <tr>
                                        <th colspan="2">IGST</th>
                                    </tr>
                                    <tr class="text-center">
                                        <th>Rate</th>
                                        <th>Amount</th>
                                    </tr>
                                </table>
                            </th>
                            <th class="p-0">
                                <table class="table  border-0  mb-0 text-center no-pad">
                                    <tr>
                                        <th colspan="2">VAT</th>
                                    </tr>
                                    <tr class="text-center">
                                        <th>Rate</th>
                                        <th>Amount</th>
                                    </tr>
                                </table>
                            </th>

                            <!-- <th class="p-0">
                                <table class="table  border-0  mb-0 text-center no-pad">
                                    <tr>
                                        <th colspan="2">State CESS</th>
                                    </tr>
                                    <tr class="text-center">
                                        <th>Rate</th>
                                        <th>Amount</th>
                                    </tr>
                                </table>
                            </th> -->
                            <th class="p-0">
                                <table class="table  border-0  mb-0 text-center no-pad">
                                    <tr>
                                        <th colspan="2">Central CESS</th>
                                    </tr>
                                    <tr class="text-center">
                                        <th>Rate</th>
                                        <th>Amount</th>
                                    </tr>
                                </table>
                            </th>



                            <th>Total Item Value <br> <small>(Inclusive GST)</small></th>
                        </tr>
                    </thead>
                    <tbody>

                        <tr *ngFor="let item of sortedListInvoice;let i = index"
                            [ngClass]="{'bg-danger': item.is_credit_item === 'Yes'}">
                            <td>{{i+1}}</td>
                            <td
                                *ngIf="invoiceInfo.irn_generated === 'Pending' || invoiceInfo.irn_generated === 'Error'">
                                <div class="custom-control custom-checkbox">
                                    <input (change)="deleteItems($event, item)" type="checkbox"
                                        class="custom-control-input" id="customCheck{{i}}" name="item{{i}}">
                                    <label class="custom-control-label" for="customCheck{{i}}"></label>
                                </div>
                            </td>

                            <td>{{item?.date | date:'dd MMM yyyy'}}</td>
                            <td>{{item?.item_name}}
                                <!-- <a *ngIf="item?.pos_check" (click)="viewBillModel(viewBill,item)" class=" ml-2 view-poscheck">
                                <i class="ri-eye-fill" ngbTooltip="View POS Check"></i>
                              </a> -->
                            </td>
                            <td>{{item?.sac_code}}
                                <!-- <span
                                    *ngIf="invoiceInfo.invoice_type==='B2B'?(invoiceInfo.irn_generated === 'Pending'||invoiceInfo.irn_generated === 'Error'||invoiceInfo.irn_generated === 'Zero Invoice'):(invoiceInfo.irn_generated==='Pending'||invoiceInfo.irn_generated === 'Error'||invoiceInfo.irn_generated === 'Zero Invoice')"><i
                                        class="ri-pencil-fill" ngbTooltip="Edit Sac/Hsn"
                                        *ngIf="typeOf(item.sort_order) !== true" (click)="editSacItem(item)"></i><i
                                        class="ri-pencil-fill" ngbTooltip="Edit Line"
                                        *ngIf="typeOf(item.sort_order) !== true"
                                        (click)="editTempSacItem(item)"></i></span> -->
                                <span class="actions-sac"
                                    *ngIf="invoiceInfo.invoice_type==='B2B'?(invoiceInfo.irn_generated === 'Pending'||invoiceInfo.irn_generated === 'Error'||invoiceInfo.irn_generated === 'Zero Invoice'):(invoiceInfo.irn_generated==='Pending'||invoiceInfo.irn_generated === 'Error'||invoiceInfo.irn_generated === 'Zero Invoice')">
                                    <div ngbDropdown container="body" [placement]="['bottom-left', 'top-left']"
                                        class="d-inline-block  mr-2"
                                        *ngIf="typeOf(item.sort_order) !== true && sacEditForHICC">
                                        <i id="dropdownBasic1" ngbDropdownToggle class="ri-pencil-fill"></i>
                                        <div ngbDropdownMenu aria-labelledby="dropdownBasic1">
                                            <button class="px-2" (click)="editSacItem(item)"
                                                ngbDropdownItem>Sac/Hsn</button>
                                            <button class="px-2" (click)="editTempSacItem(item,i)" ngbDropdownItem>Line
                                                Item</button>
                                            <!-- <button class="px-2" *ngIf="item?.is_credit_item === 'No'" (click)="editSplitItem(item,i)"
                        ngbDropdownItem>Split
                        Item</button> -->
                                            <button class="px-2" *ngIf="item?.is_credit_item === 'No'"
                                                (click)="splitLineItemModel(item,i)" ngbDropdownItem>Split
                                                Item</button>

                                        </div>
                                    </div>
                                </span>
                            </td>
                            <td class="text-right">{{(item.discount_value || 0) | number : '1.2-2'}}</td>
                            <td class="text-right">{{(item.item_value || 0) | number : '1.2-2'}}</td>
                            <td class="text-center" *ngIf="lut && sez ">
                                <div class="custom-control custom-checkbox">
                                    <input type="checkbox" [(ngModel)]="item.lut_exempted" name="customLut{{i}}"
                                        value="{{item.id}}" class="custom-control-input" id="customLut{{i}}"
                                        (change)=" item.manual_edit = 'Yes';switchSEZ()"
                                        [disabled]="invoiceInfo.irn_generated === 'Success'" />
                                    <label class="custom-control-label" for="customLut{{i}}"></label>
                                </div>
                            </td>
                            <td>
                                <table class="table  border-0  mb-0 text-center no-pad">
                                    <tr class="no-pad">
                                        <td class="text-right">{{item.cgst}}%</td>
                                        <td class="text-right">{{(item.cgst_amount || 0) | number : '1.2-2'}}</td>
                                    </tr>
                                </table>
                            </td>

                            <td>
                        <tr class="no-pad">
                            <td class="text-right">{{item.sgst}}%</td>
                            <td class="text-right">{{(item.sgst_amount || 0) | number : '1.2-2'}}</td>
                        </tr>
                        </td>

                        <td>
                            <tr class="no-pad">
                                <td class="text-right">{{item.igst}}%</td>
                                <td class="text-right">{{(item.igst_amount || 0) | number : '1.2-2'}}</td>
                            </tr>
                        </td>
                        <td>
                            <tr class="no-pad">
                                <td class="text-right">{{item.vat}}%</td>
                                <td class="text-right">{{(item.vat_amount || 0) | number : '1.2-2'}}</td>
                            </tr>
                        </td>
                        <!-- <td>
                            <tr class="no-pad">
                                <td class="text-right">{{item.state_cess}}%</td>
                                <td class="text-right">{{(item.state_cess_amount || 0) | number : '1.2-2'}}</td>
                            </tr>
                        </td> -->
                        <td>
                            <tr class="no-pad">
                                <td class="text-right">{{item.cess}}%</td>
                                <td class="text-right">{{(item.cess_amount || 0) | number : '1.2-2'}}</td>
                            </tr>
                        </td>

                        <td class="text-right">{{item.item_value_after_gst}}</td>
                        </tr>


                    </tbody>
                </table>

            </div>

            <div>
                <table class="table bg-white" id="total-table">


                    <tr class="text-right">
                        <td colspan="17" class="total"><span>Total Sale </span> </td>
                        <td colspan="9" class="text-right"><strong class="total">{{ navNumber ==
                                4?invoiceInfo?.credit_value_before_gst: invoiceInfo.sales_amount_before_tax |
                                number:'0.2'}}</strong></td>
                    </tr>

                    <tr class="text-right">
                        <td colspan="17" class="total"><span>Add : CGST</span></td>
                        <td colspan="9" class="text-right"><strong class="total">{{navNumber == 4?
                                invoiceInfo.credit_cgst_amount :invoiceInfo.cgst_amount |
                                number:'0.2'}}</strong></td>
                    </tr>

                    <tr class="text-right">
                        <td colspan="17" class="total"><span>Add : SGST</span> </td>
                        <td colspan="9" class="text-right"><strong class="total">{{navNumber == 4?
                                invoiceInfo.credit_sgst_amount:invoiceInfo.sgst_amount |
                                number:'0.2'}}</strong></td>
                    </tr>

                    <tr class="text-right">
                        <td colspan="17" class="total"><span>Add : IGST</span></td>
                        <td colspan="9" class="text-right"><strong class="total">{{navNumber == 4?
                                invoiceInfo.credit_igst_amount:invoiceInfo.igst_amount |
                                number:'0.2'}}</strong></td>
                    </tr>

                    <tr class="text-right">
                        <td colspan="17" class="total"><span>Total Amount : GST</span> </td>
                        <td colspan="9" class="text-right"><strong class="total">{{navNumber ==
                                4?invoiceInfo.credit_gst_amount:invoiceInfo.total_gst_amount |
                                number:'0.2'}}</strong></td>
                    </tr>
                    <tr class="text-right">
                        <td colspan="17" class="total"><span>VAT</span> </td>
                        <td colspan="9" class="text-right"><strong class="total">{{navNumber ==
                                4?invoiceInfo.total_credit_vat_amount:invoiceInfo.total_vat_amount |
                                number:'0.2'}}</strong></td>
                    </tr>
                    <!-- <tr class="text-right">
                        <td colspan="17" class="total"><span>State CESS</span> </td>
                        <td colspan="9" class="text-right"><strong class="total">{{navNumber ==
                                4?invoiceInfo.total_credit_state_cess_amount:invoiceInfo.total_state_cess_amount |
                                number:'0.2'}}</strong></td>
                    </tr> -->
                    <tr class="text-right">
                        <td colspan="17" class="total"><span>Central CESS</span> </td>
                        <td colspan="9" class="text-right"><strong class="total">{{navNumber ==
                                4?invoiceInfo.total_credit_central_cess_amount:invoiceInfo.total_central_cess_amount |
                                number:'0.2'}}</strong></td>
                    </tr>

                    <tr class="text-right">
                        <td colspan="17" class="total"><span>Total Amount After Tax :</span> </td>
                        <td colspan="9" class="text-right"><strong class="total">{{navNumber ==
                                4?invoiceInfo?.credit_value_after_gst:invoiceInfo.sales_amount_after_tax |
                                number:'0.2'}}</strong></td>
                    </tr>
                    <tr *ngIf="navNumber == 1" class="text-right">
                        <td colspan="17" class="total"><span>Difference Amount :</span> </td>
                        <td colspan="9" class="text-right"><strong class="total">{{invoiceInfo.invoice_round_off_amount
                                |
                                number:'0.2'}}</strong></td>
                    </tr>
                </table>
            </div>
        </div>
    </div>

</ng-template>



<ng-template #submodel let-modal>
    <div class="sync_model">
        <div class="modal-header py-2">
            <span class="badge m-0"
                [ngClass]="{'badge-danger':syncList?.sync_status == 'Error'}">{{syncList?.sync_status}}</span>
            <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
                <i class="ri-close-line"></i>
            </button>
        </div>
        <div class="modal-body">
            <div *ngIf="syncList?.sync_status === 'Error'" [innerHtml]="syncList?.sync_message"></div>

        </div>
    </div>
    <!-- <div class="modal-footer">
        <button type="button" class="btn btn-outline-dark" (click)="modal.close('Save click')">Save</button>
    </div> -->

</ng-template>


<ng-template #menu let-modal>
    <div class="modal-header my-auto text-left d-block">
        <h6> <i (click)="modal.close()" class="ri-arrow-left-line"></i> <strong>Activity Log</strong></h6>
    </div>
    <div class="modal-body">

        <div class="a-logs">
            <ul class="list-unstyled px-3">

                <li *ngFor="let item of activityLogs">
                    <ng-container>
                        <div>
                            <strong> <i class="ri-history-line"></i> {{item.modified_by}}</strong>
                            <small class="float-right">{{item.creation | date : 'short'}}</small>
                        </div>
                        <ng-template [ngIf]="item.data?.createdBy">
                            <!-- created by -->
                        </ng-template>
                        <ng-template [ngIf]="item.data?.changed && item.data?.changed.length">Changed value of
                            {{(item.data.changed[0][0] | underscoreSpace |uppercase) || '" "'}} from
                            <small>{{item.data.changed[0][1] || '" "' }}</small> to
                            <small>{{item.data.changed[0][2]|| '" "'}} </small>
                        </ng-template>
                        <ng-template [ngIf]="item.data?.added && item.data?.added.length">
                            added list
                        </ng-template>
                        <ng-template [ngIf]="item.data?.removed && item.data?.removed.length">
                            removed list
                        </ng-template>
                    </ng-container>
                </li>
            </ul>
        </div>
    </div>
</ng-template>


<ng-template #uploadModal let-modal>
    <div class="modal-header">
        <h6> <strong>Upload </strong> </h6>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>

    </div>
    <div class="modal-body file-upload" *ngIf="!errorMessage && !successMessage">
        <div *ngIf="!filename">
            <label for="file" class="d-block cursor-pointer text-center">
                <i class="ri-upload-cloud-line"></i>
                <h6><strong>Upload Pdf Invoice</strong></h6>
            </label>
            <input accept=".pdf" (change)="handleFileInput($event.target.files)" class="opacity-0" type="file" name=""
                id="file">
            <!-- <img class="img-fluid" [src]="imgURL" alt=""> -->
        </div>

        <div class="text-center" *ngIf="filename">
            <i class="ri-file-text-line text-success line-height-0"></i>
            <div class="my-3">{{filename}}</div>
        </div>



        <div class="text-center" *ngIf="filename">
            <button (click)="filename = !filename" class="btn btn-outline-dark" type="button">Cancel</button>
            <button (click)="uploadService()" class="btn btn-primary ml-2" appPermissionButton accessType="write"
                type="button">Upload</button>
        </div>


    </div>

    <div class="file-upload">
        <div class="text-center" *ngIf="errorMessage">
            <i class="ri-close-circle-line text-danger line-height-0"></i>
            <div class="my-3 mb-5"><strong>{{errorMessage?.message}}</strong></div>
        </div>
        <div class="text-center" *ngIf="successMessage">
            <i class="ri-checkbox-circle-line text-success line-height-0"></i>
            <div class="my-3 mb-5"><strong>{{successMessage?.message}}</strong></div>
        </div>
    </div>



</ng-template>


<ng-template #emailTemp let-modal>
    <div class="modal-header">
        <h5 class="" id="modal-basic-title">Email</h5>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form #form="ngForm" (ngSubmit)="emailForm(form,modal)" *ngIf="emailTempData.val">

            <div class="form-group">
                <input type="text" appMatInput class="form-control" id="recipients" name="recipients"
                    [(ngModel)]="emailTempData.val.recipients " #recipients="ngModel" required>
                <label for="recipients" class="mat-label">To</label>
            </div>
            <div class="form-group">
                <input type="text" appMatInput class="form-control" id="template_name" name="template_name"
                    [(ngModel)]="emailTempData.val.name" #template_name="ngModel" required>
                <label for="GuestName" class="mat-label">Email Template</label>
            </div>
            <div class="form-group">
                <input type="text" appMatInput class="form-control" id="subject" name="subject"
                    [(ngModel)]="emailTempData.val.subject" #subject="ngModel" required>
                <label for="subject" class="mat-label">Subject</label>
            </div>
            <quill-editor class="ql-container" id="message" name="message"
                [(ngModel)]="emailTempData.val.use_html == 1 ? emailTempData.val.response_html: emailTempData.val.response"
                #message="ngModel" required>
            </quill-editor>

            <div
                style="background-image: url(&quot;{{domain+emailTempData.email_client_banner}}&quot;); background-size: contain;background-repeat: no-repeat; height: 300px;">

            </div>
            <embed type="image/jpg" src="{{domain+emailTempData.email_client_banner}}" width="300" height="200">

            <div class="mt-3 text-right">
                <button class="btn btn-primary" type="submit" [disabled]="disableEmailBtn">Send</button>
            </div>
        </form>
        <div *ngIf="!emailTempData.val" class="text-center p-4">
            <h3>Please Wait</h3>
        </div>

    </div>
</ng-template>

<ng-template #B2CtoB2CTemp let-modal>
    <div class="modal-header">
        <h5 class="" id="modal-basic-title">Tax Payer Details</h5>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form #form="ngForm" (ngSubmit)="onSubmit(form)">
            <div class="">
                <div class="text-center">
                    <small class="text-danger">{{form.form.getError('error')}}</small>
                </div>
                <div>
                    <div class="row">
                        <div class="col-lg-12 col-md-12">
                            <div class="form-group  mb-0">
                                <input type="text" appMatInput class="form-control text-uppercase" id="gst_number"
                                    name="gst_number" (ngModelChange)="changeDescription($event)" minlength="15"
                                    maxlength="15" appValidateGST [(ngModel)]="taxPayerDetails.gst_number"
                                    #gst_number="ngModel" required>

                                <label for="taxble" class="mat-label">GST Number</label>
                                <!-- <small class="text-danger"
                                    *ngIf="gst_number?">Required</small> -->

                                <!-- <small class="text-danger" *ngIf="checkName">Already Exists</small> -->
                            </div>
                            <small class="text-danger"
                                *ngIf="form.submitted && gst_number?.errors?.required">Required</small> <br />
                            <small class="text-danger" *ngIf="form.submitted && gst_number?.invalid">Enter valid GST
                                Number</small>
                        </div>
                        <div class="col-lg-6 col-md-6 d-none">
                            <div class="form-group">
                                <!-- <select appMatInput name="company" id="company" class="custom-select"
                                    [(ngModel)]="taxPayerDetails.company" #company="ngModel" required>
                                    <option *ngFor="let item of companyList" [value]="item?.name">{{item?.name}}</option>

                                </select> -->

                                <input type="text" appMatInput class="form-control" id="company" name="company"
                                    [(ngModel)]="taxPayerDetails.company" #company="ngModel" readonly>
                                <label for="company" class="mat-label">Company</label>

                            </div>
                            <small class="text-danger"
                                *ngIf="form.submitted && company?.errors?.required">Required</small>
                        </div>
                    </div>
                    <div class="invoice-details mb-0" *ngIf="checkApiMethod">
                        <div class="row each-block mb-0" style="min-height: auto;">
                            <div class="col-md-6">
                                <u class="list-unstyled">
                                    <li><span>Legal Name</span> <strong placement="top"
                                            ngbTooltip="{{ taxPayerDetails.legal_name || invoiceInfo.legal_name}}"
                                            class="text-truncate">{{(taxPayerDetails.legal_name)||(invoiceInfo.legal_name)
                                            || 'NA'}}</strong></li>
                                    <li><span>GST Number</span> <strong>{{taxPayerDetails.gst_number ||
                                            invoiceInfo.gst_number|| 'NA'}}</strong></li>
                                    <li><span>Address 1</span> <strong placement="top"
                                            ngbTooltip="{{taxPayerDetails.address_1 || invoiceInfo.address_1}}"
                                            class="text-truncate">{{(taxPayerDetails.address_1)||(invoiceInfo.address_1)
                                            || 'NA'}}</strong></li>
                                    <li><span>Location</span> <strong>{{(taxPayerDetails.location
                                            )||(invoiceInfo.location) || 'NA'}}</strong>
                                    </li>
                                </u>
                            </div>
                            <div class="col-md-6">
                                <u class="list-unstyled text-right">
                                    <li><span>Trade Name</span> <strong placement="top"
                                            ngbTooltip="{{taxPayerDetails.trade_name || invoiceInfo.trade_name}}"
                                            class="text-truncate">{{(taxPayerDetails.trade_name)||(invoiceInfo.trade_name)
                                            || 'NA'}}</strong></li>
                                    <li><span>State code</span>
                                        <strong>{{(taxPayerDetails.state_code)||(invoiceInfo.state_code) ||
                                            'NA'}}</strong>
                                    </li>
                                    <li><span>Address 2</span> <strong placement="top"
                                            ngbTooltip="{{taxPayerDetails.address_2||invoiceInfo.address_2}}"
                                            class="text-truncate">{{(taxPayerDetails.address_2)||(invoiceInfo.address_2
                                            ) || 'NA'}}</strong></li>
                                    <li><span>Pincode</span> <strong>{{(taxPayerDetails.pincode)||(invoiceInfo.pincode)
                                            || 'NA'}}</strong></li>
                                </u>
                            </div>
                        </div>
                    </div>




                </div>




                <div class="d-none" *ngIf="checkApiMethod">
                    <div class="row">

                        <div class="col-lg-6 col-md-6">
                            <div class="form-group">
                                <input type="text" appMatInput class="form-control" id="legal_name" name="legal_name"
                                    [(ngModel)]="taxPayerDetails.legal_name" #legal_name="ngModel">
                                <label for="taxble" class="mat-label">Legal Name</label>

                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6">
                            <div class="form-group">
                                <input type="email" appMatInput class="form-control" id="email" name="email"
                                    [(ngModel)]="taxPayerDetails.email" #email="ngModel">
                                <label for="email" class="mat-label">Email</label>

                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6">
                            <div class="form-group">
                                <input type="text" appMatInput class="form-control" id="trade_name" name="trade_name"
                                    [(ngModel)]="taxPayerDetails.trade_name" #trade_name="ngModel">
                                <label for="trade_name" class="mat-label">Trade Name</label>

                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6">
                            <div class="form-group">
                                <input type="text" appMatInput class="form-control" id="address_1" name="address_1"
                                    [(ngModel)]="taxPayerDetails.address_1" #address_1="ngModel">
                                <label for="address_1" class="mat-label">Address 1</label>

                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6">
                            <div class="form-group">
                                <input type="text" appMatInput class="form-control" id="address_2" name="address_2"
                                    [(ngModel)]="taxPayerDetails.address_2" #address_2="ngModel">
                                <label for="address_2" class="mat-label">Address 2</label>

                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6">
                            <div class="form-group">
                                <input type="text" appMatInput class="form-control" id="phone_number"
                                    name="phone_number" [(ngModel)]="taxPayerDetails.phone_number"
                                    #phone_number="ngModel">
                                <label for="phone_number" class="mat-label">Phone Number</label>

                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6">
                            <div class="form-group">
                                <input type="text" appMatInput class="form-control" id="state_code" name="state_code"
                                    [(ngModel)]="taxPayerDetails.state_code" #state_code="ngModel">
                                <label for="state_code" class="mat-label">State Code</label>

                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6">
                            <div class="form-group">
                                <input type="text" appMatInput class="form-control" id="location" name="location"
                                    [(ngModel)]="taxPayerDetails.location" #location="ngModel">
                                <label for="location" class="mat-label">Location</label>

                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6">
                            <div class="form-group">
                                <input type="text" appMatInput class="form-control" id="last_fetched"
                                    name="last_fetched" [(ngModel)]="taxPayerDetails.last_fetched"
                                    #last_fetched="ngModel">
                                <label for="last_fetched" class="mat-label">Last Fetched</label>

                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6">
                            <div class="form-group">
                                <input type="text" appMatInput class="form-control" id="pincode" name="pincode"
                                    [(ngModel)]="taxPayerDetails.pincode" #pincode="ngModel">
                                <label for="pincode" class="mat-label">Pincode</label>

                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6">
                            <div class="form-group">
                                <input type="text" appMatInput class="form-control" id="address_floor_number"
                                    name="address_floor_number" [(ngModel)]="taxPayerDetails.address_floor_number"
                                    #address_floor_number="ngModel">
                                <label for="address_floor_number" class="mat-label">Address Floor Number</label>

                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6">
                            <div class="form-group">
                                <input type="text" appMatInput class="form-control" id="gst_status" name="gst_status"
                                    [(ngModel)]="taxPayerDetails.gst_status" #gst_status="ngModel">
                                <label for="gst_status" class="mat-label">GST Status</label>

                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6">
                            <div class="form-group">
                                <input type="text" appMatInput class="form-control" id="address_street"
                                    name="address_street" [(ngModel)]="taxPayerDetails.address_street"
                                    #address_street="ngModel">
                                <label for="address_street" class="mat-label">Address Street</label>

                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6">
                            <div class="form-group">
                                <input type="text" appMatInput class="form-control" id="tax_type" name="tax_type"
                                    [(ngModel)]="taxPayerDetails.tax_type" #tax_type="ngModel">
                                <label for="tax_type" class="mat-label">Tax Type</label>

                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6">
                            <div class="form-group">
                                <input type="text" appMatInput class="form-control" id="block_status"
                                    name="block_status" [(ngModel)]="taxPayerDetails.block_status"
                                    #block_status="ngModel">
                                <label for="block_status" class="mat-label">Block Status</label>

                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6">
                            <div class="form-group">
                                <select appMatInput name="status" id="status" class="custom-select"
                                    [(ngModel)]="taxPayerDetails.status" #status="ngModel">
                                    <option value="Active">Active</option>
                                    <option value="In-Active">In-Active</option>
                                </select>
                                <label for="status" class="mat-label">Status</label>
                            </div>
                        </div>

                    </div>
                </div>

                <!-- <div class="text-right">
                    <button class="btn btn-primary mb-0 ml-3 text-uppercase" appPermissionButton accessType="write"
                        type="submit">Save</button>
                </div> -->
            </div>

            <div class="text-right"><button class="btn btn-primary mb-0 ml-3 text-uppercase" appPermissionButton
                    accessType="write" type="submit">Save</button></div>
        </form>
    </div>
</ng-template>

<!-- <iframe [src]='apiDomain + invoiceInfo.invoice_file | safe' id='iframe' frameborder='0' style='border:0;display: none;'
    width='300' height='300'>
</iframe>
<iframe [src]='apiDomain + invoiceInfo.invoice_with_gst_details | safe' id='invoiceWithQr' frameborder='0'
    style='border:0; display: none;' width='300' height='300'>
</iframe>
<iframe [src]='apiDomain + invoiceInfo.b2c_qrinvoice | safe' id='invoiceWithQrB2C' frameborder='0'
    style='border:0; display: none;' width='300' height='300'>
</iframe>
<iframe [src]='apiDomain + invoiceInfo.invoice_with_credit_gst_details | safe' id='creditNoteQr' frameborder='0'
    style='border:0; display: none;' width='300' height='300'>
</iframe> -->

<!-- settings -->
<div class="settings">
    <span (click)="openInvoice()"><img class="img-fluid" src="assets/images/pdf.svg" alt=""></span>
    <!-- <i (click)="openInvoice()" class="ri-settings-3-line"></i> -->
</div>




<ng-template #invoicePdf let-modal>


    <div class="row">
        <div class="col-md-5">
            <div class="pl-3 pt-3">
                <ul ngbNav #navModal="ngbNav" class="nav-tabs invoice-details">
                    <li ngbNavItem>
                        <a ngbNavLink>Debit Summary</a>
                        <ng-template ngbNavContent>

                            <div class="total-card summary shadow-sm mt-3 h-fix-table">
                                <h6 class="px-2 py-2"><strong>Debit Summary</strong></h6>
                                <table class="table bg-white mb-3" id="total-table">


                                    <tr class="text-right">
                                        <td colspan="17" class="total"><span>Total Sales :</span>
                                        </td>
                                        <td colspan="9" class="text-right"><strong
                                                class="total">{{invoiceInfo.sales_amount_before_tax |
                                                number:'0.2'}}</strong></td>
                                    </tr>

                                    <tr class="text-right">
                                        <td colspan="17" class="total"><span>Add : CGST</span></td>
                                        <td colspan="9" class="text-right"><strong
                                                class="total">{{invoiceInfo.cgst_amount |
                                                number:'0.2'}}</strong></td>
                                    </tr>

                                    <tr class="text-right">
                                        <td colspan="17" class="total"><span>Add : SGST</span> </td>
                                        <td colspan="9" class="text-right"><strong
                                                class="total">{{invoiceInfo.sgst_amount |
                                                number:'0.2'}}</strong></td>
                                    </tr>

                                    <tr class="text-right">
                                        <td colspan="17" class="total"><span>Add : IGST</span></td>
                                        <td colspan="9" class="text-right"><strong
                                                class="total">{{invoiceInfo.igst_amount |
                                                number:'0.2'}}</strong></td>
                                    </tr>

                                    <tr class="text-right">
                                        <td colspan="17" class="total"><span>Tax Amount : GST</span> </td>
                                        <td colspan="9" class="text-right"><strong
                                                class="total">{{invoiceInfo.total_gst_amount |
                                                number:'0.2'}}</strong></td>
                                    </tr>
                                    <tr class="text-right">
                                        <td colspan="17" class="total"><span>VAT</span> </td>
                                        <td colspan="9" class="text-right"><strong
                                                class="total">{{invoiceInfo.total_vat_amount |
                                                number:'0.2'}}</strong></td>
                                    </tr>
                                    <!-- <tr class="text-right">
                                        <td colspan="17" class="total"><span>State CESS</span> </td>
                                        <td colspan="9" class="text-right"><strong
                                                class="total">{{invoiceInfo.total_state_cess_amount |
                                                number:'0.2'}}</strong></td>
                                    </tr> -->
                                    <tr class="text-right">
                                        <td colspan="17" class="total"><span>Central CESS</span> </td>
                                        <td colspan="9" class="text-right"><strong
                                                class="total">{{invoiceInfo.total_central_cess_amount |
                                                number:'0.2'}}</strong></td>
                                    </tr>


                                    <tr class="text-right">
                                        <td colspan="17" class="total"><span>Total Amount After Tax :</span>
                                        </td>
                                        <td colspan="9" class="text-right"><strong
                                                class="total">{{invoiceInfo.sales_amount_after_tax |
                                                number:'0.2'}}</strong></td>
                                    </tr>
                                    <tr class="text-right">
                                        <td colspan="17" class="total"><span>Difference Amount :</span>
                                        </td>
                                        <td colspan="9" class="text-right"><strong
                                                class="total">{{invoiceInfo.invoice_round_off_amount |
                                                number:'0.2'}}</strong></td>
                                    </tr>
                                </table>

                                <h6><strong>SAC Code Summary</strong></h6>
                                <div class="table-responsive">
                                    <table class="table table-bordered text-center bg-white mt-1" id="total-tableSAC">
                                        <thead>
                                            <tr>
                                                <th>#</th>
                                                <th>SAC/HSN CODE</th>
                                                <th>Type</th>
                                                <th>SALES</th>
                                                <th>CGST</th>
                                                <th>SGST</th>
                                                <th>IGST</th>
                                                <!-- <th>State CESS</th> -->
                                                <th>Central CESS</th>
                                                <th>VAT</th>
                                                <th>Total Amount</th>

                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let sac of invoiceInfo.sac_hsn_based_taxes;let i = index">
                                                <td>{{i+1}}</td>
                                                <td>{{sac.sac_hsn_code}}</td>
                                                <td>{{sac.type}}</td>
                                                <td>{{sac.amount_before_gst}}</td>
                                                <td>{{sac.cgst}}</td>
                                                <td>{{sac.sgst}}</td>
                                                <td>{{sac.igst}}</td>
                                                <!-- <td>{{sac.state_cess}}</td> -->
                                                <td>{{sac.cess}}</td>
                                                <td>{{sac.vat}}</td>
                                                <td>{{sac.amount_after_gst}}</td>
                                            </tr>

                                        </tbody>
                                    </table>
                                </div>
                            </div>


                        </ng-template>
                    </li>
                    <li ngbNavItem>
                        <a ngbNavLink>Items Details</a>
                        <ng-template ngbNavContent>
                            <div class="summary shadow-sm h-fix-table table-responsive mt-3">
                                <table class="table table-bordered" id="total-tableSAC">
                                    <thead>
                                        <tr>
                                            <th>#</th>
                                            <th>Item Name</th>
                                            <th>Item Value</th>
                                            <th class="text-center">CGST %</th>
                                            <th class="text-center">CGST Rate</th>
                                            <th class="text-center">SGST %</th>
                                            <th class="text-center">SGST Rate</th>
                                            <th class="text-center">IGST %</th>
                                            <th class="text-center">IGST Rate</th>
                                            <th class="text-center">VAT Rate</th>
                                            <th class="text-center">VAT Amt.</th>
                                            <th class="text-center">S.C. Rate</th>
                                            <th class="text-center">S.C. Amt.</th>
                                            <th class="text-center">C.C. Rate</th>
                                            <th class="text-center">C.C. Amt.</th>
                                            <th class="text-center">Total Amt.</th>
                                        </tr>



                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let item of pdfListItems;let i = index"
                                            [ngClass]="{'bg-danger': item.is_credit_item === 'Yes'}">
                                            <td>{{i+1}}</td>


                                            <td>{{item.item_name}} <br /> <small
                                                    style="font-style: italic;"><b>{{item?.item_reference}}</b></small>
                                            </td>



                                            <td class="text-right">{{(item.item_value || 0) | number : '1.2-2'}}</td>
                                            <td class="text-right"> {{item.cgst || 0}}%</td>

                                            <td class="text-right">
                                                {{(item.cgst_amount || 0) | number : '1.2-2'}}
                                            </td>
                                            <td class="text-right">{{item.sgst || 0}}%</td>
                                            <td class="text-right">
                                                {{(item.sgst_amount || 0) | number : '1.2-2'}}
                                            </td>
                                            <td class="text-right">
                                                {{item.igst || 0}}%
                                            </td>
                                            <td class="text-right">
                                                <span class="pl-3">{{(item.igst_amount || 0) | number : '1.2-2'}}</span>
                                            </td>
                                            <td class="text-right">
                                                <span class="pl-3">{{item.vat || 0}}%</span>
                                            </td>
                                            <td class="text-right">
                                                <span class="pl-3">{{(item.vat_amount || 0) | number : '1.2-2'}}</span>
                                            </td>
                                            <td class="text-right">
                                                <span class="pl-3">{{item.state_cess || 0}}%</span>
                                            </td>
                                            <td class="text-right">
                                                <span class="pl-3">{{(item.state_cess_amount || 0) | number :
                                                    '1.2-2'}}</span>
                                            </td>
                                            <td class="text-right">
                                                <span class="pl-3">{{item.cess || 0}}%</span>
                                            </td>
                                            <td class="text-right">
                                                <span class="pl-3">{{(item.cess_amount || 0) | number : '1.2-2'}}</span>
                                            </td>
                                            <td class="text-right">
                                                <span class="pl-3">{{(item.item_value_after_gst || 0) | number :
                                                    '1.2-2'}} </span>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>

                            </div>
                        </ng-template>
                    </li>
                    <li ngbNavItem *ngIf="invoiceInfo.irn_generated == 'Success' && invoiceInfo.invoice_type =='B2B'">
                        <a ngbNavLink>IRN Details</a>
                        <ng-template ngbNavContent>
                            <div class="irnObjectView">
                                <div class="text-right mb-2">
                                    <div class="d-inline-block" ngbDropdown #myDrop="ngbDropdown">
                                        <button type="button" class="btn btn-sm btn-outline-primary me-2"
                                            id="dropdownManual" ngbDropdownAnchor
                                            (focus)="myDrop.open()">Download</button>
                                        <div ngbDropdownMenu aria-labelledby="dropdownManual">
                                            <button ngbDropdownItem (click)="downloadRequestJson()">IRN Request</button>
                                            <button ngbDropdownItem (click)="downloadResponseJson()">IRN Response
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <ngx-json-viewer [json]="irnObject" [expanded]="false"></ngx-json-viewer>
                            </div>
                        </ng-template>
                    </li>
                </ul>
                <div [ngbNavOutlet]="navModal"></div>
            </div>
        </div>
        <div class="col-md-7">
            <div class="modal-header border-0 b-r-0 pb-0 summary my-auto text-left d-block">


                <div class="row no-gutters">
                    <div class="col-md-4 my-auto">
                        <div class="px-3">
                            <h6>
                                <strong>{{invoiceTitle ? invoiceTitle : 'Invoice Details'}}</strong>
                            </h6>
                        </div>
                    </div>
                    <div class="col-md-8">
                        <div class="d-flex invoiceIcon pr-3">
                            <!-- <div *ngIf="eTaxInvoiceDownloadBtn && invoiceInfo?.invoice_from !='File' && ((invoiceInfo?.irn_generated === 'Success' || invoiceInfo?.irn_generated === 'Cancelled'))" >
                            <button (click)="printSignInvoice()" class='btn btn-sm btn-primary mr-2'><i class="ri-download-line"></i> Signed Invoice</button>
                        </div> -->
                            <div *ngIf="invoiceInfo.irn_generated === 'Success' && invoiceInfo.invoice_from != 'File'">

                                <i class="" ngbTooltip="Original Invoice" (click)="fileType('Original Invoice')"
                                    class="ri-file-line pr-2 ml-2"></i>
                                <i ngbTooltip="Tax Invoice" class="pr-2" (click)="fileType('Tax Invoice')"
                                    class="ri-file-fill"></i>
                                <i *ngIf="invoiceInfo?.has_credit_items == 'Yes'" ngbTooltip="Invoice with Credits"
                                    class="pr-2" (click)="fileType('Tax Invoice with Credits')"
                                    class="ri-file-fill"></i>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- <div>
          <small> X0</small>
          <input [(ngModel)]="companyDetails.qr_rect_x0" />
        </div>
        <div>
          <small> YO</small>
          <input [(ngModel)]="companyDetails.qr_rect_y0" />
        </div>
        <div>
          <small> X1</small>
          <input [(ngModel)]="companyDetails.qr_rect_x1" />
        </div>
        <div>
          <small> Y1</small>
          <input [(ngModel)]="companyDetails.qr_rect_y1" />
        </div> -->
            </div>
            <div class="modal-body p-2 pdf-view2 bg-white shadow-sm">
                <!-- <object *ngIf="previewFile" [data]=" apiDomain + previewFile | safe" type="application/pdf" width="100%">
                    <p>Alternative text - include a link</p>
                </object> -->


                <div class="card h-fix-table">
                    <object *ngIf="previewFile || this.invoiceInfo?.invoice_file"
                        [data]="(previewFile || (apiDomain + this.invoiceInfo?.invoice_file)) | safe"
                        type="application/pdf" width="100%">
                    </object>
                    <div class="p-3"
                        *ngIf="!previewFile && !this.invoiceInfo?.invoice_file && invoiceInfo?.invoice_object_from_file">
                        <h5 class="text-center">{{invoiceInfo?.invoice_object_from_file[0]?.FOLIO_TYPE}}</h5>
                        <div class="p-2 border">
                            <table class="w-100 font-14">
                                <tbody>
                                    <tr>
                                        <td class="w-100">
                                <tbody>
                                    <tr>
                                        <th>Room No</th>
                                        <th>:</th>
                                        <td>{{invoiceInfo?.room_number}}</td>
                                    </tr>
                                    <tr>
                                        <th>Guest Name</th>
                                        <th>:</th>
                                        <td>{{invoiceInfo?.guest_name}}</td>
                                    </tr>
                                    <tr>
                                        <th>GST No.</th>
                                        <th>:</th>
                                        <td>{{invoiceInfo?.gst_number}}</td>
                                    </tr>
                                </tbody>
                                </td>
                                <td>
                                    <tbody>
                                        <tr>
                                            <th>Invoice No</th>
                                            <th>:</th>
                                            <td>{{invoiceInfo?.invoice_number}}</td>
                                        </tr>
                                        <tr>
                                            <th>Invoice Date</th>
                                            <th>:</th>
                                            <td>{{invoiceInfo?.invoice_date}}</td>
                                        </tr>
                                        <tr *ngIf="companyDetails?.bulk_excel_upload_type === 'HolidayIn'">
                                            <th>Folio Id</th>
                                            <th>:</th>
                                            <td>{{invoiceInfo?.folioid}}</td>
                                        </tr>
                                    </tbody>
                                </td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class=" mt-1">
                            <table class="w-100 font-14">
                                <thead>
                                    <tr class="bg-dark">
                                        <th class="text-light"><span class="ml-2">Date</span></th>
                                        <th class="text-light">Reference</th>
                                        <th class="text-light">Charges</th>
                                        <th class="text-light">Credits</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <ng-container
                                        *ngIf="companyDetails.bulk_excel_upload_type == 'Marriot' || companyDetails.upload_gst_details == '1' ">

                                        <tr *ngFor="let item of invoiceInfo.invoice_object_from_file?.items">
                                            <td>{{item.date }}</td>
                                            <td>{{item?.name}}</td>
                                            <td>{{(item.item_value == 'empty' ? '': item.item_value | number: '1.1-2')
                                                || ''}}</td>
                                            <td>{{(item.FT_CREDIT == 'empty' ? '': item.FT_CREDIT | number: '1.1-2') ||
                                                ''}}</td>
                                        </tr>
                                    </ng-container>
                                    <ng-container
                                        *ngIf="companyDetails.bulk_excel_upload_type != 'Marriot' ||  companyDetails.upload_gst_details == '0'">
                                        <ng-container *ngFor="let item of invoiceInfo.invoice_object_from_file">
                                            <tr>
                                                <td>{{item.invoicedate | date}}</td>
                                                <td>{{item.goods_desc}}</td>
                                                <td>{{(item.invoiceamount | number: '1.1-2') || ''}}</td>
                                                <td></td>
                                            </tr>
                                            <tr *ngIf="item?.cgstamount || item?.cgst">
                                                <td>{{item.invoicedate | date}}</td>
                                                <td>CGST</td>
                                                <td>{{(item?.cgstamount| number: '1.1-2') || item?.cgst}} </td>
                                                <td></td>
                                            </tr>
                                            <tr *ngIf="item?.sgstamount || item?.sgst">
                                                <td>{{item.invoicedate | date}}</td>
                                                <td>SGST</td>
                                                <td>{{(item?.sgstamount | number: '1.1-2' )|| item?.sgst}} </td>
                                                <td></td>
                                            </tr>
                                            <tr *ngIf="item.ngstamount || item?.ngst">
                                                <td>{{item.invoicedate | date}}</td>
                                                <td>NGST</td>
                                                <td>{{(item?.ngstamount | number: '1.1-2') || item?.ngst}} </td>
                                                <td></td>
                                            </tr>
                                        </ng-container>

                                    </ng-container>
                                    <tr class="bg-light font-weight-bold">
                                        <td></td>
                                        <td><span class="p-2">Total</span></td>
                                        <td *ngIf="companyDetails.bulk_excel_upload_type == 'Marriot'">
                                            {{invoiceInfo?.invoice_object_from_file?.total_invoice_amount}}</td>
                                        <td *ngIf="companyDetails.bulk_excel_upload_type != 'Marriot'">
                                            {{(invoiceInfo?.total_invoice_amount | number: '1.0-0')}}</td>
                                        <td></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                    </div>




                    <div *ngIf="this.TaxInvoice">
                        <div class="min-h">


                            <div>
                                <div class="border px-2 ">
                                    <div>
                                        <table class="table mb-0">
                                            <tbody>
                                                <tr>
                                                    <td width="50%" style="vertical-align: middle;">
                                                        <div class="logo">
                                                            <div class="mb-3">
                                                                <img class="img-fluid"
                                                                    [src]="apiDomain + invoiceInfo?.company_logo"
                                                                    alt="">
                                                            </div>
                                                            <div>
                                                                <address>
                                                                    <b>{{invoiceInfo.address_1}}</b>
                                                                </address>
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <td width="50%" align="right">
                                                        <div class="qr">
                                                            <img class="img-fluid"
                                                                [src]="apiDomain + invoiceInfo.qr_code_image" alt="">
                                                        </div>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>

                                    <div>
                                        <table class="table mb-0">
                                            <tbody>
                                                <tr>
                                                    <td width="100%">
                                                        <div class="border">
                                                            <div class="heading">
                                                                <h4><strong>1. e-Invoice
                                                                        Details</strong></h4>
                                                            </div>
                                                            <div class="c-p-8">
                                                                <table>
                                                                    <tr>
                                                                        <td style="max-width: 200px;">
                                                                            <strong>IRN</strong> :
                                                                            {{invoiceInfo.irn_number}}
                                                                        </td>
                                                                        <td><strong>Ack. No : <br>
                                                                            </strong> {{invoiceInfo.ack_no}}
                                                                        </td>
                                                                        <td><strong>Ack. Date : <br>
                                                                            </strong> {{invoiceInfo.ack_date}}
                                                                        </td>
                                                                    </tr>
                                                                </table>
                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>

                                            </tbody>
                                        </table>
                                    </div>

                                    <div>
                                        <table class="table mb-0">
                                            <tbody>
                                                <tr>
                                                    <td width="100%">
                                                        <div class="border">
                                                            <div class="heading">
                                                                <h4><strong>2. Transaction
                                                                        Details</strong></h4>
                                                            </div>
                                                            <div class="c-p-8">
                                                                <table>
                                                                    <tr>
                                                                        <td width="15%">
                                                                            <strong>Category</strong> :
                                                                            {{invoiceInfo.invoice_type}}
                                                                        </td>
                                                                        <td width="25%">
                                                                            <strong>Invoice No
                                                                            </strong> : {{invoiceInfo.invoice_number}}
                                                                        </td>
                                                                        <td *ngIf="this.TaxInvoice" width="20%">
                                                                            <strong>Document Type
                                                                            </strong> : Tax Invoice
                                                                        </td>
                                                                        <td width="20%">
                                                                            <strong>Document Date
                                                                            </strong> :{{invoiceInfo.invoice_date | date
                                                                            :'dd/MM/yyyy'}}
                                                                        </td>
                                                                        <td width="20%">
                                                                            <strong>Room No</strong> :
                                                                            {{invoiceInfo?.room_number}}
                                                                        </td>
                                                                    </tr>

                                                                </table>

                                                                <table class="">

                                                                </table>
                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>

                                            </tbody>
                                        </table>
                                    </div>

                                    <div>
                                        <table class="table mb-0">
                                            <tbody>
                                                <tr>
                                                    <td width="100%">
                                                        <div class="border">
                                                            <div class="heading">
                                                                <h4><strong>3. Party
                                                                        Details</strong></h4>
                                                            </div>
                                                            <div class="c-p-8">
                                                                <table class="party">
                                                                    <tr>
                                                                        <td width="49%" style="vertical-align: top;">
                                                                            <div>
                                                                                <h5><strong>Seller</strong>
                                                                                </h5>
                                                                            </div>

                                                                            <div class="max-500">
                                                                                <p class="mb-1">
                                                                                    <b>GSTIN </b>:
                                                                                    {{invoiceInfo?.company_gst}}, <b
                                                                                        class="ml-1">PAN </b>:
                                                                                    {{invoiceInfo?.company_gst?.substring(2).slice(0,-3)}}
                                                                                </p>
                                                                                <p class="mb-1">
                                                                                    <b>FSSAI LIC No </b>:
                                                                                    {{invoiceInfo?.company_fssai_number}}
                                                                                </p>
                                                                                <p>{{invoiceInfo?.company_legal_name}}
                                                                                    <br>
                                                                                    {{invoiceInfo?.company_address_1}}
                                                                                    ,{{invoiceInfo?.company_address_2}}
                                                                                    ,
                                                                                    {{invoiceInfo?.company_location}},
                                                                                    {{invoiceInfo?.company_pincode}}
                                                                                </p>
                                                                            </div>
                                                                        </td>
                                                                        <td width="51%"
                                                                            style="vertical-align: top;border-left: 1px solid rgba(102, 102, 102, 0.479);padding-left: 1%;">
                                                                            <div>
                                                                                <h5><strong>Purchaser</strong>
                                                                                </h5>
                                                                            </div>

                                                                            <div>
                                                                                <p><b>Guest </b> :
                                                                                    {{invoiceInfo?.room_number}}</p>
                                                                                <p class="mb-1">
                                                                                    <b> GSTIN </b>:
                                                                                    {{invoiceInfo.gst_number}}
                                                                                </p>
                                                                                <p> {{invoiceInfo.legal_name}}
                                                                                    <br>
                                                                                    {{invoiceInfo.address_floor_number?invoiceInfo.address_floor_number+',':''}}
                                                                                    {{invoiceInfo.address_1?invoiceInfo.address_1+',':''}}
                                                                                    {{invoiceInfo.address_2?invoiceInfo.address_2+',':''}}
                                                                                    <br>
                                                                                    {{invoiceInfo.address_street?invoiceInfo.address_street+',':''}}
                                                                                    {{invoiceInfo.location?invoiceInfo.location+',':''}}
                                                                                    {{invoiceInfo.pincode}}
                                                                                    {{invoiceInfo.email?","+invoiceInfo.email:''}}
                                                                                    <br>
                                                                                    <b>Place of Supply </b>:
                                                                                    {{invoiceInfo?.place_of_supply_name?.state}}({{(invoiceInfo.place_of_supply
                                                                                    | trim) || 'NA'}})
                                                                                </p>
                                                                            </div>
                                                                        </td>
                                                                    </tr>

                                                                </table>

                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>

                                            </tbody>
                                        </table>
                                    </div>

                                    <div>
                                        <!-- <table class="table mb-0">
                                            <tbody>
                                                <tr>
                                                    <td width="100%"> -->
                                        <div class="pdf-table">
                                            <div class="heading b-h">
                                                <h4><strong>4. Item
                                                        Details</strong></h4>
                                            </div>
                                            <div class="c-p-8  table-responsive">
                                                <table class="table pdfTable goods mb-0">
                                                    <thead>
                                                        <tr>
                                                            <th>S.NO</th>
                                                            <th>Date</th>
                                                            <th>Product Description
                                                            </th>

                                                            <th>SAC/HSN CODE</th>
                                                            <th>Item Value</th>
                                                            <th>GST Rate</th>

                                                            <!-- <th>S.CESS</th> -->
                                                            <th>CESS</th>




                                                            <th>
                                                                Total Item Value
                                                            </th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>


                                                        <tr *ngFor="let item of invoiceInfo.items; let i = index">
                                                            <td *ngIf="item.item_mode === 'Debit'">
                                                                {{i+1}}</td>
                                                            <td style="min-width: 80px;"
                                                                *ngIf="item.item_mode === 'Debit'">
                                                                {{item.date | date:'dd-MM-yyyy'}}</td>
                                                            <td *ngIf="item.item_mode === 'Debit'">
                                                                {{item.description}}
                                                            </td>
                                                            <td *ngIf="item.item_mode === 'Debit'">
                                                                {{item.sac_code}}
                                                            </td>
                                                            <td *ngIf="item.item_mode === 'Debit'" class="text-right">
                                                                {{item.item_value}}
                                                            </td>
                                                            <td *ngIf="item.item_mode === 'Debit'" class="text-right">
                                                                {{item.sgst_amount + item.igst_amount + item.cgst_amount
                                                                | number : '0.2'}}
                                                            </td>
                                                            <!-- <td *ngIf="item.item_mode === 'Debit'" class="text-right">
                                                                N/A</td> -->
                                                            <td *ngIf="item.item_mode === 'Debit'" class="text-right">
                                                                N/A</td>
                                                            <td *ngIf="item.item_mode === 'Debit'" class="text-right">
                                                                {{item.item_value_after_gst | number : '0.2'}}
                                                            </td>
                                                        </tr>

                                                    </tbody>
                                                </table>

                                            </div>

                                        </div>
                                        <!-- </td>
                                                </tr>

                                            </tbody>
                                        </table> -->
                                    </div>

                                    <div>
                                        <table class="table  goods goods2" style="margin: 0;">
                                            <thead>
                                                <tr>
                                                    <th>HSN/SAC CODE</th>
                                                    <th>SALES
                                                    </th>

                                                    <th>CGST

                                                    </th>
                                                    <th>SGST
                                                    </th>
                                                    <th>IGST

                                                    </th>
                                                    <th>CESS TAX </th>
                                                    <th>CESS TAX2</th>

                                                    <th>
                                                        VAT
                                                    </th>


                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr *ngFor="let item of invoiceInfo.sac_hsn_based_taxes">
                                                    <td *ngIf="item.type === 'Invoice'">
                                                        {{item.sac_hsn_code}}</td>
                                                    <td *ngIf="item.type === 'Invoice'">
                                                        {{item.amount_before_gst}}</td>
                                                    <td *ngIf="item.type === 'Invoice'">
                                                        {{item.cgst}}</td>
                                                    <td *ngIf="item.type === 'Invoice'">
                                                        {{item.sgst}}</td>
                                                    <td *ngIf="item.type === 'Invoice'">
                                                        {{item.igst}}</td>
                                                    <td *ngIf="item.type === 'Invoice'">
                                                        {{item.cess}}</td>
                                                    <td *ngIf="item.type === 'Invoice'">
                                                        {{item.cess}}</td>
                                                    <td *ngIf="item.type === 'Invoice'">{{item.vat}}</td>
                                                </tr>


                                            </tbody>
                                        </table>

                                    </div>


                                    <div class="border my-2">
                                        <table class="table table-light mb-0">
                                            <tbody>
                                                <tr>
                                                    <td width="100%">
                                                        <table width="100" class="table mb-1">
                                                            <tbody>
                                                                <tr>
                                                                    <td width="50%" style="vertical-align: middle;">
                                                                        <div class="">

                                                                            <div class="c-p-8">
                                                                                <div style="padding: 2px 5px">
                                                                                    <strong>Generated
                                                                                        By</strong> :
                                                                                    {{invoiceInfo?.company_gst}}
                                                                                </div>
                                                                                <div style="padding:2px 5px">
                                                                                    <strong>Print
                                                                                        Date
                                                                                    </strong> : {{myDate |
                                                                                    date:'mediumDate'}}
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </td>
                                                                    <!-- <td width="33.33%" align="center" style="vertical-align: middle;">
                                    <div class="">
                                      <div class="c-p-8">
                                        <img class="img-fluid" src="images/bar.PNG" alt="">
                                      </div>
                                    </div>
                                  </td> -->
                                                                    <td width="50%" align="right">
                                                                        <div class="">

                                                                            <div class="c-p-8">
                                                                                <div>
                                                                                    <img class="img-fluid"
                                                                                        src="images/sign.PNG" alt="">
                                                                                </div>
                                                                                <div>
                                                                                    <div style="padding:2px 5px">
                                                                                        <!-- <b>Amount In Words :</b> {{invoiceInfo?.sales_amount_after_tax | amountToWord }}
                                                                                        <br> -->

                                                                                    </div>
                                                                                    <div style="padding:2px 5px">
                                                                                        <strong>System Generated On
                                                                                        </strong> :
                                                                                        {{invoiceInfo.ack_date |
                                                                                        date:'medium'}}
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </td>
                                                                </tr>

                                                            </tbody>
                                                        </table>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>


                                </div>
                            </div>
                        </div>
                    </div>

                    <div *ngIf="this.CreditInvoice">
                        <div class="min-h">


                            <div>
                                <div class="border px-2 ">
                                    <div>
                                        <table class="table mb-0">
                                            <tbody>
                                                <tr>
                                                    <td width="50%" style="vertical-align: middle;">
                                                        <div class="logo">
                                                            <div class="mb-3">
                                                                <img class="img-fluid"
                                                                    [src]="apiDomain + invoiceInfo?.company_logo"
                                                                    alt="">
                                                            </div>
                                                            <div>
                                                                <address>
                                                                    <b>{{invoiceInfo.address_1}}</b>
                                                                </address>
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <td width="50%" align="right">
                                                        <div class="qr">
                                                            <img class="img-fluid"
                                                                [src]="apiDomain + invoiceInfo.credit_qr_code_image"
                                                                alt="">
                                                        </div>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>

                                    <div>
                                        <table class="table mb-0">
                                            <tbody>
                                                <tr>
                                                    <td width="100%">
                                                        <div class="border">
                                                            <div class="heading">
                                                                <h4><strong>1. e-Invoice
                                                                        Details</strong></h4>
                                                            </div>
                                                            <div class="c-p-8">
                                                                <table>
                                                                    <tr>
                                                                        <td style="max-width: 200px;">
                                                                            <strong>IRN</strong> :
                                                                            {{invoiceInfo.credit_irn_number}}
                                                                        </td>
                                                                        <td><strong>Ack. No : <br>
                                                                            </strong> {{invoiceInfo.credit_ack_no}}
                                                                        </td>
                                                                        <td><strong>Ack. Date : <br>
                                                                            </strong> {{invoiceInfo.credit_ack_date }}
                                                                        </td>
                                                                    </tr>
                                                                </table>
                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>

                                            </tbody>
                                        </table>
                                    </div>

                                    <div>
                                        <table class="table mb-0">
                                            <tbody>
                                                <tr>
                                                    <td width="100%">
                                                        <div class="border">
                                                            <div class="heading">
                                                                <h4><strong>2. Transaction
                                                                        Details</strong></h4>
                                                            </div>
                                                            <div class="c-p-8">
                                                                <table>
                                                                    <tr>
                                                                        <td width="15%">
                                                                            <strong>Category</strong> :
                                                                            {{invoiceInfo.invoice_type}}
                                                                        </td>
                                                                        <td width="25%">
                                                                            <strong>Invoice No
                                                                            </strong> : {{invoiceInfo.invoice_number}}
                                                                        </td>
                                                                        <td *ngIf="this.CreditInvoice" width="30%">
                                                                            <strong>Document Type
                                                                            </strong> : Credit Invoice
                                                                        </td>
                                                                        <td width="30%">
                                                                            <strong>Document Date
                                                                            </strong> :{{invoiceInfo.invoice_date | date
                                                                            :'dd/MM/yyyy'}}
                                                                        </td>
                                                                    </tr>

                                                                </table>

                                                                <table class="">

                                                                </table>
                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>

                                            </tbody>
                                        </table>
                                    </div>

                                    <div>
                                        <table class="table mb-0">
                                            <tbody>
                                                <tr>
                                                    <td width="100%">
                                                        <div class="border">
                                                            <div class="heading">
                                                                <h4><strong>3. Party
                                                                        Details</strong></h4>
                                                            </div>
                                                            <div class="c-p-8">
                                                                <table class="party">
                                                                    <tr>
                                                                        <td width="49%" style="vertical-align: top;">
                                                                            <div>
                                                                                <h5><strong>Seller</strong>
                                                                                </h5>
                                                                            </div>

                                                                            <div class="max-500">
                                                                                <p class="mb-1">
                                                                                <p class="mb-1">
                                                                                    <b>GSTIN </b>:
                                                                                    {{invoiceInfo?.company_gst}}, <b
                                                                                        class="ml-1">PAN </b>:
                                                                                    {{invoiceInfo?.company_gst?.substring(2).slice(0,-3)}}
                                                                                </p>
                                                                                <p class="mb-1">
                                                                                    <b>FSSAI LIC No </b>:
                                                                                    {{invoiceInfo?.company_fssai_number}}
                                                                                </p>
                                                                                <p>{{invoiceInfo?.company_legal_name}}
                                                                                    <br>
                                                                                    {{invoiceInfo?.company_address_1}}
                                                                                    ,{{invoiceInfo?.company_address_2}}
                                                                                    ,
                                                                                    {{invoiceInfo?.company_location}},
                                                                                    {{invoiceInfo?.company_pincode}}
                                                                                </p>
                                                                            </div>
                                                                        </td>
                                                                        <td width="51%"
                                                                            style="vertical-align: top;border-left: 1px solid rgba(102, 102, 102, 0.479);padding-left: 1%;">
                                                                            <div>
                                                                                <h5><strong>Purchaser</strong>
                                                                                </h5>
                                                                            </div>

                                                                            <div>
                                                                                <p class="mb-1">
                                                                                    <b>GSTIN </b>:
                                                                                    {{invoiceInfo.gst_number}}
                                                                                </p>
                                                                                <p> {{invoiceInfo.legal_name}}
                                                                                    <br>
                                                                                    {{invoiceInfo.address_floor_number?invoiceInfo.address_floor_number+',':''}}
                                                                                    {{invoiceInfo.address_1?invoiceInfo.address_1+',':''}}
                                                                                    {{invoiceInfo.address_2?invoiceInfo.address_2+',':''}}
                                                                                    <br>
                                                                                    {{invoiceInfo.address_street?invoiceInfo.address_street+',':''}}
                                                                                    {{invoiceInfo.location?invoiceInfo.location+',':''}}
                                                                                    {{invoiceInfo.pincode}}
                                                                                    {{invoiceInfo.email?","+invoiceInfo.email:''}}
                                                                                    <br>
                                                                                    <b> Place of Supply </b> :
                                                                                    {{invoiceInfo?.place_of_supply_name?.state}}({{(invoiceInfo.place_of_supply
                                                                                    | trim) || 'NA'}})
                                                                                </p>
                                                                            </div>
                                                                        </td>
                                                                    </tr>

                                                                </table>

                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>

                                            </tbody>
                                        </table>
                                    </div>

                                    <div>
                                        <!-- <table class="table mb-0">
                                            <tbody>
                                                <tr>
                                                    <td width="100%"> -->
                                        <div class="pdf-table">
                                            <div class="heading b-h">
                                                <h4><strong>4. Item
                                                        Details</strong></h4>
                                            </div>
                                            <div class="c-p-8  table-responsive">
                                                <table class="table pdfTable goods mb-0">
                                                    <thead>
                                                        <tr>
                                                            <th>Date</th>
                                                            <th>Product Description
                                                            </th>

                                                            <th>SAC/HSN CODE</th>
                                                            <th>Item Value</th>
                                                            <th>GST Rate</th>

                                                            <!-- <th>S.CESS</th> -->
                                                            <th>CESS</th>




                                                            <th>
                                                                Total Item Value
                                                            </th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>


                                                        <tr *ngFor="let item of invoiceInfo.items; let i = index">
                                                            <td style="min-width: 80px;"
                                                                *ngIf="item.item_mode === 'Credit'">
                                                                {{item.date | date:'dd-MM-yyyy'}}</td>
                                                            <td *ngIf="item.item_mode === 'Credit'">
                                                                {{item.description}}
                                                            </td>
                                                            <td *ngIf="item.item_mode === 'Credit'">
                                                                {{item.sac_code}}
                                                            </td>
                                                            <td *ngIf="item.item_mode === 'Credit'" class="text-right">
                                                                {{item.item_value}}
                                                            </td>
                                                            <td *ngIf="item.item_mode === 'Credit'" class="text-right">
                                                                {{item.sgst_amount + item.igst_amount + item.cgst_amount
                                                                | number : '0.2'}}
                                                            </td>
                                                            <!-- <td *ngIf="item.item_mode === 'Credit'" class="text-right">
                                                                N/A</td> -->
                                                            <td *ngIf="item.item_mode === 'Credit'" class="text-right">
                                                                N/A</td>
                                                            <td *ngIf="item.item_mode === 'Credit'" class="text-right">
                                                                {{item.item_value_after_gst | number : '0.2'}}
                                                            </td>
                                                        </tr>

                                                    </tbody>
                                                </table>

                                            </div>

                                        </div>
                                        <!-- </td>
                                                </tr>

                                            </tbody>
                                        </table> -->
                                    </div>

                                    <div>
                                        <table class="table  goods goods2" style="margin: 0;">
                                            <thead>
                                                <tr>
                                                    <th>HSN/SAC CODE</th>
                                                    <th>SALES
                                                    </th>

                                                    <th>CGST

                                                    </th>
                                                    <th>SGST
                                                    </th>
                                                    <th>IGST

                                                    </th>
                                                    <th>CESS TAX </th>
                                                    <th>CESS TAX2</th>

                                                    <th>
                                                        VAT
                                                    </th>


                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr *ngFor="let item of invoiceInfo.sac_hsn_based_taxes">
                                                    <td *ngIf="item.type === 'Credit'">
                                                        {{item.sac_hsn_code}}</td>
                                                    <td *ngIf="item.type === 'Credit'">
                                                        {{item.amount_before_gst}}</td>
                                                    <td *ngIf="item.type === 'Credit'">{{item.cgst}}
                                                    </td>
                                                    <td *ngIf="item.type === 'Credit'">{{item.sgst}}
                                                    </td>
                                                    <td *ngIf="item.type === 'Credit'">{{item.igst}}
                                                    </td>
                                                    <td *ngIf="item.type === 'Credit'">{{item.cess}}
                                                    </td>
                                                    <td *ngIf="item.type === 'Credit'">{{item.cess}}
                                                    </td>
                                                    <td *ngIf="item.type === 'Credit'">{{item.vat}}</td>
                                                </tr>


                                            </tbody>
                                        </table>

                                    </div>


                                    <div class="border my-2">
                                        <table class="table table-light mb-0">
                                            <tbody>
                                                <tr>
                                                    <td width="100%">
                                                        <table width="100" class="table mb-1">
                                                            <tbody>
                                                                <tr>
                                                                    <td width="50%" style="vertical-align: middle;">
                                                                        <div class="">

                                                                            <div class="c-p-8">
                                                                                <div style="padding: 2px 5px">
                                                                                    <strong>Generated
                                                                                        By</strong> :
                                                                                    {{invoiceInfo?.company_gst}}
                                                                                </div>
                                                                                <div style="padding:2px 5px">
                                                                                    <strong>Print
                                                                                        Date
                                                                                    </strong> : {{myDate |
                                                                                    date:'mediumDate'}}
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </td>
                                                                    <!-- <td width="33.33%" align="center" style="vertical-align: middle;">
                                    <div class="">
                                      <div class="c-p-8">
                                        <img class="img-fluid" src="images/bar.PNG" alt="">
                                      </div>
                                    </div>
                                  </td> -->
                                                                    <td width="50%" align="right">
                                                                        <div class="">

                                                                            <div class="c-p-8">
                                                                                <div>
                                                                                    <img class="img-fluid"
                                                                                        src="images/sign.PNG" alt="">
                                                                                </div>
                                                                                <div>
                                                                                    <div style="padding:2px 5px">
                                                                                        <!-- <b>Amount In Words :</b> {{invoiceInfo?.sales_amount_after_tax | amountToWord }}
                                                                                        <br> -->
                                                                                        <b>Amount In Words :</b>
                                                                                        {{invoiceInfo?.amount_in_word ||
                                                                                        (invoiceInfo?.sales_amount_after_tax
                                                                                        | amountToWord) }}
                                                                                        <br>
                                                                                    </div>
                                                                                    <div style="padding:2px 5px">
                                                                                        <strong>System Generated On
                                                                                        </strong> :
                                                                                        {{invoiceInfo.credit_ack_date |
                                                                                        date:'mediumDate'}}
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </td>
                                                                </tr>

                                                            </tbody>
                                                        </table>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>


                                </div>
                            </div>
                        </div>
                    </div>


                </div>



            </div>
        </div>
        <div class="close-icon">
            <i (click)="modal.close()" class="ri-close-line"></i>
        </div>
    </div>


</ng-template>

<!-- settingd -->
<!--Mark as credit Modal Starts-->
<ng-template #moveToCreditDateEdit let-modal>
    <div class="modal-header">
        <h5 class="modal-title">Update Invoice </h5>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form (ngSubmit)="updateInvoiceDateNumber(form,modal)" #form="ngForm">
            <div class="">
                <div class="form-group">
                    <label class="mat-label" for="tax_invoice_referrence_number">Original Tax Invoice Number</label>
                    <input appMatInput appDecimaNumber id="tax_invoice_referrence_number"
                        [(ngModel)]="invoiceInfo.tax_invoice_referrence_number" class="form-control" type="text"
                        name="tax_invoice_referrence_number" required>
                </div>
            </div>
            <div class="">
                <div class="form-group">
                    <label class="mat-label" for="tax_invoice_referrence_date">Original Tax Invoice Date</label>

                    <input type="text" [max]="today_date" onfocus="(this.type='date')"
                        onblur="if(!this.value)this.type='text'" [(ngModel)]="invoiceInfo.tax_invoice_referrence_date"
                        appMatInput id="tax_invoice_referrence_date" class="form-control" type="text"
                        name="tax_invoice_referrence_date" required>
                </div>
            </div>
            <div class="d-flex justify-content-center">
                <button type="reset" (click)="modal.dismiss('Cross click')"
                    class="btn btn-sm btn-outline-dark">Cancel</button>
                <button type="submit" class="btn btn-sm ml-2 btn-primary">Update</button>
            </div>
        </form>
    </div>
</ng-template>
<!--Ends-->
<!-- invoice date edit view -->
<ng-template #invoiceDateEdit let-modal>
    <div class="modal-header">
        <h5 class="modal-title">Update Invoice Date</h5>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form (ngSubmit)="updateInvoiceDate(form,modal)" #form="ngForm">
            <div class="text-center mb-2"> <small>Current Invoice Date is {{invoiceInfo.invoice_date | date}}</small>
            </div>
            <div class="form-group calendar w-c-50 position-relative mx-auto">
                <input id="invoice_date" class="form-control h-auto" name="invoice_date" ngModel #invoice_date="ngModel"
                    [owlDateTime]="dt1" [owlDateTimeTrigger]="dt1" [max]="today" placeholder="New Invoice Date"
                    required>
                <span class="example-trigger" [owlDateTimeTrigger]="dt1">
                    <i class="ri-calendar-2-line"></i>
                </span>
                <owl-date-time [pickerType]="'calendar'" #dt1></owl-date-time>
            </div>
            <div class="d-flex justify-content-center">
                <button type="reset" (click)="modal.dismiss('Cross click')"
                    class="btn btn-sm btn-outline-dark">Cancel</button>
                <button type="submit" class="btn btn-sm ml-2 btn-primary">Update</button>
            </div>
        </form>
    </div>
</ng-template>

<!-- Edit Address1   -->
<ng-template #editAddress1 let-modal>
    <div class="modal-header">
        <h5 class="modal-title">Update Address 1</h5>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form (ngSubmit)="updateInvoiceAddress1(form,modal)" #form="ngForm">
            <div class="form-group">
                <input class="form-control" type="text" name="" id="" placeholder="Address 1" name="address1"
                    [(ngModel)]="address1_state" #address1="ngModel" required>

            </div>
            <div class="d-flex justify-content-center">
                <button type="reset" (click)="modal.dismiss('Cross click')"
                    class="btn btn-sm btn-outline-dark">Cancel</button>
                <button type="submit" class="btn btn-sm ml-2 btn-primary">Update</button>
            </div>
        </form>
    </div>
</ng-template>

<!-- Edit Address2  -->
<ng-template #editAddress2 let-modal>
    <div class="modal-header">
        <h5 class="modal-title">Update Address 2</h5>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form (ngSubmit)="updateInvoiceAddress2(form,modal)" #form="ngForm">
            <div class="form-group">
                <input class="form-control" type="text" name="" id="" placeholder="Address 2" name="address2"
                    [(ngModel)]="address2_state" #address2="ngModel" required>

            </div>
            <div class="d-flex justify-content-center">
                <button type="reset" (click)="modal.dismiss('Cross click')"
                    class="btn btn-sm btn-outline-dark">Cancel</button>
                <button type="submit" class="btn btn-sm ml-2 btn-primary">Update</button>
            </div>
        </form>
    </div>
</ng-template>

<!-- Edit Location -->
<ng-template #editInvoiceLocation let-modal>
    <div class="modal-header">
        <h5 class="modal-title">Update Location</h5>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form (ngSubmit)="updateInvoiceLocation(form,modal)" #form="ngForm">
            <div class="form-group">
                <input class="form-control" type="text" name="" id="" placeholder="Location" name="location"
                    [(ngModel)]="location_state" #location="ngModel" required>

            </div>
            <div class="d-flex justify-content-center">
                <button type="reset" (click)="modal.dismiss('Cross click')"
                    class="btn btn-sm btn-outline-dark">Cancel</button>
                <button type="submit" class="btn btn-sm ml-2 btn-primary">Update</button>
            </div>
        </form>
    </div>
</ng-template>
<!-- Edit Place of Supply-->
<ng-template #editPlaceOfSupply let-modal>
    <div class="modal-header">
        <h5 class="modal-title">Update Place Of Supply</h5>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form (ngSubmit)="updateInvoicePOS(form,modal)" #form="ngForm">
            <div class="form-group">
                <ng-select class="custom" [items]="stateCodes" bindLabel="state" placeholder="Place of supply"
                    name="place_of_supply" (ngModelChange)="modelChangeFn($event)" [(ngModel)]="place_of_supply_state"
                    #place_of_supply="ngModel" required>
                </ng-select>
            </div>
            <div class="d-flex justify-content-center">
                <button type="reset" (click)="modal.dismiss('Cross click')"
                    class="btn btn-sm btn-outline-dark">Cancel</button>
                <button type="submit" class="btn btn-sm ml-2 btn-primary">Update</button>
            </div>
        </form>
    </div>
</ng-template>


<!-- SEZ Generate IRN -->
<ng-template #sezGenerateIRN let-modal>
    <div class="modal-header">
        <h5 class="modal-title">Please select invoice sez supply type</h5>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body text-center">
        <form (ngSubmit)="sezGenerateIRNFunc(form,modal)" #form="ngForm">
            <div class="custom-control custom-radio custom-control-inline radioBorder my-4 mr-3 ">
                <input type="radio" [disabled]="invoiceInfo.total_gst_amount == 0" class="custom-control-input "
                    id="SEZWP" name="SEZWP" #SEZWP="ngModel" [(ngModel)]="this.invoiceInfo.suptyp" value="SEZWP">
                <label class="custom-control-label cursor-pointer" for="SEZWP"
                    [ngClass]="{'cursor-pointer':(invoiceInfo.total_gst_amount > 0),'cursor-notallowed':(invoiceInfo.total_gst_amount == 0)}">SEZWP</label>
            </div>
            <div class="custom-control custom-radio custom-control-inline radioBorder my-4 ">
                <input type="radio" [disabled]="invoiceInfo.total_gst_amount > 0" class="custom-control-input "
                    id="SEZWOP" name="SEZWOP" [(ngModel)]="this.invoiceInfo.suptyp" #SEZWOP="ngModel" value="SEZWOP">
                <label class="custom-control-label cursor-pointer" for="SEZWOP"
                    [ngClass]="{'cursor-pointer':(invoiceInfo.total_gst_amount == 0),'cursor-notallowed':(invoiceInfo.total_gst_amount > 0)}">SEZWOP</label>
            </div>
            <div class="d-flex justify-content-center">
                <button type="reset" (click)="modal.dismiss('Cross click')"
                    class="btn btn-sm btn-outline-dark">Cancel</button>
                <button type="submit" class="btn btn-sm ml-2 btn-primary">Update</button>
            </div>
        </form>
    </div>
</ng-template>

<!--ADD LINE ITEM MODAL-->

<ng-template #addInvoiceModal let-modal>
    <div class="modal-header">
        <h6 class="mb-0" id="modal-basic-title"><strong>Add Items </strong></h6>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>

    <div class="modal-body">
        <form #form="ngForm">

            <!--Split Item Starts-->
            <div class="form-group" *ngIf="addItemModelRef =='splitItem' ">
                <label class="mat-label" for="item_value">Item Actual Value</label>
                <input appDecimaNumber [(ngModel)]="creditInvoiceItem.value" appMatInput id="item_value"
                    class="form-control" type="text" name="item_value" readonly required>
            </div>

            <div class="form-group" *ngIf="addItemModelRef =='splitItem' ">
                <label class="mat-label" for="split_value">Amount To Split</label>
                <input appDecimaNumber (ngModelChange)="modelChangeSac($event, 'price')"
                    [(ngModel)]="creditInvoiceItem.split_value" appMatInput id="split_value" class="form-control"
                    type="text" name="split_value" required>
                <!-- <small class="text-danger" *ngIf="!checkSplitAmount">Should be less than Base value</small> -->
            </div>

            <!-- Split ITem Ends-->
            <div class="form-group">
                <ng-select class="custom" [items]="sacCodeData" bindLabel="name" placeholder="Item Name"
                    (ngModelChange)="creditInvoiceItem.item_value = null;modelChangeSac($event, 'name')" name="sacName"
                    [ngModel]="creditInvoiceItem.description" #sacName="ngModel" required>
                </ng-select>
            </div>
            <div class="form-group" *ngIf="addItemModelRef =='splitItem'">
                <label class="mat-label" for="hadSez">Inclusive or Exclusive Taxes</label>
                <select class="custom-select" (change)="modelChangeSac($event, 'net')" appMatInput name="net"
                    [(ngModel)]="creditInvoiceItem.net" required id="hadSez">
                    <option [value]="'Yes'">Yes</option>
                    <option [value]="'No'">No</option>
                </select>
            </div>

            <!-- Add Item Starts-->

            <div class="form-group" *ngIf="addItemModelRef =='addItem' ">
                <label class="mat-label" for="item_value">Item Base Value</label>
                <input appDecimaNumber
                    (keyup)="modelChangeSacQuantity($event.target.value, 'price',creditInvoiceItem.item_value * (creditInvoiceItem.quantity?creditInvoiceItem.quantity:1))"
                    [(ngModel)]="creditInvoiceItem.item_value" appMatInput id="item_value" class="form-control"
                    type="text" name="item_value" required>
            </div>

            <div class="form-group" *ngIf="addItemModelRef =='addItem' ">
                <label class="mat-label" for="invoice_date">Invoice Date *</label>
                <input type="text" [max]="maxItemDate" onfocus="(this.type='date')"
                    onblur="if(!this.value)this.type='text'" [(ngModel)]="creditInvoiceItem.invoice_date" appMatInput
                    id="invoice_date" class="form-control" type="text" name="invoice_date" required>
            </div>
            <!--Add item Ends-->

            <div *ngIf="this.companyDetails.company_code === hindia_prop || checkITemType === 'HSN'" class="form-group">
                <label class="mat-label" for="quantity">Quantity</label>
                <input appNumberInput
                    (keyup)="modelChangeSacQuantity($event.target.value, 'price',creditInvoiceItem.item_value * creditInvoiceItem.quantity)"
                    [(ngModel)]="creditInvoiceItem.quantity" appMatInput id="quantity" class="form-control" type="text"
                    name="quantity" [required]="checkITemType == 'HSN'">
            </div>
            <div *ngIf="this.companyDetails.company_code === hindia_prop || checkITemType === 'HSN'" class="form-group">
                <ng-select placeholder="UOM" class="" name="unit_of_measurement_description"
                    id="unit_of_measurement_description" [(ngModel)]="creditInvoiceItem.unit_of_measurement_description"
                    #unit_of_measurement_description="ngModel" [required]=" checkITemType == 'HSN'">
                    <ng-option *ngFor="let item of uomData" [value]="item.description">{{item?.description}}
                    </ng-option>
                </ng-select>
            </div>

            <div class="bg-gray" *ngIf="sacDetails && creditInvoiceItem.item_value">
                <table class="table">
                    <tr>
                        <td>CGST({{sacDetails?.cgst}}%)</td>
                        <td class="text-right">{{sacDetails?.cgst_amount | currency:'INR'}}</td>
                    </tr>
                    <tr>
                        <td>SGST({{sacDetails?.sgst}}%)</td>
                        <td class="text-right">{{sacDetails?.sgst_amount | currency:'INR'}}</td>
                    </tr>
                    <tr>
                        <td>IGST({{sacDetails?.igst}}%)</td>
                        <td class="text-right">{{sacDetails?.igst_amount| currency:'INR'}}</td>
                    </tr>
                    <!-- <tr>
                        <td>State Cess({{sacDetails?.state_cess}}%)</td>
                        <td class="text-right">{{sacDetails?.state_cess_amount| currency:'INR'}}</td>
                    </tr> -->
                    <tr>
                        <td>Central Cess({{sacDetails?.cess}}%)</td>
                        <td class="text-right">{{sacDetails?.cess_amount| currency:'INR'}}</td>
                    </tr>
                    <tr>
                        <td>Vat({{sacDetails?.vat}}%)</td>
                        <td class="text-right">{{sacDetails?.vat_amount | currency:'INR'}} </td>
                    </tr>
                    <tr>
                        <td>Total(Incl.Taxes)</td>
                        <td class="text-right">{{sacDetails?.item_value_after_gst | currency:'INR'}}</td>
                    </tr>
                </table>


            </div>
            <div class="text-right mt-3">
                <button class="btn btn-outline-dark" (click)="modal.dismiss('Cross click')"
                    type="button">Cancel</button>
                <button class="btn btn-primary ml-3" type="button" *ngIf="addItemModelRef =='addItem' "
                    (click)="register(form)">Add</button>
                <button class="btn btn-primary ml-3" type="button" *ngIf="addItemModelRef =='splitItem' "
                    (click)="modal.close(form)">Split</button>

            </div>


        </form>
    </div>

</ng-template>

<!-- convert Success invoice to MAnual Invoice -->
<ng-template #SuccessInvoiceChanges let-modal>
    <div class="modal-header">
        <h5 class="modal-title">Creating Manual Tax Invoice</h5>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form (ngSubmit)="updateInvoiceCredit(form,modal)" #form="ngForm">
            <div class="form-group">
                <label class="mat-label" for="invoice_number">Invoice Number</label>
                <input [(ngModel)]="changeInvoiceForm.invoice_number" appMatInput id="invoice_number"
                    class="form-control" type="text" name="invoiceNumber" required>
            </div>
            <div class="form-group">
                <label class="mat-label" for="invoice_date">Invoice Date</label>
                <input [(ngModel)]="changeInvoiceForm.invoice_date" appMatInput id="invoice_date" class="form-control"
                    type="text" name="invoice_date" readonly required>
            </div>
            <div class="d-flex justify-content-center">
                <button type="button" (click)="modal.dismiss('Cross click')"
                    class="btn btn-sm btn-outline-dark">Cancel</button>
                <button type="submit" class="btn btn-sm ml-2 btn-primary">Update</button>
            </div>
        </form>
    </div>
</ng-template>

<!-- Raise Success invoice to Credit Note -->
<ng-template #SuccessInvoiceCreditNote let-modal>
    <div class="modal-header">
        <h5 class="modal-title">Creating Credit Note</h5>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form (ngSubmit)="convertToCreditForm(form,modal)" #form="ngForm">
            <div class="form-group">
                <label class="mat-label" for="invoice_number">Invoice Number</label>
                <input [(ngModel)]="changeInvoiceForm.invoice_number" appMatInput id="invoice_number"
                    class="form-control" type="text" name="invoiceNumber" readonly required>
            </div>

            <div class="border row m-0 checkboxBorder">
                <div class="col-8 custom-control custom-checkbox">
                    <input type="checkbox" class="custom-control-input" id="customCheck" name="crNote"
                        disabled="disabled" checked="checked">
                    <label class="custom-control-label" for="customCheck">Create CreditNote</label>
                </div>
                <label class="col-4 text-right" for=""> <b>{{changeInvoiceForm.invoice_number}}CN</b></label>
            </div>
            <div class="form-group mt-4">
                <label class="mat-label" for="invoice_date">Invoice Date</label>
                <input [(ngModel)]="changeInvoiceForm.invoice_date" appMatInput id="invoice_date" class="form-control"
                    type="date" name="invoice_date" required>
            </div>
            <div class="border row m-0 checkboxBorder mt-2 ">
                <div class="col-8 custom-control custom-checkbox">
                    <input type="checkbox" class="custom-control-input" id="customCheckTax" name="taxinvoice"
                        [(ngModel)]="changeInvoiceForm.taxinvoice">
                    <label class="custom-control-label" for="customCheckTax">Create TaxInvoice</label>
                </div>
                <label class="col-4 text-right" for="customCheckTax"
                    *ngIf="companyDetails?.create_taxinvoice_raisecredit =='No'">
                    <b>{{changeInvoiceForm.invoice_number}}-1</b></label>
            </div>
            <div class="form-group mt-2"
                *ngIf="companyDetails?.create_taxinvoice_raisecredit =='Yes' && changeInvoiceForm.taxinvoice == true">
                <label class="mat-label" for="taxinvoice_number"> Create Tax Invoice</label>
                <input [(ngModel)]="changeInvoiceForm.taxinvoice_number" appMatInput id="taxinvoice_number"
                    class="form-control" type="text" name="taxinvoice_number" required>
            </div>
            <div class="form-group mt-4">
                <label class="mat-label" for="original_invoice_date">Original Invoice Date</label>
                <input [(ngModel)]="invoiceInfo.invoice_date" appMatInput id="original_invoice_date"
                    class="form-control" type="date" name="original_invoice_date" required>
            </div>
            <div class="d-flex justify-content-center mt-4">
                <button type="button" (click)="modal.dismiss('Cross click')"
                    class="btn btn-sm btn-outline-dark">Cancel</button>
                <button type="submit" class="btn btn-sm ml-2 btn-primary">Create</button>
            </div>
        </form>
    </div>
</ng-template>
<ng-template #selectErrType let-modal>
    <div class="modal-header">
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form (ngSubmit)="addPayment(form,modal)" #form="ngForm">
            <div class="form-group">
                <label class="mat-label" for="payment_type">Payment Type</label>
                <input [(ngModel)]="getSacCode" appMatInput id="payment_type" class="form-control" type="text"
                    name="payment_type" required>
            </div>
            <div class="d-flex justify-content-center">
                <button type="button" (click)="modal.dismiss('Cross click')"
                    class="btn btn-sm btn-outline-dark">Cancel</button>
                <button type="submit" class="btn btn-sm ml-2 btn-primary">Save</button>
            </div>
        </form>
    </div>
</ng-template>

<div id="pmsPDF" *ngIf="active != 6 && active!=7">
    <div class="pt-3 summary preview section-to-print pdf-display">
        <div class="row mb-2">
            <div class="col-md-6">
                <h5 class="text-capitalize text-primary"><strong>PMS Invoice</strong></h5>
            </div>
        </div>
        <div>
            <table class="table mb-0">
                <tbody>
                    <tr>
                        <td width="50%" style="vertical-align: middle;">
                            <div class="logo">
                                <div class="mb-3" *ngIf="invoiceInfo?.company_logo">
                                    <img class="img-fluid" [src]="apiDomain + invoiceInfo?.company_logo" alt="">
                                </div>

                                <div>
                                    <address>
                                        <b>
                                            <p>{{invoiceInfo?.company_legal_name}}
                                                <br>
                                                {{invoiceInfo?.company_address_1}}
                                                ,{{invoiceInfo?.company_address_2}}
                                                ,
                                                {{invoiceInfo?.company_location}},
                                                {{invoiceInfo?.company_pincode}}
                                            </p>
                                        </b>
                                    </address>
                                </div>
                            </div>
                        </td>
                        <td width="50%" align="right">
                            <div class="qr">
                                <img class="img-fluid" [src]="apiDomain + invoiceInfo.qr_code_image" alt="">
                                <span class="imgTextPMS" *ngIf="invoiceInfo.irn_generated === 'Cancelled'">
                                    <h1>Cancelled</h1>
                                </span>
                            </div>
                            <div class="qr">
                                <img class="img-fluid" [src]="apiDomain + invoiceInfo.b2c_qrimage" alt="">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div>
            <table class="table mb-0">
                <tbody>
                    <tr>
                        <td width="100%">
                            <div class="border">
                                <div class="heading">
                                    <h4><strong>1. e-Invoice
                                            Details</strong></h4>
                                </div>
                                <div class="c-p-8">
                                    <table>
                                        <tr>
                                            <td>
                                                <strong>IRN</strong> : {{invoiceInfo.irn_number}}
                                            </td>
                                            <td><strong>Ack. No : <br>
                                                </strong> {{invoiceInfo.ack_no}}
                                            </td>
                                            <td><strong>Ack. Date : <br>
                                                </strong> {{invoiceInfo.ack_date}}
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </td>
                    </tr>

                </tbody>
            </table>
        </div>

        <div>
            <table class="table mb-0">
                <tbody>
                    <tr>
                        <td width="100%">
                            <div class="border">
                                <div class="heading">
                                    <h4><strong>2. Transaction
                                            Details</strong></h4>
                                </div>
                                <div class="c-p-8">
                                    <table>
                                        <tr>
                                            <td width="15%">
                                                <strong>Category</strong> : {{invoiceInfo.invoice_type}}
                                            </td>
                                            <td width="25%">
                                                <strong>Invoice No
                                                </strong> : {{invoiceInfo.invoice_number}}
                                            </td>
                                            <td *ngIf="this.TaxInvoice" width="30%">
                                                <strong>Document Type
                                                </strong> : Tax Invoice
                                            </td>
                                            <td width="30%">
                                                <strong>Document Date
                                                </strong> :{{invoiceInfo.invoice_date | date :'dd/MM/yyyy'}}
                                            </td>
                                        </tr>

                                    </table>

                                    <table class="">

                                    </table>
                                </div>
                            </div>
                        </td>
                    </tr>

                </tbody>
            </table>
        </div>

        <div>
            <table class="table mb-0">
                <tbody>
                    <tr>
                        <td width="100%">
                            <div class="border">
                                <div class="heading">
                                    <h4><strong>3. Party
                                            Details</strong></h4>
                                </div>
                                <div class="c-p-8">
                                    <table class="party">
                                        <tr>
                                            <td width="49%" style="vertical-align: top;">
                                                <div>
                                                    <h5><strong>Seller</strong>
                                                    </h5>
                                                </div>

                                                <div class="max-500">
                                                    <p class="mb-1">
                                                        <b>GSTIN </b>: {{invoiceInfo?.company_gst}}, <b class="ml-1">PAN
                                                        </b>: {{invoiceInfo?.company_gst?.substring(2).slice(0,-3)}}
                                                    </p>
                                                    <p class="mb-1">
                                                        <span *ngIf="invoiceInfo?.company_cin_number">
                                                            <b>CIN No</b>:
                                                            {{invoiceInfo?.company_cin_number}},
                                                        </span>
                                                        <span *ngIf="invoiceInfo?.company_tin_number">
                                                            <b>TIN No</b>:
                                                            {{invoiceInfo?.company_tin_number}}
                                                        </span>
                                                    </p>
                                                    <p class="mb-1" *ngIf="invoiceInfo?.company_fssai_number">
                                                        <b>FSSAI LIC No </b>: {{invoiceInfo?.company_fssai_number}}
                                                    </p>
                                                    <p>{{invoiceInfo?.company_legal_name}}
                                                        <br> {{invoiceInfo?.company_address_1}}
                                                        ,{{invoiceInfo?.company_address_2}} ,
                                                        {{invoiceInfo?.company_location}},
                                                        {{invoiceInfo?.company_pincode}}
                                                    </p>
                                                </div>
                                            </td>
                                            <td width="51%"
                                                style="vertical-align: top;border-left: 1px solid rgba(102, 102, 102, 0.479);padding-left: 1%;">
                                                <div>
                                                    <h5><strong>Purchaser</strong>
                                                    </h5>
                                                </div>

                                                <div *ngIf="invoiceInfo?.invoice_type === 'B2B'">
                                                    <p class="mb-1">
                                                        <b>Guest Name </b> : {{invoiceInfo.guest_name}}
                                                    </p>
                                                    <p class="mb-1">
                                                        <b> GSTIN </b> : {{invoiceInfo.gst_number}}
                                                    </p>
                                                    <p> {{invoiceInfo.legal_name}}
                                                        <br>
                                                        {{invoiceInfo.address_floor_number?invoiceInfo.address_floor_number+',':''}}
                                                        {{invoiceInfo.address_1?invoiceInfo.address_1+',':''}}
                                                        {{invoiceInfo.address_2?invoiceInfo.address_2+',':''}}
                                                        <br>
                                                        {{invoiceInfo.address_street?invoiceInfo.address_street+',':''}}
                                                        {{invoiceInfo.location?invoiceInfo.location+',':''}}
                                                        {{invoiceInfo.pincode}}
                                                        {{invoiceInfo.email?","+invoiceInfo.email:''}}
                                                        <br>
                                                        <b> Place of Supply </b> :
                                                        {{invoiceInfo?.place_of_supply_name?.state}}({{(invoiceInfo.place_of_supply
                                                        | trim) || 'NA'}})
                                                    </p>
                                                </div>

                                                <div *ngIf="invoiceInfo?.invoice_type === 'B2C'">
                                                    <p class="mb-1">
                                                        <b> Guest Name :</b> {{invoiceInfo.guest_name}}
                                                    </p>
                                                    <p class="mb-1">
                                                        <b> Room Number :</b> {{invoiceInfo.room_number}}
                                                    </p>
                                                    <p class="mb-1">
                                                        <b> Confirmation Number :</b>
                                                        {{invoiceInfo.confirmation_number}}
                                                    </p>

                                                </div>

                                            </td>
                                        </tr>

                                    </table>

                                </div>
                            </div>
                        </td>
                    </tr>

                </tbody>
            </table>
        </div>

        <div>
            <!-- <table class="table mb-0">
                <tbody>
                    <tr>
                        <td width="100%"> -->
            <div class="pdf-table">
                <div class="heading b-h">
                    <h4><strong>4. Item
                            Details</strong></h4>
                </div>
                <div class="c-p-8  table-responsive">
                    <table class="table pdfTable goods mb-0">
                        <thead>
                            <tr>
                                <!-- <th>S.NO</th> -->
                                <th>Date</th>
                                <th>Product Description
                                </th>

                                <th style="width: 80px;">SAC/HSN</th>
                                <th>Item Value</th>

                                <th>GST Rate</th>
                                <th>GST Amount</th>

                                <!-- <th>S.CESS</th> -->
                                <th>CESS</th>




                                <th>
                                    Total Item Value
                                </th>
                            </tr>
                        </thead>
                        <tbody>


                            <tr *ngFor="let item of invoiceInfo.items; let i = index">
                                <!-- <td>
                        {{i+1}}</td> -->
                                <td style="min-width: 80px;">
                                    {{item.date | date:'dd-MM-yyyy'}}</td>
                                <td style="max-width: 140px;">
                                    {{item.description}}
                                </td>
                                <td>
                                    {{item.sac_code}}
                                </td>
                                <td class="text-right">
                                    {{item.item_value}}
                                </td>
                                <td class="text-right">
                                    {{item.gst_rate}} %
                                </td>
                                <td class="text-right">
                                    {{item.sgst_amount + item.igst_amount + item.cgst_amount | number : '0.2'}}
                                </td>
                                <!-- <td class="text-right">
                                    {{item.state_cess_amount}}</td> -->
                                <td class="text-right">
                                    {{item.cess_amount}}</td>
                                <td class="text-right">
                                    {{item.item_value_after_gst | number : '0.2'}}
                                </td>
                            </tr>

                        </tbody>
                    </table>

                </div>

            </div>
            <!-- </td>
                    </tr>

                </tbody>
            </table> -->
        </div>

        <div class="c-border-table"></div>

        <div class="">
            <table class="table  goods goods2" style="margin: 0;">
                <thead>
                    <tr>
                        <th>HSN/SAC CODE</th>
                        <th>SALES
                        </th>

                        <th>CGST

                        </th>
                        <th>SGST
                        </th>
                        <th>IGST

                        </th>
                        <!-- <th>S.CESS</th> -->
                        <th>CESS</th>
                        <!-- <th>CESS TAX </th>
                        <th>CESS TAX2</th> -->

                        <th>
                            VAT
                        </th>


                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let item of invoiceInfo.sac_hsn_based_taxes">

                        <td>
                            {{item.sac_hsn_code}}</td>
                        <td class="text-right">
                            {{item.amount_before_gst| number : '0.2'}}</td>
                        <td class="text-right">
                            {{item.cgst| number : '0.2'}}</td>
                        <td class="text-right">
                            {{item.sgst| number : '0.2'}}</td>
                        <td class="text-right">
                            {{item.igst| number : '0.2'}}</td>
                        <td class="text-right">
                            {{item.cess | number : '0.2'}}</td>
                        <!-- <td class="text-right">
                            {{item.state_cess | number : '0.2'}}</td> -->
                        <td class="text-right">{{item?.vat | number : '0.2'}}</td>
                    </tr>


                </tbody>
            </table>

        </div>
        <div class=" my-2 c-border-table"></div>
        <div class="">
            <table class="table  goods goods2" style="margin: 0;">
                <thead>
                    <tr>
                        <th>Tax'ble Value</th>
                        <th>CGST </th>

                        <th>SGST </th>
                        <th>IGST </th>
                        <th>CESS </th>
                        <!-- <th>State CESS </th> -->
                        <th>Discount</th>
                        <th>
                            Other Charges
                        </th>
                        <th>
                            Round off
                        </th>
                        <th>
                            Total Inv. Value
                        </th>

                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <!-- invoiceInfo?.sales_amount_before_tax| number : '0.2' -->
                        <td class="text-right">{{invoiceInfo?.pms_invoice_summary_without_gst| number : '0.2'}}</td>
                        <td class="text-right">{{invoiceInfo?.cgst_amount| number : '0.2'}} </td>
                        <td class="text-right">{{invoiceInfo?.sgst_amount| number : '0.2'}}</td>
                        <td class="text-right">{{invoiceInfo?.igst_amount| number : '0.2'}}</td>
                        <td class="text-right">{{invoiceInfo?.total_central_cess_amount| number : '0.2'}}</td>
                        <!-- <td class="text-right">{{invoiceInfo?.total_state_cess_amount| number : '0.2'}}</td> -->
                        <td class="text-right">0</td>
                        <td class="text-right">{{invoiceInfo?.other_charges | number : '0.2'}}</td>
                        <td class="text-right">{{invoiceInfo?.invoice_round_off_amount| number : '0.2'}}</td>
                        <td class="text-right">{{invoiceInfo?.sales_amount_after_tax| number : '0.2'}}</td>
                    </tr>


                </tbody>
            </table>

        </div>

        <div class="border my-2">
            <table class="table table-light mb-0">
                <tbody>
                    <tr>
                        <td width="100%">
                            <table width="100" class="table mb-1">
                                <tbody>
                                    <tr>
                                        <td width="50%" style="vertical-align: middle;">
                                            <div class="">

                                                <div class="c-p-8">
                                                    <div style="padding: 2px 5px">
                                                        <strong>Generated
                                                            By</strong> : {{loginData?.full_name}}
                                                    </div>
                                                    <div style="padding:2px 5px">
                                                        <strong>Print
                                                            Date
                                                        </strong> : {{myDate | date:'mediumDate'}}
                                                    </div>
                                                </div>
                                            </div>
                                        </td>
                                        <!-- <td width="33.33%" align="center" style="vertical-align: middle;">
                      <div class="">
                        <div class="c-p-8">
                                                              <img class="img-fluid"
                                                                  src="images/bar.PNG"
                                                                  alt="">
                                                          </div>
                      </div>
                    </td> -->
                                        <td width="50%" align="right">
                                            <div class="">

                                                <div class="c-p-8">
                                                    <div>
                                                        <!-- <img class="img-fluid"
                                                                      src="images/sign.PNG"
                                                                      alt=""> -->
                                                    </div>
                                                    <div>
                                                        <div style="padding:2px 5px">
                                                            <!-- <b>Amount In Words :</b> {{invoiceInfo?.sales_amount_after_tax | amountToWord }}
                                                            <br> -->
                                                            <b>Amount In Words :</b> {{invoiceInfo?.amount_in_word ||
                                                            (invoiceInfo?.sales_amount_after_tax | amountToWord) }}
                                                            <br>
                                                        </div>
                                                        <div style="padding:2px 5px">
                                                            <strong> System Generated On
                                                            </strong> :
                                                            <!-- {{invoiceInfo.ack_date
                                                                      |
                                                                      date:'medium'}} -->
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </td>

                                    </tr>

                                </tbody>
                            </table>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div *ngIf="companyDetails?.custom_e_tax_invoice_footer == 1">
            <img [src]="apiDomain + companyDetails?.custom_e_tax_invoice_footer_image" alt=" " width="100%">
        </div>


    </div>
</div>

<div *ngIf="active != 7" id="pmsCreditPDF">
    <div class="pt-3 summary preview  pdf-display">
        <div>
            <div class="row mb-2">
                <div class="col-md-6">
                    <h5 class="text-capitalize text-secondary"><strong>{{invoicetypeName ?
                            invoicetypeName : 'Credit'}} Invoice</strong></h5>
                </div>

            </div>
            <div class="">
                <div>
                    <table class="table mb-0">
                        <tbody>
                            <tr>
                                <td width="50%" style="vertical-align: middle;">
                                    <div class="logo">
                                        <div class="mb-3" *ngIf="invoiceInfo?.company_logo">
                                            <img class="img-fluid" [src]="apiDomain + invoiceInfo?.company_logo" alt="">
                                        </div>
                                        <div>


                                            <address>
                                                <b>
                                                    <p>{{invoiceInfo?.company_legal_name}}
                                                        <br>
                                                        {{invoiceInfo?.company_address_1}}
                                                        ,{{invoiceInfo?.company_address_2}}
                                                        ,
                                                        {{invoiceInfo?.company_location}},
                                                        {{invoiceInfo?.company_pincode}}
                                                    </p>
                                                </b>
                                            </address>
                                        </div>
                                    </div>
                                </td>
                                <td width="50%" align="right">
                                    <div class="qr">
                                        <img class="img-fluid" [src]="apiDomain + invoiceInfo.credit_qr_code_image"
                                            alt="">
                                        <span class="imgTextPMS" *ngIf="invoiceInfo.irn_generated === 'Cancelled'">
                                            <h1>Cancelled</h1>
                                        </span>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div>
                    <table class="table mb-0">
                        <tbody>
                            <tr>
                                <td width="100%">
                                    <div class="border">
                                        <div class="heading">
                                            <h4><strong>1. e-Invoice
                                                    Details</strong></h4>
                                        </div>
                                        <div class="c-p-8">
                                            <table>
                                                <tr>
                                                    <td style="max-width: 200px;">
                                                        <strong>IRN</strong> : {{invoiceInfo.credit_irn_number}}
                                                    </td>
                                                    <td><strong>Ack. No : <br>
                                                        </strong> {{invoiceInfo.credit_ack_no}}
                                                    </td>
                                                    <td><strong>Ack. Date : <br>
                                                        </strong> {{invoiceInfo.credit_ack_date }}
                                                    </td>
                                                </tr>
                                            </table>
                                        </div>
                                    </div>
                                </td>
                            </tr>

                        </tbody>
                    </table>
                </div>

                <div>
                    <table class="table mb-0">
                        <tbody>
                            <tr>
                                <td width="100%">
                                    <div class="border">
                                        <div class="heading">
                                            <h4><strong>2. Transaction
                                                    Details</strong></h4>
                                        </div>
                                        <div class="c-p-8">
                                            <table>
                                                <tr>
                                                    <td width="15%">
                                                        <strong>Category</strong> : {{invoiceInfo.invoice_type}}
                                                    </td>
                                                    <td width="25%">
                                                        <strong>Invoice No
                                                        </strong> : {{invoiceInfo.invoice_number}}
                                                    </td>
                                                    <td *ngIf="this.CreditInvoice" width="30%">
                                                        <strong>Document Type
                                                        </strong> : Credit Invoice
                                                    </td>
                                                    <td width="30%">
                                                        <strong>Document Date
                                                        </strong> :{{invoiceInfo.invoice_date | date :'dd/MM/yyyy'}}
                                                    </td>
                                                </tr>

                                            </table>

                                            <table class="">

                                            </table>
                                        </div>
                                    </div>
                                </td>
                            </tr>

                        </tbody>
                    </table>
                </div>

                <div>
                    <table class="table mb-0">
                        <tbody>
                            <tr>
                                <td width="100%">
                                    <div class="border">
                                        <div class="heading">
                                            <h4><strong>3. Party
                                                    Details</strong></h4>
                                        </div>
                                        <div class="c-p-8">
                                            <table class="party">
                                                <tr>
                                                    <td width="49%" style="vertical-align: top;">
                                                        <div>
                                                            <h5><strong>Seller</strong>
                                                            </h5>
                                                        </div>

                                                        <div class="max-500">
                                                            <p class="mb-1">
                                                            <p class="mb-1">
                                                                <b>GSTIN </b>: {{invoiceInfo?.company_gst}}, <b
                                                                    class="ml-1">PAN </b>:
                                                                {{invoiceInfo?.company_gst?.substring(2).slice(0,-3)}}
                                                            </p>
                                                            <p class="mb-1">
                                                                <b>FSSAI LIC No </b>:
                                                                {{invoiceInfo?.company_fssai_number}}
                                                            </p>
                                                            <p>{{invoiceInfo?.company_legal_name}}
                                                                <br> {{invoiceInfo?.company_address_1}}
                                                                ,{{invoiceInfo?.company_address_2}} ,
                                                                {{invoiceInfo?.company_location}},
                                                                {{invoiceInfo?.company_pincode}}
                                                            </p>
                                                        </div>
                                                    </td>
                                                    <td width="51%"
                                                        style="vertical-align: top;border-left: 1px solid rgba(102, 102, 102, 0.479);padding-left: 1%;">
                                                        <div>
                                                            <h5><strong>Purchaser</strong>
                                                            </h5>
                                                        </div>

                                                        <div>
                                                            <p class="mb-1">
                                                                <b>GSTIN </b> : {{invoiceInfo.gst_number}}
                                                            </p>
                                                            <p> {{invoiceInfo.legal_name}}
                                                                <br>
                                                                {{invoiceInfo.address_floor_number?invoiceInfo.address_floor_number+',':''}}
                                                                {{invoiceInfo.address_1?invoiceInfo.address_1+',':''}}
                                                                {{invoiceInfo.address_2?invoiceInfo.address_2+',':''}}
                                                                <br>
                                                                {{invoiceInfo.address_street?invoiceInfo.address_street+',':''}}
                                                                {{invoiceInfo.location?invoiceInfo.location+',':''}}
                                                                {{invoiceInfo.pincode}}
                                                                {{invoiceInfo.email?","+invoiceInfo.email:''}}
                                                                <br>
                                                                <b> Place of Supply </b> :
                                                                {{invoiceInfo?.place_of_supply_name?.state}}({{(invoiceInfo.place_of_supply
                                                                | trim) || 'NA'}})
                                                            </p>
                                                        </div>
                                                    </td>
                                                </tr>

                                            </table>

                                        </div>
                                    </div>
                                </td>
                            </tr>

                        </tbody>
                    </table>
                </div>

                <div>
                    <!-- <table class="table mb-0">
                        <tbody>
                            <tr>
                                <td width="100%"> -->
                    <div class="pdf-table">
                        <div class="heading b-h">
                            <h4><strong>4. Item
                                    Details</strong></h4>
                        </div>
                        <div class="c-p-8  table-responsive">
                            <table class="table pdfTable goods mb-0">
                                <thead>
                                    <tr>
                                        <th>Date</th>
                                        <th>Product Description
                                        </th>

                                        <th style="width: 80px;">SAC/HSN</th>
                                        <th>Item Value</th>
                                        <th>GST Rate</th>

                                        <th>GST Amount</th>

                                        <!-- <th>S.CESS</th> -->
                                        <th>CESS</th>




                                        <th>
                                            Total Item Value
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>


                                    <tr *ngFor="let item of invoiceInfo.items; let i = index">
                                        <td style="min-width: 80px;" *ngIf="item.item_mode === 'Credit'">
                                            {{item?.date | date:'dd-MM-yyyy'||'NA'}}</td>
                                        <td *ngIf="item.item_mode === 'Credit'">
                                            {{item?.description||'NA'}}
                                        </td>
                                        <td *ngIf="item.item_mode === 'Credit'">
                                            {{item?.sac_code || 'NA'}}
                                        </td>
                                        <td *ngIf="item.item_mode === 'Credit'" class="text-right">
                                            {{item?.item_value || 'NA'}}
                                        </td>
                                        <td *ngIf="item.item_mode === 'Credit'" class="text-right">
                                            {{item.gst_rate}} %
                                        </td>
                                        <td *ngIf="item.item_mode === 'Credit'" class="text-right">
                                            {{(item.sgst_amount + item.igst_amount + item.cgst_amount | number : '0.2')
                                            || 'NA' }}
                                        </td>
                                        <!-- <td *ngIf="item.item_mode === 'Credit'" class="text-right">
                                            {{item?.state_cess_amount || 'NA'}}</td> -->
                                        <td *ngIf="item.item_mode === 'Credit'" class="text-right">
                                            {{item.cess_amount || 'NA'}}</td>
                                        <td *ngIf="item.item_mode === 'Credit'" class="text-right">
                                            {{(item.item_value_after_gst | number : '0.2') || 'NA'}}
                                        </td>
                                    </tr>

                                </tbody>
                            </table>

                        </div>

                    </div>
                    <!-- </td>
                            </tr>

                        </tbody>
                    </table> -->
                </div>

                <div class="c-border-table"></div>

                <div class=" my-2 c-border-table"></div>
                <div class="">
                    <table class="table  goods goods2" style="margin: 0;">
                        <thead>
                            <tr>
                                <th>Tax'ble Value</th>
                                <th>CGST </th>
                                <th>SGST</th>
                                <th>IGST</th>
                                <th>CESS</th>
                                <!-- <th>State CESS </th> -->
                                <th>Discount</th>
                                <th>
                                    Other Charges
                                </th>
                                <th>
                                    Round off
                                </th>
                                <th>
                                    Total Inv. Value
                                </th>

                            </tr>
                        </thead>
                        <tbody>
                            <tr>

                                <td class="text-right">{{invoiceInfo?.credit_value_before_gst | number : '0.2'}}</td>
                                <td class="text-right">{{invoiceInfo?.credit_cgst_amount | number : '0.2'}} </td>
                                <td class="text-right">{{invoiceInfo?.credit_sgst_amount | number : '0.2'}}</td>
                                <td class="text-right">{{invoiceInfo?.credit_igst_amount | number : '0.2'}}</td>
                                <td class="text-right">{{invoiceInfo?.total_credit_central_cess_amount | number :
                                    '0.2'}}
                                </td>
                                <!-- <td class="text-right">{{invoiceInfo?.total_credit_state_cess_amount | number : '0.2'}}
                                </td> -->
                                <td class="text-right">0</td>
                                <td class="text-right"> {{invoiceInfo?.other_charges | number : '0.2'}}</td>
                                <td class="text-right">0</td>
                                <td class="text-right">{{invoiceInfo?.credit_value_after_gst| number : '0.2'}}</td>
                            </tr>


                        </tbody>
                    </table>

                </div>
                <div class="border my-2">
                    <table class="table table-light mb-0">
                        <tbody>
                            <tr>
                                <td width="100%">
                                    <table width="100" class="table mb-1">
                                        <tbody>
                                            <tr>
                                                <td width="50%" style="vertical-align: middle;">
                                                    <div class="">

                                                        <div class="c-p-8">
                                                            <div style="padding: 2px 5px">
                                                                <strong>Generated
                                                                    By</strong> : {{loginData?.full_name}}
                                                            </div>
                                                            <div style="padding:2px 5px">
                                                                <strong>Print
                                                                    Date
                                                                </strong> : {{myDate | date:'mediumDate'}}
                                                            </div>
                                                        </div>
                                                    </div>
                                                </td>
                                                <!-- <td width="33.33%" align="center" style="vertical-align: middle;">
                          <div class="">
                            <div class="c-p-8">
                                                                      <img class="img-fluid"
                                                                          src="images/bar.PNG"
                                                                          alt="">
                                                                  </div>
                          </div>
                        </td> -->
                                                <td width="50%" align="right">
                                                    <div class="">

                                                        <div class="c-p-8">
                                                            <!-- <div>
                                                                          <img class="img-fluid"
                                                                              src="images/sign.PNG"
                                                                              alt="">
                                                                      </div> -->
                                                            <div>
                                                                <div style="padding:2px 5px">
                                                                    <!-- <b>Amount In Words :</b> {{invoiceInfo?.sales_amount_after_tax | amountToWord }}
                                                                    <br> -->
                                                                    <b>Amount In Words :</b>
                                                                    {{invoiceInfo?.amount_in_word ||
                                                                    (invoiceInfo?.sales_amount_after_tax | amountToWord)
                                                                    }}
                                                                    <br>
                                                                </div>
                                                                <div style="padding:2px 5px">
                                                                    <strong>System Generated On
                                                                    </strong> : {{invoiceInfo.credit_ack_date |
                                                                    date:'mediumDate'}}
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </td>
                                            </tr>

                                        </tbody>
                                    </table>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>


            </div>
        </div>
    </div>
</div>

<div *ngIf="active != 6" id="PmsTaxPdf">
    <div class="pt-3 summary preview pdf-display">
        <div class="min-h">
            <div>
                <div class="row mb-2">
                    <div class="col-md-6">
                        <h5 class="text-capitalize text-primary"><strong>{{invoicetypeName ?
                                invoicetypeName : 'Tax'}} Invoice</strong></h5>
                    </div>

                </div>

                <div class="">
                    <!-- <div *ngIf="companyDetails?.custom_e_tax_invoice_logo == 1">
            <img [src]="apiDomain + companyDetails?.custom_e_tax_invoice_logo_image" alt=" " width="100%">
          </div> -->
                    <div>
                        <table class="table mb-0">
                            <tbody>
                                <tr>
                                    <td width="50%" style="vertical-align: middle;">
                                        <div class="logo">
                                            <!-- <ng-template #logoBlock3> -->
                                            <div class="mb-3" *ngIf="invoiceInfo?.company_logo">
                                                <img class="img-fluid" [src]="apiDomain + invoiceInfo?.company_logo"
                                                    alt="">
                                            </div>
                                            <!-- </ng-template>
                                            <div
                                                *ngIf="companyDetails?.custom_e_tax_invoice_logo == 1; else logoBlock3">
                                                <img [src]="apiDomain + companyDetails?.custom_e_tax_invoice_logo_image"
                                                    alt=" " width="100%">
                                            </div> -->
                                            <!-- <div>
                        <address>
                          <b>
                            <p>{{companyDetails.legal_name}}
                              <br>
                              {{companyDetails?.address_1}}
                              ,{{companyDetails?.address_2}}
                              ,
                              {{companyDetails?.location}},
                              {{companyDetails?.pincode}}
                            </p>
                          </b>
                        </address>
                      </div> -->
                                        </div>
                                    </td>
                                    <td width="50%" align="right">
                                        <div class="qr">
                                            <img class="img-fluid" [src]="apiDomain + invoiceInfo.qr_code_image" alt="">
                                            <span class="imgTextPMS" *ngIf="invoiceInfo.irn_generated === 'Cancelled'">
                                                <h1>Cancelled</h1>
                                            </span>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div>
                        <table class="table mb-0">
                            <tbody>
                                <tr>
                                    <td width="100%">
                                        <div class="border">
                                            <div class="heading">
                                                <h4><strong>1. e-Invoice
                                                        Details</strong></h4>
                                            </div>
                                            <div class="c-p-8">
                                                <table>
                                                    <tr>
                                                        <td>
                                                            <strong>IRN</strong> : {{invoiceInfo.irn_number}}
                                                        </td>
                                                        <td><strong>Ack. No : <br>
                                                            </strong> {{invoiceInfo.ack_no}}
                                                        </td>
                                                        <td><strong>Ack. Date : <br>
                                                            </strong> {{invoiceInfo.ack_date}}
                                                        </td>
                                                    </tr>
                                                </table>
                                            </div>
                                        </div>
                                    </td>
                                </tr>

                            </tbody>
                        </table>
                    </div>

                    <div>
                        <table class="table mb-0">
                            <tbody>
                                <tr>
                                    <td width="100%">
                                        <div class="border">
                                            <div class="heading">
                                                <h4><strong>2. Transaction
                                                        Details</strong></h4>
                                            </div>
                                            <div class="c-p-8">
                                                <table>
                                                    <tr>
                                                        <td width="15%">
                                                            <strong>Category</strong> : {{invoiceInfo.invoice_type}}
                                                        </td>
                                                        <td width="25%">
                                                            <strong>Invoice No
                                                            </strong> : {{invoiceInfo.invoice_number}}
                                                        </td>
                                                        <td *ngIf="this.TaxInvoice" width="30%">
                                                            <strong>Document Type
                                                            </strong> : Tax Invoice
                                                        </td>
                                                        <td width="30%">
                                                            <strong>Document Date
                                                            </strong> :{{invoiceInfo.invoice_date | date :'dd/MM/yyyy'}}
                                                        </td>
                                                    </tr>

                                                </table>

                                                <table class="">

                                                </table>
                                            </div>
                                        </div>
                                    </td>
                                </tr>

                            </tbody>
                        </table>
                    </div>

                    <div>
                        <table class="table mb-0">
                            <tbody>
                                <tr>
                                    <td width="100%">
                                        <div class="border">
                                            <div class="heading">
                                                <h4><strong>3. Party
                                                        Details</strong></h4>
                                            </div>
                                            <div class="c-p-8">
                                                <table class="party">
                                                    <tr>
                                                        <td width="49%" style="vertical-align: top;">
                                                            <div>
                                                                <h5><strong>Seller</strong>
                                                                </h5>
                                                            </div>

                                                            <div class="max-500">
                                                                <p class="mb-1">
                                                                    <b>GSTIN </b>: {{invoiceInfo?.company_gst}}, <b
                                                                        class="ml-1">PAN </b>:
                                                                    {{invoiceInfo?.company_gst?.substring(2).slice(0,-3)}}
                                                                </p>
                                                                <p class="mb-1">
                                                                    <b>FSSAI LIC No </b>:
                                                                    {{invoiceInfo?.company_fssai_number}}
                                                                </p>
                                                                <p>{{invoiceInfo?.company_legal_name}}
                                                                    <br> {{invoiceInfo?.company_address_1}}
                                                                    ,{{invoiceInfo?.company_address_2}} ,
                                                                    {{invoiceInfo?.company_location}},
                                                                    {{invoiceInfo?.company_pincode}}
                                                                </p>
                                                            </div>
                                                        </td>
                                                        <td width="51%"
                                                            style="vertical-align: top;border-left: 1px solid rgba(102, 102, 102, 0.479);padding-left: 1%;">
                                                            <div>
                                                                <h5><strong>Purchaser</strong>
                                                                </h5>
                                                            </div>
                                                            <div *ngIf="invoiceInfo?.invoice_type === 'B2B'">
                                                                <p class="mb-1">
                                                                    Guest : {{invoiceInfo.guest_name}}
                                                                </p>
                                                                <p class="mb-1">
                                                                    <b>GSTIN </b>: {{invoiceInfo.gst_number}}
                                                                </p>
                                                                <p> {{invoiceInfo.legal_name}}
                                                                    <br>
                                                                    {{invoiceInfo.address_floor_number?invoiceInfo.address_floor_number+',':''}}
                                                                    {{invoiceInfo.address_1?invoiceInfo.address_1+',':''}}
                                                                    {{invoiceInfo.address_2?invoiceInfo.address_2+',':''}}
                                                                    <br>
                                                                    {{invoiceInfo.address_street?invoiceInfo.address_street+',':''}}
                                                                    {{invoiceInfo.location?invoiceInfo.location+',':''}}
                                                                    {{invoiceInfo.pincode}}
                                                                    {{invoiceInfo.email?","+invoiceInfo.email:''}}
                                                                    <br>
                                                                    <b> Place of Supply </b> :
                                                                    {{invoiceInfo?.place_of_supply_name?.state}}({{(invoiceInfo.place_of_supply
                                                                    | trim) || 'NA'}})
                                                                </p>
                                                            </div>

                                                            <div *ngIf="invoiceInfo?.invoice_type === 'B2C'">
                                                                <p class="mb-1">
                                                                    <b> Guest Name :</b> {{invoiceInfo.guest_name}}
                                                                </p>
                                                                <p class="mb-1">
                                                                    <b> Room Number :</b> {{invoiceInfo.room_number}}
                                                                </p>
                                                                <p class="mb-1">
                                                                    <b> Confirmation Number :</b>
                                                                    {{invoiceInfo.confirmation_number}}
                                                                </p>

                                                            </div>
                                                        </td>
                                                    </tr>

                                                </table>

                                            </div>
                                        </div>
                                    </td>
                                </tr>

                            </tbody>
                        </table>
                    </div>

                    <div>
                        <div class="pdf-table">
                            <div class="heading b-h">
                                <h4><strong>4. Item
                                        Details</strong></h4>
                            </div>
                            <div class="c-p-8  table-responsive">
                                <table class="table pdfTable goods mb-0">
                                    <thead>
                                        <tr>
                                            <!-- <th>S.NO</th> -->
                                            <th>Date</th>
                                            <th>Product Description
                                            </th>

                                            <th style="width: 80px;">SAC/HSN
                                            </th>
                                            <th>Item Value</th>
                                            <th>GST Rate</th>
                                            <th>GST Amount</th>

                                            <!-- <th>S.CESS</th> -->
                                            <th>CESS</th>




                                            <th>
                                                Total Item Value
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>


                                        <tr *ngFor="let item of invoiceInfo.items; let i = index">
                                            <!-- <td *ngIf="item.item_mode === 'Debit' && item.type === 'Included'">
                                {{i+1}}</td> -->
                                            <td style="min-width: 80px;"
                                                *ngIf="item.item_mode === 'Debit' && item.type === 'Included'">
                                                {{item.date | date:'dd-MM-yyyy'}}</td>
                                            <td *ngIf="item.item_mode === 'Debit' && item.type === 'Included'">
                                                {{item.description}} {{item.description}} <br /> <small
                                                    style="font-style: italic;"><b>{{item?.item_reference}}</b></small>
                                            </td>
                                            <td *ngIf="item.item_mode === 'Debit' && item.type === 'Included'">
                                                {{item.sac_code}}
                                            </td>
                                            <td *ngIf="item.item_mode === 'Debit' && item.type === 'Included'"
                                                class="text-right">
                                                {{item.item_value}}
                                            </td>
                                            <td *ngIf="item.item_mode === 'Debit' && item.type === 'Included'"
                                                class="text-right">
                                                {{item.gst_rate}} %
                                            </td>
                                            <td *ngIf="item.item_mode === 'Debit' && item.type === 'Included'"
                                                class="text-right">
                                                {{item.sgst_amount + item.igst_amount + item.cgst_amount | number :
                                                '0.2'}}
                                            </td>
                                            <!-- <td *ngIf="item.item_mode === 'Debit' && item.type === 'Included'"
                                                class="text-right">
                                                {{item.state_cess_amount}}</td> -->
                                            <td *ngIf="item.item_mode === 'Debit' && item.type === 'Included'"
                                                class="text-right">
                                                {{item.cess_amount}}</td>
                                            <td *ngIf="item.item_mode === 'Debit' && item.type === 'Included'"
                                                class="text-right">
                                                {{item.item_value_after_gst | number : '0.2'}}
                                            </td>
                                        </tr>

                                    </tbody>
                                </table>

                            </div>

                        </div>
                    </div>

                    <div class="c-border-table"></div>

                    <div>
                        <table class="table  goods goods2" style="margin: 0;">
                            <thead>
                                <tr>
                                    <th>HSN/SAC CODE</th>
                                    <th>SALES</th>
                                    <th>CGST</th>
                                    <th>SGST</th>
                                    <th>IGST</th>
                                    <th>CESS TAX </th>
                                    <th>CESS TAX2</th>
                                    <th>VAT</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- <tr *ngFor="let item of taxableArr">

                                    <td>
                                        {{item.sac_code}}</td>
                                    <td>
                                        {{item.item_value |number : '1.2-2'}}</td>
                                    <td>
                                        {{item.cgst_amount |number : '1.2-2'}}</td>
                                    <td>
                                        {{item.sgst_amount |number : '1.2-2'}}</td>
                                    <td>
                                        {{item.igst_amount |number : '1.2-2'}}</td>
                                    <td>
                                        {{item.cess}}</td>
                                    <td>
                                        {{item.cess_amount}}</td>
                                    <td>{{item.vat_amount}}</td>
                                </tr> -->

                                <tr *ngFor="let item of invoiceInfo.sac_hsn_based_taxes">

                                    <td>
                                        {{item.sac_hsn_code}}</td>
                                    <td class="text-right">
                                        {{item.amount_before_gst| number : '0.2'}}</td>
                                    <td class="text-right">
                                        {{item.cgst| number : '0.2'}}</td>
                                    <td class="text-right">
                                        {{item.sgst| number : '0.2'}}</td>
                                    <td class="text-right">
                                        {{item.igst| number : '0.2'}}</td>
                                    <td class="text-right">
                                        {{item.cess | number : '0.2'}}</td>
                                    <td class="text-right">
                                        {{item.state_cess | number : '0.2'}}</td>
                                    <td class="text-right">{{item?.vat | number : '0.2'}}</td>
                                </tr>


                            </tbody>
                        </table>

                    </div>

                    <div class=" my-2 c-border-table"></div>
                    <div class="">
                        <table class="table  goods goods2" style="margin: 0;">
                            <thead>
                                <tr>
                                    <th>Tax'ble Value</th>
                                    <th>CGST </th>
                                    <th>SGST </th>
                                    <th>IGST </th>
                                    <th>CESS </th>
                                    <!-- <th>State CESS</th> -->
                                    <th>Discount</th>
                                    <th>Other Charges</th>
                                    <th>Round off </th>
                                    <th>Total Inv. Value</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="text-right">{{invoiceInfo?.amount_before_gst | number : '0.2'}}</td>
                                    <td class="text-right">{{invoiceInfo?.cgst_amount | number : '0.2'}} </td>
                                    <td class="text-right">{{invoiceInfo?.sgst_amount | number : '0.2'}}</td>
                                    <td class="text-right">{{invoiceInfo?.igst_amount | number : '0.2'}}</td>
                                    <td class="text-right">{{invoiceInfo?.total_central_cess_amount | number : '0.2'}}
                                    </td>
                                    <!-- <td class="text-right">{{invoiceInfo?.total_state_cess_amount | number : '0.2'}}
                                    </td> -->
                                    <td class="text-right">0</td>
                                    <td class="text-right">{{invoiceInfo?.other_charges | number : '0.2'}}</td>
                                    <td class="text-right">{{invoiceInfo?.invoice_round_off_amount| number : '0.2'}}
                                    </td>
                                    <td class="text-right">{{invoiceInfo?.sales_amount_after_tax| number : '0.2'}}</td>
                                </tr>
                            </tbody>
                        </table>

                    </div>
                    <div *ngIf="companyDetails?.custom_e_tax_invoice_footer == 1">
                        <img [src]="apiDomain + companyDetails?.custom_e_tax_invoice_footer_image" alt=" " width="100%">
                    </div>

                </div>
            </div>
        </div>



    </div>
</div>


<ng-template #howToSolve let-modal>
    <div class="modal-header">
        <h6 *ngIf="invoiceInfo.error_message.includes('SAC Code')" id="modal-basic-title"><b> How to solve SAC Code not
                found error?</b>
        </h6>

        <h6 *ngIf="invoiceInfo.error_message == ' Invoice Total Mismatch'" id="modal-basic-title"><b>How to solve
                invoice
                total mismatch error?</b>
        </h6>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>

    <div class="modal-body" *ngIf="invoiceInfo.error_message == ' Invoice Total Mismatch'">
        <div class="row">
            <div class="col-md-6">
                <div class="min-hf">


                    <p> <b>Step 1 :</b> Go to Pdf view</p>
                    <p> <b>Step 2 :</b> Find out the difference amount.</p>




                    <div>
                        <table class="table table-bordered m-0">
                            <tbody>
                                <tr>
                                    <td>
                                        Total amount in <br> opera folio

                                    </td>
                                    <td>
                                        Total amount in <br> Ezy Invoicing

                                    </td>
                                    <td>

                                        Difference <br> amount



                                    </td>
                                </tr>

                                <tr>
                                    <td>1000</td>
                                    <td>1010</td>
                                    <td>-10</td>
                                </tr>
                                <tr>
                                    <td>1000</td>
                                    <td>900</td>
                                    <td>10</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>


                    <div>
                        <p> <b> Step 3 :</b> Now our goal would be finding out from where this difference amount came
                            from.</p>

                        <p><b>Step 4 :</b> To do that first compare SAC code Summary of opera invoice and SAC code
                            Summary shown in ezy invoicing and check which sac codes values are mismatched. Assume that
                            there the two different sac codes in the invoice
                            Eg 996311, 996364 and you found that values of 996311 are mismatched with values shown in
                            Ezy invoice</p>

                        <p> <b>Step 5 : </b> Now that you now that there is a mismatch in 996311 sac code values.Now you
                            need compare the line items related to 996311 sac with that line items shown in Ezy
                            invoicing. You will be finding some line items where
                            this difference is coming from. After finding the mismatched line items you have 3 options
                            to solve this issue depending on scenarios</p>

                        <p><b> Edit Sac item :</b> if the taxes the taxes for the particular item are wrongly picked you
                            need to use this option edit sac item to change the taxes values for that particular sac</p>

                        <p> <b>Edit Line item : </b> If the taxes are correctly picked up based on the sac code but you
                            like to change the taxes only for this particular line item then you should use this option.
                        </p>

                        <p><b> Split bill :</b> This option is used to split the line to two or many. For example, If
                            the liquor price is added in the Restaurant food description , to separate the liquor item
                            for this description you use this option,</p>


                        <p><b> Step 6 :</b> After balance the values (i.e Difference amount = 0) click on re process
                            button. Now the status of invoice would change to pending and you can now generate IRN for
                            the invoice</p>
                    </div>



                </div>


                <div class="min-hf" *ngIf="invoiceInfo.error_message.includes('SAC Code')">


                    <p>If you find this error in an invoice that means a particular SAC code or payment type is not
                        available in your SAC code or payment type master data.
                    </p>

                    <p>To solve this issue,
                    </p>




                    <div>
                        <p>1. Click on add button provided beside the error
                        </p>
                        <p>2. If you add it under payment type click on payment type and fill the required details
                        </p>
                        <p>3. If you add it under SAC/HSN Codes click on sac and fill the required details.
                        </p>
                        <p> <span class="cursor-pointer" [routerLink]="[ '/home/sac-hsn-codes']"><b>Click</b></span>
                            here to check guidelines to add a SAC/HSN codes.</p>
                        <p>4. After adding the SAC/HSN code,Click on Re-Proccess .Now the invoice status would change to
                            pending.
                        </p>
                        <p>5. Click on Generate IRN.
                        </p>
                    </div>






                </div>



            </div>
            <div class="col-md-6 my-auto">
                <iframe src="https://www.youtube.com/embed/qRkjPPYeoNs" title="YouTube video player" frameborder="0"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                    allowfullscreen></iframe>
            </div>
        </div>
    </div>


    <div class="modal-body" *ngIf="invoiceInfo.error_message.includes('SAC Code')">
        <div class="row">
            <div class="col-md-6">



                <div class="min-hf">


                    <p>If you find this error in an invoice that means a particular SAC code or payment type is not
                        available in your SAC code or payment type master data.
                    </p>

                    <p>To solve this issue,
                    </p>




                    <div>
                        <p>1. Click on add button provided beside the error
                        </p>
                        <p>2. If you add it under payment type click on payment type and fill the required details
                        </p>
                        <p>3. If you add it under SAC/HSN Codes click on sac and fill the required details.
                        </p>
                        <p> <span class="cursor-pointer" [routerLink]="[ '/home/sac-hsn-codes']"><b>Click</b></span>
                            here to check guidelines to add a SAC/HSN codes.</p>
                        <p>4. After adding the SAC/HSN code,Click on Re-Proccess .Now the invoice status would change to
                            pending.
                        </p>
                        <p>5. Click on Generate IRN.
                        </p>
                    </div>






                </div>



            </div>
            <div class="col-md-6 my-auto">
                <iframe src="https://www.youtube.com/embed/6p0HU3oinsg" title="YouTube video player" frameborder="0"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                    allowfullscreen></iframe>

            </div>
        </div>
    </div>

</ng-template>




<!-- sendemail -->
<div *ngIf="emailPdf" id="pmsCreditPDF">
    <div class="pt-3 summary preview  pdf-display">
        <div>
            <div class="row mb-2">
                <div class="col-md-6">
                    <h5 class="text-capitalize text-secondary"><strong>{{invoicetypeName ?
                            invoicetypeName : 'Credit'}} Invoice</strong></h5>
                </div>

            </div>
            <div class="">
                <div>
                    <table class="table mb-0">
                        <tbody>
                            <tr>
                                <td width="50%" style="vertical-align: middle;">
                                    <div class="logo">
                                        <div class="mb-3" *ngIf="invoiceInfo?.company_logo">
                                            <img class="img-fluid" [src]="apiDomain + invoiceInfo?.company_logo" alt="">
                                        </div>
                                        <div>


                                            <address>
                                                <b>
                                                    <p>{{invoiceInfo?.company_legal_name}}
                                                        <br>
                                                        {{invoiceInfo?.company_address_1}}
                                                        ,{{invoiceInfo?.company_address_2}}
                                                        ,
                                                        {{invoiceInfo?.company_location}},
                                                        {{invoiceInfo?.company_pincode}}
                                                    </p>
                                                </b>
                                            </address>
                                        </div>
                                    </div>
                                </td>
                                <td width="50%" align="right">
                                    <div class="qr">
                                        <img class="img-fluid" [src]="apiDomain + invoiceInfo.credit_qr_code_image"
                                            alt="">
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div>
                    <table class="table mb-0">
                        <tbody>
                            <tr>
                                <td width="100%">
                                    <div class="border">
                                        <div class="heading">
                                            <h4><strong>1. e-Invoice
                                                    Details</strong></h4>
                                        </div>
                                        <div class="c-p-8">
                                            <table>
                                                <tr>
                                                    <td style="max-width: 200px;">
                                                        <strong>IRN</strong> : {{invoiceInfo.credit_irn_number}}
                                                    </td>
                                                    <td><strong>Ack. No : <br>
                                                        </strong> {{invoiceInfo.credit_ack_no}}
                                                    </td>
                                                    <td><strong>Ack. Date : <br>
                                                        </strong> {{invoiceInfo.credit_ack_date }}
                                                    </td>
                                                </tr>
                                            </table>
                                        </div>
                                    </div>
                                </td>
                            </tr>

                        </tbody>
                    </table>
                </div>

                <div>
                    <table class="table mb-0">
                        <tbody>
                            <tr>
                                <td width="100%">
                                    <div class="border">
                                        <div class="heading">
                                            <h4><strong>2. Transaction
                                                    Details</strong></h4>
                                        </div>
                                        <div class="c-p-8">
                                            <table>
                                                <tr>
                                                    <td width="15%">
                                                        <strong>Category</strong> : {{invoiceInfo.invoice_type}}
                                                    </td>
                                                    <td width="25%">
                                                        <strong>Invoice No
                                                        </strong> : {{invoiceInfo.invoice_number}}
                                                    </td>
                                                    <td *ngIf="this.CreditInvoice" width="30%">
                                                        <strong>Document Type
                                                        </strong> : Credit Invoice
                                                    </td>
                                                    <td width="30%">
                                                        <strong>Document Date
                                                        </strong> :{{invoiceInfo.invoice_date | date :'dd/MM/yyyy'}}
                                                    </td>
                                                </tr>

                                            </table>

                                            <table class="">

                                            </table>
                                        </div>
                                    </div>
                                </td>
                            </tr>

                        </tbody>
                    </table>
                </div>

                <div>
                    <table class="table mb-0">
                        <tbody>
                            <tr>
                                <td width="100%">
                                    <div class="border">
                                        <div class="heading">
                                            <h4><strong>3. Party
                                                    Details</strong></h4>
                                        </div>
                                        <div class="c-p-8">
                                            <table class="party">
                                                <tr>
                                                    <td width="49%" style="vertical-align: top;">
                                                        <div>
                                                            <h5><strong>Seller</strong>
                                                            </h5>
                                                        </div>

                                                        <div class="max-500">
                                                            <p class="mb-1">
                                                                <b>GSTIN </b>: {{invoiceInfo?.company_gst}}, <b
                                                                    class="ml-1">PAN </b>:
                                                                {{invoiceInfo?.company_gst?.substring(2).slice(0,-3)}}
                                                            </p>
                                                            <p class="mb-1">
                                                                <b>FSSAI LIC No </b>:
                                                                {{invoiceInfo?.company_fssai_number}}
                                                            </p>
                                                            <p>{{invoiceInfo?.company_legal_name}}
                                                                <br> {{invoiceInfo?.company_address_1}}
                                                                ,{{invoiceInfo?.company_address_2}} ,
                                                                {{invoiceInfo?.company_location}},
                                                                {{invoiceInfo?.company_pincode}}
                                                            </p>
                                                        </div>
                                                    </td>
                                                    <td width="51%"
                                                        style="vertical-align: top;border-left: 1px solid rgba(102, 102, 102, 0.479);padding-left: 1%;">
                                                        <div>
                                                            <h5><strong>Purchaser</strong>
                                                            </h5>
                                                        </div>

                                                        <div>
                                                            <p class="mb-1">
                                                                <b>GSTIN </b>: {{invoiceInfo.gst_number}}
                                                            </p>
                                                            <p> {{invoiceInfo.legal_name}}
                                                                <br>
                                                                {{invoiceInfo.address_floor_number?invoiceInfo.address_floor_number+',':''}}
                                                                {{invoiceInfo.address_1?invoiceInfo.address_1+',':''}}
                                                                {{invoiceInfo.address_2?invoiceInfo.address_2+',':''}}
                                                                <br>
                                                                {{invoiceInfo.address_street?invoiceInfo.address_street+',':''}}
                                                                {{invoiceInfo.location?invoiceInfo.location+',':''}}
                                                                {{invoiceInfo.pincode}}
                                                                {{invoiceInfo.email?","+invoiceInfo.email:''}}
                                                                <br>
                                                                <b> Place of Supply </b> :
                                                                {{invoiceInfo?.place_of_supply_name?.state}}({{(invoiceInfo.place_of_supply
                                                                | trim) || 'NA'}})
                                                            </p>
                                                        </div>
                                                    </td>
                                                </tr>

                                            </table>

                                        </div>
                                    </div>
                                </td>
                            </tr>

                        </tbody>
                    </table>
                </div>

                <div>
                    <div class="pdf-table">
                        <div class="heading b-h">
                            <h4><strong>4. Item
                                    Details</strong></h4>
                        </div>
                        <div class="c-p-8  table-responsive">
                            <table class="table pdfTable goods mb-0">
                                <thead>
                                    <tr>
                                        <th>Date</th>
                                        <th>Product Description
                                        </th>

                                        <th style="width: 80px;">SAC/HSN</th>
                                        <th>Item Value</th>
                                        <th>GST Rate</th>

                                        <th>GST Amount</th>

                                        <!-- <th>S.CESS</th> -->
                                        <th>CESS</th>




                                        <th>
                                            Total Item Value
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>


                                    <tr *ngFor="let item of invoiceInfo.items; let i = index">
                                        <td style="min-width: 80px;" *ngIf="item.item_mode === 'Credit'">
                                            {{item?.date | date:'dd-MM-yyyy'||'NA'}}</td>
                                        <td *ngIf="item.item_mode === 'Credit'">
                                            {{item?.description||'NA'}}
                                        </td>
                                        <td *ngIf="item.item_mode === 'Credit'">
                                            {{item?.sac_code || 'NA'}}
                                        </td>
                                        <td *ngIf="item.item_mode === 'Credit'" class="text-right">
                                            {{item?.item_value || 'NA'}}
                                        </td>
                                        <td *ngIf="item.item_mode === 'Credit'" class="text-right">
                                            {{item.gst_rate}} %
                                        </td>
                                        <td *ngIf="item.item_mode === 'Credit'" class="text-right">
                                            {{(item.sgst_amount + item.igst_amount + item.cgst_amount | number : '0.2')
                                            || 'NA' }}
                                        </td>
                                        <!-- <td *ngIf="item.item_mode === 'Credit'" class="text-right">
                                            {{item?.state_cess_amount || 'NA'}}</td> -->
                                        <td *ngIf="item.item_mode === 'Credit'" class="text-right">
                                            {{item.cess_amount || 'NA'}}</td>
                                        <td *ngIf="item.item_mode === 'Credit'" class="text-right">
                                            {{(item.item_value_after_gst | number : '0.2') || 'NA'}}
                                        </td>
                                    </tr>

                                </tbody>
                            </table>

                        </div>

                    </div>
                </div>

                <div class="c-border-table"></div>


                <div class=" my-2 c-border-table"></div>
                <div class="">
                    <table class="table  goods goods2" style="margin: 0;">
                        <thead>
                            <tr>
                                <th>Tax'ble Value</th>
                                <th>CGST</th>
                                <th>SGST</th>
                                <th>IGST</th>
                                <th>CESS</th>
                                <!-- <th>State CESS</th> -->
                                <th>Discount</th>
                                <th>
                                    Other Charges
                                </th>
                                <th>
                                    Round off </th>
                                <th>
                                    Total Inv. Value</th>

                            </tr>
                        </thead>
                        <tbody>
                            <tr>

                                <td class="text-right">{{invoiceInfo?.credit_value_before_gst | number : '0.2'}}</td>
                                <td class="text-right">{{invoiceInfo?.credit_cgst_amount | number : '0.2'}} </td>
                                <td class="text-right">{{invoiceInfo?.credit_sgst_amount | number : '0.2'}}</td>
                                <td class="text-right">{{invoiceInfo?.credit_igst_amount | number : '0.2'}}</td>
                                <td class="text-right">{{invoiceInfo?.total_credit_central_cess_amount | number :
                                    '0.2'}}
                                </td>
                                <!-- <td class="text-right">{{invoiceInfo?.total_credit_state_cess_amount | number : '0.2'}}
                                </td> -->
                                <td class="text-right">0</td>
                                <td class="text-right"> {{invoiceInfo?.other_charges | number : '0.2'}}</td>
                                <td class="text-right">0</td>
                                <td class="text-right">{{invoiceInfo?.credit_value_after_gst| number : '0.2'}}</td>
                            </tr>


                        </tbody>
                    </table>

                </div>
                <div class="border my-2">
                    <table class="table table-light mb-0">
                        <tbody>
                            <tr>
                                <td width="100%">
                                    <table width="100" class="table mb-1">
                                        <tbody>
                                            <tr>
                                                <td width="50%" style="vertical-align: middle;">
                                                    <div class="">

                                                        <div class="c-p-8">
                                                            <div style="padding: 2px 5px">
                                                                <strong>Generated
                                                                    By</strong> : {{loginData?.full_name}}
                                                            </div>
                                                            <div style="padding:2px 5px">
                                                                <strong>Print
                                                                    Date
                                                                </strong> : {{myDate | date:'mediumDate'}}
                                                            </div>
                                                            <div>
                                                                Application
                                                                {{invoiceInfo?.company_application_reference_number}}
                                                            </div>
                                                        </div>
                                                    </div>
                                                </td>
                                                <!-- <td width="33.33%" align="center" style="vertical-align: middle;">
                          <div class="">
                            <div class="c-p-8">
                                                                        <img class="img-fluid"
                                                                            src="images/bar.PNG"
                                                                            alt="">
                                                                    </div>
                          </div>
                        </td> -->
                                                <td width="50%" align="right">
                                                    <div class="">

                                                        <div class="c-p-8">
                                                            <!-- <div>
                                                                            <img class="img-fluid"
                                                                                src="images/sign.PNG"
                                                                                alt="">
                                                                        </div> -->
                                                            <div>
                                                                <div style="padding:2px 5px">
                                                                    <!-- <b>Amount In Words :</b> {{invoiceInfo?.sales_amount_after_tax | amountToWord }}
                                                                    <br> -->
                                                                    <b>Amount In Words :</b>
                                                                    {{invoiceInfo?.amount_in_word ||
                                                                    (invoiceInfo?.sales_amount_after_tax | amountToWord)
                                                                    }}
                                                                    <br>
                                                                </div>
                                                                <div style="padding:2px 5px">
                                                                    <strong>System Generated On
                                                                    </strong> : {{invoiceInfo.credit_ack_date |
                                                                    date:'mediumDate'}}
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </td>
                                            </tr>

                                        </tbody>
                                    </table>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>


            </div>
        </div>
    </div>
</div>


<ng-template #viewBill let-modal>
    <div class="modal-header border-0 b-r-0 pb-0 summary my-auto text-left d-block">
        <h6 class="mb-0 px-3"><strong>View Pos Bill</strong></h6>
        <!-- <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button> -->
    </div>
    <div class="modal-body p-2 pdf-view2 bg-white shadow-sm">
        <div class="card">
            <object *ngIf="pos_bill_data?.pos_bill" [data]=" (apiDomain + pos_bill_data?.pos_bill) | safe"
                type="application/pdf" width="100%" height="500"></object>
        </div>
    </div>
    <div class="close-icon">
        <i (click)="modal.close()" class="ri-close-line"></i>
    </div>
</ng-template>