<section class="credit-details">
    <div class="container-fluid p-0">
        <div class="">
            <div class="row header-part">
                <div class="col-md-3">
                    <h5 class="text-white"> <i (click)="goBack()" class="cursor-pointer ri-arrow-left-line"></i>
                        <b>{{invoiceInfo.invoice_number}}</b>

                        <span class="c-badge ml-3"><b>{{invoiceInfo.invoice_type}}</b></span>
                        <span class="badge"
                            [ngClass]="{'badge-success': invoiceInfo.irn_generated == 'Success','badge-warning':invoiceInfo.irn_generated == 'Pending','badge-default':invoiceInfo.irn_generated == 'Cancelled','badge-danger':invoiceInfo.irn_generated == 'Error'}">{{invoiceInfo.irn_generated}}</span>
                        <small *ngIf="invoiceInfo.irn_generated == 'Error'"
                            style="font-size: 12px;">{{invoiceInfo.error_message || 'NA'}} <i
                                class="error-icon ri-error-warning-fill text-danger pr-1"></i></small>
                    </h5>

                </div>
                <div class="col-md-9 d-flex align-items-center justify-content-between">

                    <div class="">
                        <ng-container *ngIf="companyData?.e_invoice_missing_date_feature">
                            <p [ngClass]="{'text-danger': invoiceInfo?.expiry_days <= 1}"
                                *ngIf="invoiceInfo?.invoice_type == 'B2B' && (invoiceInfo?.irn_generated == 'Pending' || invoiceInfo?.irn_generated == 'Error')">
                                <b>
                                    <span *ngIf="invoiceInfo?.expiry_days >= 0 "
                                        class="irn-text-info-warn">{{invoiceInfo?.expiry_days == 0 ? "Today" :
                                        invoiceInfo?.expiry_days +'days'}} left for IRN generation</span>
                                    <span *ngIf="invoiceInfo?.expiry_days < 0" class="irn-text-info">IRN generation
                                        Expired</span>
                                </b>
                            </p>
                        </ng-container>

                    </div>

                    <div class="row justify-content-end">
                        <!-- <button (click)="manualSynctoGST()"
                            *ngIf="invoiceInfo.irn_generated === 'Success' && companyData?.b2c_to_b2b == 1 && companyData?.ezy_gst_module == 1 && invoiceInfo.synced_to_erp == 0"
                            class="btn emailBtn mr-2" appPermissionButton accessType="write" type="button">
                            Sync to GST
                        </button> -->


                        <button
                            *ngIf="invoiceInfo.irn_generated === 'Success' && companyData?.b2b_to_credit == 1 && companyData?.manual_credit_invoice == 1 && companyData?.ezy_gst_module == 1"
                            (click)="manualSynctoGST()" class="btn emailBtn mr-2" appPermissionButton accessType="write"
                            type="button">
                            {{invoiceInfo.synced_to_erp == 0?'Sync to GST':'Re-Sync to GST'}}
                        </button>
                        <button
                            *ngIf="manualType == 'Tax' && invoiceInfo.invoice_type === 'B2B' && invoiceInfo.irn_generated === 'Success' && companyData?.b2b_to_credit == 1 && invoiceInfo?.credit_note_raised === 'No' && loginUSerRole && !invoiceInfo.showCancelIrn && companyData?.manual_credit_invoice == 1"
                            (click)="convertToCredit(SuccessInvoiceCreditNote)" class="btn emailBtn mr-2"
                            appPermissionButton accessType="write" type="button">
                            Raise Credit</button>
                        <button *ngIf="invoiceInfo.invoice_type === 'B2C' && companyData?.b2c_to_b2b == 1"
                            (click)="openConvertModal()" class="btn emailBtn mr-2" appPermissionButton
                            accessType="write" type="button">
                            Convert
                            B2B</button>
                        <button
                            *ngIf="invoiceInfo.invoice_type === 'B2B' && invoiceInfo.allowance_invoice === 'No'&& companyData?.b2c_to_b2b == 1 &&( invoiceInfo.irn_generated == 'Pending' || invoiceInfo.irn_generated=='Error')"
                            (click)="ConvertB2BTOB2C()" class="btn emailBtn mr-2" appPermissionButton accessType="write"
                            type="button">
                            Convert
                            B2C</button>

                        <button
                            *ngIf="invoiceInfo.irn_generated == 'Error' || invoiceInfo.irn_generated == 'Pending' || invoiceInfo.irn_generated == 'Draft'"
                            (click)="deleteInvoices()" class="btn emailBtn mr-2" appPermissionButton accessType="write"
                            type="button">Delete
                        </button>

                        <button *ngIf="invoiceInfo.irn_generated == 'Success'" (click)="openEmailTemp()"
                            class="btn emailBtn mr-2" appPermissionButton accessType="email" type="button"><i
                                class="ri-mail-line"></i> Email</button>

                        <!-- <div class="text-right" *ngIf="invoiceInfo.invoice_type == 'B2B'"> -->

                        <button
                            *ngIf="invoiceInfo.invoice_type == 'B2B' && invoiceInfo.irn_generated === 'Pending' && invoiceInfo.items.length>0"
                            (click)="generateIrn()" class="btn btn-primary" type="button"
                            [disabled]="companyData?.e_invoice_missing_date_feature &&  checkIRNdate ">GENERATE
                            IRN</button>
                        <button
                            *ngIf="invoiceInfo.invoice_type == 'B2B' && invoiceInfo.irn_generated === 'Success' && invoiceInfo.showCancelIrn"
                            (click)="cancelIrn()" class="btn btn-danger" type="button">CANCEL IRN</button>
                        <ng-container *ngIf="invoiceInfo.irn_generated == 'Success'">
                            <button (click)="reAttachInvoice()" appPermissionButton accessType="write"
                                class="btn btn-danger btn-small ml-1" type="button">Redo QR</button>
                        </ng-container>
                        <!-- </div> -->
                        <!-- <div class="text-right mx-2"> -->
                        <ng-container
                            *ngIf="invoiceInfo.allowance_invoice === 'No' && invoiceInfo.ready_to_generate_irn == 'Yes' && invoiceInfo.irn_generated == 'Pending' && invoiceInfo.invoice_type == 'B2C'">
                            <button (click)="generateQr()" class="btn btn-danger btn-small" appPermissionButton
                                accessType="submit" type="button">Generate
                                QR</button>
                        </ng-container>

                        <!-- </div> -->
                    </div>

                </div>
            </div>
            <!-- Raise Success invoice to Credit Note -->
            <ng-template #SuccessInvoiceCreditNote let-modal>
                <div class="modal-header">
                    <h5 class="modal-title">Creating Credit Note</h5>
                    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form (ngSubmit)="convertToCreditForm(form,modal)" #form="ngForm">
                        <div class="form-group">
                            <label class="mat-label" for="invoice_number">Invoice Number</label>
                            <input [(ngModel)]="changeInvoiceForm.invoice_number" appMatInput id="invoice_number"
                                class="form-control" type="text" name="invoiceNumber" readonly required>
                        </div>

                        <div class="border row m-0 checkboxBorder">
                            <div class="col-8 custom-control custom-checkbox">
                                <input type="checkbox" class="custom-control-input" id="customCheck" name="crNote"
                                    disabled="disabled" checked="checked">
                                <label class="custom-control-label" for="customCheck">Create CreditNote</label>
                            </div>
                            <label class="col-4 text-right" for="">
                                <b>{{changeInvoiceForm.invoice_number}}CN</b></label>
                        </div>
                        <div class="border row m-0 checkboxBorder my-3 ">
                            <div class="col-8 custom-control custom-checkbox">
                                <input type="checkbox" class="custom-control-input" id="customCheckTax"
                                    name="taxinvoice" [(ngModel)]="changeInvoiceForm.taxinvoice">
                                <label class="custom-control-label" for="customCheckTax">Create TaxInvoice</label>
                            </div>
                            <label class="col-4 text-right" for="customCheckTax"
                                *ngIf="companyData?.create_taxinvoice_raisecredit =='No'">
                                <b>{{changeInvoiceForm.invoice_number}}-1</b></label>
                        </div>
                        <div class="form-group mt-2"
                            *ngIf="companyData?.create_taxinvoice_raisecredit =='Yes' && changeInvoiceForm.taxinvoice == true">
                            <label class="mat-label" for="taxinvoice_number"> Create Tax Invoice</label>
                            <input [(ngModel)]="changeInvoiceForm.taxinvoice_number" appMatInput id="taxinvoice_number"
                                class="form-control" type="text" name="taxinvoice_number" required>
                        </div>
                        <div class="form-group ">
                            <label class="mat-label" for="invoice_date">Invoice Date</label>
                            <input [(ngModel)]="changeInvoiceForm.invoice_date" appMatInput id="invoice_date"
                                class="form-control" type="date" name="invoice_date" required>
                        </div>
                        <div class="d-flex justify-content-center mt-4">
                            <button type="button" (click)="modal.dismiss('Cross click')"
                                class="btn btn-sm btn-outline-dark">Cancel</button>
                            <button type="submit" class="btn btn-sm ml-2 btn-primary">Create</button>
                        </div>
                    </form>
                </div>
            </ng-template>




            <div class="row invoice-details mt-4">
                <div class="col-md-12">
                    <ul ngbNav #nav="ngbNav" class="nav-tabs">
                        <li [ngbNavItem]="1">
                            <a ngbNavLink>Invoice Summary</a>
                            <ng-template ngbNavContent>



                                <div class="row">
                                    <div class="col-md-3">
                                        <div class="bg-white each-block shadow-sm">
                                            <div>
                                                <h6><strong>Invoice Details</strong>

                                                    <span
                                                        *ngIf="invoiceInfo.irn_generated === 'Pending' || invoiceInfo.irn_generated === 'Draft' || invoiceInfo.irn_generated === 'Error' "
                                                        (click)="invoiceEdit()" class="edit">Edit</span>

                                                    <span
                                                        *ngIf="manualType!== 'Tax'&&(invoiceInfo.irn_generated === 'Success' && (!invoiceInfo?.tax_invoice_referrence_number || !invoiceInfo?.tax_invoice_referrence_date))"
                                                        (click)="invoiceEditSuccess(content)" class="edit">Edit</span>

                                                </h6>
                                            </div>

                                            <div>

                                                <ul class="list-unstyled">
                                                    <li><span>Guest Name</span> <strong placement="top"
                                                            ngbTooltip="{{invoiceInfo.guest_name || 'NA'}}"
                                                            class="text-truncate">{{invoiceInfo.guest_name ||
                                                            'NA'}}</strong></li>
                                                    <li>
                                                        <div class="d-flex">
                                                            <span>Room </span><span
                                                                *ngIf="manualType == 'Tax' && companyData?.company_code== paxEnableCompanyCode">&nbsp;
                                                                / PAX </span>&nbsp; <span> Number</span>
                                                        </div>
                                                        <strong>{{invoiceInfo.room_number}}</strong>
                                                    </li>
                                                    <li><span>Invoice Type</span> <strong>{{invoiceInfo.invoice_type||
                                                            'NA'}}</strong></li>
                                                    <li><span>Invoice Date</span> <strong>{{invoiceInfo.invoice_date |
                                                            date}}</strong></li>
                                                    <li><span>Confirmation No</span>
                                                        <strong>{{invoiceInfo.confirmation_number|| 'NA'}}</strong>
                                                    </li>
                                                    <li *ngIf="manualType !== 'Tax'"><span>Original No</span>
                                                        <strong>{{invoiceInfo.tax_invoice_referrence_number|| 'Not
                                                            Provided'}}</strong>
                                                    </li>
                                                    <li *ngIf="manualType !== 'Tax'"><span>Original Date</span>
                                                        <strong>{{(invoiceInfo.tax_invoice_referrence_date | date )||
                                                            'Not
                                                            Provided'}}</strong>
                                                    </li>
                                                    <!-- <li *ngIf="active === 4" ngbTooltip="{{invoiceInfo.credit_irn_number}}" placement="top"><span>IRN No</span> <strong class="text-truncate">{{invoiceInfo.credit_irn_number|| 'NA'}}</strong> <i *ngIf="invoiceInfo.credit_irn_number" (click)="copyToClipboard(invoiceInfo.credit_irn_number);" [ngClass]="{'ri-clipboard-fill': isCopy, 'ri-clipboard-line':!isCopy}" class="p-ab cursor-pointer"></i></li> -->
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="bg-white each-block shadow-sm">
                                            <div>
                                                <h6><strong>Tax Payer Details </strong>
                                                    <span class="edit"
                                                        *ngIf="invoiceInfo.irn_generated === 'Pending'  || invoiceInfo.irn_generated === 'Error'"
                                                        (click)="updateFromGSPortal()">Update</span>
                                                </h6>
                                            </div>

                                            <div>
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <ul class="list-unstyled">
                                                            <li><span>Legal Name</span> <strong placement="top"
                                                                    ngbTooltip="{{invoiceInfo.legal_name}}"
                                                                    class="text-truncate">{{(invoiceInfo.legal_name) ||
                                                                    'NA'}}</strong></li>
                                                            <li><span>GST Number</span>
                                                                <strong>{{invoiceInfo.gst_number|| 'NA'}}</strong>
                                                            </li>
                                                            <li><span>Address 1 <a
                                                                        *ngIf="invoiceInfo.irn_generated == 'Pending' || invoiceInfo.irn_generated == 'Error' "><i
                                                                            (click)="editAddress1fun(editAddress1)"
                                                                            class="ri-pencil-fill ml-2"
                                                                            style="color: #000; font-size: 15px; cursor: pointer;"></i></a></span>
                                                                <strong placement="top"
                                                                    ngbTooltip="{{invoiceInfo.address_1}}"
                                                                    class="text-truncate">{{(invoiceInfo.address_1 |
                                                                    trim) || 'NA'}}</strong>
                                                            </li>
                                                            <li><span>Location <a
                                                                        *ngIf="invoiceInfo.irn_generated == 'Pending' || invoiceInfo.irn_generated == 'Error' "><i
                                                                            (click)="locationfun(editInvoiceLocation)"
                                                                            class="ri-pencil-fill ml-2"
                                                                            style="color: #000; font-size: 15px; cursor: pointer;"></i></a></span>
                                                                <strong>{{(invoiceInfo.location | trim) ||
                                                                    'NA'}}</strong>
                                                            </li>
                                                            <li *ngIf="invoiceInfo.invoice_type === 'B2B'"><span>Place
                                                                    of Supply <a
                                                                        *ngIf="invoiceInfo.irn_generated == 'Pending' || invoiceInfo.irn_generated == 'Error' "><i
                                                                            (click)="editPOS(editPlaceOfSupply)"
                                                                            class="ri-pencil-fill ml-2"
                                                                            style="color: #000; font-size: 15px; cursor: pointer;"></i></a></span>
                                                                <strong>{{invoiceInfo?.place_of_supply_name}}({{(invoiceInfo.place_of_supply
                                                                    | trim) ||
                                                                    'NA'}})</strong>
                                                            </li>

                                                        </ul>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <ul class="list-unstyled text-right">
                                                            <li><span>Guest Name</span> <strong placement="top"
                                                                    ngbTooltip="{{invoiceInfo.trade_name}}"
                                                                    class="text-truncate">{{(invoiceInfo.trade_name) ||
                                                                    'NA'}}</strong></li>
                                                            <li><span>State code</span>
                                                                <strong>{{stateCode?.state}}({{(invoiceInfo.state_code)
                                                                    ||
                                                                    'NA'}})</strong>
                                                            </li>
                                                            <li><span>Address 2 <a
                                                                        *ngIf="invoiceInfo.irn_generated == 'Pending' || invoiceInfo.irn_generated == 'Error' "><i
                                                                            (click)="editAddress2fun(editAddress2)"
                                                                            class="ri-pencil-fill ml-2"
                                                                            style="color: #000; font-size: 15px; cursor: pointer;"></i></a></span>
                                                                <strong placement="top"
                                                                    ngbTooltip="{{invoiceInfo.address_2}}"
                                                                    class="text-truncate">{{(invoiceInfo.address_2 |
                                                                    trim) || 'NA'}}</strong>
                                                            </li>
                                                            <li><span>Pincode</span> <strong>{{(invoiceInfo.pincode) ||
                                                                    'NA'}}</strong></li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="bg-white each-block shadow-sm">
                                            <div>
                                                <h6><strong>Attachments</strong></h6>
                                            </div>

                                            <div>
                                                <div class="qr text-center">
                                                    <img class="img-fluid"
                                                        *ngIf="invoiceInfo.invoice_category === 'Credit Invoice' && invoiceInfo.invoice_type === 'B2B'"
                                                        [src]="apiDomain + invoiceInfo.credit_qr_code_image" alt="">

                                                    <img class="img-fluid"
                                                        *ngIf="invoiceInfo.invoice_category === 'Debit Invoice' && invoiceInfo.invoice_type === 'B2B'"
                                                        [src]="apiDomain + invoiceInfo.qr_code_image" alt="">


                                                    <img class="img-fluid"
                                                        *ngIf="invoiceInfo.invoice_category === 'Tax Invoice' && invoiceInfo.invoice_type === 'B2B'"
                                                        [src]="apiDomain + invoiceInfo.qr_code_image" alt="">

                                                    <img class="img-fluid" *ngIf="invoiceInfo.invoice_type === 'B2C'"
                                                        [src]="apiDomain + invoiceInfo.b2c_qrimage" alt="">

                                                    <span *ngIf="invoiceInfo.irn_generated === 'Cancelled'"
                                                        class="imgText">
                                                        <h2>Cancelled</h2>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <div class="row irn-card mt-4 no-gutters"
                                    *ngIf="invoiceInfo.irn_generated === 'Success'">
                                    <div class="col-md-8" *ngIf="invoiceInfo.invoice_category === 'Credit Invoice'">
                                        <h5><strong>IRN No : <span>{{invoiceInfo?.credit_irn_number}}
                                                </span></strong></h5>
                                    </div>
                                    <div class="col-md-2 text-right"
                                        *ngIf="invoiceInfo.invoice_category === 'Credit Invoice'">
                                        <h5><strong>Ack No : <span>{{invoiceInfo?.credit_ack_no}}
                                                </span></strong></h5>
                                    </div>
                                    <div class="col-md-2 text-right"
                                        *ngIf="invoiceInfo.invoice_category === 'Credit Invoice'">
                                        <h5><strong>Ack Date : <span>{{invoiceInfo?.credit_ack_date}}
                                                </span></strong></h5>
                                    </div>


                                    <div class="col-md-8"
                                        *ngIf="invoiceInfo.invoice_category === 'Debit Invoice' || invoiceInfo.invoice_category === 'Tax Invoice'">
                                        <h5><strong>IRN No : <span>{{invoiceInfo?.irn_number}}
                                                </span></strong></h5>
                                    </div>
                                    <div class="col-md-2 text-right"
                                        *ngIf="invoiceInfo.invoice_category === 'Debit Invoice' || invoiceInfo.invoice_category === 'Tax Invoice'">
                                        <h5><strong>Ack No : <span>{{invoiceInfo?.ack_no}}
                                                </span></strong></h5>
                                    </div>
                                    <div class="col-md-2 text-right"
                                        *ngIf="invoiceInfo.invoice_category === 'Debit Invoice' || invoiceInfo.invoice_category === 'Tax Invoice'">
                                        <h5><strong>Ack Date : <span>{{invoiceInfo?.ack_date}}
                                                </span></strong></h5>
                                    </div>
                                </div>

                                <div class="row mt-4">
                                    <div class="col-md-12">
                                        <div class="mb-3">



                                            <div class="row">

                                                <div class="col-md-8">
                                                    <div class="d-flex">
                                                        <h5><strong>Invoice Summary</strong></h5>

                                                        <button
                                                            *ngIf="invoiceInfo.irn_generated !== 'Success' && invoiceInfo.irn_generated !== 'Cancelled'"
                                                            (click)="addInvoice()"
                                                            class="btn btn-primary px-3 py-1 ml-2" type="button"><i
                                                                class="ri-add-line"></i></button>

                                                        <button
                                                            *ngIf="(invoiceInfo.irn_generated === 'Pending' && sacCodeDetails?.length && isChecked) || (invoiceInfo.irn_generated === 'Error' && sacCodeDetails?.length && isChecked)"
                                                            (click)="deleteItem()" class="btn btn-danger shadow ml-3"
                                                            type="button">Delete Items</button>

                                                        <button
                                                            *ngIf="(companyData?.auto_adjustment == 'Automatic' && invoiceInfo?.has_credit_items == 'Yes')&&(invoiceInfo.invoice_type === 'B2B' && invoiceInfo.irn_generated == 'Pending' && invoiceInfo.invoice_category !== 'Credit Invoice')"
                                                            (click)="adjustInvoices()"
                                                            class="btn btn-primary px-3 py-1 ml-2" appPermissionButton
                                                            accessType="write" type="button">
                                                            Adjust</button>

                                                        <div class="sync-status"
                                                            *ngIf="companyData?.ezy_gst_module == 1">
                                                            <span *ngIf="invoiceInfo.synced_to_erp == 0">
                                                                <p class="ml-3 mb-0 text-danger non-sync"><i
                                                                        class="ri-close-circle-line"></i> Not Synced</p>
                                                            </span>
                                                            <div *ngIf="invoiceInfo.synced_to_erp == 1"
                                                                class="position-absolute">
                                                                <p class="mb-0 text-success sync"><i
                                                                        class="ri-checkbox-circle-fill"></i> Synced to
                                                                    EzyGST </p>
                                                                <p class="text-right " style="font-size: 13px"><i
                                                                        class="ri-calendar-check-line"></i>
                                                                    {{invoiceInfo?.synced_date |date : ["MMM d y"]}}</p>
                                                            </div>
                                                        </div>
                                                        <div class="ml-3" *ngIf="companyData?.ezy_gst_module == 1">
                                                            <span *ngIf="invoiceInfo.sync_status == 'Error'"
                                                                style="display: flex" class="badge"
                                                                [ngClass]="{'badge-danger':invoiceInfo.sync_status == 'Error'}">
                                                                <div [innerHtml]="invoiceInfo?.sync_message"></div>
                                                            </span>
                                                            <!-- <a (click)="SyncErrorLogs(submodel,invoice)" *ngIf="invoiceInfo?.sync_status == 'Error'">View Error</a> -->
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-4 text-right"
                                                    *ngIf="sacCodeDetails?.length && invoiceInfo.irn_generated !== 'Success'  && invoiceInfo.irn_generated !== 'Cancelled'">
                                                    <button (click)="saveItems()" class="btn btn-primary shadow"
                                                        type="button">Save Items</button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="table-responsive shadow-sm">
                                            <table class="table table-bordered bg-white shadow-sm mb-0">
                                                <thead>
                                                    <tr>
                                                        <th class="text-center"
                                                            *ngIf="invoiceInfo.irn_generated === 'Pending' || invoiceInfo.irn_generated === 'Error'">
                                                            #
                                                        </th>
                                                        <th>#</th>
                                                        <th>Date</th>
                                                        <th>Item Name</th>
                                                        <th>SAC/HSN CODE</th>
                                                        <th class="text-right">Item Value<br><small>(exclusive
                                                                GST)</small></th>

                                                        <th class="p-0">
                                                            <table class="table  border-0 mb-0 text-center no-pad">
                                                                <tr>
                                                                    <th colspan="2">CGST</th>
                                                                </tr>
                                                                <tr class="text-center">
                                                                    <th>Rate</th>
                                                                    <th>Amount</th>
                                                                </tr>
                                                            </table>
                                                        </th>
                                                        <th class="p-0">
                                                            <table class="table  border-0  mb-0 text-center no-pad">
                                                                <tr>
                                                                    <th colspan="2">SGST</th>
                                                                </tr>
                                                                <tr class="text-center">
                                                                    <th>Rate</th>
                                                                    <th>Amount</th>
                                                                </tr>
                                                            </table>
                                                        </th>
                                                        <th class="p-0">
                                                            <table class="table  border-0  mb-0 text-center no-pad">
                                                                <tr>
                                                                    <th colspan="2">IGST</th>
                                                                </tr>
                                                                <tr class="text-center">
                                                                    <th>Rate</th>
                                                                    <th>Amount</th>
                                                                </tr>
                                                            </table>
                                                        </th>

                                                        <!-- <th class="p-0">
                                                            <table class="table  border-0  mb-0 text-center no-pad">
                                                                <tr>
                                                                    <th colspan="2">State CESS</th>
                                                                </tr>
                                                                <tr class="text-center">
                                                                    <th>Rate</th>
                                                                    <th>Amount</th>
                                                                </tr>
                                                            </table>
                                                        </th> -->
                                                        <th class="p-0">
                                                            <table class="table  border-0  mb-0 text-center no-pad">
                                                                <tr>
                                                                    <th colspan="2">Central CESS</th>
                                                                </tr>
                                                                <tr class="text-center">
                                                                    <th>Rate</th>
                                                                    <th>Amount</th>
                                                                </tr>
                                                            </table>
                                                        </th>


                                                        <th class="p-0">
                                                            <table class="table  border-0  mb-0 text-center no-pad">
                                                                <tr>
                                                                    <th colspan="2">VAT</th>
                                                                </tr>
                                                                <tr class="text-center">
                                                                    <th>Rate</th>
                                                                    <th>Amount</th>
                                                                </tr>
                                                            </table>
                                                        </th>
                                                        <th>Total Item Value <br> <small>(Inclusive GST)</small></th>
                                                    </tr>
                                                </thead>
                                                <tbody>

                                                    <tr *ngFor="let item of sacCodeDetails;let i = index"
                                                        [ngClass]="{'bg-danger': item.is_credit_item === 'Yes'}">
                                                        <td>{{i+1}}</td>
                                                        <td
                                                            *ngIf="invoiceInfo.irn_generated === 'Pending' || invoiceInfo.irn_generated === 'Error'">
                                                            <div class="custom-control custom-checkbox">
                                                                <input (change)="deleteItems($event, item)"
                                                                    type="checkbox" class="custom-control-input"
                                                                    id="customCheck{{i}}" name="item{{i}}">
                                                                <label class="custom-control-label"
                                                                    for="customCheck{{i}}"></label>
                                                            </div>
                                                        </td>
                                                        <td>{{item?.date | date:'dd-MM-yyyy'}}</td>
                                                        <td>{{item?.item_name}} <a *ngIf="item?.pos_check"
                                                                (click)="viewBillModel(viewBill,item)"
                                                                class=" ml-2 view-poscheck">
                                                                <i class="ri-eye-fill" ngbTooltip="View POS Check"></i>
                                                            </a>
                                                            <span class="actions-sac"
                                                                *ngIf="invoiceInfo.invoice_type==='B2B'?(invoiceInfo.irn_generated === 'Pending'||invoiceInfo.irn_generated === 'Error'||invoiceInfo.irn_generated === 'Zero Invoice'):(invoiceInfo.irn_generated==='Pending'||invoiceInfo.irn_generated === 'Error'||invoiceInfo.irn_generated === 'Zero Invoice')">
                                                                <div ngbDropdown
                                                                    placement="i===1 ? 'bottom-left' : 'top-left'"
                                                                    class="d-inline-block  mr-2"
                                                                    *ngIf="typeOf(item.sort_order) !== true && sacEditForHICC">
                                                                    <i id="dropdownBasic1" ngbDropdownToggle
                                                                        class="ri-pencil-fill"></i>
                                                                    <div ngbDropdownMenu
                                                                        aria-labelledby="dropdownBasic1">
                                                                        <!-- <button class="px-2" (click)="editSacItem(item)"
                                                                            ngbDropdownItem>Sac/Hsn</button> -->
                                                                        <button class="px-2"
                                                                            (click)="editTempSacItem(item,i)"
                                                                            ngbDropdownItem>Line
                                                                            Item</button>

                                                                        <button class="px-2"
                                                                            *ngIf="item?.is_credit_item === 'No' && item?.quantity == 1"
                                                                            (click)="splitLineItemModel(item,i)"
                                                                            ngbDropdownItem>Split
                                                                            Item</button>

                                                                    </div>
                                                                </div>
                                                            </span>
                                                        </td>
                                                        <td>{{item?.sac_code}}</td>
                                                        <td class="text-right">{{item?.item_value | number:'0.2'}}</td>

                                                        <td>
                                                            <table class="table  border-0  mb-0 text-center no-pad">
                                                                <tr class="no-pad">
                                                                    <td class="text-right">{{item.cgst | number:'0.2'}}%
                                                                    </td>
                                                                    <td>{{item.cgst_amount | number:'0.2'}}</td>
                                                                </tr>
                                                            </table>
                                                        </td>

                                                        <td>
                                                    <tr class="no-pad">
                                                        <td class="text-right">{{item.sgst | number:'0.2'}}%</td>
                                                        <td>{{item.sgst_amount | number:'0.2'}}</td>
                                                    </tr>
                                                    </td>

                                                    <td>
                                                        <tr class="no-pad">
                                                            <td>{{item.igst | number:'0.2'}}%</td>
                                                            <td>{{item.igst_amount | number:'0.2'}}</td>
                                                        </tr>
                                                    </td>
                                                    <!-- <td>
                                                        <tr class="no-pad">
                                                            <td>{{item.state_cess | number:'0.2'}}%</td>
                                                            <td>{{item.state_cess_amount | number:'0.2'}}</td>
                                                        </tr>
                                                    </td> -->
                                                    <td>
                                                        <tr class="no-pad">
                                                            <td>{{item.cess | number:'0.2'}}%</td>
                                                            <td>{{item.cess_amount | number:'0.2'}}</td>
                                                        </tr>
                                                    </td>
                                                    <td>
                                                        <tr class="no-pad">
                                                            <td>{{item.vat | number:'0.2'}}%</td>
                                                            <td>{{item.vat_amount | number:'0.2'}}</td>
                                                        </tr>
                                                    </td>

                                                    <td class="text-right">{{item.item_value_after_gst | number:'0.2'}}
                                                    </td>
                                                    </tr>


                                                </tbody>
                                            </table>

                                            <div *ngIf="!sacCodeDetails.length" class="text-center py-3">
                                                <h6><strong> No Data Found</strong></h6>
                                            </div>

                                        </div>

                                        <div *ngIf="invoiceInfo.sales_amount_before_tax">
                                            <table class="table bg-white shadow-sm" id="total-table">

                                                <tr class="text-right">
                                                    <td colspan="17" class="total"><span>Total Sale </span> </td>
                                                    <td colspan="9" class="text-right"><strong class="total">{{
                                                            invoiceInfo.sales_amount_before_tax |
                                                            number:'0.2'}}</strong></td>
                                                </tr>

                                                <tr class="text-right">
                                                    <td colspan="17" class="total"><span>Add : CGST</span></td>
                                                    <td colspan="9" class="text-right"><strong
                                                            class="total">{{invoiceInfo.invoice_category === 'Credit
                                                            Invoice' ? invoiceInfo.credit_cgst_amount :
                                                            invoiceInfo.cgst_amount |
                                                            number:'0.2'}}</strong></td>
                                                </tr>

                                                <tr class="text-right">
                                                    <td colspan="17" class="total"><span>Add : SGST</span> </td>
                                                    <td colspan="9" class="text-right"><strong
                                                            class="total">{{invoiceInfo.invoice_category === 'Credit
                                                            Invoice' ? invoiceInfo.credit_sgst_amount :
                                                            invoiceInfo.sgst_amount |
                                                            number:'0.2'}}</strong></td>
                                                </tr>

                                                <tr class="text-right">
                                                    <td colspan="17" class="total"><span>Add : IGST</span></td>
                                                    <td colspan="9" class="text-right"><strong
                                                            class="total">{{invoiceInfo.invoice_category === 'Credit
                                                            Invoice' ? invoiceInfo.credit_igst_amount :
                                                            invoiceInfo.igst_amount |
                                                            number:'0.2'}}</strong></td>
                                                </tr>

                                                <tr class="text-right">
                                                    <td colspan="17" class="total"><span>Total Amount : GST</span> </td>
                                                    <td colspan="9" class="text-right"><strong
                                                            class="total">{{invoiceInfo.invoice_category === 'Credit
                                                            Invoice' ? invoiceInfo.credit_gst_amount :
                                                            invoiceInfo.total_gst_amount |
                                                            number:'0.2'}}</strong></td>
                                                </tr>
                                                <tr class="text-right">
                                                    <td colspan="17" class="total"><span>VAT</span> </td>
                                                    <td colspan="9" class="text-right"><strong
                                                            class="total">{{invoiceInfo.invoice_category === 'Credit
                                                            Invoice' ? invoiceInfo.total_credit_vat_amount :
                                                            invoiceInfo.total_vat_amount |
                                                            number:'0.2'}}</strong></td>
                                                </tr>
                                                <!-- <tr class="text-right">
                                                    <td colspan="17" class="total"><span>State CESS</span> </td>
                                                    <td colspan="9" class="text-right"><strong
                                                            class="total">{{invoiceInfo.invoice_category === 'Credit
                                                            Invoice' ? invoiceInfo.total_credit_state_cess_amount :
                                                            invoiceInfo.total_state_cess_amount |
                                                            number:'0.2'}}</strong></td>
                                                </tr> -->
                                                <tr class="text-right">
                                                    <td colspan="17" class="total"><span>Central CESS</span> </td>
                                                    <td colspan="9" class="text-right"><strong
                                                            class="total">{{invoiceInfo.invoice_category === 'Credit
                                                            Invoice' ? invoiceInfo.total_credit_central_cess_amount
                                                            :invoiceInfo.total_central_cess_amount |
                                                            number:'0.2'}}</strong></td>
                                                </tr>

                                                <tr class="text-right">
                                                    <td colspan="17" class="total"><span>Total Amount After Tax :</span>
                                                    </td>
                                                    <td colspan="9" class="text-right"><strong
                                                            class="total">{{invoiceInfo.sales_amount_after_tax |
                                                            number:'0.2'}}</strong></td>
                                                </tr>
                                                <tr class="text-right">
                                                    <td colspan="17" class="total"><span>Difference Amount :</span>
                                                    </td>
                                                    <td colspan="9" class="text-right"><strong
                                                            class="total">{{invoiceInfo.invoice_round_off_amount
                                                            |
                                                            number:'0.2'}}</strong></td>
                                                </tr>
                                            </table>
                                        </div>

                                    </div>
                                </div>

                            </ng-template>
                        </li>
                        <li [ngbNavItem]="2">
                            <a ngbNavLink>GST & SAC Code Summary</a>
                            <ng-template ngbNavContent>
                                <div class="cpx-5">
                                    <div class="row">
                                        <div class="col-md-5">
                                            <div class="summary">
                                                <h6><strong>GST Summary</strong></h6>
                                                <table class="table table-bordered text-center my-3">
                                                    <thead>
                                                        <tr>
                                                            <th>#</th>
                                                            <th>Tax Type</th>
                                                            <th>Tax Percentage</th>
                                                            <th class="text-right">Amount</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr
                                                            *ngFor="let summary of invoiceInfo.gst_summary;let i =index">
                                                            <td>{{i+1}}</td>
                                                            <td>{{summary.tax_type}}</td>
                                                            <td>{{summary.tax_percentage}}%</td>
                                                            <td class="text-right">{{summary.amount | number : '0.2'}}
                                                            </td>
                                                        </tr>

                                                    </tbody>
                                                </table>
                                                <div class="text-center" *ngIf="!invoiceInfo.gst_summary.length">
                                                    <h5><strong>No Data Found</strong></h5>
                                                </div>
                                                <h6 *ngIf="!invoiceInfo.gst_summary.length" class="text-right">
                                                    <strong><small>Total Tax Amount GST</small> :
                                                        {{invoiceInfo.gst_summaryTotal | number : '0.2'}} </strong>
                                                </h6>
                                            </div>
                                        </div>
                                        <div class="col-md-7">
                                            <div class="summary">
                                                <h6><strong>SAC Code Summary</strong></h6>
                                                <div class="table-responsive">
                                                    <table class="table table-bordered text-center bg-white mt-3">
                                                        <thead>
                                                            <tr>
                                                                <th>#</th>
                                                                <th>SAC/HSN CODE</th>
                                                                <th>Type</th>
                                                                <th>SALES</th>
                                                                <th>CGST</th>
                                                                <th>SGST</th>
                                                                <th>IGST</th>
                                                                <!-- <th>State CESS</th> -->
                                                                <th>CESS</th>
                                                                <th>VAT</th>
                                                                <th>Total Amount</th>

                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr
                                                                *ngFor="let sac of invoiceInfo.sac_hsn_based_taxes;let i = index">
                                                                <td>{{i+1}}</td>
                                                                <td>{{sac.sac_hsn_code}}</td>
                                                                <td>{{sac.type}}</td>
                                                                <td>{{sac.amount_before_gst}}</td>
                                                                <td>{{sac.cgst}}</td>
                                                                <td>{{sac.sgst}}</td>
                                                                <td>{{sac.igst}}</td>
                                                                <!-- <td>{{sac.state_cess}}</td> -->
                                                                <td>{{sac.cess}}</td>
                                                                <td>{{sac.vat}}</td>
                                                                <td>{{sac.amount_after_gst}}</td>
                                                            </tr>

                                                        </tbody>
                                                    </table>
                                                    <div class="text-center"
                                                        *ngIf="!invoiceInfo.sac_hsn_based_taxes.length">
                                                        <h5><strong>No Data Found</strong></h5>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="summary">
                                                <table class="table table-striped">
                                                    <thead>
                                                        <tr>
                                                            <th>{{invoiceInfo.amount_before_gst || 'NA'}} <br>
                                                                <small>Debit
                                                                    summary without GST</small>
                                                            </th>
                                                            <th>{{invoiceInfo.credit_value_before_gst || 'NA'}} <br>
                                                                <small> {{invoiceInfo?.has_discount_items ===
                                                                    'Yes'?'Discount Details':'Credit Summary'}} without
                                                                    GST</small>
                                                            </th>
                                                            <th>{{invoiceInfo.pms_invoice_summary_without_gst || 'NA'}}
                                                                <br>
                                                                <small>Invoice summary without GST
                                                                </small>
                                                            </th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr>
                                                            <th>{{invoiceInfo.amount_after_gst || 'NA'}} <br>
                                                                <small>Debit
                                                                    summary with GST</small>
                                                            </th>
                                                            <th>{{invoiceInfo.credit_value_after_gst || 'NA'}} <br>
                                                                <small>{{invoiceInfo?.has_discount_items ===
                                                                    'Yes'?'Discount Details':'Credit Summary'}} with
                                                                    GST</small>
                                                            </th>
                                                            <th>{{invoiceInfo.pms_invoice_summary || 'NA'}} <br>
                                                                <small>Invoice summary with GST.
                                                                </small>
                                                            </th>
                                                        </tr>

                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </ng-template>
                        </li>

                        <li [ngbNavItem]="3">
                            <a ngbNavLink>E-{{manualType}} Invoice</a>
                            <ng-template ngbNavContent *ngIf="this.companyData.company_code === 'HINDIA-01'">
                                <div class="pt-3 summary preview " id="section-to-print">
                                    <div>
                                        <!-- <div class="text-center mb-3">
                                      <span (click)="InvoicePdf('tax')" class="badge cursor-pointer badge-pill badge-primary py-2 px-3">Tax Invoice</span>
                                      <span  (click)="InvoicePdf('credit')" *ngIf="invoiceInfo?.has_credit_items === 'Yes'" class="badge cursor-pointer badge-pill badge-secondary py-2 ml-3 px-3">Credit Invoice</span>
                                  </div> -->
                                    </div>


                                    <div class="min-h">
                                        <div>
                                            <div class="row mb-2">
                                                <div class="col-md-6">
                                                    <h5 class="text-capitalize text-primary"><strong>{{invoicetypeName ?
                                                            invoicetypeName : 'Tax'}} Invoice</strong></h5>

                                                </div>
                                                <div class="col-md-6 text-right section-to-print" id="pdfBtn">
                                                    <button (click)="printPdf()" class="btn btn-primary py-1"
                                                        type="button">Print</button>
                                                </div>
                                            </div>

                                            <div class="">

                                                <div>
                                                    <table class="table mb-0">
                                                        <tbody>
                                                            <tr>
                                                                <td width="60%" style="vertical-align: middle;">
                                                                    <div class="logo">
                                                                        <ng-template #logoBlock>
                                                                            <div class="mb-3"
                                                                                *ngIf="invoiceInfo?.company_logo">
                                                                                <img class="img-fluid"
                                                                                    [src]="apiDomain + invoiceInfo?.company_logo"
                                                                                    alt="">
                                                                            </div>
                                                                        </ng-template>
                                                                        <div *ngIf="companyData?.custom_e_tax_invoice_logo == 1; else logoBlock"
                                                                            class="mb-4">
                                                                            <img [src]="apiDomain + companyData?.custom_e_tax_invoice_logo_image"
                                                                                alt=" " width="40%">
                                                                        </div>
                                                                        <p><span class="font-weight-bold">IRN No :
                                                                            </span> {{invoiceInfo.irn_number}}</p>
                                                                        <div class="row">
                                                                            <div class="col-4">
                                                                                <p><span class="font-weight-bold">Category
                                                                                        Code :</span>
                                                                                    {{invoiceInfo.suptyp}}</p>
                                                                            </div>
                                                                            <div class="col-4">
                                                                                <p class="float-left"><span
                                                                                        class="font-weight-bold"> Ack.
                                                                                        No :</span>
                                                                                    {{invoiceInfo.ack_no}}</p>
                                                                            </div>
                                                                            <div class="col-4">
                                                                                <p class="float-right"><span
                                                                                        class="font-weight-bold"> Ack.
                                                                                        Date :</span>
                                                                                    {{invoiceInfo.ack_date}}</p>
                                                                            </div>
                                                                        </div>

                                                                    </div>
                                                                </td>
                                                                <td width="40%" align="right">
                                                                    <div class="qr">
                                                                        <img class="img-fluid"
                                                                            [src]="apiDomain + invoiceInfo.qr_code_image"
                                                                            alt="">
                                                                        <p class="qrCode font-weight-bold ">QR Code :
                                                                        </p>
                                                                        <span class="imgTextPMS"
                                                                            *ngIf="invoiceInfo.irn_generated === 'Cancelled'">
                                                                            <h1>Cancelled</h1>
                                                                        </span>
                                                                    </div>

                                                                    <div class="qr">
                                                                        <img class="img-fluid"
                                                                            [src]="apiDomain + invoiceInfo.credit_qr_code_image"
                                                                            alt="">
                                                                    </div>
                                                                    <div class="qr">
                                                                        <img class="img-fluid"
                                                                            [src]="apiDomain + invoiceInfo.b2c_qrimage"
                                                                            alt="">
                                                                    </div>
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                                <div class="extab mb-2 border">
                                                    <h5 class="text-center font-weight-bold bg-primary">TAX INVOICE</h5>
                                                    <h6 class="text-center">GSTIN: {{invoiceInfo?.company_gst}}</h6>
                                                    <h6 class="text-center">PAN:
                                                        {{invoiceInfo?.company_gst?.substring(2).slice(0, -3)}}</h6>
                                                    <table class="table mb-0">
                                                        <tbody>
                                                            <tr>
                                                                <td>
                                                                    <p><span class="font-weight-bold">Invoice No:
                                                                        </span>{{invoiceInfo.invoice_number}}</p>
                                                                </td>
                                                                <td>
                                                                    <p><span class="font-weight-bold">Transport
                                                                            Mode:</span></p>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td>
                                                                    <p><span class="font-weight-bold">Invoice
                                                                            date:</span> {{invoiceInfo.invoice_date}}
                                                                    </p>
                                                                </td>
                                                                <td>
                                                                    <p><span class="font-weight-bold">Vehicle
                                                                            number:</span></p>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td class="borderZero">
                                                                    <table class="table m-0">
                                                                        <tbody>
                                                                            <tr>
                                                                                <td><span
                                                                                        class="font-weight-bold">Reverse
                                                                                        Charge (Y/N):</span> </td>
                                                                                <td></td>
                                                                            </tr>
                                                                        </tbody>
                                                                    </table>
                                                                </td>
                                                                <td>
                                                                    <p><span class="font-weight-bold">Date of
                                                                            Supply:</span>{{invoiceInfo.irn_generated_time}}
                                                                    </p>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td class="borderZero">
                                                                    <table class="table m-0">
                                                                        <tbody>
                                                                            <tr>
                                                                                <td><span
                                                                                        class="font-weight-bold">State:</span>
                                                                                    <!-- {{invoiceInfo?.company_state_code}} -->
                                                                                    <span
                                                                                        *ngIf="invoiceInfo.state_code<10">
                                                                                        {{invoiceInfo?.place_of_supply_name}}({{('0'+invoiceInfo.place_of_supply
                                                                                        | trim) ||
                                                                                        'NA'}})</span>
                                                                                    <span
                                                                                        *ngIf="invoiceInfo.state_code>=10">
                                                                                        {{invoiceInfo?.place_of_supply_name}}({{(invoiceInfo.place_of_supply
                                                                                        | trim) ||
                                                                                        'NA'}})</span>
                                                                                </td>
                                                                                <td><span
                                                                                        class="font-weight-bold">Code:</span>
                                                                                </td>
                                                                                <td *ngIf="invoiceInfo.state_code<10">
                                                                                    {{('0'+invoiceInfo.state_code |
                                                                                    trim) || 'NA'}}</td>
                                                                                <td *ngIf="invoiceInfo.state_code>=10">
                                                                                    {{(invoiceInfo.state_code |
                                                                                    trim) || 'NA'}}</td>
                                                                            </tr>
                                                                        </tbody>
                                                                    </table>
                                                                </td>
                                                                <td>
                                                                    <p><span class="font-weight-bold">Place of Supply:
                                                                        </span><span
                                                                            *ngIf="invoiceInfo.state_code<10">{{"0"+invoiceInfo?.company_place_of_supply}}</span>
                                                                        <span
                                                                            *ngIf="invoiceInfo.state_code>=10">{{invoiceInfo?.company_place_of_supply}}</span>
                                                                    </p>
                                                                </td>
                                                            </tr>
                                                        </tbody>

                                                    </table>

                                                    <table class="table mb-0">
                                                        <thead class="bgColor">
                                                            <tr>
                                                                <th class="text-center w-50">Seller</th>
                                                                <th class="text-center">Buyer</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr>
                                                                <td rowspan="5">
                                                                    <p><span class="font-weight-bold">CIN NO :
                                                                            U55101DL2009PTC189886 </span><br> WAVE
                                                                        HOSPITALITY PRIVATE LIMITED REG OFF : HOTEL
                                                                        HOLIDAY INN ASSET AREA-12, HOSPITALITY DISTRICT
                                                                        AEROCITY, DELHI
                                                                        INTERNATIONAL AIRPORT MAHIPALPUR, NEW
                                                                        DELHI-110037, INDIA T: +91 11 4222 2000 F: 4222
                                                                        2020
                                                                        <br> Email : dinesh@wavehospitality.com
                                                                    </p>
                                                                </td>
                                                                <td>
                                                                    <p><span class="font-weight-bold">Name:</span>
                                                                        {{invoiceInfo.legal_name}}</p>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <!-- <td>
                                                                  <p><span class="font-weight-bold">Address:</span></p>
                                                              </td> -->
                                                                <td>
                                                                    <p><span
                                                                            class="font-weight-bold">Address:</span>{{invoiceInfo.address_1}}
                                                                        , {{invoiceInfo.address_2 !==
                                                                        invoiceInfo.address_1
                                                                        ?invoiceInfo.address_2+',':''}},
                                                                        {{invoiceInfo.location}},
                                                                        {{invoiceInfo.pincode}} {{invoiceInfo.email}}
                                                                    </p>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <!-- <td>
                                                                  <p><span class="font-weight-bold">GSTIN:</span> </p>
                                                              </td> -->
                                                                <td>
                                                                    <p><span
                                                                            class="font-weight-bold">GSTIN:</span>{{invoiceInfo?.gst_number}}
                                                                    </p>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <!-- <td>
                                                                  <p></p>
                                                              </td> -->
                                                                <td>
                                                                    <p><span class="font-weight-bold">PAN
                                                                            :</span>{{invoiceInfo.gst_number?.substring(2).slice(0,
                                                                        -3)}}</p>
                                                                </td>
                                                            </tr>

                                                            <tr>
                                                                <td class="borderZero">
                                                                    <table class="table m-0 ">
                                                                        <tbody>
                                                                            <tr>
                                                                                <td><span
                                                                                        class="font-weight-bold">State:</span>
                                                                                    <span
                                                                                        *ngIf="invoiceInfo.state_code<10">
                                                                                        {{invoiceInfo?.place_of_supply_name}}({{('0'+invoiceInfo.place_of_supply
                                                                                        | trim) ||
                                                                                        'NA'}})</span>
                                                                                    <span
                                                                                        *ngIf="invoiceInfo.state_code>=10">
                                                                                        {{invoiceInfo?.place_of_supply_name}}({{(invoiceInfo.place_of_supply
                                                                                        | trim) ||
                                                                                        'NA'}})</span>
                                                                                </td>
                                                                                <td class="font-weight-bold">Code</td>
                                                                                <td
                                                                                    *ngIf="invoiceInfo?.place_of_supply<10">
                                                                                    {{'0'+invoiceInfo?.place_of_supply}}
                                                                                </td>
                                                                                <td
                                                                                    *ngIf="invoiceInfo?.place_of_supply>=10">
                                                                                    {{invoiceInfo?.place_of_supply}}
                                                                                </td>
                                                                            </tr>
                                                                        </tbody>
                                                                    </table>
                                                                </td>
                                                            </tr>
                                                        </tbody>

                                                    </table>

                                                    <table class="table table-bordered bg-white shadow-sm mb-0">
                                                        <thead class="bgColor">
                                                            <tr>
                                                                <!-- <th>S. No.</th> -->
                                                                <th>Product Description</th>
                                                                <th>SAC Code</th>
                                                                <th>UOM</th>

                                                                <th>Quantity/Unit</th>
                                                                <th>Rate (INR)</th>
                                                                <th>Amount</th>
                                                                <th>Discount</th>
                                                                <th>Taxable Value</th>
                                                                <th class="p-0 borderZero">
                                                                    <table class="table  mb-0 text-center no-pad">
                                                                        <tr>
                                                                            <th colspan="2">IGST</th>
                                                                        </tr>
                                                                        <tr class="text-center">
                                                                            <th>Rate</th>
                                                                            <th>Amount</th>
                                                                        </tr>
                                                                    </table>
                                                                </th>
                                                                <th class="p-0 borderZero">
                                                                    <table class="table  mb-0 text-center no-pad">
                                                                        <tr>
                                                                            <th colspan="2">CGST</th>
                                                                        </tr>
                                                                        <tr class="text-center">
                                                                            <th>Rate</th>
                                                                            <th>Amount</th>
                                                                        </tr>
                                                                    </table>
                                                                </th>
                                                                <th class="p-0 borderZero">
                                                                    <table class="table    mb-0 text-center no-pad">
                                                                        <tr>
                                                                            <th colspan="2">SGST</th>
                                                                        </tr>
                                                                        <tr class="text-center">
                                                                            <th>Rate</th>
                                                                            <th>Amount</th>
                                                                        </tr>
                                                                    </table>
                                                                </th>
                                                                <th>Total</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr *ngFor="let item of invoiceInfo.items; let i = index">
                                                                <!-- <td *ngIf="(item.item_mode === 'Debit' || item.item_mode === 'Credit') && item.type === 'Included'">
          {{i+1}}</td> -->
                                                                <!-- <td style="min-width: 80px;" *ngIf="(item.item_mode === 'Debit' || item.item_mode === 'Credit') && item.type === 'Included'">
                                                      {{i}}</td> -->
                                                                <td
                                                                    *ngIf="(item.item_mode === 'Debit' || item.item_mode === 'Credit') && item.type === 'Included'">
                                                                    {{item.description}} <br /> <small
                                                                        style="font-style: italic;"><b>{{item?.item_reference}}</b></small>

                                                                </td>
                                                                <td
                                                                    *ngIf="(item.item_mode === 'Debit' || item.item_mode === 'Credit') && item.type === 'Included'">
                                                                    {{item.sac_code}}
                                                                </td>
                                                                <td
                                                                    *ngIf="(item.item_mode === 'Debit' || item.item_mode === 'Credit') && item.type === 'Included'">
                                                                    {{item.unit_of_measurement}}
                                                                </td>
                                                                <td *ngIf="(item.item_mode === 'Debit' || item.item_mode === 'Credit') && item.type === 'Included'"
                                                                    class="text-center">
                                                                    <!-- {{item.item_value}} -->
                                                                    {{item.quantity}}
                                                                </td>
                                                                <td *ngIf="(item.item_mode === 'Debit' || item.item_mode === 'Credit') && item.type === 'Included'"
                                                                    class="text-center">
                                                                    {{item.item_value/item.quantity | number : '0.2'}}
                                                                </td>
                                                                <td *ngIf="(item.item_mode === 'Debit' || item.item_mode === 'Credit') && item.type === 'Included'"
                                                                    class="text-right">
                                                                    {{item.item_value | number : '0.2'}}
                                                                </td>
                                                                <!-- <td *ngIf="(item.item_mode === 'Debit' || item.item_mode === 'Credit') && item.type === 'Included'" class="text-right">
                                                                  {{item.sgst_amount + item.igst_amount + item.cgst_amount | number : '0.2'}}
                                                              </td> -->
                                                                <td *ngIf="(item.item_mode === 'Debit' || item.item_mode === 'Credit') && item.type === 'Included'"
                                                                    class="text-right">
                                                                    <p *ngIf="item.discount_value !=0">
                                                                        {{item.discount_value }}</p>
                                                                </td>
                                                                <!-- <td *ngIf="(item.item_mode === 'Debit' || item.item_mode === 'Credit') && item.type === 'Included'" class="text-right">
                                                      {{item.gst_rate}} %
                                                  </td> -->
                                                                <td *ngIf="(item.item_mode === 'Debit' || item.item_mode === 'Credit') && item.type === 'Included'"
                                                                    class="text-right">
                                                                    {{item.item_taxable_value | number : '0.2'}}
                                                                </td>
                                                                <td *ngIf="(item.item_mode === 'Debit' || item.item_mode === 'Credit') && item.type === 'Included'"
                                                                    class="borderZero">
                                                                    <table class="table    mb-0 text-center no-pad">
                                                                        <tr class="text-center">
                                                                            <th>{{item.igst}} %</th>
                                                                            <th>{{item.igst_amount | number : '0.2'}}
                                                                            </th>
                                                                        </tr>
                                                                    </table>
                                                                </td>
                                                                <td *ngIf="(item.item_mode === 'Debit' || item.item_mode === 'Credit') && item.type === 'Included'"
                                                                    class="borderZero">
                                                                    <table class="table    mb-0 text-center no-pad">
                                                                        <tr class="text-center">
                                                                            <th>{{item.cgst}} %</th>
                                                                            <th>{{item.cgst_amount | number : '0.2'}}
                                                                            </th>
                                                                        </tr>
                                                                    </table>
                                                                </td>
                                                                <td *ngIf="(item.item_mode === 'Debit' || item.item_mode === 'Credit') && item.type === 'Included'"
                                                                    class="borderZero">
                                                                    <table class="table    mb-0 text-center no-pad">
                                                                        <tr class="text-center">
                                                                            <th>{{item.sgst}} %</th>
                                                                            <th>{{item.sgst_amount | number : '0.2'}}
                                                                            </th>
                                                                        </tr>
                                                                    </table>
                                                                </td>
                                                                <td *ngIf="(item.item_mode === 'Debit' || item.item_mode === 'Credit') && item.type === 'Included'"
                                                                    class="text-right">
                                                                    {{item.item_value_after_gst}}
                                                                </td>
                                                                <!-- <td *ngIf="(item.item_mode === 'Debit' || item.item_mode === 'Credit') && item.type === 'Included'" class="text-right">
                                                      {{item.state_cess_amount}}</td>
                                                  <td *ngIf="(item.item_mode === 'Debit' || item.item_mode === 'Credit') && item.type === 'Included'" class="text-right">
                                                      {{item.cess_amount}}</td>
                                                  <td *ngIf="(item.item_mode === 'Debit' || item.item_mode === 'Credit') && item.type === 'Included'" class="text-right">
                                                      {{item.item_value_after_gst | number : '0.2'}}
                                                  </td> -->
                                                            </tr>

                                                            <tr>
                                                                <td colspan="3" class="text-center font-weight-bold">
                                                                    Total</td>

                                                                <td class="font-weight-bold text-center">{{
                                                                    getTotal('quantity') }}</td>
                                                                <td></td>
                                                                <td></td>
                                                                <!-- <td class="font-weight-bold text-right">{{invoiceInfo.sgst_amount + invoiceInfo.igst_amount + invoiceInfo.cgst_amount | number : '0.2'}}</td> -->
                                                                <td></td>
                                                                <td class="font-weight-bold text-right">
                                                                    {{(invoiceInfo?.invoice_category==='Credit Invoice'?
                                                                    '-'+invoiceInfo?.credit_value_before_gst
                                                                    :invoiceInfo?.amount_before_gst) | number : '0.2'}}
                                                                </td>
                                                                <td class="borderZero">
                                                                    <table class="table " style="margin-top: -10px;">
                                                                        <tbody>
                                                                            <tr>
                                                                                <td class="w-50"></td>
                                                                                <td class="font-weight-bold ">
                                                                                    <p class="p-0">
                                                                                        {{invoiceInfo?.igst_amount |
                                                                                        number : '0.2'}}</p>
                                                                                </td>
                                                                            </tr>
                                                                        </tbody>
                                                                    </table>
                                                                </td>
                                                                <td class="borderZero">
                                                                    <table class="table " style="margin-top: -10px;">
                                                                        <tbody>
                                                                            <tr>
                                                                                <td class="w-50"></td>
                                                                                <td class="font-weight-bold ">
                                                                                    <p class="p-0">
                                                                                        {{invoiceInfo?.cgst_amount |
                                                                                        number : '0.2'}}</p>
                                                                                </td>
                                                                            </tr>
                                                                        </tbody>
                                                                    </table>
                                                                </td>
                                                                <td class="borderZero">
                                                                    <table class="table " style="margin-top: -10px;">
                                                                        <tbody>
                                                                            <tr>
                                                                                <td class="w-50"></td>
                                                                                <td class="font-weight-bold ">
                                                                                    <p class="p-0">
                                                                                        {{invoiceInfo?.sgst_amount |
                                                                                        number : '0.2'}}</p>
                                                                                </td>
                                                                            </tr>
                                                                        </tbody>
                                                                    </table>
                                                                </td>
                                                                <td class="font-weight-bold text-right">
                                                                    {{invoiceInfo?.sales_amount_after_tax| number :
                                                                    '0.2'}}</td>
                                                            </tr>

                                                            <tr
                                                                *ngIf="(sez || invoiceInfo.irn_generated == 'Success') && companyData.show_application_reference_number_in_etax == 1">
                                                                <td colspan="8" class="font-weight-bold">
                                                                    <div *ngIf="invoiceInfo.suptyp == 'SEZWP'">
                                                                        <p>SEZWP -
                                                                            {{companyData.sezwp_terms_and_conditions}}
                                                                        </p>
                                                                    </div>
                                                                    <div *ngIf="invoiceInfo.suptyp == 'SEZWOP'">
                                                                        <p>SEZWOP -
                                                                            {{companyData.sezwop_terms_and_conditions }}
                                                                        </p>
                                                                    </div>
                                                                </td>
                                                                <td colspan="4" class="font-weight-bold">
                                                                    <div class='text-right'>
                                                                        <p>Application Reference Number -
                                                                            {{invoiceInfo?.company_application_reference_number}}
                                                                        </p>
                                                                    </div>
                                                                    <div class='text-right'>
                                                                        <p>Date of filing -
                                                                            {{invoiceInfo?.company_data_filing}}</p>
                                                                    </div>
                                                                </td>
                                                            </tr>

                                                            <tr>
                                                                <td colspan="8" class="text-center font-weight-bold">
                                                                    Total Invoice amount in words</td>
                                                                <td colspan="2" class="font-weight-bold">Total Amount
                                                                    before Tax</td>
                                                                <td colspan="2" class="text-right">
                                                                    {{(invoiceInfo?.invoice_category==='Credit Invoice'?
                                                                    '-'+invoiceInfo?.credit_value_before_gst
                                                                    :invoiceInfo?.amount_before_gst) | number : '0.2'}}
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td colspan="8" rowspan="4"
                                                                    class="font-weight-bold text-center">
                                                                    {{invoiceInfo?.sales_amount_after_tax | amountToWord
                                                                    }}</td>
                                                                <td colspan="2" class="font-weight-bold">Add: IGST</td>
                                                                <td colspan="2" class="text-right">
                                                                    {{invoiceInfo?.igst_amount | number : '0.2'}}</td>
                                                            </tr>
                                                            <tr>
                                                                <td colspan="2" class="font-weight-bold">Add: CGST</td>
                                                                <td colspan="2" class="text-right">
                                                                    {{invoiceInfo?.cgst_amount | number : '0.2'}}</td>
                                                            </tr>
                                                            <tr>
                                                                <td colspan="2" class="font-weight-bold">Add: SGST</td>
                                                                <td colspan="2" class="text-right">
                                                                    {{invoiceInfo?.sgst_amount | number : '0.2'}}</td>
                                                            </tr>
                                                            <tr>
                                                                <td colspan="2" class="font-weight-bold">Total Tax
                                                                    Amount</td>
                                                                <td colspan="2" class="text-right">
                                                                    {{invoiceInfo.sgst_amount + invoiceInfo.igst_amount
                                                                    + invoiceInfo.cgst_amount | number : '0.2'}}</td>
                                                            </tr>
                                                            <tr>
                                                                <td colspan="8">
                                                                    <p>Generated By : WAVE HOSPITALITY PRIVATE LIMITED
                                                                    </p>
                                                                </td>
                                                                <td colspan="2" class="font-weight-bold">Total Amount
                                                                    after Tax:</td>
                                                                <td colspan="2" class="text-right">
                                                                    {{invoiceInfo?.sales_amount_after_tax| number :
                                                                    '0.2'}}</td>
                                                            </tr>
                                                            <tr>
                                                                <td colspan="8">
                                                                    <p class="font-weight-bold text-center">Bank details
                                                                        of Wave Hospitality</p>
                                                                </td>
                                                                <!-- <td colspan="2"></td> -->
                                                                <td colspan="2" class="font-weight-bold">GST on Reverse
                                                                    Charge</td>
                                                                <td colspan="2" class="text-right">0</td>
                                                            </tr>
                                                            <tr>
                                                                <td colspan="4" class="font-weight-bold">Benificiay Name
                                                                    :</td>
                                                                <td colspan="4" class="font-weight-bold">Bank IFSC:
                                                                </td>
                                                                <td colspan="4">
                                                                    <p><small>Ceritified that the particulars given
                                                                            above are true and correct</small></p>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td colspan="4" class="font-weight-bold">Bank A/C No:
                                                                </td>
                                                                <td colspan="4" class="font-weight-bold">BRANCH :</td>
                                                                <td colspan="4">
                                                                    <p class="font-weight-bold text-center">For Wave
                                                                        Hospitality Private Limited</p>
                                                                </td>
                                                            </tr>

                                                            <tr>
                                                                <td colspan="5">
                                                                    <p class="font-weight-bold text-center">Terms &
                                                                        conditions</p>
                                                                </td>
                                                                <td colspan="3"></td>
                                                                <td colspan="4"></td>
                                                            </tr>
                                                            <tr>
                                                                <td colspan="5"></td>
                                                                <td colspan="3">Common Seal</td>
                                                                <td colspan="4">Authorised signatory</td>
                                                            </tr>
                                                        </tbody>

                                                    </table>

                                                </div>


                                            </div>
                                        </div>
                                    </div>



                                </div>

                            </ng-template>

                            <ng-template ngbNavContent *ngIf="this.companyData.company_code != 'HINDIA-01'">

                                <!-- Potrait format start-->
                                <div *ngIf="this.companyData?.e_tax_format == 'Portrait'" class="row preview"
                                    id="section-to-print">
                                    <div class="col-md-12">

                                    </div>
                                    <div class="col-md-12">
                                        <div class="shadow-sm each-block bg-white" style="overflow:hidden">
                                            <div class="">

                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <h5 class="text-capitalize text-primary"><strong>{{manualType}}
                                                                Invoice</strong>
                                                        </h5>

                                                        <!-- <p class="mb-0"><strong>{{companyData.e_tax_format}}</strong>
                                                        </p> -->
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="d-flex justify-content-end mb-2">
                                                            <!-- <button *ngIf="this.companyData.e_tax_format == 'Landscape'" class="btn btn-primary btn-sm  mr-2" (click)="this.companyData.e_tax_format = 'Portrait'">Portrait</button>
                                                            <button *ngIf="this.companyData.e_tax_format == 'Portrait'" class="btn btn-primary btn-sm  mr-2" (click)="this.companyData.e_tax_format = 'Landscape'">Landscape</button> -->

                                                            <button
                                                                *ngIf="eTaxInvoiceDownloadBtn && ((invoiceInfo?.irn_generated === 'Success' || invoiceInfo?.irn_generated === 'Cancelled'))"
                                                                (click)="downlaod_e_tax_invoice()"
                                                                class="btn btn-sm btn-primary mr-2"
                                                                type="button">Download e-tax</button>

                                                            <button (click)="print()"
                                                                class="btn btn-sm btn-success mr-2" type="button"><i
                                                                    class="ri-printer-line"></i> Print </button>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div>

                                                    <table class="table mb-0">
                                                        <tbody>
                                                            <tr>
                                                                <td width="50%" style="vertical-align: middle;">
                                                                    <div class="logo">

                                                                        <ng-template #logoBlock>
                                                                            <div class="mb-3"
                                                                                *ngIf="invoiceInfo?.company_logo">
                                                                                <img class="img-fluid"
                                                                                    [src]="apiDomain + invoiceInfo?.company_logo"
                                                                                    alt="">
                                                                            </div>
                                                                        </ng-template>
                                                                        <div *ngIf="invoiceInfo?.custom_e_tax_invoice_logo == 1; else logoBlock"
                                                                            class="mb-4">
                                                                            <img [src]="apiDomain + invoiceInfo?.company_custom_e_tax_invoice_logo_image"
                                                                                alt=" " width="60%">
                                                                        </div>

                                                                        <div>
                                                                            <address>
                                                                                <b>
                                                                                    <p>{{invoiceInfo?.company_name}}<br>
                                                                                        {{invoiceInfo.company_legal_name}}
                                                                                        <br>
                                                                                        {{invoiceInfo?.company_address_1}}
                                                                                        ,{{invoiceInfo?.company_address_2}}
                                                                                        ,
                                                                                        {{invoiceInfo?.company_location}},
                                                                                        {{invoiceInfo?.company_pincode}}
                                                                                    </p>
                                                                                </b>
                                                                            </address>
                                                                        </div>



                                                                    </div>
                                                                </td>
                                                                <td width="50%" align="right">
                                                                    <div class="qr">
                                                                        <img class="img-fluid"
                                                                            [src]="apiDomain + invoiceInfo?.qr_code_image"
                                                                            alt="">
                                                                        <span class="imgTextPMS"
                                                                            *ngIf="invoiceInfo.irn_generated === 'Cancelled'">
                                                                            <h1>Cancelled</h1>
                                                                        </span>
                                                                    </div>

                                                                    <div class="qr">
                                                                        <img class="img-fluid"
                                                                            [src]="apiDomain + invoiceInfo.credit_qr_code_image"
                                                                            alt="">
                                                                    </div>
                                                                    <div class="qr">
                                                                        <img class="img-fluid"
                                                                            [src]="apiDomain + invoiceInfo.b2c_qrimage"
                                                                            alt="">
                                                                    </div>

                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>

                                                <div>
                                                    <table class="table mb-0">
                                                        <tbody>
                                                            <tr>
                                                                <td width="100%">
                                                                    <div class="border">
                                                                        <div class="heading">
                                                                            <h4><strong>1. e-Invoice Details</strong>
                                                                            </h4>
                                                                        </div>
                                                                        <div class="c-p-8">
                                                                            <table
                                                                                *ngIf="invoiceInfo.invoice_category === 'Tax Invoice'">
                                                                                <tr>
                                                                                    <td><strong>IRN</strong> :
                                                                                        {{invoiceInfo.irn_number}}
                                                                                    </td>
                                                                                    <td><strong>Ack. No </strong> :
                                                                                        {{invoiceInfo.ack_no}}
                                                                                    </td>
                                                                                    <td><strong>Ack. Date </strong> :
                                                                                        {{invoiceInfo.ack_date | date}}
                                                                                    </td>
                                                                                </tr>
                                                                            </table>
                                                                            <table
                                                                                *ngIf="invoiceInfo.invoice_category === 'Credit Invoice'">
                                                                                <tr>
                                                                                    <td><strong>IRN</strong> :
                                                                                        {{invoiceInfo.credit_irn_number}}
                                                                                    </td>
                                                                                    <td><strong>Ack. No </strong> :
                                                                                        {{invoiceInfo.credit_ack_no}}
                                                                                    </td>
                                                                                    <td><strong>Ack. Date </strong> :
                                                                                        {{invoiceInfo.credit_ack_date |
                                                                                        date}}
                                                                                    </td>
                                                                                </tr>
                                                                            </table>
                                                                            <table
                                                                                *ngIf="invoiceInfo.invoice_category === 'Debit Invoice'">
                                                                                <tr>
                                                                                    <td><strong>IRN</strong> :
                                                                                        {{invoiceInfo.irn_number}}
                                                                                    </td>
                                                                                    <td><strong>Ack. No </strong> :
                                                                                        {{invoiceInfo.ack_no}}
                                                                                    </td>
                                                                                    <td><strong>Ack. Date </strong> :
                                                                                        {{invoiceInfo.ack_date | date}}
                                                                                    </td>
                                                                                </tr>
                                                                            </table>
                                                                        </div>
                                                                    </div>
                                                                </td>
                                                            </tr>
                                                            <tr class="bgClr">
                                                                <td width="100%">
                                                                    <div class="border">
                                                                        <div class="heading">
                                                                            <h4><strong>Original Invoice
                                                                                    Details</strong>
                                                                            </h4>
                                                                        </div>
                                                                        <div class="c-p-8">

                                                                            <table
                                                                                *ngIf="invoiceInfo.invoice_category === 'Credit Invoice'">
                                                                                <tr>
                                                                                    <td><strong>Invoice Number</strong>
                                                                                        :
                                                                                        {{invoiceInfo.tax_invoice_referrence_number}}
                                                                                    </td>

                                                                                    <td><strong>Invoice Date </strong> :
                                                                                        {{invoiceInfo.tax_invoice_referrence_date
                                                                                        | date}}
                                                                                    </td>
                                                                                </tr>
                                                                            </table>
                                                                            <table
                                                                                *ngIf="invoiceInfo.invoice_category === 'Debit Invoice'">
                                                                                <tr>
                                                                                    <td><strong>Invoice Number</strong>
                                                                                        :
                                                                                        {{invoiceInfo.tax_invoice_referrence_number}}
                                                                                    </td>

                                                                                    <td><strong>Invoice Date </strong> :
                                                                                        {{invoiceInfo.tax_invoice_referrence_date
                                                                                        | date}}
                                                                                    </td>
                                                                                </tr>
                                                                            </table>
                                                                        </div>
                                                                    </div>
                                                                </td>
                                                            </tr>

                                                        </tbody>
                                                    </table>
                                                </div>


                                                <div>
                                                    <table class="table mb-0">
                                                        <tbody>
                                                            <tr>
                                                                <td width="100%">
                                                                    <div class="border">
                                                                        <div class="heading">
                                                                            <h4><strong>2. Transaction Details</strong>
                                                                            </h4>
                                                                        </div>
                                                                        <div class="c-p-8">
                                                                            <table>
                                                                                <tr>
                                                                                    <td width="33.33%">
                                                                                        <strong>Category</strong> :
                                                                                        {{invoiceInfo?.invoice_type}}
                                                                                    </td>
                                                                                    <td width="33.33%"><strong>Invoice
                                                                                            No </strong> :
                                                                                        {{invoiceInfo?.name}} </td>
                                                                                    <td width="33.33%"> <strong>Guest
                                                                                            Name </strong> :
                                                                                        {{invoiceInfo?.guest_name}}
                                                                                    </td>
                                                                                </tr>

                                                                            </table>

                                                                            <table class="">
                                                                                <tr>
                                                                                    <td width="33.33%"><strong>Document
                                                                                            Type </strong> :
                                                                                        {{invoiceInfo?.invoice_category}}
                                                                                    </td>
                                                                                    <td width="33.33%"><strong>Document
                                                                                            Date </strong> :
                                                                                        {{invoiceInfo?.invoice_date}}
                                                                                    </td>
                                                                                    <td width="33.33%"><strong>Room
                                                                                            <span
                                                                                                *ngIf="manualType == 'Tax' && companyData?.company_code== paxEnableCompanyCode">/
                                                                                                PAX</span> No </strong>
                                                                                        : {{invoiceInfo?.room_number}}
                                                                                    </td>
                                                                                </tr>
                                                                            </table>
                                                                        </div>
                                                                    </div>
                                                                </td>
                                                            </tr>

                                                        </tbody>
                                                    </table>
                                                </div>

                                                <div>
                                                    <table class="table mb-0">
                                                        <tbody>
                                                            <tr>
                                                                <td width="100%">
                                                                    <div class="border">
                                                                        <div class="heading">
                                                                            <h4><strong>3. Party Details</strong></h4>
                                                                        </div>
                                                                        <div class="c-p-8">
                                                                            <table>
                                                                                <tr>
                                                                                    <td width="50%">
                                                                                        <div>
                                                                                            <h5><strong>Seller</strong>
                                                                                            </h5>
                                                                                        </div>

                                                                                        <div class="max-500">
                                                                                            <p class="mb-1">
                                                                                                <b>GSTIN </b>:
                                                                                                {{invoiceInfo?.company_gst}},
                                                                                                <b class="ml-1">PAN
                                                                                                </b>:
                                                                                                {{invoiceInfo?.company_gst?.substring(2).slice(0,
                                                                                                -3)}}
                                                                                            </p>
                                                                                            <div>
                                                                                                <p class="m-0">
                                                                                                    <span *ngIf="invoiceInfo?.company_msme_number">
                                                                                                        <b> MSME
                                                                                                            No</b>:
                                                                                                            {{invoiceInfo?.company_msme_number}},
                                                                                                    </span> 
                                                                                                </p>
                                                                                                <p class="m-0">
                                                                                                    <span
                                                                                                        *ngIf="invoiceInfo?.company_cin_number">
                                                                                                        <b>CIN No</b>:
                                                                                                        {{invoiceInfo?.company_cin_number}},
                                                                                                    </span>
                                                                                                    <span
                                                                                                        *ngIf="invoiceInfo?.company_tin_number">
                                                                                                        <b>TIN No</b>:
                                                                                                        {{invoiceInfo?.company_tin_number}}
                                                                                                    </span>

                                                                                                </p>
                                                                                                <p class="m-0">
                                                                                                    <span
                                                                                                        *ngIf="invoiceInfo?.company_fssai_number">
                                                                                                        <b>FSSAI LIC No
                                                                                                        </b>:
                                                                                                        {{invoiceInfo?.company_fssai_number}}
                                                                                                    </span>

                                                                                                </p>
                                                                                            </div>


                                                                                            <address>
                                                                                                {{invoiceInfo?.company_name}}<br>{{invoiceInfo?.company_legal_name}}
                                                                                                <br>
                                                                                                {{invoiceInfo?.company_address_1}}
                                                                                                ,
                                                                                                {{invoiceInfo?.company_address_2}}
                                                                                                ,
                                                                                                {{invoiceInfo?.company_location}},
                                                                                                {{invoiceInfo?.company_pincode}}
                                                                                            </address>
                                                                                        </div>




                                                                                    </td>

                                                                                    <td width="50%">
                                                                                        <div>
                                                                                            <h5><strong>Purchaser</strong>
                                                                                            </h5>
                                                                                        </div>

                                                                                        <div class="max-500">
                                                                                            <p class="mb-1"><b>Guest
                                                                                                </b> :
                                                                                                {{invoiceInfo?.guest_name}}
                                                                                            </p>
                                                                                            <p class="mb-1"
                                                                                                *ngIf="invoiceInfo?.invoice_type == 'B2B'">
                                                                                                <b>GSTIN</b> :
                                                                                                {{invoiceInfo?.gst_number}},
                                                                                                <b class="ml-1">PAN
                                                                                                </b>:
                                                                                                {{invoiceInfo?.gst_number.substr(2,
                                                                                                10)}}
                                                                                            </p>

                                                                                            <div
                                                                                                *ngIf="invoiceInfo?.invoice_type == 'B2B'">
                                                                                                <address>
                                                                                                    {{invoiceInfo?.legal_name}},
                                                                                                    <br>
                                                                                                    {{invoiceInfo.address_floor_number?invoiceInfo.address_floor_number+',':''}}
                                                                                                    {{invoiceInfo.address_1?invoiceInfo.address_1+',':''}}
                                                                                                    {{invoiceInfo.address_2
                                                                                                    !==
                                                                                                    invoiceInfo.address_1
                                                                                                    ?invoiceInfo.address_2+',':''}}
                                                                                                    <br>
                                                                                                    {{invoiceInfo.address_street?invoiceInfo.address_street+',':''}}
                                                                                                    {{invoiceInfo.location?invoiceInfo.location+',':''}}
                                                                                                    {{invoiceInfo.pincode}}
                                                                                                    {{invoiceInfo.email?","+invoiceInfo.email:''}}
                                                                                                    <br>
                                                                                                    <b>Place of Supply
                                                                                                    </b>:
                                                                                                    {{invoiceInfo?.place_of_supply_name}}({{(invoiceInfo.place_of_supply
                                                                                                    | trim) || 'NA'}})
                                                                                                </address>
                                                                                            </div>
                                                                                        </div>
                                                                                    </td>

                                                                                </tr>

                                                                            </table>


                                                                        </div>
                                                                    </div>
                                                                </td>
                                                            </tr>

                                                        </tbody>
                                                    </table>
                                                </div>


                                                <!-- <table class="table pdfTable mb-0">
                                                    <tbody>
                                                        <tr>
                                                            <td width="100%"> -->
                                                <div class="pdf-table">
                                                    <div class="heading b-h">
                                                        <h4><strong>4. Item Details</strong></h4>
                                                    </div>
                                                    <div class="c-p-8">
                                                        <table class="table pdfTable goods mb-0">
                                                            <thead>
                                                                <tr>
                                                                    <!-- <th>S.NO</th> -->
                                                                    <th>Date</th>
                                                                    <th>Product Description</th>

                                                                    <th>SAC/HSN</th>
                                                                    <th>Item Value</th>
                                                                    <th>GST Rate</th>
                                                                    <th>GST Amount</th>
                                                                    <th>VAT</th>

                                                                    <!-- <th>S.CESS</th> -->
                                                                    <th>CESS</th>
                                                                    <th>Quantity</th>
                                                                    <th>
                                                                        Total Item Value
                                                                    </th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                <tr *ngFor="let item of sacCodeDetails;let i = index">
                                                                    <ng-container
                                                                        *ngIf="item.revenue_item != 'Non-Revenue' ">
                                                                        <!-- <td>{{i+1}}</td> -->
                                                                        <td>{{item?.date | date:'dd- MM-yyyy'}}</td>
                                                                        <td>{{item.item_name}}</td>
                                                                        <td>{{item.sac_code}}</td>
                                                                        <td class="text-right">
                                                                            {{item.item_value}}</td>
                                                                        <td class="text-right">
                                                                            {{item.gst_rate}} %</td>
                                                                        <td class="text-right">
                                                                            {{item.cgst_amount + item.sgst_amount +
                                                                            item.igst_amount }}
                                                                        </td>
                                                                        <td class="text-right">{{item.vat_amount}}</td>
                                                                        <!-- <td class="text-right">
                                                                            {{item.state_cess_amount}}
                                                                        </td> -->
                                                                        <td class="text-right">
                                                                            {{item.cess_amount}}
                                                                        </td>
                                                                        <td>{{item.quantity}}</td>
                                                                        <td class="text-right">
                                                                            {{item.item_value_after_gst}}
                                                                        </td>
                                                                    </ng-container>
                                                                </tr>

                                                            </tbody>
                                                        </table>

                                                    </div>

                                                </div>
                                                <!--  </td>
                                                        </tr>

                                                    </tbody>
                                                </table> -->


                                                <div class="my-2 mx-2">
                                                    <table class="table  goods goods2" style="margin: 0;">
                                                        <thead>
                                                            <tr style="text-align:left;">
                                                                <th>Tax'ble Value</th>
                                                                <th>CGST
                                                                </th>

                                                                <th>SGST

                                                                </th>
                                                                <th>IGST
                                                                </th>
                                                                <th>Central CESS

                                                                </th>
                                                                <!-- <th>State CESS </th> -->
                                                                <!-- <th>VAT</th> -->
                                                                <th>Discount(Rs)</th>
                                                                <th>Other Charges
                                                                </th>
                                                                <th *ngIf="!companyData.vat_reporting">Vat</th>
                                                                <th>
                                                                    Round off
                                                                </th>

                                                                <th>
                                                                    Total Amount
                                                                </th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr style="text-align:right;">
                                                                <td>{{invoiceInfo?.pms_invoice_summary_without_gst}}
                                                                </td>
                                                                <td>{{invoiceInfo.invoice_category === 'Credit Invoice'
                                                                    ? invoiceInfo?.credit_cgst_amount :
                                                                    invoiceInfo?.cgst_amount}}
                                                                </td>
                                                                <td>{{invoiceInfo.invoice_category === 'Credit Invoice'
                                                                    ? invoiceInfo?.credit_sgst_amount :
                                                                    invoiceInfo?.sgst_amount}}
                                                                </td>
                                                                <td>{{invoiceInfo.invoice_category === 'Credit Invoice'
                                                                    ? invoiceInfo?.credit_igst_amount :
                                                                    invoiceInfo?.igst_amount}}
                                                                </td>
                                                                <td>{{invoiceInfo.invoice_category === 'Credit Invoice'
                                                                    ? invoiceInfo?.total_credit_central_cess_amount :
                                                                    invoiceInfo?.total_central_cess_amount}}
                                                                </td>
                                                                <!-- <td>{{invoiceInfo.invoice_category === 'Credit Invoice'
                                                                    ? invoiceInfo?.total_credit_state_cess_amount :
                                                                    invoiceInfo?.total_state_cess_amount}}
                                                                </td> -->
                                                                <!-- <td>{{invoiceInfo.invoice_category === 'Credit Invoice' ? invoiceInfo?.total_credit_vat_amount : invoiceInfo?.total_vat_amount}}
                                                                </td> -->
                                                                <td>{{invoiceInfo?.discount_value_before_gst}}</td>
                                                                <td>{{companyData.vat_reporting?invoiceInfo?.other_charges:invoiceInfo?.other_charges_before_tax
                                                                    | number : '0.2'}}</td>
                                                                <td *ngIf="!companyData.vat_reporting">
                                                                    {{invoiceInfo?.total_vat_amount | number : '0.2'}}
                                                                </td>
                                                                <td>{{invoiceInfo?.invoice_round_off_amount}}</td>
                                                                <td>{{invoiceInfo?.sales_amount_after_tax}}</td>
                                                            </tr>

                                                        </tbody>
                                                    </table>

                                                </div>

                                                <div class="mx-2">
                                                    <table class="table  goods goods2" style="margin: 0;">
                                                        <thead>
                                                            <tr>
                                                                <th>HSN/SAC CODE</th>
                                                                <th>SALES
                                                                </th>

                                                                <th>CGST

                                                                </th>
                                                                <th>SGST
                                                                </th>
                                                                <th>IGST

                                                                </th>
                                                                <th>CESS TAX </th>
                                                                <!-- <th>CESS TAX2</th> -->

                                                                <th>
                                                                    VAT
                                                                </th>


                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <!-- <tr *ngFor="let item of taxableArr">

                                                                <td>
                                                                    {{item.sac_code }}</td>
                                                                <td>
                                                                    {{item.item_value | number : '1.2-2'}}</td>
                                                                <td>
                                                                    {{item.cgst_amount | number : '1.2-2'}}</td>
                                                                <td>
                                                                    {{item.sgst_amount | number : '1.2-2'}}</td>
                                                                <td>
                                                                    {{item.igst_amount | number : '1.2-2'}}</td>
                                                                <td>
                                                                    {{item.cess}}</td>
                                                                <td>
                                                                    {{item.cess_amount}}</td>
                                                                <td>{{item.vat_amount}}</td>
                                                            </tr> -->

                                                            <tr
                                                            *ngFor="let sac of invoiceInfo.sac_hsn_based_taxes;let i = index">
                                                           
                                                            <td>{{sac.sac_hsn_code}}</td>
                                                            <td>{{sac.amount_before_gst}}</td>
                                                            <td>{{sac.cgst}}</td>
                                                            <td>{{sac.sgst}}</td>
                                                            <td>{{sac.igst}}</td>
                                                            <!-- <td>{{sac.state_cess}}</td> -->
                                                            <td>{{sac.cess}}</td>
                                                            
                                                            
                                                            <td>{{sac.vat}}</td>
                                                        </tr>

                                                        </tbody>
                                                    </table>

                                                </div>
                                                <div class="py-2 m-2 notes"
                                                    *ngIf="companyData?.custom_e_tax_invoice == 1">
                                                    <h6><b>Remarks:</b></h6>
                                                    <div class="" [innerHTML]="invoiceInfo?.note"></div>
                                                </div>
                                                <div class=" my-2">
                                                    <table class="table table-light mb-0">
                                                        <tbody>
                                                            <tr>
                                                                <td width="100%">
                                                                    <table width="100" class="table mb-0">
                                                                        <tbody>
                                                                            <tr>
                                                                                <td width="20%"
                                                                                    style="vertical-align: middle;">
                                                                                    <div class="">

                                                                                        <div class="c-p-8">
                                                                                            <div
                                                                                                style="padding: 2px 5px">
                                                                                                <strong>Generated
                                                                                                    By</strong> :
                                                                                                {{loginData.full_name}}

                                                                                            </div>
                                                                                            <div
                                                                                                style="padding:2px 5px">
                                                                                                <strong>Print Date
                                                                                                </strong> :
                                                                                                {{invoiceInfo?.invoice_date}}
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </td>
                                                                                <!-- <td width="33.33%" align="center"
                                                                                    style="vertical-align: middle;">
                                                                                    <div class="">
                                                                                        <div class="c-p-8">

                                                                                        </div>
                                                                                    </div>
                                                                                </td> -->
                                                                                <td width="60%" align="left"
                                                                                    style="vertical-align: middle;">
                                                                                    <div class="">

                                                                                        <div class="c-p-8">
                                                                                            <div>

                                                                                            </div>
                                                                                            <div>
                                                                                                <div
                                                                                                    style="padding:2px 5px">
                                                                                                    <!-- <b>Amount In Words
                                                                                                        :</b> {{invoiceInfo?.sales_amount_after_tax | amountToWord
                                                                                                    }}
                                                                                                    <br> -->
                                                                                                    <b>Amount In Words
                                                                                                        :</b>
                                                                                                    {{invoiceInfo?.amount_in_word
                                                                                                    ||
                                                                                                    (invoiceInfo?.sales_amount_after_tax
                                                                                                    | amountToWord) }}
                                                                                                    <br>

                                                                                                </div>
                                                                                                <div *ngIf="invoiceInfo.invoice_category === 'Credit Invoice'"
                                                                                                    style="padding:2px 5px">
                                                                                                    <strong> System
                                                                                                        Generated On
                                                                                                    </strong> :
                                                                                                    {{invoiceInfo?.credit_ack_date}}
                                                                                                </div>
                                                                                                <div *ngIf="invoiceInfo.invoice_category === 'Debit Invoice'"
                                                                                                    style="padding:2px 5px">
                                                                                                    <strong>On </strong>
                                                                                                    :
                                                                                                    {{invoiceInfo?.ack_date}}
                                                                                                </div>
                                                                                                <div *ngIf="invoiceInfo.invoice_category === 'Tax Invoice'"
                                                                                                    style="padding:2px 5px">
                                                                                                    <strong>On </strong>
                                                                                                    :
                                                                                                    {{invoiceInfo?.ack_date}}
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </td>
                                                                                <td *ngIf="eTaxInvoiceDownloadBtn && ((invoiceInfo?.irn_generated === 'Success' || invoiceInfo?.irn_generated === 'Cancelled'))"
                                                                                    width="20%" align="right"
                                                                                    style="vertical-align: bottom;">
                                                                                    <div class='sign_images'>
                                                                                        <!-- <img class="img-fluid" src="assets/images/sign.png" alt="Signature" > -->
                                                                                        <img class="img-fluid"
                                                                                            [src]="apiDomain + this.signature_img"
                                                                                            alt="">

                                                                                    </div>
                                                                                </td>
                                                                            </tr>

                                                                        </tbody>
                                                                    </table>
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                                <div *ngIf="(sez || invoiceInfo.irn_generated == 'Success') && companyData.show_application_reference_number_in_etax == 1"
                                                    class='footer-txt'>
                                                    <div *ngIf="invoiceInfo.suptyp == 'SEZWP'" class="pl-3">
                                                        <p>SEZWP - {{companyData.sezwp_terms_and_conditions}} </p>
                                                    </div>
                                                    <div *ngIf="invoiceInfo.suptyp == 'SEZWOP'" class="pl-3">
                                                        <p>SEZWOP - {{companyData.sezwop_terms_and_conditions }} </p>
                                                    </div>
                                                    <div class='text-right pt-2 pr-3'>
                                                        <p>Application Reference Number -
                                                            {{invoiceInfo?.company_application_reference_number}}</p>

                                                    </div>
                                                    <div class='text-right pr-3'>
                                                        <p>Date of filing - {{invoiceInfo?.company_data_filing}}</p>
                                                    </div>

                                                </div>


                                                <div *ngIf="companyData?.custom_e_tax_invoice_footer == 1">
                                                    <img [src]="apiDomain + companyData?.custom_e_tax_invoice_footer_image"
                                                        alt=" " width="100%">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- Potrait format end-->
                                <!-- Landscape format start-->
                                <div *ngIf="this.companyData.e_tax_format == 'Landscape'" class="row preview"
                                    id="section-to-print">
                                    <div class="col-md-12">

                                    </div>
                                    <div class="col-md-12">
                                        <div class="shadow-sm each-block bg-white" style="overflow:hidden">
                                            <div class="">
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <p class="mb-0"><strong>{{companyData.e_tax_format}}</strong>
                                                        </p>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="d-flex justify-content-end mb-2">
                                                            <!-- <button *ngIf="this.companyData.e_tax_format == 'Landscape'" class="btn btn-primary btn-sm  mr-2" (click)="this.companyData.e_tax_format = 'Portrait'">Portrait</button>
                                                            <button *ngIf="this.companyData.e_tax_format == 'Portrait'" class="btn btn-primary btn-sm  mr-2" (click)="this.companyData.e_tax_format = 'Landscape'">Landscape</button> -->

                                                            <button
                                                                *ngIf="eTaxInvoiceDownloadBtn && ((invoiceInfo?.irn_generated === 'Success' || invoiceInfo?.irn_generated === 'Cancelled'))"
                                                                (click)="downlaod_e_tax_invoice()"
                                                                class="btn btn-sm btn-primary mr-2"
                                                                type="button">Download e-tax</button>

                                                            <button (click)="print()" class="btn btn-sm btn-success"
                                                                type="button"><i class="ri-printer-line"></i> Print
                                                            </button>

                                                        </div>
                                                    </div>
                                                </div>

                                                <div>
                                                    <table class="table mb-0 goods3">
                                                        <tbody>
                                                            <tr>
                                                                <td width="25%" style="vertical-align: middle;">
                                                                    <div class="logo">

                                                                        <ng-template #logoBlock>
                                                                            <div class="mb-3"
                                                                                *ngIf="invoiceInfo?.company_logo">
                                                                                <img class="img-fluid"
                                                                                    [src]="apiDomain + invoiceInfo?.company_logo"
                                                                                    alt="">
                                                                            </div>
                                                                        </ng-template>
                                                                        <div *ngIf="companyData?.custom_e_tax_invoice_logo == 1; else logoBlock"
                                                                            class="mb-4">
                                                                            <img [src]="apiDomain + invoiceInfo?.custom_e_tax_invoice_logo_image"
                                                                                alt="header" width="60%">
                                                                        </div>
                                                                    </div>
                                                                </td>
                                                                <td width="25%">

                                                                    <div>
                                                                        <address>
                                                                            <b>
                                                                                <p>{{invoiceInfo?.company_name}}<br>
                                                                                    {{invoiceInfo.company_legal_name}}<br>
                                                                                    {{invoiceInfo?.company_address_1}}
                                                                                    ,{{invoiceInfo?.company_address_2}}
                                                                                    ,
                                                                                    {{invoiceInfo?.company_location}},
                                                                                    {{invoiceInfo?.company_pincode}}
                                                                                </p>
                                                                            </b>
                                                                        </address>
                                                                        <p class="mb-0"><b>GSTIN </b>:
                                                                            {{invoiceInfo?.company_gst}}</p>
                                                                        <p class="mb-0"><b>Tel </b>: </p>
                                                                        <p class="mb-0"><b>E-Mail </b>: </p>
                                                                        <p class="mb-0"><b>PAN No. </b>:
                                                                            {{invoiceInfo?.company_gst?.substring(2).slice(0,
                                                                            -3)}}</p>
                                                                        <p class="mb-0"><b>IRN </b>:
                                                                            {{invoiceInfo?.irn_number}}</p>
                                                                        <p class="mb-0"><b>Ack. No</b>:
                                                                            {{invoiceInfo.ack_no}}</p>
                                                                        <p class="mb-0"><b>IRN Date </b>:
                                                                            {{invoiceInfo?.ack_date | date}}</p>
                                                                    </div>

                                                                </td>

                                                                <td width="25%">
                                                                    <div>
                                                                        <p class="mb-0"><b>Invoice No. </b>:
                                                                            {{invoiceInfo.invoice_number}}</p>
                                                                        <p class="mb-0"><b>Invoice date </b>:
                                                                            {{invoiceInfo.invoice_date | date :
                                                                            'dd/MM/yyyy'}}</p>
                                                                        <p class="mb-0" *ngIf="companyData?.website">
                                                                            <b>Website </b>: {{companyData?.website}}
                                                                        </p>
                                                                        <p class="mb-0"><b>VAT No. </b>: </p>
                                                                        <p class="mb-0"><b>CIN </b>: </p>
                                                                        <p class="mb-0"><b>Sales Order No </b>: </p>
                                                                        <p class="mb-0"><b>Whether Tax is Payable on
                                                                                Reverse Charge </b>: No</p>
                                                                    </div>
                                                                </td>
                                                                <td width="25%" align="right">
                                                                    <div class="qr">
                                                                        <img class="img-fluid"
                                                                            [src]="apiDomain + invoiceInfo?.qr_code_image"
                                                                            alt="">
                                                                        <span class="imgTextPMS"
                                                                            *ngIf="invoiceInfo.irn_generated === 'Cancelled'">
                                                                            <h1>Cancelled</h1>
                                                                        </span>
                                                                    </div>

                                                                    <div class="qr">
                                                                        <img class="img-fluid"
                                                                            [src]="apiDomain + invoiceInfo.credit_qr_code_image"
                                                                            alt="">
                                                                    </div>
                                                                    <div class="qr">
                                                                        <img class="img-fluid"
                                                                            [src]="apiDomain + invoiceInfo.b2c_qrimage"
                                                                            alt="">
                                                                    </div>
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>

                                                <div>
                                                    <table class="table goods3 mb-0">
                                                        <tbody>
                                                            <tr>
                                                                <td width="100%">
                                                                    <div class="">
                                                                        <div class="c-p-8">
                                                                            <table class="party">
                                                                                <tr>
                                                                                    <td width="50%"
                                                                                        style="vertical-align: top;">
                                                                                        <p class="mb-1"><b><u>Bill To
                                                                                                    Details:</u></b></p>
                                                                                        <div
                                                                                            *ngIf="invoiceInfo?.invoice_type === 'B2B'">
                                                                                            <p class="mb-1">
                                                                                                <b>{{invoiceInfo.guest_name}}<br>
                                                                                                    {{invoiceInfo.legal_name}}
                                                                                                    <br>
                                                                                                    {{invoiceInfo.address_floor_number?invoiceInfo.address_floor_number+',':''}}
                                                                                                    {{invoiceInfo.address_1?invoiceInfo.address_1+',':''}}
                                                                                                    {{invoiceInfo.address_2
                                                                                                    !==
                                                                                                    invoiceInfo.address_1
                                                                                                    ?invoiceInfo.address_2+',':''}}
                                                                                                    <br>
                                                                                                    {{invoiceInfo.address_street?invoiceInfo.address_street+',':''}}
                                                                                                    {{invoiceInfo.location?invoiceInfo.location+',':''}}
                                                                                                    {{invoiceInfo.pincode}}
                                                                                                </b>
                                                                                            </p>
                                                                                            <p class="mb-0">
                                                                                                <b> GSTIN </b>:
                                                                                                {{invoiceInfo.gst_number}},
                                                                                            </p>
                                                                                            <p class="mb-0">
                                                                                                <b>Tel </b>:
                                                                                                <!-- {{invoiceInfo?.gst_number.substr(2, 10)}} -->
                                                                                            </p>
                                                                                            <p class="mb-0">
                                                                                                <b>Email</b>:
                                                                                                {{invoiceInfo.email?","+invoiceInfo.email:''}}
                                                                                            </p>
                                                                                            <p class="mb-0">
                                                                                                <b> Place of Supply
                                                                                                </b>:
                                                                                                {{invoiceInfo?.place_of_supply_name}}({{(invoiceInfo.place_of_supply
                                                                                                | trim) || 'NA'}})
                                                                                            </p>
                                                                                        </div>


                                                                                        <div
                                                                                            *ngIf="invoiceInfo?.invoice_type === 'B2C'">
                                                                                            <p class="mb-0">
                                                                                                <b> Guest Name :</b>
                                                                                                {{invoiceInfo.guest_name}}
                                                                                            </p>
                                                                                            <!-- <p class="mb-1">
                                                                                              <b> Room Number :</b> {{invoiceInfo.room_number}}
                                                                                          </p> -->
                                                                                            <p class="mb-0">
                                                                                                <b> Confirmation Number
                                                                                                    :</b>
                                                                                                {{invoiceInfo.confirmation_number}}
                                                                                            </p>

                                                                                        </div>
                                                                                    </td>
                                                                                    <td width="50%"
                                                                                        style="vertical-align: top;">
                                                                                        <!-- <p class="mb-0"><b><u>Registered Office Address:</u></b></p>
                                                                                        <p>
                                                                                            Raheja Tower Plot No C30 Block G,<br>
                                                                                            Bandra Kurla Complex Bandra E,<br>
                                                                                            54B Lands End, Sisters Bunglow, Ground 1st and 2nd Floor, Wipro Limited<br>
                                                                                            www.chalethotels.com</p> -->
                                                                                    </td>
                                                                                </tr>

                                                                            </table>

                                                                        </div>
                                                                    </div>
                                                                </td>
                                                            </tr>

                                                        </tbody>
                                                    </table>
                                                </div>


                                                <div>
                                                    <div class="pdf-table">
                                                        <div class="c-p-8  table-responsive goods3">
                                                            <table class="table pdfTable goods mb-0">
                                                                <thead>
                                                                    <tr>
                                                                        <th rowspan="2">S.NO</th>
                                                                        <th rowspan="2">Service<br> Description</th>
                                                                        <th rowspan="2">HSN/SAC <br>Code </th>
                                                                        <th>UQC</th>
                                                                        <th>Unit <br>Price</th>
                                                                        <th>Amount</th>
                                                                        <th>Discount</th>
                                                                        <th>Taxable<br> Value</th>
                                                                        <th>CGST Rate<br> (%)</th>
                                                                        <th>CGST<br> Amt (Rs.)</th>
                                                                        <th>SGST/UTGST<br> Rate (%)</th>
                                                                        <th>SGST/UTGST<br> Amt(Rs.)</th>
                                                                        <th>IGST Rate <br>(%)</th>
                                                                        <th>IGST <br> Amt(Rs.)</th>
                                                                        <th>Cess Adv <br> Rate %</th>
                                                                        <th>Cess Adv Amt. <br>(Rs)</th>
                                                                        <th>Total Amt.</th>
                                                                    </tr>
                                                                    <tr>
                                                                        <th>Qty.</th>
                                                                        <th>(Rs.)</th>
                                                                        <th>(Rs.)</th>
                                                                        <th>(Rs.)</th>
                                                                        <th>(Rs.)</th>
                                                                        <th>(%)</th>
                                                                        <th>(Rs.)</th>
                                                                        <th>(%)</th>
                                                                        <th>(Rs.)</th>
                                                                        <th>(%)</th>
                                                                        <th>(Rs.)</th>
                                                                        <th>(%)</th>
                                                                        <th>(Rs.)</th>
                                                                        <th>(Rs.)</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>

                                                                    <tr
                                                                        *ngFor="let item of sacCodeDetails;let i = index">
                                                                        <ng-container
                                                                            *ngIf="item.revenue_item != 'Non-Revenue' ">
                                                                            <td>{{i+1}}</td>
                                                                            <td>{{item.item_name}}</td>
                                                                            <td>{{item.sac_code}}</td>
                                                                            <td class="text-right">
                                                                                {{item.quantity}}</td>
                                                                            <td class="text-right">
                                                                                {{item.item_taxable_value}}
                                                                            </td>
                                                                            <td class="text-right">
                                                                                {{item.item_taxable_value}}
                                                                            </td>
                                                                            <td class="text-right">
                                                                                {{item.discount_value}}</td>
                                                                            <td class="text-right">
                                                                                {{item.item_taxable_value}}</td>
                                                                            <td class="text-right">
                                                                                {{item.cgst}}</td>
                                                                            <td class="text-right">
                                                                                {{item.cgst_amount}}
                                                                            </td>
                                                                            <td class="text-right">
                                                                                {{item.sgst}}
                                                                            </td>
                                                                            <td class="text-right">
                                                                                {{item.sgst_amount}}
                                                                            </td>
                                                                            <td class="text-right">
                                                                                {{item.igst}}
                                                                            </td>
                                                                            <td class="text-right">
                                                                                {{item.igst_amount}}
                                                                            </td>
                                                                            <td class="text-right">
                                                                                {{item.cess}}
                                                                            </td>
                                                                            <td class="text-right">
                                                                                {{item.cess_amount}}
                                                                            </td>
                                                                            <td class="text-right">
                                                                                {{item.item_value_after_gst}}
                                                                            </td>
                                                                        </ng-container>
                                                                    </tr>
                                                                    <tr style="background-color: #f4f4f4;">
                                                                        <td colspan="7"
                                                                            class="border-right border-bottom">
                                                                            <strong>Grand Total</strong>
                                                                        </td>
                                                                        <td
                                                                            class="text-right border-right border-bottom">
                                                                            <strong>{{invoiceInfo.amount_before_gst}}</strong>
                                                                        </td>
                                                                        <td colspan="2"
                                                                            class="text-right border-right border-bottom">
                                                                            <strong>{{invoiceInfo.cgst_amount}}</strong>
                                                                        </td>
                                                                        <td colspan="2"
                                                                            class="text-right border-right border-bottom">
                                                                            <strong>{{invoiceInfo.sgst_amount}}</strong>
                                                                        </td>
                                                                        <td colspan="2"
                                                                            class="text-right border-right border-bottom">
                                                                            <strong>{{invoiceInfo.igst_amount}}</strong>
                                                                        </td>
                                                                        <td colspan="2"
                                                                            class="text-right border-right border-bottom">
                                                                            <strong>{{invoiceInfo?.cess_amount}}</strong>
                                                                        </td>
                                                                        <td class="text-right border-bottom">
                                                                            <strong>{{invoiceInfo.total_invoice_amount}}</strong>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td colspan="12"
                                                                            class="border-right border-bottom"></td>
                                                                        <td colspan="3"
                                                                            class="border-right border-bottom">
                                                                            <strong>Sub Total (Rs.) </strong>
                                                                        </td>
                                                                        <td colspan="2"
                                                                            class="text-right border-bottom">
                                                                            <strong>{{invoiceInfo.total_invoice_amount}}</strong>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td colspan="12"
                                                                            class="border-right border-bottom"></td>
                                                                        <td colspan="3"
                                                                            class="border-right border-bottom">
                                                                            <strong>Round off (Rs.) </strong>
                                                                        </td>
                                                                        <td colspan="2"
                                                                            class="text-right border-bottom">
                                                                            <strong></strong>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td colspan="12" class="border-right"></td>
                                                                        <td colspan="3" class="border-right">
                                                                            <strong>Invoice Value (Rs.)</strong>
                                                                        </td>
                                                                        <td colspan="2" class="text-right">
                                                                            <strong>{{invoiceInfo.total_invoice_amount}}</strong>
                                                                        </td>
                                                                    </tr>

                                                                </tbody>
                                                            </table>


                                                        </div>

                                                    </div>
                                                </div>


                                                <div class=" my-2">
                                                    <table class="table table-light mb-0">
                                                        <tbody>
                                                            <tr>
                                                                <td width="100%">
                                                                    <table width="100" class="table goods3"
                                                                        style="margin-bottom: 0;">
                                                                        <tbody>
                                                                            <tr>
                                                                                <td width="25%" align="center"
                                                                                    style="vertical-align: bottom;">
                                                                                    <p class="mb-0"><strong> Guest
                                                                                            Signature</strong></p>
                                                                                </td>
                                                                                <td width="50%" align="center">
                                                                                    <div class="table-bottom">
                                                                                        <table class="table">
                                                                                            <tr>
                                                                                                <td>
                                                                                                    <p class="mb-0">
                                                                                                        Payment Details:
                                                                                                    </p>
                                                                                                </td>
                                                                                                <td></td>
                                                                                            </tr>
                                                                                            <tr>
                                                                                                <td>
                                                                                                    <p class="mb-0">Bank
                                                                                                        Account :</p>
                                                                                                </td>
                                                                                                <td>
                                                                                                    <p class="mb-0">
                                                                                                        Payment Due Date
                                                                                                        :</p>
                                                                                                </td>
                                                                                            </tr>
                                                                                            <tr>
                                                                                                <td>
                                                                                                    <p class="mb-0">IFSC
                                                                                                        Code :</p>
                                                                                                </td>
                                                                                                <td>
                                                                                                    <p class="mb-0">
                                                                                                        Payment Terms :
                                                                                                    </p>
                                                                                                </td>
                                                                                            </tr>
                                                                                            <tr>
                                                                                                <td>
                                                                                                    <p class="mb-0">
                                                                                                        Beneficiary :
                                                                                                    </p>
                                                                                                </td>
                                                                                                <td></td>
                                                                                            </tr>
                                                                                        </table>
                                                                                    </div>
                                                                                </td>
                                                                                <td width="25%" align="center"
                                                                                    style="vertical-align: middle;">
                                                                                    <p class="mb-0"><strong> For
                                                                                            &nbsp;&nbsp;&nbsp;
                                                                                            {{invoiceInfo?.company_legal_name}}</strong>
                                                                                    </p>
                                                                                    <br>
                                                                                    <br>
                                                                                    <p class="mb-0"><strong> Authorised
                                                                                            Signatory </strong></p>
                                                                                </td>

                                                                            </tr>

                                                                        </tbody>
                                                                    </table>
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                                <div *ngIf="(sez || invoiceInfo.irn_generated == 'Success') && companyData.show_application_reference_number_in_etax == 1"
                                                    class='footer-txt'>
                                                    <div *ngIf="invoiceInfo.suptyp == 'SEZWP'" class="pl-3">
                                                        <p>SEZWP - {{companyData.sezwp_terms_and_conditions}} </p>
                                                    </div>
                                                    <div *ngIf="invoiceInfo.suptyp == 'SEZWOP'" class="pl-3">
                                                        <p>SEZWOP - {{companyData.sezwop_terms_and_conditions }} </p>
                                                    </div>
                                                    <div class='text-right pt-2 pr-3'>
                                                        <p>Application Reference Number -
                                                            {{invoiceInfo.company_application_reference_number}}</p>

                                                    </div>
                                                    <div class='text-right pr-3'>
                                                        <p>Date of filing - {{invoiceInfo?.company_data_filing}}</p>
                                                    </div>

                                                </div>


                                                <div *ngIf="companyData?.custom_e_tax_invoice_footer == 1">
                                                    <img [src]="apiDomain + companyData?.custom_e_tax_invoice_footer_image"
                                                        alt="header" width="100%">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- Landscape format end-->



                            </ng-template>
                        </li>

                    </ul>

                    <div class="activity">
                        <i class="pl-2" (click)="openMenu()" ngbTooltip="Activty log" class="ri-history-fill"></i>
                    </div>

                    <div class="irn-details"
                        *ngIf="invoiceInfo.irn_generated == 'Success' && invoiceInfo.invoice_type =='B2B'">
                        <a (click)="irnModel(viewModel)" class="btn btn-primary cursor-pointer"
                            ngbTooltip="View Details">
                            IRN Details
                        </a>
                    </div>

                    <div [ngbNavOutlet]="nav" class="mt-4"></div>
                </div>
            </div>


        </div>
    </div>
</section>


<ng-template #viewModel let-modal>
    <div class="modal-header bg-white">
        <h6 id="modal-basic-title" class="mb-0"><strong>IRN Details</strong></h6>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>

    <div class="modal-body bg-white">
        <div *ngIf="invoiceInfo.irn_generated == 'Success' && invoiceInfo.invoice_type =='B2B'">
            <div class="irnObjectView">
                <div class="text-right mb-2">
                    <div class="d-inline-block" ngbDropdown #myDrop="ngbDropdown">
                        <button type="button" class="btn btn-sm btn-outline-primary me-2" id="dropdownManual"
                            ngbDropdownAnchor (focus)="myDrop.open()">Download</button>
                        <div ngbDropdownMenu aria-labelledby="dropdownManual">
                            <button ngbDropdownItem (click)="downloadIrnObj(irnObject.irn_request_object)"
                                *ngIf="irnObject?.irn_request_object !== null">IRN Request Obj</button>
                            <button ngbDropdownItem (click)="downloadIrnObj(irnObject?.irn_response_object)"
                                *ngIf="irnObject?.irn_response_object !== null">IRN Response Obj</button>
                            <button ngbDropdownItem (click)="downloadIrnObj(irnObject?.allowance_irn_request_object)"
                                *ngIf="irnObject?.allowance_irn_request_object !== null">IRN Request</button>
                            <button ngbDropdownItem (click)="downloadIrnObj(irnObject?.allowance_irn_response_object)"
                                *ngIf="irnObject?.allowance_irn_response_object !== null">IRN Response </button>
                        </div>
                    </div>
                </div>
                <ngx-json-viewer [json]="irnObject" [expanded]="false"></ngx-json-viewer>
            </div>
        </div>
    </div>
</ng-template>


<ng-template #addInvoiceModal let-modal>
    <div class="modal-header">
        <h6 class="mb-0" id="modal-basic-title"><strong>Add Items </strong></h6>
        <!-- <button type="button" class="btn btn-primary ml-5" *ngIf="addNEwSacOption" (click)="addNewSAc()">Add New SAC/HSN</button> -->
        <button type="button" class="close" aria-label="Close" (click)="modal.close('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>

    <div class="modal-body">
        <form #form="ngForm">


            <!--Split Item Starts-->
            <div class="form-group" *ngIf="addItemModelRef =='splitItem' ">
                <label class="mat-label" for="item_value">Item Actual Value</label>
                <input appDecimaNumber [(ngModel)]="creditInvoiceItem.value" appMatInput id="item_value"
                    class="form-control" type="text" name="item_value" readonly required>
            </div>

            <div class="form-group" *ngIf="addItemModelRef =='splitItem' ">
                <label class="mat-label" for="split_value">Amount To Split</label>
                <input appDecimaNumber (ngModelChange)="modelChangeFn($event, 'price')"
                    [(ngModel)]="creditInvoiceItem.split_value" appMatInput id="split_value" class="form-control"
                    type="text" name="split_value" required>
                <!-- <small class="text-danger" *ngIf="!checkSplitAmount">Should be less than Base value</small> -->
            </div>
            <!-- Split ITem Ends-->

            <div class="form-group">
                <ng-select class="custom" [items]="sacCodeData" bindLabel="name" placeholder="Item Name"
                    (change)="modelChangeFn($event, 'name');creditInvoiceItem.item_value = null;" name="sacName"
                    [(ngModel)]="creditInvoiceItem.description" #sacName="ngModel" required>
                    <ng-template ng-footer-tmp>
                        <div class="text-right">
                            <p class="btn btn-outline-primary btn-sm  pt-2 mb-0" (click)="addNewSAc()"> Add New Sac</p>
                        </div>
                    </ng-template>
                </ng-select>
            </div>
            <div class="form-group" *ngIf="addItemModelRef =='splitItem'">
                <label class="mat-label" for="hadSez">Inclusive Taxes</label>
                <select class="custom-select" (change)="modelChangeFn($event, 'net')" appMatInput name="net"
                    [(ngModel)]="creditInvoiceItem.net" required id="hadSez">
                    <option [value]="'Yes'">Yes</option>
                    <option [value]="'No'">No</option>
                </select>
            </div>


            <!-- Add Item Starts-->

            <div class="form-group" *ngIf="addItemModelRef =='addItem' ">
                <label class="mat-label" for="item_value">Item Base Value</label>
                <input appDecimaNumber
                    (keyup)="modelChangeFn($event, 'price',creditInvoiceItem.item_value * (creditInvoiceItem.quantity?creditInvoiceItem.quantity:1))"
                    [(ngModel)]="creditInvoiceItem.item_value" appMatInput id="item_value" class="form-control"
                    type="text" name="item_value" required>
            </div>

            <div class="form-group" *ngIf="addItemModelRef =='addItem' ">
                <label class="mat-label" for="invoice_date">Invoice Date *</label>
                <input type="text" [max]="today_date" onfocus="(this.type='date')"
                    onblur="if(!this.value)this.type='text'" [(ngModel)]="invoiceInfo.invoice_date" appMatInput
                    id="invoice_date" class="form-control" type="text" name="invoice_date" required>
            </div>

            <!--Add item Ends-->
            <div *ngIf="addItemModelRef =='addItem' && (this.companyData.company_code === hindia_prop || checkITemType === 'HSN')"
                class="form-group">
                <label class="mat-label" for="quantity">Quantity</label>
                <input appNumberInput
                    (keyup)="modelChangeFn($event, 'price',creditInvoiceItem.item_value * creditInvoiceItem.quantity)"
                    [(ngModel)]="creditInvoiceItem.quantity" appMatInput id="quantity" class="form-control" type="text"
                    name="quantity" [required]="checkITemType == 'HSN'">
            </div>
            <div *ngIf="this.companyData.company_code === hindia_prop || checkITemType === 'HSN'" class="form-group">
                <ng-select placeholder="UOM" class="" name="unit_of_measurement_description"
                    id="unit_of_measurement_description" [(ngModel)]="creditInvoiceItem.unit_of_measurement_description"
                    #unit_of_measurement_description="ngModel" [required]=" checkITemType == 'HSN'">
                    <ng-option *ngFor="let item of uomData" [value]="item.description">{{item?.description}}
                    </ng-option>
                </ng-select>
            </div>

            <div class="bg-gray" *ngIf="sacDetails && creditInvoiceItem.item_value">
                <table class="table">
                    <tr>
                        <td>CGST({{sacDetails?.cgst}}%)</td>
                        <td class="text-right">{{sacDetails?.cgst_amount | currency:'INR'}}</td>
                    </tr>
                    <tr>
                        <td>SGST({{sacDetails?.sgst}}%)</td>
                        <td class="text-right">{{sacDetails?.sgst_amount | currency:'INR'}}</td>
                    </tr>
                    <tr>
                        <td>IGST({{sacDetails?.igst}}%)</td>
                        <td class="text-right">{{sacDetails?.igst_amount| currency:'INR'}}</td>
                    </tr>
                    <!-- <tr>
                        <td>State Cess({{sacDetails?.state_cess}}%)</td>
                        <td class="text-right">{{sacDetails?.state_cess_amount| currency:'INR'}}</td>
                    </tr> -->
                    <tr>
                        <td>Central Cess({{sacDetails?.cess}}%)</td>
                        <td class="text-right">{{sacDetails?.cess_amount| currency:'INR'}}</td>
                    </tr>
                    <tr>
                        <td>Vat({{sacDetails?.vat}}%)</td>
                        <td class="text-right">{{sacDetails?.vat_amount | currency:'INR'}} </td>
                    </tr>
                    <tr>
                        <td>Total(Incl.Taxes)</td>
                        <td class="text-right">{{sacDetails?.item_value_after_gst | currency:'INR'}}</td>
                    </tr>
                </table>
            </div>

            <div class="text-right mt-3">
                <button class="btn btn-outline-dark" (click)="modal.dismiss('Cross click')"
                    type="button">Cancel</button>
                <button class="btn btn-primary ml-3" type="button" *ngIf="addItemModelRef =='addItem' "
                    [disabled]=addNEwSacOption (click)="register(form)">Add</button>
                <button class="btn btn-primary ml-3" type="button" *ngIf="addItemModelRef =='splitItem' "
                    (click)="modal.close(form)">Split</button>
            </div>


        </form>
    </div>

</ng-template>






<ng-template #content let-modal>
    <form #form="ngForm" (ngSubmit)="onInvoiceSubmit(form,modal)">
        <div class="modal-header">
            <h5 class="" id="modal-basic-title">Invoice Edit</h5>
            <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body">
            <div class="">
                <div class="form-group">
                    <label class="mat-label" for="tax_invoice_referrence_number">Original Tax Invoice Number</label>
                    <input appMatInput appDecimaNumber id="tax_invoice_referrence_number"
                        [(ngModel)]="invoiceInfo.tax_invoice_referrence_number" class="form-control" type="text"
                        name="tax_invoice_referrence_number" required>
                </div>
            </div>
            <div class="">
                <div class="form-group">
                    <label class="mat-label" for="tax_invoice_referrence_date">Original Tax Invoice Date</label>

                    <input type="text" [max]="today_date" onfocus="(this.type='date')"
                        onblur="if(!this.value)this.type='text'" [(ngModel)]="invoiceInfo.tax_invoice_referrence_date"
                        appMatInput id="tax_invoice_referrence_date" class="form-control" type="text"
                        name="tax_invoice_referrence_date" required>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button type="reset" class="btn btn-outline-dark" (click)="modal.close('Save click')">Cancel</button>
            <button type="submit" class="btn btn-primary">Save</button>
        </div>
    </form>
</ng-template>

<!-- settings -->
<div class="settings" *ngIf="pdfFile.length>0">
    <span (click)="openInvoice()"><img class="img-fluid" src="assets/images/pdf.svg" alt=""></span>
    <!-- <i (click)="openInvoice()" class="ri-settings-3-line"></i> -->
</div>




<ng-template #invoicePdf let-modal>


    <div class="row">
        <div class="col-md-5">
            <div class="pl-3 pt-3">
                <ul ngbNav #navModal="ngbNav" class="nav-tabs invoice-details">
                    <li ngbNavItem>
                        <a ngbNavLink>Debit Summary</a>
                        <ng-template ngbNavContent>

                            <div class="total-card summary shadow-sm mt-3 h-fix-table">
                                <h6 class="px-2 py-2"><strong>Debit Summary</strong></h6>
                                <table class="table bg-white mb-3" id="total-table">


                                    <tr class="text-right">
                                        <td colspan="17" class="total"><span>Total Sales :</span>
                                        </td>
                                        <td colspan="9" class="text-right"><strong
                                                class="total">{{invoiceInfo.sales_amount_before_tax |
                                                number:'0.2'}}</strong></td>
                                    </tr>

                                    <tr class="text-right">
                                        <td colspan="17" class="total"><span>Add : CGST</span></td>
                                        <td colspan="9" class="text-right">
                                            <strong class="total"
                                                *ngIf="manualType != 'Credit'">{{invoiceInfo.cgst_amount |
                                                number:'0.2'}}</strong>
                                            <strong class="total"
                                                *ngIf="manualType == 'Credit'">{{invoiceInfo.credit_cgst_amount |
                                                number:'0.2'}}</strong>
                                        </td>
                                    </tr>

                                    <tr class="text-right">
                                        <td colspan="17" class="total"><span>Add : SGST</span> </td>
                                        <td colspan="9" class="text-right">
                                            <strong *ngIf="manualType != 'Credit'"
                                                class="total">{{invoiceInfo.sgst_amount | number:'0.2'}}</strong>
                                            <strong *ngIf="manualType == 'Credit'"
                                                class="total">{{invoiceInfo.credit_sgst_amount | number:'0.2'}}</strong>
                                        </td>
                                    </tr>

                                    <tr class="text-right">
                                        <td colspan="17" class="total"><span>Add : IGST</span></td>
                                        <td colspan="9" class="text-right">
                                            <strong *ngIf="manualType != 'Credit'"
                                                class="total">{{invoiceInfo.igst_amount | number:'0.2'}}</strong>
                                            <strong *ngIf="manualType == 'Credit'"
                                                class="total">{{invoiceInfo.credit_igst_amount | number:'0.2'}}</strong>
                                        </td>
                                    </tr>

                                    <tr class="text-right">
                                        <td colspan="17" class="total"><span>Tax Amount : GST</span> </td>
                                        <td colspan="9" class="text-right">
                                            <strong *ngIf="manualType != 'Credit'"
                                                class="total">{{invoiceInfo.total_gst_amount | number:'0.2'}}</strong>
                                            <strong *ngIf="manualType == 'Credit'"
                                                class="total">{{invoiceInfo.credit_gst_amount | number:'0.2'}}</strong>
                                        </td>
                                    </tr>
                                    <tr class="text-right">
                                        <td colspan="17" class="total"><span>VAT</span> </td>
                                        <td colspan="9" class="text-right">
                                            <strong *ngIf="manualType != 'Credit'"
                                                class="total">{{invoiceInfo.total_vat_amount | number:'0.2'}}</strong>
                                            <strong *ngIf="manualType == 'Credit'"
                                                class="total">{{invoiceInfo.total_credit_vat_amount |
                                                number:'0.2'}}</strong>
                                        </td>
                                    </tr>
                                    <!-- <tr class="text-right">
                                        <td colspan="17" class="total"><span>State CESS</span> </td>
                                        <td colspan="9" class="text-right">
                                            <strong *ngIf="manualType != 'Credit'"
                                                class="total">{{invoiceInfo.total_state_cess_amount |
                                                number:'0.2'}}</strong>
                                            <strong *ngIf="manualType == 'Credit'"
                                                class="total">{{invoiceInfo.total_credit_state_cess_amount |
                                                number:'0.2'}}</strong>
                                        </td>
                                    </tr> -->
                                    <tr class="text-right">
                                        <td colspan="17" class="total"><span>Central CESS</span> </td>
                                        <td colspan="9" class="text-right">
                                            <strong *ngIf="manualType != 'Credit'"
                                                class="total">{{invoiceInfo.total_central_cess_amount |
                                                number:'0.2'}}</strong>
                                            <strong *ngIf="manualType == 'Credit'"
                                                class="total">{{invoiceInfo.total_credit_central_cess_amount |
                                                number:'0.2'}}</strong>
                                        </td>
                                    </tr>


                                    <tr class="text-right">
                                        <td colspan="17" class="total"><span>Total Amount After Tax :</span>
                                        </td>
                                        <td colspan="9" class="text-right"><strong
                                                class="total">{{invoiceInfo.sales_amount_after_tax |
                                                number:'0.2'}}</strong></td>
                                    </tr>
                                    <tr class="text-right">
                                        <td colspan="17" class="total"><span>Difference Amount :</span>
                                        </td>
                                        <td colspan="9" class="text-right"><strong
                                                class="total">{{invoiceInfo.invoice_round_off_amount |
                                                number:'0.2'}}</strong></td>
                                    </tr>
                                </table>

                                <h6><strong>SAC Code Summary</strong></h6>
                                <div class="table-responsive">
                                    <table class="table table-bordered text-center bg-white mt-1" id="total-tableSAC">
                                        <thead>
                                            <tr>
                                                <th>#</th>
                                                <th>SAC/HSN CODE</th>
                                                <th>Type</th>
                                                <th>SALES</th>
                                                <th>CGST</th>
                                                <th>SGST</th>
                                                <th>IGST</th>
                                                <!-- <th>State CESS</th> -->
                                                <th>CESS</th>
                                                <th>VAT</th>
                                                <th>Total Amount</th>

                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let sac of invoiceInfo.sac_hsn_based_taxes;let i = index">
                                                <td>{{i+1}}</td>
                                                <td>{{sac.sac_hsn_code}}</td>
                                                <td>{{sac.type}}</td>
                                                <td>{{sac.amount_before_gst}}</td>
                                                <td>{{sac.cgst}}</td>
                                                <td>{{sac.sgst}}</td>
                                                <td>{{sac.igst}}</td>
                                                <!-- <td>{{sac.state_cess}}</td> -->
                                                <td>{{sac.cess}}</td>
                                                <td>{{sac.vat}}</td>
                                                <td>{{sac.amount_after_gst}}</td>
                                            </tr>

                                        </tbody>
                                    </table>
                                </div>
                            </div>


                        </ng-template>
                    </li>
                    <li ngbNavItem>
                        <a ngbNavLink>Items Details</a>
                        <ng-template ngbNavContent>
                            <div class="summary shadow-sm h-fix-table table-responsive mt-3">
                                <table class="table table-bordered" id="total-tableSAC">
                                    <thead>
                                        <tr>
                                            <th>#</th>
                                            <th>Item Name</th>
                                            <th>Item Value</th>
                                            <th class="text-center">CGST %</th>
                                            <th class="text-center">CGST Rate</th>
                                            <th class="text-center">SGST %</th>
                                            <th class="text-center">SGST Rate</th>
                                            <th class="text-center">IGST %</th>
                                            <th class="text-center">IGST Rate</th>
                                            <th class="text-center">VAT Rate</th>
                                            <th class="text-center">VAT Amt.</th>
                                            <th class="text-center">S.C. Rate</th>
                                            <th class="text-center">S.C. Amt.</th>
                                            <th class="text-center">C.C. Rate</th>
                                            <th class="text-center">C.C. Amt.</th>
                                            <th class="text-center">Total Amt.</th>
                                        </tr>



                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let item of pdfListItems;let i = index"
                                            [ngClass]="{'bg-danger': item.is_credit_item === 'Yes'}">
                                            <td>{{i+1}}</td>


                                            <td>{{item.item_name}}</td>



                                            <td class="text-right">{{(item.item_value || 0) | number : '1.2-2'}}</td>
                                            <td class="text-right"> {{item.cgst || 0}}%</td>

                                            <td class="text-right">
                                                {{(item.cgst_amount || 0) | number : '1.2-2'}}
                                            </td>
                                            <td class="text-right">{{item.sgst || 0}}%</td>
                                            <td class="text-right">
                                                {{(item.sgst_amount || 0) | number : '1.2-2'}}
                                            </td>
                                            <td class="text-right">
                                                {{item.igst || 0}}%
                                            </td>
                                            <td class="text-right">
                                                <span class="pl-3">{{(item.igst_amount || 0) | number : '1.2-2'}}</span>
                                            </td>
                                            <td class="text-right">
                                                <span class="pl-3">{{item.vat || 0}}%</span>
                                            </td>
                                            <td class="text-right">
                                                <span class="pl-3">{{(item.vat_amount || 0) | number : '1.2-2'}}</span>
                                            </td>
                                            <td class="text-right">
                                                <span class="pl-3">{{item.state_cess || 0}}%</span>
                                            </td>
                                            <td class="text-right">
                                                <span class="pl-3">{{(item.state_cess_amount || 0) | number :
                                                    '1.2-2'}}</span>
                                            </td>
                                            <td class="text-right">
                                                <span class="pl-3">{{item.cess || 0}}%</span>
                                            </td>
                                            <td class="text-right">
                                                <span class="pl-3">{{(item.cess_amount || 0) | number : '1.2-2'}}</span>
                                            </td>
                                            <td class="text-right">
                                                <span class="pl-3">{{(item.item_value_after_gst || 0) | number :
                                                    '1.2-2'}} </span>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>

                            </div>
                        </ng-template>
                    </li>
                </ul>
                <div [ngbNavOutlet]="navModal"></div>
            </div>
        </div>
        <div class="col-md-7">
            <div class="modal-header border-0 b-r-0 pb-0 summary my-auto text-left d-block">


                <div class="row no-gutters">
                    <div class="col-md-4 my-auto">
                        <div class="px-3">
                            <h6>

                                <strong>{{invoiceTitle ? invoiceTitle : 'Invoice Details'}}</strong>
                            </h6>
                        </div>
                    </div>
                    <div class="col-md-8">
                        <div *ngIf="invoiceInfo.irn_generated === 'Success'" class="d-flex invoiceIcon pr-3">

                            <i class="" ngbTooltip="Original Invoice" (click)="fileType('Original Invoice')"
                                class="ri-file-line pr-2 ml-2"></i>
                            <i ngbTooltip="Tax Invoice" class="pr-2" (click)="fileType('Tax Invoice')"
                                class="ri-file-fill"></i>
                            <i *ngIf="invoiceInfo?.has_credit_items == 'Yes'" ngbTooltip="Invoice with Credits"
                                class="pr-2" (click)="fileType('Tax Invoice with Credits')" class="ri-file-fill"></i>


                        </div>
                    </div>
                </div>
                <!-- <div>
          <small> X0</small>
          <input [(ngModel)]="companyData.qr_rect_x0" />
        </div>
        <div>
          <small> YO</small>
          <input [(ngModel)]="companyData.qr_rect_y0" />
        </div>
        <div>
          <small> X1</small>
          <input [(ngModel)]="companyData.qr_rect_x1" />
        </div>
        <div>
          <small> Y1</small>
          <input [(ngModel)]="companyData.qr_rect_y1" />
        </div> -->
            </div>
            <div class="modal-body p-2 pdf-view2 bg-white shadow-sm">
                <!-- <object *ngIf="previewFile" [data]=" apiDomain + previewFile | safe" type="application/pdf" width="100%">
                    <p>Alternative text - include a link</p>
                </object> -->


                <div class="card">
                    <object *ngIf="previewFile || this.invoiceInfo?.invoice_file"
                        [data]="(previewFile || (apiDomain + this.invoiceInfo?.invoice_file)) | safe"
                        type="application/pdf" width="100%">
                        <p>Alternative text - include a link</p>
                    </object>


                    <div *ngIf="this.TaxInvoice">
                        <div class="min-h">


                            <div>
                                <div class="border px-2 ">
                                    <div>
                                        <table class="table mb-0">
                                            <tbody>
                                                <tr>
                                                    <td width="50%" style="vertical-align: middle;">
                                                        <div class="logo">
                                                            <div class="mb-3">
                                                                <img class="img-fluid"
                                                                    [src]="apiDomain + invoiceInfo?.company_logo"
                                                                    alt="">
                                                            </div>
                                                            <div>
                                                                <address>
                                                                    <b>{{invoiceInfo.address_1}}</b>
                                                                </address>
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <td width="50%" align="right">
                                                        <div class="qr">
                                                            <img class="img-fluid"
                                                                [src]="apiDomain + invoiceInfo.qr_code_image" alt="">
                                                        </div>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>

                                    <div>
                                        <table class="table mb-0">
                                            <tbody>
                                                <tr>
                                                    <td width="100%">
                                                        <div class="border">
                                                            <div class="heading">
                                                                <h4><strong>1. e-Invoice
                                                                        Details</strong></h4>
                                                            </div>
                                                            <div class="c-p-8">
                                                                <table>
                                                                    <tr>
                                                                        <td style="max-width: 200px;">
                                                                            <strong>IRN</strong> :
                                                                            {{invoiceInfo.irn_number}}
                                                                        </td>
                                                                        <td><strong>Ack. No : <br>
                                                                            </strong> {{invoiceInfo.ack_no}}
                                                                        </td>
                                                                        <td><strong>Ack. Date : <br>
                                                                            </strong> {{invoiceInfo.ack_date}}
                                                                        </td>
                                                                    </tr>
                                                                </table>
                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>

                                            </tbody>
                                        </table>
                                    </div>

                                    <div>
                                        <table class="table mb-0">
                                            <tbody>
                                                <tr>
                                                    <td width="100%">
                                                        <div class="border">
                                                            <div class="heading">
                                                                <h4><strong>2. Transaction
                                                                        Details</strong></h4>
                                                            </div>
                                                            <div class="c-p-8">
                                                                <table>
                                                                    <tr>
                                                                        <td width="15%">
                                                                            <strong>Category</strong> :
                                                                            {{invoiceInfo.invoice_type}}
                                                                        </td>
                                                                        <td width="25%">
                                                                            <strong>Invoice No
                                                                            </strong> : {{invoiceInfo.invoice_number}}
                                                                        </td>
                                                                        <td *ngIf="this.TaxInvoice" width="30%">
                                                                            <strong>Document Type
                                                                            </strong> : Tax Invoice
                                                                        </td>
                                                                        <td width="30%">
                                                                            <strong>Document Date
                                                                            </strong> :{{invoiceInfo.invoice_date | date
                                                                            :'dd/MM/yyyy'}}
                                                                        </td>
                                                                    </tr>

                                                                </table>

                                                                <table class="">

                                                                </table>
                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>

                                            </tbody>
                                        </table>
                                    </div>

                                    <div>
                                        <table class="table mb-0">
                                            <tbody>
                                                <tr>
                                                    <td width="100%">
                                                        <div class="border">
                                                            <div class="heading">
                                                                <h4><strong>3. Party
                                                                        Details</strong></h4>
                                                            </div>
                                                            <div class="c-p-8">
                                                                <table class="party">
                                                                    <tr>
                                                                        <td width="49%" style="vertical-align: top;">
                                                                            <div>
                                                                                <h5><strong>Seller</strong>
                                                                                </h5>
                                                                            </div>

                                                                            <div class="max-500">
                                                                                <p class="mb-1">
                                                                                    <b>GSTIN </b>:
                                                                                    {{invoiceInfo?.company_gst}}, <b
                                                                                        class="ml-1">PAN </b>:
                                                                                    {{invoiceInfo?.company_gst?.substring(2).slice(0,
                                                                                    -3)}}
                                                                                </p>
                                                                                <p class="mb-1">
                                                                                    <b>FSSAI LIC No </b>:
                                                                                    {{invoiceInfo?.company_fssai_number}}
                                                                                </p>
                                                                                <p>{{invoiceInfo?.company_name}}<br>{{invoiceInfo?.company_legal_name}}
                                                                                    <br>
                                                                                    {{invoiceInfo?.company_address_1}}
                                                                                    ,{{invoiceInfo?.company_address_2}}
                                                                                    , {{invoiceInfo?.company_location}},
                                                                                    {{invoiceInfo?.company_pincode}}
                                                                                </p>
                                                                            </div>
                                                                        </td>
                                                                        <td width="51%"
                                                                            style="vertical-align: top;border-left: 1px solid rgba(102, 102, 102, 0.479);padding-left: 1%;">
                                                                            <div>
                                                                                <h5><strong>Purchaser</strong>
                                                                                </h5>
                                                                            </div>

                                                                            <div>
                                                                                <p class="mb-1"><b>Guest </b> :
                                                                                    {{invoiceInfo?.guest_name}}</p>
                                                                                <p class="mb-1"
                                                                                    *ngIf="invoiceInfo?.invoice_type == 'B2B'">
                                                                                    <b> GSTIN </b> :
                                                                                    {{invoiceInfo.gst_number}}
                                                                                </p>
                                                                                <p
                                                                                    *ngIf="invoiceInfo?.invoice_type == 'B2B'">
                                                                                    {{invoiceInfo.legal_name}}
                                                                                    <br>
                                                                                    {{invoiceInfo.address_floor_number?invoiceInfo.address_floor_number+',':''}}
                                                                                    {{invoiceInfo.address_1?invoiceInfo.address_1+',':''}}
                                                                                    {{invoiceInfo.address_2 !==
                                                                                    invoiceInfo.address_1
                                                                                    ?invoiceInfo.address_2+',':''}}
                                                                                    <br>
                                                                                    {{invoiceInfo.address_street?invoiceInfo.address_street+',':''}}
                                                                                    {{invoiceInfo.location?invoiceInfo.location+',':''}}
                                                                                    {{invoiceInfo.pincode}}
                                                                                    {{invoiceInfo.email?","+invoiceInfo.email:''}}
                                                                                    <br>
                                                                                    <b>Place of Supply </b>:
                                                                                    {{invoiceInfo?.place_of_supply_name}}({{(invoiceInfo.place_of_supply
                                                                                    | trim) || 'NA'}})
                                                                                </p>
                                                                            </div>
                                                                        </td>
                                                                    </tr>

                                                                </table>

                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>

                                            </tbody>
                                        </table>
                                    </div>

                                    <div>
                                        <!-- <table class="table mb-0">
                                            <tbody>
                                                <tr>
                                                    <td width="100%"> -->
                                        <div class="pdf-table">
                                            <div class="heading b-h">
                                                <h4><strong>4. Item
                                                        Details</strong></h4>
                                            </div>
                                            <div class="c-p-8  table-responsive">
                                                <table class="table pdfTable goods mb-0">
                                                    <thead>
                                                        <tr>
                                                            <th>S.NO</th>
                                                            <th>Date</th>
                                                            <th>Product Description
                                                            </th>

                                                            <th>SAC/HSN CODE</th>
                                                            <th>Item Value</th>
                                                            <th>GST Rate</th>

                                                            <!-- <th>S.CESS</th> -->
                                                            <th>CESS</th>




                                                            <th>
                                                                Total Item Value
                                                            </th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>


                                                        <tr *ngFor="let item of invoiceInfo.items; let i = index">
                                                            <td *ngIf="item.item_mode === 'Debit'">
                                                                {{i+1}}</td>
                                                            <td style="min-width: 80px;"
                                                                *ngIf="item.item_mode === 'Debit'">
                                                                {{item?.date | date:'dd- MM-yyyy'}}</td>
                                                            <td *ngIf="item.item_mode === 'Debit'">
                                                                {{item.description}}
                                                            </td>
                                                            <td *ngIf="item.item_mode === 'Debit'">
                                                                {{item.sac_code}}
                                                            </td>
                                                            <td *ngIf="item.item_mode === 'Debit'" class="text-right">
                                                                {{item.item_value}}
                                                            </td>
                                                            <td *ngIf="item.item_mode === 'Debit'" class="text-right">
                                                                {{item.sgst_amount + item.igst_amount + item.cgst_amount
                                                                | number : '0.2'}}
                                                            </td>
                                                            <!-- <td *ngIf="item.item_mode === 'Debit'" class="text-right">
                                                                N/A</td> -->
                                                            <td *ngIf="item.item_mode === 'Debit'" class="text-right">
                                                                N/A</td>
                                                            <td *ngIf="item.item_mode === 'Debit'" class="text-right">
                                                                {{item.item_value_after_gst | number : '0.2'}}
                                                            </td>
                                                        </tr>

                                                    </tbody>
                                                </table>

                                            </div>

                                        </div>
                                        <!-- </td>
                                                </tr>

                                            </tbody>
                                        </table> -->
                                    </div>

                                    <div>
                                        <table class="table  goods goods2" style="margin: 0;">
                                            <thead>
                                                <tr>
                                                    <th>HSN/SAC CODE</th>
                                                    <th>SALES
                                                    </th>

                                                    <th>CGST

                                                    </th>
                                                    <th>SGST
                                                    </th>
                                                    <th>IGST

                                                    </th>
                                                    <th>CESS TAX </th>
                                                    <th>CESS TAX2</th>

                                                    <th>
                                                        VAT
                                                    </th>


                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr *ngFor="let item of invoiceInfo.sac_hsn_based_taxes">
                                                    <td *ngIf="item.type === 'Invoice'">
                                                        {{item.sac_hsn_code}}</td>
                                                    <td *ngIf="item.type === 'Invoice'">
                                                        {{item.amount_before_gst}}</td>
                                                    <td *ngIf="item.type === 'Invoice'">
                                                        {{item.cgst}}</td>
                                                    <td *ngIf="item.type === 'Invoice'">
                                                        {{item.sgst}}</td>
                                                    <td *ngIf="item.type === 'Invoice'">
                                                        {{item.igst}}</td>
                                                    <td *ngIf="item.type === 'Invoice'">
                                                        {{item.cess}}</td>
                                                    <td *ngIf="item.type === 'Invoice'">
                                                        {{item.cess}}</td>
                                                    <td *ngIf="item.type === 'Invoice'">{{item.vat}}</td>
                                                </tr>


                                            </tbody>
                                        </table>

                                    </div>


                                    <div class="border my-2">
                                        <table class="table table-light mb-0">
                                            <tbody>
                                                <tr>
                                                    <td width="100%">
                                                        <table width="100" class="table mb-1">
                                                            <tbody>
                                                                <tr>
                                                                    <td width="50%" style="vertical-align: middle;">
                                                                        <div class="">

                                                                            <div class="c-p-8">
                                                                                <div style="padding: 2px 5px">
                                                                                    <strong>Generated
                                                                                        By</strong> :
                                                                                    {{invoiceInfo?.company_gst}}
                                                                                </div>
                                                                                <div style="padding:2px 5px">
                                                                                    <strong>Print
                                                                                        Date
                                                                                    </strong> : {{myDate |
                                                                                    date:'mediumDate'}}
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </td>
                                                                    <!-- <td width="33.33%" align="center"
                                                                        style="vertical-align: middle;">
                                                                        <div class="">
                                                                            <div class="c-p-8">
                                                                                <img class="img-fluid"
                                                                                    src="images/bar.PNG" alt="">
                                                                            </div>
                                                                        </div>
                                                                    </td> -->
                                                                    <td width="50%" align="right">
                                                                        <div class="">

                                                                            <div class="c-p-8">
                                                                                <div>
                                                                                    <img class="img-fluid"
                                                                                        src="images/sign.PNG" alt="">
                                                                                </div>
                                                                                <div>
                                                                                    <div style="padding:2px 5px">
                                                                                        <!-- <b>Amount In Words :</b> {{invoiceInfo?.sales_amount_after_tax | amountToWord }}
                                                                                        <br> -->
                                                                                        <b>Amount In Words
                                                                                            :</b>
                                                                                        {{invoiceInfo?.amount_in_word ||
                                                                                        (invoiceInfo?.sales_amount_after_tax
                                                                                        | amountToWord)}}
                                                                                        <br>

                                                                                    </div>
                                                                                    <div style="padding:2px 5px">
                                                                                        <strong> System Generated On
                                                                                        </strong> :
                                                                                        {{invoiceInfo.ack_date |
                                                                                        date:'medium'}}
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </td>
                                                                </tr>

                                                            </tbody>
                                                        </table>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>


                                </div>
                            </div>
                        </div>
                    </div>

                    <div *ngIf="this.CreditInvoice">
                        <div class="min-h">


                            <div>
                                <div class="border px-2 ">
                                    <div>
                                        <table class="table mb-0">
                                            <tbody>
                                                <tr>
                                                    <td width="50%" style="vertical-align: middle;">
                                                        <div class="logo">
                                                            <div class="mb-3">
                                                                <img class="img-fluid"
                                                                    [src]="apiDomain + companyData?.company_logo"
                                                                    alt="">
                                                            </div>
                                                            <div>
                                                                <address>
                                                                    <b>{{invoiceInfo.address_1}}</b>
                                                                </address>
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <td width="50%" align="right">
                                                        <div class="qr">
                                                            <img class="img-fluid"
                                                                [src]="apiDomain + invoiceInfo.credit_qr_code_image"
                                                                alt="">
                                                        </div>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>

                                    <div>
                                        <table class="table mb-0">
                                            <tbody>
                                                <tr>
                                                    <td width="100%">
                                                        <div class="border">
                                                            <div class="heading">
                                                                <h4><strong>1. e-Invoice
                                                                        Details</strong></h4>
                                                            </div>
                                                            <div class="c-p-8">
                                                                <table>
                                                                    <tr>
                                                                        <td style="max-width: 200px;">
                                                                            <strong>IRN</strong> :
                                                                            {{invoiceInfo.credit_irn_number}}
                                                                        </td>
                                                                        <td><strong>Ack. No : <br>
                                                                            </strong> {{invoiceInfo.credit_ack_no}}
                                                                        </td>
                                                                        <td><strong>Ack. Date : <br>
                                                                            </strong> {{invoiceInfo.credit_ack_date }}
                                                                        </td>
                                                                    </tr>
                                                                </table>
                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>

                                            </tbody>
                                        </table>
                                    </div>

                                    <div>
                                        <table class="table mb-0">
                                            <tbody>
                                                <tr>
                                                    <td width="100%">
                                                        <div class="border">
                                                            <div class="heading">
                                                                <h4><strong>2. Transaction
                                                                        Details</strong></h4>
                                                            </div>
                                                            <div class="c-p-8">
                                                                <table>
                                                                    <tr>
                                                                        <td width="15%">
                                                                            <strong>Category</strong> :
                                                                            {{invoiceInfo.invoice_type}}
                                                                        </td>
                                                                        <td width="25%">
                                                                            <strong>Invoice No
                                                                            </strong> : {{invoiceInfo.invoice_number}}
                                                                        </td>
                                                                        <td *ngIf="this.CreditInvoice" width="30%">
                                                                            <strong>Document Type
                                                                            </strong> : Credit Invoice
                                                                        </td>
                                                                        <td width="30%">
                                                                            <strong>Document Date
                                                                            </strong> :{{invoiceInfo.invoice_date | date
                                                                            :'dd/MM/yyyy'}}
                                                                        </td>
                                                                    </tr>

                                                                </table>

                                                                <table class="">

                                                                </table>
                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>

                                            </tbody>
                                        </table>
                                    </div>

                                    <div>
                                        <table class="table mb-0">
                                            <tbody>
                                                <tr>
                                                    <td width="100%">
                                                        <div class="border">
                                                            <div class="heading">
                                                                <h4><strong>3. Party
                                                                        Details</strong></h4>
                                                            </div>
                                                            <div class="c-p-8">
                                                                <table class="party">
                                                                    <tr>
                                                                        <td width="49%" style="vertical-align: top;">
                                                                            <div>
                                                                                <h5><strong>Seller</strong>
                                                                                </h5>
                                                                            </div>

                                                                            <div class="max-500">
                                                                                <p class="mb-1">
                                                                                    <b>GSTIN </b>:
                                                                                    {{invoiceInfo?.company_gst}}, <b
                                                                                        class="ml-1">PAN </b>:
                                                                                    {{invoiceInfo?.company_gst?.substring(2).slice(0,
                                                                                    -3)}}
                                                                                </p>
                                                                                <p class="mb-1">
                                                                                    <b>FSSAI LIC No </b>:
                                                                                    {{invoiceInfo?.company_fssai_number}}
                                                                                </p>
                                                                                <p>{{invoiceInfo?.company_name}}<br>{{invoiceInfo?.company_legal_name}}
                                                                                    <br>
                                                                                    {{invoiceInfo?.company_address_1}}
                                                                                    ,{{invoiceInfo?.company_address_2}}
                                                                                    , {{invoiceInfo?.company_location}},
                                                                                    {{invoiceInfo?.company_pincode}}
                                                                                </p>
                                                                            </div>
                                                                        </td>
                                                                        <td width="51%"
                                                                            style="vertical-align: top;border-left: 1px solid rgba(102, 102, 102, 0.479);padding-left: 1%;">
                                                                            <div>
                                                                                <h5><strong>Purchaser</strong>
                                                                                </h5>
                                                                            </div>

                                                                            <div
                                                                                *ngIf="invoiceInfo?.invoice_type == 'B2B'">
                                                                                <p class="mb-1">
                                                                                    <b>GSTIN </b>:
                                                                                    {{invoiceInfo.gst_number}}
                                                                                </p>
                                                                                <p> {{invoiceInfo.legal_name}}
                                                                                    <br>
                                                                                    {{invoiceInfo.address_floor_number?invoiceInfo.address_floor_number+',':''}}
                                                                                    {{invoiceInfo.address_1?invoiceInfo.address_1+',':''}}
                                                                                    {{invoiceInfo.address_2 !==
                                                                                    invoiceInfo.address_1
                                                                                    ?invoiceInfo.address_2+',':''}}
                                                                                    <br>
                                                                                    {{invoiceInfo.address_street?invoiceInfo.address_street+',':''}}
                                                                                    {{invoiceInfo.location?invoiceInfo.location+',':''}}
                                                                                    {{invoiceInfo.pincode}}
                                                                                    {{invoiceInfo.email?","+invoiceInfo.email:''}}
                                                                                    <br>
                                                                                    <b> Place of Supply </b> :
                                                                                    {{invoiceInfo?.place_of_supply_name}}({{(invoiceInfo.place_of_supply
                                                                                    | trim) || 'NA'}})
                                                                                </p>
                                                                            </div>
                                                                        </td>
                                                                    </tr>

                                                                </table>

                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>

                                            </tbody>
                                        </table>
                                    </div>

                                    <div>
                                        <!-- <table class="table mb-0">
                                            <tbody>
                                                <tr>
                                                    <td width="100%"> -->
                                        <div class="pdf-table">
                                            <div class="heading b-h">
                                                <h4><strong>4. Item
                                                        Details</strong></h4>
                                            </div>
                                            <div class="c-p-8  table-responsive">
                                                <table class="table pdfTable goods mb-0">
                                                    <thead>
                                                        <tr>
                                                            <th>Date</th>
                                                            <th>Product Description
                                                            </th>

                                                            <th>SAC/HSN CODE</th>
                                                            <th>Item Value</th>
                                                            <th>GST Rate</th>

                                                            <!-- <th>S.CESS</th> -->
                                                            <th>CESS</th>




                                                            <th>
                                                                Total Item Value
                                                            </th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>


                                                        <tr *ngFor="let item of invoiceInfo.items; let i = index">
                                                            <td style="min-width: 80px;"
                                                                *ngIf="item.item_mode === 'Credit'">
                                                                {{item?.date | date:'dd- MM-yyyy'}}</td>
                                                            <td *ngIf="item.item_mode === 'Credit'">
                                                                {{item.description}}
                                                            </td>
                                                            <td *ngIf="item.item_mode === 'Credit'">
                                                                {{item.sac_code}}
                                                            </td>
                                                            <td *ngIf="item.item_mode === 'Credit'" class="text-right">
                                                                {{item.item_value}}
                                                            </td>
                                                            <td *ngIf="item.item_mode === 'Credit'" class="text-right">
                                                                {{item.sgst_amount + item.igst_amount + item.cgst_amount
                                                                | number : '0.2'}}
                                                            </td>
                                                            <!-- <td *ngIf="item.item_mode === 'Credit'" class="text-right">
                                                                N/A</td> -->
                                                            <td *ngIf="item.item_mode === 'Credit'" class="text-right">
                                                                N/A</td>
                                                            <td *ngIf="item.item_mode === 'Credit'" class="text-right">
                                                                {{item.item_value_after_gst | number : '0.2'}}
                                                            </td>
                                                        </tr>

                                                    </tbody>
                                                </table>

                                            </div>

                                        </div>
                                        <!-- </td>
                                                </tr>

                                            </tbody>
                                        </table> -->
                                    </div>

                                    <div>
                                        <table class="table  goods goods2" style="margin: 0;">
                                            <thead>
                                                <tr>
                                                    <th>HSN/SAC CODE</th>
                                                    <th>SALES
                                                    </th>

                                                    <th>CGST

                                                    </th>
                                                    <th>SGST
                                                    </th>
                                                    <th>IGST

                                                    </th>
                                                    <th>CESS TAX </th>
                                                    <th>CESS TAX2</th>

                                                    <th>
                                                        VAT
                                                    </th>


                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr *ngFor="let item of invoiceInfo.sac_hsn_based_taxes">
                                                    <td *ngIf="item.type === 'Credit'">
                                                        {{item.sac_hsn_code}}</td>
                                                    <td *ngIf="item.type === 'Credit'">
                                                        {{item.amount_before_gst}}</td>
                                                    <td *ngIf="item.type === 'Credit'">{{item.cgst}}
                                                    </td>
                                                    <td *ngIf="item.type === 'Credit'">{{item.sgst}}
                                                    </td>
                                                    <td *ngIf="item.type === 'Credit'">{{item.igst}}
                                                    </td>
                                                    <td *ngIf="item.type === 'Credit'">{{item.cess}}
                                                    </td>
                                                    <td *ngIf="item.type === 'Credit'">{{item.cess}}
                                                    </td>
                                                    <td *ngIf="item.type === 'Credit'">{{item.vat}}</td>
                                                </tr>


                                            </tbody>
                                        </table>

                                    </div>


                                    <div class="border my-2">
                                        <table class="table table-light mb-0">
                                            <tbody>
                                                <tr>
                                                    <td width="100%">
                                                        <table width="100" class="table mb-1">
                                                            <tbody>
                                                                <tr>
                                                                    <td width="50%" style="vertical-align: middle;">
                                                                        <div class="">

                                                                            <div class="c-p-8">
                                                                                <div style="padding: 2px 5px">
                                                                                    <strong>Generated
                                                                                        By</strong> :
                                                                                    {{companyData?.gst_number}}
                                                                                </div>
                                                                                <div style="padding:2px 5px">
                                                                                    <strong>Print
                                                                                        Date
                                                                                    </strong> : {{myDate |
                                                                                    date:'mediumDate'}}
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </td>
                                                                    <!-- <td width="33.33%" align="center"
                                                                        style="vertical-align: middle;">
                                                                        <div class="">
                                                                            <div class="c-p-8">
                                                                                <img class="img-fluid"
                                                                                    src="images/bar.PNG" alt="">
                                                                            </div>
                                                                        </div>
                                                                    </td> -->
                                                                    <td width="50%" align="right">
                                                                        <div class="">

                                                                            <div class="c-p-8">
                                                                                <div>
                                                                                    <img class="img-fluid"
                                                                                        src="images/sign.PNG" alt="">
                                                                                </div>
                                                                                <div>
                                                                                    <div style="padding:2px 5px">
                                                                                        <!-- <b>Amount In Words :</b> {{invoiceInfo?.sales_amount_after_tax | amountToWord }}
                                                                                        <br> -->
                                                                                        <b>Amount In Words
                                                                                            :</b>
                                                                                        {{invoiceInfo?.amount_in_word ||
                                                                                        (invoiceInfo?.sales_amount_after_tax
                                                                                        | amountToWord)}}
                                                                                        <br>

                                                                                    </div>
                                                                                    <div style="padding:2px 5px">
                                                                                        <strong> System Generated On
                                                                                        </strong> :
                                                                                        {{invoiceInfo.credit_ack_date |
                                                                                        date:'mediumDate'}}
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </td>
                                                                </tr>

                                                            </tbody>
                                                        </table>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>


                                </div>
                            </div>
                        </div>
                    </div>


                </div>



            </div>
        </div>
        <div class="close-icon">
            <i (click)="modal.close()" class="ri-close-line"></i>
        </div>
    </div>


</ng-template>


<ng-template #B2CtoB2CTemp let-modal>
    <div class="modal-header">
        <h5 class="" id="modal-basic-title">Tax Payer Details</h5>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form #form="ngForm" (ngSubmit)="onSubmit(form)">
            <div class="">
                <div class="text-center">
                    <small class="text-danger">{{form.form.getError('error')}}</small>
                </div>
                <div>
                    <div class="row">
                        <div class="col-lg-12 col-md-12">
                            <div class="form-group  mb-0">
                                <input type="text" appMatInput class="form-control" id="gst_number" name="gst_number"
                                    (ngModelChange)="changeGST($event)" minlength="15" maxlength="15" appValidateGST
                                    [(ngModel)]="taxPayerDetails.gst_number" #gst_number="ngModel" required>

                                <label for="taxble" class="mat-label">GST Number</label>
                                <!-- <small class="text-danger"
                                      *ngIf="gst_number?">Required</small> -->

                                <!-- <small class="text-danger" *ngIf="checkName">Already Exists</small> -->
                            </div>
                            <small class="text-danger"
                                *ngIf="form.submitted && gst_number?.errors?.required">Required</small> <br />
                            <small class="text-danger" *ngIf="form.submitted && gst_number?.invalid">Enter valid GST
                                Number</small>
                        </div>
                        <div class="col-lg-6 col-md-6 d-none">
                            <div class="form-group">
                                <!-- <select appMatInput name="company" id="company" class="custom-select"
                                      [(ngModel)]="taxPayerDetails.company" #company="ngModel" required>
                                      <option *ngFor="let item of companyList" [value]="item?.name">{{item?.name}}</option>

                                  </select> -->

                                <input type="text" appMatInput class="form-control" id="company" name="company"
                                    [(ngModel)]="taxPayerDetails.company" #company="ngModel" readonly>
                                <label for="company" class="mat-label">Company</label>

                            </div>
                            <small class="text-danger"
                                *ngIf="form.submitted && company?.errors?.required">Required</small>
                        </div>
                    </div>
                    <div class="invoice-details mb-0" *ngIf="checkApiMethod">
                        <div class="row each-block mb-0" style="min-height: auto;">
                            <div class="col-md-6">
                                <u class="list-unstyled">
                                    <li><span>Legal Name</span> <strong placement="top"
                                            ngbTooltip="{{ taxPayerDetails.legal_name || invoiceInfo.legal_name}}"
                                            class="text-truncate">{{(taxPayerDetails.legal_name)||(invoiceInfo.legal_name)
                                            || 'NA'}}</strong></li>
                                    <li><span>GST Number</span> <strong>{{taxPayerDetails.gst_number ||
                                            invoiceInfo.gst_number|| 'NA'}}</strong></li>
                                    <li><span>Address 1</span> <strong placement="top"
                                            ngbTooltip="{{taxPayerDetails.address_1 || invoiceInfo.address_1}}"
                                            class="text-truncate">{{(taxPayerDetails.address_1)||(invoiceInfo.address_1)
                                            || 'NA'}}</strong></li>
                                    <li><span>Location</span> <strong>{{(taxPayerDetails.location
                                            )||(invoiceInfo.location) || 'NA'}}</strong>
                                    </li>
                                </u>
                            </div>
                            <div class="col-md-6">
                                <u class="list-unstyled text-right">
                                    <li><span>Guest Name</span> <strong placement="top"
                                            ngbTooltip="{{taxPayerDetails.trade_name || invoiceInfo.trade_name}}"
                                            class="text-truncate">{{(taxPayerDetails.trade_name)||(invoiceInfo.trade_name)
                                            || 'NA'}}</strong></li>
                                    <li><span>State code</span>
                                        <strong>{{(taxPayerDetails.state_code)||(invoiceInfo.state_code) ||
                                            'NA'}}</strong>
                                    </li>
                                    <li><span>Address 2</span> <strong placement="top"
                                            ngbTooltip="{{taxPayerDetails.address_2||invoiceInfo.address_2}}"
                                            class="text-truncate">{{(taxPayerDetails.address_2)||(invoiceInfo.address_2
                                            ) || 'NA'}}</strong></li>
                                    <li><span>Pincode</span> <strong>{{(taxPayerDetails.pincode)||(invoiceInfo.pincode)
                                            || 'NA'}}</strong></li>
                                </u>
                            </div>
                        </div>
                    </div>




                </div>




                <div class="d-none" *ngIf="checkApiMethod">
                    <div class="row">

                        <div class="col-lg-6 col-md-6">
                            <div class="form-group">
                                <input type="text" appMatInput class="form-control" id="legal_name" name="legal_name"
                                    [(ngModel)]="taxPayerDetails.legal_name" #legal_name="ngModel">
                                <label for="taxble" class="mat-label">Legal Name</label>

                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6">
                            <div class="form-group">
                                <input type="email" appMatInput class="form-control" id="email" name="email"
                                    [(ngModel)]="taxPayerDetails.email" #email="ngModel">
                                <label for="email" class="mat-label">Email</label>

                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6">
                            <div class="form-group">
                                <input type="text" appMatInput class="form-control" id="trade_name" name="trade_name"
                                    [(ngModel)]="taxPayerDetails.trade_name" #trade_name="ngModel">
                                <label for="trade_name" class="mat-label">Trade Name</label>

                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6">
                            <div class="form-group">
                                <input type="text" appMatInput class="form-control" id="address_1" name="address_1"
                                    [(ngModel)]="taxPayerDetails.address_1" #address_1="ngModel">
                                <label for="address_1" class="mat-label">Address 1</label>

                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6">
                            <div class="form-group">
                                <input type="text" appMatInput class="form-control" id="address_2" name="address_2"
                                    [(ngModel)]="taxPayerDetails.address_2" #address_2="ngModel">
                                <label for="address_2" class="mat-label">Address 2</label>

                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6">
                            <div class="form-group">
                                <input type="text" appMatInput class="form-control" id="phone_number"
                                    name="phone_number" [(ngModel)]="taxPayerDetails.phone_number"
                                    #phone_number="ngModel">
                                <label for="phone_number" class="mat-label">Phone Number</label>

                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6">
                            <div class="form-group">
                                <input type="text" appMatInput class="form-control" id="state_code" name="state_code"
                                    [(ngModel)]="taxPayerDetails.state_code" #state_code="ngModel">
                                <label for="state_code" class="mat-label">State Code</label>

                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6">
                            <div class="form-group">
                                <input type="text" appMatInput class="form-control" id="location" name="location"
                                    [(ngModel)]="taxPayerDetails.location" #location="ngModel">
                                <label for="location" class="mat-label">Location</label>

                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6">
                            <div class="form-group">
                                <input type="text" appMatInput class="form-control" id="last_fetched"
                                    name="last_fetched" [(ngModel)]="taxPayerDetails.last_fetched"
                                    #last_fetched="ngModel">
                                <label for="last_fetched" class="mat-label">Last Fetched</label>

                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6">
                            <div class="form-group">
                                <input type="text" appMatInput class="form-control" id="pincode" name="pincode"
                                    [(ngModel)]="taxPayerDetails.pincode" #pincode="ngModel">
                                <label for="pincode" class="mat-label">Pincode</label>

                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6">
                            <div class="form-group">
                                <input type="text" appMatInput class="form-control" id="address_floor_number"
                                    name="address_floor_number" [(ngModel)]="taxPayerDetails.address_floor_number"
                                    #address_floor_number="ngModel">
                                <label for="address_floor_number" class="mat-label">Address Floor Number</label>

                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6">
                            <div class="form-group">
                                <input type="text" appMatInput class="form-control" id="gst_status" name="gst_status"
                                    [(ngModel)]="taxPayerDetails.gst_status" #gst_status="ngModel">
                                <label for="gst_status" class="mat-label">GST Status</label>

                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6">
                            <div class="form-group">
                                <input type="text" appMatInput class="form-control" id="address_street"
                                    name="address_street" [(ngModel)]="taxPayerDetails.address_street"
                                    #address_street="ngModel">
                                <label for="address_street" class="mat-label">Address Street</label>

                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6">
                            <div class="form-group">
                                <input type="text" appMatInput class="form-control" id="tax_type" name="tax_type"
                                    [(ngModel)]="taxPayerDetails.tax_type" #tax_type="ngModel">
                                <label for="tax_type" class="mat-label">Tax Type</label>

                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6">
                            <div class="form-group">
                                <input type="text" appMatInput class="form-control" id="block_status"
                                    name="block_status" [(ngModel)]="taxPayerDetails.block_status"
                                    #block_status="ngModel">
                                <label for="block_status" class="mat-label">Block Status</label>

                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6">
                            <div class="form-group">
                                <select appMatInput name="status" id="status" class="custom-select"
                                    [(ngModel)]="taxPayerDetails.status" #status="ngModel">
                                    <option value="Active">Active</option>
                                    <option value="In-Active">In-Active</option>
                                </select>
                                <label for="status" class="mat-label">Status</label>
                            </div>
                        </div>

                    </div>
                </div>

                <!-- <div class="text-right">
                      <button class="btn btn-primary mb-0 ml-3 text-uppercase" appPermissionButton accessType="write"
                          type="submit">Save</button>
                  </div> -->
            </div>

            <div class="text-right"><button class="btn btn-primary mb-0 ml-3 text-uppercase" appPermissionButton
                    accessType="write" type="submit">Save</button></div>
        </form>
    </div>
</ng-template>

<ng-template #emailTemp let-modal>
    <div class="modal-header">
        <h5 class="" id="modal-basic-title">Email</h5>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form #form="ngForm" (ngSubmit)="emailForm(form,modal)" *ngIf="emailTempData.val">

            <div class="form-group">
                <input type="text" appMatInput class="form-control" id="recipients" name="recipients"
                    [(ngModel)]="emailTempData.val.recipients" #recipients="ngModel" required>
                <label for="recipients" class="mat-label">To</label>
            </div>
            <div class="form-group">
                <input type="text" appMatInput class="form-control" id="template_name" name="template_name"
                    [(ngModel)]="emailTempData.val.name" #template_name="ngModel" required>
                <label for="GuestName" class="mat-label">Email Template</label>
            </div>
            <div class="form-group">
                <input type="text" appMatInput class="form-control" id="subject" name="subject"
                    [(ngModel)]="emailTempData.val.subject" #subject="ngModel" required>
                <label for="subject" class="mat-label">Subject</label>
            </div>
            <quill-editor class="ql-container" id="message" name="message" [(ngModel)]="emailTempData.val.response"
                #message="ngModel" required>


            </quill-editor>
            <div class="mt-3 text-right">
                <button class="btn btn-primary" type="submit" [disabled]="disableEmailBtn">Send</button>
            </div>
        </form>
        <div *ngIf="!emailTempData.val" class="text-center p-4">
            <h3>Please Wait</h3>
        </div>

    </div>
</ng-template>

<div *ngIf="active != 2" id="pmsCreditPDF">

    <div class="row preview pdf-display">
        <div class="col-md-12">

        </div>
        <div class="col-md-12">
            <div class="shadow-sm each-block bg-white" style="overflow:hidden">
                <div class="">

                    <div>
                        <table class="table mb-0">
                            <tbody>
                                <tr>
                                    <td width="50%" style="vertical-align: middle;">
                                        <div class="logo">

                                            <div *ngIf="companyData?.custom_e_tax_invoice_logo == 1; else logoBlock3">
                                                <img [src]="apiDomain + companyData?.custom_e_tax_invoice_logo_image"
                                                    alt=" " width="100%">
                                            </div>
                                            <ng-template #logoBlock3>
                                                <div class="mb-3" *ngIf="companyData?.company_logo">
                                                    <img class="img-fluid" [src]="apiDomain + companyData?.company_logo"
                                                        alt="">
                                                </div>
                                            </ng-template>

                                        </div>
                                    </td>
                                    <td width="50%" align="right">
                                        <div class="qr">
                                            <img class="img-fluid"
                                                *ngIf="invoiceInfo.invoice_category === 'Credit Invoice'"
                                                [src]="apiDomain + invoiceInfo.credit_qr_code_image" alt="">

                                            <img class="img-fluid"
                                                *ngIf="invoiceInfo.invoice_category === 'Debit Invoice'"
                                                [src]="apiDomain + invoiceInfo.qr_code_image" alt="">


                                            <img class="img-fluid"
                                                *ngIf="invoiceInfo.invoice_category === 'Tax Invoice'"
                                                [src]="apiDomain + invoiceInfo.qr_code_image" alt="">
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div>
                        <table class="table mb-0">
                            <tbody>
                                <tr>
                                    <td width="100%">
                                        <div class="border">
                                            <div class="heading">
                                                <h4><strong>1. e-Invoice Details</strong>
                                                </h4>
                                            </div>
                                            <div class="c-p-8">
                                                <table *ngIf="invoiceInfo.invoice_category === 'Tax Invoice'">
                                                    <tr>
                                                        <td><strong>IRN</strong> : {{invoiceInfo.irn_number}}
                                                        </td>
                                                        <td><strong>Ack. No </strong> : {{invoiceInfo.ack_no}}
                                                        </td>
                                                        <td><strong>Ack. Date </strong> : {{invoiceInfo.ack_date |
                                                            date}}
                                                        </td>
                                                    </tr>
                                                </table>
                                                <table *ngIf="invoiceInfo.invoice_category === 'Credit Invoice'">
                                                    <tr>
                                                        <td><strong>IRN</strong> : {{invoiceInfo.credit_irn_number}}
                                                        </td>
                                                        <td><strong>Ack. No </strong> : {{invoiceInfo.credit_ack_no}}
                                                        </td>
                                                        <td><strong>Ack. Date </strong> : {{invoiceInfo.credit_ack_date
                                                            | date}}
                                                        </td>
                                                    </tr>
                                                </table>
                                                <table *ngIf="invoiceInfo.invoice_category === 'Debit Invoice'">
                                                    <tr>
                                                        <td><strong>IRN</strong> : {{invoiceInfo.irn_number}}
                                                        </td>
                                                        <td><strong>Ack. No </strong> : {{invoiceInfo.ack_no}}
                                                        </td>
                                                        <td><strong>Ack. Date </strong> : {{invoiceInfo.ack_date |
                                                            date}}
                                                        </td>
                                                    </tr>
                                                </table>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                                <tr class="bgClr">
                                    <td width="100%">
                                        <div class="border">
                                            <div class="heading">
                                                <h4><strong>Original Invoice
                                                        Details</strong>
                                                </h4>
                                            </div>
                                            <div class="c-p-8">

                                                <table *ngIf="invoiceInfo.invoice_category === 'Credit Invoice'">
                                                    <tr>
                                                        <td><strong>Invoice Number</strong> :
                                                            {{invoiceInfo.tax_invoice_referrence_number}}
                                                        </td>

                                                        <td><strong>Invoice Date </strong> :
                                                            {{invoiceInfo.tax_invoice_referrence_date | date}}
                                                        </td>
                                                    </tr>
                                                </table>
                                                <table *ngIf="invoiceInfo.invoice_category === 'Debit Invoice'">
                                                    <tr>
                                                        <td><strong>Invoice Number</strong> :
                                                            {{invoiceInfo.tax_invoice_referrence_number}}
                                                        </td>

                                                        <td><strong>Invoice Date </strong> :
                                                            {{invoiceInfo.tax_invoice_referrence_date | date}}
                                                        </td>
                                                    </tr>
                                                </table>
                                            </div>
                                        </div>
                                    </td>
                                </tr>

                            </tbody>
                        </table>
                    </div>


                    <div>
                        <table class="table mb-0">
                            <tbody>
                                <tr>
                                    <td width="100%">
                                        <div class="border">
                                            <div class="heading">
                                                <h4><strong>2. Transaction Details</strong>
                                                </h4>
                                            </div>
                                            <div class="c-p-8">
                                                <table>
                                                    <tr>
                                                        <td width="33.33%">
                                                            <strong>Category</strong> : {{invoiceInfo?.invoice_type}}
                                                        </td>
                                                        <td width="33.33%"><strong>Invoice
                                                                No </strong> : {{invoiceInfo?.name}} </td>
                                                        <td width="33.33%"></td>
                                                    </tr>

                                                </table>

                                                <table class="">
                                                    <tr>
                                                        <td width="33.33%"><strong>Document
                                                                Type </strong> : {{invoiceInfo?.invoice_category}}
                                                        </td>
                                                        <td width="33.33%"><strong>Document
                                                                Date </strong> : {{invoiceInfo?.invoice_date}}
                                                        </td>
                                                        <td width="33.33%"></td>
                                                    </tr>
                                                </table>
                                            </div>
                                        </div>
                                    </td>
                                </tr>

                            </tbody>
                        </table>
                    </div>

                    <div>
                        <table class="table mb-0">
                            <tbody>
                                <tr>
                                    <td width="100%">
                                        <div class="border">
                                            <div class="heading">
                                                <h4><strong>3. Party Details</strong></h4>
                                            </div>
                                            <div class="c-p-8">
                                                <table>
                                                    <tr>
                                                        <td width="50%">
                                                            <div>
                                                                <h5><strong>Seller</strong>
                                                                </h5>
                                                            </div>

                                                            <div class="max-500">
                                                                <p class="mb-1"><b>GSTIN
                                                                    </b>:{{invoiceInfo?.company_gst}}
                                                                </p>
                                                                <div>
                                                                    <address>
                                                                        <b>{{invoiceInfo?.company_legal_name}},
                                                                            <br>
                                                                            {{invoiceInfo?.company_address_1}},
                                                                            <br>


                                                                            {{invoiceInfo?.company_location}}
                                                                            <br>
                                                                            {{invoiceInfo?.company_pincode}},
                                                                            <br>
                                                                        </b>
                                                                    </address>
                                                                </div>
                                                            </div>
                                                        </td>

                                                        <td width="50%">
                                                            <div>
                                                                <h5><strong>Purchaser</strong>
                                                                </h5>
                                                            </div>

                                                            <div class="max-500"
                                                                *ngIf="invoiceInfo?.invoice_type == 'B2B'">
                                                                <p class="mb-1">GSTIN : {{invoiceInfo?.gst_number}}
                                                                </p>
                                                                <div>
                                                                    <address>
                                                                        <b>{{invoiceInfo?.legal_name}},
                                                                            <br>
                                                                            {{invoiceInfo.address_floor_number?invoiceInfo.address_floor_number+',':''}}
                                                                            {{invoiceInfo.address_1?invoiceInfo.address_1+',':''}}
                                                                            {{invoiceInfo.address_2 !==
                                                                            invoiceInfo.address_1
                                                                            ?invoiceInfo.address_2+',':''}}
                                                                            <br>
                                                                            {{invoiceInfo.address_street?invoiceInfo.address_street+',':''}}
                                                                            {{invoiceInfo.location?invoiceInfo.location+',':''}}
                                                                            {{invoiceInfo.pincode}}
                                                                            {{invoiceInfo.email?","+invoiceInfo.email:''}}
                                                                            <br>
                                                                        </b>
                                                                        <b>Place of Supply </b>:
                                                                        {{invoiceInfo?.place_of_supply_name}}({{(invoiceInfo.place_of_supply
                                                                        | trim) || 'NA'}})
                                                                    </address>
                                                                </div>
                                                            </div>
                                                        </td>

                                                    </tr>

                                                </table>


                                            </div>
                                        </div>
                                    </td>
                                </tr>

                            </tbody>
                        </table>
                    </div>



                    <div>
                        <!-- <table class="table pdfTable mb-0">
                            <tbody>
                                <tr>
                                    <td width="100%"> -->
                        <div class="pdf-table">
                            <div class="heading b-h">
                                <h4><strong>4. Items Details</strong></h4>
                            </div>
                            <div class="c-p-8">
                                <table class="table pdfTable goods mb-0">
                                    <thead>
                                        <tr>
                                            <!-- <th>S.NO</th> -->
                                            <th>Date</th>
                                            <th>Product Description</th>

                                            <th>SAC/HSN</th>
                                            <th>Item Value</th>
                                            <th>GST</th>

                                            <!-- <th>S.CESS</th> -->
                                            <th>CESS</th>
                                            <th>Quantity</th>
                                            <th>
                                                Total Item Value
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let item of sacCodeDetails;let i = index">
                                            <!-- <td>{{i+1}}</td> -->
                                            <td>{{item?.date | date:'dd- MM-yyyy'}}</td>
                                            <td>{{item.item_name}}</td>
                                            <td>{{item.sac_code}}</td>
                                            <td class="text-right">
                                                {{item.item_value}}</td>
                                            <td class="text-right">
                                                {{item.cgst_amount + item.sgst_amount + item.igst_amount }}
                                            </td>
                                            <!-- <td class="text-right">
                                                {{item.state_cess_amount}}
                                            </td> -->
                                            <td class="text-right">
                                                {{item.cess_amount}}
                                            </td>
                                            <td>{{item.quantity}}</td>
                                            <td class="text-right">
                                                {{item.item_value_after_gst}}
                                            </td>
                                        </tr>

                                    </tbody>
                                </table>

                            </div>

                        </div>
                        <!-- </td>
                                </tr>

                            </tbody>
                        </table> -->
                    </div>


                    <div class="my-2 mx-2">
                        <table class="table  goods goods2" style="margin: 0;">
                            <thead>
                                <tr style="text-align:left;">
                                    <th>Tax'ble Value</th>
                                    <th>CGST
                                    </th>

                                    <th>SGST

                                    </th>
                                    <th>IGST
                                    </th>
                                    <th>Central CESS

                                    </th>
                                    <!-- <th>State CESS </th> -->
                                    <th>VAT</th>
                                    <th>Discount(Rs)</th>
                                    <th>Other Charges
                                    </th>
                                    <th>
                                        Round off
                                    </th>

                                    <th>
                                        Total Amount
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr style="text-align:right;">
                                    <td>{{invoiceInfo?.pms_invoice_summary_without_gst}}</td>
                                    <td>{{invoiceInfo.invoice_category === 'Credit Invoice' ?
                                        invoiceInfo?.credit_cgst_amount : invoiceInfo?.cgst_amount}}
                                    </td>
                                    <td>{{invoiceInfo.invoice_category === 'Credit Invoice' ?
                                        invoiceInfo?.credit_sgst_amount : invoiceInfo?.sgst_amount}}
                                    </td>
                                    <td>{{invoiceInfo.invoice_category === 'Credit Invoice' ?
                                        invoiceInfo?.credit_igst_amount : invoiceInfo?.igst_amount}}
                                    </td>
                                    <td>{{invoiceInfo.invoice_category === 'Credit Invoice' ?
                                        invoiceInfo?.total_credit_central_cess_amount :
                                        invoiceInfo?.total_central_cess_amount}}
                                    </td>
                                    <!-- <td>{{invoiceInfo.invoice_category === 'Credit Invoice' ?
                                        invoiceInfo?.total_credit_state_cess_amount :
                                        invoiceInfo?.total_state_cess_amount}}
                                    </td> -->
                                    <td>{{invoiceInfo.invoice_category === 'Credit Invoice' ?
                                        invoiceInfo?.total_credit_vat_amount : invoiceInfo?.total_vat_amount}}
                                    </td>
                                    <td>{{invoiceInfo?.discount_value_before_gst}}</td>
                                    <td>{{invoiceInfo?.other_charges}}</td>
                                    <td>{{invoiceInfo?.invoice_round_off_amount}}</td>
                                    <td>{{invoiceInfo?.sales_amount_after_tax}}</td>
                                </tr>

                            </tbody>
                        </table>

                    </div>

                    <div class="mx-2">
                        <table class="table  goods goods2" style="margin: 0;">
                            <thead>
                                <tr>
                                    <th>HSN/SAC CODE</th>
                                    <th>SALES
                                    </th>

                                    <th>CGST

                                    </th>
                                    <th>SGST
                                    </th>
                                    <th>IGST

                                    </th>
                                    <th>CESS TAX </th>
                                    <!-- <th>CESS TAX2</th> -->

                                    <th>
                                        VAT
                                    </th>


                                </tr>
                            </thead>
                            <tbody>
                                <!-- <tr *ngFor="let item of taxableArr">

                                    <td>
                                        {{item.sac_code}}</td>
                                    <td>
                                        {{item.item_value}}</td>
                                    <td>
                                        {{item.cgst_amount}}</td>
                                    <td>
                                        {{item.sgst_amount}}</td>
                                    <td>
                                        {{item.igst_amount}}</td>
                                    <td>
                                        {{item.cess}}</td>
                                    <td>
                                        {{item.cess_amount}}</td>
                                    <td>{{item.vat_amount}}</td>
                                </tr> -->


                                <tr
                                *ngFor="let sac of invoiceInfo.sac_hsn_based_taxes;let i = index">
                               
                                <td>{{sac.sac_hsn_code}}</td>
                                <td>{{sac.amount_before_gst}}</td>
                                <td>{{sac.cgst}}</td>
                                <td>{{sac.sgst}}</td>
                                <td>{{sac.igst}}</td>
                                <!-- <td>{{sac.state_cess}}</td> -->
                                <td>{{sac.cess}}</td>
                               
                                
                                <td>{{sac.vat}}</td>
                            </tr>

                            </tbody>
                        </table>

                    </div>
                    <div class="py-2 m-2 notes" *ngIf="companyData?.custom_e_tax_invoice == 1">
                        <h6><b>Remarks : </b></h6>
                        <div class="" [innerHTML]="invoiceInfo?.note"></div>
                    </div>
                </div>
                <div *ngIf="companyData?.custom_e_tax_invoice_footer == 1">
                    <img [src]="apiDomain + companyData?.custom_e_tax_invoice_footer_image" alt=" " width="100%">
                </div>
            </div>
        </div>
    </div>
</div>

<!-- SEZ Generate IRN -->
<ng-template #sezGenerateIRN let-modal>
    <div class="modal-header">
        <h5 class="modal-title">Please select invoice sez supply type</h5>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body text-center">
        <form (ngSubmit)="sezGenerateIRNFunc(form,modal)" #form="ngForm">
            <div class="custom-control custom-radio custom-control-inline radioBorder my-4 mr-3">
                <input type="radio" [disabled]="invoiceInfo.total_gst_amount == 0" class="custom-control-input"
                    id="SEZWP" name="SEZWP" #SEZWP="ngModel" [(ngModel)]="this.invoiceInfo.suptyp" value="SEZWP">
                <label class="custom-control-label" for="SEZWP"
                    [ngClass]="{'cursor-pointer':(invoiceInfo.total_gst_amount > 0),'cursor-notallowed':(invoiceInfo.total_gst_amount == 0)}">SEZWP</label>
            </div>
            <div class="custom-control custom-radio custom-control-inline radioBorder my-4">
                <input type="radio" [disabled]="invoiceInfo.total_gst_amount > 0" class="custom-control-input"
                    id="SEZWOP" name="SEZWOP" [(ngModel)]="this.invoiceInfo.suptyp" #SEZWOP="ngModel" value="SEZWOP">
                <label class="custom-control-label" for="SEZWOP"
                    [ngClass]="{'cursor-pointer':(invoiceInfo.total_gst_amount == 0),'cursor-notallowed':(invoiceInfo.total_gst_amount > 0)}">SEZWOP</label>
            </div>
            <div class="d-flex justify-content-center">
                <button type="reset" (click)="modal.dismiss('Cross click')"
                    class="btn btn-sm btn-outline-dark">Cancel</button>
                <button type="submit" class="btn btn-sm ml-2 btn-primary">Update</button>
            </div>
        </form>
    </div>
</ng-template>

<!-- Edit Address1   -->
<ng-template #editAddress1 let-modal>
    <div class="modal-header">
        <h5 class="modal-title">Update Address 1</h5>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form (ngSubmit)="updateInvoiceAddress1(form,modal)" #form="ngForm">
            <div class="form-group">
                <input class="form-control" type="text" name="" id="" placeholder="Address 1" name="address1"
                    [(ngModel)]="address1_state" #address1="ngModel" required>

            </div>
            <div class="d-flex justify-content-center">
                <button type="reset" (click)="modal.dismiss('Cross click')"
                    class="btn btn-sm btn-outline-dark">Cancel</button>
                <button type="submit" class="btn btn-sm ml-2 btn-primary">Update</button>
            </div>
        </form>
    </div>
</ng-template>

<!-- Edit Address2  -->
<ng-template #editAddress2 let-modal>
    <div class="modal-header">
        <h5 class="modal-title">Update Address 2</h5>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form (ngSubmit)="updateInvoiceAddress2(form,modal)" #form="ngForm">
            <div class="form-group">
                <input class="form-control" type="text" name="" id="" placeholder="Address 2" name="address2"
                    [(ngModel)]="address2_state" #address2="ngModel" required>

            </div>
            <div class="d-flex justify-content-center">
                <button type="reset" (click)="modal.dismiss('Cross click')"
                    class="btn btn-sm btn-outline-dark">Cancel</button>
                <button type="submit" class="btn btn-sm ml-2 btn-primary">Update</button>
            </div>
        </form>
    </div>
</ng-template>

<!-- Edit Location -->
<ng-template #editInvoiceLocation let-modal>
    <div class="modal-header">
        <h5 class="modal-title">Update Location</h5>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form (ngSubmit)="updateInvoiceLocation(form,modal)" #form="ngForm">
            <div class="form-group">
                <input class="form-control" type="text" name="" id="" placeholder="Location" name="location"
                    [(ngModel)]="location_state" #location="ngModel" required>

            </div>
            <div class="d-flex justify-content-center">
                <button type="reset" (click)="modal.dismiss('Cross click')"
                    class="btn btn-sm btn-outline-dark">Cancel</button>
                <button type="submit" class="btn btn-sm ml-2 btn-primary">Update</button>
            </div>
        </form>
    </div>
</ng-template>
<!-- Edit Place of Supply-->
<ng-template #editPlaceOfSupply let-modal>
    <div class="modal-header">
        <h5 class="modal-title">Update Place Of Supply</h5>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form (ngSubmit)="updateInvoicePOS(form,modal)" #form="ngForm">
            <div class="form-group">
                <ng-select class="custom" [items]="stateCodeList" bindLabel="state" placeholder="Place of supply"
                    name="place_of_supply" (ngModelChange)="modelChangeFn1($event)" [(ngModel)]="place_of_supply_state"
                    #place_of_supply="ngModel" required>
                </ng-select>
            </div>
            <div class="d-flex justify-content-center">
                <button type="reset" (click)="modal.dismiss('Cross click')"
                    class="btn btn-sm btn-outline-dark">Cancel</button>
                <button type="submit" class="btn btn-sm ml-2 btn-primary">Update</button>
            </div>
        </form>
    </div>
</ng-template>

<ng-template #viewBill let-modal>
    <div class="modal-header border-0 b-r-0 pb-0 summary my-auto text-left d-block">
        <h6 class="mb-0 px-3"><strong>View Pos Bill</strong></h6>
        <!-- <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button> -->
    </div>
    <div class="modal-body p-2 pdf-view2 bg-white shadow-sm">
        <div class="card">
            <object *ngIf="pos_bill_data?.pos_bill" [data]=" (apiDomain + pos_bill_data?.pos_bill) | safe"
                type="application/pdf" width="100%" height="500"></object>
        </div>
    </div>
    <div class="close-icon">
        <i (click)="modal.close()" class="ri-close-line"></i>
    </div>
</ng-template>