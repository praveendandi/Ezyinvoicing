<section class="bg-login">
    <div class="container">
        <div class="row">
            <div class="col-md-7 my-auto">
                <div class="content">
                    <h2>Automated <br>
                        <span class="text-secondary"> E-Invoice</span> Integration Process</h2>
                    <div class="mb-5">
                        <span class="c-border"></span>
                    </div>
                    <div>
                        <ul class="list-unstyled">
                            <li><i class="ri-check-line"></i> Instant Invoice Submission</li>
                            <li><i class="ri-check-line"></i> Imprint IRN & QR Code to submitted Invoice</li>
                            <li><i class="ri-check-line"></i> Monthly Invoicing Reconciliation</li>
                        </ul>
                        <ul class="list-unstyled">
                            <li><i class="ri-close-fill"></i> No Bulk Invoice Uploads Required</li>
                            <li><i class="ri-close-fill"></i> No PMS Upgrades Required</li>
                            <li><i class="ri-check-line"></i> Works with any PMS</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="col-md-5">
                <div class="card p-2 mb-4">
                    <div class="card-body">
                        <div class="row mb-4">
                            <div class="col-12">
                                <div class="logo mb-2">
                                    <img class="img-fluid" src="assets/images/EzyinvoiceLogo.png" alt="logo">
                                </div>
                                <h2>Welcome to EZY Invoice</h2>
                                <p class="text-muted"><b>Sign in using your credentials</b></p>
                            </div>

                        </div>
                        <form #form="ngForm">
                            <div class="text-center mb-4">
                                <p class="text-danger"><strong>{{form.form.getError('error')}}</strong></p>
                            </div>
                            <div class="form-group">
                                <input type="text" appMatInput name="username" id="name" class="form-control" ngModel #name="ngModel" required />
                                <label for="name" class="mat-label">Username</label>
                                <small class="text-danger" *ngIf="form.submitted && name?.errors?.required">Required</small>
                            </div>
                            <div class="form-group" *ngIf="show_password">
                                <input type="password" appMatInput name="password" id="password" class="form-control" ngModel #password="ngModel" maxlength="30" required />
                                <label for="password" class="mat-label">Password</label>
                                <small class="text-danger" *ngIf="form.submitted && password?.errors?.required">Required</small>
                            </div>
                            <div class="pt-3">
                                <button class="btn btn-block btn-primary text-uppercase" *ngIf="!show_password" (click)="resetPAssword(form)">Sign In</button>
                                <button class="btn btn-block btn-primary text-uppercase" *ngIf="show_password" (click)="onSubmit(form)">Sign In</button>

                                <div class="mt-3 faq">
                                    <a class="text-dark" target="_blank" [routerLink]="[ '/faqs']"><b><i class="ri-wechat-line"></i> FAQs</b></a>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>

                <div>
                    <div class="">
                        <p class="text-white m-0">Have a problem? Contact us at
                            <a href="mailto: support@caratred.com"> support@caratred.com</a></p> <br/>
                        <!-- <p class="text-white m-0">Toll Free Number : <a> 18008913354</a> </p> -->
                    </div>
                </div>

                <!-- <div class="card p-2">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-12">
                                <h6><b>For Demo,</b></h6>
                            </div>
                        </div>
                        <div class="mt-2">
                            <button class="btn btn-block btn-secondary text-uppercase">Contact Us</button>
                        </div>
                    </div>
                </div> -->
            </div>
        </div>
    </div>
</section>

<ng-template #content let-modal>
    <div class="modal-header ">
        <h6 id="modal-basic-title"><strong>Reset Password </strong></h6>
        <!-- <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
             <span aria-hidden="true">&times;</span>
        </button> -->
    </div>

    <div class="modal-body ">
        <form #form="ngForm">
            <div class="form-group ">
                <input [(ngModel)]="change_user_details.old_password" appMatInput id="old_password" class="form-control" type="password" name="old_password" #old_password="ngModel" (ngModelChange)="check_old_password($event)" required>
                <label for="old_password" class="mat-label">Old Password</label>
                <small class="text-danger" *ngIf="wrong_password == 'Incorrect User or Password'">{{wrong_password}}</small>
                <small class="text-success" *ngIf="wrong_password == 'Password matched'" >{{wrong_password}}</small>
            </div>
            <div class="form-group ">
                <input [(ngModel)]="change_user_details.new_password" appMatInput id="newPassword" class="form-control" type="password" name="new_password" #new_password="ngModel" pattern="^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{6,20}$" required>
                <label for="newPassword" class="mat-label">New Password</label>
                <small class="text-mute note-font">should contain special characters and alphanumeric with min 6 and max 20 characters</small><br>
                <small class="text-danger" *ngIf="form.submitted && new_password?.errors?.required ">Required</small>
                <small class="text-danger" *ngIf="form.submitted && new_password.errors.pattern">Check password pattern</small>
                <small class="text-danger" *ngIf="new_password?.value && (new_password?.value == old_password?.value)">Try new password</small>
            </div>
            <!-- <h6>Do you want to change password?</h6> -->
            
            <div class="form-group">
                <input appMatInput id="confirmPassword" class="form-control" type="password" name="confirmPassword" [(ngModel)]="change_user_details.confirmPassword" #confirmPassword="ngModel" required>
                <label for="confirmPassword" class="mat-label">Confirm Password</label>
                <small class="text-danger" *ngIf="new_password?.value != confirmPassword?.value && confirmPassword?.value">password mismatch</small>
            </div>
           
        </form>
    </div>
    <div class="modal-footer border-0 d-block text-center pb-4">
        <!-- <button type="button" class="btn btn-outline-dark" (click)="modal.close('Save click')">Cancel</button> -->
        <button type="button" (click)="onSubmitResetPwd(form)" [disabled]="form.valid && (wrong_password == 'Incorrect User or Password' || (new_password?.value != confirmPassword?.value ) || (new_password?.value == old_password?.value) )" class="btn btn-primary">Confirm</button>
    </div>

</ng-template>