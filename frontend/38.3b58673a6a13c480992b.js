(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{"5B7W":function(t,e,c){"use strict";c.r(e),c.d(e,"IpPrintersModule",(function(){return O}));var i=c("ofXK"),n=c("tyNb"),r=c("fXoL"),s=c("t0ZU"),a=c("wd/R"),o=c("Kj3r"),l=c("eIep"),d=c("cp0P"),h=c("1kSV"),u=c("tk/3"),g=c("5eHb"),p=c("MgRC"),m=c("3Pt+");const f=["printerModal"],b=function(t,e){return{"badge-success":t,"badge-danger":e}};function v(t,e){if(1&t){const t=r.ic();r.hc(0,"tr"),r.hc(1,"td"),r.cd(2),r.gc(),r.hc(3,"td"),r.cd(4),r.gc(),r.hc(5,"td"),r.cd(6),r.gc(),r.hc(7,"td"),r.cd(8),r.gc(),r.hc(9,"td"),r.cd(10),r.xc(11,"date"),r.gc(),r.hc(12,"td"),r.hc(13,"span",25),r.cd(14),r.gc(),r.gc(),r.hc(15,"td"),r.hc(16,"span",26),r.sc("click",(function(){r.Qc(t);const c=e.$implicit;return r.wc().addPrinter("edit",c)})),r.cd(17,"Edit"),r.gc(),r.gc(),r.gc()}if(2&t){const t=e.$implicit,c=e.index;r.Nb(2),r.dd(c+1),r.Nb(2),r.dd(null==t?null:t.printer_name),r.Nb(2),r.ed(" ",(null==t?null:t.printer_ip)||"N/A"," "),r.Nb(2),r.dd(null==t?null:t.port),r.Nb(2),r.ed(" ",r.yc(11,7,null==t?null:t.last_used)||""," "),r.Nb(3),r.Ec("ngClass",r.Jc(9,b,"Enable"===(null==t?null:t.status),"Disable"===(null==t?null:t.status))),r.Nb(1),r.ed(" ",(null==t?null:t.status)||"N/A","")}}function P(t,e){1&t&&(r.hc(0,"div",27),r.hc(1,"h5"),r.hc(2,"b"),r.cd(3,"No Data Found"),r.gc(),r.gc(),r.gc())}function y(t,e){if(1&t){const t=r.ic();r.hc(0,"div",28),r.hc(1,"div",29),r.hc(2,"select",30),r.sc("ngModelChange",(function(e){return r.Qc(t),r.wc().filters.itemsPerPage=e}))("change",(function(){return r.Qc(t),r.wc().checkPagination()})),r.hc(3,"option",31),r.cd(4,"20"),r.gc(),r.hc(5,"option",31),r.cd(6,"50"),r.gc(),r.hc(7,"option",31),r.cd(8,"100"),r.gc(),r.hc(9,"option",31),r.cd(10,"150"),r.gc(),r.hc(11,"option",31),r.cd(12,"500"),r.gc(),r.gc(),r.gc(),r.gc()}if(2&t){const t=r.wc();r.Nb(2),r.Ec("ngModel",t.filters.itemsPerPage),r.Nb(1),r.Ec("value",20),r.Nb(2),r.Ec("value",50),r.Nb(2),r.Ec("value",100),r.Nb(2),r.Ec("value",150),r.Nb(2),r.Ec("value",500)}}function C(t,e){1&t&&(r.hc(0,"small",59),r.cd(1,"Required"),r.gc())}function M(t,e){1&t&&(r.hc(0,"div"),r.hc(1,"small",59),r.hc(2,"b"),r.cd(3,"You have entered an invalid IP address!"),r.gc(),r.gc(),r.gc())}function w(t,e){1&t&&(r.hc(0,"small",59),r.cd(1,"Required"),r.gc())}function N(t,e){if(1&t){const t=r.ic();r.hc(0,"div",32),r.hc(1,"h6"),r.hc(2,"b",33),r.cd(3),r.gc(),r.gc(),r.hc(4,"button",34),r.sc("click",(function(){return e.$implicit.dismiss("Cross click")})),r.hc(5,"span",35),r.cd(6,"\xd7"),r.gc(),r.gc(),r.gc(),r.hc(7,"div",36),r.hc(8,"form",37,38),r.sc("ngSubmit",(function(){r.Qc(t);const e=r.Oc(9);return r.wc().onSubmit(e)})),r.hc(10,"div",12),r.hc(11,"div",13),r.hc(12,"div",39),r.hc(13,"label",40),r.cd(14,"Printer IP"),r.gc(),r.hc(15,"input",41,42),r.sc("change",(function(e){return r.Qc(t),r.wc().getPrinter(e)}))("ngModelChange",(function(e){return r.Qc(t),r.wc().formData.printer_ip=e})),r.gc(),r.ad(17,C,2,0,"small",43),r.ad(18,M,4,0,"div",44),r.gc(),r.gc(),r.hc(19,"div",13),r.hc(20,"div",39),r.hc(21,"label",45),r.cd(22,"Printer Port"),r.gc(),r.hc(23,"input",46,47),r.sc("ngModelChange",(function(e){return r.Qc(t),r.wc().formData.port=e})),r.gc(),r.gc(),r.gc(),r.hc(25,"div",13),r.hc(26,"div",39),r.hc(27,"label",48),r.cd(28,"Printer Name"),r.gc(),r.hc(29,"input",49,50),r.sc("ngModelChange",(function(e){return r.Qc(t),r.wc().formData.printer_name=e})),r.gc(),r.gc(),r.gc(),r.hc(31,"div",13),r.hc(32,"div",39),r.hc(33,"label",51),r.cd(34,"Status"),r.gc(),r.hc(35,"select",52,53),r.sc("ngModelChange",(function(e){return r.Qc(t),r.wc().contentChange(e)}))("ngModelChange",(function(e){return r.Qc(t),r.wc().formData.status=e})),r.hc(37,"option",54),r.cd(38,"Active"),r.gc(),r.hc(39,"option",55),r.cd(40,"In Active"),r.gc(),r.gc(),r.ad(41,w,2,0,"small",43),r.gc(),r.gc(),r.hc(42,"div",56),r.hc(43,"button",57),r.sc("click",(function(){return e.$implicit.dismiss("Cross click")})),r.cd(44,"Cancel"),r.gc(),r.hc(45,"button",58),r.cd(46,"Save"),r.gc(),r.gc(),r.gc(),r.gc(),r.gc()}if(2&t){const t=r.Oc(9),e=r.Oc(16),c=r.Oc(36),i=r.wc();r.Nb(3),r.ed("",i.viewType," Printer"),r.Nb(12),r.Ec("ngModel",i.formData.printer_ip),r.Nb(2),r.Ec("ngIf",t.touched&&(null==e||null==e.errors?null:e.errors.required)),r.Nb(1),r.Ec("ngIf",i.ipValid&&i.ipPrinterCheck),r.Nb(5),r.Ec("ngModel",i.formData.port),r.Nb(6),r.Ec("ngModel",i.formData.printer_name),r.Nb(6),r.Ec("ngModel",i.formData.status),r.Nb(6),r.Ec("ngIf",t.touched&&(null==c||null==c.errors?null:c.errors.required)),r.Nb(4),r.Ec("disabled",i.ipValid)}}class _{constructor(){this.itemsPerPage=20,this.currentPage=1,this.totalCount=0,this.search=""}}const k=[{path:"",component:(()=>{class t{constructor(t,e,c,i,n){this.modal=t,this.http=e,this.toaster=c,this.activatedRoute=i,this.router=n,this.filters=new _,this.onSearch=new r.q,this.formData={},this.posPrinters=[],this.printerValid=!1,this.ipValid=!1,this.date=a(new Date).format("YYYY-MM-DD HH:mm:ss")}ngOnInit(){this.formData.status="Enable",this.onSearch.pipe(Object(o.a)(500)).subscribe(t=>this.updateRouterParams()),this.getPosPrinters()}updateRouterParams(){this.router.navigate(["home/ip-printer"],{queryParams:this.filters})}addPrinter(t,e){this.printerValid=!1,this.ipValid=!1,"edit"==t?(this.formData=Object.assign({},e),this.viewType="edit"):(this.formData={},this.viewType="add",this.formData.status="Enable"),this.modal.open(this.printerModal,{size:"md",centered:!0})}contentChange(t){console.log(t),this.status=t}onSubmit(t){if(t.form.markAllAsTouched(),t.valid&&"add"===this.viewType){"Disable"===this.status&&(this.formData.last_used=this.date),this.formData.doctype=s.b.posPrinters;const t=new FormData;t.append("doc",JSON.stringify(this.formData)),t.append("action","Save"),this.http.post(""+s.a.fileSave,t).subscribe(t=>{t&&(console.log(t),this.getPosPrinters(),this.toaster.success("successfully added"),this.modal.dismissAll())})}else"Disable"===this.status&&(this.formData.last_used=this.date),this.formData.doctype=s.b.posPrinters,this.http.put(`${s.a.resource}/${s.b.posPrinters}/${this.formData.name}`,this.formData).subscribe(t=>{t&&(console.log(t),this.getPosPrinters(),this.toaster.success("successfully Updated"),this.modal.dismissAll())})}getPosPrinters(){this.activatedRoute.queryParams.pipe(Object(l.a)(t=>{this.filters.totalCount=parseInt(t.totalCount,0)||this.filters.totalCount,this.filters.search=t.search||this.filters.search;const e={filters:[]};this.filters.search&&e.filters.push(["name","like",`%${this.filters.search}%`]),e.limit_page_length=this.filters.itemsPerPage,e.order_by="`tabPOS Printers`.`modified` desc",e.fields=JSON.stringify(["last_used","printer_ip","port","printer_name","status","name"]),e.filters=JSON.stringify(e.filters);const c=this.http.get(`${s.a.resource}/${s.b.posPrinters}`,{params:{fields:JSON.stringify(["count( `tabPOS Printers`.`name`) AS total_count"]),filters:e.filters}}),i=this.http.get(`${s.a.resource}/${s.b.posPrinters}`,{params:e});return Object(d.a)([c,i])})).subscribe(t=>{1==this.filters.currentPage&&(this.posPrinters=[]);const[e,c]=t;this.filters.totalCount=e.data[0].total_count,c.data&&(this.posPrinters=1!==this.filters.currentPage?this.posPrinters.concat(c.data):c.data)})}checkPagination(){this.filters.currentPage=1,this.updateRouterParams()}getPrinter(t,e){var c;this.ipPrinterCheck=null===(c=t.target)||void 0===c?void 0:c.value,this.ValidateIPaddress(this.ipPrinterCheck)}ValidateIPaddress(t){return/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(t)?(this.ipValid=!1,!0):(this.ipValid=!0,!1)}}return t.\u0275fac=function(e){return new(e||t)(r.bc(h.k),r.bc(u.b),r.bc(g.d),r.bc(n.a),r.bc(n.e))},t.\u0275cmp=r.Vb({type:t,selectors:[["app-ip-printers"]],viewQuery:function(t,e){var c;1&t&&r.jd(f,!0),2&t&&r.Nc(c=r.tc())&&(e.printerModal=c.first)},decls:46,vars:4,consts:[[1,"row","mb-3"],[1,"col-md-9","col-lg-9"],[1,"d-flex"],[1,"text-white"],["type","button","appPermissionButton","","accessType","create",1,"btn","btn-primary","ml-3",3,"click"],[1,"ri-add-line"],[1,"col-md-3","text-right"],[1,"position-relative","mt-2","mt-lg-0","mt-md-0"],["type","search","placeholder","Search by Printer IP",1,"form-control","pl-5",3,"ngModel","ngModelChange","keyup","search"],["search",""],[1,"search"],[1,"ri-search-line"],[1,"row"],[1,"col-md-12"],[1,"card","border-0","shadow"],[1,"card-body","p-0"],[1,"table-responsive"],[1,"table","table-bordered"],[1,"pl-4"],[4,"ngFor","ngForOf"],["class","text-center py-5",4,"ngIf"],[1,"col-md-11"],[1,"col-md-1"],["class","text-right mb-2",4,"ngIf"],["printerModal",""],[1,"badge",3,"ngClass"],["appPermissionButton","","accessType","write",1,"text-primary","cursor-pointer",3,"click"],[1,"text-center","py-5"],[1,"text-right","mb-2"],[1,"px-2"],["name","itemsPerPage","id","itemsPerPage",1,"custom-select",3,"ngModel","ngModelChange","change"],[3,"value"],[1,"modal-header"],[1,"text-capitalize"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"ngSubmit"],["form","ngForm"],[1,"form-group"],["for","printer_ip"],["onkeypress","return (event.charCode !=8 && event.charCode ==0  || event.charCode==190 || event.charCode==110 || event.charCode==46 || (event.charCode >= 48 && event.charCode <= 57 ))","id","printer_ip","type","text","name","printer_ip","required","",1,"form-control",3,"ngModel","change","ngModelChange"],["printer_ip","ngModel"],["class","text-danger",4,"ngIf"],[4,"ngIf"],["for","port"],["id","port","type","text","name","port","required","",1,"form-control",3,"ngModel","ngModelChange"],["port","ngModel"],["for","printer_name"],["id","printer_name","type","text","name","printer_name","required","",1,"form-control",3,"ngModel","ngModelChange"],["printer_name","ngModel"],["for","status"],["id","status","name","status","required","",1,"custom-select",3,"ngModel","ngModelChange"],["status","ngModel"],["value","Enable"],["value","Disable"],[1,"text-right","col-md-12"],["type","button",1,"btn","btn-outline-primary",3,"click"],["type","submit",1,"btn","btn-primary","ml-3",3,"disabled"],[1,"text-danger"]],template:function(t,e){if(1&t){const t=r.ic();r.hc(0,"section"),r.hc(1,"div",0),r.hc(2,"div",1),r.hc(3,"div",2),r.hc(4,"h4",3),r.hc(5,"b"),r.cd(6,"POS Printers"),r.gc(),r.gc(),r.hc(7,"button",4),r.sc("click",(function(){return e.addPrinter("add",null)})),r.cc(8,"i",5),r.gc(),r.gc(),r.gc(),r.hc(9,"div",6),r.hc(10,"div",7),r.hc(11,"input",8,9),r.sc("ngModelChange",(function(t){return e.filters.search=t}))("keyup",(function(){r.Qc(t);const c=r.Oc(12);return e.filters.search=c.value,e.onSearch.emit(e.filters)}))("search",(function(){return e.onSearch.emit(e.filters)})),r.gc(),r.hc(13,"span",10),r.cc(14,"i",11),r.gc(),r.gc(),r.gc(),r.gc(),r.hc(15,"div",12),r.hc(16,"div",13),r.hc(17,"div",14),r.hc(18,"div",15),r.hc(19,"div",16),r.hc(20,"table",17),r.hc(21,"thead"),r.hc(22,"tr"),r.hc(23,"th",18),r.cd(24,"S.No"),r.gc(),r.hc(25,"th"),r.cd(26,"Printer Name"),r.gc(),r.hc(27,"th"),r.cd(28,"Printer IP"),r.gc(),r.hc(29,"th"),r.cd(30,"Printer Port"),r.gc(),r.hc(31,"th"),r.cd(32,"Last Used"),r.gc(),r.hc(33,"th"),r.cd(34,"Status"),r.gc(),r.hc(35,"th"),r.cd(36,"Actions"),r.gc(),r.gc(),r.gc(),r.hc(37,"tbody"),r.ad(38,v,18,12,"tr",19),r.gc(),r.gc(),r.ad(39,P,4,0,"div",20),r.gc(),r.hc(40,"div",12),r.cc(41,"div",21),r.hc(42,"div",22),r.ad(43,y,13,6,"div",23),r.gc(),r.gc(),r.gc(),r.gc(),r.gc(),r.gc(),r.gc(),r.ad(44,N,47,9,"ng-template",null,24,r.bd)}2&t&&(r.Nb(11),r.Ec("ngModel",e.filters.search),r.Nb(27),r.Ec("ngForOf",e.posPrinters),r.Nb(1),r.Ec("ngIf",!(null!=e.posPrinters&&e.posPrinters.length)),r.Nb(4),r.Ec("ngIf",null==e.posPrinters?null:e.posPrinters.length))},directives:[p.a,m.b,m.i,m.l,i.o,i.p,i.n,m.r,m.m,m.t,m.u,m.j,m.k,m.q],pipes:[i.f],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:8px;font-size:14px;border:1px solid rgba(221,218,218,.3)}.form-group[_ngcontent-%COMP%]{margin-bottom:10px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px}"]}),t})()}];let D=(()=>{class t{}return t.\u0275mod=r.Zb({type:t}),t.\u0275inj=r.Yb({factory:function(e){return new(e||t)},imports:[[n.i.forChild(k)],n.i]}),t})(),O=(()=>{class t{}return t.\u0275mod=r.Zb({type:t}),t.\u0275inj=r.Yb({factory:function(e){return new(e||t)},imports:[[i.c,D,m.d,p.b]]}),t})()},MgRC:function(t,e,c){"use strict";c.d(e,"a",(function(){return r})),c.d(e,"b",(function(){return s}));var i=c("fXoL"),n=c("kmKP");let r=(()=>{class t{constructor(t,e){this.elementRef=t,this.userService=e,this.permissions={}}ngOnInit(){this.checkDocLevelAccess()}checkAccess(){this.userService.currentUser.subscribe(t=>{var e,c;if(null===(e=null==t?void 0:t.docinfo)||void 0===e?void 0:e.permissions){let e=null===(c=null==t?void 0:t.docinfo)||void 0===c?void 0:c.permissions;e.hasOwnProperty(this.accessType)&&(this.elementRef.nativeElement.disabled=!(e[this.accessType]>0))}})}checkDocLevelAccess(){var t;this.permissions=JSON.parse(localStorage.getItem("checkPermissions")),(null===(t=this.permissions)||void 0===t?void 0:t.hasOwnProperty(this.accessType))&&(this.elementRef.nativeElement.style["pointer-events"]=this.permissions[this.accessType]>0?"auto":"none",this.elementRef.nativeElement.style.cursor=this.permissions[this.accessType]>0?"pointer":"not-allowed",this.elementRef.nativeElement.disabled=!(this.permissions[this.accessType]>0))}}return t.\u0275fac=function(e){return new(e||t)(i.bc(i.o),i.bc(n.a))},t.\u0275dir=i.Wb({type:t,selectors:[["","appPermissionButton",""]],inputs:{moduleType:"moduleType",accessType:"accessType"}}),t})(),s=(()=>{class t{}return t.\u0275mod=i.Zb({type:t}),t.\u0275inj=i.Yb({factory:function(e){return new(e||t)}}),t})()}}]);