(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{IwCN:function(t,n,e){"use strict";e.r(n),e.d(n,"LoginModule",(function(){return v}));var c=e("ofXK"),o=e("tyNb"),i=e("t0ZU"),r=e("fXoL"),s=e("tk/3"),a=e("5eHb"),l=e("yFR0"),g=e("1kSV"),d=e("3Pt+"),u=e("HgEw");function h(t,n){1&t&&(r.hc(0,"small",22),r.cd(1,"Required"),r.gc())}function p(t,n){1&t&&(r.hc(0,"small",22),r.cd(1,"Required"),r.gc())}const m=function(){return["/faqs"]},b=[{path:"",component:(()=>{class t{constructor(t,n,e,c,o){this.router=t,this.http=n,this.toastr=e,this.socketService=c,this.modalService=o,this.destroyEvents=new r.q,this.toastButtons=[{id:"1",title:"view jobs 1"},{id:"2",title:"view jobs 2"}]}ngOnInit(){sessionStorage.removeItem("SelItem")}onSubmit(t){if(t.valid){const n=new FormData;n.append("usr",t.value.username),n.append("pwd",t.value.password),n.append("cmd","login"),n.append("device","desktop"),this.http.post(i.a.login,{usr:t.value.username,pwd:t.value.password}).subscribe(n=>{this.getCompanyData(),this.getTotalCount(null==n?void 0:n.full_name,t.value)},n=>{t.form.setErrors({error:n.error.message})})}else t.form.markAllAsTouched()}getTotalCount(t,n){this.http.get(""+i.a.users,{params:{fields:JSON.stringify(["count( `tabUser`.`name`) AS total_count"])}}).subscribe(e=>{this.getUSerList(e.data[0].total_count,t,n)})}getUSerList(t,n,e){const c={filters:[]};c.filters.push(["full_name","like",`%${n}%`]);let o=/\S+@\S+\.\S+/.test(e.username);console.log(o),c.filters.push(o?["email","like",`%${e.username}%`]:["username","like",`%${e.username}%`]),c.limit_page_length=t,c.filters=JSON.stringify(c.filters),this.http.get(""+i.a.users,{params:c}).subscribe(t=>{var n;(null==t?void 0:t.data)&&this.http.get(`${i.a.users}/${null===(n=null==t?void 0:t.data[0])||void 0===n?void 0:n.name}`).subscribe(t=>{if(null==t?void 0:t.data){let n=t.data.roles.map(t=>t.role);n=n.filter(t=>t.includes("ezy")),t.data.rolesFilter=n,localStorage.setItem("login",JSON.stringify(null==t?void 0:t.data)),this.router.navigate(["/home"]),this.toastr.success("successfully logged in ")}})})}getCompanyData(){this.http.get(i.a.company).subscribe(t=>{let n=t.data[0];n&&this.http.get(i.a.company+"/"+(null==n?void 0:n.name)).subscribe(t=>{localStorage.setItem("company",JSON.stringify(t.data))})})}ngOnDestroy(){this.modalService.dismissAll()}}return t.\u0275fac=function(n){return new(n||t)(r.bc(o.e),r.bc(s.b),r.bc(a.d),r.bc(l.a),r.bc(g.k))},t.\u0275cmp=r.Vb({type:t,selectors:[["app-login"]],decls:79,vars:5,consts:[[1,"bg-login"],[1,"container"],[1,"row"],[1,"col-md-7","my-auto"],[1,"content"],[1,"text-secondary"],[1,"mb-5"],[1,"c-border"],[1,"list-unstyled"],[1,"ri-check-line"],[1,"ri-close-fill"],[1,"col-md-5"],[1,"card","p-2","mb-4"],[1,"card-body"],[1,"row","mb-4"],[1,"col-12"],[1,"logo","mb-2"],["src","assets/images/EzyinvoiceLogo.png","alt","logo",1,"img-fluid"],[1,"text-muted"],[3,"ngSubmit"],["form","ngForm"],[1,"text-center","mb-2"],[1,"text-danger"],[1,"form-group"],["type","text","appMatInput","","name","username","id","name","ngModel","","required","",1,"form-control"],["name","ngModel"],["for","name",1,"mat-label"],["class","text-danger",4,"ngIf"],["type","password","appMatInput","","name","password","id","password","ngModel","","required","",1,"form-control"],["password","ngModel"],["for","password",1,"mat-label"],[1,"pt-3"],[1,"btn","btn-block","btn-primary","text-uppercase"],[1,"mt-3","faq"],["target","_blank",1,"text-dark",3,"routerLink"],[1,"ri-wechat-line"],[1,""],[1,"text-white","m-0"],["href","mailto: support@caratred.com"]],template:function(t,n){if(1&t){const t=r.ic();r.hc(0,"section",0),r.hc(1,"div",1),r.hc(2,"div",2),r.hc(3,"div",3),r.hc(4,"div",4),r.hc(5,"h2"),r.cd(6,"Automated "),r.cc(7,"br"),r.hc(8,"span",5),r.cd(9," E-Invoice"),r.gc(),r.cd(10," Integration Process"),r.gc(),r.hc(11,"div",6),r.cc(12,"span",7),r.gc(),r.hc(13,"div"),r.hc(14,"ul",8),r.hc(15,"li"),r.cc(16,"i",9),r.cd(17," Instant Invoice Submission"),r.gc(),r.hc(18,"li"),r.cc(19,"i",9),r.cd(20," Imprint IRN & QR Code to submitted Invoice"),r.gc(),r.hc(21,"li"),r.cc(22,"i",9),r.cd(23," Monthly Invoicing Reconciliation"),r.gc(),r.gc(),r.hc(24,"ul",8),r.hc(25,"li"),r.cc(26,"i",10),r.cd(27," No Bulk Invoice Uploads Required"),r.gc(),r.hc(28,"li"),r.cc(29,"i",10),r.cd(30," No PMS Upgrades Required"),r.gc(),r.hc(31,"li"),r.cc(32,"i",9),r.cd(33," Works with any PMS"),r.gc(),r.gc(),r.gc(),r.gc(),r.gc(),r.hc(34,"div",11),r.hc(35,"div",12),r.hc(36,"div",13),r.hc(37,"div",14),r.hc(38,"div",15),r.hc(39,"div",16),r.cc(40,"img",17),r.gc(),r.hc(41,"h2"),r.cd(42,"Welcome to EZY Invoice"),r.gc(),r.hc(43,"p",18),r.hc(44,"b"),r.cd(45,"Sign in using your credentials"),r.gc(),r.gc(),r.gc(),r.gc(),r.hc(46,"form",19,20),r.sc("ngSubmit",(function(){r.Pc(t);const e=r.Nc(47);return n.onSubmit(e)})),r.hc(48,"div",21),r.hc(49,"small",22),r.hc(50,"strong"),r.cd(51),r.gc(),r.gc(),r.gc(),r.hc(52,"div",23),r.cc(53,"input",24,25),r.hc(55,"label",26),r.cd(56,"Username"),r.gc(),r.ad(57,h,2,0,"small",27),r.gc(),r.hc(58,"div",23),r.cc(59,"input",28,29),r.hc(61,"label",30),r.cd(62,"Password"),r.gc(),r.ad(63,p,2,0,"small",27),r.gc(),r.hc(64,"div",31),r.hc(65,"button",32),r.cd(66,"Sign In"),r.gc(),r.hc(67,"div",33),r.hc(68,"a",34),r.hc(69,"b"),r.cc(70,"i",35),r.cd(71," FAQs"),r.gc(),r.gc(),r.gc(),r.gc(),r.gc(),r.gc(),r.gc(),r.hc(72,"div"),r.hc(73,"div",36),r.hc(74,"p",37),r.cd(75,"Have a problem? Contact us at "),r.hc(76,"a",38),r.cd(77," support@caratred.com"),r.gc(),r.gc(),r.cc(78,"br"),r.gc(),r.gc(),r.gc(),r.gc(),r.gc(),r.gc()}if(2&t){const t=r.Nc(47),n=r.Nc(54),e=r.Nc(60);r.Nb(51),r.dd(t.form.getError("error")),r.Nb(6),r.Dc("ngIf",t.submitted&&(null==n||null==n.errors?null:n.errors.required)),r.Nb(6),r.Dc("ngIf",t.submitted&&(null==e||null==e.errors?null:e.errors.required)),r.Nb(5),r.Dc("routerLink",r.Gc(4,m))}},directives:[d.u,d.j,d.k,d.b,u.a,d.i,d.l,d.q,c.p,o.h],styles:[".login-card[_ngcontent-%COMP%]{min-height:100vh;width:100%;display:flex;display:-ms-flexbox;justify-content:center;align-items:center}.login-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{min-width:500px}.login-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .col-8[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.45rem}@media (max-width:767px){.card[_ngcontent-%COMP%]{min-width:320px!important}}.bg-login[_ngcontent-%COMP%]{background:url(login-bg.576f40086191f9afdbda.png);background-size:contain;background-position:50%;height:100vh;width:100%;display:flex;justify-content:center;align-items:center}.bg-login[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:28px;line-height:39px;font-weight:600}.bg-login[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   span.c-border[_ngcontent-%COMP%]{width:180px;height:2px;background:#fff;display:block;margin:20px 0}.bg-login[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:17px;color:#fff;padding:5px 0;font-weight:500}.bg-login[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:10px;font-weight:700}.bg-login[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#17125c;font-size:20px;font-weight:500;margin-bottom:5px}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:40px}.faq[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px;position:relative;top:3px}.faq[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{color:#17125c}.faq[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:none}"]}),t})()}];let f=(()=>{class t{}return t.\u0275mod=r.Zb({type:t}),t.\u0275inj=r.Yb({factory:function(n){return new(n||t)},imports:[[o.i.forChild(b)],o.i]}),t})(),v=(()=>{class t{}return t.\u0275mod=r.Zb({type:t}),t.\u0275inj=r.Yb({factory:function(n){return new(n||t)},imports:[[c.c,f,d.d,u.b]]}),t})()}}]);